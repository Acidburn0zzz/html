<!DOCTYPE html>
<html lang="en-US-x-Hixie"><head><meta charset="utf-8"><title>4.10.20 APIs for the text field selections &#8212; HTML5</title><style type="text/css">

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies tbody th { white-space: nowrap; }
   .applies td { text-align: center; }
   .applies .yes { background: yellow; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .details-example img { vertical-align: top; }

   #base64-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 6em;
     column-count: 5;
     column-gap: 1em;
     -moz-column-width: 6em;
     -moz-column-count: 5;
     -moz-column-gap: 1em;
     -webkit-column-width: 6em;
     -webkit-column-count: 5;
     -webkit-column-gap: 1em;
   }
   #base64-table thead { display: none; }
   #base64-table * { border: none; }
   #base64-table tbody td:first-child:after { content: ':'; }
   #base64-table tbody td:last-child { text-align: right; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   @font-face {
     font-family: 'Essays1743';
     src: url('fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('fonts/Essays1743-BoldItalic.ttf');
   }

  </style><link href="data:text/css," id="complete" rel="stylesheet" title="Complete specification"><link href="data:text/css,.impl%20%7B%20display:%20none;%20%7D%0Ahtml%20%7B%20border:%20solid%20yellow;%20%7D%20.domintro:before%20%7B%20display:%20none;%20%7D" id="author" rel="alternate stylesheet" title="Author documentation only"><link href="data:text/css,.impl%20%7B%20background:%20%23FFEEEE;%20%7D%20.domintro:before%20%7B%20background:%20%23FFEEEE;%20%7D" id="highlight" rel="alternate stylesheet" title="Highlight implementation requirements"><style type="text/css">
   pre { margin-left: 2em; white-space: pre-wrap; }
   h2 { margin: 3em 0 1em 0; }
   h3 { margin: 2.5em 0 1em 0; }
   h4 { margin: 2.5em 0 0.75em 0; }
   h5, h6 { margin: 2.5em 0 1em; }
   h1 + h2, h1 + h2 + h2 { margin: 0.75em 0 0.75em; }
   h2 + h3, h3 + h4, h4 + h5, h5 + h6 { margin-top: 0.5em; }
   p { margin: 1em 0; }
   hr:not(.top) { display: block; background: none; border: none; padding: 0; margin: 2em 0; height: auto; }
   dl, dd { margin-top: 0; margin-bottom: 0; }
   dt { margin-top: 0.75em; margin-bottom: 0.25em; clear: left; }
   dt + dt { margin-top: 0; }
   dd dt { margin-top: 0.25em; margin-bottom: 0; }
   dd p { margin-top: 0; }
   dd dl + p { margin-top: 1em; }
   dd table + p { margin-top: 1em; }
   p + * > li, dd li { margin: 1em 0; }
   dt, dfn { font-weight: bold; font-style: normal; }
   i, em { font-style: italic; }
   dt dfn { font-style: italic; }
   pre, code { font-size: inherit; font-family: monospace; font-variant: normal; }
   pre strong { color: black; font: inherit; font-weight: bold; background: yellow; }
   pre em { font-weight: bolder; font-style: normal; }
   @media screen { code { color: orangered; } code :link, code :visited { color: inherit; } }
   var sub { vertical-align: bottom; font-size: smaller; position: relative; top: 0.1em; }
   table { border-collapse: collapse; border-style: hidden hidden none hidden; }
   table thead, table tbody { border-bottom: solid; }
   table tbody th:first-child { border-left: solid; }
   table tbody th { text-align: left; }
   table td, table th { border-left: solid; border-right: solid; border-bottom: solid thin; vertical-align: top; padding: 0.2em; }
   blockquote { margin: 0 0 0 2em; border: 0; padding: 0; font-style: italic; }

   .bad, .bad *:not(.XXX) { color: gray; border-color: gray; background: transparent; }
   .matrix, .matrix td { border: none; text-align: right; }
   .matrix { margin-left: 2em; }
   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   .toc dfn, h1 dfn, h2 dfn, h3 dfn, h4 dfn, h5 dfn, h6 dfn { font: inherit; }
   img.extra, p.overview { float: right; }
   pre.idl { border: solid thin; background: #EEEEEE; color: black; padding: 0.5em 1em; position: relative; }
   pre.idl :link, pre.idl :visited { color: inherit; background: transparent; }
   pre.idl::before { content: "IDL"; font: bold small sans-serif; padding: 0.5em; background: white; position: absolute; top: 0; margin: -1px 0 0 -4em; width: 1.5em; border: thin solid; border-radius: 0 0 0 0.5em }
   pre.css { border: solid thin; background: #FFFFEE; color: black; padding: 0.5em 1em; }
   pre.css:first-line { color: #AAAA50; }
   dl.domintro { color: green; margin: 2em 0 2em 2em; padding: 0.5em 1em; border: none; background: #DDFFDD; }
   hr + dl.domintro, div.impl + dl.domintro { margin-top: 2.5em; margin-bottom: 1.5em; }
   dl.domintro dt, dl.domintro dt * { color: black; text-decoration: none; }
   dl.domintro dd { margin: 0.5em 0 1em 2em; padding: 0; }
   dl.domintro dd p { margin: 0.5em 0; }
   dl.domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This box is non-normative. Implementation requirements are given below this box.'; color: black; font-style: italic; border: solid 2px; background: white; padding: 0 0.25em; }
   dl.switch { padding-left: 2em; }
   dl.switch > dt { text-indent: -1.5em; }
   dl.switch > dt:before { content: '\21AA'; padding: 0 0.5em 0 0; display: inline-block; width: 1em; text-align: right; line-height: 0.5em; }
   dl.triple { padding: 0 0 0 1em; }
   dl.triple dt, dl.triple dd { margin: 0; display: inline }
   dl.triple dt:after { content: ':'; }
   dl.triple dd:after { content: '\A'; white-space: pre; }
   .diff-old { text-decoration: line-through; color: silver; background: transparent; }
   .diff-chg, .diff-new { text-decoration: underline; color: green; background: transparent; }
   a .diff-new { border-bottom: 1px blue solid; }

   figure.diagrams { border: double black; background: white; padding: 1em; }
   figure.diagrams img { display: block; margin: 1em auto; } 

   h2 { page-break-before: always; }
   h1, h2, h3, h4, h5, h6 { page-break-after: avoid; }
   h1 + h2, hr + h2.no-toc { page-break-before: auto; }

   p  > span:not([title=""]):not([class="XXX"]):not([class="impl"]):not([class="note"]),
   li > span:not([title=""]):not([class="XXX"]):not([class="impl"]):not([class="note"]) { border-bottom: solid #9999CC; }

   div.head { margin: 0 0 1em; padding: 1em 0 0 0; }
   div.head p { margin: 0; }
   div.head h1 { margin: 0; }
   div.head .logo { float: right; margin: 0 1em; }
   div.head .logo img { border: none } /* remove border from top image */
   div.head dl { margin: 1em 0; }
   div.head p.copyright, div.head p.alt { font-size: x-small; font-style: oblique; margin: 0; }

   body > .toc > li { margin-top: 1em; margin-bottom: 1em; }
   body > .toc.brief > li { margin-top: 0.35em; margin-bottom: 0.35em; }
   body > .toc > li > * { margin-bottom: 0.5em; }
   body > .toc > li > * > li > * { margin-bottom: 0.25em; }
   .toc, .toc li { list-style: none; }

   .brief { margin-top: 1em; margin-bottom: 1em; line-height: 1.1; }
   .brief li { margin: 0; padding: 0; }
   .brief li p { margin: 0; padding: 0; }

   .category-list { margin-top: -0.75em; margin-bottom: 1em; line-height: 1.5; }
   .category-list::before { content: '\21D2\A0'; font-size: 1.2em; font-weight: 900; }
   .category-list li { display: inline; }
   .category-list li:not(:last-child)::after { content: ', '; }
   .category-list li > span, .category-list li > a { text-transform: lowercase; }
   .category-list li * { text-transform: none; } /* don't affect <code> nested in <a> */

   .XXX { color: #E50000; background: white; border: solid red; padding: 0.5em; margin: 1em 0; }
   .XXX > :first-child { margin-top: 0; }
   p .XXX { line-height: 3em; }
   .annotation { border: solid thin black; background: #0C479D; color: white; position: relative; margin: 8px 0 20px 0; }
   .annotation:before { position: absolute; left: 0; top: 0; width: 100%; height: 100%; margin: 6px -6px -6px 6px; background: #333333; z-index: -1; content: ''; }
   .annotation :link, .annotation :visited { color: inherit; }
   .annotation :link:hover, .annotation :visited:hover { background: transparent; }
   .annotation span { border: none ! important; }
   .note { color: green; background: transparent; font-family: sans-serif; }
   .warning { color: red; background: transparent; }
   .note, .warning { font-weight: bolder; font-style: italic; }
   .note em, .warning em, .note i, .warning i { font-style: normal; }
   p.note, div.note { padding: 0.5em 2em; }
   span.note { padding: 0 2em; }
   .note p:first-child, .warning p:first-child { margin-top: 0; }
   .note p:last-child, .warning p:last-child { margin-bottom: 0; }
   .warning:before { font-style: normal; }
   p.note:before { content: 'Note: '; }
   p.warning:before { content: '\26A0 Warning! '; }

   .bookkeeping:before { display: block; content: 'Bookkeeping details'; font-weight: bolder; font-style: italic; }
   .bookkeeping { font-size: 0.8em; margin: 2em 0; }
   .bookkeeping p { margin: 0.5em 2em; display: list-item; list-style: square; }
   .bookkeeping dt { margin: 0.5em 2em 0; }
   .bookkeeping dd { margin: 0 3em 0.5em; }

   h4 { position: relative; z-index: 3; }
   h4 + .element, h4 + div + .element { margin-top: -2.5em; padding-top: 2em; }
   .element {
     background: #EEEEFF;
     color: black;
     margin: 0 0 1em 0.15em;
     padding: 0 1em 0.25em 0.75em;
     border-left: solid #9999FF 0.25em;
     position: relative;
     z-index: 1;
   }
   .element:before {
     position: absolute;
     z-index: 2;
     top: 0;
     left: -1.15em;
     height: 2em;
     width: 0.9em;
     background: #EEEEFF;
     content: ' ';
     border-style: none none solid solid;
     border-color: #9999FF;
     border-width: 0.25em;
   }

   .example { display: block; color: #222222; background: #FCFCFC; border-left: double; margin-left: 2em; padding-left: 1em; }
   td > .example:only-child { margin: 0 0 0 0.1em; }

   ul.domTree, ul.domTree ul { padding: 0 0 0 1em; margin: 0; }
   ul.domTree li { padding: 0; margin: 0; list-style: none; position: relative; }
   ul.domTree li li { list-style: none; }
   ul.domTree li:first-child::before { position: absolute; top: 0; height: 0.6em; left: -0.75em; width: 0.5em; border-style: none none solid solid; content: ''; border-width: 0.1em; }
   ul.domTree li:not(:last-child)::after { position: absolute; top: 0; bottom: -0.6em; left: -0.75em; width: 0.5em; border-style: none none solid solid; content: ''; border-width: 0.1em; }
   ul.domTree span { font-style: italic; font-family: serif; }
   ul.domTree .t1 code { color: purple; font-weight: bold; }
   ul.domTree .t2 { font-style: normal; font-family: monospace; }
   ul.domTree .t2 .name { color: black; font-weight: bold; }
   ul.domTree .t2 .value { color: blue; font-weight: normal; }
   ul.domTree .t3 code, .domTree .t4 code, .domTree .t5 code { color: gray; }
   ul.domTree .t7 code, .domTree .t8 code { color: green; }
   ul.domTree .t10 code { color: teal; }

   body.dfnEnabled dfn { cursor: pointer; }
   .dfnPanel {
     display: inline;
     position: absolute;
     z-index: 10;
     height: auto;
     width: auto;
     padding: 0.5em 0.75em;
     font: small sans-serif, Droid Sans Fallback;
     background: #DDDDDD;
     color: black;
     border: outset 0.2em;
   }
   .dfnPanel * { margin: 0; padding: 0; font: inherit; text-indent: 0; }
   .dfnPanel :link, .dfnPanel :visited { color: black; }
   .dfnPanel p { font-weight: bolder; }
   .dfnPanel * + p { margin-top: 0.25em; }
   .dfnPanel li { list-style-position: inside; }

   #configUI { position: absolute; z-index: 20; top: 10em; right: 1em; width: 11em; font-size: small; }
   #configUI p { margin: 0.5em 0; padding: 0.3em; background: #EEEEEE; color: black; border: inset thin; }
   #configUI p label { display: block; }
   #configUI #updateUI, #configUI .loginUI { text-align: center; }
   #configUI input[type=button] { display: block; margin: auto; }

   fieldset { margin: 1em; padding: 0.5em 1em; }
   fieldset > legend + * { margin-top: 0; }
   fieldset > :last-child { margin-bottom: 0; }
   fieldset p { margin: 0.5em 0; }

   .stability {
     position: fixed;
     bottom: 0;
     left: 0; right: 0;
     margin: 0 auto 0 auto;
     width: 50%;
     background: maroon; color: yellow;
     -webkit-border-radius: 1em 1em 0 0;
     -moz-border-radius: 1em 1em 0 0;
     border-radius: 1em 1em 0 0;
     -moz-box-shadow: 0 0 1em #500;
     -webkit-box-shadow: 0 0 1em #500;
     box-shadow: 0 0 1em red;
     padding: 0.5em 1em;
     text-align: center;
   }
   .stability strong {
     display: block;
   }
   .stability input {
     -moz-appearance: none; -webkit-appearance: none; margin: 0; 
     border: 0; padding: 0.25em 0.5em; background: transparent; color: black;
     position: absolute; top: -0.5em; right: 0; font: 1.25em sans-serif; text-align: center;
   }
   .stability input:hover {
     color: white;
     text-shadow: 0 0 2px black;
   }
   .stability input:active {
     padding: 0.3em 0.45em 0.2em 0.55em;
   }
   .stability :link, .stability :visited,
   .stability :link:hover, .stability :visited:hover {
     background: transparent;
     color: white;
   }

  </style><link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet" type="text/css"><meta content="noindex" name="robots"><script>
   function getCookie(name) {
     var params = location.search.substr(1).split("&");
     for (var index = 0; index < params.length; index++) {
       if (params[index] == name)
         return "1";
       var data = params[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     var cookies = document.cookie.split("; ");
     for (var index = 0; index < cookies.length; index++) {
       var data = cookies[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     return null;
   }
  </script><link href="form-submission.html" title="4.10.19.6 Form submission" rel="prev">
  <link href="index.html#contents" title="Table of contents" rel="contents">
  </head><body onload="fixBrokenLink();" class="split chapter"><div class="head" id="head">
   <p><a href="http://www.w3.org/"><img alt="W3C" height="48" src="http://www.w3.org/Icons/w3c_home" width="72"></a></p>

   <h1>HTML5</h1>
   <h2 class="no-num no-toc" id="a-vocabulary-and-associated-apis-for-html-and-xhtml">A vocabulary and associated APIs for HTML and XHTML</h2>
   <h2 class="no-num no-toc" id="w3c-working-draft-11-october-2012">W3C Working Draft 11 October 2012</h2>
   </div>
  

  <div class="prev_next">
   <a href="form-submission.html">&#8592; 4.10.19.6 Form submission</a> &#8211;
   <a href="index.html#contents">Table of contents</a>
  <ol class="toc"><li><ol><li><ol><li><a href="textFieldSelection.html#textFieldSelection"><span class="secno">4.10.20 </span>APIs for the text field selections</a></li><li><a href="textFieldSelection.html#constraints"><span class="secno">4.10.21 </span>Constraints</a>
      <ol><li><a href="textFieldSelection.html#definitions"><span class="secno">4.10.21.1 </span>Definitions</a></li><li><a href="textFieldSelection.html#constraint-validation"><span class="secno">4.10.21.2 </span>Constraint validation</a></li><li><a href="textFieldSelection.html#the-constraint-validation-api"><span class="secno">4.10.21.3 </span>The constraint validation API</a></li><li><a href="textFieldSelection.html#security-forms"><span class="secno">4.10.21.4 </span>Security</a></li></ol></li><li><a href="textFieldSelection.html#form-submission-0"><span class="secno">4.10.22 </span>Form submission</a>
      <ol><li><a href="textFieldSelection.html#introduction-2"><span class="secno">4.10.22.1 </span>Introduction</a></li><li><a href="textFieldSelection.html#implicit-submission"><span class="secno">4.10.22.2 </span>Implicit submission</a></li><li><a href="textFieldSelection.html#form-submission-algorithm"><span class="secno">4.10.22.3 </span>Form submission algorithm</a></li><li><a href="textFieldSelection.html#constructing-form-data-set"><span class="secno">4.10.22.4 </span>Constructing the form data set</a></li><li><a href="textFieldSelection.html#url-encoded-form-data"><span class="secno">4.10.22.5 </span>URL-encoded form data</a></li><li><a href="textFieldSelection.html#multipart-form-data"><span class="secno">4.10.22.6 </span>Multipart form data</a></li><li><a href="textFieldSelection.html#plain-text-form-data"><span class="secno">4.10.22.7 </span>Plain text form data</a></li></ol></li><li><a href="textFieldSelection.html#resetting-a-form"><span class="secno">4.10.23 </span>Resetting a form</a></li></ol></li><li><a href="textFieldSelection.html#interactive-elements"><span class="secno">4.11 </span>Interactive elements</a>
    <ol><li><a href="textFieldSelection.html#the-details-element"><span class="secno">4.11.1 </span>The <code>details</code> element</a></li><li><a href="textFieldSelection.html#the-summary-element"><span class="secno">4.11.2 </span>The <code>summary</code> element</a></li><li><a href="textFieldSelection.html#the-command-element"><span class="secno">4.11.3 </span>The <code>command</code> element</a></li><li><a href="textFieldSelection.html#the-menu-element"><span class="secno">4.11.4 </span>The <code>menu</code> element</a>
      <ol><li><a href="textFieldSelection.html#menus-intro"><span class="secno">4.11.4.1 </span>Introduction</a></li><li><a href="textFieldSelection.html#building-menus-and-toolbars"><span class="secno">4.11.4.2 </span>Building menus and toolbars</a></li><li><a href="textFieldSelection.html#context-menus"><span class="secno">4.11.4.3 </span>Context menus</a></li><li><a href="textFieldSelection.html#toolbars"><span class="secno">4.11.4.4 </span>Toolbars</a></li></ol></li><li><a href="textFieldSelection.html#commands"><span class="secno">4.11.5 </span>Commands</a>
      <ol><li><a href="textFieldSelection.html#using-the-a-element-to-define-a-command"><span class="secno">4.11.5.1 </span>Using the <code>a</code> element to define a command</a></li><li><a href="textFieldSelection.html#using-the-button-element-to-define-a-command"><span class="secno">4.11.5.2 </span>Using the <code>button</code> element to define a command</a></li><li><a href="textFieldSelection.html#using-the-input-element-to-define-a-command"><span class="secno">4.11.5.3 </span>Using the <code>input</code> element to define a command</a></li><li><a href="textFieldSelection.html#using-the-option-element-to-define-a-command"><span class="secno">4.11.5.4 </span>Using the <code>option</code> element to define a command</a></li><li><a href="textFieldSelection.html#using-the-command-element-to-define-a-command"><span class="secno">4.11.5.5 </span>Using the <code>command</code> element to define
  a command</a></li><li><a href="textFieldSelection.html#using-the-command-attribute-on-command-elements-to-define-a-command-indirectly"><span class="secno">4.11.5.6 </span>Using the <code title="attr-command-command">command</code> attribute on <code>command</code> elements to define a command indirectly</a></li><li><a href="textFieldSelection.html#using-the-accesskey-attribute-on-a-label-element-to-define-a-command"><span class="secno">4.11.5.7 </span>Using the <code title="attr-accesskey">accesskey</code> attribute on a <code>label</code> element to define a command</a></li><li><a href="textFieldSelection.html#using-the-accesskey-attribute-on-a-legend-element-to-define-a-command"><span class="secno">4.11.5.8 </span>Using the <code title="attr-accesskey">accesskey</code> attribute on a <code>legend</code> element to define a command</a></li><li><a href="textFieldSelection.html#using-the-accesskey-attribute-to-define-a-command-on-other-elements"><span class="secno">4.11.5.9 </span>Using the <code title="attr-accesskey">accesskey</code> attribute to define a command on other elements</a></li></ol></li><li><a href="textFieldSelection.html#the-dialog-element"><span class="secno">4.11.6 </span>The <code>dialog</code> element</a>
      <ol><li><a href="textFieldSelection.html#anchor-points"><span class="secno">4.11.6.1 </span>Anchor points</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#links"><span class="secno">4.12 </span>Links</a>
    <ol><li><a href="textFieldSelection.html#introduction-3"><span class="secno">4.12.1 </span>Introduction</a></li><li><a href="textFieldSelection.html#links-created-by-a-and-area-elements"><span class="secno">4.12.2 </span>Links created by <code>a</code> and <code>area</code> elements</a></li><li><a href="textFieldSelection.html#following-hyperlinks"><span class="secno">4.12.3 </span>Following hyperlinks</a></li><li><a href="textFieldSelection.html#downloading-resources"><span class="secno">4.12.4 </span>Downloading resources</a>
      <ol><li><a href="textFieldSelection.html#hyperlink-auditing"><span class="secno">4.12.4.1 </span>Hyperlink auditing</a></li></ol></li><li><a href="textFieldSelection.html#linkTypes"><span class="secno">4.12.5 </span>Link types</a>
      <ol><li><a href="textFieldSelection.html#rel-alternate"><span class="secno">4.12.5.1 </span>Link type "<code>alternate</code>"</a></li><li><a href="textFieldSelection.html#link-type-author"><span class="secno">4.12.5.2 </span>Link type "<code>author</code>"</a></li><li><a href="textFieldSelection.html#link-type-bookmark"><span class="secno">4.12.5.3 </span>Link type "<code>bookmark</code>"</a></li><li><a href="textFieldSelection.html#link-type-help"><span class="secno">4.12.5.4 </span>Link type "<code>help</code>"</a></li><li><a href="textFieldSelection.html#rel-icon"><span class="secno">4.12.5.5 </span>Link type "<code>icon</code>"</a></li><li><a href="textFieldSelection.html#link-type-license"><span class="secno">4.12.5.6 </span>Link type "<code>license</code>"</a></li><li><a href="textFieldSelection.html#link-type-nofollow"><span class="secno">4.12.5.7 </span>Link type "<code>nofollow</code>"</a></li><li><a href="textFieldSelection.html#link-type-noreferrer"><span class="secno">4.12.5.8 </span>Link type "<code>noreferrer</code>"</a></li><li><a href="textFieldSelection.html#link-type-prefetch"><span class="secno">4.12.5.9 </span>Link type "<code>prefetch</code>"</a></li><li><a href="textFieldSelection.html#link-type-search"><span class="secno">4.12.5.10 </span>Link type "<code>search</code>"</a></li><li><a href="textFieldSelection.html#link-type-stylesheet"><span class="secno">4.12.5.11 </span>Link type "<code>stylesheet</code>"</a></li><li><a href="textFieldSelection.html#link-type-tag"><span class="secno">4.12.5.12 </span>Link type "<code>tag</code>"</a></li><li><a href="textFieldSelection.html#sequential-link-types"><span class="secno">4.12.5.13 </span>Sequential link types</a>
        <ol><li><a href="textFieldSelection.html#link-type-next"><span class="secno">4.12.5.13.1 </span>Link type "<code>next</code>"</a></li><li><a href="textFieldSelection.html#link-type-prev"><span class="secno">4.12.5.13.2 </span>Link type "<code>prev</code>"</a></li></ol></li><li><a href="textFieldSelection.html#other-link-types"><span class="secno">4.12.5.14 </span>Other link types</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#common-idioms"><span class="secno">4.13 </span>Common idioms without dedicated elements</a>
    <ol><li><a href="textFieldSelection.html#the-main-part-of-the-content"><span class="secno">4.13.1 </span>The main part of the content</a></li><li><a href="textFieldSelection.html#rel-up"><span class="secno">4.13.2 </span>Bread crumb navigation</a></li><li><a href="textFieldSelection.html#tag-clouds"><span class="secno">4.13.3 </span>Tag clouds</a></li><li><a href="textFieldSelection.html#conversations"><span class="secno">4.13.4 </span>Conversations</a></li><li><a href="textFieldSelection.html#footnotes"><span class="secno">4.13.5 </span>Footnotes</a></li></ol></li><li><a href="textFieldSelection.html#selectors"><span class="secno">4.14 </span>Matching HTML elements using selectors</a>
    <ol><li><a href="textFieldSelection.html#case-sensitivity"><span class="secno">4.14.1 </span>Case-sensitivity</a></li><li><a href="textFieldSelection.html#pseudo-classes"><span class="secno">4.14.2 </span>Pseudo-classes</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#browsers"><span class="secno">5 </span>Loading Web pages</a>
  <ol><li><a href="textFieldSelection.html#windows"><span class="secno">5.1 </span>Browsing contexts</a>
    <ol><li><a href="textFieldSelection.html#nested-browsing-contexts"><span class="secno">5.1.1 </span>Nested browsing contexts</a>
      <ol><li><a href="textFieldSelection.html#navigating-nested-browsing-contexts-in-the-dom"><span class="secno">5.1.1.1 </span>Navigating nested browsing contexts in the DOM</a></li></ol></li><li><a href="textFieldSelection.html#auxiliary-browsing-contexts"><span class="secno">5.1.2 </span>Auxiliary browsing contexts</a>
      <ol><li><a href="textFieldSelection.html#navigating-auxiliary-browsing-contexts-in-the-dom"><span class="secno">5.1.2.1 </span>Navigating auxiliary browsing contexts in the DOM</a></li></ol></li><li><a href="textFieldSelection.html#secondary-browsing-contexts"><span class="secno">5.1.3 </span>Secondary browsing contexts</a></li><li><a href="textFieldSelection.html#security-nav"><span class="secno">5.1.4 </span>Security</a></li><li><a href="textFieldSelection.html#groupings-of-browsing-contexts"><span class="secno">5.1.5 </span>Groupings of browsing contexts</a></li><li><a href="textFieldSelection.html#browsing-context-names"><span class="secno">5.1.6 </span>Browsing context names</a></li></ol></li><li><a href="textFieldSelection.html#the-window-object"><span class="secno">5.2 </span>The <code>Window</code> object</a>
    <ol><li><a href="textFieldSelection.html#security-window"><span class="secno">5.2.1 </span>Security</a></li><li><a href="textFieldSelection.html#apis-for-creating-and-navigating-browsing-contexts-by-name"><span class="secno">5.2.2 </span>APIs for creating and navigating browsing contexts by name</a></li><li><a href="textFieldSelection.html#accessing-other-browsing-contexts"><span class="secno">5.2.3 </span>Accessing other browsing contexts</a></li><li><a href="textFieldSelection.html#named-access-on-the-window-object"><span class="secno">5.2.4 </span>Named access on the <code>Window</code> object</a></li><li><a href="textFieldSelection.html#garbage-collection-and-browsing-contexts"><span class="secno">5.2.5 </span>Garbage collection and browsing contexts</a></li><li><a href="textFieldSelection.html#browser-interface-elements"><span class="secno">5.2.6 </span>Browser interface elements</a></li><li><a href="textFieldSelection.html#the-windowproxy-object"><span class="secno">5.2.7 </span>The <code>WindowProxy</code> object</a></li></ol></li><li><a href="textFieldSelection.html#origin"><span class="secno">5.3 </span>Origin</a>
    <ol><li><a href="textFieldSelection.html#relaxing-the-same-origin-restriction"><span class="secno">5.3.1 </span>Relaxing the same-origin restriction</a></li></ol></li><li><a href="textFieldSelection.html#sandboxing"><span class="secno">5.4 </span>Sandboxing</a></li><li><a href="textFieldSelection.html#history"><span class="secno">5.5 </span>Session history and navigation</a>
    <ol><li><a href="textFieldSelection.html#the-session-history-of-browsing-contexts"><span class="secno">5.5.1 </span>The session history of browsing contexts</a></li><li><a href="textFieldSelection.html#the-history-interface"><span class="secno">5.5.2 </span>The <code>History</code> interface</a></li><li><a href="textFieldSelection.html#the-location-interface"><span class="secno">5.5.3 </span>The <code>Location</code> interface</a>
      <ol><li><a href="textFieldSelection.html#security-location"><span class="secno">5.5.3.1 </span>Security</a></li></ol></li><li><a href="textFieldSelection.html#history-notes"><span class="secno">5.5.4 </span>Implementation notes for session history</a></li></ol></li><li><a href="textFieldSelection.html#browsing-the-web"><span class="secno">5.6 </span>Browsing the Web</a>
    <ol><li><a href="textFieldSelection.html#navigating-across-documents"><span class="secno">5.6.1 </span>Navigating across documents</a></li><li><a href="textFieldSelection.html#read-html"><span class="secno">5.6.2 </span>Page load processing model for HTML files</a></li><li><a href="textFieldSelection.html#read-xml"><span class="secno">5.6.3 </span>Page load processing model for XML files</a></li><li><a href="textFieldSelection.html#read-text"><span class="secno">5.6.4 </span>Page load processing model for text files</a></li><li><a href="textFieldSelection.html#read-multipart-x-mixed-replace"><span class="secno">5.6.5 </span>Page load processing model for <code>multipart/x-mixed-replace</code> resources</a></li><li><a href="textFieldSelection.html#read-media"><span class="secno">5.6.6 </span>Page load processing model for media</a></li><li><a href="textFieldSelection.html#read-plugin"><span class="secno">5.6.7 </span>Page load processing model for content that uses plugins</a></li><li><a href="textFieldSelection.html#read-ua-inline"><span class="secno">5.6.8 </span>Page load processing model for inline content that doesn't have a DOM</a></li><li><a href="textFieldSelection.html#scroll-to-fragid"><span class="secno">5.6.9 </span>Navigating to a fragment identifier</a></li><li><a href="textFieldSelection.html#history-traversal"><span class="secno">5.6.10 </span>History traversal</a>
      <ol><li><a href="textFieldSelection.html#event-definitions-0"><span class="secno">5.6.10.1 </span>Event definitions</a></li></ol></li><li><a href="textFieldSelection.html#unloading-documents"><span class="secno">5.6.11 </span>Unloading documents</a>
      <ol><li><a href="textFieldSelection.html#event-definition"><span class="secno">5.6.11.1 </span>Event definition</a></li></ol></li><li><a href="textFieldSelection.html#aborting-a-document-load"><span class="secno">5.6.12 </span>Aborting a document load</a></li></ol></li><li><a href="textFieldSelection.html#offline"><span class="secno">5.7 </span>Offline Web applications</a>
    <ol><li><a href="textFieldSelection.html#introduction-4"><span class="secno">5.7.1 </span>Introduction</a>
      <ol><li><a href="textFieldSelection.html#appcacheevents"><span class="secno">5.7.1.1 </span>Event summary</a></li></ol></li><li><a href="textFieldSelection.html#appcache"><span class="secno">5.7.2 </span>Application caches</a></li><li><a href="textFieldSelection.html#manifests"><span class="secno">5.7.3 </span>The cache manifest syntax</a>
      <ol><li><a href="textFieldSelection.html#some-sample-manifests"><span class="secno">5.7.3.1 </span>Some sample manifests</a></li><li><a href="textFieldSelection.html#writing-cache-manifests"><span class="secno">5.7.3.2 </span>Writing cache manifests</a></li><li><a href="textFieldSelection.html#parsing-cache-manifests"><span class="secno">5.7.3.3 </span>Parsing cache manifests</a></li></ol></li><li><a href="textFieldSelection.html#downloading-or-updating-an-application-cache"><span class="secno">5.7.4 </span>Downloading or updating an application cache</a></li><li><a href="textFieldSelection.html#the-application-cache-selection-algorithm"><span class="secno">5.7.5 </span>The application cache selection algorithm</a></li><li><a href="textFieldSelection.html#changesToNetworkingModel"><span class="secno">5.7.6 </span>Changes to the networking model</a></li><li><a href="textFieldSelection.html#expiring-application-caches"><span class="secno">5.7.7 </span>Expiring application caches</a></li><li><a href="textFieldSelection.html#disk-space"><span class="secno">5.7.8 </span>Disk space</a></li><li><a href="textFieldSelection.html#application-cache-api"><span class="secno">5.7.9 </span>Application cache API</a></li><li><a href="textFieldSelection.html#browser-state"><span class="secno">5.7.10 </span>Browser state</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#webappapis"><span class="secno">6 </span>Web application APIs</a>
  <ol><li><a href="textFieldSelection.html#scripting"><span class="secno">6.1 </span>Scripting</a>
    <ol><li><a href="textFieldSelection.html#introduction-5"><span class="secno">6.1.1 </span>Introduction</a></li><li><a href="textFieldSelection.html#enabling-and-disabling-scripting"><span class="secno">6.1.2 </span>Enabling and disabling scripting</a></li><li><a href="textFieldSelection.html#processing-model-2"><span class="secno">6.1.3 </span>Processing model</a>
      <ol><li><a href="textFieldSelection.html#definitions-0"><span class="secno">6.1.3.1 </span>Definitions</a></li><li><a href="textFieldSelection.html#calling-scripts"><span class="secno">6.1.3.2 </span>Calling scripts</a></li><li><a href="textFieldSelection.html#creating-scripts"><span class="secno">6.1.3.3 </span>Creating scripts</a></li><li><a href="textFieldSelection.html#killing-scripts"><span class="secno">6.1.3.4 </span>Killing scripts</a></li><li><a href="textFieldSelection.html#runtime-script-errors"><span class="secno">6.1.3.5 </span>Runtime script errors</a>
        <ol><li><a href="textFieldSelection.html#runtime-script-errors-in-documents"><span class="secno">6.1.3.5.1 </span>Runtime script errors in documents</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#event-loops"><span class="secno">6.1.4 </span>Event loops</a>
      <ol><li><a href="textFieldSelection.html#definitions-1"><span class="secno">6.1.4.1 </span>Definitions</a></li><li><a href="textFieldSelection.html#processing-model-3"><span class="secno">6.1.4.2 </span>Processing model</a></li><li><a href="textFieldSelection.html#generic-task-sources"><span class="secno">6.1.4.3 </span>Generic task sources</a></li></ol></li><li><a href="textFieldSelection.html#javascript-protocol"><span class="secno">6.1.5 </span>The <code title="">javascript:</code> URL scheme</a></li><li><a href="textFieldSelection.html#events"><span class="secno">6.1.6 </span>Events</a>
      <ol><li><a href="textFieldSelection.html#event-handler-attributes"><span class="secno">6.1.6.1 </span>Event handlers</a></li><li><a href="textFieldSelection.html#event-handlers-on-elements,-document-objects,-and-window-objects"><span class="secno">6.1.6.2 </span>Event handlers on elements, <code>Document</code> objects, and <code>Window</code> objects</a></li><li><a href="textFieldSelection.html#event-firing"><span class="secno">6.1.6.3 </span>Event firing</a></li><li><a href="textFieldSelection.html#events-and-the-window-object"><span class="secno">6.1.6.4 </span>Events and the <code>Window</code> object</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#atob"><span class="secno">6.2 </span>Base64 utility methods</a></li><li><a href="textFieldSelection.html#timers"><span class="secno">6.3 </span>Timers</a></li><li><a href="textFieldSelection.html#user-prompts"><span class="secno">6.4 </span>User prompts</a>
    <ol><li><a href="textFieldSelection.html#simple-dialogs"><span class="secno">6.4.1 </span>Simple dialogs</a></li><li><a href="textFieldSelection.html#printing"><span class="secno">6.4.2 </span>Printing</a></li><li><a href="textFieldSelection.html#dialogs-implemented-using-separate-documents"><span class="secno">6.4.3 </span>Dialogs implemented using separate documents</a></li></ol></li><li><a href="textFieldSelection.html#system-state-and-capabilities"><span class="secno">6.5 </span>System state and capabilities</a>
    <ol><li><a href="textFieldSelection.html#the-navigator-object"><span class="secno">6.5.1 </span>The <code>Navigator</code> object</a>
      <ol><li><a href="textFieldSelection.html#client-identification"><span class="secno">6.5.1.1 </span>Client identification</a></li><li><a href="textFieldSelection.html#custom-handlers"><span class="secno">6.5.1.2 </span>Custom scheme and content handlers</a></li><li><a href="textFieldSelection.html#security-and-privacy"><span class="secno">6.5.1.3 </span>Security and privacy</a></li><li><a href="textFieldSelection.html#sample-handler-impl"><span class="secno">6.5.1.4 </span>Sample user interface</a></li><li><a href="textFieldSelection.html#manually-releasing-the-storage-mutex"><span class="secno">6.5.1.5 </span>Manually releasing the storage mutex</a></li></ol></li><li><a href="textFieldSelection.html#the-external-interface"><span class="secno">6.5.2 </span>The <code>External</code> interface</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#editing"><span class="secno">7 </span>User interaction</a>
  <ol><li><a href="textFieldSelection.html#the-hidden-attribute"><span class="secno">7.1 </span>The <code>hidden</code> attribute</a></li><li><a href="textFieldSelection.html#inert-subtrees"><span class="secno">7.2 </span>Inert subtrees</a></li><li><a href="textFieldSelection.html#activation"><span class="secno">7.3 </span>Activation</a></li><li><a href="textFieldSelection.html#focus"><span class="secno">7.4 </span>Focus</a>
    <ol><li><a href="textFieldSelection.html#sequential-focus-navigation-and-the-tabindex-attribute"><span class="secno">7.4.1 </span>Sequential focus navigation and the <code title="attr-tabindex">tabindex</code> attribute</a></li><li><a href="textFieldSelection.html#focus-management"><span class="secno">7.4.2 </span>Focus management</a></li><li><a href="textFieldSelection.html#document-level-focus-apis"><span class="secno">7.4.3 </span>Document-level focus APIs</a></li><li><a href="textFieldSelection.html#element-level-focus-apis"><span class="secno">7.4.4 </span>Element-level focus APIs</a></li></ol></li><li><a href="textFieldSelection.html#assigning-keyboard-shortcuts"><span class="secno">7.5 </span>Assigning keyboard shortcuts</a>
    <ol><li><a href="textFieldSelection.html#introduction-6"><span class="secno">7.5.1 </span>Introduction</a></li><li><a href="textFieldSelection.html#the-accesskey-attribute"><span class="secno">7.5.2 </span>The <code>accesskey</code> attribute</a></li><li><a href="textFieldSelection.html#processing-model-4"><span class="secno">7.5.3 </span>Processing model</a></li></ol></li><li><a href="textFieldSelection.html#editing-0"><span class="secno">7.6 </span>Editing</a>
    <ol><li><a href="textFieldSelection.html#contenteditable"><span class="secno">7.6.1 </span>Making document regions editable: The <code title="attr-contenteditable">contenteditable</code> content
  attribute</a></li><li><a href="textFieldSelection.html#making-entire-documents-editable:-the-designmode-idl-attribute"><span class="secno">7.6.2 </span>Making entire documents editable: The <code title="dom-document-designMode">designMode</code> IDL attribute</a></li><li><a href="textFieldSelection.html#best-practices-for-in-page-editors"><span class="secno">7.6.3 </span>Best practices for in-page editors</a></li><li><a href="textFieldSelection.html#editing-apis"><span class="secno">7.6.4 </span>Editing APIs</a></li><li><a href="textFieldSelection.html#spelling-and-grammar-checking"><span class="secno">7.6.5 </span>Spelling and grammar checking</a></li></ol></li><li><a href="textFieldSelection.html#dnd"><span class="secno">7.7 </span>Drag and drop</a>
    <ol><li><a href="textFieldSelection.html#introduction-7"><span class="secno">7.7.1 </span>Introduction</a></li><li><a href="textFieldSelection.html#the-drag-data-store"><span class="secno">7.7.2 </span>The drag data store</a></li><li><a href="textFieldSelection.html#the-datatransfer-interface"><span class="secno">7.7.3 </span>The <code>DataTransfer</code> interface</a>
      <ol><li><a href="textFieldSelection.html#the-datatransferitemlist-interface"><span class="secno">7.7.3.1 </span>The <code>DataTransferItemList</code> interface</a></li><li><a href="textFieldSelection.html#the-datatransferitem-interface"><span class="secno">7.7.3.2 </span>The <code>DataTransferItem</code> interface</a></li></ol></li><li><a href="textFieldSelection.html#the-dragevent-interface"><span class="secno">7.7.4 </span>The <code>DragEvent</code> interface</a></li><li><a href="textFieldSelection.html#drag-and-drop-processing-model"><span class="secno">7.7.5 </span>Drag-and-drop processing model</a></li><li><a href="textFieldSelection.html#dndevents"><span class="secno">7.7.6 </span>Events summary</a></li><li><a href="textFieldSelection.html#the-draggable-attribute"><span class="secno">7.7.7 </span>The <code>draggable</code> attribute</a></li><li><a href="textFieldSelection.html#the-dropzone-attribute"><span class="secno">7.7.8 </span>The <code>dropzone</code> attribute</a></li><li><a href="textFieldSelection.html#security-risks-in-the-drag-and-drop-model"><span class="secno">7.7.9 </span>Security risks in the drag-and-drop model</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#syntax"><span class="secno">8 </span>The HTML syntax</a>
  <ol><li><a href="textFieldSelection.html#writing"><span class="secno">8.1 </span>Writing HTML documents</a>
    <ol><li><a href="textFieldSelection.html#the-doctype"><span class="secno">8.1.1 </span>The DOCTYPE</a></li><li><a href="textFieldSelection.html#elements-0"><span class="secno">8.1.2 </span>Elements</a>
      <ol><li><a href="textFieldSelection.html#start-tags"><span class="secno">8.1.2.1 </span>Start tags</a></li><li><a href="textFieldSelection.html#end-tags"><span class="secno">8.1.2.2 </span>End tags</a></li><li><a href="textFieldSelection.html#attributes-0"><span class="secno">8.1.2.3 </span>Attributes</a></li><li><a href="textFieldSelection.html#optional-tags"><span class="secno">8.1.2.4 </span>Optional tags</a></li><li><a href="textFieldSelection.html#element-restrictions"><span class="secno">8.1.2.5 </span>Restrictions on content models</a></li><li><a href="textFieldSelection.html#cdata-rcdata-restrictions"><span class="secno">8.1.2.6 </span>Restrictions on the contents of raw text and RCDATA elements</a></li></ol></li><li><a href="textFieldSelection.html#text"><span class="secno">8.1.3 </span>Text</a>
      <ol><li><a href="textFieldSelection.html#newlines"><span class="secno">8.1.3.1 </span>Newlines</a></li></ol></li><li><a href="textFieldSelection.html#character-references"><span class="secno">8.1.4 </span>Character references</a></li><li><a href="textFieldSelection.html#cdata-sections"><span class="secno">8.1.5 </span>CDATA sections</a></li><li><a href="textFieldSelection.html#comments"><span class="secno">8.1.6 </span>Comments</a></li></ol></li><li><a href="textFieldSelection.html#parsing"><span class="secno">8.2 </span>Parsing HTML documents</a>
    <ol><li><a href="textFieldSelection.html#overview-of-the-parsing-model"><span class="secno">8.2.1 </span>Overview of the parsing model</a></li><li><a href="textFieldSelection.html#the-input-byte-stream"><span class="secno">8.2.2 </span>The input byte stream</a>
      <ol><li><a href="textFieldSelection.html#determining-the-character-encoding"><span class="secno">8.2.2.1 </span>Determining the character encoding</a></li><li><a href="textFieldSelection.html#character-encodings-0"><span class="secno">8.2.2.2 </span>Character encodings</a></li><li><a href="textFieldSelection.html#changing-the-encoding-while-parsing"><span class="secno">8.2.2.3 </span>Changing the encoding while parsing</a></li><li><a href="textFieldSelection.html#preprocessing-the-input-stream"><span class="secno">8.2.2.4 </span>Preprocessing the input stream</a></li></ol></li><li><a href="textFieldSelection.html#parse-state"><span class="secno">8.2.3 </span>Parse state</a>
      <ol><li><a href="textFieldSelection.html#the-insertion-mode"><span class="secno">8.2.3.1 </span>The insertion mode</a></li><li><a href="textFieldSelection.html#the-stack-of-open-elements"><span class="secno">8.2.3.2 </span>The stack of open elements</a></li><li><a href="textFieldSelection.html#the-list-of-active-formatting-elements"><span class="secno">8.2.3.3 </span>The list of active formatting elements</a></li><li><a href="textFieldSelection.html#the-element-pointers"><span class="secno">8.2.3.4 </span>The element pointers</a></li><li><a href="textFieldSelection.html#other-parsing-state-flags"><span class="secno">8.2.3.5 </span>Other parsing state flags</a></li></ol></li><li><a href="textFieldSelection.html#tokenization"><span class="secno">8.2.4 </span>Tokenization</a>
      <ol><li><a href="textFieldSelection.html#data-state"><span class="secno">8.2.4.1 </span>Data state</a></li><li><a href="textFieldSelection.html#character-reference-in-data-state"><span class="secno">8.2.4.2 </span>Character reference in data state</a></li><li><a href="textFieldSelection.html#rcdata-state"><span class="secno">8.2.4.3 </span>RCDATA state</a></li><li><a href="textFieldSelection.html#character-reference-in-rcdata-state"><span class="secno">8.2.4.4 </span>Character reference in RCDATA state</a></li><li><a href="textFieldSelection.html#rawtext-state"><span class="secno">8.2.4.5 </span>RAWTEXT state</a></li><li><a href="textFieldSelection.html#script-data-state"><span class="secno">8.2.4.6 </span>Script data state</a></li><li><a href="textFieldSelection.html#plaintext-state"><span class="secno">8.2.4.7 </span>PLAINTEXT state</a></li><li><a href="textFieldSelection.html#tag-open-state"><span class="secno">8.2.4.8 </span>Tag open state</a></li><li><a href="textFieldSelection.html#end-tag-open-state"><span class="secno">8.2.4.9 </span>End tag open state</a></li><li><a href="textFieldSelection.html#tag-name-state"><span class="secno">8.2.4.10 </span>Tag name state</a></li><li><a href="textFieldSelection.html#rcdata-less-than-sign-state"><span class="secno">8.2.4.11 </span>RCDATA less-than sign state</a></li><li><a href="textFieldSelection.html#rcdata-end-tag-open-state"><span class="secno">8.2.4.12 </span>RCDATA end tag open state</a></li><li><a href="textFieldSelection.html#rcdata-end-tag-name-state"><span class="secno">8.2.4.13 </span>RCDATA end tag name state</a></li><li><a href="textFieldSelection.html#rawtext-less-than-sign-state"><span class="secno">8.2.4.14 </span>RAWTEXT less-than sign state</a></li><li><a href="textFieldSelection.html#rawtext-end-tag-open-state"><span class="secno">8.2.4.15 </span>RAWTEXT end tag open state</a></li><li><a href="textFieldSelection.html#rawtext-end-tag-name-state"><span class="secno">8.2.4.16 </span>RAWTEXT end tag name state</a></li><li><a href="textFieldSelection.html#script-data-less-than-sign-state"><span class="secno">8.2.4.17 </span>Script data less-than sign state</a></li><li><a href="textFieldSelection.html#script-data-end-tag-open-state"><span class="secno">8.2.4.18 </span>Script data end tag open state</a></li><li><a href="textFieldSelection.html#script-data-end-tag-name-state"><span class="secno">8.2.4.19 </span>Script data end tag name state</a></li><li><a href="textFieldSelection.html#script-data-escape-start-state"><span class="secno">8.2.4.20 </span>Script data escape start state</a></li><li><a href="textFieldSelection.html#script-data-escape-start-dash-state"><span class="secno">8.2.4.21 </span>Script data escape start dash state</a></li><li><a href="textFieldSelection.html#script-data-escaped-state"><span class="secno">8.2.4.22 </span>Script data escaped state</a></li><li><a href="textFieldSelection.html#script-data-escaped-dash-state"><span class="secno">8.2.4.23 </span>Script data escaped dash state</a></li><li><a href="textFieldSelection.html#script-data-escaped-dash-dash-state"><span class="secno">8.2.4.24 </span>Script data escaped dash dash state</a></li><li><a href="textFieldSelection.html#script-data-escaped-less-than-sign-state"><span class="secno">8.2.4.25 </span>Script data escaped less-than sign state</a></li><li><a href="textFieldSelection.html#script-data-escaped-end-tag-open-state"><span class="secno">8.2.4.26 </span>Script data escaped end tag open state</a></li><li><a href="textFieldSelection.html#script-data-escaped-end-tag-name-state"><span class="secno">8.2.4.27 </span>Script data escaped end tag name state</a></li><li><a href="textFieldSelection.html#script-data-double-escape-start-state"><span class="secno">8.2.4.28 </span>Script data double escape start state</a></li><li><a href="textFieldSelection.html#script-data-double-escaped-state"><span class="secno">8.2.4.29 </span>Script data double escaped state</a></li><li><a href="textFieldSelection.html#script-data-double-escaped-dash-state"><span class="secno">8.2.4.30 </span>Script data double escaped dash state</a></li><li><a href="textFieldSelection.html#script-data-double-escaped-dash-dash-state"><span class="secno">8.2.4.31 </span>Script data double escaped dash dash state</a></li><li><a href="textFieldSelection.html#script-data-double-escaped-less-than-sign-state"><span class="secno">8.2.4.32 </span>Script data double escaped less-than sign state</a></li><li><a href="textFieldSelection.html#script-data-double-escape-end-state"><span class="secno">8.2.4.33 </span>Script data double escape end state</a></li><li><a href="textFieldSelection.html#before-attribute-name-state"><span class="secno">8.2.4.34 </span>Before attribute name state</a></li><li><a href="textFieldSelection.html#attribute-name-state"><span class="secno">8.2.4.35 </span>Attribute name state</a></li><li><a href="textFieldSelection.html#after-attribute-name-state"><span class="secno">8.2.4.36 </span>After attribute name state</a></li><li><a href="textFieldSelection.html#before-attribute-value-state"><span class="secno">8.2.4.37 </span>Before attribute value state</a></li><li><a href="textFieldSelection.html#attribute-value-(double-quoted)-state"><span class="secno">8.2.4.38 </span>Attribute value (double-quoted) state</a></li><li><a href="textFieldSelection.html#attribute-value-(single-quoted)-state"><span class="secno">8.2.4.39 </span>Attribute value (single-quoted) state</a></li><li><a href="textFieldSelection.html#attribute-value-(unquoted)-state"><span class="secno">8.2.4.40 </span>Attribute value (unquoted) state</a></li><li><a href="textFieldSelection.html#character-reference-in-attribute-value-state"><span class="secno">8.2.4.41 </span>Character reference in attribute value state</a></li><li><a href="textFieldSelection.html#after-attribute-value-(quoted)-state"><span class="secno">8.2.4.42 </span>After attribute value (quoted) state</a></li><li><a href="textFieldSelection.html#self-closing-start-tag-state"><span class="secno">8.2.4.43 </span>Self-closing start tag state</a></li><li><a href="textFieldSelection.html#bogus-comment-state"><span class="secno">8.2.4.44 </span>Bogus comment state</a></li><li><a href="textFieldSelection.html#markup-declaration-open-state"><span class="secno">8.2.4.45 </span>Markup declaration open state</a></li><li><a href="textFieldSelection.html#comment-start-state"><span class="secno">8.2.4.46 </span>Comment start state</a></li><li><a href="textFieldSelection.html#comment-start-dash-state"><span class="secno">8.2.4.47 </span>Comment start dash state</a></li><li><a href="textFieldSelection.html#comment-state"><span class="secno">8.2.4.48 </span>Comment state</a></li><li><a href="textFieldSelection.html#comment-end-dash-state"><span class="secno">8.2.4.49 </span>Comment end dash state</a></li><li><a href="textFieldSelection.html#comment-end-state"><span class="secno">8.2.4.50 </span>Comment end state</a></li><li><a href="textFieldSelection.html#comment-end-bang-state"><span class="secno">8.2.4.51 </span>Comment end bang state</a></li><li><a href="textFieldSelection.html#doctype-state"><span class="secno">8.2.4.52 </span>DOCTYPE state</a></li><li><a href="textFieldSelection.html#before-doctype-name-state"><span class="secno">8.2.4.53 </span>Before DOCTYPE name state</a></li><li><a href="textFieldSelection.html#doctype-name-state"><span class="secno">8.2.4.54 </span>DOCTYPE name state</a></li><li><a href="textFieldSelection.html#after-doctype-name-state"><span class="secno">8.2.4.55 </span>After DOCTYPE name state</a></li><li><a href="textFieldSelection.html#after-doctype-public-keyword-state"><span class="secno">8.2.4.56 </span>After DOCTYPE public keyword state</a></li><li><a href="textFieldSelection.html#before-doctype-public-identifier-state"><span class="secno">8.2.4.57 </span>Before DOCTYPE public identifier state</a></li><li><a href="textFieldSelection.html#doctype-public-identifier-(double-quoted)-state"><span class="secno">8.2.4.58 </span>DOCTYPE public identifier (double-quoted) state</a></li><li><a href="textFieldSelection.html#doctype-public-identifier-(single-quoted)-state"><span class="secno">8.2.4.59 </span>DOCTYPE public identifier (single-quoted) state</a></li><li><a href="textFieldSelection.html#after-doctype-public-identifier-state"><span class="secno">8.2.4.60 </span>After DOCTYPE public identifier state</a></li><li><a href="textFieldSelection.html#between-doctype-public-and-system-identifiers-state"><span class="secno">8.2.4.61 </span>Between DOCTYPE public and system identifiers state</a></li><li><a href="textFieldSelection.html#after-doctype-system-keyword-state"><span class="secno">8.2.4.62 </span>After DOCTYPE system keyword state</a></li><li><a href="textFieldSelection.html#before-doctype-system-identifier-state"><span class="secno">8.2.4.63 </span>Before DOCTYPE system identifier state</a></li><li><a href="textFieldSelection.html#doctype-system-identifier-(double-quoted)-state"><span class="secno">8.2.4.64 </span>DOCTYPE system identifier (double-quoted) state</a></li><li><a href="textFieldSelection.html#doctype-system-identifier-(single-quoted)-state"><span class="secno">8.2.4.65 </span>DOCTYPE system identifier (single-quoted) state</a></li><li><a href="textFieldSelection.html#after-doctype-system-identifier-state"><span class="secno">8.2.4.66 </span>After DOCTYPE system identifier state</a></li><li><a href="textFieldSelection.html#bogus-doctype-state"><span class="secno">8.2.4.67 </span>Bogus DOCTYPE state</a></li><li><a href="textFieldSelection.html#cdata-section-state"><span class="secno">8.2.4.68 </span>CDATA section state</a></li><li><a href="textFieldSelection.html#tokenizing-character-references"><span class="secno">8.2.4.69 </span>Tokenizing character references</a></li></ol></li><li><a href="textFieldSelection.html#tree-construction"><span class="secno">8.2.5 </span>Tree construction</a>
      <ol><li><a href="textFieldSelection.html#creating-and-inserting-elements"><span class="secno">8.2.5.1 </span>Creating and inserting elements</a></li><li><a href="textFieldSelection.html#closing-elements-that-have-implied-end-tags"><span class="secno">8.2.5.2 </span>Closing elements that have implied end tags</a></li><li><a href="textFieldSelection.html#foster-parenting"><span class="secno">8.2.5.3 </span>Foster parenting</a></li><li><a href="textFieldSelection.html#parsing-main-inhtml"><span class="secno">8.2.5.4 </span>The rules for parsing tokens in HTML content</a>
        <ol><li><a href="textFieldSelection.html#the-initial-insertion-mode"><span class="secno">8.2.5.4.1 </span>The "initial" insertion mode</a></li><li><a href="textFieldSelection.html#the-before-html-insertion-mode"><span class="secno">8.2.5.4.2 </span>The "before html" insertion mode</a></li><li><a href="textFieldSelection.html#the-before-head-insertion-mode"><span class="secno">8.2.5.4.3 </span>The "before head" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-inhead"><span class="secno">8.2.5.4.4 </span>The "in head" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-inheadnoscript"><span class="secno">8.2.5.4.5 </span>The "in head noscript" insertion mode</a></li><li><a href="textFieldSelection.html#the-after-head-insertion-mode"><span class="secno">8.2.5.4.6 </span>The "after head" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-inbody"><span class="secno">8.2.5.4.7 </span>The "in body" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-incdata"><span class="secno">8.2.5.4.8 </span>The "text" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-intable"><span class="secno">8.2.5.4.9 </span>The "in table" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-intabletext"><span class="secno">8.2.5.4.10 </span>The "in table text" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-incaption"><span class="secno">8.2.5.4.11 </span>The "in caption" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-incolgroup"><span class="secno">8.2.5.4.12 </span>The "in column group" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-intbody"><span class="secno">8.2.5.4.13 </span>The "in table body" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-intr"><span class="secno">8.2.5.4.14 </span>The "in row" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-intd"><span class="secno">8.2.5.4.15 </span>The "in cell" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-inselect"><span class="secno">8.2.5.4.16 </span>The "in select" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-inselectintable"><span class="secno">8.2.5.4.17 </span>The "in select in table" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-afterbody"><span class="secno">8.2.5.4.18 </span>The "after body" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-inframeset"><span class="secno">8.2.5.4.19 </span>The "in frameset" insertion mode</a></li><li><a href="textFieldSelection.html#parsing-main-afterframeset"><span class="secno">8.2.5.4.20 </span>The "after frameset" insertion mode</a></li><li><a href="textFieldSelection.html#the-after-after-body-insertion-mode"><span class="secno">8.2.5.4.21 </span>The "after after body" insertion mode</a></li><li><a href="textFieldSelection.html#the-after-after-frameset-insertion-mode"><span class="secno">8.2.5.4.22 </span>The "after after frameset" insertion mode</a></li></ol></li><li><a href="textFieldSelection.html#parsing-main-inforeign"><span class="secno">8.2.5.5 </span>The rules for parsing tokens in foreign content</a></li></ol></li><li><a href="textFieldSelection.html#the-end"><span class="secno">8.2.6 </span>The end</a></li><li><a href="textFieldSelection.html#coercing-an-html-dom-into-an-infoset"><span class="secno">8.2.7 </span>Coercing an HTML DOM into an infoset</a></li><li><a href="textFieldSelection.html#an-introduction-to-error-handling-and-strange-cases-in-the-parser"><span class="secno">8.2.8 </span>An introduction to error handling and strange cases in the parser</a>
      <ol><li><a href="textFieldSelection.html#misnested-tags:-b-i-/b-/i"><span class="secno">8.2.8.1 </span>Misnested tags: &lt;b&gt;&lt;i&gt;&lt;/b&gt;&lt;/i&gt;</a></li><li><a href="textFieldSelection.html#misnested-tags:-b-p-/b-/p"><span class="secno">8.2.8.2 </span>Misnested tags: &lt;b&gt;&lt;p&gt;&lt;/b&gt;&lt;/p&gt;</a></li><li><a href="textFieldSelection.html#unexpected-markup-in-tables"><span class="secno">8.2.8.3 </span>Unexpected markup in tables</a></li><li><a href="textFieldSelection.html#scripts-that-modify-the-page-as-it-is-being-parsed"><span class="secno">8.2.8.4 </span>Scripts that modify the page as it is being parsed</a></li><li><a href="textFieldSelection.html#the-execution-of-scripts-that-are-moving-across-multiple-documents"><span class="secno">8.2.8.5 </span>The execution of scripts that are moving across multiple documents</a></li><li><a href="textFieldSelection.html#unclosed-formatting-elements"><span class="secno">8.2.8.6 </span>Unclosed formatting elements</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#serializing-html-fragments"><span class="secno">8.3 </span>Serializing HTML fragments</a></li><li><a href="textFieldSelection.html#parsing-html-fragments"><span class="secno">8.4 </span>Parsing HTML fragments</a></li><li><a href="textFieldSelection.html#named-character-references"><span class="secno">8.5 </span>Named character references</a></li></ol></li><li><a href="textFieldSelection.html#the-xhtml-syntax"><span class="secno">9 </span>The XHTML syntax</a>
  <ol><li><a href="textFieldSelection.html#writing-xhtml-documents"><span class="secno">9.1 </span>Writing XHTML documents</a></li><li><a href="textFieldSelection.html#parsing-xhtml-documents"><span class="secno">9.2 </span>Parsing XHTML documents</a></li><li><a href="textFieldSelection.html#serializing-xhtml-fragments"><span class="secno">9.3 </span>Serializing XHTML fragments</a></li><li><a href="textFieldSelection.html#parsing-xhtml-fragments"><span class="secno">9.4 </span>Parsing XHTML fragments</a></li></ol></li><li><a href="textFieldSelection.html#rendering"><span class="secno">10 </span>Rendering</a>
  <ol><li><a href="textFieldSelection.html#introduction-8"><span class="secno">10.1 </span>Introduction</a></li><li><a href="textFieldSelection.html#the-css-user-agent-style-sheet-and-presentational-hints"><span class="secno">10.2 </span>The CSS user agent style sheet and presentational hints</a></li><li><a href="textFieldSelection.html#non-replaced-elements"><span class="secno">10.3 </span>Non-replaced elements</a>
    <ol><li><a href="textFieldSelection.html#hidden-elements"><span class="secno">10.3.1 </span>Hidden elements</a></li><li><a href="textFieldSelection.html#the-page"><span class="secno">10.3.2 </span>The page</a></li><li><a href="textFieldSelection.html#flow-content-0"><span class="secno">10.3.3 </span>Flow content</a></li><li><a href="textFieldSelection.html#phrasing-content-0"><span class="secno">10.3.4 </span>Phrasing content</a></li><li><a href="textFieldSelection.html#bidirectional-text"><span class="secno">10.3.5 </span>Bidirectional text</a></li><li><a href="textFieldSelection.html#quotes"><span class="secno">10.3.6 </span>Quotes</a></li><li><a href="textFieldSelection.html#sections-and-headings"><span class="secno">10.3.7 </span>Sections and headings</a></li><li><a href="textFieldSelection.html#lists"><span class="secno">10.3.8 </span>Lists</a></li><li><a href="textFieldSelection.html#tables"><span class="secno">10.3.9 </span>Tables</a></li><li><a href="textFieldSelection.html#form-controls"><span class="secno">10.3.10 </span>Form controls</a></li><li><a href="textFieldSelection.html#the-hr-element-0"><span class="secno">10.3.11 </span>The <code>hr</code> element</a></li><li><a href="textFieldSelection.html#the-fieldset-element-0"><span class="secno">10.3.12 </span>The <code>fieldset</code> element</a></li></ol></li><li><a href="textFieldSelection.html#replaced-elements"><span class="secno">10.4 </span>Replaced elements</a>
    <ol><li><a href="textFieldSelection.html#embedded-content-1"><span class="secno">10.4.1 </span>Embedded content</a></li><li><a href="textFieldSelection.html#images"><span class="secno">10.4.2 </span>Images</a></li><li><a href="textFieldSelection.html#attributes-for-embedded-content-and-images"><span class="secno">10.4.3 </span>Attributes for embedded content and images</a></li><li><a href="textFieldSelection.html#image-maps-0"><span class="secno">10.4.4 </span>Image maps</a></li><li><a href="textFieldSelection.html#toolbars-0"><span class="secno">10.4.5 </span>Toolbars</a></li></ol></li><li><a href="textFieldSelection.html#bindings"><span class="secno">10.5 </span>Bindings</a>
    <ol><li><a href="textFieldSelection.html#introduction-9"><span class="secno">10.5.1 </span>Introduction</a></li><li><a href="textFieldSelection.html#the-button-element-0"><span class="secno">10.5.2 </span>The <code>button</code> element</a></li><li><a href="textFieldSelection.html#the-details-element-0"><span class="secno">10.5.3 </span>The <code>details</code> element</a></li><li><a href="textFieldSelection.html#the-input-element-as-a-text-entry-widget"><span class="secno">10.5.4 </span>The <code>input</code> element as a text entry widget</a></li><li><a href="textFieldSelection.html#the-input-element-as-domain-specific-widgets"><span class="secno">10.5.5 </span>The <code>input</code> element as domain-specific widgets</a></li><li><a href="textFieldSelection.html#the-input-element-as-a-range-control"><span class="secno">10.5.6 </span>The <code>input</code> element as a range control</a></li><li><a href="textFieldSelection.html#the-input-element-as-a-color-well"><span class="secno">10.5.7 </span>The <code>input</code> element as a color well</a></li><li><a href="textFieldSelection.html#the-input-element-as-a-checkbox-and-radio-button-widgets"><span class="secno">10.5.8 </span>The <code>input</code> element as a checkbox and radio button widgets</a></li><li><a href="textFieldSelection.html#the-input-element-as-a-file-upload-control"><span class="secno">10.5.9 </span>The <code>input</code> element as a file upload control</a></li><li><a href="textFieldSelection.html#the-input-element-as-a-button"><span class="secno">10.5.10 </span>The <code>input</code> element as a button</a></li><li><a href="textFieldSelection.html#the-marquee-element"><span class="secno">10.5.11 </span>The <code>marquee</code> element</a></li><li><a href="textFieldSelection.html#the-meter-element-0"><span class="secno">10.5.12 </span>The <code>meter</code> element</a></li><li><a href="textFieldSelection.html#the-progress-element-0"><span class="secno">10.5.13 </span>The <code>progress</code> element</a></li><li><a href="textFieldSelection.html#the-select-element-0"><span class="secno">10.5.14 </span>The <code>select</code> element</a></li><li><a href="textFieldSelection.html#the-textarea-element-0"><span class="secno">10.5.15 </span>The <code>textarea</code> element</a></li><li><a href="textFieldSelection.html#the-keygen-element-0"><span class="secno">10.5.16 </span>The <code>keygen</code> element</a></li></ol></li><li><a href="textFieldSelection.html#frames-and-framesets"><span class="secno">10.6 </span>Frames and framesets</a></li><li><a href="textFieldSelection.html#interactive-media"><span class="secno">10.7 </span>Interactive media</a>
    <ol><li><a href="textFieldSelection.html#links,-forms,-and-navigation"><span class="secno">10.7.1 </span>Links, forms, and navigation</a></li><li><a href="textFieldSelection.html#the-title-attribute-0"><span class="secno">10.7.2 </span>The <code title="attr-title">title</code> attribute</a></li><li><a href="textFieldSelection.html#editing-hosts"><span class="secno">10.7.3 </span>Editing hosts</a></li><li><a href="textFieldSelection.html#text-rendered-in-native-user-interfaces"><span class="secno">10.7.4 </span>Text rendered in native user interfaces</a></li></ol></li><li><a href="textFieldSelection.html#print-media"><span class="secno">10.8 </span>Print media</a></li></ol></li><li><a href="textFieldSelection.html#obsolete"><span class="secno">11 </span>Obsolete features</a>
  <ol><li><a href="textFieldSelection.html#obsolete-but-conforming-features"><span class="secno">11.1 </span>Obsolete but conforming features</a>
    <ol><li><a href="textFieldSelection.html#warnings-for-obsolete-but-conforming-features"><span class="secno">11.1.1 </span>Warnings for obsolete but conforming features</a></li></ol></li><li><a href="textFieldSelection.html#non-conforming-features"><span class="secno">11.2 </span>Non-conforming features</a></li><li><a href="textFieldSelection.html#requirements-for-implementations"><span class="secno">11.3 </span>Requirements for implementations</a>
    <ol><li><a href="textFieldSelection.html#the-applet-element"><span class="secno">11.3.1 </span>The <code>applet</code> element</a></li><li><a href="textFieldSelection.html#the-marquee-element-0"><span class="secno">11.3.2 </span>The <code>marquee</code> element</a></li><li><a href="textFieldSelection.html#frames"><span class="secno">11.3.3 </span>Frames</a></li><li><a href="textFieldSelection.html#other-elements,-attributes-and-apis"><span class="secno">11.3.4 </span>Other elements, attributes and APIs</a></li></ol></li></ol></li><li><a href="textFieldSelection.html#iana"><span class="secno">12 </span>IANA considerations</a>
  <ol><li><a href="textFieldSelection.html#text/html"><span class="secno">12.1 </span><code>text/html</code></a></li><li><a href="textFieldSelection.html#multipart/x-mixed-replace"><span class="secno">12.2 </span><code>multipart/x-mixed-replace</code></a></li><li><a href="textFieldSelection.html#application/xhtml+xml"><span class="secno">12.3 </span><code>application/xhtml+xml</code></a></li><li><a href="textFieldSelection.html#application/x-www-form-urlencoded"><span class="secno">12.4 </span><code>application/x-www-form-urlencoded</code></a></li><li><a href="textFieldSelection.html#text/cache-manifest"><span class="secno">12.5 </span><code>text/cache-manifest</code></a></li><li><a href="textFieldSelection.html#web+-scheme-prefix"><span class="secno">12.6 </span><code>web+</code> scheme prefix</a></li></ol></li><li><a class="no-num" href="textFieldSelection.html#index">Index</a>
  <ol><li><a class="no-num" href="textFieldSelection.html#elements-1">Elements</a></li><li><a class="no-num" href="textFieldSelection.html#element-content-categories">Element content categories</a></li><li><a class="no-num" href="textFieldSelection.html#attributes-1">Attributes</a></li><li><a class="no-num" href="textFieldSelection.html#element-interfaces">Element Interfaces</a></li><li><a class="no-num" href="textFieldSelection.html#all-interfaces">All Interfaces</a></li><li><a class="no-num" href="textFieldSelection.html#events-0">Events</a></li></ol></li><li><a class="no-num" href="textFieldSelection.html#references">References</a></li><li><a class="no-num" href="textFieldSelection.html#acknowledgements">Acknowledgements</a></li></ol></div>

  <h4 id="textFieldSelection"><span class="secno">4.10.20 </span>APIs for the text field selections</h4>

  <!-- v2 idea: DOM Range APIs to expose the textarea/input edited
  value (ack martijnw) -->

  <p>The <code><a href="the-input-element.html#the-input-element">input</a></code> and <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements define
  the following members in their DOM interfaces for handling their
  selection:</p>

  <pre class="idl extract">  void <span title="dom-textarea/input-select">select</span>();
           attribute unsigned long <span title="dom-textarea/input-selectionStart">selectionStart</span>;
           attribute unsigned long <span title="dom-textarea/input-selectionEnd">selectionEnd</span>;
           attribute DOMString <span title="dom-textarea/input-selectionDirection">selectionDirection</span>;

  void <span title="dom-textarea/input-setSelectionRange">setSelectionRange</span>(unsigned long start, unsigned long end, optional DOMString direction = "preserve");</pre>
  <!-- v2: also add textLength? it seems to be widely used -->



  <p>These methods and attributes expose and control the selection of
  <code><a href="the-input-element.html#the-input-element">input</a></code> and <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> text fields.</p>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-textarea/input-select">select</code>()</dt>

   <dd>

    <p>Selects everything in the text field.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-textarea/input-selecionStart">selectionStart</code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the offset to the start of the selection.</p>

    <p>Can be set, to change the start of the selection.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-textarea/input-selecionEnd">selectionEnd</code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the offset to the end of the selection.</p>

    <p>Can be set, to change the end of the selection.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-textarea/input-selecionDirection">selectionDirection</code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the current direction of the selection.</p>

    <p>Can be set, to change the direction of the selection.</p>

    <p>The possible values are "<code title="">forward</code>", "<code title="">backward</code>", and "<code title="">none</code>".</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-textarea/input-setSelectionRange">setSelectionRange</code>(<var title="">start</var>, <var title="">end</var> [, <var title="">direction</var>] )</dt>

   <dd>

    <p>Changes the selection to cover the given substring in the given direction. If the direction is omitted, it will be reset to be the platform default (none or forward).</p>

   </dd>




  <p>All elements to which this API applies have either a selection or
  a text entry cursor position at all times (even for elements that
  are not <a href="#being-rendered">being rendered</a>). User agents should follow
  platform conventions to determine their initial state.</p>

  

  <p>Characters with no visible rendering, such as U+200D ZERO WIDTH
  JOINER, still count as characters. Thus, for instance, the selection
  can include just an invisible character, and the text insertion
  cursor can be placed to one side or another of such a character.</p>

  <div class="example">

   <p>To obtain the currently selected text, the following JavaScript
   suffices:</p>

   <pre>var selectionText = control.value.substring(control.selectionStart, control.selectionEnd);</pre>

   <p>...where <var title="">control</var> is the <code><a href="the-input-element.html#the-input-element">input</a></code>
   or <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element.</p>

  </div>

  <div class="example">

   <p>To add some text at the start of a text control, while
   maintaining the text selection, the three attributes must be
   preserved:</p>

   <pre>var oldStart = control.selectionStart;
var oldEnd = control.selectionEnd;
var oldDirection = control.selectionDirection;
var prefix = "http://";
control.value = prefix + control.value;
control.setSelectionRange(oldStart + prefix.length, oldEnd + prefix.length, oldDirection);</pre>

   <p>...where <var title="">control</var> is the <code><a href="the-input-element.html#the-input-element">input</a></code>
   or <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element.</p>

  </div>
<!--TOPIC:HTML-->



  <h4 id="constraints"><span class="secno">4.10.21 </span>Constraints</h4>

  <h5 id="definitions"><span class="secno">4.10.21.1 </span>Definitions</h5>

  <div class="impl">

  <p>A <a href="forms.html#category-submit" title="category-submit">submittable element</a> is a
  <dfn id="candidate-for-constraint-validation">candidate for constraint validation</dfn> except when a
  condition has <dfn id="barred-from-constraint-validation" title="barred from constraint validation">barred
  the element from constraint validation</dfn>. (For example, an
  element is <a href="#barred-from-constraint-validation">barred from constraint validation</a> if it is
  an <code><a href="the-object-element.html#the-object-element">object</a></code> element.)</p>

  <p>An element can have a <dfn id="custom-validity-error-message">custom validity error message</dfn>
  defined. Initially, an element must have its <a href="#custom-validity-error-message">custom validity
  error message</a> set to the empty string. When its value is not
  the empty string, the element is <a href="#suffering-from-a-custom-error">suffering from a custom
  error</a>. It can be set using the <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code>
  method. The user agent should use the <a href="#custom-validity-error-message">custom validity error
  message</a> when alerting the user to the problem with the
  control.</p>

  <p>An element can be constrained in various ways. The following is
  the list of <dfn id="validity-states">validity states</dfn> that a form control can be
  in, making the control invalid for the purposes of constraint
  validation. (The definitions below are non-normative; other parts of
  this specification define more precisely when each state applies or
  does not.)</p>

  <dl><dt> <dfn id="suffering-from-being-missing">Suffering from being missing</dfn> </dt>

   <dd> <p>When a control has no <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> but has a <code title="">required</code> attribute (<code><a href="the-input-element.html#the-input-element">input</a></code> <code title="attr-input-required"><a href="common-input-element-attributes.html#attr-input-required">required</a></code>, <code><a href="the-select-element.html#the-select-element">select</a></code>
   <code title="attr-select-required"><a href="the-select-element.html#attr-select-required">required</a></code>,
   <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> <code title="attr-textarea-required"><a href="the-textarea-element.html#attr-textarea-required">required</a></code>), or, in the case of
   an element in a <i><a href="states-of-the-type-attribute.html#radio-button-group">radio button group</a></i>, any of the other
   elements in the group has a <code title="attr-input-required"><a href="common-input-element-attributes.html#attr-input-required">required</a></code> attribute. </p></dd>

   <dt> <dfn id="suffering-from-a-type-mismatch">Suffering from a type mismatch</dfn> </dt>

   <dd> <p>When a control that allows arbitrary user
   input has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that is not
   in the correct syntax (<a href="states-of-the-type-attribute.html#e-mail-state-(type=email)" title="attr-input-type-email">E-mail</a>, <a href="states-of-the-type-attribute.html#url-state-(type=url)" title="attr-input-type-url">URL</a>). </p></dd>

   <dt> <dfn id="suffering-from-a-pattern-mismatch">Suffering from a pattern mismatch</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that doesn't satisfy the
   <code title="attr-input-pattern"><a href="common-input-element-attributes.html#attr-input-pattern">pattern</a></code> attribute.</p></dd>

   <dt> <dfn id="suffering-from-being-too-long">Suffering from being too long</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that is too long for the
   <a href="attributes-common-to-form-controls.html#attr-fe-maxlength" title="attr-fe-maxlength">form control <code title="">maxlength</code> attribute</a> (<code><a href="the-input-element.html#the-input-element">input</a></code>
   <code title="attr-input-maxlength"><a href="common-input-element-attributes.html#attr-input-maxlength">maxlength</a></code>,
   <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> <code title="attr-textarea-maxlength"><a href="the-textarea-element.html#attr-textarea-maxlength">maxlength</a></code>). </p></dd>

   <dt> <dfn id="suffering-from-an-underflow">Suffering from an underflow</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that is too low for the <code title="attr-input-min"><a href="common-input-element-attributes.html#attr-input-min">min</a></code> attribute.</p></dd>

   <dt> <dfn id="suffering-from-an-overflow">Suffering from an overflow</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that is too high for the
   <code title="attr-input-max"><a href="common-input-element-attributes.html#attr-input-max">max</a></code> attribute.</p></dd>

   <dt> <dfn id="suffering-from-a-step-mismatch">Suffering from a step mismatch</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that doesn't fit the rules
   given by the <code title="attr-input-step"><a href="common-input-element-attributes.html#attr-input-step">step</a></code>
   attribute.</p></dd>

   <dt> <dfn id="suffering-from-a-custom-error">Suffering from a custom error</dfn> </dt>

   <dd> <p>When a control's <a href="#custom-validity-error-message">custom validity error
   message</a> (as set by the element's <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code>
   method) is not the empty string.</p> </dd>

  </dl><p class="note">An element can still suffer from these states even
  when the element is <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>; thus these states can
  be represented in the DOM even if validating the form during
  submission wouldn't indicate a problem to the user.</p>

  <p>An element <dfn id="concept-fv-valid" title="concept-fv-valid">satisfies its
  constraints</dfn> if it is not suffering from any of the above
  <a href="#validity-states">validity states</a>.</p>

  </div>



  <div class="impl">

  <h5 id="constraint-validation"><span class="secno">4.10.21.2 </span>Constraint validation</h5>

  <p>When the user agent is required to <dfn id="statically-validate-the-constraints">statically validate the
  constraints</dfn> of <code><a href="the-form-element.html#the-form-element">form</a></code> element <var title="">form</var>, it must run the following steps, which return
  either a <i>positive</i> result (all the controls in the form are
  valid) or a <i>negative</i> result (there are invalid controls)
  along with a (possibly empty) list of elements that are invalid and
  for which no script has claimed responsibility:</p>

  <ol><li><p>Let <var title="">controls</var> be a list of all the <a href="forms.html#category-submit" title="category-submit">submittable elements</a> whose
   <a href="association-of-controls-and-forms.html#form-owner">form owner</a> is <var title="">form</var>, in <a href="infrastructure.html#tree-order">tree
   order</a>.</p></li>

   <li><p>Let <var title="">invalid controls</var> be an initially
   empty list of elements.</p></li>

   <li>

    <p>For each element <var title="">field</var> in <var title="">controls</var>, in <a href="infrastructure.html#tree-order">tree order</a>, run the
    following substeps:</p>

    <ol><li><p>If <var title="">field</var> is not a <a href="#candidate-for-constraint-validation">candidate for
     constraint validation</a>, then move on to the next
     element.</p></li>

     <li><p>Otherwise, if <var title="">field</var> <a href="#concept-fv-valid" title="concept-fv-valid">satisfies its constraints</a>, then
     move on to the next element.</p></li>

     <li><p>Otherwise, add <var title="">field</var> to <var title="">invalid controls</var>.</p></li>

    </ol></li>

   <li><p>If <var title="">invalid controls</var> is empty, then
   return a <i>positive</i> result and abort these steps.</p></li>

   <li><p>Let <var title="">unhandled invalid controls</var> be an
   initially empty list of elements.</p></li>

   <li>

    <p>For each element <var title="">field</var> in <var title="">invalid controls</var>, if any, in <a href="infrastructure.html#tree-order">tree
    order</a>, run the following substeps:</p>

    <ol><li><p><a href="#fire-a-simple-event">Fire a simple event</a> named <code title="event-invalid">invalid</code> that is cancelable at <var title="">field</var>.</p></li>

     <li><p>If the event was not canceled, then add <var title="">field</var> to <var title="">unhandled invalid
     controls</var>.</p></li>

    </ol></li>

   <li><p>Return a <i>negative</i> result with the list of elements in
   the <var title="">unhandled invalid controls</var> list.</p></li>

  </ol><p>If a user agent is to <dfn id="interactively-validate-the-constraints">interactively validate the
  constraints</dfn> of <code><a href="the-form-element.html#the-form-element">form</a></code> element <var title="">form</var>, then the user agent must run the following
  steps:</p>

  <ol><li><p><a href="#statically-validate-the-constraints">Statically validate the constraints</a> of <var title="">form</var>, and let <var title="">unhandled invalid
   controls</var> be the list of elements returned if the result was
   <i>negative</i>.</p></li>

   <li><p>If the result was <i>positive</i>, then return that result
   and abort these steps.</p></li>

   <li><p>Report the problems with the constraints of at least one of
   the elements given in <var title="">unhandled invalid
   controls</var> to the user. User agents may focus one of those
   elements in the process, by running the <a href="#focusing-steps">focusing steps</a>
   for that element, and may change the scrolling position of the
   document, or perform some other action that brings the element to
   the user's attention. User agents may report more than one
   constraint violation. User agents may coalesce related constraint
   violation reports if appropriate (e.g. if multiple radio buttons in
   a <a href="states-of-the-type-attribute.html#radio-button-group" title="radio button group">group</a> are marked as
   required, only one error need be reported). If one of the controls
   is not <a href="#being-rendered">being rendered</a> (e.g. it has the <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute set) then user agents
   may report a script error.</p></li>

   <li><p>Return a <i>negative</i> result.</p></li>

  </ol></div>



<!--TOPIC:DOM APIs-->
  <h5 id="the-constraint-validation-api"><span class="secno">4.10.21.3 </span>The <dfn>constraint validation API</dfn></h5>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-cva-willValidate"><a href="#dom-cva-willvalidate">willValidate</a></code></dt>

   <dd>

    <p>Returns true if the element will be validated when the form is submitted; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity</a></code>(<var title="">message</var>)</dt>

   <dd>

    <p>Sets a custom error, so that the element would fail to
    validate. The given message is the message to be shown to the user
    when reporting the problem to the user.</p>

    <p>If the argument is the empty string, clears the custom error.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-valueMissing"><a href="#dom-validitystate-valuemissing">valueMissing</a></code></dt>

   <dd>

    <p>Returns true if the element has no value but is a required field; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-typeMismatch"><a href="#dom-validitystate-typemismatch">typeMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value is not in the correct syntax; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-patternMismatch"><a href="#dom-validitystate-patternmismatch">patternMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value doesn't match the provided pattern; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-tooLong"><a href="#dom-validitystate-toolong">tooLong</a></code></dt>

   <dd>

    <p>Returns true if the element's value is longer than the provided maximum length; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-rangeUnderflow"><a href="#dom-validitystate-rangeunderflow">rangeUnderflow</a></code></dt>

   <dd>

    <p>Returns true if the element's value is lower than the provided minimum; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-rangeOverflow"><a href="#dom-validitystate-rangeoverflow">rangeOverflow</a></code></dt>

   <dd>

    <p>Returns true if the element's value is higher than the provided maximum; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-stepMismatch"><a href="#dom-validitystate-stepmismatch">stepMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value doesn't fit the rules given by the <code title="attr-input-step"><a href="common-input-element-attributes.html#attr-input-step">step</a></code> attribute; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-customError"><a href="#dom-validitystate-customerror">customError</a></code></dt>

   <dd>

    <p>Returns true if the element has a custom error; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-valid"><a href="#dom-validitystate-valid">valid</a></code></dt>

   <dd>

    <p>Returns true if the element's value has no validity problems; false otherwise.</p>

   </dd>

   <dt><var title="">valid</var> = <var title="">element</var> . <code title="dom-cva-checkValidity"><a href="#dom-cva-checkvalidity">checkValidity</a></code>()</dt>

   <dd>

    <p>Returns true if the element's value has no validity problems;
    false otherwise. Fires an <code title="event-invalid">invalid</code> event at the element in the
    latter case.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validationMessage"><a href="#dom-cva-validationmessage">validationMessage</a></code></dt>

   <dd>

    <p>Returns the error message that would be shown to the user if
    the element was to be checked for validity.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-cva-willvalidate" title="dom-cva-willValidate"><code>willValidate</code></dfn>
  attribute must return true if an element is a <a href="#candidate-for-constraint-validation">candidate for
  constraint validation</a>, and false otherwise (i.e. false if any
  conditions are <a href="#barred-from-constraint-validation" title="barred from constraint
  validation">barring it from constraint validation</a>).</p>

  <p>The <dfn id="dom-cva-setcustomvalidity" title="dom-cva-setCustomValidity"><code>setCustomValidity(<var title="">message</var>)</code></dfn>, when invoked, must set the
  <a href="#custom-validity-error-message">custom validity error message</a> to the value of the given
  <var title="">message</var> argument.</p>

  </div>

  <div class="example">

   <p>In the following example, a script checks the value of a form
   control each time it is edited, and whenever it is not a valid
   value, uses the <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code> method
   to set an appropriate message.</p>

   <pre>&lt;label&gt;Feeling: &lt;input name=f type="text" oninput="check(this)"&gt;&lt;/label&gt;
&lt;script&gt;
 function check(input) {
   if (input.value == "good" ||
       input.value == "fine" ||
       input.value == "tired") {
     input.setCustomValidity('"' + input.value + '" is not a feeling.');
<!--   } else if (input.value == "...") {
     input.setCustomValidity('...');
-->   } else {
     // input is fine -- reset the error message
     input.setCustomValidity('');
   }
 }
&lt;/script&gt;</pre>

  </div>

  <div class="impl">

  <p>The <dfn id="dom-cva-validity" title="dom-cva-validity"><code>validity</code></dfn>
  attribute must return a <code><a href="#validitystate">ValidityState</a></code> object that
  represents the <a href="#validity-states">validity states</a> of the element. This
  object is <a href="infrastructure.html#live">live</a>, and the same object must be returned
  each time the element's <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> attribute is retrieved.</p>

<pre class="idl">interface <dfn id="validitystate">ValidityState</dfn> {
  readonly attribute boolean <a href="#dom-validitystate-valuemissing" title="dom-ValidityState-valueMissing">valueMissing</a>;
  readonly attribute boolean <a href="#dom-validitystate-typemismatch" title="dom-ValidityState-typeMismatch">typeMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-patternmismatch" title="dom-ValidityState-patternMismatch">patternMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-toolong" title="dom-ValidityState-tooLong">tooLong</a>;
  readonly attribute boolean <a href="#dom-validitystate-rangeunderflow" title="dom-ValidityState-rangeUnderflow">rangeUnderflow</a>;
  readonly attribute boolean <a href="#dom-validitystate-rangeoverflow" title="dom-ValidityState-rangeOverflow">rangeOverflow</a>;
  readonly attribute boolean <a href="#dom-validitystate-stepmismatch" title="dom-ValidityState-stepMismatch">stepMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-customerror" title="dom-ValidityState-customError">customError</a>;
  readonly attribute boolean <a href="#dom-validitystate-valid" title="dom-ValidityState-valid">valid</a>;
};</pre>

  <p>A <code><a href="#validitystate">ValidityState</a></code> object has the following
  attributes. On getting, they must return true if the corresponding
  condition given in the following list is true, and false
  otherwise.</p>

  <dl><dt><dfn id="dom-validitystate-valuemissing" title="dom-ValidityState-valueMissing"><code>valueMissing</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-being-missing">suffering from being missing</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-typemismatch" title="dom-ValidityState-typeMismatch"><code>typeMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-type-mismatch">suffering from a type mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-patternmismatch" title="dom-ValidityState-patternMismatch"><code>patternMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-pattern-mismatch">suffering from a pattern mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-toolong" title="dom-ValidityState-tooLong"><code>tooLong</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-being-too-long">suffering from being too long</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-rangeunderflow" title="dom-ValidityState-rangeUnderflow"><code>rangeUnderflow</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-an-underflow">suffering from an underflow</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-rangeoverflow" title="dom-ValidityState-rangeOverflow"><code>rangeOverflow</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-an-overflow">suffering from an overflow</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-stepmismatch" title="dom-ValidityState-stepMismatch"><code>stepMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-step-mismatch">suffering from a step mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-customerror" title="dom-ValidityState-customError"><code>customError</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-custom-error">suffering from a custom error</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-valid" title="dom-ValidityState-valid"><code>valid</code></dfn></dt>
   <dd> <p>None of the other conditions are true.</p> </dd>

  </dl><p>When the <dfn id="dom-cva-checkvalidity" title="dom-cva-checkValidity"><code>checkValidity()</code></dfn>
  method is invoked, if the element is a <a href="#candidate-for-constraint-validation">candidate for
  constraint validation</a> and does not <a href="#concept-fv-valid" title="concept-fv-valid">satisfy its constraints</a>, the user
  agent must <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-invalid">invalid</code> that is cancelable (but in this
  case has no default action) at the element and return
  false. Otherwise, it must only return true without doing anything
  else.</p>

  <p>The <dfn id="dom-cva-validationmessage" title="dom-cva-validationMessage"><code>validationMessage</code></dfn>
  attribute must return the empty string if the element is not a
  <a href="#candidate-for-constraint-validation">candidate for constraint validation</a> or if it is one but
  it <a href="#concept-fv-valid" title="concept-fv-valid">satisfies its constraints</a>;
  otherwise, it must return a suitably localized message that the user
  agent would show the user if this were the only form control with a
  validity constraint problem. If the user agent would not actually
  show a textual message in such a situation (e.g. it would show a
  graphical cue instead), then the attribute must return a suitably
  localized message that expresses (one or more of) the validity
  constraint(s) that the control does not satisfy. If the element is a
  <a href="#candidate-for-constraint-validation">candidate for constraint validation</a> and is
  <a href="#suffering-from-a-custom-error">suffering from a custom error</a>, then the <a href="#custom-validity-error-message">custom
  validity error message</a> should be present in the return
  value.</p>

  </div>
<!--TOPIC:HTML-->


<!--ADD-TOPIC:Security-->
  <h5 id="security-forms"><span class="secno">4.10.21.4 </span>Security</h5>

  <p id="security-0">Servers should not rely on client-side
  validation. Client-side validation can be intentionally bypassed by
  hostile users, and unintentionally bypassed by users of older user
  agents or automated tools that do not implement these features. The
  constraint validation features are only intended to improve the user
  experience, not to provide any kind of security mechanism.</p>
<!--REMOVE-TOPIC:Security-->




  <h4 id="form-submission-0"><span class="secno">4.10.22 </span><dfn>Form submission</dfn></h4>

  <div class="impl">

  <h5 id="introduction-2"><span class="secno">4.10.22.1 </span>Introduction</h5>

  </div>

  <p><i>This section is non-normative.</i></p>
  <p>When a form is submitted, the data in the form is converted into
  the structure specified by the <a href="form-submission.html#concept-fs-enctype" title="concept-fs-enctype">enctype</a>, and then sent to the
  destination specified by the <a href="form-submission.html#concept-fs-action" title="concept-fs-action">action</a> using the given <a href="form-submission.html#concept-fs-method" title="concept-fs-method">method</a>.</p>

  <p>For example, take the following form:</p>

  <pre>&lt;form action="/find.cgi" method=get&gt;
 &lt;input type=text name=t&gt;
 &lt;input type=search name=q&gt;
 &lt;input type=submit&gt;
&lt;/form&gt;</pre>

  <p>If the user types in "cats" in the first field and "fur" in the
  second, and then hits the submit button, then the user agent will
  load <code title="">/find.cgi?t=cats&amp;q=fur</code>.</p>

  <p>On the other hand, consider this form:</p>

  <pre>&lt;form action="/find.cgi" method=post enctype="multipart/form-data"&gt;
 &lt;input type=text name=t&gt;
 &lt;input type=search name=q&gt;
 &lt;input type=submit&gt;
&lt;/form&gt;</pre>

  <p>Given the same user input, the result on submission is quite
  different: the user agent instead does an HTTP POST to the given
  URL, with as the entity body something like the following text:</p>

  <pre>------kYFrd4jNJEgCervE
Content-Disposition: form-data; name="t"

cats
------kYFrd4jNJEgCervE
Content-Disposition: form-data; name="q"

fur
------kYFrd4jNJEgCervE--</pre>



  <div class="impl">

  <h5 id="implicit-submission"><span class="secno">4.10.22.2 </span>Implicit submission</h5>

  <p>A <code><a href="the-form-element.html#the-form-element">form</a></code> element's <dfn id="default-button">default button</dfn> is the
  first <a href="forms.html#concept-submit-button" title="concept-submit-button">submit button</a> in
  <a href="infrastructure.html#tree-order">tree order</a> whose <a href="association-of-controls-and-forms.html#form-owner">form owner</a> is that
  <code><a href="the-form-element.html#the-form-element">form</a></code> element.</p>

  <p>If the user agent supports letting the user submit a form
  implicitly (for example, on some platforms hitting the "enter" key
  while a text field is focused implicitly submits the form), then
  doing so for a form whose <a href="#default-button">default button</a> has a defined
  <a href="content-models.html#activation-behavior">activation behavior</a> must cause the user agent to
  <a href="content-models.html#run-synthetic-click-activation-steps">run synthetic click activation steps</a> on that
  <a href="#default-button">default button</a>.</p>

  <p class="note">Consequently, if the <a href="#default-button">default button</a> is
  <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>, the form is not
  submitted when such an implicit submission mechanism is used. (A
  button has no <a href="content-models.html#activation-behavior">activation behavior</a> when disabled.)</p>

  <p class="note">There are pages on the Web that are only usable if
  there is a way to implicitly submit forms, so user agents are
  strongly encouraged to support this.</p>

  <p><!-- For Web compatibility reasons caused by obscure historical
  accidents, -->If the form has no <a href="forms.html#concept-submit-button" title="concept-submit-button">submit button</a>, then the
  implicit submission mechanism must do nothing if the form has more
  than one <i>field that blocks implicit submission</i>, and must
  <a href="#concept-form-submit" title="concept-form-submit">submit</a> the
  <code><a href="the-form-element.html#the-form-element">form</a></code> element from the <code><a href="the-form-element.html#the-form-element">form</a></code> element itself
  otherwise.</p>

  <p>For the purpose of the previous paragraph, an element is a
  <i>field that blocks implicit submission</i> of a <code><a href="the-form-element.html#the-form-element">form</a></code>
  element if it is an <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <a href="association-of-controls-and-forms.html#form-owner">form
  owner</a> is that <code><a href="the-form-element.html#the-form-element">form</a></code> element and whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in one of the
  following states:
  <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a>,
  <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-search">Search</a>,
  <a href="states-of-the-type-attribute.html#url-state-(type=url)" title="attr-input-type-url">URL</a>,
  <a href="states-of-the-type-attribute.html#telephone-state-(type=tel)" title="attr-input-type-tel">Telephone</a>,
  <a href="states-of-the-type-attribute.html#e-mail-state-(type=email)" title="attr-input-type-email">E-mail</a>,
  <a href="states-of-the-type-attribute.html#password-state-(type=password)" title="attr-input-type-password">Password</a>,
  <a href="states-of-the-type-attribute.html#date-and-time-state-(type=datetime)" title="attr-input-type-datetime">Date and Time</a>,
  <a href="states-of-the-type-attribute.html#date-state-(type=date)" title="attr-input-type-date">Date</a>,
  <a href="states-of-the-type-attribute.html#month-state-(type=month)" title="attr-input-type-month">Month</a>,
  <a href="states-of-the-type-attribute.html#week-state-(type=week)" title="attr-input-type-week">Week</a>,
  <a href="states-of-the-type-attribute.html#time-state-(type=time)" title="attr-input-type-time">Time</a>,
  <a href="states-of-the-type-attribute.html#local-date-and-time-state-(type=datetime-local)" title="attr-input-type-datetime-local">Local Date and Time</a>,
  <a href="states-of-the-type-attribute.html#number-state-(type=number)" title="attr-input-type-number">Number</a>
  </p>

  </div>


  <div class="impl">

  <h5 id="form-submission-algorithm"><span class="secno">4.10.22.3 </span>Form submission algorithm</h5>

  <p>When a <code><a href="the-form-element.html#the-form-element">form</a></code> element <var title="">form</var> is <dfn id="concept-form-submit" title="concept-form-submit">submitted</dfn> from an element <var title="">submitter</var> (typically a button), optionally with a
  <var title="">submitted from <code title="dom-form-submit"><a href="the-form-element.html#dom-form-submit">submit()</a></code> method</var> flag set, the
  user agent must run the following steps:</p>

  <ol><li><p>Let <var title="">form document</var> be the <var title="">form</var>'s <code><a href="dom.html#document">Document</a></code>.</p></li>

   <li id="sandboxSubmitBlocked"><p>If <var title="">form
   document</var> has no associated <a href="#browsing-context">browsing context</a> or
   its <a href="#active-sandboxing-flag-set">active sandboxing flag set</a> has its
   <a href="#sandboxed-forms-browsing-context-flag">sandboxed forms browsing context flag</a> set, then abort
   these steps without doing anything.</p></li>

   <li><p>Let <var title="">form browsing context</var> be the
   <a href="#browsing-context">browsing context</a> of <var title="">form
   document</var>.</p></li>

   <li><p>If <var title="">form</var> is already being submitted
   (i.e. the form was <a href="#concept-form-submit" title="concept-form-submit">submitted</a> again while processing
   the events fired from the next two steps, probably from a script
   redundantly calling the <code title="dom-form-submit"><a href="the-form-element.html#dom-form-submit">submit()</a></code> method on <var title="">form</var>), then abort these steps. This doesn't affect
   the earlier instance of this algorithm.</p></li>

   <!-- lock (implicit in previous step) -->

   <li><p>If the <var title="">submitted from <code title="dom-form-submit"><a href="the-form-element.html#dom-form-submit">submit()</a></code> method</var> flag is not
   set, and the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-novalidate" title="concept-fs-novalidate">no-validate state</a> is false,
   then <a href="#interactively-validate-the-constraints">interactively validate the constraints</a> of <var title="">form</var> and examine the result: if the result is
   negative (the constraint validation concluded that there were
   invalid fields and probably informed the user of this) then abort
   these steps.</p></li>

   <li><p>If the <var title="">submitted from <code title="dom-form-submit"><a href="the-form-element.html#dom-form-submit">submit()</a></code> method</var> flag is not
   set, then <a href="#fire-a-simple-event">fire a simple event</a> that is cancelable named
   <code title="event-submit">submit</code>, at <var title="">form</var>. If the event's default action is prevented
   (i.e. if the event is canceled) then abort these steps. Otherwise,
   continue (effectively the default action is to perform the
   submission).</p></li>

   <!-- if you add any steps between the "lock" and "unlock" lines,
   make sure to update the step immediately before the "lock" line -->

   <!-- unlock -->

   <li><p>Let <var title="">form data set</var> be the result of
   <a href="#constructing-the-form-data-set">constructing the form data set</a> for <var title="">form</var> in the context of <var title="">submitter</var>.</p></li>

   <li><p>Let <var title="">action</var> be the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-action" title="concept-fs-action">action</a>.</p></li>

   <li>

    <p>If <var title="">action</var> is the empty string, let <var title="">action</var> be <a href="dom.html#the-document's-address">the document's address</a> of
    the <var title="">form document</var>.</p>

    <p class="note">This step is a <a href="introduction.html#willful-violation">willful violation</a> of
    RFC 3986, which would require base URL processing here. This
    violation is motivated by a desire for compatibility with legacy
    content. <a href="#refsRFC3986">[RFC3986]</a></p>

    <!-- Don't ask me why. But that's what IE does. It even treats
    action="" differently from action=" " or action="#" (the latter
    two resolve to the base URL, the first one resolves to the doc
    URL). And other browsers concur. It is even required, see e.g.
      http://bugs.webkit.org/show_bug.cgi?id=7763
      https://bugzilla.mozilla.org/show_bug.cgi?id=297761
    -->

   </li>

   <li><p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> the
   <a href="urls.html#url">URL</a> <var title="">action</var>, relative to the <var title="">submitter</var> element. If this fails, abort these
   steps. Otherwise, let <var title="">action</var> be the resulting
   <a href="urls.html#absolute-url">absolute URL</a>.</p></li>

   <li><p>Let <var title="">scheme</var> be the <a href="urls.html#url-scheme" title="url-scheme">&lt;scheme&gt;</a> of the resulting
   <a href="urls.html#absolute-url">absolute URL</a>.</p></li>

   <li><p>Let <var title="">enctype</var> be the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-enctype" title="concept-fs-enctype">enctype</a>.</p></li>

   <li><p>Let <var title="">method</var> be the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-method" title="concept-fs-method">method</a>.</p></li>

   <li><p>Let <var title="">target</var> be the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-target" title="concept-fs-target">target</a>.</p></li>

   <li><p>If the user indicated a specific <a href="#browsing-context">browsing
   context</a> to use when submitting the form, then let <var title="">target browsing context</var> be that <a href="#browsing-context">browsing
   context</a>. Otherwise, apply <a href="#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for choosing a
   browsing context given a browsing context name</a> using <var title="">target</var> as the name and <var title="">form browsing
   context</var> as the context in which the algorithm is executed,
   and let <var title="">target browsing context</var> be the
   resulting <a href="#browsing-context">browsing context</a>.</p></li>

   <li><p>If <var title="">target browsing context</var> was created
   in the previous step, or if the <var title="">form document</var>
   has not yet <a href="#completely-loaded">completely loaded</a>, then let <var title="">replace</var> be true. Otherwise, let it be
   false.</p></li>

   <li>

<!--FORM-DIALOG-->

    <p>Otherwise, select the appropriate row in the table below based
    on the value of <var title="">scheme</var> as given by the first
    cell of each row. Then, select the appropriate cell on that row
    based on the value of <var title="">method</var> as given in the
    first cell of each column. Then, jump to the steps named in that
    cell and defined below the table.</p>

    <table><thead><tr><td>
      </td><th> <a href="form-submission.html#attr-fs-method-get" title="attr-fs-method-GET">GET</a>
      </th><th> <a href="form-submission.html#attr-fs-method-post" title="attr-fs-method-POST">POST</a>
     </th></tr></thead><tbody><tr><th> <code title="">http</code>
      </th><td> <a href="#submit-mutate-action" title="submit-mutate-action">Mutate action URL</a>
      </td><td> <a href="#submit-body" title="submit-body">Submit as entity body</a>
     </td></tr><tr><th> <code title="">https</code>
      </th><td> <a href="#submit-mutate-action" title="submit-mutate-action">Mutate action URL</a>
      </td><td> <a href="#submit-body" title="submit-body">Submit as entity body</a>
     </td></tr><tr><th> <code title="">ftp</code>
      </th><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
      </td><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
     </td></tr><tr><th> <code title="">javascript</code>
      </th><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
      </td><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
     </td></tr><tr><th> <code title="">data</code>
      </th><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
      </td><td> <a href="#submit-data-post" title="submit-data-post">Post to data:</a>
     </td></tr><tr><th> <code title="">mailto</code>
      </th><td> <a href="#submit-mailto-headers" title="submit-mailto-headers">Mail with headers</a>
      </td><td> <a href="#submit-mailto-body" title="submit-mailto-body">Mail as body</a>
    </td></tr></tbody></table><p>If <var title="">scheme</var> is not one of those listed in
    this table, then the behavior is not defined by this
    specification. User agents should, in the absence of another
    specification defining this, act in a manner analogous to that
    defined in this specification for similar schemes.</p>

    <p>The behaviors are as follows:</p>

    <dl><dt><dfn id="submit-mutate-action" title="submit-mutate-action">Mutate action URL</dfn>
     </dt><dd>

      <p>Let <var title="">query</var> be the result of encoding the
      <var title="">form data set</var> using the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
      algorithm</a>, interpreted as a US-ASCII string.</p>

      <!-- by this point we've already tried to resolve the URL, so we
      know we can parse it -->

      <p>Let <var title="">destination</var> be a new <a href="urls.html#url">URL</a>
      that is equal to the <var title="">action</var> except that its
      <a href="urls.html#url-query" title="url-query">&lt;query&gt;</a> component is
      replaced by <var title="">query</var> (adding a "?" (U+003F) character if appropriate).</p>

      <p><a href="#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to <var title="">destination</var>. If
      <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-body" title="submit-body">Submit as entity body</dfn>
     </dt><dd>

      <p>Let <var title="">entity body</var> be the result of encoding
      the <var title="">form data set</var> using the
      <a href="#appropriate-form-encoding-algorithm">appropriate form encoding algorithm</a>.</p>

      <p>Let <var title="">MIME type</var> be determined as
      follows:</p>

      <dl><dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-urlencoded"><a href="form-submission.html#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">application/x-www-form-urlencoded</code>".</dd>

       <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-formdata"><a href="form-submission.html#attr-fs-enctype-formdata">multipart/form-data</a></code></dt>

       <dd>Let <var title="">MIME type</var> be the concatenation of
       the string "<code title="">multipart/form-data;</code>", a
       U+0020 SPACE character, the string "<code title="">boundary=</code>", and the <a href="#multipart/form-data-boundary-string"><code title="">multipart/form-data</code> boundary string</a>
       generated by the <a href="#multipart/form-data-encoding-algorithm"><code title="">multipart/form-data</code> encoding
       algorithm</a>.</dd>

       <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-text"><a href="form-submission.html#attr-fs-enctype-text">text/plain</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">text/plain</code>".</dd>

      </dl><!--<p>If <var title="">method</var> is anything but (GET or)
      POST, and the <span>origin</span> of <var title="">action</var>
      is not the <span>same origin</span> as that of <var
      title="">form document</var>, then abort these steps.</p> [or do
      CORS] (this is commented out since only POST can trigger this
      now, and that's historically unrestricted)--><p>Otherwise, <a href="#navigate">navigate</a><!--DONAV form--> <var title="">target browsing context</var> to <var title="">action</var> using the HTTP method given by <var title="">method</var> and with <var title="">entity body</var>
      as the entity body, of type <var title="">MIME type</var>. If
      <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-get-action" title="submit-get-action">Get action URL</dfn>
     </dt><dd>

      <p><a href="#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to <var title="">action</var>. If <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-data-post" title="submit-data-post">Post to data:</dfn>
     </dt><dd>

      <p>Let <var title="">data</var> be the result of encoding the
      <var title="">form data set</var> using the <a href="#appropriate-form-encoding-algorithm">appropriate
      form encoding algorithm</a>.</p>

      <p>If <var title="">action</var> contains the string "<code title="">%%%%</code>" (four U+0025 PERCENT SIGN characters),
      then %-escape all bytes in <var title="">data</var> that, if
      interpreted as US-ASCII, do not match the <code title="">unreserved</code> production in the URI Generic Syntax,
      and then, treating the result as a US-ASCII string, further
      %-escape all the U+0025 PERCENT SIGN characters in the resulting
      string and replace the first occurrence of "<code title="">%%%%</code>" in <var title="">action</var> with the
      resulting double-escaped string. <a href="#refsRFC3986">[RFC3986]</a></p>

      <p>Otherwise, if <var title="">action</var> contains the string
      "<code title="">%%</code>" (two U+0025 PERCENT SIGN characters
      in a row, but not four), then %-escape all characters in <var title="">data</var> that, if interpreted as US-ASCII, do not
      match the <code title="">unreserved</code> production in the URI
      Generic Syntax, and then, treating the result as a US-ASCII
      string, replace the first occurrence of "<code title="">%%</code>" in <var title="">action</var> with the
      resulting escaped string. <a href="#refsRFC3986">[RFC3986]</a></p>

      <p><a href="#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to the potentially modified <var title="">action</var> (which will be a <a href="infrastructure.html#data-protocol" title="data
      protocol"><code title="">data:</code> URL</a>). If <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-mailto-headers" title="submit-mailto-headers">Mail with headers</dfn>
     </dt><dd>

      <p>Let <var title="">headers</var> be the resulting encoding the
      <var title="">form data set</var> using the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
      algorithm</a>, interpreted as a US-ASCII string.</p>

      <p>Replace occurrences of "+" (U+002B) characters in
      <var title="">headers</var> with the string "<code title="">%20</code>".</p>

      <p>Let <var title="">destination</var> consist of all the
      characters from the first character in <var title="">action</var> to the character immediately before the
      first "?" (U+003F) character, if any, or the end of
      the string if there are none.</p>

      <p>Append a single "?" (U+003F) character to <var title="">destination</var>.</p>

      <p>Append <var title="">headers</var> to <var title="">destination</var>.</p>

      <p><a href="#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to <var title="">destination</var>. If
      <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-mailto-body" title="submit-mailto-body">Mail as body</dfn>
     </dt><dd>

      <p>Let <var title="">body</var> be the resulting encoding the
      <var title="">form data set</var> using the <a href="#appropriate-form-encoding-algorithm">appropriate
      form encoding algorithm</a> and then %-escaping all the bytes
      in the resulting byte string that, when interpreted as US-ASCII,
      do not match the <code title="">unreserved</code> production in
      the URI Generic Syntax. <a href="#refsRFC3986">[RFC3986]</a></p>

      <p>Let <var title="">destination</var> have the same value as
      <var title="">action</var>.</p>

      <p>If <var title="">destination</var> does not contain a "?" (U+003F) character, append a single "?" (U+003F) character to <var title="">destination</var>. Otherwise, append a single U+0026
      AMPERSAND character (&amp;).</p>

      <p>Append the string "<code title="">body=</code>" to <var title="">destination</var>.</p>

      <p>Append <var title="">body</var>, interpreted as a US-ASCII
      string, to <var title="">destination</var>.</p>

      <p><a href="#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to <var title="">destination</var>. If
      <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>


<!--FORM-DIALOG-->

    </dl><p>The <dfn id="appropriate-form-encoding-algorithm">appropriate form encoding algorithm</dfn> is
    determined as follows:</p>

    <dl><dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-urlencoded"><a href="form-submission.html#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code></dt>

     <dd>Use the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
     algorithm</a>.</dd>

     <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-formdata"><a href="form-submission.html#attr-fs-enctype-formdata">multipart/form-data</a></code></dt>

     <dd>Use the <a href="#multipart/form-data-encoding-algorithm"><code title="">multipart/form-data</code> encoding
     algorithm</a>.</dd>

     <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-text"><a href="form-submission.html#attr-fs-enctype-text">text/plain</a></code></dt>

     <dd>Use the <a href="#text/plain-encoding-algorithm"><code title="">text/plain</code> encoding
     algorithm</a>.</dd>

    </dl></li>

  </ol><h5 id="constructing-form-data-set"><span class="secno">4.10.22.4 </span>Constructing the form data set</h5>

  <p>The algorithm to <dfn id="constructing-the-form-data-set" title="constructing the form data
  set">construct the form data set</dfn> for a form <var title="">form</var> optionally in the context of a submitter <var title="">submitter</var> is as follows. If not specified otherwise,
  <var title="">submitter</var> is null.</p>

  <ol><li><p>Let <var title="">controls</var> be a list of all the <a href="forms.html#category-submit" title="category-submit">submittable elements</a> whose
   <a href="association-of-controls-and-forms.html#form-owner">form owner</a> is <var title="">form</var>, in <a href="infrastructure.html#tree-order">tree
   order</a>.</p></li>

   <li><p>Let the <var title="">form data set</var> be a list of
   name-value-type tuples, initially empty.</p></li>

   <li>

    <p><i>Loop</i>: For each element <var title="">field</var> in <var title="">controls</var>, in <a href="infrastructure.html#tree-order">tree order</a>, run the
    following substeps:</p>

    <ol><li>

      <p>If any of the following conditions are met, then skip these
      substeps for this element:</p>

      <ul><li>The <var title="">field</var> element has a
       <code><a href="the-datalist-element.html#the-datalist-element">datalist</a></code> element ancestor.</li>

       <li>The <var title="">field</var> element is <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>.</li>

       <li>The <var title="">field</var> element is a <a href="forms.html#concept-button" title="concept-button">button</a> but it is not <var title="">submitter</var>.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)" title="attr-input-type-checkbox">Checkbox</a> state and
       whose <a href="attributes-common-to-form-controls.html#concept-fe-checked" title="concept-fe-checked">checkedness</a> is
       false.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#radio-button-state-(type=radio)" title="attr-input-type-radio">Radio Button</a> state and
       whose <a href="attributes-common-to-form-controls.html#concept-fe-checked" title="concept-fe-checked">checkedness</a> is
       false.</li>

       <li>The <var title="">field</var> element is not an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state, and
       either the <var title="">field</var> element does not have a
       <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute specified, or
       its <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute's value is
       the empty string.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-object-element.html#the-object-element">object</a></code> element that is not using a
       <a href="infrastructure.html#plugin">plugin</a>.</li>

      </ul><p>Otherwise, process <var title="">field</var> as follows:</p>

     </li>

     <li><p>Let <var title="">type</var> be the value of the <code title="">type</code> IDL attribute of <var title="">field</var>.</p></li> <!-- if the field is an <object>
     element, this will get ignored. -->

     <li>

      <p>If the <var title="">field</var> element is an
      <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state,
      then run these further nested substeps:</p>

      <ol><li><p>If the <var title="">field</var> element has a <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute specified and its
       value is not the empty string, let <var title="">name</var> be
       that value followed by a single "." (U+002E) character.
       Otherwise, let <var title="">name</var> be the empty
       string.</p></li>

       <li><p>Let <var title="">name<sub title="">x</sub></var> be the
       string consisting of the concatenation of <var title="">name</var> and a single "x" (U+0078) character.</p></li>

       <li><p>Let <var title="">name<sub title="">y</sub></var> be the
       string consisting of the concatenation of <var title="">name</var> and a single "y" (U+0079) character.</p></li>

       <li><p>The <var title="">field</var> element is <var title="">submitter</var>, and before this algorithm was invoked
       the user <a href="states-of-the-type-attribute.html#concept-input-type-image-coordinate" title="concept-input-type-image-coordinate">indicated a
       coordinate</a>. Let <var title="">x</var> be the <var title="">x</var>-component of the coordinate selected by the
       user, and let <var title="">y</var> be the <var title="">y</var>-component of the coordinate selected by the
       user.</p></li>

       <li><p>Append an entry to the <var title="">form data set</var>
       with the name <var title="">name<sub title="">x</sub></var>,
       the value <var title="">x</var>, and the type <var title="">type</var>.</p></li>

       <li><p>Append an entry to the <var title="">form data set</var>
       with the name <var title="">name<sub title="">y</sub></var> and
       the value <var title="">y</var>, and the type <var title="">type</var>.</p></li>

       <li><p>Skip the remaining substeps for this element: if there
       are any more elements in <var title="">controls</var>, return
       to the top of the <i>loop</i> step, otherwise, jump to the
       <i>end</i> step below.</p></li>

      </ol></li>

     <li><p>Let <var title="">name</var> be the value of the <var title="">field</var> element's <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute.</p></li>

     <li><p>If the <var title="">field</var> element is a
     <code><a href="the-select-element.html#the-select-element">select</a></code> element, then for each <code><a href="the-option-element.html#the-option-element">option</a></code>
     element in the <code><a href="the-select-element.html#the-select-element">select</a></code> element whose <a href="the-option-element.html#concept-option-selectedness" title="concept-option-selectedness">selectedness</a> is true,
     append an entry to the <var title="">form data set</var> with the
     <var title="">name</var> as the name, the <a href="the-option-element.html#concept-option-value" title="concept-option-value">value</a> of the
     <code><a href="the-option-element.html#the-option-element">option</a></code> element as the value, and <var title="">type</var> as the type.</p></li>

     <li>

      <p>Otherwise, if the <var title="">field</var> element is an
      <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)" title="attr-input-type-checkbox">Checkbox</a> state or the
      <a href="states-of-the-type-attribute.html#radio-button-state-(type=radio)" title="attr-input-type-radio">Radio Button</a> state,
      then run these further nested substeps:</p>

      <ol><li><p>If the <var title="">field</var> element has a <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">value</a></code> attribute specified, then
       let <var title="">value</var> be the value of that attribute;
       otherwise, let <var title="">value</var> be the string
       "<code title="">on</code>".</p></li>

       <li><p>Append an entry to the <var title="">form data set</var>
       with <var title="">name</var> as the name, <var title="">value</var> as the value, and <var title="">type</var>
       as the type.</p></li>

      </ol></li>

     <li><p>Otherwise, if the <var title="">field</var> element is an
     <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#file-upload-state-(type=file)" title="attr-input-type-file">File Upload</a> state, then for
     each file <a href="states-of-the-type-attribute.html#concept-input-type-file-selected" title="concept-input-type-file-selected">selected</a> in the
     <code><a href="the-input-element.html#the-input-element">input</a></code> element, append an entry to the <var title="">form data set</var> with the <var title="">name</var> as
     the name, the file (consisting of the name, the type, and the
     body) as the value, and <var title="">type</var> as the type. If
     there are no <a href="states-of-the-type-attribute.html#concept-input-type-file-selected" title="concept-input-type-file-selected">selected files</a>,
     then append an entry to the <var title="">form data set</var>
     with the <var title="">name</var> as the name, the empty string
     as the value, and <code>application/octet-stream</code> as the
     type.</p></li>
     <!-- https://bugzilla.mozilla.org/show_bug.cgi?id=529859 -->

     <li><p>Otherwise, if the <var title="">field</var> element is an
     <code><a href="the-object-element.html#the-object-element">object</a></code> element: try to obtain a form submission
     value from the <a href="infrastructure.html#plugin">plugin</a><!-- using NPAPI's
     NPP_GetValue() entry point with the NPPVformValue variable -->,
     and if that is successful, append an entry to the <var title="">form data set</var> with <var title="">name</var> as the
     name, the returned form submission value as the value, and the
     string "<code title="">object</code>" as the type.</p></li>

     <li><p>Otherwise, append an entry to the <var title="">form data
     set</var> with <var title="">name</var> as the name, the <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> of the <var title="">field</var> element as the value, and <var title="">type</var> as the type.</p></li>

     <li>

      <p>If the element has a <a href="form-submission.html#form-control-dirname-attribute">form control <code title="">dirname</code> attribute</a>, and that attribute's
      value is not the empty string, then run these substeps:</p>

      <ol><li><p>Let <var title="">dirname</var> be the value of the
       element's <code title="">dirname</code> attribute.</p></li>

       <li><p>Let <var title="">dir</var> be the string "<code title="">ltr</code>" if <a href="global-attributes.html#the-directionality">the directionality</a> of the
       element is '<a href="global-attributes.html#concept-ltr" title="concept-ltr">ltr</a>', and "<code title="">rtl</code>" otherwise (i.e. when <a href="global-attributes.html#the-directionality">the
       directionality</a> of the element is '<a href="global-attributes.html#concept-rtl" title="concept-rtl">rtl</a>').</p></li>

       <li><p>Append an entry to the <var title="">form data set</var>
       with <var title="">dirname</var> as the name, <var title="">dir</var> as the value, and the string "<code title="">direction</code>" as the type.</p></li>

      </ol><p class="note">An element can only have a <a href="form-submission.html#form-control-dirname-attribute">form control
      <code title="">dirname</code> attribute</a> if it is a
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
      whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
      either the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a> state
      or the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-search">Search</a>
      state.</p>

     </li>

    </ol></li>

   <li>

    <p><i>End</i>: For the name of each entry in the <var title="">form data set</var>, and for the value of each entry in
    the <var title="">form data set</var> whose type is not "<code title="">file</code>" or "<code title="">textarea</code>", replace
    every occurrence of a "CR" (U+000D) character not
    followed by a "LF" (U+000A) character, and every
    occurrence of a "LF" (U+000A) character not preceded by a
    "CR" (U+000D) character, by a two-character string
    consisting of a U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF)
    character pair.</p>

    <p class="note">In the case of the <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> of <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
    elements, this newline normalization is already performed during
    the conversion of the control's <a href="the-textarea-element.html#concept-textarea-raw-value" title="concept-textarea-raw-value">raw value</a> into the
    control's <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> (which also
    performs any necesary line wrapping). In the case of
    <code><a href="the-input-element.html#the-input-element">input</a></code> elements <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attributes in the <a href="states-of-the-type-attribute.html#file-upload-state-(type=file)" title="attr-input-type-file">File Upload</a> state, the value
    is not normalized.</p>

   </li>

   <li><p>Return the <var title="">form data set</var>.</p></li>

  </ol></div>


  <h5 id="url-encoded-form-data"><span class="secno">4.10.22.5 </span>URL-encoded form data</h5>

  <p class="note">This form data set encoding is in many ways an
  aberrant monstrosity, the result of many years of implementation
  accidents and compromises leading to a set of requirements necessary
  for interoperability, but in no way representing good design
  practices. In particular, readers are cautioned to pay close
  attention to the twisted details involving repeated (and in some
  cases nested) conversions between character encodings and byte
  sequences.</p>

  <div class="impl">

  <p>The <dfn id="application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
  algorithm</dfn> is as follows:</p>

  <ol><!-- the first few steps of this are the same as in the next section --><li><p>Let <var title="">result</var> be the empty string.</p></li>

   <li>

    <p>If the <code><a href="the-form-element.html#the-form-element">form</a></code> element has an <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute,
    then, taking into account the characters found in the <var title="">form data set</var>'s names and values, and the character
    encodings supported by the user agent, select a character encoding
    from the list given in the <code><a href="the-form-element.html#the-form-element">form</a></code>'s <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute
    that is an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>. If
    none of the encodings are supported, or if none are listed, then
    let the selected character encoding be UTF-8.</p>

    <p>Otherwise, if the <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> is
    an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>, then that is
    the selected character encoding.</p>

    <p>Otherwise, let the selected character encoding be UTF-8.</p>

   </li>

   <li><p>Let <var title="">charset</var> be the <a href="infrastructure.html#preferred-mime-name">preferred MIME
   name</a> of the selected character encoding.</p></li>

   <li>

    <p>For each entry in the <var title="">form data set</var>,
    perform these substeps:</p>

    <ol><li><p>If the entry's name is "<code title="attr-fe-name-charset"><a href="attributes-common-to-form-controls.html#attr-fe-name-charset">_charset_</a></code>"
     and its type is "<code title="">hidden</code>", replace its value
     with <var title="">charset</var>.</p></li>

     <li><p>If the entry's type is "<code title="">file</code>",
     replace its value with the file's filename only.</p></li> <!--
     this is not present in the next section -->

     <li><p>For each character in the entry's name and value that
     cannot be expressed using the selected character encoding,
     replace the character by a string consisting of a U+0026
     AMPERSAND character (&amp;), a "#" (U+0023) character,
     one or more characters in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a> representing the Unicode code point of the
     character in base ten, and finally a U+003B SEMICOLON character
     (;).</p></li><!-- we should say it should be the shortest
     possible string, no leading zeros. this whole step is asinine,
     though, so... -->

     <!-- this is where the similarities with the next section end -->

     <li>

      <p>Encode the entry's name and value using the selected
      character encoding. The entry's name and value are now byte
      strings.</p>

     </li>

     <li>

      <p>For each byte in the entry's name and value, apply the
      appropriate subsubsteps from the following list:</p>

      <dl class="switch"><dt>The byte is 0x20 (U+0020 SPACE if interpreted as ASCII)</dt>

       <dd>Replace the byte with a single 0x2B byte ("+" (U+002B) character if interpreted as ASCII).</dd>


       <!-- * - . 0-9 a-z _ A-Z -->

       <dt>If the byte is in the range 0x2A, 0x2D, 0x2E, 0x30 to 0x39,
       0x41 to 0x5A, 0x5F, 0x61 to 0x7A</dt>

       <dd><p>Leave the byte as is.</p></dd>


       <dt>Otherwise</dt>

       <dd>

        <ol><li><p>Let <var title="">s</var> be a string consisting of a
         "%" (U+0025) character followed by two characters
         in the ranges <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>
         and U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN CAPITAL
         LETTER F representing the hexadecimal value of the byte in
         question (zero-padded if necessary).</p></li>

         <li><p>Encode the string <var title="">s</var> as US-ASCII,
         so that it is now a byte string.</p>

         </li><li><p>Replace the byte in question in the name or value
         being processed by the bytes in <var title="">s</var>,
         preserving their relative order.</p></li>

        </ol></dd>

      </dl></li>

     <li>

      <p>Interpret the entry's name and value as Unicode strings
      encoded in US-ASCII. (All of the bytes in the string will be in
      the range 0x00 to 0x7F; the high bit will be zero throughout.)
      The entry's name and value are now Unicode strings again.</p>

     </li>

     <li><p>If the entry's name is "<code title="attr-fe-name-isindex"><a href="attributes-common-to-form-controls.html#attr-fe-name-isindex">isindex</a></code>", its type is "<code title="">text</code>", and this is the first entry in the <var title="">form data set</var>, then append the value to <var title="">result</var> and skip the rest of the substeps for this
     entry, moving on to the next entry, if any, or the next step in
     the overall algorithm otherwise.</p></li>

     <li><p>If this is not the first entry, append a single U+0026
     AMPERSAND character (&amp;) to <var title="">result</var>.</p></li>

     <li><p>Append the entry's name to <var title="">result</var>.</p></li>

     <li><p>Append a single "=" (U+003D) character to <var title="">result</var>.</p></li>

     <li><p>Append the entry's value to <var title="">result</var>.</p></li>

    </ol></li>

   <li><p>Encode <var title="">result</var> as US-ASCII and return the
   resulting byte stream.</p></li>

  </ol></div>

  <p>To <dfn id="application/x-www-form-urlencoded-decoding-algorithm" title="application/x-www-form-urlencoded decoding
  algorithm">decode <code>application/x-www-form-urlencoded</code>
  payloads</dfn>, the following algorithm should be used. This
  algorithm uses as inputs the payload itself, <var title="">payload</var>, consisting of a Unicode string using only
  characters in the range U+0000 to U+007F; a default character
  encoding <var title="">encoding</var>; and optionally an <var title="">isindex</var> flag indicating that the payload is to be
  processed as if it had been generated for a form containing an <code title="attr-fe-name-isindex"><a href="attributes-common-to-form-controls.html#attr-fe-name-isindex">isindex</a></code> control. The output of
  this algorithm is a sorted list of name-value pairs. If the <var title="">isindex</var> flag is set and the first control really was
  an <code title="attr-fe-name-isindex"><a href="attributes-common-to-form-controls.html#attr-fe-name-isindex">isindex</a></code> control, then
  the first name-value pair will have as its name the empty
  string.</p>

  <ol><li><p>Let <var title="">strings</var> be the result of <a href="common-microsyntaxes.html#strictly-split-a-string" title="strictly split a string">strictly splitting the
   string</a> <var title="">payload</var> on U+0026 AMPERSAND
   characters (&amp;).</p></li>

   <li><p>If the <var title="">isindex</var> flag is set and the first
   string in <var title="">strings</var> does not contain a "=" (U+003D) character, insert a U+003D EQUALS SIGN character
   (=) at the start of the first string in <var title="">strings</var>.</p></li>

   <li><p>Let <var title="">pairs</var> be an empty list of name-value
   pairs.</p></li>

   <li>

    <p>For each string <var title="">string</var> in <var title="">strings</var>, run these substeps:</p>

    <ol><li>

      <p>If <var title="">string</var> contains a "=" (U+003D) character, then let <var title="">name</var> be the
      substring of <var title="">string</var> from the start of <var title="">string</var> up to but excluding its first "=" (U+003D) character, and let <var title="">value</var> be
      the substring from the first character, if any, after the first
      "=" (U+003D) character up to the end of <var title="">string</var>. If the first U+003D EQUALS SIGN character
      (=) is the first character, then <var title="">name</var> will
      be the empty string. If it is the last character, then <var title="">value</var> will be the empty string.</p>

      <p>Otherwise, <var title="">string</var> contains no "=" (U+003D) characters. Let <var title="">name</var> have
      the value of <var title="">string</var> and let <var title="">value</var> be the empty string.</p>

     </li>

     <li>

      <p>Replace any "+" (U+002B) characters in <var title="">name</var> and <var title="">value</var> with U+0020
      SPACE characters.</p>

     </li>

     <li>

      <p>Replace any escape in <var title="">name</var> and <var title="">value</var> with the character represented by the
      escape. This replacement most not be recursive.</p>

      <p>An escape is a "%" (U+0025) character followed by
      two characters in the ranges <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN
      CAPITAL LETTER F, and U+0061 LATIN SMALL LETTER A to U+0066
      LATIN SMALL LETTER F.</p>

      <p>The character represented by an escape is the Unicode
      character whose code point is equal to the value of the two
      characters after the "%" (U+0025) character,
      interpreted as a hexadecimal number (in the range 0..255).</p>

      <p class="example">So for instance the string "<code title="">A%2BC</code>" would become "<code title="">A+C</code>".
      Similarly, the string "<code title="">100%25AA%21</code>"
      becomes the string "<code title="">100%AA!</code>".</p>

     </li>

     <li><p>Convert the <var title="">name</var> and <var title="">value</var> strings to their byte representation in
     ISO-8859-1 (i.e. convert the Unicode string to a byte string,
     mapping code points to byte values directly).</p></li>

     <li><p>Add a pair consisting of <var title="">name</var> and <var title="">value</var> to <var title="">pairs</var>.</p></li>

    </ol></li>

   <li><p>If any of the name-value pairs in <var title="">pairs</var>
   have a name component consisting of the string "<code title="">_charset_</code>" encoded in US-ASCII, and the value
   component of the first such pair, when decoded as US-ASCII, is the
   name of a supported character encoding, then let <var title="">encoding</var> be that character encoding (replacing the
   default passed to the algorithm).</p></li>

   <li><p>Convert the name and value components of each name-value
   pair in <var title="">pairs</var> to Unicode by interpreting the
   bytes according to the encoding <var title="">encoding</var>.</p></li>

   <li><p>Return <var title="">pairs</var>.</p></li>

  </ol><p class="note">Parameters on the
  <code><a href="#application/x-www-form-urlencoded">application/x-www-form-urlencoded</a></code> MIME type are
  ignored. In particular, this MIME type does not support the <code title="">charset</code> parameter.</p>



  <div class="impl">

  <h5 id="multipart-form-data"><span class="secno">4.10.22.6 </span>Multipart form data</h5>

  <!-- http://hixie.ch/tests/adhoc/html/forms/submission/multipart_form-data/ -->

  <!-- NOTE: This algorithm is also used by the XHR spec -->

  <p>The <dfn id="multipart/form-data-encoding-algorithm"><code title="">multipart/form-data</code> encoding
  algorithm</dfn> is as follows:</p>

  <ol><!-- the first few steps of this are the same as in the previous section --><li><p>Let <var title="">result</var> be the empty string.</p></li>

   <li>

    <p>If the algorithm was invoked with an explicit character
    encoding, let the selected character encoding be that encoding.
    (This algorithm is used by other specifications, which provide an
    explicit character encoding to avoid the dependency on the
    <code><a href="the-form-element.html#the-form-element">form</a></code> element described in the next paragraph.)</p>

    <p>Otherwise, if the <code><a href="the-form-element.html#the-form-element">form</a></code> element has an <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute,
    then, taking into account the characters found in the <var title="">form data set</var>'s names and values, and the character
    encodings supported by the user agent, select a character encoding
    from the list given in the <code><a href="the-form-element.html#the-form-element">form</a></code>'s <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute
    that is an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>. If
    none of the encodings are supported, or if none are listed, then
    let the selected character encoding be UTF-8.</p>

    <p>Otherwise, if the <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> is
    an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>, then that is
    the selected character encoding.</p>

    <p>Otherwise, let the selected character encoding be UTF-8.</p>

   </li>

   <li><p>Let <var title="">charset</var> be the <a href="infrastructure.html#preferred-mime-name">preferred MIME
   name</a> of the selected character encoding.</p></li>

   <li>

    <p>For each entry in the <var title="">form data set</var>,
    perform these substeps:</p>

    <ol><li><p>If the entry's name is "<code title="attr-fe-name-charset"><a href="attributes-common-to-form-controls.html#attr-fe-name-charset">_charset_</a></code>" and its type is
     "<code title="">hidden</code>", replace its value with <var title="">charset</var>.</p></li>

     <!-- the step that replaces a file with its name is missing in
     this version of the algorithm -->

     <li><p>For each character in the entry's name and value that
     cannot be expressed using the selected character encoding,
     replace the character by a string consisting of a U+0026
     AMPERSAND character (&amp;), a "#" (U+0023) character,
     one or more characters in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a> representing the Unicode code point of the
     character in base ten, and finally a U+003B SEMICOLON character
     (;).</p></li><!-- we should say it should be the shortest
     possible string, no leading zeros. this whole step is asinine,
     though, so... -->

     <!-- this is where the similarities with the previous section end -->

    </ol></li>

   <li>

    <p>Encode the (now mutated) <var title="">form data set</var>
    using the rules described by RFC 2388, <cite>Returning Values from
    Forms: <code title="">multipart/form-data</code></cite>, and
    return the resulting byte stream. <a href="#refsRFC2388">[RFC2388]</a></p>

    <p>Each entry in the <var title="">form data set</var> is a
    <i>field</i>, the name of the entry is the <i>field name</i> and
    the value of the entry is the <i>field value</i>.</p>

    <p>The order of parts must be the same as the order of fields in
    the <var title="">form data set</var>. Multiple entries with the
    same name must be treated as distinct fields.</p>

    <p class="note">In particular, this means that multiple files
    submitted as part of a single <code title="">&lt;input&#160;type=file&#160;multiple&gt;</code> element
    will result in each file having its own field; the "sets of files"
    feature ("<code title="">multipart/mixed</code>") of RFC 2388 is
    not used.</p>

    <p>The parts of the generated <code title="">multipart/form-data</code> resource that correspond to
    non-file fields must not have a <code><a href="urls.html#content-type">Content-Type</a></code> header
    specified. Their names and values must be encoded using the
    character encoding selected above (field names in particular do
    not get converted to a 7-bit safe encoding as suggested in RFC
    2388).</p>

    <p>File names included in the generated <code title="">multipart/form-data</code> resource (as part of file
    fields) must use the character encoding selected above, though the
    precise name may be approximated if necessary (e.g. newlines could
    be removed from file names, quotes could be changed to "%22", and
    characters not expressible in the selected character encoding
    could be replaced by other characters). User agents must not use
    the RFC 2231 encoding suggested by RFC 2388.</p> <!-- this isn't a
    willful violation since 2388 doesn't make it a requirement, it
    just vaguely suggests it -->

    <p>The boundary used by the user agent in generating the return
    value of this algorithm is the <dfn id="multipart/form-data-boundary-string"><code title="">multipart/form-data</code> boundary string</dfn>. (This
    value is used to generate the MIME type of the form submission
    payload generated by this algorithm.)</p>

   </li>

  </ol></div>

  <p>For details on how to interpret <code>multipart/form-data</code>
  payloads, see RFC 2388. <a href="#refsRFC2388">[RFC2388]</a></p>



  <h5 id="plain-text-form-data"><span class="secno">4.10.22.7 </span>Plain text form data</h5>

  <div class="impl">

  <p>The <dfn id="text/plain-encoding-algorithm"><code title="">text/plain</code> encoding
  algorithm</dfn> is as follows:</p>

  <ol><li><p>Let <var title="">result</var> be the empty string.</p></li>

   <li>

    <!-- this is different from application/x-www-form-urlencoded in
    that it isn't limited to ASCII-compatible encodings -->

    <p>If the <code><a href="the-form-element.html#the-form-element">form</a></code> element has an <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute,
    then, taking into account the characters found in the <var title="">form data set</var>'s names and values, and the character
    encodings supported by the user agent, select a character encoding
    from the list given in the <code><a href="the-form-element.html#the-form-element">form</a></code>'s <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute.
    If none of the encodings are supported, or if none are listed,
    then let the selected character encoding be UTF-8.</p>

    <p>Otherwise, the selected character encoding is the
    <a href="infrastructure.html#document's-character-encoding">document's character encoding</a>.</p>

   </li>

   <li><p>Let <var title="">charset</var> be the <a href="infrastructure.html#preferred-mime-name">preferred MIME
   name</a> of the selected character encoding.</p></li>

   <li><p>If the entry's name is "<code title="attr-fe-name-charset"><a href="attributes-common-to-form-controls.html#attr-fe-name-charset">_charset_</a></code>" and its type is
   "<code title="">hidden</code>", replace its value with <var title="">charset</var>.</p></li>

   <li><p>If the entry's type is "<code title="">file</code>", replace
   its value with the file's filename only.</p></li>

   <li>

    <p>For each entry in the <var title="">form data set</var>,
    perform these substeps:</p>

    <ol><li><p>Append the entry's name to <var title="">result</var>.</p></li>

     <li><p>Append a single "=" (U+003D) character to <var title="">result</var>.</p></li>

     <li><p>Append the entry's value to <var title="">result</var>.</p></li>

     <li><p>Append a "CR" (U+000D) "LF" (U+000A)
     character pair to <var title="">result</var>.</p></li>

    </ol></li>

   <li><p>Encode <var title="">result</var> using the selected
   character encoding and return the resulting byte stream.</p></li>

  </ol></div>

  <p>Payloads using the <code>text/plain</code> format are intended to
  be human readable. They are not reliably interpretable by computer,
  as the format is ambiguous (for example, there is no way to
  distinguish a literal newline in a value from the newline at the end
  of the value).</p>



  <div class="impl">

  <h4 id="resetting-a-form"><span class="secno">4.10.23 </span>Resetting a form</h4>

  <p>When a <code><a href="the-form-element.html#the-form-element">form</a></code> element <var title="">form</var> is <dfn id="concept-form-reset" title="concept-form-reset">reset</dfn>, the user agent must
  <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-reset">reset</code>, that is cancelable, at <var title="">form</var>, and then, if that event is not canceled, must
  invoke the <a href="#concept-form-reset-control" title="concept-form-reset-control">reset
  algorithm</a> of each <a href="forms.html#category-reset" title="category-reset">resettable
  element</a> whose <a href="association-of-controls-and-forms.html#form-owner">form owner</a> is <var title="">form</var>.</p>

  <p>Each <a href="forms.html#category-reset" title="category-reset">resettable element</a>
  defines its own <dfn id="concept-form-reset-control" title="concept-form-reset-control">reset
  algorithm</dfn>. Changes made to form controls as part of these
  algorithms do not count as changes caused by the user (and thus,
  e.g., do not cause <code title="event-input">input</code> events to
  fire).</p>

  </div>



  <h3 id="interactive-elements"><span class="secno">4.11 </span>Interactive elements</h3>

  <h4 id="the-details-element"><span class="secno">4.11.1 </span>The <dfn><code>details</code></dfn> element</h4>

  <dl class="element"><dt><a href="element-definitions.html#element-dfn-categories" title="element-dfn-categories">Categories</a>:</dt>
   <dd><a href="content-models.html#flow-content-1">Flow content</a>.</dd>
   <dd><a href="headings-and-sections.html#sectioning-root">Sectioning root</a>.</dd>
   <dd><a href="content-models.html#interactive-content-0">Interactive content</a>.</dd>
   <dd><a href="content-models.html#palpable-content-0">Palpable content</a>.</dd>
   <dt><a href="element-definitions.html#element-dfn-contexts" title="element-dfn-contexts">Contexts in which this element can be used</a>:</dt>
   <dd>Where <a href="content-models.html#flow-content-1">flow content</a> is expected.</dd>
   <dt><a href="element-definitions.html#element-dfn-content-model" title="element-dfn-content-model">Content model</a>:</dt>
   <dd>One <code><a href="#the-summary-element">summary</a></code> element followed by <a href="content-models.html#flow-content-1">flow content</a>.</dd>
   <dt><a href="element-definitions.html#element-dfn-attributes" title="element-dfn-attributes">Content attributes</a>:</dt>
   <dd><a href="global-attributes.html#global-attributes">Global attributes</a></dd>
   <dd><code title="attr-details-open"><a href="#attr-details-open">open</a></code></dd>
   <dt><a href="element-definitions.html#element-dfn-dom" title="element-dfn-dom">DOM interface</a>:</dt><!--TOPIC:DOM APIs-->
   <dd>
<pre class="idl">interface <dfn id="htmldetailselement">HTMLDetailsElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute boolean <a href="#dom-details-open" title="dom-details-open">open</a>;
};</pre>
   </dd>
  </dl><!--TOPIC:HTML--><p>The <code><a href="#the-details-element">details</a></code> element <a href="#represents">represents</a> a
  disclosure widget from which the user can obtain additional
  information or controls.</p>

  <p class="note">The <code><a href="#the-details-element">details</a></code> element is not appropriate
  for footnotes. Please see <a href="#footnotes">the section on
  footnotes</a> for details on how to mark up footnotes.</p>

  <p>The <span class="impl">first</span> <code><a href="#the-summary-element">summary</a></code> element
  child of the element, if any, <a href="#represents">represents</a> the summary or
  legend of the details. <span class="impl">If there is no child
  <code><a href="#the-summary-element">summary</a></code> element, the user agent should provide its own
  legend (e.g. "Details").</span></p>

  <p>The rest of the element's contents <a href="#represents">represents</a> the
  additional information or controls.</p>

  <p>The <dfn id="attr-details-open" title="attr-details-open"><code>open</code></dfn>
  content attribute is a <a href="common-microsyntaxes.html#boolean-attribute">boolean attribute</a>. If present,
  it indicates that both the summary and the additional information is
  to be shown to the user. If the attribute is absent, only the
  summary is to be shown.</p>

  <div class="impl">

  <p>When the element is created, if the attribute is absent, the
  additional information should be hidden; if the attribute is
  present, that information should be shown. Subsequently, if the
  attribute is removed, then the information should be hidden; if the
  attribute is added, the information should be shown.</p>

  <p>The user agent should allow the user to request that the
  additional information be shown or hidden. To honor a request for
  the details to be shown, the user agent must set the <code title="attr-details-open"><a href="#attr-details-open">open</a></code> attribute on the element to
  the value <code title="">open</code>. To honor a request for the
  information to be hidden, the user agent must remove the <code title="attr-details-open"><a href="#attr-details-open">open</a></code> attribute from the
  element.</p>

  <p>The <dfn id="dom-details-open" title="dom-details-open"><code>open</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-details-open"><a href="#attr-details-open">open</a></code> content attribute.</p>

  </div>

  <div class="example">

   <p>The following example shows the <code><a href="#the-details-element">details</a></code> element
   being used to hide technical details in a progress report.</p>

   <pre>&lt;section class="progress window"&gt;
 &lt;h1&gt;Copying "Really Achieving Your Childhood Dreams"&lt;/h1&gt;
 &lt;details&gt;
  &lt;summary&gt;Copying... &lt;progress max="375505392" value="97543282"&gt;&lt;/progress&gt; 25%&lt;/summary&gt;
  &lt;dl&gt;
   &lt;dt&gt;Transfer rate:&lt;/dt&gt; &lt;dd&gt;452KB/s&lt;/dd&gt;
   &lt;dt&gt;Local filename:&lt;/dt&gt; &lt;dd&gt;/home/rpausch/raycd.m4v&lt;/dd&gt;
   &lt;dt&gt;Remote filename:&lt;/dt&gt; &lt;dd&gt;/var/www/lectures/raycd.m4v&lt;/dd&gt;
   &lt;dt&gt;Duration:&lt;/dt&gt; &lt;dd&gt;01:16:27&lt;/dd&gt;
   &lt;dt&gt;Color profile:&lt;/dt&gt; &lt;dd&gt;SD (6-1-6)&lt;/dd&gt;
   &lt;dt&gt;Dimensions:&lt;/dt&gt; &lt;dd&gt;320&#215;240&lt;/dd&gt;
  &lt;/dl&gt;
 &lt;/details&gt;
&lt;/section&gt;</pre>

  </div>

  <div class="example">

   <p>The following shows how a <code><a href="#the-details-element">details</a></code> element can be
   used to hide some controls by default:</p>

   <pre>&lt;details&gt;
 &lt;summary&gt;&lt;label for=fn&gt;Name &amp; Extension:&lt;/label&gt;&lt;/summary&gt;
 &lt;p&gt;&lt;input type=text id=fn name=fn value="Pillar Magazine.pdf"&gt;
 &lt;p&gt;&lt;label&gt;&lt;input type=checkbox name=ext checked&gt; Hide extension&lt;/label&gt;
&lt;/details&gt;</pre>

   <p>One could use this in conjunction with other <code><a href="#the-details-element">details</a></code>
   in a list to allow the user to collapse a set of fields down to a
   small set of headings, with the ability to open each one.</p>

   <p class="details-example"><img alt="" height="611" src="images/sample-details-1.png" width="345"><img alt="" height="666" src="images/sample-details-2.png" width="345"></p>

   <p>In these examples, the summary really just summarises what the
   controls can change, and not the actual values, which is less than
   ideal.</p>

  </div>

  <div class="example">

   <p>Because the <code title="attr-details-open"><a href="#attr-details-open">open</a></code>
   attribute is added and removed automatically as the user interacts
   with the control, it can be used in CSS to style the element
   differently based on its state. Here, a stylesheet is used to
   animate the color of the summary when the element is opened or
   closed:</p>

   <pre>&lt;style&gt;
 details &gt; summary { transition: color 1s; color: black; }
 details[open] &gt; summary { color: red; }
&lt;/style&gt;
&lt;details&gt;
 &lt;summary&gt;Automated Status: Operational&lt;/summary&gt;
 &lt;p&gt;Velocity: 12m/s&lt;/p&gt;
 &lt;p&gt;Direction: North&lt;/p&gt;
&lt;/details&gt;</pre>

  </div>


  <h4 id="the-summary-element"><span class="secno">4.11.2 </span>The <dfn><code>summary</code></dfn> element</h4>

  <dl class="element"><dt><a href="element-definitions.html#element-dfn-categories" title="element-dfn-categories">Categories</a>:</dt>
   <dd>None.</dd>
   <dt><a href="element-definitions.html#element-dfn-contexts" title="element-dfn-contexts">Contexts in which this element can be used</a>:</dt>
   <dd>As the first child of a <code><a href="#the-details-element">details</a></code> element.</dd>
   <dt><a href="element-definitions.html#element-dfn-content-model" title="element-dfn-content-model">Content model</a>:</dt>
   <dd><a href="content-models.html#phrasing-content-1">Phrasing content</a>.</dd>
   <dt><a href="element-definitions.html#element-dfn-attributes" title="element-dfn-attributes">Content attributes</a>:</dt>
   <dd><a href="global-attributes.html#global-attributes">Global attributes</a></dd>
   <dt><a href="element-definitions.html#element-dfn-dom" title="element-dfn-dom">DOM interface</a>:</dt><!--TOPIC:DOM APIs-->
   <dd>Uses <code><a href="elements.html#htmlelement">HTMLElement</a></code>.</dd>
  </dl><!--TOPIC:HTML--><p>The <code><a href="#the-summary-element">summary</a></code> element <a href="#represents">represents</a> a
  summary, caption, or legend for the rest of the contents of the
  <code><a href="#the-summary-element">summary</a></code> element's parent <code><a href="#the-details-element">details</a></code>
  element<span class="impl">, if any</span>.</p>




  <h4 id="the-command-element"><span class="secno">4.11.3 </span>The <dfn id="the-command"><code>command</code></dfn> element</h4>

  <dl class="element"><dt><a href="element-definitions.html#element-dfn-categories" title="element-dfn-categories">Categories</a>:</dt>
   <dd><a href="content-models.html#metadata-content-0">Metadata content</a>.</dd>
   <dd><a href="content-models.html#flow-content-1">Flow content</a>.</dd>
   <dd><a href="content-models.html#phrasing-content-1">Phrasing content</a>.</dd>
   <dt><a href="element-definitions.html#element-dfn-contexts" title="element-dfn-contexts">Contexts in which this element can be used</a>:</dt>
   <dd>Where <a href="content-models.html#metadata-content-0">metadata content</a> is expected.</dd>
   <dd>Where <a href="content-models.html#phrasing-content-1">phrasing content</a> is expected.</dd>
   <dt><a href="element-definitions.html#element-dfn-content-model" title="element-dfn-content-model">Content model</a>:</dt>
   <dd>Empty.</dd>
   <dt><a href="element-definitions.html#element-dfn-attributes" title="element-dfn-attributes">Content attributes</a>:</dt>
   <dd><a href="global-attributes.html#global-attributes">Global attributes</a></dd>
   <dd><code title="attr-command-type"><a href="#attr-command-type">type</a></code></dd>
   <dd><code title="attr-command-label"><a href="#attr-command-label">label</a></code></dd>
   <dd><code title="attr-command-icon"><a href="#attr-command-icon">icon</a></code></dd>
   <dd><code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code></dd>
   <dd><code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code></dd>
   <dd><code title="attr-command-radiogroup"><a href="#attr-command-radiogroup">radiogroup</a></code></dd>
   <!--<dd><code title="attr-command-default">default</code></dd>-->
   <dd><code title="attr-command-command"><a href="#attr-command-command">command</a></code></dd>
   <dd>Also, the <code title="attr-command-title"><a href="#attr-command-title">title</a></code> attribute has special semantics on this element.</dd>
   <dt><a href="element-definitions.html#element-dfn-dom" title="element-dfn-dom">DOM interface</a>:</dt><!--TOPIC:DOM APIs-->
   <dd>
<pre class="idl">interface <dfn id="htmlcommandelement">HTMLCommandElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <a href="#dom-command-type" title="dom-command-type">type</a>;
           attribute DOMString <a href="#dom-command-label" title="dom-command-label">label</a>;
           attribute DOMString <a href="#dom-command-icon" title="dom-command-icon">icon</a>;
           attribute boolean <a href="#dom-command-disabled" title="dom-command-disabled">disabled</a>;
           attribute boolean <a href="#dom-command-checked" title="dom-command-checked">checked</a>;
           attribute DOMString <a href="#dom-command-radiogroup" title="dom-command-radiogroup">radiogroup</a>;<!--
           attribute boolean <span title="dom-command-default">default</span>;-->
  readonly attribute <a href="elements.html#htmlelement">HTMLElement</a>? <a href="#dom-command-command" title="dom-command-command">command</a>;
};</pre>
   </dd>
  </dl><!--TOPIC:HTML--><p>The <code><a href="#the-command-element">command</a></code> element represents a command that the user
  can invoke.</p>

  <p>A command can be explicitly part of a context menu or toolbar,
  using the <code><a href="#the-menu-element">menu</a></code> element. It can also be put anywhere
  else on a page, either just to define a keyboard shortcut, or to
  define a command that is then referenced from other
  <code><a href="#the-command-element">command</a></code> elements.</p>

  <p>A <code><a href="#the-command-element">command</a></code> element that uses the
  <code title="attr-command-type"><a href="#attr-command-type">type</a></code>,
  <code title="attr-command-label"><a href="#attr-command-label">label</a></code>,
  <code title="attr-command-icon"><a href="#attr-command-icon">icon</a></code>,
  <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code>,
  <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code>,
  <code title="attr-command-radiogroup"><a href="#attr-command-radiogroup">radiogroup</a></code>,
  <!--<code title="attr-command-default">default</code>,--> and
  <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attributes defines a new
  command. A <code><a href="#the-command-element">command</a></code> element that uses the <code title="attr-command-command"><a href="#attr-command-command">command</a></code> <em>attribute</em>
  defines a command by reference to another one. This allows authors
  to define a command once, and set its state (e.g. whether it is
  active or disabled) in one place, and have all references to that
  command in the user interface change at the same time.</p>

  <hr><p>The <dfn id="attr-command-type" title="attr-command-type"><code>type</code></dfn>
  attribute indicates the kind of command: either a normal command
  with an associated action, or a state or option that can be toggled,
  or a selection of one item from a list of items.</p>

  <p>The attribute is an <a href="common-microsyntaxes.html#enumerated-attribute">enumerated attribute</a> with three
  keywords and states. The "<dfn id="attr-command-type-keyword-command" title="attr-command-type-keyword-command"><code>command</code></dfn>"
  keyword maps to the <a href="#attr-command-type-state-command" title="attr-command-type-state-command">Command</a> state, the
  "<dfn id="attr-command-type-keyword-checkbox" title="attr-command-type-keyword-checkbox"><code>checkbox</code></dfn>"
  keyword maps to the <a href="#attr-command-type-state-checkbox" title="attr-command-type-state-checkbox">Checkbox</a> state, and
  the "<dfn id="attr-command-type-keyword-radio" title="attr-command-type-keyword-radio"><code>radio</code></dfn>"
  keyword maps to the <a href="#attr-command-type-state-radio" title="attr-command-type-state-radio">Radio</a> state. The
  <i>missing value default</i> is the <a href="#attr-command-type-state-command" title="attr-command-type-state-command">Command</a> state.</p>

  <dl><dt>The <dfn id="attr-command-type-state-command" title="attr-command-type-state-command">Command</dfn> state</dt>

   <dd><p>The element <a href="#represents">represents</a> a normal command with an associated action.</p></dd>

   <dt>The <dfn id="attr-command-type-state-checkbox" title="attr-command-type-state-checkbox">Checkbox</dfn> state</dt>

   <dd><p>The element <a href="#represents">represents</a> a state or option that can be toggled.</p></dd>

   <dt>The <dfn id="attr-command-type-state-radio" title="attr-command-type-state-radio">Radio</dfn> state</dt>

   <dd><p>The element <a href="#represents">represents</a> a selection of one item from a list of items.</p></dd>

  </dl><p>The <dfn id="attr-command-label" title="attr-command-label"><code>label</code></dfn>
  attribute gives the name of the command, as shown to the user. The
  <code title="attr-command-label"><a href="#attr-command-label">label</a></code> attribute must be
  specified and must have a value that is not the empty string.</p>

  <p>The <dfn id="attr-command-title" title="attr-command-title"><code>title</code></dfn>
  attribute gives a hint describing the command, which might be shown
  to the user to help him.</p>

  <p>The <dfn id="attr-command-icon" title="attr-command-icon"><code>icon</code></dfn>
  attribute gives a picture that represents the command. If the
  attribute is specified, the attribute's value must contain a
  <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">valid non-empty URL potentially surrounded by
  spaces</a>. <span class="impl">To obtain the <a href="urls.html#absolute-url">absolute
  URL</a> of the icon when the attribute's value is not the empty
  string, the attribute's value must be <a href="urls.html#resolve-a-url" title="resolve a
  url">resolved</a> relative to the element. When the attribute is
  absent, or its value is the empty string, or <a href="urls.html#resolve-a-url" title="resolve a
  url">resolving</a> its value fails, there is no icon.</span></p>
  <!-- this is affected by the base URL being changed, so users of
  this should cache the image once they've fetched it once, at least
  until the relative url changes again -->

  <p>The <dfn id="attr-command-disabled" title="attr-command-disabled"><code>disabled</code></dfn> attribute
  is a <a href="common-microsyntaxes.html#boolean-attribute">boolean attribute</a> that, if present, indicates that
  the command is not available in the current state.</p>

  <p class="note">The distinction between <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code> and <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> is subtle. A command would be
  disabled if, in the same context, it could be enabled if only
  certain aspects of the situation were changed. A command would be
  marked as hidden if, in that situation, the command will never be
  enabled. For example, in the context menu for a water faucet, the
  command "open" might be disabled if the faucet is already open, but
  the command "eat" would be marked hidden since the faucet could
  never be eaten.</p>

  <p>The <dfn id="attr-command-checked" title="attr-command-checked"><code>checked</code></dfn>
  attribute is a <a href="common-microsyntaxes.html#boolean-attribute">boolean attribute</a> that, if present,
  indicates that the command is selected. The attribute must be
  omitted unless the <code title="attr-command-type"><a href="#attr-command-type">type</a></code>
  attribute is in either the <a href="#attr-command-type-state-checkbox" title="attr-command-type-state-checkbox">Checkbox</a> state or
  the <a href="#attr-command-type-state-radio" title="attr-command-type-state-radio">Radio</a>
  state.</p>

  <p>The <dfn id="attr-command-radiogroup" title="attr-command-radiogroup"><code>radiogroup</code></dfn>
  attribute gives the name of the group of commands that will be
  toggled when the command itself is toggled, for commands whose <code title="attr-command-type"><a href="#attr-command-type">type</a></code> attribute has the value "<code title="">radio</code>". The scope of the name is the child list of
  the parent element. The attribute must be omitted unless the <code title="attr-command-type"><a href="#attr-command-type">type</a></code> attribute is in the <a href="#attr-command-type-state-radio" title="attr-command-type-state-radio">Radio</a> state.</p>

<!--
  <p>If the <code>command</code> element is used when <span
  title="menu generation">generating</span> a <span>context
  menu</span>, then the <dfn
  title="attr-command-default"><code>default</code></dfn> attribute
  indicates, if present, that the command is the one that would have
  been invoked if the user had directly activated the menu's subject
  instead of using its context menu. The <code
  title="attr-command-default">default</code> attribute is a
  <span>boolean attribute</span>. The attribute must be omitted unless
  the <code title="attr-command-type">type</code> attribute is in the
  <span title="attr-command-type-state-command">Command</span>
  state.</p>

  <div class="example">

   ...an example that shows an element that, if double-clicked,
   invokes an action, but that also has a context menu, showing the
   various <code>command</code> attributes off, and that has a default
   command...

  </div>
-->

  <hr><p>If a <code><a href="#the-command-element">command</a></code> element <var title="">slave</var> has a
  <dfn id="attr-command-command" title="attr-command-command"><code>command</code></dfn>
  attribute, and <var title="">slave</var> is <a href="infrastructure.html#in-a-document">in a
  <code>Document</code></a>, and there is an element in that
  <code><a href="dom.html#document">Document</a></code> whose <a href="infrastructure.html#concept-id" title="concept-id">ID</a> has a
  value equal to the value of <var title="">slave</var>'s <code title="attr-command-command"><a href="#attr-command-command">command</a></code> attribute, and the first
  such element in <a href="infrastructure.html#tree-order">tree order</a>, hereafter <var title="">master</var>, itself <a href="#concept-command" title="concept-command">defines
  a command</a> and either is not a <code><a href="#the-command-element">command</a></code> element or
  does not itself have a <code title="attr-command-command"><a href="#attr-command-command">command</a></code> attribute, then the
  <dfn id="master-command">master command</dfn> of <var title="">slave</var> is <var title="">master</var>.</p>

  <p>An element with a
  <code title="attr-command-command"><a href="#attr-command-command">command</a></code>
  attribute must have a <a href="#master-command">master command</a> and must not have any
  <code title="attr-command-type"><a href="#attr-command-type">type</a></code>,
  <code title="attr-command-label"><a href="#attr-command-label">label</a></code>,
  <code title="attr-command-icon"><a href="#attr-command-icon">icon</a></code>,
  <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code>,
  <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code>, or
  <code title="attr-command-radiogroup"><a href="#attr-command-radiogroup">radiogroup</a></code>
  attributes.</p>

  <hr><div class="impl">

  <p>The <dfn id="dom-command-type" title="dom-command-type"><code>type</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the content attribute of the
  same name, <a href="common-dom-interfaces.html#limited-to-only-known-values">limited to only known values</a>.</p>

  <p>The <dfn id="dom-command-label" title="dom-command-label"><code>label</code></dfn>, <dfn id="dom-command-icon" title="dom-command-icon"><code>icon</code></dfn>, <dfn id="dom-command-disabled" title="dom-command-disabled"><code>disabled</code></dfn>, <dfn id="dom-command-checked" title="dom-command-checked"><code>checked</code></dfn>, and <dfn id="dom-command-radiogroup" title="dom-command-radiogroup"><code>radiogroup</code></dfn><!--,
  and <dfn title="dom-command-default"><code>default</code></dfn>-->
  IDL attributes must <a href="common-dom-interfaces.html#reflect">reflect</a> the respective content
  attributes of the same name.</p>

  <p>The <dfn id="dom-command-command" title="dom-command-command"><code>command</code></dfn>
  IDL attribute must return the <a href="#master-command">master command</a>, if any,
  or null otherwise.</p>

  <hr><p>If the element's <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a> is false
  (enabled) then the element's <a href="content-models.html#activation-behavior">activation behavior</a>
  depends on the element's <code title="attr-command-type"><a href="#attr-command-type">type</a></code>
  and <code title="attr-command-command"><a href="#attr-command-command">command</a></code> attributes, as
  follows:</p>

  <dl class="switch"><dt>If the element has a <a href="#master-command">master command</a> set by its
   <code title="attr-command-command"><a href="#attr-command-command">command</a></code> attribute</dt>

   <dd><p>The user agent must <a href="content-models.html#run-synthetic-click-activation-steps">run synthetic click activation
   steps</a> on the element's <a href="#master-command">master command</a>.</p></dd>
   <!-- we know it has a defined <span>activation behavior</span> if
   we get here -->


   <dt>If the <code title="attr-command-type"><a href="#attr-command-type">type</a></code> attribute is
   in the <a href="#attr-command-type-state-checkbox" title="attr-command-type-state-checkbox">Checkbox</a> state</dt>

   <dd><p>If the element has a <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code> attribute, the UA must
   remove that attribute. Otherwise, the UA must add a <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code> attribute, with the
   literal value <code title="">checked</code>.</p></dd>


   <dt>If the <code title="attr-command-type"><a href="#attr-command-type">type</a></code> attribute is
   in the <a href="#attr-command-type-state-radio" title="attr-command-type-state-radio">Radio</a> state</dt>

   <dd><p>If the element has a parent, then the UA must walk the list
   of child nodes of that parent element, and for each node that is a
   <code><a href="#the-command-element">command</a></code> element, if that element has a <code title="attr-command-radiogroup"><a href="#attr-command-radiogroup">radiogroup</a></code> attribute whose
   value exactly matches the current element's (treating missing <code title="attr-command-radiogroup"><a href="#attr-command-radiogroup">radiogroup</a></code> attributes as if
   they were the empty string), and has a <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code> attribute, must remove
   that attribute.</p>

   <p>Then, the element's <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code> attribute attribute
   must be set to the literal value <code title="">checked</code>.</p></dd>


   <dt>Otherwise</dt>

   <dd><p>The element's <a href="content-models.html#activation-behavior">activation behavior</a> is to do
   nothing.</p></dd>

  </dl><p class="note">Firing a synthetic <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> event at the element does not cause
  any of the actions described above to happen.</p>

  <!-- v2COMMAND: Expose the Triggers facet again. -->

  <p>If the element's <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a> is true
  (disabled) then the element has no <a href="content-models.html#activation-behavior">activation
  behavior</a>.</p>

  </div>

  <p class="note"><code><a href="#the-command-element">command</a></code> elements are not rendered
  unless they <a href="#the-menu-element" title="menu">form part of a menu</a>.</p>

  <div class="example">

   <p>Here is an example of a toolbar with three buttons that let the
   user toggle between left, center, and right alignment. One could
   imagine such a toolbar as part of a text editor. The toolbar also
   has a separator followed by another button labeled "Publish",
   though that button is disabled.</p>

   <pre>&lt;menu type="toolbar"&gt;
 &lt;command type="radio" radiogroup="alignment" checked="checked"
          label="Left" icon="icons/alL.png" onclick="setAlign('left')"&gt;
 &lt;command type="radio" radiogroup="alignment"
          label="Center" icon="icons/alC.png" onclick="setAlign('center')"&gt;
 &lt;command type="radio" radiogroup="alignment"
          label="Right" icon="icons/alR.png" onclick="setAlign('right')"&gt;
 &lt;hr&gt;
 &lt;command type="command" disabled
          label="Publish" icon="icons/pub.png" onclick="publish()"&gt;
&lt;/menu&gt;</pre>

  </div>



  <h4 id="the-menu-element"><span class="secno">4.11.4 </span>The <dfn id="menus"><code>menu</code></dfn> element</h4>

  <dl class="element"><dt><a href="element-definitions.html#element-dfn-categories" title="element-dfn-categories">Categories</a>:</dt>
   <dd><a href="content-models.html#flow-content-1">Flow content</a>.</dd>
   <dd>If the element's <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#toolbar-state" title="toolbar state">toolbar</a> state: <a href="content-models.html#interactive-content-0">Interactive content</a>.</dd>
   <dd>If the element's <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#toolbar-state" title="toolbar state">toolbar</a> state or the <a href="#list-state" title="list state">list</a> state: <a href="content-models.html#palpable-content-0">Palpable content</a>.</dd>
   <dt><a href="element-definitions.html#element-dfn-contexts" title="element-dfn-contexts">Contexts in which this element can be used</a>:</dt>
   <dd>Where <a href="content-models.html#flow-content-1">flow content</a> is expected.</dd>
   <dt><a href="element-definitions.html#element-dfn-content-model" title="element-dfn-content-model">Content model</a>:</dt>
   <dd>Either: Zero or more <code><a href="the-li-element.html#the-li-element">li</a></code> elements.</dd>
   <dd>Or: <a href="content-models.html#flow-content-1">Flow content</a>.</dd>
   <dt><a href="element-definitions.html#element-dfn-attributes" title="element-dfn-attributes">Content attributes</a>:</dt>
   <dd><a href="global-attributes.html#global-attributes">Global attributes</a></dd>
   <dd><code title="attr-menu-type"><a href="#attr-menu-type">type</a></code></dd>
   <dd><code title="attr-menu-label"><a href="#attr-menu-label">label</a></code></dd>
   <dt><a href="element-definitions.html#element-dfn-dom" title="element-dfn-dom">DOM interface</a>:</dt><!--TOPIC:DOM APIs-->
   <dd>
<pre class="idl">interface <dfn id="htmlmenuelement">HTMLMenuElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <a href="#dom-menu-type" title="dom-menu-type">type</a>;
           attribute DOMString <a href="#dom-menu-label" title="dom-menu-label">label</a>;
};</pre>
  </dd></dl><!--TOPIC:HTML--><p>The <code><a href="#the-menu-element">menu</a></code> element represents a list of commands.</p>

  <!-- v2 idea: <menu> should get an icon, like <command> -->

  <p>The <dfn id="attr-menu-type" title="attr-menu-type"><code>type</code></dfn> attribute
  is an <a href="common-microsyntaxes.html#enumerated-attribute">enumerated attribute</a> indicating the kind of menu
  being declared. The attribute has three states. The <code title="attr-menu-type-context">context</code> keyword maps to the
  <dfn id="context-menu-state" title="context menu state">context menu</dfn> state, in which
  the element is declaring a context menu. The <code title="attr-menu-type-toolbar">toolbar</code> keyword maps to the
  <dfn id="toolbar-state" title="toolbar state">toolbar</dfn> state, in which the
  element is declaring a toolbar. The attribute may also be
  omitted. The <i>missing value default</i> is the <dfn id="list-state" title="list
  state">list</dfn> state, which indicates that the element is merely
  a list of commands that is neither declaring a context menu nor
  defining a toolbar.</p>

  <p>If a <code><a href="#the-menu-element">menu</a></code> element's <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#context-menu-state" title="context menu state">context menu</a> state, then the
  element <a href="#represents">represents</a> the commands of a context menu, and
  the user can only interact with the commands if that context menu is
  activated.</p>

  <p>If a <code><a href="#the-menu-element">menu</a></code> element's <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#toolbar-state" title="toolbar state">toolbar</a> state, then the element
  <a href="#represents">represents</a> a list of active commands that the user can
  immediately interact with.</p>

  <p>If a <code><a href="#the-menu-element">menu</a></code> element's <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#list-state" title="list state">list</a> state, then the element either
  <a href="#represents">represents</a> an unordered list of items (each represented
  by an <code><a href="the-li-element.html#the-li-element">li</a></code> element), each of which represents a command
  that the user can perform or activate, or, if the element has no
  <code><a href="the-li-element.html#the-li-element">li</a></code> element children, <a href="content-models.html#flow-content-1">flow content</a>
  describing available commands.</p>

  <p>The <dfn id="attr-menu-label" title="attr-menu-label"><code>label</code></dfn>
  attribute gives the label of the menu. It is used by user agents to
  display nested menus in the UI. For example, a context menu
  containing another menu would use the nested menu's <code title="attr-menu-label"><a href="#attr-menu-label">label</a></code> attribute for the submenu's
  menu label.</p>

  <div class="impl">

  <p>The <dfn id="dom-menu-type" title="dom-menu-type"><code>type</code></dfn> and <dfn id="dom-menu-label" title="dom-menu-label"><code>label</code></dfn> IDL attributes must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the respective content attributes of the same
  name.</p>

  </div>



  <h5 id="menus-intro"><span class="secno">4.11.4.1 </span>Introduction</h5>

  <p><i>This section is non-normative.</i></p>
  <p>The <code><a href="#the-menu-element">menu</a></code> element is used to define context menus and
  toolbars.</p>

  <p>For example, the following represents a toolbar with three menu
  buttons on it, each of which has a dropdown menu with a series of
  options:</p>

  <pre>&lt;menu type="toolbar"&gt;
 &lt;li&gt;
  &lt;menu label="File"&gt;
   &lt;button type="button" onclick="fnew()"&gt;New...&lt;/button&gt;
   &lt;button type="button" onclick="fopen()"&gt;Open...&lt;/button&gt;
   &lt;button type="button" onclick="fsave()"&gt;Save&lt;/button&gt;
   &lt;button type="button" onclick="fsaveas()"&gt;Save as...&lt;/button&gt;
  &lt;/menu&gt;
 &lt;/li&gt;
 &lt;li&gt;
  &lt;menu label="Edit"&gt;
   &lt;button type="button" onclick="ecopy()"&gt;Copy&lt;/button&gt;
   &lt;button type="button" onclick="ecut()"&gt;Cut&lt;/button&gt;
   &lt;button type="button" onclick="epaste()"&gt;Paste&lt;/button&gt;
  &lt;/menu&gt;
 &lt;/li&gt;
 &lt;li&gt;
  &lt;menu label="Help"&gt;
   &lt;li&gt;&lt;a href="help.html"&gt;Help&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href="about.html"&gt;About&lt;/a&gt;&lt;/li&gt;
  &lt;/menu&gt;
 &lt;/li&gt;
&lt;/menu&gt;</pre>

  <p>In a supporting user agent, this might look like this:</p>

  <p><img alt="A toolbar with three buttons, labeled 'File', 'Edit', and 'Help'; where if you select the 'Edit' button you get a drop-down menu with three more options, 'Copy', 'Cut', and 'Paste'." height="101" src="images/sample-toolbar-1.png" width="303"></p>

  <p>In a legacy user agent, the above would look like a bulleted list
  with three items, the first of which has four buttons, the second of
  which has three, and the third of which has two nested bullet points
  with two items consisting of links.</p>

  <hr><p>The following implements a similar toolbar, with a single button
  whose values, when selected, redirect the user to Web sites.</p>

  <pre>&lt;form action="redirect.cgi"&gt;
 &lt;menu type="toolbar"&gt;
  &lt;label for="goto"&gt;Go to...&lt;/label&gt;
  &lt;menu label="Go"&gt;
   &lt;select id="goto"<!--
           onchange="if (this.options[this.selectedIndex].value)
                     window.location = this.options[this.selectedIndex].value"-->&gt;
    &lt;option value="" selected="selected"&gt; Select site: &lt;/option&gt;
    &lt;option value="http://www.apple.com/"&gt; Apple &lt;/option&gt;
    &lt;option value="http://www.mozilla.org/"&gt; Mozilla &lt;/option&gt;
    &lt;option value="http://www.opera.com/"&gt; Opera &lt;/option&gt;
   &lt;/select&gt;
   &lt;span&gt;&lt;input type="submit" value="Go"&gt;&lt;/span&gt;
  &lt;/menu&gt;
 &lt;/menu&gt;
&lt;/form&gt;</pre>

  <p>The behavior in supporting user agents is similar to the example
  above, but here the legacy behavior consists of a single
  <code><a href="the-select-element.html#the-select-element">select</a></code> element with a submit button. The submit button
  doesn't appear in the toolbar, because it is not a child of the
  <code><a href="#the-menu-element">menu</a></code> element or of its <code><a href="the-li-element.html#the-li-element">li</a></code> children.</p>



  <div class="impl">

  <h5 id="building-menus-and-toolbars"><span class="secno">4.11.4.2 </span><dfn>Building menus and toolbars</dfn></h5>

  <p>A menu (or toolbar) consists of a list of zero or more of the
  following components:</p>

  <ul class="brief"><li><a href="#concept-command" title="concept-command">Commands</a>, which can be marked as default commands</li>
   <li>Separators</li>
   <li>Other menus (which allows the list to be nested)</li>
  </ul><p>The list corresponding to a particular <code><a href="#the-menu-element">menu</a></code> element
  is built by iterating over its child nodes. For each child node in
  <a href="infrastructure.html#tree-order">tree order</a>, the required behavior depends on what the
  node is, as follows:</p>

  <dl class="switch"><dt>An element that <a href="#concept-command" title="concept-command">defines a command</a></dt>

   <dd>Append the command to the menu, respecting its <a href="#concept-facet" title="concept-facet">facets</a><!-- we might need to be
   explicit about what this means for each facet, if testing shows
   this isn't well-implemented. e.g.: If there's an Icon facet for the
   command, it should be <span title="fetch">fetched</span><!- -FETCH-
   -> (this would be http-origin privacy-sensitive), and then that
   image should be associated with the command, such that each command
   only has its image fetched once, to prevent changes to the base URL
   from having effects after the image has been fetched once. (no need
   to resolve the Icon facet, it's an absolute URL) -->. <!--If the
   element is a <code>command</code> element with a <code
   title="attr-command-default">default</code> attribute, mark the
   command as being a default command.--></dd>


   <dt>An <code><a href="the-hr-element.html#the-hr-element">hr</a></code> element</dt>
   <dt>An <code><a href="the-option-element.html#the-option-element">option</a></code> element that has a <code title="attr-option-value"><a href="the-option-element.html#attr-option-value">value</a></code> attribute set to the empty
   string, and has a <code title="attr-option-disabled"><a href="the-option-element.html#attr-option-disabled">disabled</a></code> attribute, and whose
   <code><a href="infrastructure.html#textcontent">textContent</a></code> consists of a string of one or more
   hyphens (U+002D HYPHEN-MINUS)</dt>

   <dd>Append a separator to the menu.</dd>


   <dt>An <code><a href="the-li-element.html#the-li-element">li</a></code> element</dt>
   <dt>A <code><a href="the-label-element.html#the-label-element">label</a></code> element</dt>

   <dd>Iterate over the children of the element.</dd>


   <dt>A <code><a href="#the-menu-element">menu</a></code> element with no <code title="attr-menu-label"><a href="#attr-menu-label">label</a></code> attribute</dt>
   <dt>A <code><a href="the-select-element.html#the-select-element">select</a></code> element</dt>

   <dd>Append a separator to the menu, then iterate over the children
   of the <code><a href="#the-menu-element">menu</a></code> or <code><a href="the-select-element.html#the-select-element">select</a></code> element, then
   append another separator.</dd>

   <!-- v2: we might want to support <select> in <label> as giving a named submenu -->


   <dt>A <code><a href="#the-menu-element">menu</a></code> element with a <code title="attr-menu-label"><a href="#attr-menu-label">label</a></code> attribute</dt>
   <dt>An <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element with a <code title="attr-menu-label"><a href="#attr-menu-label">label</a></code> attribute</dt>

   <dd>Append a submenu to the menu, using the value of the element's
   <code title="">label</code> attribute as the label of the menu. The
   submenu must be constructed by taking the element and creating a
   new menu for it using the complete process described in this
   section.</dd>


   <dt>Any other node</dt>

   <dd><a href="infrastructure.html#ignore">Ignore</a> the node.</dd>

  </dl><p>Once all the nodes have been processed as described above, the
  user agent must the post-process the menu as follows:</p>

  <ol><li>Except for separators, any menu item with no label, or whose
   label is the empty string, must be removed.</li>

   <li>Any sequence of two or more separators in a row must be
   collapsed to a single separator.</li>

   <li>Any separator at the start or end of the menu must be
   removed.</li>

  </ol></div>




  <h5 id="context-menus"><span class="secno">4.11.4.3 </span><dfn>Context menus</dfn></h5>

  <p>The <dfn id="attr-contextmenu" title="attr-contextmenu"><code>contextmenu</code></dfn>
  attribute gives the element's <a href="#context-menus" title="context menus">context
  menu</a>. The value must be the <a href="infrastructure.html#concept-id" title="concept-id">ID</a> of a <code><a href="#the-menu-element">menu</a></code> element in the
  DOM. <span class="impl">If the node that would be obtained by
  invoking the <code title="dom-Document-getElementById"><a href="infrastructure.html#dom-document-getelementbyid">getElementById()</a></code> method
  using the attribute's value as the only argument is null or not a
  <code><a href="#the-menu-element">menu</a></code> element, then the element has no assigned context
  menu. Otherwise, the element's assigned context menu is the element
  so identified.</span></p>

  <div class="impl">

  <p>When an element's context menu is requested (e.g. by the user
  right-clicking the element, or pressing a context menu key), the
  user agent must apply the appropriate rules from the following
  list:</p>

  <dl class="switch"><dt>If the user requested a context menu using a pointing device</dt>

   <dd><p>The user agent must fire an event with the name <code title="event-contextmenu">contextmenu</code>, that bubbles and is
   cancelable, and that uses the <code><a href="infrastructure.html#mouseevent-10">MouseEvent</a></code> interface, at
   the element for which the menu was requested. The context
   information of the event must be initialized to the same values as
   the last <code><a href="infrastructure.html#mouseevent-10">MouseEvent</a></code> user interaction event that was
   fired as part of the gesture that that was interpreted as a request
   for the context menu.</p></dd>

   <dt>Otherwise</dt>

   <dd><p>The user agent must <a href="#fire-a-synthetic-mouse-event" title="fire a synthetic mouse
   event">fire a synthetic mouse event named <code title="event-contextmenu">contextmenu</code></a> that bubbles
   and is cancelable at the element for which the menu was
   requested.</p></dd>

  </dl><p class="note">Typically, therefore, the firing of the <code title="event-contextmenu">contextmenu</code> event will be the
  default action of a <code title="mouseup">mouseup</code> or <code title="event-keyup">keyup</code> event. The exact sequence of events
  is UA-dependent, as it will vary based on platform conventions.</p>

  <p>The default action of the <code title="event-contextmenu">contextmenu</code> event depends on
  whether the element or one of its ancestors has a context menu
  assigned (using the <code title="attr-contextmenu"><a href="#attr-contextmenu">contextmenu</a></code> attribute) or not. If
  there is no context menu assigned, the default action must be for
  the user agent to show its default context menu, if it has one.</p>

  <p>If the element or one of its ancestors <em>does</em> have a
  context menu assigned, then the user agent must <a href="#fire-a-simple-event">fire a simple
  event</a> named <code title="event-show">show</code> at the
  <code><a href="#the-menu-element">menu</a></code> element of the context menu of the nearest
  ancestor (including the element itself) with one assigned.</p>
  <!-- v2: include modifier key information -->

  <p>The default action of <em>this</em> event is that the user agent
  must show a context menu <a href="#building-menus-and-toolbars" title="building menus and
  toolbars">built</a> from the <code><a href="#the-menu-element">menu</a></code> element.</p>

  <p>The user agent may also provide access to its default context
  menu, if any, with the context menu shown. For example, it could
  merge the menu items from the two menus together, or provide the
  page's context menu as a submenu of the default menu.</p>

  <p>If the user dismisses the menu without making a selection,
  nothing in particular happens.</p>

  <p>If the user selects a menu item that represents a <a href="#concept-command" title="concept-command">command</a>, then the UA must invoke
  that command's <a href="#command-facet-action" title="command-facet-Action">Action</a>.</p>

  <p>Context menus must not, while being shown, reflect changes in the
  DOM; they are constructed as the default action of the <code title="event-show">show</code> event and must remain as constructed
  until dismissed.</p>

  <p>User agents may provide means for bypassing the context menu
  processing model, ensuring that the user can always access the UA's
  default context menus. For example, the user agent could handle
  right-clicks that have the Shift key depressed in such a way that it
  does not fire the <code title="event-contextmenu">contextmenu</code>
  event and instead always shows the default context menu.</p>

  <p>The <dfn id="dom-contextmenu" title="dom-contextMenu"><code>contextMenu</code></dfn>
  IDL attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-contextmenu"><a href="#attr-contextmenu">contextmenu</a></code> content attribute.</p>

  </div>

  <div class="example">

   <p>Here is an example of a context menu for an input control:</p>

   <pre>&lt;form name="npc"&gt;
 &lt;label&gt;Character name: &lt;input name=char type=text contextmenu=namemenu required&gt;&lt;/label&gt;
 &lt;menu type=context id=namemenu&gt;
  &lt;command label="Pick random name" onclick="document.forms.npc.elements.char.value = getRandomName()"&gt;
  &lt;command label="Prefill other fields based on name" onclick="prefillFields(document.forms.npc.elements.char.value)"&gt;
 &lt;/menu&gt;
&lt;/form&gt;</pre>

   <p>This adds two items to the control's context menu, one called
   "Pick random name", and one called "Prefill other fields based on
   name". They invoke scripts that are not shown in the example
   above.</p>

  </div>



  <div class="impl">

  <h5 id="toolbars"><span class="secno">4.11.4.4 </span><dfn>Toolbars</dfn></h5>

  <p>When a <code><a href="#the-menu-element">menu</a></code> element has a <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute in the <a href="#toolbar-state" title="toolbar state">toolbar</a> state, then the user agent
  must <a href="#building-menus-and-toolbars" title="building menus and toolbars">build</a> the
  menu for that <code><a href="#the-menu-element">menu</a></code> element, and use the result in the
  rendering.</p>

  <p>The user agent must reflect changes made to the
  <code><a href="#the-menu-element">menu</a></code>'s DOM, by immediately <a href="#building-menus-and-toolbars" title="building menus
  and toolbars">rebuilding</a> the menu.</p>

  </div>



  <h4 id="commands"><span class="secno">4.11.5 </span>Commands</h4>

  <p>A <dfn id="concept-command" title="concept-command">command</dfn> is the abstraction
  behind menu items, buttons, and links. Once a command is defined,
  other parts of the interface can refer to the same command, allowing
  many access points to a single feature to share facets such as the
  <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a>.</p>

  <p id="facets">Commands are defined to have the following
  <dfn id="concept-facet" title="concept-facet">facets</dfn>:</p>

  <dl><dt><dfn id="command-facet-type" title="command-facet-Type">Type</dfn></dt>

   <dd>The kind of command: "command", meaning it is a normal command;
   "radio", meaning that triggering the command will, amongst other
   things, set the <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked
   State</a> to true (and probably uncheck some other commands); or
   "checkbox", meaning that triggering the command will, amongst other
   things, toggle the value of the <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>.</dd>

   <dt><dfn id="command-facet-id" title="command-facet-ID">ID</dfn></dt>

   <dd>The name of the command, for referring to the command from the
   markup or from script. If a command has no ID, it is an
   <dfn id="anonymous-command">anonymous command</dfn>.</dd>

   <dt><dfn id="command-facet-label" title="command-facet-Label">Label</dfn></dt>

   <dd>The name of the command as seen by the user.</dd>

   <dt><dfn id="command-facet-hint" title="command-facet-Hint">Hint</dfn></dt>

   <dd>A helpful or descriptive string that can be shown to the
   user.</dd>

   <dt><dfn id="command-facet-icon" title="command-facet-Icon">Icon</dfn></dt>

   <dd>An <a href="urls.html#absolute-url">absolute URL</a> identifying a graphical image that
   represents the action. A command might not have an Icon.</dd> <!--
   changing base URLs might change the icon -->

   <dt><dfn id="command-facet-accesskey" title="command-facet-AccessKey">Access Key</dfn></dt>

   <dd>A key combination selected by the user agent that triggers the
   command. A command might not have an Access Key.</dd>

   <dt><dfn id="command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</dfn></dt>

   <dd>Whether the command is hidden or not (basically, whether it
   should be shown in menus).</dd>

   <dt><dfn id="command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</dfn></dt>

   <dd>Whether the command is relevant and can be triggered or not.</dd>

   <dt><dfn id="command-facet-checkedstate" title="command-facet-CheckedState">Checked State</dfn></dt>

   <dd>Whether the command is checked or not.</dd>

   <dt><dfn id="command-facet-action" title="command-facet-Action">Action</dfn></dt>

   <dd>The actual effect that triggering the command will have. This
   could be a scripted event handler, a <a href="urls.html#url">URL</a> to which to
   <a href="#navigate">navigate</a>, or a form submission.</dd>

<!-- v2COMMAND
   <dt><dfn title="command-facet-Triggers">Triggers</dfn></dt>

   <dd>The list of elements that can trigger the command. The element
   defining a command is always in the list of elements that can
   trigger the command. For anonymous commands, only the element
   defining the command is on the list, since other elements have no
   way to refer to it.</dd>
-->

  </dl><!--TOPIC:DOM APIs--><p>These facets are exposed on elements using the <dfn id="command-api">command
  API</dfn>:</p>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-command-ro-commandType"><a href="#dom-command-ro-commandtype">commandType</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-type" title="command-facet-Type">Type</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-Element-id"><a href="infrastructure.html#dom-element-id">id</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-id" title="command-facet-ID">ID</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-command-ro-commandLabel"><a href="#dom-command-ro-commandlabel">commandLabel</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-label" title="command-facet-Label">Label</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-title"><a href="global-attributes.html#dom-title">title</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-command-ro-commandIcon"><a href="#dom-command-ro-commandicon">commandIcon</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-accessKeyLabel"><a href="#dom-accesskeylabel">accessKeyLabel</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-accesskey" title="command-facet-AccessKey">Access Key</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-command-ro-commandHidden"><a href="#dom-command-ro-commandhidden">commandHidden</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-command-ro-commandDisabled"><a href="#dom-command-ro-commanddisabled">commandDisabled</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-command-ro-commandChecked"><a href="#dom-command-ro-commandchecked">commandChecked</a></code></dt>

   <dd>

    <p>Exposes the <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a> facet of the command.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-click"><a href="#dom-click">click</a></code>()</dt>

   <dd>

    <p>Triggers the <a href="#command-facet-action" title="command-facet-Action">Action</a> of the command.</p>

   </dd>

<!--v2COMMAND
   <dt><var title="">element</var> . <code title="dom-command-ro-commandTriggers">commandTriggers</code></dt>

   <dd>

    <p>Exposes the <span title="command-facet-Triggers">Triggers</span> facet of the command.</p>

   </dd>
-->

  </dl><div class="impl">

  <p>The <dfn id="dom-command-ro-commandtype" title="dom-command-ro-commandType"><code>commandType</code></dfn>
  attribute must return a string whose value is either "<code title="">command</code>", "<code title="">radio</code>", or "<code title="">checkbox</code>", depending on whether the <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command defined by the
  element is "command", "radio", or "checkbox" respectively. If the
  element does not define a command, it must return null.</p>

  <p>The <dfn id="dom-command-ro-commandlabel" title="dom-command-ro-commandLabel"><code>commandLabel</code></dfn>
  attribute must return the command's <a href="#command-facet-label" title="command-facet-Label">Label</a>, or null if the element
  does not define a command or does not specify a <a href="#command-facet-label" title="command-facet-Label">Label</a>.</p>

  <p>The <dfn id="dom-command-ro-commandicon" title="dom-command-ro-commandIcon"><code>commandIcon</code></dfn>
  attribute must return the <a href="urls.html#absolute-url">absolute URL</a> of the command's
  <a href="#command-facet-icon" title="command-facet-Icon">Icon</a>. If the element does
  not specify an icon, or if the element does not define a command,
  then the attribute must return null.</p>

  <p>The <dfn id="dom-command-ro-commandhidden" title="dom-command-ro-commandHidden"><code>commandHidden</code></dfn>
  attribute must return true if the command's <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a> is that the
  command is hidden, and false if the command is not hidden. If the
  element does not define a command, the attribute must return
  null.</p>

  <p>The <dfn id="dom-command-ro-commanddisabled" title="dom-command-ro-commandDisabled"><code>commandDisabled</code></dfn>
  attribute must return true if the command's <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a> is that
  the command is disabled, and false if the command is not disabled.
  This attribute is not affected by the command's <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>. If the
  element does not define a command, the attribute must return
  null.</p>

  <p>The <dfn id="dom-command-ro-commandchecked" title="dom-command-ro-commandChecked"><code>commandChecked</code></dfn>
  attribute must return true if the command's <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a> is that the
  command is checked, and false if it is that the command is not
  checked. If the element does not define a command, the attribute
  must return null.</p>

<!--v2COMMAND
  <p>The <dfn
  title="dom-command-ro-commandTriggers"><code>commandTriggers</code></dfn>
  attribute must return a list containing the elements that can
  trigger the command (the command's <span
  title="command-facet-Triggers">Triggers</span>). The list must be
  <span>live</span>. The same object must be returned each time. While
  the element does not define a command, the list must be empty.</p>
-->

  <p class="note">The <a href="#command-facet-id" title="command-facet-ID">ID</a> facet
  is exposed by the <code title="dom-Element-id"><a href="infrastructure.html#dom-element-id">id</a></code> IDL attribute, the
  <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> facet is exposed by the
  <code title="dom-title"><a href="global-attributes.html#dom-title">title</a></code> IDL attribute, and the <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> facet is exposed by
  the <code title="dom-accessKeyLabel"><a href="#dom-accesskeylabel">accessKeyLabel</a></code> IDL
  attribute.</p>

  </div>

  <hr><dl class="domintro"><dt><var title="">document</var> . <code title="dom-document-commands"><a href="#dom-document-commands">commands</a></code></dt>
   <dd>
    <p>Returns an <code><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> of the elements in the
    <code><a href="dom.html#document">Document</a></code> that define commands and have IDs.</p>
   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-document-commands" title="dom-document-commands"><code>commands</code></dfn> attribute
  of the document's <code><a href="dom.html#document">Document</a></code> interface must return an
  <code><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> rooted at the <code><a href="dom.html#document">Document</a></code>
  node, whose filter matches only elements that <a href="#concept-command" title="concept-command">define commands</a> and have <a href="#command-facet-id" title="command-facet-ID">IDs</a>.</p>

  </div>
<!--TOPIC:HTML-->

  <hr><p>User agents may expose the <a href="#concept-command" title="concept-command">commands</a> whose <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a> facet is false
  (visible) and whose elements are <a href="infrastructure.html#in-a-document">in a
  <code>Document</code></a>. For example, such commands could be
  listed in the user agent's menu bar. User agents are encouraged to
  do this especially for commands that have <a href="#command-facet-accesskey" title="command-facet-AccessKey">Access Keys</a>, as a way to
  advertise those keys to the user.</p>


  <div class="impl">

  <h5 id="using-the-a-element-to-define-a-command"><span class="secno">4.11.5.1 </span><dfn title="a-command">Using the <code>a</code> element to define a command</dfn></h5>

  <p>An <code><a href="the-a-element.html#the-a-element">a</a></code> element with an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute <a href="#concept-command" title="concept-command">defines a command</a>.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command
  is "command".</p>

  <p>The <a href="#command-facet-id" title="command-facet-ID">ID</a> of the command is
  the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute of the
  element, if the attribute is present and not empty. Otherwise the
  command is an <a href="#anonymous-command">anonymous command</a>.</p>

  <p>The <a href="#command-facet-label" title="command-facet-Label">Label</a> of the command
  is the string given by the element's <code><a href="infrastructure.html#textcontent">textContent</a></code> IDL
  attribute.</p>

  <p>The <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the command
  is the value of the <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute
  of the element. If the attribute is not present, the <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> is the empty string.</p>

  <p>The <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> of the command
  is the <a href="urls.html#absolute-url">absolute URL</a> obtained from <a href="urls.html#resolve-a-url" title="resolve
  a url">resolving</a> the value of the <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code> attribute of the first
  <code><a href="the-img-element.html#the-img-element">img</a></code> element descendant of the element in <a href="infrastructure.html#tree-order">tree
  order</a>, relative to that element, if there is such an element
  and resolving its attribute is successful. Otherwise, there is no
  <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> for the command.</p>

  <p>The <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> of the
  command is the element's <a href="#assigned-access-key">assigned access key</a>, if
  any.</p>

  <p>The <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>
  of the command is true (hidden) if the element has a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute, and false
  otherwise.</p>

  <p>The <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled
  State</a> facet of the command is true if the element or one of
  its ancestors is <a href="#inert">inert</a>, and false otherwise.</p>

  <p>The <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>
  of the command is always false. (The command is never checked.)</p>

  <p>The <a href="#command-facet-action" title="command-facet-Action">Action</a> of the
  command, if the element has a defined <a href="content-models.html#activation-behavior">activation
  behavior</a>, is to <a href="content-models.html#run-synthetic-click-activation-steps">run synthetic click activation
  steps</a> on the element. Otherwise, it is just to <a href="#fire-a-click-event">fire a
  <code title="event-click">click</code> event</a> at the
  element.</p>


  <h5 id="using-the-button-element-to-define-a-command"><span class="secno">4.11.5.2 </span><dfn title="button-command">Using the <code>button</code> element to define a command</dfn></h5>

  <p>A <code><a href="the-button-element.html#the-button-element">button</a></code> element always <a href="#concept-command" title="concept-command">defines a command</a>.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a>, <a href="#command-facet-id" title="command-facet-ID">ID</a>, <a href="#command-facet-label" title="command-facet-Label">Label</a>, <a href="#command-facet-hint" title="command-facet-Hint">Hint</a>, <a href="#command-facet-icon" title="command-facet-Icon">Icon</a>, <a href="#command-facet-accesskey" title="command-facet-AccessKey">Access Key</a>, <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>, <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>, and <a href="#command-facet-action" title="command-facet-Action">Action</a> facets of the command are
  determined <a href="#using-the-a-element-to-define-a-command" title="a-command">as for <code>a</code>
  elements</a> (see the previous section).</p>

  <p>The <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled
  State</a> of the command is true if the element or one of its
  ancestors is <a href="#inert">inert</a>, or if the element's <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a> state is set, and false
  otherwise.</p>


  <h5 id="using-the-input-element-to-define-a-command"><span class="secno">4.11.5.3 </span><dfn title="input-command">Using the <code>input</code> element to define a command</dfn></h5>

  <p>An <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in one of the <a href="states-of-the-type-attribute.html#submit-button-state-(type=submit)" title="attr-input-type-submit">Submit Button</a>, <a href="states-of-the-type-attribute.html#reset-button-state-(type=reset)" title="attr-input-type-reset">Reset Button</a>, <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a>, <a href="states-of-the-type-attribute.html#button-state-(type=button)" title="attr-input-type-button">Button</a>, <a href="states-of-the-type-attribute.html#radio-button-state-(type=radio)" title="attr-input-type-radio">Radio Button</a>, or <a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)" title="attr-input-type-checkbox">Checkbox</a> states <a href="#concept-command" title="concept-command">defines a command</a>.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command
  is "radio" if the <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code>
  attribute is in the <code title="attr-input-type-radio"><a href="states-of-the-type-attribute.html#radio-button-state-(type=radio)">Radio
  Button</a></code> state, "checkbox" if the <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <code title="attr-input-type-checkbox"><a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)">Checkbox</a></code> state, and
  "command" otherwise.</p>

  <p>The <a href="#command-facet-id" title="command-facet-ID">ID</a> of the command is
  the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute of the
  element, if the attribute is present and not empty. Otherwise the
  command is an <a href="#anonymous-command">anonymous command</a>.</p>

  <p>The <a href="#command-facet-label" title="command-facet-Label">Label</a> of the command
  depends on the Type of the command:</p>

  <p>If the <a href="#command-facet-type" title="command-facet-Type">Type</a> is "command",
  then it is the string given by the <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">value</a></code> attribute, if any, and a
  UA-dependent, locale-dependent value that the UA uses to label the
  button itself if the attribute is absent.</p>

  <p>Otherwise, the <a href="#command-facet-type" title="command-facet-Type">Type</a> is
  "radio" or "checkbox". If the element is a <a href="the-label-element.html#labeled-control">labeled
  control</a>, the <code><a href="infrastructure.html#textcontent">textContent</a></code> of the first
  <code><a href="the-label-element.html#the-label-element">label</a></code> element in <a href="infrastructure.html#tree-order">tree order</a> whose
  <a href="the-label-element.html#labeled-control">labeled control</a> is the element in question is the <a href="#command-facet-label" title="command-facet-Label">Label</a> (in DOM terms, this is the
  string given by <code><var title="">element</var>.labels[0].textContent</code>). Otherwise,
  the value of the <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">value</a></code>
  attribute, if present, is the <a href="#command-facet-label" title="command-facet-Label">Label</a>. Otherwise, the <a href="#command-facet-label" title="command-facet-Label">Label</a> is the empty string.</p>

  <p>The <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the command
  is the value of the <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute
  of the <code><a href="the-input-element.html#the-input-element">input</a></code> element. If the attribute is not present, the
  <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> is the empty
  string.</p>

  <p>If the element's <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code>
  attribute is in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image
  Button</a> state, and the element has a <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code> attribute, and that attribute's
  value can be successfully <a href="urls.html#resolve-a-url" title="resolve a
  url">resolved</a> relative to the element, then the <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> of the command is the
  <a href="urls.html#absolute-url">absolute URL</a> obtained from resolving that attribute
  that way. Otherwise, there is no <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> for the command.</p>

  <p>The <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> of the
  command is the element's <a href="#assigned-access-key">assigned access key</a>, if
  any.</p>

  <p>The <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>
  of the command is true (hidden) if the element has a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute, and false
  otherwise.</p>

  <p>The <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled
  State</a> of the command is true if the element or one of its
  ancestors is <a href="#inert">inert</a>, or if the element's <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a> state is set, and false
  otherwise.</p>

  <p>The <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>
  of the command is true if the command is of <a href="#command-facet-type" title="command-facet-Type">Type</a> "radio" or "checkbox" and the
  element is <a href="attributes-common-to-form-controls.html#concept-fe-checked" title="concept-fe-checked">checked</a>
  attribute, and false otherwise.</p>

  <p>The <a href="#command-facet-action" title="command-facet-Action">Action</a> of the
  command, if the element has a defined <a href="content-models.html#activation-behavior">activation
  behavior</a>, is to <a href="content-models.html#run-synthetic-click-activation-steps">run synthetic click activation
  steps</a> on the element. Otherwise, it is just to <a href="#fire-a-click-event">fire a
  <code title="event-click">click</code> event</a> at the
  element.</p>


  <h5 id="using-the-option-element-to-define-a-command"><span class="secno">4.11.5.4 </span><dfn title="option-command">Using the <code>option</code> element to define a command</dfn></h5>

  <p>An <code><a href="the-option-element.html#the-option-element">option</a></code> element with an ancestor
  <code><a href="the-select-element.html#the-select-element">select</a></code> element and either no <code title="attr-option-value"><a href="the-option-element.html#attr-option-value">value</a></code> attribute or a <code title="attr-option-value"><a href="the-option-element.html#attr-option-value">value</a></code> attribute that is not the
  empty string <a href="#concept-command" title="concept-command">defines a
  command</a>.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command
  is "radio" if the <code><a href="the-option-element.html#the-option-element">option</a></code>'s nearest ancestor
  <code><a href="the-select-element.html#the-select-element">select</a></code> element has no <code title="attr-select-multiple"><a href="the-select-element.html#attr-select-multiple">multiple</a></code> attribute, and
  "checkbox" if it does.</p>

  <p>The <a href="#command-facet-id" title="command-facet-ID">ID</a> of the command is
  the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute of the
  element, if the attribute is present and not empty. Otherwise the
  command is an <a href="#anonymous-command">anonymous command</a>.</p>

  <p>The <a href="#command-facet-label" title="command-facet-Label">Label</a> of the command
  is the value of the <code><a href="the-option-element.html#the-option-element">option</a></code> element's <code title="attr-option-label"><a href="the-option-element.html#attr-option-label">label</a></code> attribute, if there is one,
  or else the value of <code><a href="the-option-element.html#the-option-element">option</a></code> element's
  <code><a href="infrastructure.html#textcontent">textContent</a></code> IDL attribute, with <a href="common-microsyntaxes.html#strip-leading-and-trailing-whitespace" title="strip
  leading and trailing whitespace">leading and trailing whitespace
  stripped</a>, and with any sequences of two or more <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a> replaced by a single
  U+0020 SPACE character.</p>

  <p>The <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the command
  is the string given by the element's <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute, if any, and the empty
  string if the attribute is absent.</p>

  <p>There is no <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> for the
  command.</p>

  <p>The <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> of the
  command is the element's <a href="#assigned-access-key">assigned access key</a>, if
  any.</p>

  <p>The <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>
  of the command is true (hidden) if the element has a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute, and false
  otherwise.</p>

  <p>The <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled
  State</a> of the command is true if the element is <a href="the-option-element.html#concept-option-disabled" title="concept-option-disabled">disabled</a>, or if its nearest
  ancestor <code><a href="the-select-element.html#the-select-element">select</a></code> element is <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>, or if it or one of its
  ancestors is <a href="#inert">inert</a>, and false otherwise.</p>

  <p>The <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>
  of the command is true (checked) if the element's <a href="the-option-element.html#concept-option-selectedness" title="concept-option-selectedness">selectedness</a> is true, and
  false otherwise.</p>

  <p>The <a href="#command-facet-action" title="command-facet-Action">Action</a> of the
  command depends on its <a href="#command-facet-type" title="command-facet-Type">Type</a>. If the command is of <a href="#command-facet-type" title="command-facet-Type">Type</a> "radio" then it must <a href="the-select-element.html#concept-select-pick" title="concept-select-pick">pick</a> the <code><a href="the-option-element.html#the-option-element">option</a></code>
  element. Otherwise, it must <a href="the-select-element.html#concept-select-toggle" title="concept-select-toggle">toggle</a> the <code><a href="the-option-element.html#the-option-element">option</a></code>
  element.</p>



  <h5 id="using-the-command-element-to-define-a-command"><span class="secno">4.11.5.5 </span>Using the <dfn title="command-element"><code>command</code></dfn> element to define
  a command</h5>

  <p>A <code><a href="#the-command-element">command</a></code> element that does not have a <code title="attr-command-command"><a href="#attr-command-command">command</a></code> attribute <a href="#concept-command" title="concept-command">defines a command</a>.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command
  is "radio" if the <code><a href="#the-command-element">command</a></code>'s <code title="attr-command-type"><a href="#attr-command-type">type</a></code> attribute is
  "<code>radio</code>", "checkbox" if the attribute's value is
  "<code>checkbox</code>", and "command" otherwise.</p>

  <p>The <a href="#command-facet-id" title="command-facet-ID">ID</a> of the command is
  the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute of the
  element, if the attribute is present and not empty. Otherwise the
  command is an <a href="#anonymous-command">anonymous command</a>.</p>

  <p>The <a href="#command-facet-label" title="command-facet-Label">Label</a> of the command
  is the value of the element's <code title="attr-command-label"><a href="#attr-command-label">label</a></code> attribute, if there is one,
  or the empty string if it doesn't.</p>

  <p>The <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the command
  is the string given by the element's <code title="attr-command-title"><a href="#attr-command-title">title</a></code> attribute, if any, and the
  empty string if the attribute is absent.</p>

  <p>The <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> for the command
  is the <a href="urls.html#absolute-url">absolute URL</a> obtained from <a href="urls.html#resolve-a-url" title="resolve
  a url">resolving</a> the value of the element's <code title="attr-command-icon"><a href="#attr-command-icon">icon</a></code> attribute, relative to the
  element, if it has such an attribute and resolving it is
  successful. Otherwise, there is no <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> for the command.</p>

  <p>The <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> of the
  command is the element's <a href="#assigned-access-key">assigned access key</a>, if
  any.</p>

  <p>The <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>
  of the command is true (hidden) if the element has a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute, and false
  otherwise.</p>

  <p>The <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled
  State</a> of the command is true if the element or one of its
  ancestors is <a href="#inert">inert</a>, or if the element has a <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code> attribute, and false
  otherwise.</p>

  <p>The <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>
  of the command is true (checked) if the element has a <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code> attribute, and false
  otherwise.</p>

  <p>The <a href="#command-facet-action" title="command-facet-Action">Action</a> of the
  command, if the element has a defined <a href="content-models.html#activation-behavior">activation
  behavior</a>, is to <a href="content-models.html#run-synthetic-click-activation-steps">run synthetic click activation
  steps</a> on the element. Otherwise, it is just to <a href="#fire-a-click-event">fire a
  <code title="event-click">click</code> event</a> at the
  element.</p>



  <h5 id="using-the-command-attribute-on-command-elements-to-define-a-command-indirectly"><span class="secno">4.11.5.6 </span><dfn title="command-command-command">Using the <code title="attr-command-command">command</code> attribute on <code>command</code> elements to define a command indirectly</dfn></h5>

  <p>A <code><a href="#the-command-element">command</a></code> element with a <a href="#master-command">master command</a>
  <a href="#concept-command" title="concept-command">defines a command</a>.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command
  is the <a href="#command-facet-type" title="command-facet-Type">Type</a> of the
  <a href="#master-command">master command</a>.</p>

  <p>The <a href="#command-facet-id" title="command-facet-ID">ID</a> of the command is
  the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute of the
  element, if the attribute is present and not empty. Otherwise the
  command is an <a href="#anonymous-command">anonymous command</a>.</p>

  <p>The <a href="#command-facet-label" title="command-facet-Label">Label</a> of the command
  is the <a href="#command-facet-label" title="command-facet-Label">Label</a> of the
  <a href="#master-command">master command</a>.</p>

  <p>If the element has a <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code>
  attribute, then the <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of
  the command is the value of that <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute. Otherwise, the <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the command is the <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the <a href="#master-command">master
  command</a>.</p>

  <p>The <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> of the command
  is the <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> of the
  <a href="#master-command">master command</a>.</p>

  <p>The <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> of the
  command is the element's <a href="#assigned-access-key">assigned access key</a>, if
  any.</p>

  <p>The <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>
  of the command is the <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden
  State</a> of the <a href="#master-command">master command</a>.</p>

  <p>The <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled
  State</a> of the command is the <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a> of the
  <a href="#master-command">master command</a>.</p>

  <p>The <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked
  State</a> of the command is the <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a> of the
  <a href="#master-command">master command</a>.</p>

  <p>The <a href="#command-facet-action" title="command-facet-Action">Action</a> of the
  command is to invoke the <a href="#command-facet-action" title="command-facet-Action">Action</a> of the <a href="#master-command">master
  command</a>.</p>



  <h5 id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command"><span class="secno">4.11.5.7 </span><dfn title="label-command">Using the <code title="attr-accesskey">accesskey</code> attribute on a <code>label</code> element to define a command</dfn></h5>

  <p>A <code><a href="the-label-element.html#the-label-element">label</a></code> element that has an <a href="#assigned-access-key">assigned access
  key</a> and a <a href="the-label-element.html#labeled-control">labeled control</a> and whose
  <a href="the-label-element.html#labeled-control">labeled control</a> <a href="#concept-command" title="concept-command">defines a
  command</a>, itself <a href="#concept-command" title="concept-command">defines a
  command</a>.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command
  is "command".</p>

  <p>The <a href="#command-facet-id" title="command-facet-ID">ID</a> of the command is
  the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute of the
  element, if the attribute is present and not empty. Otherwise the
  command is an <a href="#anonymous-command">anonymous command</a>.</p>

  <p>The <a href="#command-facet-label" title="command-facet-Label">Label</a> of the command
  is the string given by the element's <code><a href="infrastructure.html#textcontent">textContent</a></code> IDL
  attribute.</p>

  <p>The <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the command
  is the value of the <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute
  of the element.</p>

  <p>There is no <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> for the
  command.</p>

  <p>The <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> of the
  command is the element's <a href="#assigned-access-key">assigned access key</a>.</p>

  <p>The <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>,
  <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a>, and
  <a href="#command-facet-action" title="command-facet-Action">Action</a> facets of the
  command are the same as the respective facets of the element's
  <a href="the-label-element.html#labeled-control">labeled control</a>.</p>

  <p>The <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>
  of the command is always false. (The command is never checked.)</p>



  <h5 id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command"><span class="secno">4.11.5.8 </span><dfn title="legend-command">Using the <code title="attr-accesskey">accesskey</code> attribute on a <code>legend</code> element to define a command</dfn></h5>

  <p>A <code><a href="the-legend-element.html#the-legend-element">legend</a></code> element that has an <a href="#assigned-access-key">assigned access
  key</a> and is a child of a <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> element that
  has a descendant that is not a descendant of the <code><a href="the-legend-element.html#the-legend-element">legend</a></code>
  element and is neither a <code><a href="the-label-element.html#the-label-element">label</a></code> element nor a
  <code><a href="the-legend-element.html#the-legend-element">legend</a></code> element but that <a href="#concept-command" title="concept-command">defines a command</a>, itself <a href="#concept-command" title="concept-command">defines a command</a>.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command
  is "command".</p>

  <p>The <a href="#command-facet-id" title="command-facet-ID">ID</a> of the command is
  the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute of the
  element, if the attribute is present and not empty. Otherwise the
  command is an <a href="#anonymous-command">anonymous command</a>.</p>

  <p>The <a href="#command-facet-label" title="command-facet-Label">Label</a> of the command
  is the string given by the element's <code><a href="infrastructure.html#textcontent">textContent</a></code> IDL
  attribute.</p>

  <p>The <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the command
  is the value of the <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute
  of the element.</p>

  <p>There is no <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> for the
  command.</p>

  <p>The <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> of the
  command is the element's <a href="#assigned-access-key">assigned access key</a>.</p>

  <p>The <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>,
  <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a>, and
  <a href="#command-facet-action" title="command-facet-Action">Action</a> facets of the
  command are the same as the respective facets of the first element
  in <a href="infrastructure.html#tree-order">tree order</a> that is a descendant of the parent of the
  <code><a href="the-legend-element.html#the-legend-element">legend</a></code> element that <a href="#concept-command" title="concept-command">defines a command</a> but is not a
  descendant of the <code><a href="the-legend-element.html#the-legend-element">legend</a></code> element and is neither a
  <code><a href="the-label-element.html#the-label-element">label</a></code> nor a <code><a href="the-legend-element.html#the-legend-element">legend</a></code> element.</p>

  <p>The <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>
  of the command is always false. (The command is never checked.)</p>



  <h5 id="using-the-accesskey-attribute-to-define-a-command-on-other-elements"><span class="secno">4.11.5.9 </span><dfn title="accesskey-command">Using the <code title="attr-accesskey">accesskey</code> attribute to define a command on other elements</dfn></h5>

  <p>An element that has an <a href="#assigned-access-key">assigned access key</a> <a href="#concept-command" title="concept-command">defines a command</a>.</p>

  <p>If one of the earlier sections that define elements that <a href="#concept-command" title="concept-command">define commands</a> define that this
  element <a href="#concept-command" title="concept-command">defines a command</a>, then
  that section applies to this element, and this section does not.
  Otherwise, this section applies to that element.</p>

  <p>The <a href="#command-facet-type" title="command-facet-Type">Type</a> of the command
  is "command".</p>

  <p>The <a href="#command-facet-id" title="command-facet-ID">ID</a> of the command is
  the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute of the
  element, if the attribute is present and not empty. Otherwise the
  command is an <a href="#anonymous-command">anonymous command</a>.</p>

  <p>The <a href="#command-facet-label" title="command-facet-Label">Label</a> of the command
  depends on the element. If the element is a <a href="the-label-element.html#labeled-control">labeled
  control</a>, the <code><a href="infrastructure.html#textcontent">textContent</a></code> of the first
  <code><a href="the-label-element.html#the-label-element">label</a></code> element in <a href="infrastructure.html#tree-order">tree order</a> whose
  <a href="the-label-element.html#labeled-control">labeled control</a> is the element in question is the <a href="#command-facet-label" title="command-facet-Label">Label</a> (in DOM terms, this is the
  string given by <code><var title="">element</var>.labels[0].textContent</code>). Otherwise, the
  <a href="#command-facet-label" title="command-facet-Label">Label</a> is the
  <code><a href="infrastructure.html#textcontent">textContent</a></code> of the element itself.</p>

  <p>The <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> of the command
  is the value of the <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute
  of the element. If the attribute is not present, the <a href="#command-facet-hint" title="command-facet-Hint">Hint</a> is the empty string.</p>

  <p>There is no <a href="#command-facet-icon" title="command-facet-Icon">Icon</a> for the
  command.</p>

  <p>The <a href="#command-facet-accesskey" title="command-facet-AccessKey">AccessKey</a> of the
  command is the element's <a href="#assigned-access-key">assigned access key</a>.</p>

  <p>The <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden State</a>
  of the command is true (hidden) if the element has a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute, and false
  otherwise.</p>

  <p>The <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled
  State</a> of the command is true if the element or one of its
  ancestors is <a href="#inert">inert</a>, and false otherwise.</p>

  <p>The <a href="#command-facet-checkedstate" title="command-facet-CheckedState">Checked State</a>
  of the command is always false. (The command is never checked.)</p>

  <p>The <a href="#command-facet-action" title="command-facet-Action">Action</a> of the
  command is to run the following steps:</p>

  <ol><li>If the element is <a href="#focusable">focusable</a>, run the
   <a href="#focusing-steps">focusing steps</a> for the element.</li>

   <li>If the element has a defined <a href="content-models.html#activation-behavior">activation behavior</a>,
   <a href="content-models.html#run-synthetic-click-activation-steps">run synthetic click activation steps</a> on the
   element.</li>

   <li>Otherwise, if the element does not have a defined
   <a href="content-models.html#activation-behavior">activation behavior</a>, <a href="#fire-a-click-event">fire a <code title="event-click">click</code> event</a> at the element.</li>

  </ol></div>


  <h4 id="the-dialog-element"><span class="secno">4.11.6 </span>The <dfn><code>dialog</code></dfn> element</h4>

  <dl class="element"><dt><a href="element-definitions.html#element-dfn-categories" title="element-dfn-categories">Categories</a>:</dt>
   <dd><a href="content-models.html#flow-content-1">Flow content</a>.</dd>
   <dd><a href="headings-and-sections.html#sectioning-root">Sectioning root</a>.</dd>
   <dt><a href="element-definitions.html#element-dfn-contexts" title="element-dfn-contexts">Contexts in which this element can be used</a>:</dt>
   <dd>Where <a href="content-models.html#flow-content-1">flow content</a> is expected.</dd>
   <dd>As a child of a <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element.</dd>
   <dd>As a child of a <code><a href="the-th-element.html#the-th-element">th</a></code> element.</dd>
   <dt><a href="element-definitions.html#element-dfn-content-model" title="element-dfn-content-model">Content model</a>:</dt>
   <dd><a href="content-models.html#flow-content-1">Flow content</a>.</dd>
   <dt><a href="element-definitions.html#element-dfn-attributes" title="element-dfn-attributes">Content attributes</a>:</dt>
   <dd><a href="global-attributes.html#global-attributes">Global attributes</a></dd>
   <dd><code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code></dd>
   <dt><a href="element-definitions.html#element-dfn-dom" title="element-dfn-dom">DOM interface</a>:</dt><!--TOPIC:DOM APIs-->
   <dd>
<pre class="idl">interface <dfn id="htmldialogelement">HTMLDialogElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute boolean <a href="#dom-dialog-open" title="dom-dialog-open">open</a>;
           attribute DOMString <a href="#dom-dialog-returnvalue" title="dom-dialog-returnValue">returnValue</a>;
  void <a href="#dom-dialog-show" title="dom-dialog-show">show</a>(optional (<a href="infrastructure.html#mouseevent-10">MouseEvent</a> or <a href="infrastructure.html#element">Element</a>) anchor);
  void <a href="#dom-dialog-showmodal" title="dom-dialog-showModal">showModal</a>(optional (<a href="infrastructure.html#mouseevent-10">MouseEvent</a> or <a href="infrastructure.html#element">Element</a>) anchor);
  void <a href="#dom-dialog-close" title="dom-dialog-close">close</a>(optional DOMString returnValue);
};</pre>
   </dd>
  </dl><!--TOPIC:HTML--><p>The <code><a href="#the-dialog-element">dialog</a></code> element represents a part of an
  application that a user interacts with to perform a task, for
  example a dialog box, inspector, or window.</p>

  <p>The <dfn id="attr-dialog-open" title="attr-dialog-open"><code>open</code></dfn>
  attribute is a <a href="common-microsyntaxes.html#boolean-attribute">boolean attribute</a>. When specified, it
  indicates that the <code><a href="#the-dialog-element">dialog</a></code> element is active and that
  the user can interact with it.</p>

  <div class="impl">

  <p>A <code><a href="#the-dialog-element">dialog</a></code> element without an <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code> attribute specified should not
  be shown to the user. This requirement may be implemented indirectly
  through the style layer. For example, user agents that <a href="infrastructure.html#renderingUA">support the suggested default rendering</a>
  implement this requirement using the CSS rules described in the <a href="#rendering">rendering section</a>.</p>

  </div>

<!--TOPIC:DOM APIs-->

  <dl class="domintro"><dt><var title="">dialog</var> . <code title="dom-dialog-show"><a href="#dom-dialog-show">show</a></code>( [ <var title="">anchor</var> ] )</dt>

   <dd>

    <p>Displays the <code><a href="#the-dialog-element">dialog</a></code> element.</p>

    <p>The argument, if provided, provides an anchor point to which
    the element will be fixed.</p>

   </dd>

   <dt><var title="">dialog</var> . <code title="dom-dialog-showModal"><a href="#dom-dialog-showmodal">showModal</a></code>( [ <var title="">anchor</var> ] )</dt>

   <dd>

    <p>Displays the <code><a href="#the-dialog-element">dialog</a></code> element and makes it the top-most modal dialog.</p>

    <p>The argument, if provided, provides an anchor point to which
    the element will be fixed.</p>

    <p>This method honors the <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">autofocus</a></code> attribute.</p>

   </dd>

   <dt><var title="">dialog</var> . <code title="dom-dialog-close"><a href="#dom-dialog-close">close</a></code>( [ <var title="">result</var> ] )</dt>

   <dd>

    <p>Closes the <code><a href="#the-dialog-element">dialog</a></code> element.</p>

    <p>The argument, if provided, provides a return value.</p>

   </dd>

   <dt><var title="">dialog</var> . <code title="dom-dialog-returnValue"><a href="#dom-dialog-returnvalue">returnValue</a></code> [ = <var title="">result</var> ]</dt>

   <dd>

    <p>Returns the <code><a href="#the-dialog-element">dialog</a></code>'s return value.</p>

    <p>Can be set, to update the return value.</p>

   </dd>

  </dl><div class="impl">

  <p>When the <dfn id="dom-dialog-show" title="dom-dialog-show"><code>show()</code></dfn>
  method is invoked, the user agent must run the following steps:</p>

  <ol><li><p>If the element already has an <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code> attribute, then abort these
   steps.</p></li>

   <li><p>Add an <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code> attribute
   to the <code><a href="#the-dialog-element">dialog</a></code> element, whose value is the empty
   string.</p></li>

   <li><p>If the <code title="dom-dialog-show"><a href="#dom-dialog-show">show()</a></code> method
   was invoked with an argument, <a href="#set-up-the-position">set up the position</a> of
   the <code><a href="#the-dialog-element">dialog</a></code> element, using that argument as the anchor.
   Otherwise, <a href="#set-up-the-default-static-position">set up the default static position</a> of the
   dialog element.</p></li>

  </ol><hr><p>Each <code><a href="dom.html#document">Document</a></code> has a stack of <code><a href="#the-dialog-element">dialog</a></code>
  elements known as the <dfn id="pending-dialog-stack">pending dialog stack</dfn>. When a
  <code><a href="dom.html#document">Document</a></code> is created, this stack must be initialized to
  be empty.</p>

  <p>When an element is added to the <a href="#pending-dialog-stack">pending dialog
  stack</a>, it must also be added to the <a href="infrastructure.html#top-layer">top layer</a>
  layer. When an element is removed from the <a href="#pending-dialog-stack">pending dialog
  stack</a>, it must be removed from the <a href="infrastructure.html#top-layer">top layer</a>. <a href="#refsFULLSCREEN">[FULLSCREEN]</a></p>

  <p>When the <dfn id="dom-dialog-showmodal" title="dom-dialog-showModal"><code>showModal()</code></dfn> method
  is invoked, the user agent must run the following steps:</p>

  <ol><li><p>Let <var title="">dialog</var> be the <code><a href="#the-dialog-element">dialog</a></code>
   element on which the method was invoked.</p></li>

   <li><p>If <var title="">dialog</var> already has an <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code> attribute, then throw an
   <a href="infrastructure.html#invalidstateerror">InvalidStateError</a> exception and abort these
   steps.</p></li>

   <li><p>If <var title="">dialog</var> is not <a href="infrastructure.html#in-a-document">in a
   <code>Document</code></a>, then throw an
   <a href="infrastructure.html#invalidstateerror">InvalidStateError</a> exception and abort these
   steps.</p></li>

   <li><p>Add an <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code> attribute
   to <var title="">dialog</var>, whose value is the empty
   string.</p></li>

   <li><p>If the <code title="dom-dialog-showModal"><a href="#dom-dialog-showmodal">showModal()</a></code>
   method was invoked with an argument, <a href="#set-up-the-position">set up the
   position</a> of <var title="">dialog</var>, using that argument
   as the anchor. Otherwise, <a href="#set-up-the-default-static-position">set up the default static
   position</a> of the dialog element.</p></li>

   <li><p>Let <var title="">dialog</var>'s <code><a href="dom.html#document">Document</a></code> be
   <a href="#blocked-by-a-modal-dialog" title="blocked by a modal dialog">blocked by the modal
   dialog</a> <var title="">dialog</var>.</p></li>

   <li><p>Push <var title="">dialog</var> onto <var title="">dialog</var>'s <code><a href="dom.html#document">Document</a></code>'s <a href="#pending-dialog-stack">pending
   dialog stack</a>.</p></li>

   <li><p>Let <var title="">control</var> be the first element in tree
   order whose nearest ancestor <code><a href="#the-dialog-element">dialog</a></code> element is <var title="">dialog</var> and that has an <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">autofocus</a></code> attribute
   specified, if any.</p></li>

   <li><p>If there is no <var title="">control</var>, then abort these
   steps.</p></li>

   <li><p>Run the <a href="#focusing-steps">focusing steps</a> for <var title="">control</var>.</p></li>

  </ol><p>If at any time a <code><a href="#the-dialog-element">dialog</a></code> element is <a href="infrastructure.html#remove-an-element-from-a-document" title="remove an element from a document">removed from a
  <code>Document</code></a>, then if that <code><a href="#the-dialog-element">dialog</a></code> is in
  that <code><a href="dom.html#document">Document</a></code>'s <a href="#pending-dialog-stack">pending dialog stack</a>, the
  following steps must be run:</p>

  <ol><li><p>Let <var title="">dialog</var> be that <code><a href="#the-dialog-element">dialog</a></code>
   element and <var title="">document</var> be the
   <code><a href="dom.html#document">Document</a></code> from which it is being removed.</p></li>

   <li><p>Remove <var title="">dialog</var> from <var title="">document</var>'s <a href="#pending-dialog-stack">pending dialog
   stack</a>.</p></li>

   <li><p>If <var title="">document</var>'s <a href="#pending-dialog-stack">pending dialog
   stack</a> is not empty, then let <var title="">document</var> be
   <a href="#blocked-by-a-modal-dialog" title="blocked by a modal dialog">blocked by the modal
   dialog</a> that is at the top of <var title="">document</var>'s
   <a href="#pending-dialog-stack">pending dialog stack</a>. Otherwise, let <var title="">document</var> be no longer <a href="#blocked-by-a-modal-dialog">blocked by a modal
   dialog</a> at all.</p></li>

  </ol><p>When the <dfn id="dom-dialog-close" title="dom-dialog-close"><code>close()</code></dfn>
  method is invoked, the user agent must <a href="#close-the-dialog">close the dialog</a>
  that the method was invoked on. If the method was invoked with an
  argument, that argument must be used as the return value; otherwise,
  there is no return value.</p>

<!--TOPIC:HTML-->

  <p>When a <code><a href="#the-dialog-element">dialog</a></code> element <var title="">dialog</var> is
  to be <dfn id="close-the-dialog" title="close the dialog">closed</dfn>, optionally with a
  return value <var title="">result</var>, the user agent must run the
  following steps:</p>

  <ol><li><p>If <var title="">dialog</var> does not have an <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code> attribute, then throw an
   <a href="infrastructure.html#invalidstateerror">InvalidStateError</a> exception and abort these
   steps.</p></li>

   <li><p>Remove <var title="">dialog</var>'s <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code> attribute.</p></li>

   <li><p>If the argument was passed a <var title="">result</var>,
   then set the <code title="dom-dialog-returnValue"><a href="#dom-dialog-returnvalue">returnValue</a></code> attribute to the
   value of <var title="">result</var>.</p></li>

   <li>

    <p>If <var title="">dialog</var> is in its <code><a href="dom.html#document">Document</a></code>'s
    <a href="#pending-dialog-stack">pending dialog stack</a>, then run these substeps:</p>

    <ol><li><p>Remove <var title="">dialog</var> from that <a href="#pending-dialog-stack">pending
     dialog stack</a>.</p></li>

     <li><p>If that <a href="#pending-dialog-stack">pending dialog stack</a> is not empty,
     then let <var title="">dialog</var>'s <code><a href="dom.html#document">Document</a></code> be
     <a href="#blocked-by-a-modal-dialog" title="blocked by a modal dialog">blocked by the modal
     dialog</a> that is at the top of the <a href="#pending-dialog-stack">pending dialog
     stack</a>. Otherwise, let <var title="">document</var> be no
     longer <a href="#blocked-by-a-modal-dialog">blocked by a modal dialog</a> at all.</p></li>

    </ol></li>

   <li><p><a href="#queue-a-task">Queue a task</a> to <a href="#fire-a-simple-event">fire a simple
   event</a> named <code title="event-close">close</code> at <var title="">dialog</var>.</p></li>

  </ol><!--TOPIC:DOM APIs--><p>The <dfn id="dom-dialog-returnvalue" title="dom-dialog-returnValue"><code>returnValue</code></dfn> IDL
  attribute, on getting, must return the last value to which it was
  set. On setting, it must be set to the new value. When the element
  is created, it must be set to the empty string.</p>

<!--TOPIC:HTML-->

  <hr><p><strong>Canceling dialogs</strong>: When a
  <code><a href="dom.html#document">Document</a></code>'s <a href="#pending-dialog-stack">pending dialog stack</a> is not
  empty, user agents may provide a user interface that, upon
  activation, <a href="#queue-a-task" title="queue a task">queues a task</a> to
  <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-cancel">cancel</code> that is cancelable at the top
  <code><a href="#the-dialog-element">dialog</a></code> element on the <code><a href="dom.html#document">Document</a></code>'s
  <a href="#pending-dialog-stack">pending dialog stack</a>. The default action of this event
  must be to <a href="#close-the-dialog">close the dialog</a> with no return value.</p>

  <p class="note">An example of such a UI mechanism would be the user
  pressing the "Escape" key.</p>

  <hr><p>When a user agent is to <dfn id="set-up-the-default-static-position">set up the default static
  position</dfn> of an element <var title="">dialog</var> without an
  anchor, it must set up the element such that its top static
  position, for the purposes of calculating the used value of the
  'top' property, is the value that would place the element's top
  margin edge as far from the top of the viewport as the element's
  bottom margin edge from the bottom of the viewport, if the element's
  height is less than the height of the viewport, and otherwise is the
  value that would place the element's top margin edge at the top of
  the viewport.</p>

  <p>This top static position must remain the element's top static
  position until it is next changed by the above algorithm or the next
  one. (The element's static position is only used in calculating the
  used value of the 'top' property in certain situations; it's not
  used, for instance, to position the element if its 'position'
  property is set to 'static'.)</p>

  <p>When a user agent is to <dfn id="set-up-the-position">set up the position</dfn> of an
  element <var title="">dialog</var> using an anchor <var title="">anchor</var>, it must run the following steps:</p>

  <ol><li>

    <p>If <var title="">anchor</var> is a <code><a href="infrastructure.html#mouseevent-10">MouseEvent</a></code>
    object, then run these substeps:</p>

    <ol><li><p>If <var title="">anchor</var>'s target element does not
     have a rendered box, or is in a different document than <var title="">dialog</var>, then abort the <a href="#set-up-the-position">set up the
     position</a> steps.</p></li>

     <li><p>Let <var title="">anchor element</var> be an anonymous
     element rendered as a box with zero height and width (so its
     margin and border boxes both just form a point), positioned so
     that its top and left are at the coordinate identified by the
     event, and whose properties all compute to their initial
     values.</p></li>

    </ol><p>Otherwise, let <var title="">anchor element</var> be <var title="">anchor</var>.</p>

   </li>

   <li><p>Let <var title="">dialog</var> be <a href="#magically-aligned">magically
   aligned</a> to <var title="">anchor element</var>.</p></li>

  </ol><p>While an element <var title="">A</var> is <dfn id="magically-aligned">magically
  aligned</dfn> to an element <var title="">B</var>, <var title="">A</var> and <var title="">B</var> both have rendered boxes,
  and <var title="">B</var> is not a descendant of <var title="">A</var>, the following requirements apply:</p>

  <ul><li><p><var title="">A</var>'s 'position' property must compute to
   the keyword '<dfn id="css-position-absolute-anchored" title="css-position-absolute-anchored">absolute-anchored</dfn>'.</p></li>

   <li>

    <p>Let <var title="">A</var> and <var title="">B</var>'s anchor
    points be defined as per the appropriate entry in the following
    list:</p>

    <dl class="switch"><dt>If the computed value of 'anchor-point' is 'none' on both
     <var title="">A</var> and <var title="">B</var>

     </dt><dd>

      <p>The anchor points of <var title="">A</var> and <var title="">B</var> are the center points of their respective first
      boxes' border boxes.


     </p></dd><dt>If the computed value of 'anchor-point' is 'none' on <var title="">A</var> and a specific point on <var title="">B</var>

     </dt><dd>
      <p>The anchor point of <var title="">B</var> is the point given
      by its 'anchor-point' property.

      </p><p>If the anchor point of <var title="">B</var> is the center
      point of <var title="">B</var>'s first box's border box, then
      <var title="">A</var>'s anchor point is the center point of its
      first box's margin box.

      </p><p>Otherwise, <var title="">A</var>'s anchor point is on one of
      its margin edges. Consider four hypothetical half-infinite lines
      L1, L2, L3, and L4 that each start in the center of <var title="">B</var>'s first box's border box, and that extend
      respectively through the top left corner, top right corner,
      bottom right corner, and bottom left corner of <var title="">B</var>'s first box's border box. <var title="">A</var>'s anchor point is determined by the location of
      <var title="">B</var>'s anchor point relative to these four
      hypothetical lines, as follows:

      </p><p>If the anchor point of <var title="">B</var> lies on L1 or
      L2, or inside the area bounded by L1 and L2 that also contains
      the points above <var title="">B</var>'s first box's border box,
      then let <var title="">A</var>'s anchor point be the horizontal
      center of <var title="">A</var>'s bottom margin edge.</p>

      <p>Otherwise, if the anchor point of <var title="">B</var> lies
      on L3 or L4, or inside the area bounded by L4 and L4 that also
      contains the points below <var title="">B</var>'s first box's
      border box, then let <var title="">A</var>'s anchor point be the
      horizontal center of <var title="">A</var>'s top margin
      edge.</p>

      <p>Otherwise, if the anchor point of <var title="">B</var> lies
      inside the area bounded by L4 and L1 that also contains the
      points to the left of <var title="">B</var>'s first box's border
      box, then let <var title="">A</var>'s anchor point be the
      vertical center of <var title="">A</var>'s right margin
      edge.</p>

      <p>Otherwise, the anchor point of <var title="">B</var> lies
      inside the area bounded by L2 and L3 that also contains the
      points to the right of <var title="">B</var>'s first box's
      border box; let <var title="">A</var>'s anchor point be the
      vertical center of <var title="">A</var>'s left margin edge.</p>


     </dd><dt>If the computed value of 'anchor-point' is a specific point
     on <var title="">A</var> and 'none' on <var title="">B</var>

     </dt><dd>
      <p>The anchor point of <var title="">A</var> is the point given
      by its 'anchor-point' property.

      </p><p>If the anchor point of <var title="">A</var> is the center
      point of <var title="">A</var>'s first box's margin box, then
      <var title="">B</var>'s anchor point is the center point of its
      first box's border box.

      </p><p>Otherwise, <var title="">B</var>'s anchor point is on one of
      its border edges. Consider four hypothetical half-infinite lines
      L1, L2, L3, and L4 that each start in the center of <var title="">A</var>'s first box's margin box, and that extend
      respectively through the top left corner, top right corner,
      bottom right corner, and bottom left corner of <var title="">A</var>'s first box's margin box. <var title="">B</var>'s anchor point is determined by the location of
      <var title="">A</var>'s anchor point relative to these four
      hypothetical lines, as follows:

      </p><p>If the anchor point of <var title="">A</var> lies on L1 or
      L2, or inside the area bounded by L1 and L2 that also contains
      the points above <var title="">A</var>'s first box's margin box,
      then let <var title="">B</var>'s anchor point be the horizontal
      center of <var title="">B</var>'s bottom border edge.</p>

      <p>Otherwise, if the anchor point of <var title="">A</var> lies
      on L3 or L4, or inside the area bounded by L4 and L4 that also
      contains the points below <var title="">A</var>'s first box's
      margin box, then let <var title="">B</var>'s anchor point be the
      horizontal center of <var title="">B</var>'s top border
      edge.</p>

      <p>Otherwise, if the anchor point of <var title="">A</var> lies
      inside the area bounded by L4 and L1 that also contains the
      points to the left of <var title="">A</var>'s first box's margin
      box, then let <var title="">B</var>'s anchor point be the
      vertical center of <var title="">B</var>'s right border
      edge.</p>

      <p>Otherwise, the anchor point of <var title="">A</var> lies
      inside the area bounded by L2 and L3 that also contains the
      points to the right of <var title="">A</var>'s first box's
      margin box; let <var title="">B</var>'s anchor point be the
      vertical center of <var title="">B</var>'s left border edge.</p>


     </dd><dt>If the computed value of 'anchor-point' is a specific point
     on both <var title="">A</var> and <var title="">B</var>

     </dt><dd>
      <p>The anchor points of <var title="">A</var> and <var title="">B</var> are the points given by their respective
      'anchor-point' properties.

    </p></dd></dl><p class="note">The rules above generally use <var title="">A</var>'s <em>margin</em> box, but <var title="">B</var>'s <em>border</em> box. This is because while <var title="">A</var> always has a margin box, and using the margin box
    allows for the dialog to be positioned offset from the box it is
    annotating, <var title="">B</var> sometimes does not have a margin
    box (e.g. if it is a table-cell), or has a margin box whose
    position may be not entirely clear (e.g. in the face of margin
    collapsing and 'clear' handling of in-flow blocks).</p>

    <p>In cases where <var title="">B</var> does not have a border box
    but its border box is used by the algorithm above, user agents
    must use its first box's content area instead. (This is in
    particular an issue with boxes in tables that have
    'border-collapse' set to 'collapse'.)</p>

   </li>

  </ul><p class="note">The trivial example of an element that does not have
  a rendered box is one whose 'display' property computes to 'none'.
  However, there are many other cases; e.g. table columns do not have
  boxes (their properties merely affect other boxes).</p>

  <p>When an element's 'position' property must compute to
  'absolute-anchored', the 'float', property does not apply and must
  compute to 'none', the 'display' property must compute to a value as
  described by the table in <a href="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">the
  section of CSS 2.1 describing the <cite>relationships between
  'display', 'position', and 'float'</cite></a>, and the element's box
  must be positioned using the rules for absolute positioning but with
  its static position set such that if the box is positioned in its
  static position, its anchor point is exactly aligned over the anchor
  point of the element to which it is <a href="#magically-aligned">magically
  aligned</a>.</p>

  <p class="note">The 'absolute-anchored' keyword is not a keyword
  that can be specified in CSS; the 'position' property can only
  compute to this value if the <code><a href="#the-dialog-element">dialog</a></code> element is
  positioned via the APIs described above.</p>

<!--TOPIC:DOM APIs-->
  <p>The <dfn id="dom-dialog-open" title="dom-dialog-open"><code>open</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code> content attribute.</p>
<!--TOPIC:HTML-->

  </div>


  <h5 id="anchor-points"><span class="secno">4.11.6.1 </span>Anchor points</h5>

  <p class="critical">This section will eventually be moved to a CSS
  specification; it is specified here only on an interim basis until
  an editor can be found to own this.</p>

  <table class="css-property"><caption>'anchor-point'</caption>
   <tr><th>Value:
    </th><td> none | &lt;position&gt;
   </td></tr><tr><th>Initial:
    </th><td> none
   </td></tr><tr><th>Applies to:
    </th><td> all elements
   </td></tr><tr><th>Inherited:
    </th><td> no
   </td></tr><tr><th>Percentages:
    </th><td> refer to width or height of box; see prose
   </td></tr><tr><th>Media:
    </th><td> visual
   </td></tr><tr><th>Computed value:
    </th><td> The specified value, but with any lengths replaced by their corresponding absolute length
   </td></tr><tr><th>Animatable:
    </th><td> no
   </td></tr><tr><th>Canonical order:
    </th><td> per grammar
  </td></tr></table><p>The 'anchor-point' property specifies a point to which dialog
  boxes are to be aligned.</p>

  <p>If the value is a &lt;position&gt;, the alignment point is the point
  given by the value, which must be interpreted relative to the
  element's first rendered box's margin box. Percentages must be
  calculated relative to the element's first rendered box's margin box
  (specifically, its width for the horizontal position and its height
  for the vertical position). <a href="#refsCSSVALUES">[CSSVALUES]</a>
  <a href="#refsCSS">[CSS]</a></p>

  <p>If the value is the keyword 'none', then no explicit alignment
  point is defined. The user agent will pick an alignment point
  automatically if necessary (as described in the definition of the
  <code title="dom-dialog-open"><a href="#dom-dialog-open">open()</a></code> method above).</p>


  <h3 id="links"><span class="secno">4.12 </span>Links</h3>

  <h4 id="introduction-3"><span class="secno">4.12.1 </span>Introduction</h4>

  <p>Links are a conceptual construct, created by <code><a href="the-a-element.html#the-a-element">a</a></code>,
  <code><a href="the-area-element.html#the-area-element">area</a></code>, and <code><a href="the-link-element.html#the-link-element">link</a></code> elements, that <a href="#represents" title="represents">represent</a> a connection between two
  resources, one of which is the current <code><a href="dom.html#document">Document</a></code>. There
  are two kinds of links in HTML:</p>

  <dl><dt><dfn id="external-resource-link" title="external resource link">Links to external
   resources</dfn></dt>

   <dd><p>These are links to resources that are to be used to augment
   the current document, generally automatically processed by the user
   agent.</p></dd>

   <dt><dfn id="hyperlink" title="hyperlink">Hyperlinks</dfn></dt>

   <dd><p>These are links to other resources that are generally
   exposed to the user by the user agent so that the user can cause
   the user agent to <a href="#navigate">navigate</a> to those resources, e.g. to
   visit them in a browser or download them.</p></dd>

  </dl><p>For <code><a href="the-link-element.html#the-link-element">link</a></code> elements with an <code title="attr-link-href"><a href="the-link-element.html#attr-link-href">href</a></code> attribute and a <code title="attr-link-rel"><a href="the-link-element.html#attr-link-rel">rel</a></code> attribute, links must be created
  for the keywords of the <code title="attr-link-rel"><a href="the-link-element.html#attr-link-rel">rel</a></code>
  attribute, as defined for those keywords in the <a href="#linkTypes">link types</a> section.</p>

  <p>Similarly, for <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements with
  an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute and a
  <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code> attribute, links must be
  created for the keywords of the <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code> attribute as defined for those
  keywords in the <a href="#linkTypes">link types</a> section. Unlike
  <code><a href="the-link-element.html#the-link-element">link</a></code> elements, however, <code><a href="the-a-element.html#the-a-element">a</a></code> and
  <code><a href="the-area-element.html#the-area-element">area</a></code> element with an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute that either do not
  have a <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code> attribute, or
  whose <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code> attribute has no
  keywords that are defined as specifying <a href="#hyperlink" title="hyperlink">hyperlinks</a>, must also create a
  <a href="#hyperlink">hyperlink</a>. This implied hyperlink has no special
  meaning (it has no <a href="#linkTypes">link type</a>) beyond
  linking the element's document to the resource given by the
  element's <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code>
  attribute.</p>

  <p>A <a href="#hyperlink">hyperlink</a> can have one or more <dfn id="hyperlink-annotation" title="hyperlink annotation">hyperlink annotations</dfn> that modify
  the processing semantics of that hyperlink.</p>


  <h4 id="links-created-by-a-and-area-elements"><span class="secno">4.12.2 </span>Links created by <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements</h4>

  <p>The <dfn id="attr-hyperlink-href" title="attr-hyperlink-href"><code>href</code></dfn>
  attribute on <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements must have
  a value that is a <a href="urls.html#valid-url-potentially-surrounded-by-spaces">valid URL potentially surrounded by
  spaces</a>.</p>

  <p class="note">The <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code>
  attribute on <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements is not
  required; when those elements do not have <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attributes they do not
  create hyperlinks.</p>

  <p>The <dfn id="attr-hyperlink-target" title="attr-hyperlink-target"><code>target</code></dfn>
  attribute, if present, must be a <a href="#valid-browsing-context-name-or-keyword">valid browsing context name
  or keyword</a>. It gives the name of the <a href="#browsing-context">browsing
  context</a> that will be used. <span class="impl">User agents use
  this name when <a href="#following-hyperlinks-0">following hyperlinks</a>.</span></p>

<!--PING-->

  <p>The <dfn id="attr-hyperlink-rel" title="attr-hyperlink-rel"><code>rel</code></dfn>
  attribute on <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements controls
  what kinds of links the elements create. The attribue's value must
  be a <a href="common-microsyntaxes.html#set-of-space-separated-tokens">set of space-separated tokens</a>. The <a href="#linkTypes">allowed keywords and their meanings</a> are
  defined below.</p>

  <p>The <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code> attribute has
  no default value. If the attribute is omitted or if none of the
  values in the attribute are recognized by the user agent, then the
  document has no particular relationship with the destination
  resource other than there being a hyperlink between the two.</p>

  <p>The <dfn id="attr-hyperlink-media" title="attr-hyperlink-media"><code>media</code></dfn>
  attribute describes for which media the target document was
  designed. It is purely advisory. The value must be a <a href="common-microsyntaxes.html#valid-media-query">valid
  media query</a>. The default, if the <code title="attr-hyperlink-media"><a href="#attr-hyperlink-media">media</a></code> attribute is omitted, is
  "<code title="">all</code>".</p>

  <p>The <dfn id="attr-hyperlink-hreflang" title="attr-hyperlink-hreflang"><code>hreflang</code></dfn>
  attribute on <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements that
  create <a href="#hyperlink" title="hyperlink">hyperlinks</a>, if present, gives
  the language of the linked resource. It is purely advisory. The
  value must be a valid BCP 47 language tag. <a href="#refsBCP47">[BCP47]</a> <span class="impl">User agents must
  not consider this attribute authoritative &#8212; upon fetching the
  resource, user agents must use only language information associated
  with the resource to determine its language, not metadata included
  in the link to the resource.</span></p>

  <p>The <dfn id="attr-hyperlink-type" title="attr-hyperlink-type"><code>type</code></dfn>
  attribute, if present, gives the <a href="infrastructure.html#mime-type">MIME type</a> of the
  linked resource. It is purely advisory. The value must be a
  <a href="infrastructure.html#valid-mime-type">valid MIME type</a>. <span class="impl">User agents must
  not consider the <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">type</a></code>
  attribute authoritative &#8212; upon fetching the resource, user
  agents must not use metadata included in the link to the resource to
  determine its type.</span></p>


  <div class="impl">

  <h4 id="following-hyperlinks"><span class="secno">4.12.3 </span>Following hyperlinks</h4>

  <!-- This whole section should be rewritten to use algorithmic style -->

  <p>When a user <dfn id="following-hyperlinks-0" title="following hyperlinks">follows a
  hyperlink</dfn> created by an element, the user agent must <a href="urls.html#resolve-a-url" title="resolve a url">resolve</a> the <a href="urls.html#url">URL</a> given by
  the <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute of that
  element, relative to that element, and if that is successful, must
  <a href="#navigate">navigate</a><!--DONAV hyperlink--> a <a href="#browsing-context">browsing
  context</a> to the resulting <a href="urls.html#absolute-url">absolute URL</a>. In the
  case of server-side image maps, that <a href="urls.html#absolute-url">absolute URL</a> must
  have its <var><a href="the-a-element.html#hyperlink-suffix">hyperlink suffix</a></var> appended to it before the
  navigation is started.</p>

  <p>If <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> the
  <a href="urls.html#url">URL</a> fails, the user agent may report the error to the
  user in a user-agent-specific manner, may
  <a href="#navigate">navigate</a><!--DONAV hyperlink--> to an error page to
  report the error, or may ignore the error and do nothing.</p>

  <p>If the user indicated a specific <a href="#browsing-context">browsing context</a>
  when following the hyperlink, or if the user agent is configured to
  follow hyperlinks by navigating a particular browsing context, then
  that must be the <a href="#browsing-context">browsing context</a> that is
  navigated.</p>

  <p>Otherwise, if the element is an <code><a href="the-a-element.html#the-a-element">a</a></code> or
  <code><a href="the-area-element.html#the-area-element">area</a></code> element that has a <code title="attr-hyperlink-target"><a href="#attr-hyperlink-target">target</a></code> attribute, then the
  <a href="#browsing-context">browsing context</a> that is navigated must be chosen by
  applying <a href="#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for choosing a browsing context given a
  browsing context name</a>, using the value of the <code title="attr-hyperlink-target"><a href="#attr-hyperlink-target">target</a></code> attribute as the
  browsing context name. If these rules result in the creation of a
  new <a href="#browsing-context">browsing context</a>, it must be navigated with
  <a href="#replacement-enabled">replacement enabled</a>.</p>



  <p>Otherwise, if the element is an <code><a href="the-a-element.html#the-a-element">a</a></code> or
  <code><a href="the-area-element.html#the-area-element">area</a></code> element with no <code title="attr-hyperlink-target"><a href="#attr-hyperlink-target">target</a></code> attribute, but the
  <code><a href="dom.html#document">Document</a></code> contains a <code><a href="the-base-element.html#the-base-element">base</a></code> element with a
  <code title="attr-base-target"><a href="the-base-element.html#attr-base-target">target</a></code> attribute, then the
  browsing context that is navigated must be chosen by applying
  <a href="#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for choosing a browsing context given a browsing
  context name</a>, using the value of the <code title="attr-base-target"><a href="the-base-element.html#attr-base-target">target</a></code> attribute of the first such
  <code><a href="the-base-element.html#the-base-element">base</a></code> element as the browsing context name. If these
  rules result in the creation of a new <a href="#browsing-context">browsing context</a>,
  it must be navigated with <a href="#replacement-enabled">replacement enabled</a>.</p>
  <!-- c.f. concept-fs-target -->

  <p>Otherwise, the browsing context that must be navigated is the
  same browsing context as the one which the element itself is in.</p>

  <p>The navigation must be done with the <a href="#browsing-context">browsing
  context</a> that contains the <code><a href="dom.html#document">Document</a></code> object with
  which the element in question is associated as the <a href="#source-browsing-context">source
  browsing context</a>.</p>

  </div>


<!--DOWNLOAD-->

  <h4 id="downloading-resources"><span class="secno">4.12.4 </span>Downloading resources</h4>

  <p>In some cases, resources are intended for later use rather than
  immediate viewing. To indicate that a resource is intended to be
  downloaded for use later, rather than immediately used, the <code title="attr-hyperlink-download">download</code> attribute can be
  specified on the <code><a href="the-a-element.html#the-a-element">a</a></code> or <code><a href="the-area-element.html#the-area-element">area</a></code> element that
  creates the <a href="#hyperlink">hyperlink</a> to that resource.</p>

  <p>The attribute can furthermore be given a value, to specify the
  filename that user agents are to use when storing the resource in a
  file system. This value can be overridden by the <code title="http-content-disposition">Content-Disposition</code> HTTP
  header's filename parameters. <a href="#refsRFC6266">[RFC6266]</a></p>

  <p>In cross-origin situations, the <code title="attr-hyperlink-download">download</code> attribute has to be
  combined with the <code title="http-content-disposition">Content-Disposition</code> HTTP
  header, specifically with the <code title="">attachment</code>
  disposition type, to avoid the user being warned of possibly
  nefarious activity. (This is to protect users from being made to
  download sensitive personal or confidential information without
  their full understanding.)</p>

  <div class="impl">

  <hr><p>When a user <dfn id="downloading-hyperlinks" title="downloading hyperlinks">downloads a
  hyperlink</dfn> created by an element, the user agent must run the
  following steps:</p>

  <ol><li><p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> the
   <a href="urls.html#url">URL</a> given by the <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute of that element,
   relative to that element.</p></li>

   <li><p>If <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> the
   <a href="urls.html#url">URL</a> fails, the user agent may report the error to the
   user in a user-agent-specific manner, may
   <a href="#navigate">navigate</a><!--DONAV download error--> to an error page
   to report the error, or may ignore the error and do nothing. In
   either case, the user agent must abort these steps.</p>

   </li><li><p>Otherwise, let <var title="">URL</var> be the resulting
   <a href="urls.html#absolute-url">absolute URL</a>.</p></li>

   <li><p>In the case of server-side image maps, append the
   <var><a href="the-a-element.html#hyperlink-suffix">hyperlink suffix</a></var> to <var title="">URL</var>.</p></li>

   <li><p>Return to whatever algorithm invoked these steps and continue
   these steps asynchronously.</p></li>

   <li><p><a href="urls.html#fetch">Fetch</a><!--FETCH--> <var title="">URL</var> and
   handle the resulting resource <a href="#as-a-download">as a download</a>.</p></li>
   <!-- http-origin privacy sensitive -->

  </ol><p>When a user agent is to handle a resource obtained from a
  <a href="urls.html#fetch">fetch</a> algorithm <dfn id="as-a-download">as a download</dfn>, it should
  provide the user with a way to save the resource for later use, if a
  resource is successfully obtained; or otherwise should report any
  problems downloading the file to the user.</p>

  <p>If the user agent needs a file name for a resource being handled
  <a href="#as-a-download">as a download</a>, it should select one using the following
  algorithm.</p>

  <p class="warning">This algorithm is intended to mitigate security
  dangers involved in downloading files from untrusted sites, and user
  agents are strongly recommended to follow it.</p> <!-- but it's
  optional, since it's not really an interoperability issue -->

  <ol><li><p>Let <var title="">filename</var> be the void value.</p></li>

   <li><p>If the resource has a <code title="http-content-disposition">Content-Disposition</code> header,      <!-- Content-Disposition: attachment; filename="" is always honoured, even cross-origin -->
   that header specifies the <code title="">attachment</code>
   disposition type, and the header includes filename information,
   then let <var title="">filename</var> have the value specified by
   the header, and jump to the step labeled "sanitize" below. <a href="#refsRFC6266">[RFC6266]</a></p></li>

   <li><p>Let <var title="">resource origin</var> be the
   <a href="#origin-0">origin</a> of the resource being downloaded.</p></li>

   <li><p>Let <var title="">interface origin</var> be the
   <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code> in which the <a href="#downloading-hyperlinks" title="downloading hyperlinks">download</a> or
   <a href="#navigate">navigate</a> action resulting in the download was
   initiated, if any.</p></li>

   <li><p>If there is no <var title="">interface origin</var>, then
   let <var title="">trusted operation</var> be true. Otherwise, let
   <var title="">trusted operation</var> be true if <var title="">resource origin</var> is the <a href="#same-origin">same origin</a> as
   <var title="">interface origin</var>, and false otherwise.</p></li>

   <li><p>If <var title="">trusted operation</var> is true and the          <!-- Content-Disposition: *; filename="" overrides download="" for same-origin -->
   resource has a <code title="http-content-disposition">Content-Disposition</code> header
   and that header includes filename information, then let <var title="">filename</var> have the value specified by the header, and
   jump to the step labeled "sanitize" below. <a href="#refsRFC6266">[RFC6266]</a></p></li>

   <li><p>If the download was not initiated from a
   <a href="#hyperlink">hyperlink</a> created by an <code><a href="the-a-element.html#the-a-element">a</a></code> or
   <code><a href="the-area-element.html#the-area-element">area</a></code> element, or if the element of the
   <a href="#hyperlink">hyperlink</a> from which it was initiated did not have a
   <code title="attr-hyperlink-download">download</code> attribute
   when the download was initiated, or if there was such an attribute
   but its value when the download was initiated was the empty string,
   then jump to the step labeled <i>no proposed filename</i>.</p></li>

   <li><p>Let <var title="">proposed filename</var> have the value of
   the <code title="attr-hyperlink-download">download</code> attribute
   of the element of the <a href="#hyperlink">hyperlink</a> that initiated the
   download at the time the download was initiated.</p></li>

   <li><p>If <var title="">trusted operation</var> is true, let <var title="">filename</var> have the value of <var title="">proposed
   filename</var>, and jump to the step labeled "sanitize"                  <!-- download="" works for all links when same-origin -->
   below.</p></li>                                                          <!-- it is not used cross-origin, though, even for explicit user gestures -->
                                                                            <!-- except: -->
   <li><p>If the resource has a <code title="http-content-disposition">Content-Disposition</code> header       <!-- Content-Disposition: attachment with no filename="" allows download="" cross-origin -->
   and that header specifies the <code title="">attachment</code>
   disposition type, let <var title="">filename</var> have the value
   of <var title="">proposed filename</var>, and jump to the step
   labeled "sanitize" below. <a href="#refsRFC6266">[RFC6266]</a></p></li>

   <li><p><i>No proposed filename</i>: If <var title="">trusted             <!-- fallback for same-origin resources or explicit downloads: use the resource's file name -->
   operation</var> is true, or if the user indicated a preference for
   having the resource in question downloaded, let <var title="">filename</var> have a value derived from the
   <a href="urls.html#url">URL</a> of the resource in a user-agent-defined manner,
   and jump to the step labeled "sanitize" below.</p></li>

   <li>

    <p>Act in a user-agent-defined manner to safeguard the user from a      <!-- no C-D: a header on cross-origin raises red flags -->
    potentially hostile cross-origin download. If the download is not
    to be aborted, then let <var title="">filename</var> be set to the
    user's preferred file name or to a file name selected by the user
    agent, and jump to the step labeled "sanitize" below.</p>

    <div class="warning">

     <p>If the algorithm reaches this step, then a download was begun
     from a different origin than the resource being downloaded, and
     the origin did not mark the file as suitable for downloading, and
     the download was not initiated by the user. This could be because
     a <code title="attr-hyperlink-download">download</code> attribute
     was used to trigger the download, or because the resource in
     question is not of a type that the user agent supports.</p>

     <p>This could be dangerous, because, for instance, a hostile
     server could be trying to get a user to unknowingly download
     private information and then re-upload it to the hostile server,
     by tricking the user into thinking the data is from the hostile
     server.</p>

     <p>Thus, it is in the user's interests that the user be somehow
     notified that the resource in question comes from quite a
     different source, and to prevent confusion, any suggested
     filename from the potentially hostile <var title="">interface
     origin</var> should be ignored.</p>

    </div>

   </li>

   <li><p><i>Sanitize</i>: Optionally, allow the user to influence <var title="">filename</var>. For example, a user agent could prompt the
   user for a file name, potentially providing the value of <var title="">filename</var> as determined above as a default
   value.</p></li>

   <li>

    <p>Adjust <var title="">filename</var> to be suitable for the
    local file system.</p>

    <p class="example">For example, this could involve removing
    characters that are not legal in file names, or trimming leading
    and trailing whitespace.</p>

   </li>

   <li><p>If the platform conventions do not in any way use <a href="#concept-extension" title="concept-extension">extensions</a> to determine the types
   of file on the file system, then return <var title="">filename</var> as the file name and abort these
   steps.</p></li>

   <li><p>Let <var title="">claimed type</var> be the type given by
   the resource's <a href="urls.html#content-type" title="Content-Type">Content-Type
   metadata</a>, if any is known. Let <var title="">named
   type</var> be the type given by <var title="">filename</var>'s
   <a href="#concept-extension" title="concept-extension">extension</a>, if any is known.
   For the purposes of this step, a <i>type</i> is a mapping of a
   <a href="infrastructure.html#mime-type">MIME type</a> to an <a href="#concept-extension" title="concept-extension">extension</a>.</p></li>

   <li><p>If <var title="">named type</var> is consistent with the
   user's preferences (e.g. because the value of <var title="">filename</var> was determined by prompting the user), then
   return <var title="">filename</var> as the file name and abort
   these steps.</p></li>

   <li><p>If <var title="">claimed type</var> and <var title="">named
   type</var> are the same type (i.e. the type given by the resource's
   <a href="urls.html#content-type" title="Content-Type">Content-Type metadata</a> is
   consistent with the type given by <var title="">filename</var>'s
   <a href="#concept-extension" title="concept-extension">extension</a>), then return <var title="">filename</var> as the file name and abort these
   steps.</p></li>

   <li>

    <p>If the <var title="">claimed type</var> is known, then alter
    <var title="">filename</var> to add an <a href="#concept-extension" title="concept-extension">extension</a> corresponding to <var title="">claimed type</var>.</p>

    <p>Otherwise, if <var title="">named type</var> is known to be
    potentially dangerous (e.g. it will be treated by the platform
    conventions as a native executable, shell script, HTML
    application, or executable-macro-capable document) then optionally
    alter <var title="">filename</var> to add a known-safe <a href="#concept-extension" title="concept-extension">extension</a> (e.g. "<code title="">.txt</code>").</p>

    <p class="note">This last step would make it impossible to
    download executables, which might not be desireable. As always,
    implementors are forced to balance security and usability in this
    matter.</p>

   </li>

   <li><p>Return <var title="">filename</var> as the file
   name.</p></li>

  </ol><p>For the purposes of this algorithm, a file <dfn id="concept-extension" title="concept-extension">extension</dfn> consists of any part of
  the file name that platform conventions dictate will be used for
  identifying the type of the file. For example, many operating
  systems use the part of the file name following the last dot ("<code title="">.</code>") in the file name to determine the type of the
  file, and from that the manner in which the file is to be opened or
  executed.</p>

  <p>User agents should ignore any directory or path information
  provided by the resource itself, its <a href="urls.html#url">URL</a>, and any <code title="attr-hyperlink-download">download</code> attribute, in
  deciding where to store the resulting file in the user's file
  system.</p>

  </div>


<!--PING-->

  <div class="impl">

  <h5 id="hyperlink-auditing"><span class="secno">4.12.4.1 </span><dfn>Hyperlink auditing</dfn></h5>

  <p>If a <a href="#hyperlink">hyperlink</a> created by an <code><a href="the-a-element.html#the-a-element">a</a></code> or
  <code><a href="the-area-element.html#the-area-element">area</a></code> element has a <code title="attr-hyperlink-ping">ping</code> attribute, and the user
  follows the hyperlink, and the value of the element's <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute can be <a href="urls.html#resolve-a-url" title="resolve a url">resolved</a>, relative to the element,
  without failure, then the user agent must take the <code title="attr-hyperlink-ping">ping</code> attribute's value, <a href="common-microsyntaxes.html#split-a-string-on-spaces" title="split a string on spaces">split that string on spaces</a>,
  <a href="urls.html#resolve-a-url" title="resolve a url">resolve</a> each resulting token
  relative to the element, and then each of the resulting <a href="urls.html#absolute-url" title="absolute URL">absolute URLs</a> should be <a href="urls.html#fetch" title="fetch">fetched</a><!--FETCH--> from the
  <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code> containing the
  <a href="#hyperlink">hyperlink</a> <!-- not http-origin privacy sensitive -->
  (as described below). (Tokens that fail to resolve are ignored.)
  This may be done in parallel with the primary request, and is
  independent of the result of that request.</p>

  <p>User agents should allow the user to adjust this behavior, for
  example in conjunction with a setting that disables the sending of
  HTTP <code title="http-referer">Referer</code> (sic) headers. Based
  on the user's preferences, UAs may either <a href="infrastructure.html#ignore">ignore</a> the
  <code title="attr-hyperlink-ping">ping</code> attribute altogether,
  or selectively ignore URLs in the list (e.g. ignoring any
  third-party URLs).</p>

  <p>For URLs that are HTTP URLs, the requests must be performed using
  the POST method, with an entity body with the <a href="infrastructure.html#mime-type">MIME type</a>
  <code>text/ping</code> consisting of the four-character string
  "<code title="">PING</code>". All relevant cookie and HTTP
  authentication headers must be included in the request. Which other
  headers are required depends on the URLs involved.</p>

  <dl class="switch"><dt>If both the <a href="dom.html#the-document's-address" title="the document's address">address</a>
   of the <code><a href="dom.html#document">Document</a></code> object containing the hyperlink being
   audited and the ping URL have the <a href="#same-origin">same origin</a></dt>

   <dd>The request must include a <code title="http-ping-from">Ping-From</code> HTTP header with, as its
   value, the <a href="dom.html#the-document's-address" title="the document's address">address</a> of
   the document containing the hyperlink, and a <code title="http-ping-to">Ping-To</code> HTTP header with, as its value,
   the address of the <a href="urls.html#absolute-url">absolute URL</a> of the target of the
   hyperlink. The request must not include a <code title="http-referer">Referer</code> (sic) HTTP header. <!-- because
   otherwise it would look like a trustable same-origin POST --></dd>

   <dt>Otherwise, if the origins are different, but the document
   containing the hyperlink being audited was not retrieved over an
   encrypted connection</dt>

   <dd>The request must include a <code title="http-referer">Referer</code> (sic) HTTP header with, as its
   value, the <a href="dom.html#the-document's-address" title="the document's address">address</a> of
   the document containing the hyperlink, a <code title="http-ping-from">Ping-From</code> HTTP header with the same
   value, and a <code title="http-ping-to">Ping-To</code> HTTP header
   with, as its value, the address of the target of the
   hyperlink.</dd>

   <dt>Otherwise, the origins are different and the document
   containing the hyperlink being audited was retrieved over an
   encrypted connection</dt>

   <dd>The request must include a <code title="http-ping-to">Ping-To</code> HTTP header with, as its value,
   the address of the target of the hyperlink. The request must
   neither include a <code title="http-referer">Referer</code> (sic)
   HTTP header nor include a <code title="http-ping-from">Ping-From</code> HTTP header.</dd>

  </dl><p class="note">To save bandwidth, implementors might also wish to
  consider omitting optional headers such as <code>Accept</code> from
  these requests.</p>

  <p>User agents must, unless otherwise specified by the user, honor
  the HTTP headers (including, in particular, redirects and HTTP
  cookie headers), but must ignore any entity bodies returned in the
  responses. User agents may close the connection prematurely once
  they start receiving an entity body. <a href="#refsCOOKIES">[COOKIES]</a></p>

  <p>When the <code title="attr-hyperlink-ping">ping</code> attribute is
  present, user agents should clearly indicate to the user that
  following the hyperlink will also cause secondary requests to be
  sent in the background, possibly including listing the actual target
  URLs.</p>

  <p class="example">For example, a visual user agent could include
  the hostnames of the target ping URLs along with the hyperlink's
  actual URL in a status bar or tooltip.</p>

  </div>

  <div class="note">

   <p>The <code title="attr-hyperlink-ping">ping</code> attribute is redundant
   with pre-existing technologies like HTTP redirects and JavaScript
   in allowing Web pages to track which off-site links are most
   popular or allowing advertisers to track click-through rates.</p>

   <p>However, the <code title="attr-hyperlink-ping">ping</code> attribute
   provides these advantages to the user over those alternatives:</p>

   <ul><li>It allows the user to see the final target URL
    unobscured.</li>

    <li>It allows the UA to inform the user about the out-of-band
    notifications.</li>

    <li>It allows the user to disable the notifications without losing
    the underlying link functionality.</li>

    <li>It allows the UA to optimize the use of available network
    bandwidth so that the target page loads faster.</li>

   </ul><p>Thus, while it is possible to track users without this feature,
   authors are encouraged to use the <code title="attr-hyperlink-ping">ping</code> attribute so that the user
   agent can make the user experience more transparent.</p>

  </div>

  <!-- resolving ping urls happens at audit time, so base URL changes
  affect the values of ping attributes -->



  <h4 id="linkTypes"><span class="secno">4.12.5 </span>Link types</h4>

  <p>The following table summarizes the link types that are defined by
  this specification. This table is non-normative; the actual
  definitions for the link types are given in the next few
  sections.</p>

  <p>In this section, the term <i>referenced document</i> refers to
  the resource identified by the element representing the link, and
  the term <i>current document</i> refers to the resource within
  which the element representing the link finds itself.</p>

  <div class="impl">

  <p>To determine which link types apply to a <code><a href="the-link-element.html#the-link-element">link</a></code>,
  <code><a href="the-a-element.html#the-a-element">a</a></code>, or <code><a href="the-area-element.html#the-area-element">area</a></code> element, the element's <code title="">rel</code> attribute must be <a href="common-microsyntaxes.html#split-a-string-on-spaces" title="split a string on
  spaces">split on spaces</a>. The resulting tokens are the link
  types that apply to that element.</p>

  </div>

  <p>Except where otherwise specified, a keyword must not be specified
  more than once per <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code>
  attribute.</p>

  <p>Link types are always <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a><span class="impl">, and must be compared as such</span>.</p>

  <p class="example">Thus, <code title="">rel="next"</code> is the
  same as <code title="">rel="NEXT"</code>.</p>

  <table><thead><tr><th rowspan="2">Link type</th>
     <th colspan="2">Effect on...</th>
     <th rowspan="2">Brief description</th>
    </tr><tr><th><code><a href="the-link-element.html#the-link-element">link</a></code></th>
     <th><code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code></th>
    </tr></thead><tbody><tr><td><code title="rel-alternate"><a href="#rel-alternate">alternate</a></code></td> <!-- second most used <link rel> value -->
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Gives alternate representations of the current document.</td>
    </tr><tr><td><code title="rel-author"><a href="#link-type-author">author</a></code></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Gives a link to the author of the current document or article.</td>
    </tr><tr><td><code title="rel-bookmark"><a href="#link-type-bookmark">bookmark</a></code></td> <!-- fourth most used <a rel> value -->
     <td><em>not allowed</em></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Gives the permalink for the nearest ancestor section.</td>
    </tr><!-- (commented out on the assumption that rel=contact is really XFN)
    <tr>
     <td><code title="rel-contact">contact</code></td> <!- 8th most used <a rel> value ->
     <td><span>Hyperlink</span></td>
     <td><span>Hyperlink</span></td>
     <td>Gives a link to contact information for the current document.</td>
    </tr>
--><!-- fifth and sixth most used <a rel> value (sixth is "external nofollow"), but moved to the wiki because of http://www.w3.org/Bugs/Public/show_bug.cgi?id=11181 --><!--!--><!--
    <tr>
     <td><code title="rel-external">external</code></td>
     <td><em>not allowed</em></td>
     <td><span>Hyperlink</span></td>
     <td>Indicates that the referenced document is not part of the same site as the current document.</td>
    </tr>
--><tr><td><code title="rel-help"><a href="#link-type-help">help</a></code></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Provides a link to context-sensitive help.</td>
    </tr><tr><td><code title="rel-icon"><a href="#rel-icon">icon</a></code></td> <!-- link rel="shortcut icon" and its ilk are the fourth, sixth, and ninth most used values -->
     <td><a href="#external-resource-link" title="external resource link">External Resource</a></td>
     <td><em>not allowed</em></td>
     <td>Imports an icon to represent the current document.</td>
    </tr><tr><td><code title="rel-license"><a href="#link-type-license">license</a></code></td> <!-- seventh most used <a rel> value -->
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Indicates that the main content of the current document is covered by the copyright license described by the referenced document.</td>
    </tr><tr><td><code title="rel-next"><a href="#link-type-next">next</a></code></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Indicates that the current document is a part of a series, and that the next document in the series is the referenced document.</td>
    </tr><tr><td><code title="rel-nofollow"><a href="#link-type-nofollow">nofollow</a></code></td> <!-- most used <a rel> value (and sixth most used is "external nofollow") -->
     <td><em>not allowed</em></td>
     <td><a href="#hyperlink-annotation" title="hyperlink annotation">Annotation</a></td>
     <td>Indicates that the current document's original author or publisher does not endorse the referenced document.</td>
    </tr><tr><td><code title="rel-noreferrer"><a href="#link-type-noreferrer">noreferrer</a></code></td>
     <td><em>not allowed</em></td>
     <td><a href="#hyperlink-annotation" title="hyperlink annotation">Annotation</a></td>
     <td>Requires that the user agent not send an HTTP <code title="http-referer">Referer</code> (sic) header if the user follows the hyperlink.</td>
    </tr><!-- used quite a bit; removed for http://www.w3.org/Bugs/Public/show_bug.cgi?id=12224 --><!-- now registered in http://microformats.org/wiki/existing-rel-values#formats --><!--
    <tr>
     <td><code title="rel-pingback">pingback</code></td>
     <td><span title="external resource link">External Resource</span></td>
     <td><em>not allowed</em></td>
     <td>Gives the address of the pingback server that handles pingbacks to the current document.</td>
    </tr>
--><tr><td><code title="rel-prefetch"><a href="#link-type-prefetch">prefetch</a></code></td>
     <td><a href="#external-resource-link" title="external resource link">External Resource</a></td>
     <td><a href="#external-resource-link" title="external resource link">External Resource</a></td>
     <td>Specifies that the target resource should be preemptively cached.</td>
    </tr><tr><td><code title="rel-prev"><a href="#link-type-prev">prev</a></code></td> <!-- prev is used more than previous -->
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Indicates that the current document is a part of a series, and that the previous document in the series is the referenced document.</td>
    </tr><tr><td><code title="rel-search"><a href="#link-type-search">search</a></code></td> <!-- used quite a bit -->
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Gives a link to a resource that can be used to search through the current document and its related pages.</td>
    </tr><!-- used quite a bit, but dropped due to wg decision in http://www.w3.org/Bugs/Public/show_bug.cgi?id=11183 --><!--!--><!--
    <tr>
     <td><code title="rel-sidebar">sidebar</code></td>
     <td><span>Hyperlink</span></td>
     <td><span>Hyperlink</span></td>
     <td>Specifies that the referenced document, if retrieved, is intended to be shown in the browser's sidebar (if it has one).</td>
    </tr>
--><tr><td><code title="rel-stylesheet"><a href="#link-type-stylesheet">stylesheet</a></code></td> <!-- most commonly used <link rel> value, variants came in 7th, 8th, 12th, 17th... -->
     <td><a href="#external-resource-link" title="external resource link">External Resource</a></td>
     <td><em>not allowed</em></td>
     <td>Imports a stylesheet.</td>
    </tr><tr><td><code title="rel-tag"><a href="#link-type-tag">tag</a></code></td> <!-- second and third most used <a rel> value (third is technically "category tag"). -->
     <td><em>not allowed</em></td>
     <td><a href="#hyperlink">Hyperlink</a></td>
     <td>Gives a tag (identified by the given address) that applies to the current document.</td>
    </tr></tbody></table><div class="impl">

  <p>Some of the types described below list synonyms for these
  values. These <!--<span class="impl">-->are to be handled as
  specified by user agents, but<!--</span>--> must not be used in
  documents.</p>

  </div>

  <!-- v2 ideas:
   * rel="related" // see also
   * http://microformats.org/wiki/rel-enclosure
  -->


  <h5 id="rel-alternate"><span class="secno">4.12.5.1 </span>Link type "<dfn title="rel-alternate"><code>alternate</code></dfn>"</h5>

  <p>The <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword may be
  used with <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code>
  elements.</p>

  <p>The meaning of this keyword depends on the values of the other
  attributes.</p>

  <dl class="switch"><dt>If the element is a <code><a href="the-link-element.html#the-link-element">link</a></code> element and the <code title="attr-link-rel"><a href="the-link-element.html#attr-link-rel">rel</a></code> attribute also contains the
   keyword <code title="rel-stylesheet"><a href="#link-type-stylesheet">stylesheet</a></code></dt>

   <dd>

    <p>The <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword
    modifies the meaning of the <code title="rel-stylesheet"><a href="#link-type-stylesheet">stylesheet</a></code> keyword in the way
    described for that keyword. The <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword does not create a
    link of its own.</p>

   </dd>


   <dt>The <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword is
   used with the <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">type</a></code>
   attribute set to the value <code title="">application/rss+xml</code> or the value <code title="">application/atom+xml</code></dt>

   <dd>

    <p>The keyword creates a <a href="#hyperlink">hyperlink</a> referencing a
    syndication feed (though not necessarily syndicating exactly the
    same content as the current page).</p>

    <div class="impl">

    <p>The first <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, or <code><a href="the-area-element.html#the-area-element">area</a></code>
    element in the document (in tree order) with the <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword used with the <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">type</a></code> attribute set to the value
    <code title="">application/rss+xml</code> or the value <code title="">application/atom+xml</code> must be treated as the default
    syndication feed for the purposes of feed autodiscovery.</p>

    <div class="example">
     <p>The following <code><a href="the-link-element.html#the-link-element">link</a></code> element gives the syndication
     feed for the current page:</p>
     <pre>&lt;link rel="alternate" type="application/atom+xml" href="data.xml"&gt;</pre>
     <p>The following extract offers various different syndication
     feeds:</p>
     <pre>&lt;p&gt;You can access the planets database using Atom feeds:&lt;/p&gt;
&lt;ul&gt;
 &lt;li&gt;&lt;a href="recently-visited-planets.xml" rel="alternate" type="application/atom+xml"&gt;Recently Visited Planets&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="known-bad-planets.xml" rel="alternate" type="application/atom+xml"&gt;Known Bad Planets&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="unexplored-planets.xml" rel="alternate" type="application/atom+xml"&gt;Unexplored Planets&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</pre>
    </div>

    </div>

   </dd>


   <dt>Otherwise</dt>

   <dd>

    <p>The keyword creates a <a href="#hyperlink">hyperlink</a> referencing an
    alternate representation of the current document.</p>

    <p>The nature of the referenced document is given by the <code title="attr-hyperlink-media"><a href="#attr-hyperlink-media">media</a></code>, <code title="attr-hyperlink-hreflang"><a href="#attr-hyperlink-hreflang">hreflang</a></code>, and <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">type</a></code> attributes.</p>

    <p>If the <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword is
    used with the <code title="attr-hyperlink-media"><a href="#attr-hyperlink-media">media</a></code>
    attribute, it indicates that the referenced document is intended for
    use with the media specified.</p>

    <p>If the <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword is
    used with the <code title="attr-hyperlink-hreflang"><a href="#attr-hyperlink-hreflang">hreflang</a></code>
    attribute, and that attribute's value differs from the <a href="infrastructure.html#root-element">root
    element</a>'s <a href="global-attributes.html#language">language</a>, it indicates that the
    referenced document is a translation.</p>

    <p>If the <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword is
    used with the <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">type</a></code>
    attribute, it indicates that the referenced document is a
    reformulation of the current document in the specified format.</p>

    <p>The <code title="attr-hyperlink-media"><a href="#attr-hyperlink-media">media</a></code>, <code title="attr-hyperlink-hreflang"><a href="#attr-hyperlink-hreflang">hreflang</a></code>, and <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">type</a></code> attributes can be combined
    when specified with the <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code>
    keyword.</p>

    <div class="example">

     <p>For example, the following link is a French translation that
     uses the PDF format:</p>

     <pre>&lt;link rel=alternate type=application/pdf hreflang=fr href=manual-fr&gt;</pre>

    </div>

    <p>This relationship is transitive &#8212; that is, if a document
    links to two other documents with the link type "<code title="rel-alternate"><a href="#rel-alternate">alternate</a></code>", then, in addition to
    implying that those documents are alternative representations of
    the first document, it is also implying that those two documents
    are alternative representations of each other.</p>

   </dd>

  </dl><h5 id="link-type-author"><span class="secno">4.12.5.2 </span>Link type "<dfn title="rel-author"><code>author</code></dfn>"</h5>

  <p>The <code title="rel-author"><a href="#link-type-author">author</a></code> keyword may be
  used with <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code>
  elements. This keyword creates a <a href="#hyperlink">hyperlink</a>.</p>

  <p>For <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements, the <code title="rel-author"><a href="#link-type-author">author</a></code> keyword indicates that the
  referenced document provides further information about the author of
  the nearest <code><a href="the-article-element.html#the-article-element">article</a></code> element ancestor of the element
  defining the hyperlink, if there is one, or of the page as a whole,
  otherwise.</p>

  <p>For <code><a href="the-link-element.html#the-link-element">link</a></code> elements, the <code title="rel-author"><a href="#link-type-author">author</a></code> keyword indicates that the
  referenced document provides further information about the author
  for the page as a whole.</p>

  <p class="note">The "referenced document" can be, and often is, a
  <code title="">mailto:</code> URL giving the e-mail address of the
  author. <a href="#refsMAILTO">[MAILTO]</a></p>

  <div class="impl">

  <p><strong>Synonyms</strong>: For historical reasons, user agents
  must also treat <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and
  <code><a href="the-area-element.html#the-area-element">area</a></code> elements that have a <code title="">rev</code>
  attribute with the value "<code>made</code>" as having the <code title="rel-author"><a href="#link-type-author">author</a></code> keyword specified as a link
  relationship.</p>

  </div>


  <h5 id="link-type-bookmark"><span class="secno">4.12.5.3 </span>Link type "<dfn title="rel-bookmark"><code>bookmark</code></dfn>"</h5>

  <p>The <code title="rel-bookmark"><a href="#link-type-bookmark">bookmark</a></code> keyword may be
  used with <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements. This
  keyword creates a <a href="#hyperlink">hyperlink</a>.</p>

  <p>The <code title="rel-bookmark"><a href="#link-type-bookmark">bookmark</a></code> keyword gives a
  permalink for the nearest ancestor <code><a href="the-article-element.html#the-article-element">article</a></code> element of
  the linking element in question, or of <a href="headings-and-sections.html#associatedSection">the section the linking element is most
  closely associated with</a>, if there are no ancestor
  <code><a href="the-article-element.html#the-article-element">article</a></code> elements.</p>

  <div class="example">
   <p>The following snippet has three permalinks. A user agent could
   determine which permalink applies to which part of the spec by
   looking at where the permalinks are given.</p>
   <pre> ...
 &lt;body&gt;
  &lt;h1&gt;Example of permalinks&lt;/h1&gt;
  &lt;div id="a"&gt;
   &lt;h2&gt;First example&lt;/h2&gt;
   &lt;p&gt;&lt;a href="a.html" rel="bookmark"&gt;This&lt;/a&gt; permalink applies to
   only the content from the first H2 to the second H2. The DIV isn't
   exactly that section, but it roughly corresponds to it.&lt;/p&gt;
  &lt;/div&gt;
  &lt;h2&gt;Second example&lt;/h2&gt;
  &lt;article id="b"&gt;
   &lt;p&gt;&lt;a href="b.html" rel="bookmark"&gt;This&lt;/a&gt; permalink applies to
   the outer ARTICLE element (which could be, e.g., a blog post).&lt;/p&gt;
   &lt;article id="c"&gt;
    &lt;p&gt;&lt;a href="c.html" rel="bookmark"&gt;This&lt;/a&gt; permalink applies to
    the inner ARTICLE element (which could be, e.g., a blog comment).&lt;/p&gt;
   &lt;/article&gt;
  &lt;/article&gt;
 &lt;/body&gt;
 ...</pre>
  </div>

<!-- (commented out on the assumption that rel=contact is really XFN)
  <h5>Link type "<dfn title="rel-contact"><code>contact</code></dfn>"</h5>

  <p>The <code title="rel-contact">contact</code> keyword may be used
  with <code>link</code>, <code>a</code>, and <code>area</code>
  elements. This keyword creates a <span>hyperlink</span>.</p>

  <p>For <code>a</code> and <code>area</code> elements, the <code
  title="rel-contact">contact</code> keyword indicates that the
  referenced document provides further contact information for the
  author of the nearest <code>article</code> element ancestor of the
  element defining the hyperlink, if there is one, or of the page as a
  whole, otherwise.</p>

  <div class="impl">

  <p>User agents must treat any hyperlink in an <code>address</code>
  element as having the <code title="rel-contact">contact</code> link
  type specified.</p>

  </div>

  <p>For <code>link</code> elements, the <code
  title="rel-contact">contact</code> keyword indicates that the
  referenced document provides further contact information for the
  page as a whole.</p>
-->

<!-- fifth and sixth most used <a rel> value (sixth is "external nofollow"), but moved to the wiki because of http://www.w3.org/Bugs/Public/show_bug.cgi?id=11181 --> <!--!-->
<!--
  <h5>Link type "<dfn title="rel-external"><code>external</code></dfn>"</h5>

  <p>The <code title="rel-external">external</code> keyword may be
  used with <code>a</code> and <code>area</code> elements. This
  keyword creates a <span>hyperlink</span>.</p>

  <p>The <code title="rel-external">external</code> keyword indicates
  that the link is leading to a document that is not part of the site
  that the current document forms a part of.</p>
-->

  <h5 id="link-type-help"><span class="secno">4.12.5.4 </span>Link type "<dfn title="rel-help"><code>help</code></dfn>"</h5>

  <p>The <code title="rel-help"><a href="#link-type-help">help</a></code> keyword may be used with
  <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code>
  elements. This keyword creates a <a href="#hyperlink">hyperlink</a>.</p>

  <p>For <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements, the <code title="rel-help"><a href="#link-type-help">help</a></code> keyword indicates that the referenced
  document provides further help information for the parent of the
  element defining the hyperlink, and its children.</p>

  <div class="example">

   <p>In the following example, the form control has associated
   context-sensitive help. The user agent could use this information,
   for example, displaying the referenced document if the user presses
   the "Help" or "F1" key.</p>

   <pre> &lt;p&gt;&lt;label&gt; Topic: &lt;input name=topic&gt; &lt;a href="help/topic.html" rel="help"&gt;(Help)&lt;/a&gt;&lt;/label&gt;&lt;/p&gt;</pre>

  </div>

  <p>For <code><a href="the-link-element.html#the-link-element">link</a></code> elements, the <code title="rel-help"><a href="#link-type-help">help</a></code> keyword indicates that the referenced
  document provides help for the page as a whole.</p>

  <p>For <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements, on some
  browsers, the <code title="rel-help"><a href="#link-type-help">help</a></code> keyword causes the
  link to use a different cursor.</p>


  <h5 id="rel-icon"><span class="secno">4.12.5.5 </span>Link type "<dfn title="rel-icon"><code>icon</code></dfn>"</h5>

  <p>The <code title="rel-icon"><a href="#rel-icon">icon</a></code> keyword may be used with
  <code><a href="the-link-element.html#the-link-element">link</a></code> elements. This keyword creates an <a href="#external-resource-link" title="external resource link">external resource link</a>.</p>

  <div class="impl">

  <p>The specified resource is an icon representing the page or site,
  and should be used by the user agent when representing the page in
  the user interface.</p>

  </div>

  <p>Icons could be auditory icons, visual icons, or other kinds of
  icons. <span class="impl">If multiple icons are provided, the user
  agent must select the most appropriate icon according to the <code title="attr-link-type"><a href="the-link-element.html#attr-link-type">type</a></code>, <code title="attr-link-media"><a href="the-link-element.html#attr-link-media">media</a></code>, and <code title="attr-link-sizes"><a href="#attr-link-sizes">sizes</a></code> attributes. If there are
  multiple equally appropriate icons, user agents must use the last
  one declared in <a href="infrastructure.html#tree-order">tree order</a> at the time that the user
  agent collected the list of icons. If the user agent tries to use an
  icon but that icon is determined, upon closer examination, to in
  fact be inappropriate (e.g. because it uses an unsupported format),
  then the user agent must try the next-most-appropriate icon as
  determined by the attributes.</span></p>

  <div class="impl">

  <p class="note">User agents are not required to update icons when
  the list of icons changes, but are encouraged to do so.</p>

  <p>There is no default type for resources given by the <code title="rel-icon"><a href="#rel-icon">icon</a></code> keyword. However, for the purposes of
  <a href="the-link-element.html#concept-link-type-sniffing">determining the type of the
  resource</a>, user agents must expect the resource to be an image.</p>

  </div>

  <p>The <dfn id="attr-link-sizes" title="attr-link-sizes"><code>sizes</code></dfn>
  attribute gives the sizes of icons for visual media. Its value, if
  present, is merely advisory. User agents may use the value to decide
  which icon(s) to use if multiple icons are available.</p>

  <p>If specified, the attribute must have a value that is an
  <a href="common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens">unordered set of unique space-separated tokens</a> which
  are <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>. Each value must be either
  an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="attr-link-sizes-any"><a href="#attr-link-sizes-any">any</a></code>", or a value that consists of
  two <a href="common-microsyntaxes.html#valid-non-negative-integer" title="valid non-negative integer">valid non-negative
  integers</a> that do not have a leading "0" (U+0030)
  character and that are separated by a single U+0078 LATIN SMALL
  LETTER X or U+0058 LATIN CAPITAL LETTER X character.</p>

  <p>The keywords represent icon sizes.</p>

  <div class="impl">

  <p>To parse and process the attribute's value, the user agent must
  first <a href="common-microsyntaxes.html#split-a-string-on-spaces" title="split a string on spaces">split the attribute's
  value on spaces</a>, and must then parse each resulting keyword
  to determine what it represents.</p>

  </div>

  <p>The <dfn id="attr-link-sizes-any" title="attr-link-sizes-any"><code>any</code></dfn> keyword
  represents that the resource contains a scalable icon, e.g. as
  provided by an SVG image.</p>

  <div class="impl">

  <p>Other keywords must be further parsed as follows to determine
  what they represent:</p>

  <ul><li><p>If the keyword doesn't contain exactly one U+0078 LATIN
   SMALL LETTER X or U+0058 LATIN CAPITAL LETTER X character, then
   this keyword doesn't represent anything. Abort these steps for that
   keyword.</p></li>

   <li><p>Let <var title="">width string</var> be the string before
   the "<code title="">x</code>" or "<code title="">X</code>".</p></li>

   <li><p>Let <var title="">height string</var> be the string after
   the "<code title="">x</code>" or "<code title="">X</code>".</p></li>

   <li><p>If either <var title="">width string</var> or <var title="">height string</var> start with a "0" (U+0030)
   character or contain any characters other than characters in the
   range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, then this
   keyword doesn't represent anything. Abort these steps for that
   keyword.</p></li>

   <li><p>Apply the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative
   integers</a> to <var title="">width string</var> to obtain <var title="">width</var>.</p></li>

   <li><p>Apply the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative
   integers</a> to <var title="">height string</var> to obtain <var title="">height</var>.</p></li>

   <li><p>The keyword represents that the resource contains a bitmap
   icon with a width of <var title="">width</var> device pixels and a
   height of <var title="">height</var> device pixels.</p></li>

  </ul></div>

  <p>The keywords specified on the <code title="attr-link-sizes"><a href="#attr-link-sizes">sizes</a></code> attribute must not represent
  icon sizes that are not actually available in the linked
  resource.</p>

  <div class="impl">

  <p>In the absence of a <code><a href="the-link-element.html#the-link-element">link</a></code> with the <code title="rel-icon"><a href="#rel-icon">icon</a></code> keyword, for <code><a href="dom.html#document">Document</a></code>s
  obtained over HTTP or HTTPS, user agents may instead attempt to
  <a href="urls.html#fetch">fetch</a><!--FETCH--> and use an icon with the
  <a href="urls.html#absolute-url">absolute URL</a> obtained by resolving the <a href="urls.html#url">URL</a>
  "<code title="">/favicon.ico</code>" against <a href="dom.html#the-document's-address">the document's
  address</a>, as if the page had declared that icon using the
  <code title="rel-icon"><a href="#rel-icon">icon</a></code> keyword.</p>

  </div>

  <div class="example">

   <p>The following snippet shows the top part of an application with
   several icons.</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;lsForums &#8212; Inbox&lt;/title&gt;
  &lt;link rel=icon href=favicon.png sizes="16x16" type="image/png"&gt;
  &lt;link rel=icon href=windows.ico sizes="32x32 48x48" type="image/vnd.microsoft.icon"&gt;
  &lt;link rel=icon href=mac.icns sizes="128x128 512x512 8192x8192 32768x32768"&gt;
  &lt;link rel=icon href=iphone.png sizes="57x57" type="image/png"&gt;
  &lt;link rel=icon href=gnome.svg sizes="any" type="image/svg+xml"&gt;
  &lt;link rel=stylesheet href=lsforums.css&gt;
  &lt;script src=lsforums.js&gt;&lt;/script&gt;
  &lt;meta name=application-name content="lsForums"&gt;
 &lt;/head&gt;
 &lt;body&gt;
  ...</pre>

  </div>

  <p>For historical reasons, the <code title="rel-icon"><a href="#rel-icon">icon</a></code>
  keyword may be preceded by the keyword "<code title="">shortcut</code>". If the "<code title="">shortcut</code>"
  keyword is present, it must be come immediately before the <code title="rel-icon"><a href="#rel-icon">icon</a></code> keyword and the two keywords must be
  separated by only a single U+0020 SPACE character.</p>


  <h5 id="link-type-license"><span class="secno">4.12.5.6 </span>Link type "<dfn title="rel-license"><code>license</code></dfn>"</h5>

  <p>The <code title="rel-license"><a href="#link-type-license">license</a></code> keyword may be used
  with <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code>
  elements. This keyword creates a <a href="#hyperlink">hyperlink</a>.</p>

  <p>The <code title="rel-license"><a href="#link-type-license">license</a></code> keyword indicates
  that the referenced document provides the copyright license terms
  under which the main content of the current document is
  provided.</p>

  <p>This specification does not specify how to distinguish between
  the main content of a document and content that is not deemed to be
  part of that main content. The distinction should be made clear to
  the user.</p>

  <div class="example">

   <p>Consider a photo sharing site. A page on that site might
   describe and show a photograph, and the page might be marked up as
   follows:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Exampl Pictures: Kissat&lt;/title&gt;
  &lt;link rel="stylesheet" href="/style/default"&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;Kissat&lt;/h1&gt;
  &lt;nav&gt;
   &lt;a href="../"&gt;Return to photo index&lt;/a&gt;
  &lt;/nav&gt;
  &lt;figure&gt;
   &lt;img src="/pix/39627052_fd8dcd98b5.jpg"&gt;
   &lt;figcaption&gt;Kissat&lt;/figcaption&gt;
  &lt;/figure&gt;
  &lt;p&gt;One of them has six toes!&lt;/p&gt;
  &lt;p&gt;&lt;small&gt;&lt;a rel="license" href="http://www.opensource.org/licenses/mit-license.php"&gt;MIT Licensed&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;
  &lt;footer&gt;
   &lt;a href="/"&gt;Home&lt;/a&gt; | &lt;a href="../"&gt;Photo index&lt;/a&gt;
   &lt;p&gt;&lt;small&gt;&#169; copyright 2009 Exampl Pictures. All Rights Reserved.&lt;/small&gt;&lt;/p&gt;
  &lt;/footer&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

   <p>In this case the <code title="rel-license"><a href="#link-type-license">license</a></code>
   applies to just the photo (the main content of the document), not
   the whole document. In particular not the design of the page
   itself, which is covered by the copyright given at the bottom of
   the document. This could be made clearer in the styling
   (e.g. making the license link prominently positioned near the
   photograph, while having the page copyright in light small text at
   the foot of the page.</p>

  </div>

  <div class="impl">

  <p><strong>Synonyms</strong>: For historical reasons, user agents
  must also treat the keyword "<code title="">copyright</code>" like
  the <code title="rel-license"><a href="#link-type-license">license</a></code> keyword.</p>

  </div>


  <h5 id="link-type-nofollow"><span class="secno">4.12.5.7 </span>Link type "<dfn title="rel-nofollow"><code>nofollow</code></dfn>"</h5>

  <p>The <code title="rel-nofollow"><a href="#link-type-nofollow">nofollow</a></code> keyword may be
  used with <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements. This
  keyword does not create a <a href="#hyperlink">hyperlink</a>, but <a href="#hyperlink-annotation" title="hyperlink annotation">annotates</a> any other hyperlinks
  created by the element (the implied hyperlink, if no other keywords
  create one).</p>

  <p>The <code title="rel-nofollow"><a href="#link-type-nofollow">nofollow</a></code> keyword indicates
  that the link is not endorsed by the original author or publisher of
  the page, or that the link to the referenced document was included
  primarily because of a commercial relationship between people
  affiliated with the two pages.</p>


  <h5 id="link-type-noreferrer"><span class="secno">4.12.5.8 </span>Link type "<dfn title="rel-noreferrer"><code>noreferrer</code></dfn>"</h5>

  <p>The <code title="rel-noreferrer"><a href="#link-type-noreferrer">noreferrer</a></code> keyword may be
  used with <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements. This
  keyword does not create a <a href="#hyperlink">hyperlink</a>, but <a href="#hyperlink-annotation" title="hyperlink annotation">annotates</a> any other hyperlinks
  created by the element (the implied hyperlink, if no other keywords
  create one).</p>

  <p>It indicates that no referrer information is to be leaked when
  following the link.</p>

  <div class="impl">

  <p>If a user agent follows a link defined by an <code><a href="the-a-element.html#the-a-element">a</a></code> or
  <code><a href="the-area-element.html#the-area-element">area</a></code> element that has the <code title="rel-noreferrer"><a href="#link-type-noreferrer">noreferrer</a></code> keyword, the user agent
  must not include a <code title="http-referer">Referer</code> (sic)
  HTTP header (<a href="urls.html#concept-http-equivalent-headers" title="concept-http-equivalent-headers">or
  equivalent</a> for other protocols) in the request.</p>

  <p>This keyword also <a href="#noopener">causes the <code title="dom-opener">opener</code> attribute to remain null</a> if the
  hyperlink creates a new <a href="#browsing-context">browsing context</a>.</p>

  </div>

  <!-- v2: Would be nice to apply this to other elements too,
  e.g. letting <img> or CSS or <video> hide the referrer -->

<!-- used quite a bit; removed for http://www.w3.org/Bugs/Public/show_bug.cgi?id=12224 -->
<!-- now registered in http://microformats.org/wiki/existing-rel-values#formats -->
<!--
  <h5>Link type "<dfn title="rel-pingback"><code>pingback</code></dfn>"</h5>

  <p>The <code title="rel-pingback">pingback</code> keyword may be
  used with <code>link</code> elements. This keyword creates an <span
  title="external resource link">external resource link</span>.</p>

  <p>For the semantics of the <code
  title="rel-pingback">pingback</code> keyword, see the Pingback 1.0
  specification. <a href="#refsPINGBACK">[PINGBACK]</a></p>
-->

  <h5 id="link-type-prefetch"><span class="secno">4.12.5.9 </span>Link type "<dfn title="rel-prefetch"><code>prefetch</code></dfn>"</h5>

  <p>The <code title="rel-prefetch"><a href="#link-type-prefetch">prefetch</a></code> keyword may be
  used with <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code>
  elements. This keyword creates an <a href="#external-resource-link" title="external resource
  link">external resource link</a>.</p>

  <p>The <code title="rel-prefetch"><a href="#link-type-prefetch">prefetch</a></code> keyword indicates
  that preemptively fetching and caching the specified resource is
  likely to be beneficial, as it is highly likely that the user will
  require this resource.</p>

  <p>There is no default type for resources given by the <code title="rel-prefetch"><a href="#link-type-prefetch">prefetch</a></code> keyword.</p>


  <h5 id="link-type-search"><span class="secno">4.12.5.10 </span>Link type "<dfn title="rel-search"><code>search</code></dfn>"</h5>

  <p>The <code title="rel-search"><a href="#link-type-search">search</a></code> keyword may be used
  with <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code>
  elements. This keyword creates a <a href="#hyperlink">hyperlink</a>.</p>

  <p>The <code title="rel-search"><a href="#link-type-search">search</a></code> keyword indicates that
  the referenced document provides an interface specifically for
  searching the document and its related resources.</p>

  <p class="note">OpenSearch description documents can be used with
  <code><a href="the-link-element.html#the-link-element">link</a></code> elements and the <code title="rel-search"><a href="#link-type-search">search</a></code> link type to enable user agents to
  autodiscover search interfaces. <a href="#refsOPENSEARCH">[OPENSEARCH]</a></p>


<!-- dropped due to wg decision in http://www.w3.org/Bugs/Public/show_bug.cgi?id=11183 --> <!--!-->
<!--
  <h5>Link type "<dfn title="rel-sidebar"><code>sidebar</code></dfn>"</h5>

  <p>The <code title="rel-sidebar">sidebar</code> keyword may be used
  with <code>link</code>, <code>a</code>, and <code>area</code>
  elements. This keyword creates a <span>hyperlink</span>.</p>

  <p>The <code title="rel-sidebar">sidebar</code> keyword indicates
  that the referenced document, if retrieved, is intended to be shown
  in a <span>secondary browsing context</span> (if possible), instead
  of in the current <span>browsing context</span>.</p>

  <p>A <span>hyperlink</span> with the <code
  title="rel-sidebar">sidebar</code> keyword specified is a <dfn
  title="rel-sidebar-hyperlink">sidebar hyperlink</dfn>.</p>
-->

  <h5 id="link-type-stylesheet"><span class="secno">4.12.5.11 </span>Link type "<dfn title="rel-stylesheet"><code>stylesheet</code></dfn>"</h5>

  <p>The <code title="rel-stylesheet"><a href="#link-type-stylesheet">stylesheet</a></code> keyword may be
  used with <code><a href="the-link-element.html#the-link-element">link</a></code> elements. This keyword creates an <a href="#external-resource-link" title="external resource link">external resource link</a> that
  contributes to the <a href="styling.html#styling">styling processing model</a>.</p>

  <p>The specified resource is a resource that describes how to
  present the document. Exactly how the resource is to be processed
  depends on the actual type of the resource.</p>

  <p>If the <code title="rel-alternate"><a href="#rel-alternate">alternate</a></code> keyword is
  also specified on the <code><a href="the-link-element.html#the-link-element">link</a></code> element, then <dfn id="the-link-is-an-alternative-stylesheet">the link
  is an alternative stylesheet</dfn>; in this case, the <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute must be specified on the
  <code><a href="the-link-element.html#the-link-element">link</a></code> element, with a non-empty value.</p>

  <p>The default type for resources given by the <code title="rel-stylesheet"><a href="#link-type-stylesheet">stylesheet</a></code> keyword is <code title="">text/css</code>.</p>

  <div class="impl">

  <p>The appropriate time to <a href="the-link-element.html#concept-link-obtain" title="concept-link-obtain">obtain</a> the resource is when the
  <a href="#external-resource-link" title="external resource link">external resource link</a>
  is created or when its element is <a href="infrastructure.html#insert-an-element-into-a-document" title="insert an element
  into a document">inserted into a document</a>, whichever happens
  last. If the resource is <a href="#the-link-is-an-alternative-stylesheet" title="the link is an alternative
  stylesheet">an alternative stylesheet</a> then the user agent may
  defer obtaining the resource until it is part of the <a href="infrastructure.html#preferred-style-sheet-set">preferred
  style sheet set</a>. <a href="#refsCSSOM">[CSSOM]</a></p> <!--
  what about DOM access of alt style sheets? -->

  <p><strong>Quirk</strong>: If the document has been set to
  <a href="infrastructure.html#quirks-mode">quirks mode</a>, has the <a href="#same-origin">same origin</a> as the
  <a href="urls.html#url">URL</a> of the external resource<!-- CVE-2010-0654 -->, and
  the <a href="urls.html#content-type" title="Content-Type">Content-Type metadata</a> of the
  external resource is not a supported style sheet type, the user
  agent must instead assume it to be <code title="">text/css</code>.</p>

  </div>


  <h5 id="link-type-tag"><span class="secno">4.12.5.12 </span>Link type "<dfn title="rel-tag"><code>tag</code></dfn>"</h5>

  <p>The <code title="rel-tag"><a href="#link-type-tag">tag</a></code> keyword may be used with
  <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code> elements. This keyword creates
  a <a href="#hyperlink">hyperlink</a>.</p>

  <p>The <code title="rel-tag"><a href="#link-type-tag">tag</a></code> keyword indicates that the
  <em>tag</em> that the referenced document represents applies to the
  current document.</p>

  <p class="note">Since it indicates that the tag <em>applies to the
  current document</em>, it would be inappropriate to use this keyword
  in the markup of a <a href="#tag-cloud">tag cloud</a>, which lists
  the popular tags across a set of pages.</p>

  <div class="example">

   <p>This document is about some gems, and so it is <i>tagged</i>
   with "<code title="">http://en.wikipedia.org/wiki/Gemstone</code>"
   to unambiguously categorise it as applying to the "jewel" kind of
   gems, and not to, say, the towns in the US, the Ruby package
   format, or the Swiss locomotive class:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;My Precious&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;header&gt;&lt;h1&gt;My precious&lt;/h1&gt; &lt;p&gt;Summer 2012&lt;/p&gt;&lt;/header&gt;
  &lt;p&gt;Recently I managed to dispose of a red gem that had been
  bothering me. I now have a much nicer blue sapphire.&lt;/p&gt;
  &lt;p&gt;The red gem had been found in a bauxite stone while I was digging
  out the office level, but nobody was willing to haul it away. The
  same red gem stayed there for literally years.&lt;/p&gt;
  &lt;footer&gt;
   Tags: &lt;a rel=tag href="http://en.wikipedia.org/wiki/Gemstone"&gt;Gemstone&lt;/a&gt;
  &lt;/footer&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>

  <div class="example">

   <p>In <em>this</em> document, there are two articles. The "<code title="rel-tag"><a href="#link-type-tag">tag</a></code>" link, however, applies to the whole
   page (and would do so wherever it was placed, including if it was
   within the <code><a href="the-article-element.html#the-article-element">article</a></code> elements).</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Gem 4/4&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;article&gt;
   &lt;h1&gt;801: Steinbock&lt;/h1&gt;
   &lt;p&gt;The number 801 Gem 4/4 electro-diesel has an ibex and was rebuilt in 2002.&lt;/p&gt;
  &lt;/article&gt;
  &lt;article&gt;
   &lt;h1&gt;802: Murmeltier&lt;/h1&gt;
   &lt;figure&gt;
    &lt;img src="http://upload.wikimedia.org/wikipedia/commons/b/b0/Trains_de_la_Bernina_en_hiver_2.jpg"
         alt="The 802 was red with pantographs and tall vents on the side."&gt;
    &lt;figcaption&gt;The 802 in the 1980s, above Lago Bianco.&lt;/figcaption&gt;
   &lt;/figure&gt;
   &lt;p&gt;The number 802 Gem 4/4 electro-diesel has a marmot and was rebuilt in 2003.&lt;/p&gt;
  &lt;/article&gt;
  &lt;p class="topic"&gt;&lt;a rel=tag href="http://en.wikipedia.org/wiki/Rhaetian_Railway_Gem_4/4"&gt;Gem 4/4&lt;/a&gt;&lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>



  <h5 id="sequential-link-types"><span class="secno">4.12.5.13 </span>Sequential link types</h5>

  <p>Some documents form part of a sequence of documents.</p>

  <p>A sequence of documents is one where each document can have a
  <em>previous sibling</em> and a <em>next sibling</em>. A document
  with no previous sibling is the start of its sequence, a document
  with no next sibling is the end of its sequence.</p>

  <p>A document may be part of multiple sequences.</p>


  <h6 id="link-type-next"><span class="secno">4.12.5.13.1 </span>Link type "<dfn title="rel-next"><code>next</code></dfn>"</h6>

  <p>The <code title="rel-next"><a href="#link-type-next">next</a></code> keyword may be used with
  <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code>
  elements. This keyword creates a <a href="#hyperlink">hyperlink</a>.</p>

  <p>The <code title="rel-next"><a href="#link-type-next">next</a></code> keyword indicates that the
  document is part of a sequence, and that the link is leading to the
  document that is the next logical document in the sequence.</p>


  <h6 id="link-type-prev"><span class="secno">4.12.5.13.2 </span>Link type "<dfn title="rel-prev"><code>prev</code></dfn>"</h6>

  <p>The <code title="rel-prev"><a href="#link-type-prev">prev</a></code> keyword may be used with
  <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code>
  elements. This keyword creates a <a href="#hyperlink">hyperlink</a>.</p>

  <p>The <code title="rel-prev"><a href="#link-type-prev">prev</a></code> keyword indicates that the
  document is part of a sequence, and that the link is leading to the
  document that is the previous logical document in the sequence.</p>

  <div class="impl">

  <p><strong>Synonyms</strong>: For historical reasons, user agents
  must also treat the keyword "<code title="">previous</code>" like
  the <code title="rel-prev"><a href="#link-type-prev">prev</a></code> keyword.</p>

  </div>


  <h5 id="other-link-types"><span class="secno">4.12.5.14 </span>Other link types</h5>

  <!-- XXX should update this section to more closely match the wiki -->
  <!-- possibly also applying the principles described here:
     http://lists.w3.org/Archives/Public/public-html/2011Mar/0497.html
  -->

  <p><dfn id="concept-rel-extensions" title="concept-rel-extensions">Extensions to the predefined
  set of link types</dfn> may be registered in the <a href="http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions">microformats wiki existing-rel-values page</a>. <a href="#refsMFREL">[MFREL]</a></p>

  <p>Anyone is free to edit the <span title="">microformats wiki
  existing-rel-values page</span> at any time to add a type. Extension
  types must be specified with the following information:</p>

  <dl><dt>Keyword</dt>

   <dd>

    <p>The actual value being defined. The value should not be
    confusingly similar to any other defined value (e.g. differing
    only in case).</p>

    <p>If the value contains a ":" (U+003A) character, it must
    also be an <a href="urls.html#absolute-url">absolute URL</a>.</p>

   </dd>


   <dt>Effect on... <code><a href="the-link-element.html#the-link-element">link</a></code></dt>

   <dd>

    <p>One of the following:</p>

    <dl><dt>Not allowed</dt>

     <dd>The keyword must not be specified on <code><a href="the-link-element.html#the-link-element">link</a></code>
     elements.</dd>

     <dt>Hyperlink</dt>

     <dd>The keyword may be specified on a <code><a href="the-link-element.html#the-link-element">link</a></code> element;
     it creates a <a href="#hyperlink">hyperlink</a>.</dd>

     <dt>External Resource</dt>

     <dd>The keyword may be specified on a <code><a href="the-link-element.html#the-link-element">link</a></code> element;
     it creates an <a href="#external-resource-link">external resource link</a>.</dd>

    </dl></dd>


   <dt>Effect on... <code><a href="the-a-element.html#the-a-element">a</a></code> and <code><a href="the-area-element.html#the-area-element">area</a></code></dt>

   <dd>

    <p>One of the following:</p>

    <dl><dt>Not allowed</dt>

     <dd>The keyword must not be specified on <code><a href="the-a-element.html#the-a-element">a</a></code> and
     <code><a href="the-area-element.html#the-area-element">area</a></code> elements.</dd>

     <dt>Hyperlink</dt>

     <dd>The keyword may be specified on <code><a href="the-a-element.html#the-a-element">a</a></code> and
     <code><a href="the-area-element.html#the-area-element">area</a></code> elements; it creates a
     <a href="#hyperlink">hyperlink</a>.</dd>

     <dt>External Resource</dt>

     <dd>The keyword may be specified on <code><a href="the-a-element.html#the-a-element">a</a></code> and
     <code><a href="the-area-element.html#the-area-element">area</a></code> elements; it creates an <a href="#external-resource-link">external resource
     link</a>.</dd>

     <dt>Hyperlink Annotation</dt>

     <dd>The keyword may be specified on <code><a href="the-a-element.html#the-a-element">a</a></code> and
     <code><a href="the-area-element.html#the-area-element">area</a></code> elements; it <a href="#hyperlink-annotation" title="hyperlink
     annotation">annotates</a> other <a href="#hyperlink" title="hyperlink">hyperlinks</a> created by the element.</dd>

    </dl></dd>


   <dt>Brief description</dt>

   <dd><p>A short non-normative description of what the keyword's
   meaning is.</p></dd>


   <dt>Specification</dt>

   <dd><p>A link to a more detailed description of the keyword's
   semantics and requirements. It could be another page on the Wiki,
   or a link to an external page.</p></dd>


   <dt>Synonyms</dt>

   <dd><p>A list of other keyword values that have exactly the same
   processing requirements. Authors should not use the values defined
   to be synonyms, they are only intended to allow user agents to
   support legacy content. Anyone may remove synonyms that are not
   used in practice; only names that need to be processed as synonyms
   for compatibility with legacy content are to be registered in this
   way.</p></dd>


   <dt>Status</dt>

   <dd>

    <p>One of the following:</p>

    <dl><dt>Proposed</dt>

     <dd>The keyword has not received wide peer review and
     approval. Someone has proposed it and is, or soon will be, using
     it.</dd>

     <dt>Ratified</dt>

     <dd>The keyword has received wide peer review and approval. It
     has a specification that unambiguously defines how to handle
     pages that use the keyword, including when they use it in
     incorrect ways.</dd>

     <dt>Discontinued</dt>

     <dd>The keyword has received wide peer review and it has been
     found wanting. Existing pages are using this keyword, but new
     pages should avoid it. The "brief description" and
     "specification" entries will give details of what authors should
     use instead, if anything.</dd>

    </dl><p>If a keyword is found to be redundant with existing values, it
    should be removed and listed as a synonym for the existing
    value.</p>

    <p>If a keyword is registered in the "proposed" state for a
    period of a month or more without being used or specified, then it
    may be removed from the registry.</p>

    <p>If a keyword is added with the "proposed" status and found to
    be redundant with existing values, it should be removed and listed
    as a synonym for the existing value. If a keyword is added with
    the "proposed" status and found to be harmful, then it should be
    changed to "discontinued" status.</p>

    <p>Anyone can change the status at any time, but should only do so
    in accordance with the definitions above.</p>

   </dd>

  </dl><div class="impl">

  <p>Conformance checkers may use the information given on the <span title="">microformats wiki existing-rel-values page</span> to
  establish if a value is allowed or not: values defined in this
  specification or marked as "proposed" or "ratified" must be accepted
  when used on the elements for which they apply as described in the
  "Effect on..." field, whereas values marked as "discontinued" or 
  values not containing a U+003A COLON character but not listed in 
  either this specification or on the aforementioned page must be 
  reported as invalid. The remaining values must be accepted as valid 
  if they are absolute URLs containing US-ASCII characters only and 
  rejected otherwise. Conformance checkers may cache this
  information (e.g. for performance reasons or to avoid the use of
  unreliable network connectivity).</p>

  <p class="note">Note: Even URL-valued link types are compared 
  ASCII-case-insensitively. Validators might choose to warn about 
  characters U+0041 (LATIN CAPITAL LETTER A) through 
  U+005A (LATIN CAPITAL LETTER Z) (inclusive) in the pre-case-folded 
  form of link types that contain a colon.</p>

  <p>When an author uses a new type not defined by either this
  specification or the Wiki page, conformance checkers should offer to
  add the value to the Wiki, with the details described above, with
  the "proposed" status.</p>

  </div>

  <p>Types defined as extensions in the <a href="http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions">microformats
  wiki existing-rel-values page</a> with the status "proposed" or
  "ratified" may be used with the <code title="">rel</code> attribute
  on <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-a-element.html#the-a-element">a</a></code>, and <code><a href="the-area-element.html#the-area-element">area</a></code> elements
  in accordance to the "Effect on..." field. <a href="#refsMFREL">[MFREL]</a></p>



  <h3 id="common-idioms"><span class="secno">4.13 </span>Common idioms without dedicated elements</h3>

  <h4 id="the-main-part-of-the-content"><span class="secno">4.13.1 </span>The main part of the content</h4>

  <p>The main content of a page &#8212; not including headers and
  footers, navigation links, sidebars, advertisements, and so forth
  &#8212; can be marked up in a variety of ways, depending on the
  needs of the author.</p>

  <p>The simplest solution is to not mark up the main content at all,
  and just leave it as implicit. Another way to think of this is that
  the <code><a href="the-body-element.html#the-body-element">body</a></code> elements marks up the main content of the
  page, and the bits that aren't main content are excluded through the
  use of more appropriate elements like <code><a href="the-aside-element.html#the-aside-element">aside</a></code> and
  <code><a href="the-nav-element.html#the-nav-element">nav</a></code>.</p>

  <div class="example">

   <p>Here is a short Web page marked up along this minimalistic
   school of thought. The main content is highlighted. Notice how all
   the <em>other</em> content in the <code><a href="the-body-element.html#the-body-element">body</a></code> is marked up
   with elements to indicate that it's not part of the main content,
   in this case <code><a href="the-header-element.html#the-header-element">header</a></code>, <code><a href="the-nav-element.html#the-nav-element">nav</a></code>, and
   <code><a href="the-footer-element.html#the-footer-element">footer</a></code>.</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt; My Toys &lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;header&gt;
   &lt;h1&gt;My toys&lt;/h1&gt;
  &lt;/header&gt;
  &lt;nav&gt;
   &lt;p&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/p&gt;
   &lt;p&gt;&lt;a href="/contact"&gt;Contact&lt;/a&gt;&lt;/p&gt;
  &lt;/nav&gt;
<strong>  &lt;p&gt;I really like my chained book and my telephone. I'm not such a
  fan of my big ball.&lt;/p&gt;
  &lt;p&gt;Another toy I like is my mirror.&lt;/p&gt;</strong>
  &lt;footer&gt;
   &lt;p&gt;&#169; copyright 2010 by the boy&lt;/p&gt;
  &lt;/footer&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>

  <p>If the main content is an independent unit of content that one
  could imagine syndicating independently, then the
  <code><a href="the-article-element.html#the-article-element">article</a></code> element would be appropriate to mark up the
  main content of the document.</p>

  <div class="example">

   <p>The document in the previous example is here recast as a blog
   post:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt; The Boy Blog: My Toys &lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;header&gt;
   &lt;h1&gt;The Boy Blog&lt;/h1&gt;
  &lt;/header&gt;
  &lt;nav&gt;
   &lt;p&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/p&gt;
   &lt;p&gt;&lt;a href="/contact"&gt;Contact&lt;/a&gt;&lt;/p&gt;
  &lt;/nav&gt;
<strong>  &lt;article&gt;
   &lt;header&gt;
    &lt;h1&gt;My toys&lt;/h1&gt;
    &lt;p&gt;Published August 4th&lt;/p&gt;
   &lt;/header&gt;
   &lt;p&gt;I really like my chained book and my telephone. I'm not such a
   fan of my big ball.&lt;/p&gt;
   &lt;p&gt;Another toy I like is my mirror.&lt;/p&gt;
  &lt;/article&gt;</strong>
  &lt;footer&gt;
   &lt;p&gt;&#169; copyright 2010 by the boy&lt;/p&gt;
  &lt;/footer&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>

  <p>If the main content is not an independent unit of content so much
  as a section of a larger work, for instance a chapter, then the
  <code><a href="the-section-element.html#the-section-element">section</a></code> element would be appropriate to mark up the
  main content of the document.</p>

  <div class="example">

   <p>Here is the same document, case as a chapter in an online
   book:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt; Chapter 2: My Toys &#8212; The Book of the Boy &lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;header&gt;
   &lt;h1&gt;Chapter 2: My Toys&lt;/h1&gt;
  &lt;/header&gt;
  &lt;nav&gt;
   &lt;p&gt;&lt;a href="/"&gt;Front Page&lt;/a&gt;&lt;/p&gt;
   &lt;p&gt;&lt;a href="/toc"&gt;Table of Contents&lt;/a&gt;&lt;/p&gt;
   &lt;p&gt;&lt;a href="/c1"&gt;Chapter 1&lt;/a&gt; &#8212; &lt;a href="/c3"&gt;Chapter 3&lt;/a&gt;&lt;/p&gt;
  &lt;/nav&gt;
<strong>  &lt;section&gt;
   &lt;p&gt;I really like my chained book and my telephone. I'm not such a
   fan of my big ball.&lt;/p&gt;
   &lt;p&gt;Another toy I like is my mirror.&lt;/p&gt;
  &lt;/section&gt;</strong>
  &lt;footer&gt;
   &lt;p&gt;&#169; copyright 2010 by the boy&lt;/p&gt;
  &lt;/footer&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>

  <p>If neither <code><a href="the-article-element.html#the-article-element">article</a></code> nor <code><a href="the-section-element.html#the-section-element">section</a></code> would be
  appropriate, but the main content still needs an explicit element,
  for example for styling purposes, then the <code><a href="the-div-element.html#the-div-element">div</a></code> element
  can be used.</p>

  <div class="example">

   <p>This is the same as the original example, but using
   <code><a href="the-div-element.html#the-div-element">div</a></code> for the main content instead of leaving it
   implied:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt; My Toys &lt;/title&gt;
  &lt;style&gt;
   body &gt; div { background: navy; color: yellow; }
  &lt;/style&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;header&gt;
   &lt;h1&gt;My toys&lt;/h1&gt;
  &lt;/header&gt;
  &lt;nav&gt;
   &lt;p&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/p&gt;
   &lt;p&gt;&lt;a href="/contact"&gt;Contact&lt;/a&gt;&lt;/p&gt;
  &lt;/nav&gt;
<strong>  &lt;div&gt;
   &lt;p&gt;I really like my chained book and my telephone. I'm not such a
   fan of my big ball.&lt;/p&gt;
   &lt;p&gt;Another toy I like is my mirror.&lt;/p&gt;
  &lt;/div&gt;</strong>
  &lt;footer&gt;
   &lt;p&gt;&#169; copyright 2010 by the boy&lt;/p&gt;
  &lt;/footer&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>


  <h4 id="rel-up"><span class="secno">4.13.2 </span>Bread crumb navigation</h4>

  <p>This specification does not provide a machine-readable way of
  describing bread-crumb navigation menus. Authors are encouraged to
  just use a series of links in a paragraph. The <code><a href="the-nav-element.html#the-nav-element">nav</a></code>
  element can be used to mark the section containing these
  paragraphs as being navigation blocks.</p>

  <div class="example">

   <p>In the following example, the current page can be reached via
   two paths.</p>

   <pre>&lt;nav&gt;
 &lt;p&gt;
  &lt;a href="/"&gt;Main&lt;/a&gt; &gt;
  &lt;a href="/products/"&gt;Products&lt;/a&gt; &gt;
  &lt;a href="/products/dishwashers/"&gt;Dishwashers&lt;/a&gt; &gt;
  &lt;a&gt;Second hand&lt;/a&gt;
 &lt;/p&gt;
 &lt;p&gt;
  &lt;a href="/"&gt;Main&lt;/a&gt; &gt;
  &lt;a href="/second-hand/"&gt;Second hand&lt;/a&gt; &gt;
  &lt;a&gt;Dishwashers&lt;/a&gt;
 &lt;/p&gt;
&lt;/nav&gt;</pre>

  </div>


  <h4 id="tag-clouds"><span class="secno">4.13.3 </span>Tag clouds</h4>

  <p id="tag-cloud">This specification does not define any markup
  specifically for marking up lists of keywords that apply to a group
  of pages (also known as <i>tag clouds</i>). In general, authors are
  encouraged to either mark up such lists using <code><a href="the-ul-element.html#the-ul-element">ul</a></code>
  elements with explicit inline counts that are then hidden and turned
  into a presentational effect using a style sheet, or to use SVG.</p>

  <div class="example">

   <p>Here, three tags are included in a short tag cloud:</p>

   <pre>&lt;style&gt;
@media screen, print, handheld, tv {
  /* should be ignored by non-visual browsers */
  .tag-cloud &gt; li &gt; span { display: none; }
  .tag-cloud &gt; li { display: inline; }
  .tag-cloud-1 { font-size: 0.7em; }
  .tag-cloud-2 { font-size: 0.9em; }
  .tag-cloud-3 { font-size: 1.1em; }
  .tag-cloud-4 { font-size: 1.3em; }
  .tag-cloud-5 { font-size: 1.5em; }
}
&lt;/style&gt;
...
&lt;ul class="tag-cloud"&gt;
 &lt;li class="tag-cloud-4"&gt;&lt;a title="28 instances" href="/t/apple"&gt;apple&lt;/a&gt; &lt;span&gt;(popular)&lt;/span&gt;
 &lt;li class="tag-cloud-2"&gt;&lt;a title="6 instances"  href="/t/kiwi"&gt;kiwi&lt;/a&gt; &lt;span&gt;(rare)&lt;/span&gt;
 &lt;li class="tag-cloud-5"&gt;&lt;a title="41 instances" href="/t/pear"&gt;pear&lt;/a&gt; &lt;span&gt;(very popular)&lt;/span&gt;
&lt;/ul&gt;</pre>

   <p>The actual frequency of each tag is given using the <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute. A CSS style sheet is
   provided to convert the markup into a cloud of differently-sized
   words, but for user agents that do not support CSS or are not
   visual, the markup contains annotations like "(popular)" or
   "(rare)" to categorize the various tags by frequency, thus enabling
   all users to benefit from the information.</p>

   <p>The <code><a href="the-ul-element.html#the-ul-element">ul</a></code> element is used (rather than
   <code><a href="the-ol-element.html#the-ol-element">ol</a></code>) because the order is not particularly important:
   while the list is in fact ordered alphabetically, it would convey
   the same information if ordered by, say, the length of the tag.</p>

   <p>The <code title="rel-tag"><a href="#link-type-tag">tag</a></code> <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code>-keyword is <em>not</em> used
   on these <code><a href="the-a-element.html#the-a-element">a</a></code> elements because they do not represent tags
   that apply to the page itself; they are just part of an index
   listing the tags themselves.</p>

  </div>


  <h4 id="conversations"><span class="secno">4.13.4 </span>Conversations</h4>

  <!-- http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-September/022576.html -->

  <p>This specification does not define a specific element for marking
  up conversations, meeting minutes, chat transcripts, dialogues in
  screenplays, instant message logs, and other situations where
  different players take turns in discourse.</p>

  <p>Instead, authors are encouraged to mark up conversations using
  <code><a href="the-p-element.html#the-p-element">p</a></code> elements and punctuation. Authors who need to mark
  the speaker for styling purposes are encouraged to use
  <code><a href="the-span-element.html#the-span-element">span</a></code> or <code><a href="the-b-element.html#the-b-element">b</a></code>. Paragraphs with their text
  wrapped in the <code><a href="the-i-element.html#the-i-element">i</a></code> element can be used for marking up
  stage directions.</p>

  <div class="example">

   <p>This example demonstrates this using an extract from Abbot and
   Costello's famous sketch, <cite>Who's on first</cite>:</p>

<pre>&lt;p&gt; Costello: Look, you gotta first baseman?
&lt;p&gt; Abbott: Certainly.
&lt;p&gt; Costello: Who's playing first?
&lt;p&gt; Abbott: That's right.
&lt;p&gt; Costello becomes exasperated.
&lt;p&gt; Costello: When you pay off the first baseman every month, who gets the money?
&lt;p&gt; Abbott: Every dollar of it.</pre>

  </div>

<!--DATA--><!--FORK-->

  <div class="example">

   <p>HTML does not have a good way to mark up graphs, so descriptions
   of interactive conversations from games are more difficult to mark
   up. This example shows one possible convention using
   <code><a href="the-dl-element.html#the-dl-element">dl</a></code> elements to list the possible responses at each
   point in the conversation. Another option to consider is describing
   the conversation in the form of a DOT file, and outputting the
   result as an SVG image to place in the document. <a href="#refsDOT">[DOT]</a></p>

   <pre>&lt;p&gt; Next, you meet a fisherman. You can say one of several greetings:
&lt;dl&gt;
 &lt;dt&gt; "Hello there!"
 &lt;dd&gt;
  &lt;p&gt; He responds with "Hello, how may I help you?"; you can respond with:
  &lt;dl&gt;
   &lt;dt&gt; "I would like to buy a fish."
   &lt;dd&gt; &lt;p&gt; He sells you a fish and the conversation finishes.
   &lt;dt&gt; "Can I borrow your boat?"
   &lt;dd&gt;
    &lt;p&gt; He is surprised and asks "What are you offering in return?".
    &lt;dl&gt;
     &lt;dt&gt; "Five gold." (if you have enough)
     &lt;dt&gt; "Ten gold." (if you have enough)
     &lt;dt&gt; "Fifteen gold." (if you have enough)
     &lt;dd&gt; &lt;p&gt; He lends you his boat. The conversation ends.
     &lt;dt&gt; "A fish." (if you have one)
     &lt;dt&gt; "A newspaper." (if you have one)
     &lt;dt&gt; "A pebble." (if you have one)
     &lt;dd&gt; &lt;p&gt; "No thanks", he replies. Your conversation options        
     at this point are the same as they were after asking to borrow
     his boat, minus any options you've suggested before.
    &lt;/dl&gt;
   &lt;/dd&gt;
  &lt;/dl&gt;
 &lt;/dd&gt;
 &lt;dt&gt; "Vote for me in the next election!"
 &lt;dd&gt; &lt;p&gt; He turns away. The conversation finishes.
 &lt;dt&gt; "Sir, are you aware that your fish are running away?"
 &lt;dd&gt;
  &lt;p&gt; He looks at you skeptically and says "Fish cannot run, sir".
  &lt;dl&gt;
   &lt;dt&gt; "You got me!"
   &lt;dd&gt; &lt;p&gt; The fisherman sighs and the conversation ends.
   &lt;dt&gt; "Only kidding."
   &lt;dd&gt; &lt;p&gt; "Good one!" he retorts. Your conversation options at this
   point are the same as those following "Hello there!" above.
   &lt;dt&gt; "Oh, then what are they doing?"
   &lt;dd&gt; &lt;p&gt; He looks at his fish, giving you an opportunity to steal
   his boat, which you do. The conversation ends.
  &lt;/dl&gt;
 &lt;/dd&gt;
&lt;/ul&gt;</pre>

  </div>


  <h4 id="footnotes"><span class="secno">4.13.5 </span>Footnotes</h4>

  <p>HTML does not have a dedicated mechanism for marking up
  footnotes. Here are the recommended alternatives.</p>

<!--FORK--><!--TITLE-->

  <hr><p>For
<!--FORK--><!--TITLE-->
  annotations, the <code><a href="the-a-element.html#the-a-element">a</a></code> element should be used, pointing to
  an element later in the document. The convention is that the
  contents of the link be a number in square brackets.</p>

  <div class="example">

   <p>In this example, a footnote in the dialogue links to a paragraph
   below the dialogue. The paragraph then reciprocally links back to the
   dialogue, allowing the user to return to the location of the
   footnote.</p>

   <pre>&lt;p&gt; Announcer: Number 16: The &lt;i&gt;hand&lt;/i&gt;.
&lt;p&gt; Interviewer: Good evening. I have with me in the studio tonight
Mr Norman St John Polevaulter, who for the past few years has been
contradicting people. Mr Polevaulter, why &lt;em&gt;do&lt;/em&gt; you
contradict people?
&lt;p&gt; Norman: I don't. &lt;sup&gt;&lt;a href="#fn1" id="r1"&gt;[1]&lt;/a&gt;&lt;/sup&gt;
&lt;p&gt; Interviewer: You told me you did!
<em>...</em>
&lt;section&gt;
 &lt;p id="fn1"&gt;&lt;a href="#r1"&gt;[1]&lt;/a&gt; This is, naturally, a lie,
 but paradoxically if it were true he could not say so without
 contradicting the interviewer and thus making it false.&lt;/p&gt;
&lt;/section&gt;</pre>

  </div>

  <hr><p>For side notes, longer annotations that apply to entire sections
  of the text rather than just specific words or sentences, the
  <code><a href="the-aside-element.html#the-aside-element">aside</a></code> element should be used.</p>

  <div class="example">

   <p>In this example, a sidebar is given after a dialogue, giving it
   some context.</p>

   <pre>&lt;p&gt; &lt;span class="speaker"&gt;Customer&lt;/span&gt;: I will not buy this record, it is scratched.
&lt;p&gt; &lt;span class="speaker"&gt;Shopkeeper&lt;/span&gt;: I'm sorry?
&lt;p&gt; &lt;span class="speaker"&gt;Customer&lt;/span&gt;: I will not buy this record, it is scratched.
&lt;p&gt; &lt;span class="speaker"&gt;Shopkeeper&lt;/span&gt;: No no no, this's'a tobacconist's.
&lt;aside&gt;
 &lt;p&gt;In 1970, the British Empire lay in ruins, and foreign
 nationalists frequented the streets &#8212; many of them Hungarians
 (not the streets &#8212; the foreign nationals). Sadly, Alexander
 Yalt has been publishing incompetently-written phrase books.
&lt;/aside&gt;</pre>

  </div>

  <hr><p>For figures or tables, footnotes can be included in the relevant
  <code><a href="the-figcaption-element.html#the-figcaption-element">figcaption</a></code> or <code><a href="the-caption-element.html#the-caption-element">caption</a></code> element, or in
  surrounding prose.</p>

  <div class="example">

   <p>In this example, a <!-- round --> table has cells with footnotes
   that are given in prose. A <code><a href="the-figure-element.html#the-figure-element">figure</a></code> element is used to
   give a single legend to the combination of the table and its
   footnotes.</p>

   <pre>&lt;figure&gt;
 &lt;figcaption&gt;Table 1. Alternative activities for knights.&lt;/figcaption&gt;
 &lt;table&gt;
  &lt;tr&gt;
   &lt;th&gt; Activity
   &lt;th&gt; Location
   &lt;th&gt; Cost
  &lt;tr&gt;
   &lt;td&gt; Dance
   &lt;td&gt; Wherever possible
   &lt;td&gt; &#163;0&lt;sup&gt;&lt;a href="#fn1"&gt;1&lt;/a&gt;&lt;/sup&gt;
  &lt;tr&gt;
   &lt;td&gt; Routines, chorus scenes&lt;sup&gt;&lt;a href="#fn2"&gt;2&lt;/a&gt;&lt;/sup&gt;
   &lt;td&gt; Undisclosed
   &lt;td&gt; Undisclosed
  &lt;tr&gt;
   &lt;td&gt; Dining&lt;sup&gt;&lt;a href="#fn3"&gt;3&lt;/a&gt;&lt;/sup&gt;
   &lt;td&gt; Camelot
   &lt;td&gt; Cost of ham, jam, and spam&lt;sup&gt;&lt;a href="#fn4"&gt;4&lt;/a&gt;&lt;/sup&gt;
 &lt;/table&gt;
 &lt;p id="fn1"&gt;1. Assumed.&lt;/p&gt;
 &lt;p id="fn2"&gt;2. Footwork impeccable.&lt;/p&gt;
 &lt;p id="fn3"&gt;3. Quality described as "well".&lt;/p&gt;
 &lt;p id="fn4"&gt;4. A lot.&lt;/p&gt;
&lt;/figure&gt;</pre>

  </div>




  <div class="impl">

  <h3 id="selectors"><span class="secno">4.14 </span>Matching HTML elements using selectors</h3>

  <h4 id="case-sensitivity"><span class="secno">4.14.1 </span>Case-sensitivity</h4>

  <p>The Selectors specification leaves the case-sensitivity of IDs,
  classes, element names, attribute names, and attribute values to be
  defined by the host language. <a href="#refsSELECTORS">[SELECTORS]</a></p>

  <p>The <a href="infrastructure.html#concept-id" title="concept-id">unique identifier</a> of
  <a href="infrastructure.html#html-elements">HTML elements</a> in documents that are in <a href="infrastructure.html#quirks-mode">quirks
  mode</a> must be treated as <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>
  for the purposes of selector matching.</p>

  <p>Classes from the <code title="attr-class"><a href="global-attributes.html#classes">class</a></code> attribute
  of <a href="infrastructure.html#html-elements">HTML elements</a> in documents that are in <a href="infrastructure.html#quirks-mode">quirks
  mode</a> must be treated as <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>
  for the purposes of selector matching.</p>

  <p>Attribute and element <em>names</em> of <a href="infrastructure.html#html-elements">HTML
  elements</a> in <a href="infrastructure.html#html-documents">HTML documents</a> must be treated as
  <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> for the purposes of selector
  matching.</p>

  <p>Everything else (attribute values on <a href="infrastructure.html#html-elements">HTML elements</a>,
  IDs and classes in <a href="infrastructure.html#no-quirks-mode">no-quirks mode</a> and
  <a href="infrastructure.html#limited-quirks-mode">limited-quirks mode</a>, and element names, attribute
  names, and attribute values in <a href="infrastructure.html#xml-documents">XML documents</a>) must be
  treated as <a href="infrastructure.html#case-sensitive">case-sensitive</a> for the purposes of selector
  matching.</p>


  <h4 id="pseudo-classes"><span class="secno">4.14.2 </span>Pseudo-classes</h4>

  <p>There are a number of dynamic selectors that can be used with
  HTML. This section defines when these selectors match HTML elements.
  <a href="#refsSELECTORS">[SELECTORS]</a> <a href="#refsCSSUI">[CSSUI]</a></p>

  <dl><dt><dfn id="selector-link" title="selector-link"><code>:link</code></dfn></dt>
   <dt><dfn id="selector-visited" title="selector-visited"><code>:visited</code></dfn></dt>

   <dd>

    <p>All <code><a href="the-a-element.html#the-a-element">a</a></code> elements that have an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute, all
    <code><a href="the-area-element.html#the-area-element">area</a></code> elements that have an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute, and all
    <code><a href="the-link-element.html#the-link-element">link</a></code> elements that have an <code title="attr-link-href"><a href="the-link-element.html#attr-link-href">href</a></code> attribute, must match one of
    <code title="selector-link"><a href="#selector-link">:link</a></code> and <code title="selector-visited"><a href="#selector-visited">:visited</a></code>.</p>

    <p>Other specifications might apply more specific rules regarding
    how these elements are to match these pseudo-classes, to mitigate
    some privacy concerns that apply with straightforward
    implementations of this requirement.</p>

   </dd>


   <dt><dfn id="selector-active" title="selector-active"><code>:active</code></dfn></dt>

   <dd>

    <p>The <code title="selector-active"><a href="#selector-active">:active</a></code> pseudo-class
    is defined to match an element <q cite="http://dev.w3.org/csswg/selectors3/#the-user-action-pseudo-classes-hover-act">while
    an element is <i>being activated</i> by the user</q>. For the
    purposes of defining the <code title="selector-active"><a href="#selector-active">:active</a></code> pseudo-class only, an HTML
    user agent must consider an element as <i>being activated</i> if
    it is:</p>

    <ul><li>

      <p>An element falling into one of the following categories
      between the time the user begins to indicate an intent to
      trigger the element's <a href="content-models.html#activation-behavior">activation behavior</a> and
      either the time the user stops indicating an intent to trigger
      the element's <a href="content-models.html#activation-behavior">activation behavior</a>, or the time the
      element's <a href="content-models.html#activation-behavior">activation behavior</a> has finished running,
      which ever comes first:</p>

      <ul><li><code><a href="the-a-element.html#the-a-element">a</a></code> elements that have an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute</li>

       <li><code><a href="the-area-element.html#the-area-element">area</a></code> elements that have an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute</li>

       <li><code><a href="the-link-element.html#the-link-element">link</a></code> elements that have an <code title="attr-link-href"><a href="the-link-element.html#attr-link-href">href</a></code> attribute</li>

       <li><code><a href="the-button-element.html#the-button-element">button</a></code> elements that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

       <li><code><a href="the-input-element.html#the-input-element">input</a></code> elements whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#submit-button-state-(type=submit)" title="attr-input-type-submit">Submit Button</a>, <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a>, <a href="states-of-the-type-attribute.html#reset-button-state-(type=reset)" title="attr-input-type-reset">Reset Button</a>, or <a href="states-of-the-type-attribute.html#button-state-(type=button)" title="attr-input-type-button">Button</a> state</li>

       <li><code><a href="#the-command-element">command</a></code> elements that do not have a <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code> attribute</li>

       <li>elements that have their <a href="#specially-focusable">tabindex focus flag</a> set</li>

      </ul><p class="example">For example, if the user is using a keyboard
      to push a <code><a href="the-button-element.html#the-button-element">button</a></code> element by pressing the space bar,
      the element would match this pseudo-class in between the time
      that the element received the <code title="event-keydown">keydown</code> event and the time the
      element received the <code title="event-keyup">keyup</code>
      event.</p>

     </li>

     <li>

      <p>An element that the user indicates using a pointing device
      while that pointing device is in the "down" state (e.g. for a
      mouse, between the time the mouse button is pressed and the time
      it is depressed).</p>

     </li>

     <li>

      <p>An element that has a descendant that is currently matching
      the <code title="selector-active"><a href="#selector-active">:active</a></code>
      pseudo-class.</p>

     </li>

    </ul></dd>


   <dt><dfn id="selector-hover" title="selector-hover"><code>:hover</code></dfn></dt>

   <dd>

    <p>The <code title="selector-hover"><a href="#selector-hover">:hover</a></code> pseudo-class is
    defined to match an element <q cite="http://dev.w3.org/csswg/selectors3/#the-user-action-pseudo-classes-hover-act">while
    the user <i>designates</i> an element with a pointing device</q>.
    For the purposes of defining the <code title="selector-hover"><a href="#selector-hover">:hover</a></code> pseudo-class only, an HTML
    user agent must consider an element as being one that the user
    <i>designates</i> if it is:</p>

    <ul><li>

      <p>An element that the user indicates using a pointing device.</p>

     </li>

     <li>

      <p>An element that has a descendant that the user indicates
      using a pointing device.</p>

     </li>

     <li>

      <p>An element that is the <a href="the-label-element.html#labeled-control">labeled control</a> of a
      <code><a href="the-label-element.html#the-label-element">label</a></code> element that is currently matching <a href="#selector-hover" title="selector-hover">:hover</a>.</p>

     </li>

    </ul><!--
Demos:
 http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1315
 http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1316
 http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1317
--><div class="example">

     <p>Consider in particular a fragment such as:</p>

     <pre>&lt;p&gt; &lt;label for=c&gt; &lt;input id=a&gt; &lt;/label&gt; &lt;span id=b&gt; &lt;input id=c&gt; &lt;/span&gt; &lt;/p&gt;</pre>

     <p>If the user designates the element with ID "<code title="">a</code>" with their pointing device, then the
     <code><a href="the-p-element.html#the-p-element">p</a></code> element (and all its ancestors not shown in the
     snippet above), the <code><a href="the-label-element.html#the-label-element">label</a></code> element, the element with
     ID "<code title="">a</code>", and the element with ID "<code title="">c</code>" will match the <a href="#selector-hover" title="selector-hover">:hover</a> pseudo-class. The element
     with ID "<code title="">a</code>" matches it from condition 1,
     the <code><a href="the-label-element.html#the-label-element">label</a></code> and <code><a href="the-p-element.html#the-p-element">p</a></code> elements match it
     because of condition 2 (one of their descendants is designated),
     and the element with ID "<code title="">c</code>" matches it
     through condition 3 (its <code><a href="the-label-element.html#the-label-element">label</a></code> element matches <a href="#selector-hover" title="selector-hover">:hover</a>). However, the element with
     ID "<code title="">b</code>" does <em>not</em> match <a href="#selector-hover" title="selector-hover">:hover</a>: its descendant is not
     designated, even though it matches <a href="#selector-hover" title="selector-hover">:hover</a>.</p>

    </div>

   </dd>


   <dt><dfn id="selector-enabled" title="selector-enabled"><code>:enabled</code></dfn></dt>

   <dd>

    <p>The <code title="selector-enabled"><a href="#selector-enabled">:enabled</a></code> pseudo-class
    must match any element falling into one of the following
    categories:</p>

    <ul><li><code><a href="the-a-element.html#the-a-element">a</a></code> elements that have an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute</li>

     <li><code><a href="the-area-element.html#the-area-element">area</a></code> elements that have an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute</li>

     <li><code><a href="the-link-element.html#the-link-element">link</a></code> elements that have an <code title="attr-link-href"><a href="the-link-element.html#attr-link-href">href</a></code> attribute</li>

     <li><code><a href="the-button-element.html#the-button-element">button</a></code> elements that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li><code><a href="the-input-element.html#the-input-element">input</a></code> elements that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li><code><a href="the-select-element.html#the-select-element">select</a></code> elements that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li><code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li><code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> elements that do not have a <code title="attr-optgroup-disabled"><a href="the-optgroup-element.html#attr-optgroup-disabled">disabled</a></code> attribute</li>

     <li><code><a href="the-option-element.html#the-option-element">option</a></code> elements that are not <a href="the-option-element.html#concept-option-disabled" title="concept-option-disabled">disabled</a></li>

     <li><code><a href="#the-command-element">command</a></code> elements that do not have a <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code> attribute</li>

     <li><code><a href="the-li-element.html#the-li-element">li</a></code> elements that are children of
     <code><a href="#the-menu-element">menu</a></code> elements, and that have a child element that
     defines a <a href="#concept-command" title="concept-command">command</a>, if the
     first such element's <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a> facet
     is false (not disabled)</li>

     <li><code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> elements that do not have a <code title="attr-fieldset-disabled"><a href="the-fieldset-element.html#attr-fieldset-disabled">disabled</a></code> attribute</li>

    </ul></dd>


   <dt><dfn id="selector-disabled" title="selector-disabled"><code>:disabled</code></dfn></dt>

   <dd>

    <p>The <code title="selector-disabled"><a href="#selector-disabled">:disabled</a></code>
    pseudo-class must match any element falling into one of the
    following categories:</p>

    <ul><li><code><a href="the-button-element.html#the-button-element">button</a></code> elements that are <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li><code><a href="the-input-element.html#the-input-element">input</a></code> elements that are <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li><code><a href="the-select-element.html#the-select-element">select</a></code> elements that are <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li><code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements that are <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li><code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> elements that have a <code title="attr-optgroup-disabled"><a href="the-optgroup-element.html#attr-optgroup-disabled">disabled</a></code> attribute</li>

     <li><code><a href="the-option-element.html#the-option-element">option</a></code> elements that are <a href="the-option-element.html#concept-option-disabled" title="concept-option-disabled">disabled</a></li>

     <li><code><a href="#the-command-element">command</a></code> elements that have a <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code> attribute</li>

     <li><code><a href="the-li-element.html#the-li-element">li</a></code> elements that are children of
     <code><a href="#the-menu-element">menu</a></code> elements, and that have a child element that
     defines a <a href="#concept-command" title="concept-command">command</a>, if the
     first such element's <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a> facet
     is true (disabled)</li>

     <li><code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> elements that have a <code title="attr-fieldset-disabled"><a href="the-fieldset-element.html#attr-fieldset-disabled">disabled</a></code> attribute</li>

    </ul></dd>


   <dt><dfn id="selector-checked" title="selector-checked"><code>:checked</code></dfn></dt>

   <dd>

    <p>The <code title="selector-checked"><a href="#selector-checked">:checked</a></code> pseudo-class
    must match any element falling into one of the following
    categories:</p>

    <ul><li><code><a href="the-input-element.html#the-input-element">input</a></code> elements whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)" title="attr-input-type-checkbox">Checkbox</a> state and whose
     <a href="attributes-common-to-form-controls.html#concept-fe-checked" title="concept-fe-checked">checkedness</a> state is
     true</li>

     <li><code><a href="the-input-element.html#the-input-element">input</a></code> elements whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#radio-button-state-(type=radio)" title="attr-input-type-radio">Radio Button</a> state and whose
     <a href="attributes-common-to-form-controls.html#concept-fe-checked" title="concept-fe-checked">checkedness</a> state is
     true</li>

     <li><code><a href="the-option-element.html#the-option-element">option</a></code> elements whose <a href="the-option-element.html#concept-option-selectedness" title="concept-option-selectedness">selectedness</a> is
     true</li>

     <li><code><a href="#the-command-element">command</a></code> elements whose <code title="attr-command-type"><a href="#attr-command-type">type</a></code> attribute is in the <a href="#attr-command-type-state-checkbox" title="attr-command-type-state-checkbox">Checkbox</a> state
     and that have a <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code>
     attribute</li>

     <li><code><a href="#the-command-element">command</a></code> elements whose <code title="attr-command-type"><a href="#attr-command-type">type</a></code> attribute is in the <a href="#attr-command-type-state-radio" title="attr-command-type-state-radio">Radio</a> state and that
     have a <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code>
     attribute</li>

    </ul></dd>


   <dt><dfn id="selector-indeterminate" title="selector-indeterminate"><code>:indeterminate</code></dfn></dt>

   <dd>

    <!-- does this pseudo-class even exist? -->

    <p>The <code title="selector-indeterminate"><a href="#selector-indeterminate">:indeterminate</a></code>
    pseudo-class must match any element falling into one of the
    following categories:</p>

    <ul><li><code><a href="the-input-element.html#the-input-element">input</a></code> elements whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)" title="attr-input-type-checkbox">Checkbox</a> state and whose
     <code title="dom-input-indeterminate"><a href="the-input-element.html#dom-input-indeterminate">indeterminate</a></code> IDL
     attribute is set to true</li>

     <li><code><a href="the-progress-element.html#the-progress-element">progress</a></code> elements with no <code title="attr-progress-value"><a href="the-progress-element.html#attr-progress-value">value</a></code> content attribute</li>

    </ul></dd>


   <dt><dfn id="selector-default" title="selector-default"><code>:default</code></dfn></dt>

   <dd>

    <p>The <code title="selector-default"><a href="#selector-default">:default</a></code> pseudo-class
    must match any element falling into one of the following
    categories:</p>

    <ul><li><code><a href="the-button-element.html#the-button-element">button</a></code> elements that are their form's
     <a href="#default-button">default button</a></li>

     <li><code><a href="the-input-element.html#the-input-element">input</a></code> elements whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#submit-button-state-(type=submit)" title="attr-input-type-submit">Submit Button</a> or <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state, and that
     are their form's <a href="#default-button">default button</a></li>

     <li><code><a href="the-input-element.html#the-input-element">input</a></code> elements to which the <code title="attr-input-checked"><a href="the-input-element.html#attr-input-checked">checked</a></code> attribute applies and
     that have a <code title="attr-input-checked"><a href="the-input-element.html#attr-input-checked">checked</a></code>
     attribute</li>

     <li><code><a href="the-option-element.html#the-option-element">option</a></code> elements that have a <code title="attr-option-selected"><a href="the-option-element.html#attr-option-selected">selected</a></code> attribute</li>
<!--
     <li><code>command</code> elements that have a <code
     title="attr-command-default">default</code> attribute</li>
-->
    </ul></dd>


   <dt><dfn id="selector-valid" title="selector-valid"><code>:valid</code></dfn></dt>

   <dd>

    <p>The <code title="selector-valid"><a href="#selector-valid">:valid</a></code> pseudo-class
    must match any element falling into one of the following
    categories:</p>

    <ul><li>elements that are <a href="#candidate-for-constraint-validation" title="candidate for constraint
     validation">candidates for constraint validation</a> and that
     <a href="#concept-fv-valid" title="concept-fv-valid">satisfy their
     constraints</a></li>

     <li><code><a href="the-form-element.html#the-form-element">form</a></code> elements that are not the <a href="association-of-controls-and-forms.html#form-owner">form
     owner</a> of any elements that themselves are <a href="#candidate-for-constraint-validation" title="candidate for constraint validation">candidates for
     constraint validation</a> but do not <a href="#concept-fv-valid" title="concept-fv-valid">satisfy their constraints</a></li>

    </ul></dd>


   <dt><dfn id="selector-invalid" title="selector-invalid"><code>:invalid</code></dfn></dt>

   <dd>

    <p>The <code title="selector-invalid"><a href="#selector-invalid">:invalid</a></code> pseudo-class
    must match any element falling into one of the following
    categories:</p>

    <ul><li>elements that are <a href="#candidate-for-constraint-validation" title="candidate for constraint
     validation">candidates for constraint validation</a> but that
     do not <a href="#concept-fv-valid" title="concept-fv-valid">satisfy their
     constraints</a></li>

     <li><code><a href="the-form-element.html#the-form-element">form</a></code> elements that are the <a href="association-of-controls-and-forms.html#form-owner">form
     owner</a> of one or more elements that themselves are <a href="#candidate-for-constraint-validation" title="candidate for constraint validation">candidates for
     constraint validation</a> but do not <a href="#concept-fv-valid" title="concept-fv-valid">satisfy their constraints</a></li>

    </ul></dd>


   <dt><dfn id="selector-in-range" title="selector-in-range"><code>:in-range</code></dfn></dt>

   <dd>

    <p>The <code title="selector-in-range"><a href="#selector-in-range">:in-range</a></code>
    pseudo-class must match all elements that are <a href="#candidate-for-constraint-validation" title="candidate for constraint validation">candidates for
    constraint validation</a>, <a href="common-input-element-attributes.html#have-range-limitations">have range limitations</a>,
    and that are neither <a href="#suffering-from-an-underflow">suffering from an underflow</a> nor
    <a href="#suffering-from-an-overflow">suffering from an overflow</a>.</p>

   </dd>


   <dt><dfn id="selector-out-of-range" title="selector-out-of-range"><code>:out-of-range</code></dfn></dt>

   <dd>

    <p>The <code title="selector-out-of-range"><a href="#selector-out-of-range">:out-of-range</a></code>
    pseudo-class must match all elements that are <a href="#candidate-for-constraint-validation" title="candidate for constraint validation">candidates for
    constraint validation</a>, <a href="common-input-element-attributes.html#have-range-limitations">have range limitations</a>,
    and that are either <a href="#suffering-from-an-underflow">suffering from an underflow</a> or
    <a href="#suffering-from-an-overflow">suffering from an overflow</a>.</p>

   </dd>


   <dt><dfn id="selector-required" title="selector-required"><code>:required</code></dfn></dt>

   <dd>

    <p>The <code title="selector-required"><a href="#selector-required">:required</a></code>
    pseudo-class must match any element falling into one of the
    following categories:</p>

    <ul><li><code><a href="the-input-element.html#the-input-element">input</a></code> elements that are <i title="concept-input-required"><a href="common-input-element-attributes.html#concept-input-required">required</a></i></li>

     <li><code><a href="the-select-element.html#the-select-element">select</a></code> elements that have a <code title="attr-select-required"><a href="the-select-element.html#attr-select-required">required</a></code>
     attribute</li>

     <li><code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements that have a <code title="attr-textarea-required"><a href="the-textarea-element.html#attr-textarea-required">required</a></code>
     attribute</li>

    </ul></dd>


   <dt><dfn id="selector-optional" title="selector-optional"><code>:optional</code></dfn></dt>

   <dd>

    <p>The <code title="selector-optional"><a href="#selector-optional">:optional</a></code>
    pseudo-class must match any element falling into one of the
    following categories:</p>

    <ul><li><code><a href="the-input-element.html#the-input-element">input</a></code> elements to which the <code title="attr-input-required"><a href="common-input-element-attributes.html#attr-input-required">required</a></code> attribute applies
     that are not <i title="concept-input-required"><a href="common-input-element-attributes.html#concept-input-required">required</a></i></li>

     <li><code><a href="the-select-element.html#the-select-element">select</a></code> elements that do not have a <code title="attr-select-required"><a href="the-select-element.html#attr-select-required">required</a></code> attribute</li>

     <li><code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements that do not have a <code title="attr-textarea-required"><a href="the-textarea-element.html#attr-textarea-required">required</a></code>
     attribute</li>

    </ul></dd>


   <dt><dfn id="selector-read-only" title="selector-read-only"><code>:read-only</code></dfn></dt>
   <dt><dfn id="selector-read-write" title="selector-read-write"><code>:read-write</code></dfn></dt>

   <dd>

    <p>The <code title="selector-read-write"><a href="#selector-read-write">:read-write</a></code>
    pseudo-class must match any element falling into one of the
    following categories:</p>

    <ul><li><code><a href="the-input-element.html#the-input-element">input</a></code> elements to which the <code title="attr-input-readonly"><a href="common-input-element-attributes.html#attr-input-readonly">readonly</a></code> attribute applies,
     but that are not <i title="concept-input-immutable"><a href="the-input-element.html#concept-input-immutable">immutable</a></i>
     (i.e. that do not have the <code title="attr-input-readonly"><a href="common-input-element-attributes.html#attr-input-readonly">readonly</a></code> attribute specified
     and that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>)</li>

     <li><code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements that do not have a <code title="attr-textarea-readonly"><a href="the-textarea-element.html#attr-textarea-readonly">readonly</a></code> attribute, and
     that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

     <li>elements that are <a href="#editing-host" title="editing host">editing
     hosts</a> or <a href="#editable">editable</a> and are neither
     <code><a href="the-input-element.html#the-input-element">input</a></code> elements nor <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
     elements</li>

    </ul><p>The <code title="selector-read-only"><a href="#selector-read-only">:read-only</a></code>
    pseudo-class must match all other <a href="infrastructure.html#html-elements">HTML elements</a>.</p>

   </dd>


   <dt><dfn id="selector-ltr" title="selector-ltr"><code>:dir(ltr)</code></dfn></dt>

   <dd>

    <p>The <code title="selector-ltr"><a href="#selector-ltr">:dir(ltr)</a></code> pseudo-class must
    match all elements whose <a href="global-attributes.html#the-directionality" title="the
    directionality">directionality</a> is '<a href="global-attributes.html#concept-ltr" title="concept-ltr">ltr</a>'.</p>

   </dd>

   <dt><dfn id="selector-rtl" title="selector-rtl"><code>:dir(rtl)</code></dfn></dt>

   <dd>

    <p>The <code title="selector-rtl"><a href="#selector-rtl">:dir(rtl)</a></code> pseudo-class must
    match all elements whose <a href="global-attributes.html#the-directionality" title="the
    directionality">directionality</a> is '<a href="global-attributes.html#concept-rtl" title="concept-rtl">rtl</a>'.</p>

   </dd>

  </dl><p class="note">Another section of this specification defines the
  <i><a href="#target-element">target element</a></i> used with the <code title="selector-target">:target</code> pseudo-class.</p>

  <p class="note">This specification does not define when an element
  matches the <code title="selector-focus">:focus</code> or <code title="selector-lang()">:lang()</code> dynamic pseudo-classes, as
  those are all defined in sufficient detail in a language-agnostic
  fashion in the Selectors specification. <a href="#refsSELECTORS">[SELECTORS]</a></p>

  </div>

<!--MD-->


  <h2 id="browsers"><span class="secno">5 </span>Loading Web pages</h2>

  <div class="impl">

  <p>This section describes features that apply most directly to Web
  browsers. Having said that, except where specified otherwise, the
  requirements defined in this section <em>do</em> apply to all user
  agents, whether they are Web browsers or not.</p>

  </div>



  <h3 id="windows"><span class="secno">5.1 </span>Browsing contexts</h3>

  <p>A <dfn id="browsing-context">browsing context</dfn> is an environment in which
  <code><a href="dom.html#document">Document</a></code> objects are presented to the user.</p>

  <p class="note">A tab or window in a Web browser typically contains
  a <a href="#browsing-context">browsing context</a>, as does an <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code><span class="impl"> or <code><a href="#frame">frame</a></code>s in a
  <code><a href="#frameset">frameset</a></code></span>.</p>

  <p>Each <a href="#browsing-context">browsing context</a> has a corresponding
  <code><a href="#windowproxy">WindowProxy</a></code> object.</p>

  <p>A <a href="#browsing-context">browsing context</a> has a <a href="#session-history">session
  history</a>, which lists the <code><a href="dom.html#document">Document</a></code> objects that
  that <a href="#browsing-context">browsing context</a> has presented, is presenting, or
  will present. At any time, one <code><a href="dom.html#document">Document</a></code> in each
  <a href="#browsing-context">browsing context</a> is designated the <dfn id="active-document">active
  document</dfn>. A <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing
  context</a> is that <a href="#browsing-context">browsing context</a> whose
  <a href="#session-history">session history</a> contains the <code><a href="dom.html#document">Document</a></code>, if
  any. (A <code><a href="dom.html#document">Document</a></code> created using an API such as <code title="dom-DOMImplementation-createDocument"><a href="infrastructure.html#dom-domimplementation-createdocument">createDocument()</a></code>
  has no <a href="#browsing-context">browsing context</a>.)</p>

  <p>Each <code><a href="dom.html#document">Document</a></code> is associated with a
  <code><a href="#window">Window</a></code> object. A <a href="#browsing-context">browsing context</a>'s
  <code><a href="#windowproxy">WindowProxy</a></code> object forwards everything to the
  <a href="#browsing-context">browsing context</a>'s <a href="#active-document">active document</a>'s
  <code><a href="#window">Window</a></code> object.</p>

  <p class="note">In general, there is a 1-to-1 mapping from the
  <code><a href="#window">Window</a></code> object to the <code><a href="dom.html#document">Document</a></code> object.
  There are two exceptions. First, a <code><a href="#window">Window</a></code> can be reused
  for the presentation of a second <code><a href="dom.html#document">Document</a></code> in the same
  <a href="#browsing-context">browsing context</a>, such that the mapping is then 1-to-2.
  This occurs when a <a href="#browsing-context">browsing context</a> is <a href="#navigate" title="navigate">navigated</a> from the initial
  <code><a href="urls.html#about:blank">about:blank</a></code> <code><a href="dom.html#document">Document</a></code> to another, with
  <a href="#replacement-enabled">replacement enabled</a>. Second, a <code><a href="dom.html#document">Document</a></code>
  can end up being reused for several <code><a href="#window">Window</a></code> objects when
  the <code title="dom-document-open"><a href="dynamic-markup-insertion.html#dom-document-open">document.open()</a></code> method is
  used, such that the mapping is then many-to-1.</p>

  <p class="note">A <code><a href="dom.html#document">Document</a></code> does not necessarily have a
  <a href="#browsing-context">browsing context</a> associated with it. In particular,
  data mining tools are likely to never instantiate browsing
  contexts.</p>

  <hr><p>A <a href="#browsing-context">browsing context</a> can have a <dfn id="creator-browsing-context">creator browsing
  context</dfn>, the <a href="#browsing-context">browsing context</a> that was
  responsible for its creation. If a <a href="#browsing-context">browsing context</a> has
  a <a href="#parent-browsing-context">parent browsing context</a>, then that is its
  <a href="#creator-browsing-context">creator browsing context</a>. Otherwise, if the
  <a href="#browsing-context">browsing context</a> has an <a href="#opener-browsing-context">opener browsing
  context</a>, then <em>that</em> is its <a href="#creator-browsing-context">creator browsing
  context</a>. Otherwise, the <a href="#browsing-context">browsing context</a> has no
  <a href="#creator-browsing-context">creator browsing context</a>.</p>

  <p>If a <a href="#browsing-context">browsing context</a> <var title="">A</var> has a
  <a href="#creator-browsing-context">creator browsing context</a>, then the
  <code><a href="dom.html#document">Document</a></code> that was the <a href="#active-document">active document</a> of
  that <a href="#creator-browsing-context">creator browsing context</a> at the time <var title="">A</var> was created is the <dfn id="creator-document">creator
  <code>Document</code></dfn>.</p>

  <div class="impl">

  <p>When a <a href="#browsing-context">browsing context</a> is first created, it must be
  created with a single <code><a href="dom.html#document">Document</a></code> in its session history,
  whose <a href="dom.html#the-document's-address" title="the document's address">address</a> is
  <code><a href="urls.html#about:blank">about:blank</a></code>, which is marked as being an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>, whose <a href="infrastructure.html#document's-character-encoding" title="document's character encoding">character encoding</a> is
  UTF-8, and which is both <a href="#ready-for-post-load-tasks">ready for post-load tasks</a> and
  <a href="#completely-loaded">completely loaded</a> immediately. The
  <code><a href="dom.html#document">Document</a></code> must have a single child <code><a href="the-html-element.html#the-html-element">html</a></code>
  node, which itself has a single child <code><a href="the-body-element.html#the-body-element">body</a></code> node.</p>

  <p class="note">If the <a href="#browsing-context">browsing context</a> is created
  specifically to be immediately navigated, then that initial
  navigation will have <a href="#replacement-enabled">replacement enabled</a>.</p>

  <p id="about-blank-origin">The <a href="#origin-0">origin</a> and
  <a href="#effective-script-origin">effective script origin</a> of the <code><a href="urls.html#about:blank">about:blank</a></code>
  <code><a href="dom.html#document">Document</a></code> are set when the <code><a href="dom.html#document">Document</a></code> is
  created. If the new <a href="#browsing-context">browsing context</a> has a
  <a href="#creator-browsing-context">creator browsing context</a>, then the <a href="#origin-0">origin</a>
  of the <code><a href="urls.html#about:blank">about:blank</a></code> <code><a href="dom.html#document">Document</a></code> is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the <a href="#origin-0">origin</a>
  of the <a href="#creator-document">creator <code>Document</code></a> and the
  <a href="#effective-script-origin">effective script origin</a> of the <code><a href="urls.html#about:blank">about:blank</a></code>
  <code><a href="dom.html#document">Document</a></code> is initially an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the <a href="#effective-script-origin">effective
  script origin</a> of the <a href="#creator-document">creator
  <code>Document</code></a>. Otherwise, the <a href="#origin-0">origin</a> of
  the <code><a href="urls.html#about:blank">about:blank</a></code> <code><a href="dom.html#document">Document</a></code> is a globally
  unique identifier assigned when the new <a href="#browsing-context">browsing
  context</a> is created and the <a href="#effective-script-origin">effective script
  origin</a> of the <code><a href="urls.html#about:blank">about:blank</a></code> <code><a href="dom.html#document">Document</a></code>
  is initially an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to
  its <a href="#origin-0">origin</a>.</p>

  </div>


  <h4 id="nested-browsing-contexts"><span class="secno">5.1.1 </span>Nested browsing contexts</h4>

  <p>Certain elements (for example, <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements) can
  instantiate further <a href="#browsing-context" title="browsing context">browsing
  contexts</a>. These are called <dfn id="nested-browsing-context" title="nested browsing
  context">nested browsing contexts</dfn>. If a browsing context <var title="">P</var> has a <code><a href="dom.html#document">Document</a></code> <var title="">D</var>
  with an element <var title="">E</var> that nests another browsing
  context <var title="">C</var> inside it, then <var title="">C</var>
  is said to be <dfn id="browsing-context-nested-through" title="browsing context nested through">nested
  through</dfn> <var title="">D</var>, and <var title="">E</var> is
  said to be the <dfn id="browsing-context-container">browsing context container</dfn> of <var title="">C</var>. If the <a href="#browsing-context-container">browsing context container</a>
  element <var title="">E</var> is <a href="infrastructure.html#in-a-document" title="in a
  Document">in</a> the <code><a href="dom.html#document">Document</a></code> <var title="">D</var>,
  then <var title="">P</var> is said to be the <dfn id="parent-browsing-context">parent browsing
  context</dfn> of <var title="">C</var> and <var title="">C</var> is
  said to be a <dfn id="child-browsing-context">child browsing context</dfn> of <var title="">P</var>. Otherwise, the <a href="#nested-browsing-context">nested browsing
  context</a> <var title="">C</var> has no <a href="#parent-browsing-context">parent browsing
  context</a>.</p>

  <p>A browsing context <var title="">A</var> is said to be an <dfn id="ancestor-browsing-context" title="ancestor browsing context">ancestor</dfn> of a browsing
  context <var title="">B</var> if there exists a browsing context
  <var title="">A'</var> that is a <a href="#child-browsing-context">child browsing context</a>
  of <var title="">A</var> and that is itself an <a href="#ancestor-browsing-context" title="ancestor
  browsing context">ancestor</a> of <var title="">B</var>, or if
  there is a browsing context <var title="">P</var> that is a
  <a href="#child-browsing-context">child browsing context</a> of <var title="">A</var> and
  that is the <a href="#parent-browsing-context">parent browsing context</a> of <var title="">B</var>.</p>

  <p>A browsing context that is not a <a href="#nested-browsing-context">nested browsing
  context</a> has no <a href="#parent-browsing-context">parent browsing context</a>, and is
  the <dfn id="top-level-browsing-context">top-level browsing context</dfn> of all the browsing
  contexts for which it is an <a href="#ancestor-browsing-context">ancestor browsing
  context</a>.</p>

  <p>The transitive closure of <a href="#parent-browsing-context" title="parent browsing
  context">parent browsing contexts</a> for a <a href="#nested-browsing-context">nested browsing
  context</a> gives the list of <a href="#ancestor-browsing-context" title="ancestor browsing
  context">ancestor browsing contexts</a>.</p>

  <p>The <dfn id="list-of-the-descendant-browsing-contexts">list of the descendant browsing contexts</dfn> of a
  <code><a href="dom.html#document">Document</a></code> <var title="">d</var> is the (ordered) list
  returned by the following algorithm:</p>

  <ol><li><p>Let <var title="">list</var> be an empty list.</p></li>

   <li>

    <p>For each <a href="#child-browsing-context">child browsing context</a> of <var title="">d</var> that is <a href="#browsing-context-nested-through" title="browsing context nested
    through">nested through</a> an element that is <a href="infrastructure.html#in-a-document" title="in
    a document">in the <code>Document</code></a> <var title="">d</var>, in the <a href="infrastructure.html#tree-order">tree order</a> of the elements
    nesting those <a href="#browsing-context" title="browsing context">browsing
    contexts</a>, run these substeps:</p>

    <ol><li><p>Append that <a href="#child-browsing-context">child browsing context</a> to the
     list <var title="">list</var>.</p>

     </li><li><p>Append the <a href="#list-of-the-descendant-browsing-contexts">list of the descendant browsing
     contexts</a> of the <a href="#active-document">active document</a> of that
     <a href="#child-browsing-context">child browsing context</a> to the list <var title="">list</var>.</p></li>

    </ol></li>

   <li><p>Return the constructed <var title="">list</var>.</p></li>

  </ol><p>A <code><a href="dom.html#document">Document</a></code> is said to be <dfn id="fully-active">fully active</dfn>
  when it is the <a href="#active-document">active document</a> of its <a href="#browsing-context">browsing
  context</a>, and either its browsing context is a <a href="#top-level-browsing-context">top-level
  browsing context</a>, or it has a <a href="#parent-browsing-context">parent browsing
  context</a> and the <code><a href="dom.html#document">Document</a></code> <a href="#browsing-context-nested-through" title="browsing
  context nested through">through which</a> it is <a href="#nested-browsing-context" title="nested browsing context">nested</a> is itself <a href="#fully-active">fully
  active</a>.</p>

  <p>Because they are nested through an element, <a href="#child-browsing-context" title="child
  browsing context">child browsing contexts</a> are always tied to
  a specific <code><a href="dom.html#document">Document</a></code> in their <a href="#parent-browsing-context">parent browsing
  context</a>. User agents must not allow the user to interact with
  <a href="#child-browsing-context" title="child browsing context">child browsing contexts</a>
  of elements that are in <code><a href="dom.html#document">Document</a></code>s that are not
  themselves <a href="#fully-active">fully active</a>.</p>

  <p>A <a href="#nested-browsing-context">nested browsing context</a> can have a <a href="the-iframe-element.html#seamless-browsing-context-flag">seamless
  browsing context flag</a> set, if it is embedded through an
  <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element with a <code title="attr-iframe-seamless"><a href="the-iframe-element.html#attr-iframe-seamless">seamless</a></code> attribute.</p>

  <p class="note">A <a href="#nested-browsing-context">nested browsing context</a> can in some
  cases be taken out of its <a href="#parent-browsing-context">parent browsing context</a> (e.g.
  if an <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element is removed from its
  <code><a href="dom.html#document">Document</a></code>). In such a situation, the <a href="#nested-browsing-context">nested
  browsing context</a> has no <a href="#parent-browsing-context">parent browsing context</a>,
  but it still has the same <a href="#browsing-context-container">browsing context container</a>
  and is still <a href="#browsing-context-nested-through" title="browsing context nested through">nested
  through</a> that element's <code><a href="dom.html#document">Document</a></code>. Such a
  <a href="#nested-browsing-context">nested browsing context</a> is <em>not</em> a
  <a href="#top-level-browsing-context">top-level browsing context</a>, and cannot contain
  <code><a href="dom.html#document">Document</a></code>s that are <a href="#fully-active">fully active</a>.
  Furthermore, if a <a href="#browsing-context-container">browsing context container</a> (such as
  an <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>) is moved to another <code><a href="dom.html#document">Document</a></code>,
  then the <a href="#parent-browsing-context">parent browsing context</a> of its <a href="#nested-browsing-context">nested
  browsing context</a> will change.</p>

  <p>The <dfn id="document-family">document family</dfn> of a <a href="#browsing-context">browsing context</a>
  consists of the union of all the <code><a href="dom.html#document">Document</a></code> objects in
  that <a href="#browsing-context">browsing context</a>'s <a href="#session-history">session history</a>
  and the <a href="#document-family" title="document family">document families</a> of
  all those <code><a href="dom.html#document">Document</a></code> objects. The <a href="#document-family">document
  family</a> of a <code><a href="dom.html#document">Document</a></code> object consists of the
  union of all the <a href="#document-family" title="document family">document
  families</a> of the <a href="#browsing-context" title="browsing context">browsing
  contexts</a> that are <a href="#browsing-context-nested-through" title="browsing context nested
  through">nested through</a> the <code><a href="dom.html#document">Document</a></code> object.</p>


  <h5 id="navigating-nested-browsing-contexts-in-the-dom"><span class="secno">5.1.1.1 </span>Navigating nested browsing contexts in the DOM</h5>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-top"><a href="#dom-top">top</a></code></dt>

   <dd>

    <p>Returns the <code><a href="#windowproxy">WindowProxy</a></code> for the <a href="#top-level-browsing-context">top-level browsing context</a>.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-parent"><a href="#dom-parent">parent</a></code></dt>

   <dd>

    <p>Returns the <code><a href="#windowproxy">WindowProxy</a></code> for the <a href="#parent-browsing-context">parent browsing context</a>.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-frameElement"><a href="#dom-frameelement">frameElement</a></code></dt>

   <dd>

    <p>Returns the <code><a href="infrastructure.html#element">Element</a></code> for the <a href="#browsing-context-container">browsing context container</a>.</p>

    <p>Returns null if there isn't one.</p>

    <p>Throws a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception in cross-origin situations.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-top" title="dom-top"><code>top</code></dfn> IDL attribute on
  the <code><a href="#window">Window</a></code> object of a <code><a href="dom.html#document">Document</a></code> in a
  <a href="#browsing-context">browsing context</a> <var title="">b</var> must return the
  <code><a href="#windowproxy">WindowProxy</a></code> object of its <a href="#top-level-browsing-context">top-level browsing
  context</a> (which would be its own <code><a href="#windowproxy">WindowProxy</a></code>
  object if it was a <a href="#top-level-browsing-context">top-level browsing context</a> itself),
  if it has one, or its own <code><a href="#windowproxy">WindowProxy</a></code> object otherwise
  (e.g. if it was a detached <a href="#nested-browsing-context">nested browsing
  context</a>).</p>

  <p>The <dfn id="dom-parent" title="dom-parent"><code>parent</code></dfn> IDL
  attribute on the <code><a href="#window">Window</a></code> object of a
  <code><a href="dom.html#document">Document</a></code> in a <a href="#browsing-context">browsing context</a> <var title="">b</var> must return the <code><a href="#windowproxy">WindowProxy</a></code> object of
  the <a href="#parent-browsing-context">parent browsing context</a>, if there is one (i.e. if
  <var title="">b</var> is a <a href="#child-browsing-context">child browsing context</a>), or
  the <code><a href="#windowproxy">WindowProxy</a></code> object of the <a href="#browsing-context">browsing
  context</a> <var title="">b</var> itself, otherwise (i.e. if it
  is a <a href="#top-level-browsing-context">top-level browsing context</a> or a detached
  <a href="#nested-browsing-context">nested browsing context</a>).</p>

  <p>The <dfn id="dom-frameelement" title="dom-frameElement"><code>frameElement</code></dfn>
  IDL attribute on the <code><a href="#window">Window</a></code> object of a
  <code><a href="dom.html#document">Document</a></code> <var title="">d</var>, on getting, must run
  the following algorithm:</p>

  <ol><li><p>If <var title="">d</var> is not a <code><a href="dom.html#document">Document</a></code> in a
   <a href="#nested-browsing-context">nested browsing context</a>, return null and abort these
   steps.</p></li>

   <li><p>If the <a href="#browsing-context-container">browsing context container</a>'s
   <code><a href="dom.html#document">Document</a></code> does not have the <a href="#same-origin" title="same
   origin">same</a> <a href="#effective-script-origin">effective script origin</a> as the
   <a href="#entry-script">entry script</a>, then throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code>
   exception.</p></li>

   <li><p>Otherwise, return the <a href="#browsing-context-container">browsing context
   container</a> for <var title="">b</var>.</p></li>

  </ol></div>



  <h4 id="auxiliary-browsing-contexts"><span class="secno">5.1.2 </span>Auxiliary browsing contexts</h4>

  <p>It is possible to create new browsing contexts that are related
  to a <a href="#top-level-browsing-context">top-level browsing context</a> without being nested
  through an element. Such browsing contexts are called <dfn id="auxiliary-browsing-context" title="auxiliary browsing context">auxiliary browsing
  contexts</dfn>. Auxiliary browsing contexts are always <a href="#top-level-browsing-context" title="top-level browsing context">top-level browsing
  contexts</a>.</p>

  <p>An <a href="#auxiliary-browsing-context">auxiliary browsing context</a> has an <dfn id="opener-browsing-context">opener
  browsing context</dfn>, which is the <a href="#browsing-context">browsing context</a>
  from which the <a href="#auxiliary-browsing-context">auxiliary browsing context</a> was
  created.</p>


  <h5 id="navigating-auxiliary-browsing-contexts-in-the-dom"><span class="secno">5.1.2.1 </span>Navigating auxiliary browsing contexts in the DOM</h5>

  <p>The <dfn id="dom-opener" title="dom-opener"><code>opener</code></dfn> IDL
  attribute on the <code><a href="#window">Window</a></code> object, on getting, must return
  the <code><a href="#windowproxy">WindowProxy</a></code> object of the <a href="#browsing-context">browsing
  context</a> from which the current <a href="#browsing-context">browsing context</a>
  was created (its <a href="#opener-browsing-context">opener browsing context</a>), if there is
  one, if it is still available, and if the current <a href="#browsing-context">browsing
  context</a> has not <i><a href="#disowned-its-opener">disowned its opener</a></i>; otherwise, it
  must return null. On setting, if the new value is null then the
  current <a href="#browsing-context">browsing context</a> must <dfn id="disowned-its-opener" title="disowned its
  opener">disown its opener</dfn>; if the new value is anything else
  then the user agent must ignore the new value.</p>



  <h4 id="secondary-browsing-contexts"><span class="secno">5.1.3 </span>Secondary browsing contexts</h4>

  <!-- This section only exists for the purpose of defining
  rel=sidebar, which was dropped due to wg decision in
     http://www.w3.org/Bugs/Public/show_bug.cgi?id=11183
  and then moved to the wiki -->

  <p>User agents may support <dfn id="secondary-browsing-context" title="secondary browsing
  context">secondary browsing contexts</dfn>, which are <a href="#browsing-context" title="browsing context">browsing contexts</a> that form part of
  the user agent's interface, apart from the main content area.</p>


<!--ADD-TOPIC:Security-->
  <div class="impl">

  <h4 id="security-nav"><span class="secno">5.1.4 </span>Security</h4>

  <p id="security-1">A <a href="#browsing-context">browsing context</a> <var title="">A</var> is <dfn id="allowed-to-navigate">allowed to navigate</dfn> a second
  <a href="#browsing-context">browsing context</a> <var title="">B</var> if one of the
  following conditions is true:</p>

  <ul><li>Either the <a href="#origin-0">origin</a> of the <a href="#active-document">active
   document</a> of <var title="">A</var> is the <a href="#same-origin" title="same
   origin">same</a> as the <a href="#origin-0">origin</a> of the <a href="#active-document">active
   document</a> of <var title="">B</var>, or</li>

   <li>The browsing context <var title="">A</var> is a <a href="#nested-browsing-context">nested
   browsing context</a> with a <a href="#top-level-browsing-context">top-level browsing
   context</a>, and its <a href="#top-level-browsing-context">top-level browsing context</a> is
   <var title="">B</var>, or</li>

   <li>The browsing context <var title="">B</var> is an
   <a href="#auxiliary-browsing-context">auxiliary browsing context</a> and <var title="">A</var>
   is <a href="#allowed-to-navigate">allowed to navigate</a> <var title="">B</var>'s
   <a href="#opener-browsing-context">opener browsing context</a>, or</li>

   <li>The browsing context <var title="">B</var> is not a
   <a href="#top-level-browsing-context">top-level browsing context</a>, but there exists an
   <a href="#ancestor-browsing-context">ancestor browsing context</a> of <var title="">B</var>
   whose <a href="#active-document">active document</a> has the <a href="#same-origin" title="same
   origin">same</a> <a href="#origin-0">origin</a> as the <a href="#active-document">active
   document</a> of <var title="">A</var> (possibly in fact being
   <var title="">A</var> itself).</li>

  </ul><hr><p>An element has a <dfn id="browsing-context-scope-origin">browsing context scope origin</dfn> if its
  <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing context</a> is a
  <a href="#top-level-browsing-context">top-level browsing context</a> or if all of its
  <code><a href="dom.html#document">Document</a></code>'s <a href="#ancestor-browsing-context" title="ancestor browsing
  context">ancestor browsing contexts</a> all have <a href="#active-document" title="active document">active documents</a> whose
  <a href="#origin-0">origin</a> are the <a href="#same-origin">same origin</a> as the
  element's <code><a href="dom.html#document">Document</a></code>'s <a href="#origin-0">origin</a>. If an element
  has a <a href="#browsing-context-scope-origin">browsing context scope origin</a>, then its value is
  the <a href="#origin-0">origin</a> of the element's <code><a href="dom.html#document">Document</a></code>.</p>

  </div>
<!--REMOVE-TOPIC:Security-->


  <div class="impl">

  <h4 id="groupings-of-browsing-contexts"><span class="secno">5.1.5 </span>Groupings of browsing contexts</h4>

  <p>Each <a href="#browsing-context">browsing context</a> is defined as having a list of
  one or more <dfn id="directly-reachable-browsing-contexts">directly reachable browsing contexts</dfn>. These
  are:</p>

  <ul><li>The <a href="#browsing-context">browsing context</a> itself.</li>

   <li>All the <a href="#browsing-context">browsing context</a>'s <a href="#child-browsing-context" title="child
   browsing context">child browsing contexts</a>.</li>

   <li>The <a href="#browsing-context">browsing context</a>'s <a href="#parent-browsing-context">parent browsing
   context</a>.</li>

   <li>All the <a href="#browsing-context" title="browsing context">browsing contexts</a>
   that have the <a href="#browsing-context">browsing context</a> as their <a href="#opener-browsing-context">opener
   browsing context</a>.</li>

   <li>The <a href="#browsing-context">browsing context</a>'s <a href="#opener-browsing-context">opener browsing
   context</a>.</li>

  </ul><p>The transitive closure of all the <a href="#browsing-context" title="browsing
  context">browsing contexts</a> that are <a href="#directly-reachable-browsing-contexts">directly reachable
  browsing contexts</a> forms a <dfn id="unit-of-related-browsing-contexts">unit of related browsing
  contexts</dfn>.</p>

  <p>Each <a href="#unit-of-related-browsing-contexts">unit of related browsing contexts</a> is then
  further divided into the smallest number of groups such that every
  member of each group has an <a href="#active-document">active document</a> with an
  <a href="#effective-script-origin">effective script origin</a> that, through appropriate
  manipulation of the <code title="dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> attribute, could
  be made to be the same as other members of the group, but could not
  be made the same as members of any other group. Each such group is a
  <dfn id="unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</dfn>.</p>

  <p>Each <a href="#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing
  contexts</a> can have an <dfn id="entry-script">entry script</dfn> which is used to
  obtain, amongst other things, the <a href="#script's-base-url">script's base URL</a> to
  <a href="urls.html#resolve-a-url" title="resolve a url">resolve</a> relative <a href="urls.html#url" title="URL">URLs</a> used in scripts running in that <a href="#unit-of-related-similar-origin-browsing-contexts">unit
  of related similar-origin browsing contexts</a>. Initially, there
  is no <a href="#entry-script">entry script</a>. It is changed by the <a href="#jump-to-a-code-entry-point">jump to
  a code entry-point</a> algorithm.</p>

  <p>Each <a href="#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing
  contexts</a> also has a <dfn id="running-mutation-observers">running mutation observers</dfn>
  flag, which must initially be false. It is used to prevent reentrant
  invocation of the algorithm to <a href="infrastructure.html#concept-mo-invoke" title="concept-mo-invoke">invoke <code>MutationObserver</code>
  objects</a>. For the purposes of <code><a href="infrastructure.html#mutationobserver">MutationObserver</a></code>
  objects, each <a href="#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing
  contexts</a> is a distinct <var title="MutationObserver scripting
  environment"><a href="infrastructure.html#mutationobserver-scripting-environment">scripting environment</a></var>.</p>

  <p class="note">There is also at most one <a href="#event-loop">event loop</a>
  per <a href="#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a>
  (though several <a href="#unit-of-related-similar-origin-browsing-contexts" title="unit of related similar-origin browsing
  contexts">units of related similar-origin browsing contexts</a>
  can have a shared <a href="#event-loop">event loop</a>).</p>

  </div>



  <h4 id="browsing-context-names"><span class="secno">5.1.6 </span>Browsing context names</h4>

  <p>Browsing contexts can have a <dfn id="browsing-context-name">browsing context name</dfn>. By
  default, a browsing context has no name (its name is not set).</p>

  <p>A <dfn id="valid-browsing-context-name">valid browsing context name</dfn> is any string with at
  least one character that does not start with a U+005F LOW LINE
  character. (Names starting with an underscore are reserved for
  special keywords.)</p>

  <p>A <dfn id="valid-browsing-context-name-or-keyword">valid browsing context name or keyword</dfn> is any string
  that is either a <a href="#valid-browsing-context-name">valid browsing context name</a> or that is
  an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for one of: <code title="">_blank</code>, <code title="">_self</code>, <code title="">_parent</code>, or <code title="">_top</code>.</p>

  <p>These values have different meanings based on whether the page is
  sandboxed or not, as summarized in the following (non-normative)
  table. In this table, "current" means the <a href="#browsing-context">browsing
  context</a> that the link or script is in, "parent" means the
  <a href="#parent-browsing-context">parent browsing context</a> of the one the link or script
  is in, "master" means the nearest <a href="#ancestor-browsing-context">ancestor browsing
  context</a> of the one the link or script is in that is not
  itself in a <a href="the-iframe-element.html#attr-iframe-seamless" title="attr-iframe-seamless">seamless
  iframe</a>, "top" means the <a href="#top-level-browsing-context">top-level browsing
  context</a> of the one the link or script is in, "new" means a
  new <a href="#top-level-browsing-context">top-level browsing context</a> or <a href="#auxiliary-browsing-context">auxiliary
  browsing context</a> is to be created, subject to various user
  preferences and user agent policies, "none" means that nothing will
  happen, and "maybe new" means the same as "new" if the "<code title="attr-iframe-sandbox-allow-popups"><a href="#attr-iframe-sandbox-allow-popups">allow-popups</a></code>"
  keyword is also specified on the <code title="attr-iframe-sandbox"><a href="the-iframe-element.html#attr-iframe-sandbox">sandbox</a></code> attribute (or if the user
  overrode the sandboxing), and the same as "none" otherwise.</p>

  <table><thead><tr><th rowspan="2">Keyword
     </th><th rowspan="2">Ordinary effect
     </th><th colspan="5">Effect in an <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> with...
    </th></tr><tr><!-- nothing --><th><code title="">seamless=""</code>
     </th><th><code title="">sandbox=""</code>
     </th><th><code title="">sandbox="" seamless=""</code>
     </th><th><code title="">sandbox="allow-top-navigation"</code>
     </th><th><code title="">sandbox="allow-top-navigation" seamless=""</code>

   </th></tr></thead><tbody><tr><td>none specified, for links and form submissions <!-- same as empty string -->
     </td><td>current
     </td><td>master
     </td><td>current
     </td><td>master
     </td><td>current
     </td><td>master

    </td></tr><tr><td>none specified, for <code title="dom-open"><a href="#dom-open">window.open()</a></code> <!-- same as _blank -->
     </td><td>new
     </td><td>new
     </td><td>maybe new&#8224;
     </td><td>maybe new&#8224;
     </td><td>maybe new&#8224;
     </td><td>maybe new&#8224;

    </td></tr><tr><td>empty string
     </td><td>current
     </td><td>master
     </td><td>current
     </td><td>master
     </td><td>current
     </td><td>master

    </td></tr><tr><td><code title="">_blank</code>
     </td><td>new
     </td><td>new
     </td><td>maybe new
     </td><td>maybe new
     </td><td>maybe new
     </td><td>maybe new

    </td></tr><tr><td><code title="">_self</code>
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current

    </td></tr><tr><td><code title="">_parent</code> if there isn't a parent
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current

    </td></tr><tr><td><code title="">_parent</code> if parent is also top
     </td><td>parent/top
     </td><td>parent/top
     </td><td>none
     </td><td>none
     </td><td>parent/top
     </td><td>parent/top

    </td></tr><tr><td><code title="">_parent</code> if there is one and it's not top
     </td><td>parent
     </td><td>parent
     </td><td>none
     </td><td>none
     </td><td>none
     </td><td>none

    </td></tr><tr><td><code title="">_top</code> if top is current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current

    </td></tr><tr><td><code title="">_top</code> if top is not current
     </td><td>top
     </td><td>top
     </td><td>none
     </td><td>none
     </td><td>top
     </td><td>top

    </td></tr><tr><td>name that doesn't exist
     </td><td>new
     </td><td>new
     </td><td>maybe new
     </td><td>maybe new
     </td><td>maybe new
     </td><td>maybe new

    </td></tr><tr><td>name that exists and is a descendant
     </td><td>specified descendant
     </td><td>specified descendant
     </td><td>specified descendant
     </td><td>specified descendant
     </td><td>specified descendant
     </td><td>specified descendant

    </td></tr><tr><td>name that exists and is current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current
     </td><td>current

    </td></tr><tr><td>name that exists and is an ancestor that is top
     </td><td>specified ancestor
     </td><td>specified ancestor
     </td><td>none
     </td><td>none
     </td><td>specified ancestor/top
     </td><td>specified ancestor/top

    </td></tr><tr><td>name that exists and is an ancestor that is not top
     </td><td>specified ancestor
     </td><td>specified ancestor
     </td><td>none
     </td><td>none
     </td><td>none
     </td><td>none

  </td></tr></tbody></table><p><small>&#8224; This case is only possible if the <code title="attr-iframe-sandbox"><a href="the-iframe-element.html#attr-iframe-sandbox">sandbox</a></code> attribute also allows
  scripts.</small></p>

  <div class="impl">

  <hr><p>An algorithm is <dfn id="allowed-to-show-a-pop-up">allowed to show a pop-up</dfn> if, in the
  <a href="#concept-task" title="concept-task">task</a> in which the algorithm is
  running, either:</p>

  <ul class="brief"><li>an <a href="content-models.html#activation-behavior">activation behavior</a> is currently being
   processed whose <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> event was
   <a href="infrastructure.html#concept-events-trusted" title="concept-events-trusted">trusted</a>, or</li>

   <li>the event listener for a <a href="infrastructure.html#concept-events-trusted" title="concept-events-trusted">trusted</a> <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> event is being handled.</li>

  </ul><hr><p><dfn id="the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">The rules for choosing a browsing context given a browsing
  context name</dfn> are as follows. The rules assume that they are
  being applied in the context of a <a href="#browsing-context">browsing context</a>.</p>

  <ol><li>

    <p>If the given browsing context name is the empty string or <code title="">_self</code>, then the chosen browsing context must be
    the current one.</p>

    <p>If the given browsing context name is <code title="">_self</code>, then this is an <a href="#explicit-self-navigation-override">explicit
    self-navigation override</a>, which overrides the behavior of
    the <a href="the-iframe-element.html#seamless-browsing-context-flag">seamless browsing context flag</a> set by the <code title="attr-iframe-seamless"><a href="the-iframe-element.html#attr-iframe-seamless">seamless</a></code> attribute on
    <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements.</p>

   </li>

   <li><p>If the given browsing context name is <code title="">_parent</code>, then the chosen browsing context must be
   the <a href="#parent-browsing-context"><em>parent</em> browsing context</a> of the current
   one, unless there isn't one, in which case the chosen browsing
   context must be the current browsing context.</p></li>

   <li><p>If the given browsing context name is <code title="">_top</code>, then the chosen browsing context must be the
   <a href="#top-level-browsing-context">top-level browsing context</a> of the current one, if
   there is one, or else the current browsing context.</p></li>

   <li>

    <p>If the given browsing context name is not <code title="">_blank</code> and there exists a browsing context whose
    <a href="#browsing-context-name" title="browsing context name">name</a> is the same as the
    given browsing context name, and the current browsing context is
    <a href="#allowed-to-navigate">allowed to navigate</a> that browsing context, and the
    user agent determines that the two browsing contexts are related
    enough that it is ok if they reach each other, then that browsing
    context must be the chosen one. If there are multiple matching
    browsing contexts, the user agent should select one in some
    arbitrary consistent manner, such as the most recently opened,
    most recently focused, or more closely related.</p>

    <p>If the browsing context is chosen by this step to be the
    current browsing context, then this is also an <a href="#explicit-self-navigation-override">explicit
    self-navigation override</a>.</p>

   </li>

   <li>

    <p>Otherwise, a new browsing context is being requested, and what
    happens depends on the user agent's configuration and/or abilities
    &#8212; it is determined by the rules given for the first
    applicable option from the following list:</p>

    <dl class="switch"><dt id="sandboxWindowOpen">If the current browsing context's
     <a href="#active-document">active document</a>'s <a href="#active-sandboxing-flag-set">active sandboxing flag
     set</a> has the <a href="#sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed auxiliary navigation browsing
     context flag</a> set.</dt>

     <dd>

      <p>Typically, there is no chosen browsing context.</p>

      <p>The user agent may offer to create a new <a href="#top-level-browsing-context">top-level
      browsing context</a> or reuse an existing <a href="#top-level-browsing-context">top-level
      browsing context</a>. If the user picks one of those options,
      then the designated browsing context must be the chosen one (the
      browsing context's name isn't set to the given browsing context
      name). The default behaviour (if the user agent doesn't offer
      the option to the user, or if the user declines to allow a
      browsing context to be used) must be that there must not be a
      chosen browsing context.</p>

      <p class="warning">If this case occurs, it means that an author
      has explicitly sandboxed the document that is trying to open a
      link.</p>

     </dd>


     <dt id="noopener">If the user agent has been configured such that
     in this instance it will create a new browsing context, and the
     browsing context is being requested as part of <a href="#following-hyperlinks-0" title="following hyperlinks">following a hyperlink</a> whose
     <a href="#linkTypes">link types</a> include the <code title="rel-noreferrer"><a href="#link-type-noreferrer">noreferrer</a></code> keyword</dt>

     <dd><p>A new <a href="#top-level-browsing-context">top-level browsing context</a> must be
     created. If the given browsing context name is not <code title="">_blank</code>, then the new top-level browsing context's
     name must be the given browsing context name (otherwise, it has
     no name). The chosen browsing context must be this new browsing
     context.</p>

     <p class="note">If it is immediately <a href="#navigate" title="navigate">navigated</a>, then the navigation will be
     done with <a href="#replacement-enabled">replacement enabled</a>.</p></dd>


     <dt>If the user agent has been configured such that in this
     instance it will create a new browsing context, and the <code title="rel-noreferrer"><a href="#link-type-noreferrer">noreferrer</a></code> keyword doesn't
     apply</dt>

     <dd><p>A new <a href="#auxiliary-browsing-context">auxiliary browsing context</a> must be
     created, with the <a href="#opener-browsing-context">opener browsing context</a> being the
     current one. If the given browsing context name is not <code title="">_blank</code>, then the new auxiliary browsing context's
     name must be the given browsing context name (otherwise, it has
     no name). The chosen browsing context must be this new browsing
     context.</p>

     <p class="note">If it is immediately <a href="#navigate" title="navigate">navigated</a>, then the navigation will be
     done with <a href="#replacement-enabled">replacement enabled</a>.</p></dd>


     <dt>If the user agent has been configured such that in this
     instance it will reuse the current browsing context</dt>

     <dd><p>The chosen browsing context is the current browsing
     context.</p></dd>


     <dt>If the user agent has been configured such that in this
     instance it will not find a browsing context</dt>

     <dd><p>There must not be a chosen browsing context.</p></dd>

    </dl><p>User agent implementors are encouraged to provide a way for
    users to configure the user agent to always reuse the current
    browsing context.</p>

    <p>If the current browsing context's <a href="#active-document">active
    document</a>'s <a href="#active-sandboxing-flag-set">active sandboxing flag set</a> has the
    <a href="#sandboxed-navigation-browsing-context-flag">sandboxed navigation browsing context flag</a> set and
    chosen browsing context picked above, if any, is a new browsing
    context (whether top-level or auxiliary), then all the flags that
    are set in the current browsing context's <a href="#active-document">active
    document</a>'s <a href="#active-sandboxing-flag-set">active sandboxing flag set</a> when the
    new browsing context is created must be set in the new browsing
    context's <a href="#popup-sandboxing-flag-set">popup sandboxing flag set</a>, and the current
    browsing context must be set as the new browsing context's
    <a href="#one-permitted-sandboxed-navigator">one permitted sandboxed navigator</a>.</p>

   </li>

  </ol></div>



<!--TOPIC:DOM APIs-->
  <h3 id="the-window-object"><span class="secno">5.2 </span>The <code><a href="#window">Window</a></code> object</h3>

  <pre class="idl">[NamedPropertiesObject]
interface <dfn id="window">Window</dfn> : <a href="infrastructure.html#eventtarget">EventTarget</a> {
  // the current browsing context
  [Unforgeable] readonly attribute <a href="#windowproxy">WindowProxy</a> <a href="#dom-window" title="dom-window">window</a>;
  [Replaceable] readonly attribute <a href="#windowproxy">WindowProxy</a> <a href="#dom-self" title="dom-self">self</a>;
  [Unforgeable] readonly attribute <a href="dom.html#document">Document</a> <a href="#dom-document-0" title="dom-document">document</a>;
           attribute DOMString <a href="#dom-name" title="dom-name">name</a>; <!-- not [Replaceable] per WebKit and IE8 -->
  [PutForwards=<a href="#dom-location-href" title="dom-location-href">href</a>, Unforgeable] readonly attribute <a href="#location">Location</a> <a href="#dom-location" title="dom-location">location</a>;
  readonly attribute <a href="#history-1">History</a> <a href="#dom-history" title="dom-history">history</a>;
<!--FIND-->
  [Replaceable] readonly attribute <a href="#barprop">BarProp</a> <a href="#dom-window-locationbar" title="dom-window-locationbar">locationbar</a>;
  [Replaceable] readonly attribute <a href="#barprop">BarProp</a> <a href="#dom-window-menubar" title="dom-window-menubar">menubar</a>;
  [Replaceable] readonly attribute <a href="#barprop">BarProp</a> <a href="#dom-window-personalbar" title="dom-window-personalbar">personalbar</a>;
  [Replaceable] readonly attribute <a href="#barprop">BarProp</a> <a href="#dom-window-scrollbars" title="dom-window-scrollbars">scrollbars</a>;
  [Replaceable] readonly attribute <a href="#barprop">BarProp</a> <a href="#dom-window-statusbar" title="dom-window-statusbar">statusbar</a>;
  [Replaceable] readonly attribute <a href="#barprop">BarProp</a> <a href="#dom-window-toolbar" title="dom-window-toolbar">toolbar</a>;<!--
  [Replaceable] readonly attribute <span>BarProp</span> <span title="dom-window-directories">directories</span>; // legacy (Gecko-only) -->
           attribute DOMString <a href="#dom-window-status" title="dom-window-status">status</a>;
  void <a href="#dom-window-close" title="dom-window-close">close</a>();
  void <a href="#dom-window-stop" title="dom-window-stop">stop</a>();
  void <a href="#dom-window-focus" title="dom-window-focus">focus</a>();
  void <a href="#dom-window-blur" title="dom-window-blur">blur</a>();

  // other browsing contexts
  [Replaceable] readonly attribute <a href="#windowproxy">WindowProxy</a> <a href="#dom-frames" title="dom-frames">frames</a>;
  [Replaceable] readonly attribute unsigned long <a href="#dom-length" title="dom-length">length</a>;
  [Unforgeable] readonly attribute <a href="#windowproxy">WindowProxy</a> <a href="#dom-top" title="dom-top">top</a>;
           attribute <a href="#windowproxy">WindowProxy</a>? <a href="#dom-opener" title="dom-opener">opener</a>;
  readonly attribute <a href="#windowproxy">WindowProxy</a> <a href="#dom-parent" title="dom-parent">parent</a>;
  readonly attribute <a href="infrastructure.html#element">Element</a>? <a href="#dom-frameelement" title="dom-frameElement">frameElement</a>;
  <a href="#windowproxy">WindowProxy</a> <a href="#dom-open" title="dom-open">open</a>(optional DOMString url, optional DOMString target, optional DOMString features, optional boolean replace);
  <a href="#dom-window-item" title="dom-window-item">getter</a> <a href="#windowproxy">WindowProxy</a> (unsigned long index);
  <a href="#dom-window-nameditem" title="dom-window-namedItem">getter</a> object (DOMString name);

  // the user agent
  readonly attribute <a href="#navigator">Navigator</a> <a href="#dom-navigator" title="dom-navigator">navigator</a>; <!-- IE also has window.clientInformation === window.navigator -->
  readonly attribute <a href="#external">External</a> <a href="#dom-external" title="dom-external">external</a>;
  readonly attribute <a href="#applicationcache">ApplicationCache</a> <a href="#dom-applicationcache" title="dom-applicationCache">applicationCache</a>;

  // user prompts
  void <a href="#dom-alert" title="dom-alert">alert</a>(DOMString message);
  boolean <a href="#dom-confirm" title="dom-confirm">confirm</a>(DOMString message);
  DOMString? <a href="#dom-prompt" title="dom-prompt">prompt</a>(DOMString message, optional DOMString default);
  void <a href="#dom-print" title="dom-print">print</a>();
  any <a href="#dom-showmodaldialog" title="dom-showModalDialog">showModalDialog</a>(DOMString url, optional any argument<!--, optional DOMString features-->);

<!--POSTMSG-->
  // <a href="#event-handler-idl-attributes">event handler IDL attributes</a>
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onabort" title="handler-onabort">onabort</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onafterprint" title="handler-window-onafterprint">onafterprint</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onbeforeprint" title="handler-window-onbeforeprint">onbeforeprint</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onbeforeunload" title="handler-window-onbeforeunload">onbeforeunload</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onblur" title="handler-window-onblur">onblur</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-oncancel" title="handler-oncancel">oncancel</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-oncanplay" title="handler-oncanplay">oncanplay</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-oncanplaythrough" title="handler-oncanplaythrough">oncanplaythrough</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onchange" title="handler-onchange">onchange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onclick" title="handler-onclick">onclick</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onclose" title="handler-onclose">onclose</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-oncontextmenu" title="handler-oncontextmenu">oncontextmenu</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-oncuechange" title="handler-oncuechange">oncuechange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondblclick" title="handler-ondblclick">ondblclick</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondrag" title="handler-ondrag">ondrag</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondragend" title="handler-ondragend">ondragend</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondragenter" title="handler-ondragenter">ondragenter</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondragleave" title="handler-ondragleave">ondragleave</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondragover" title="handler-ondragover">ondragover</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondragstart" title="handler-ondragstart">ondragstart</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondrop" title="handler-ondrop">ondrop</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ondurationchange" title="handler-ondurationchange">ondurationchange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onemptied" title="handler-onemptied">onemptied</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onended" title="handler-onended">onended</a>;
           attribute <a href="#onerroreventhandler">OnErrorEventHandler</a> <a href="#handler-window-onerror" title="handler-window-onerror">onerror</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onfocus" title="handler-window-onfocus">onfocus</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onhashchange" title="handler-window-onhashchange">onhashchange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-oninput" title="handler-oninput">oninput</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-oninvalid" title="handler-oninvalid">oninvalid</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onkeydown" title="handler-onkeydown">onkeydown</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onkeypress" title="handler-onkeypress">onkeypress</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onkeyup" title="handler-onkeyup">onkeyup</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onload" title="handler-window-onload">onload</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onloadeddata" title="handler-onloadeddata">onloadeddata</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onloadedmetadata" title="handler-onloadedmetadata">onloadedmetadata</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onloadstart" title="handler-onloadstart">onloadstart</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onmessage" title="handler-window-onmessage">onmessage</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onmousedown" title="handler-onmousedown">onmousedown</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onmousemove" title="handler-onmousemove">onmousemove</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onmouseout" title="handler-onmouseout">onmouseout</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onmouseover" title="handler-onmouseover">onmouseover</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onmouseup" title="handler-onmouseup">onmouseup</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onmousewheel" title="handler-onmousewheel">onmousewheel</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onoffline" title="handler-window-onoffline">onoffline</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-ononline" title="handler-window-ononline">ononline</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onpause" title="handler-onpause">onpause</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onplay" title="handler-onplay">onplay</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onplaying" title="handler-onplaying">onplaying</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onpagehide" title="handler-window-onpagehide">onpagehide</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onpageshow" title="handler-window-onpageshow">onpageshow</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onpopstate" title="handler-window-onpopstate">onpopstate</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onprogress" title="handler-onprogress">onprogress</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onratechange" title="handler-onratechange">onratechange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onreset" title="handler-onreset">onreset</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onresize" title="handler-window-onresize">onresize</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onscroll" title="handler-onscroll">onscroll</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onseeked" title="handler-onseeked">onseeked</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onseeking" title="handler-onseeking">onseeking</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onselect" title="handler-onselect">onselect</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onshow" title="handler-onshow">onshow</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onstalled" title="handler-onstalled">onstalled</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onstorage" title="handler-window-onstorage">onstorage</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onsubmit" title="handler-onsubmit">onsubmit</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onsuspend" title="handler-onsuspend">onsuspend</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-ontimeupdate" title="handler-ontimeupdate">ontimeupdate</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onunload" title="handler-window-onunload">onunload</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onvolumechange" title="handler-onvolumechange">onvolumechange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-onwaiting" title="handler-onwaiting">onwaiting</a>;
};</pre>

<!-- for more features to add here, look here:
 http://msdn.microsoft.com/workshop/author/dhtml/reference/objects/obj_window.asp
 http://www.mozilla.org/docs/dom/domref/dom_window_ref.html
 http://lxr.mozilla.org/mozilla/source/dom/public/idl/base/nsIDOMWindow.idl - scrollBy, etc
 http://lxr.mozilla.org/mozilla/source/dom/public/idl/base/nsIDOMWindowInternal.idl - DOM level 0
-->

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-window"><a href="#dom-window">window</a></code></dt>
   <dt><var title="">window</var> . <code title="dom-frames"><a href="#dom-frames">frames</a></code></dt>
   <dt><var title="">window</var> . <code title="dom-self"><a href="#dom-self">self</a></code></dt>

   <dd>

    <p>These attributes all return <var title="">window</var>.</p>

   </dd>


   <dt><var title="">window</var> . <code title="dom-document"><a href="#dom-document-0">document</a></code></dt>

   <dd>

    <p>Returns the <a href="#active-document">active document</a>.</p>

   </dd>


   <dt><var title="">document</var> . <code title="dom-document-defaultView"><a href="#dom-document-defaultview">defaultView</a></code></dt>

   <dd>

    <p>Returns the <code><a href="#window">Window</a></code> object of the <a href="#active-document">active document</a>.</p>

   </dd>

  </dl><div class="impl">

  <p>The <code><a href="#window">Window</a></code> interface must only be <a href="infrastructure.html#expose" title="expose">exposed</a> if the <a href="infrastructure.html#javascript-global-environment">JavaScript global
  environment</a> is a <a href="#document-environment">document environment</a>.</p>

  <p>The <dfn id="dom-window" title="dom-window"><code>window</code></dfn>, <dfn id="dom-frames" title="dom-frames"><code>frames</code></dfn>, and <dfn id="dom-self" title="dom-self"><code>self</code></dfn> IDL attributes must all
  return the <code><a href="#window">Window</a></code> object's <a href="#browsing-context">browsing
  context</a>'s <code><a href="#windowproxy">WindowProxy</a></code> object.</p>

  <p>The <dfn id="dom-document-0" title="dom-document"><code>document</code></dfn> IDL
  attribute must return the <code><a href="dom.html#document">Document</a></code> object of the
  <code><a href="#window">Window</a></code> object's <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing
  context</a>'s <a href="#active-document">active document</a>.</p>

  <p>The <dfn id="dom-document-defaultview" title="dom-document-defaultView"><code>defaultView</code></dfn> IDL
  attribute of the <code><a href="dom.html#document">Document</a></code> interface must return the
  <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing context</a>'s
  <code><a href="#windowproxy">WindowProxy</a></code> object, if there is one, or null
  otherwise.</p>

  <hr><p>For historical reasons, <code><a href="#window">Window</a></code> objects must also
  have a writable, configurable, non-enumerable property named
  <dfn id="htmldocument"><code>HTMLDocument</code></dfn> whose value is the
  <code><a href="dom.html#document">Document</a></code> interface object.</p>

  </div>


<!--ADD-TOPIC:Security-->
  <div class="impl">

  <h4 id="security-window"><span class="secno">5.2.1 </span>Security</h4>

  <p id="security-2">User agents must throw a
  <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception whenever any properties of a
  <code><a href="#window">Window</a></code> object are accessed by scripts whose
  <a href="#effective-script-origin">effective script origin</a> is not the same as the
  <code><a href="#window">Window</a></code> object's <code><a href="dom.html#document">Document</a></code>'s <a href="#effective-script-origin">effective
  script origin</a>, with the following exceptions:</p>

  <ul><li>The <code title="dom-location"><a href="#dom-location">location</a></code> attribute

   </li><li>The <code title="dom-window-postMessage">postMessage()</code> method

   </li><li>The <code title="dom-frames"><a href="#dom-frames">frames</a></code> attribute

   </li><li>The <a href="#dynamic-nested-browsing-context-properties">dynamic nested browsing context properties</a>

  </li></ul><p>When a script whose <a href="#effective-script-origin">effective script origin</a> is not
  the same as the <code><a href="#window">Window</a></code> object's <code><a href="dom.html#document">Document</a></code>'s
  <a href="#effective-script-origin">effective script origin</a> attempts to access that
  <code><a href="#window">Window</a></code> object's methods or attributes, the user agent
  must act as if any changes to the <code><a href="#window">Window</a></code> object's
  properties, getters, setters, etc, were not present.</p>

  <p>For members that return objects (including function objects),
  each distinct <a href="#effective-script-origin">effective script origin</a> that is not the
  same as the <code><a href="#window">Window</a></code> object's <code><a href="dom.html#document">Document</a></code>'s
  <a href="#effective-script-origin">effective script origin</a> must be provided with a
  separate set of objects. These objects must have the prototype chain
  appropriate for the script for which the objects are created (not
  those that would be appropriate for scripts whose <a href="#script's-global-object">script's
  global object</a> is the <code><a href="#window">Window</a></code> object in
  question).</p>

  <div class="example">

   <p>For instance, if two frames containing <code><a href="dom.html#document">Document</a></code>s
   from different <a href="#origin-0" title="origin">origins</a> access the same
   <code><a href="#window">Window</a></code> object's <code title="dom-window-postMessage">postMessage()</code> method, they
   will get distinct objects that are not equal.</p>

  </div>

  </div>
<!--REMOVE-TOPIC:Security-->



  <h4 id="apis-for-creating-and-navigating-browsing-contexts-by-name"><span class="secno">5.2.2 </span>APIs for creating and navigating browsing contexts by name</h4>

  <dl class="domintro"><dt><var title="">window</var> = <var title="">window</var> . <code title="dom-open"><a href="#dom-open">open</a></code>( [ <var title="">url</var> [, <var title="">target</var> [, <var title="">features</var> [, <var title="">replace</var> ] ] ] ] )</dt>

   <dd>

    <p>Opens a window to show <var title="">url</var> (defaults to
    <code><a href="urls.html#about:blank">about:blank</a></code>), and returns it. The <var title="">target</var> argument gives the name of the new
    window. If a window exists with that name already, it is
    reused. The <var title="">replace</var> attribute, if true, means
    that whatever page is currently open in that window will be
    removed from the window's session history. The <var title="">features</var> argument is ignored.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-name"><a href="#dom-name">name</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the name of the window.</p>

    <p>Can be set, to change the name.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-window-close"><a href="#dom-window-close">close</a></code>()</dt>

   <dd>

    <p>Closes the window.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-window-stop"><a href="#dom-window-stop">stop</a></code>()</dt>

   <dd>

    <p>Cancels the document load.</p>

   </dd>

  </dl><div class="impl">

  <!-- This whole section should be rewritten to use algorithmic style -->

  <p>The <dfn id="dom-open" title="dom-open"><code>open()</code></dfn> method on
  <code><a href="#window">Window</a></code> objects provides a mechanism for <a href="#navigate" title="navigate">navigating</a> an existing <a href="#browsing-context">browsing
  context</a> or opening and navigating an <a href="#auxiliary-browsing-context">auxiliary browsing
  context</a>.</p>

  <p>The method has four arguments, though they are all optional.</p>

  <p>The first argument, <var title="">url</var>, must be a
  <a href="urls.html#valid-non-empty-url">valid non-empty URL</a> for a page to load in the browsing
  context. If no arguments are provided, or if the first argument is
  the empty string, then the <var title="">url</var> argument defaults
  to "<code><a href="urls.html#about:blank">about:blank</a></code>". The argument must be <a href="urls.html#resolve-a-url" title="resolve a url">resolved</a> to an <a href="urls.html#absolute-url">absolute
  URL</a> (or an error), relative to the <a href="#entry-script">entry
  script</a>'s <a href="#script's-base-url" title="script's base URL">base URL</a>,
  when the method is invoked.</p>

  <p>The second argument, <var title="">target</var>, specifies the
  <a href="#browsing-context-name" title="browsing context name">name</a> of the browsing
  context that is to be navigated. It must be a <a href="#valid-browsing-context-name-or-keyword">valid browsing
  context name or keyword</a>. If fewer than two arguments are
  provided, then the <var title="">target</var> argument defaults to the
  value "<code>_blank</code>".</p>

  <p>The third argument, <var title="">features</var>, has no defined
  effect and is mentioned for historical reasons only. User agents may
  interpret this argument as instructions to set the size and position
  of the browsing context, but are encouraged to instead ignore the
  argument entirely.</p>

  <p>The fourth argument, <var title="">replace</var>, specifies
  whether or not the new page will <a href="#replacement-enabled" title="replacement
  enabled">replace</a> the page currently loaded in the browsing
  context, when <var title="">target</var> identifies an existing
  browsing context (as opposed to leaving the current page in the
  browsing context's <a href="#session-history">session history</a>). When three or
  fewer arguments are provided, <var title="">replace</var> defaults
  to false.</p>

  <p>When the method is invoked, the user agent must first select a
  <a href="#browsing-context">browsing context</a> to navigate by applying <a href="#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the
  rules for choosing a browsing context given a browsing context
  name</a> using the <var title="">target</var> argument as the
  name and the <a href="#browsing-context">browsing context</a> of the script as the
  context in which the algorithm is executed, unless the user has
  indicated a preference, in which case the browsing context to
  navigate may instead be the one indicated by the user.</p>

  <p class="example">For example, suppose there is a user agent that
  supports control-clicking a link to open it in a new tab. If a user
  clicks in that user agent on an element whose <code title="handler-onclick"><a href="#handler-onclick">onclick</a></code> handler uses the <code title="dom-open"><a href="#dom-open">window.open()</a></code> API to open a page in an
  iframe, but, while doing so, holds the control key down, the user
  agent could override the selection of the target browsing context to
  instead target a new tab.</p>

  <p>If the method is not <a href="#allowed-to-show-a-pop-up">allowed to show a pop-up</a> and
  applying <a href="#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for choosing a browsing context given a
  browsing context name</a> using the <var title="">target</var>
  argument, would result in there not being a chosen browsing context,
  then throw an <code><a href="infrastructure.html#invalidaccesserror">InvalidAccessError</a></code> exception and abort
  these steps.</p>

  <p>Otherwise, if <var title="">url</var> is not
  "<code><a href="urls.html#about:blank">about:blank</a></code>", the user agent must
  <a href="#navigate">navigate</a><!--DONAV window.open()--> the selected
  <a href="#browsing-context">browsing context</a> to the <a href="urls.html#absolute-url">absolute URL</a>
  obtained from <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> <var title="">url</var> earlier. If the <var title="">replace</var> is
  true or if the <a href="#browsing-context">browsing context</a> was just created as
  part of <a href="#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for choosing a browsing context given a
  browsing context name</a>, then <a href="#replacement-enabled" title="replacement
  enabled">replacement must be enabled</a>. The navigation must be
  done with the <a href="#script's-browsing-context" title="script's browsing context">browsing
  context</a> of the <a href="#entry-script">entry script</a> as the <a href="#source-browsing-context">source
  browsing context</a>. If the <a href="urls.html#resolve-a-url">resolve a URL</a> algorithm
  failed, then the user agent may either instead <a href="#navigate">navigate</a>
  to an inline error page, using the same replacement behavior and
  source browsing context behavior as described earlier in this
  paragraph; or treat the <var title="">url</var> as
  "<code><a href="urls.html#about:blank">about:blank</a></code>", acting as described in the next
  paragraph.</p>

  <p>If <var title="">url</var> <em>is</em>
  "<code><a href="urls.html#about:blank">about:blank</a></code>", the user agent must instead <a href="#queue-a-task">queue
  a task</a> to <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-load">load</code> at the selected <a href="#browsing-context">browsing
  context</a>'s <code><a href="#window">Window</a></code> object, but with its <code title="dom-event-target"><a href="infrastructure.html#dom-event-target">target</a></code> set to the selected
  <a href="#browsing-context">browsing context</a>'s <code><a href="#window">Window</a></code> object's
  <code><a href="dom.html#document">Document</a></code> object (and the <code title="dom-event-currentTarget">currentTarget</code> set to the
  <code><a href="#window">Window</a></code> object).</p>

  <p>The method must return the <code><a href="#windowproxy">WindowProxy</a></code> object of the
  <a href="#browsing-context">browsing context</a> that was navigated, or null if no
  browsing context was navigated.</p>

  <hr><p>The <dfn id="dom-name" title="dom-name"><code>name</code></dfn> attribute of
  the <code><a href="#window">Window</a></code> object must, on getting, return the current
  <a href="#browsing-context-name" title="browsing context name">name</a> of the
  <a href="#browsing-context">browsing context</a>, and, on setting, set the <a href="#browsing-context-name" title="browsing context name">name</a> of the <a href="#browsing-context">browsing
  context</a> to the new value.</p>

  <p class="note">The name <a href="#resetBCName">gets reset</a> when
  the browsing context is navigated to another domain.</p>

  <hr><p>The <dfn id="dom-window-close" title="dom-window-close"><code>close()</code></dfn>
  method on <code><a href="#window">Window</a></code> objects should, if the corresponding
  <a href="#browsing-context">browsing context</a> <var title="">A</var> is
  <a href="#script-closable">script-closable</a> and the <a href="#script's-browsing-context" title="script's
  browsing context">browsing context</a> of the <a href="#concept-script" title="concept-script">script</a> that invokes the method is
  <a href="#allowed-to-navigate">allowed to navigate</a> the <a href="#browsing-context">browsing context</a>
  <var title="">A</var>, close the <a href="#browsing-context">browsing context</a> <var title="">A</var> (and may <a href="#a-browsing-context-is-discarded" title="a browsing context is
  discarded">discard</a> it too).</p>

  <p>A <a href="#browsing-context">browsing context</a> is <dfn id="script-closable">script-closable</dfn> if
  it is an <a href="#auxiliary-browsing-context">auxiliary browsing context</a> that was created by
  a script (as opposed to by an action of the user), or if it is a
  <a href="#browsing-context">browsing context</a> whose <a href="#session-history">session history</a>
  contains only one <code><a href="dom.html#document">Document</a></code>.</p>

  <p>The <dfn id="dom-window-stop" title="dom-window-stop"><code>stop()</code></dfn> method
  on <code><a href="#window">Window</a></code> objects should, if there is an existing
  attempt to <a href="#navigate">navigate</a> the <a href="#browsing-context">browsing context</a>
  and that attempt is not currently running the <a href="#unload-a-document">unload a
  document</a> algorithm, cancel that <a href="#navigate" title="navigate">navigation</a>; then, it must <a href="#abort-a-document" title="abort
  a document">abort</a> the <a href="#active-document">active document</a> of the
  <a href="#browsing-context">browsing context</a> of the <code><a href="#window">Window</a></code> object on
  which it was invoked.</p>

  </div>


  <h4 id="accessing-other-browsing-contexts"><span class="secno">5.2.3 </span>Accessing other browsing contexts</h4>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-length"><a href="#dom-length">length</a></code></dt>

   <dd>

    <p>Returns the number of <a href="#child-browsing-context" title="child browsing
    context">child browsing contexts</a>.</p>

   </dd>

   <dt><var title="">window</var>[<var title="">index</var>]</dt>

   <dd>

    <p>Returns the indicated <a href="#child-browsing-context">child browsing context</a>.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-length" title="dom-length"><code>length</code></dfn> IDL
  attribute on the <code><a href="#window">Window</a></code> interface must return the
  number of <a href="#child-browsing-context" title="child browsing context">child browsing
  contexts</a> that are <a href="#browsing-context-nested-through" title="browsing context nested
  through">nested through</a> elements that are <a href="infrastructure.html#in-a-document" title="in a
  document">in the <code>Document</code></a> that is the
  <a href="#active-document">active document</a> of that <code><a href="#window">Window</a></code> object, if
  that <code><a href="#window">Window</a></code>'s <a href="#browsing-context">browsing context</a> shares the
  same <a href="#event-loop">event loop</a> as the <a href="#script's-browsing-context">script's browsing
  context</a> of the <a href="#entry-script">entry script</a> accessing the IDL
  attribute; otherwise, it must return zero.</p>

  <!-- in other words, frames are only accessible to same-thread processes -->

  <p>The <a href="infrastructure.html#supported-property-indices">supported property indices</a> on the
  <code><a href="#window">Window</a></code> object at any instant are the numbers in the
  range 0 .. <span title=""><var title="">n</var>-1</span>, where <var title="">n</var> is the number returned by the <code title="dom-length"><a href="#dom-length">length</a></code> IDL attribute. If <var title="">n</var> is zero then there are no <a href="infrastructure.html#supported-property-indices">supported property
  indices</a>.</p>

  <p>To <dfn id="dom-window-item" title="dom-window-item">determine the value of an indexed
  property</dfn> <var title="">index</var> of a <code><a href="#window">Window</a></code>
  object, the user agent must return the <code><a href="#windowproxy">WindowProxy</a></code>
  object of the <var title="">index</var>th <a href="#child-browsing-context">child browsing
  context</a> of the <code><a href="dom.html#document">Document</a></code> that is nested through
  an element that is <a href="infrastructure.html#in-a-document" title="in a document">in the
  <code>Document</code></a>, sorted in the <a href="infrastructure.html#tree-order">tree order</a>
  of the elements nesting those <a href="#browsing-context" title="browsing
  context">browsing contexts</a>.</p>

  <p>These properties are the <dfn id="dynamic-nested-browsing-context-properties">dynamic nested browsing context
  properties</dfn>.</p>

  </div>



  <h4 id="named-access-on-the-window-object"><span class="secno">5.2.4 </span>Named access on the <code><a href="#window">Window</a></code> object</h4>

  <dl class="domintro"><dt><var title="">window</var>[<var title="">name</var>]</dt>

   <dd>

    <p>Returns the indicated element or collection of elements.</p>

   </dd>

  </dl><div class="impl">

  <p>The <code><a href="#window">Window</a></code> interface <a href="infrastructure.html#support-named-properties" title="support named
  properties">supports named properties</a>. The <a href="infrastructure.html#supported-property-names">supported
  property names</a> at any moment consist of:</p>

  <ul><li>the <a href="#browsing-context-name">browsing context name</a> of any <a href="#child-browsing-context">child
   browsing context</a> of the <a href="#active-document">active document</a> whose
   name is not the empty string,</li>

   <li>the value of the <code title="">name</code> content attribute
   for all <code><a href="the-a-element.html#the-a-element">a</a></code>, <code><a href="#the-applet-element">applet</a></code>, <code><a href="the-area-element.html#the-area-element">area</a></code>,
   <code><a href="the-embed-element.html#the-embed-element">embed</a></code>, <code><a href="the-form-element.html#the-form-element">form</a></code>, <code><a href="#frameset">frameset</a></code>,
   <code><a href="the-img-element.html#the-img-element">img</a></code>, and <code><a href="the-object-element.html#the-object-element">object</a></code> elements in the
   <a href="#active-document">active document</a> that have a <code title="">name</code>
   content attribute, and</li>

   <li>the value of the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> content
   attribute of any <a href="infrastructure.html#html-elements" title="HTML elements">HTML element</a> in
   the <a href="#active-document">active document</a> with an <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> content attribute.</li>

  </ul><p>To <a href="infrastructure.html#determine-the-value-of-a-named-property">determine the value of a named property</a> <var title="">name</var> when <dfn id="dom-window-nameditem" title="dom-window-namedItem">the
  <code>Window</code> object is indexed for property retrieval</dfn>,
  the user agent must return the value obtained using the following
  steps:</p>

  <ol><!-- http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1716 --><li>

    <p>Let <var title="">objects</var> be the list of <a href="#dom-window-nameditem-filter" title="dom-window-namedItem-filter">named objects</a> with the
    name <var title="">name</var> in the <a href="#active-document">active document</a>.

    </p><p class="note">There will be at least one such object, by
    definition.<!-- (If there wasn't, then this algorithm wouldn't
    have been invoked by Web IDL.) --></p>

   </li>

   <li>

    <p>If <var title="">objects</var> contains a <a href="#nested-browsing-context">nested browsing
    context</a>, then return the <code><a href="#windowproxy">WindowProxy</a></code> object of
    the <a href="#nested-browsing-context">nested browsing context</a> corresponding to the
    first <a href="#browsing-context-container">browsing context container</a> in <a href="infrastructure.html#tree-order">tree
    order</a> whose <a href="#browsing-context">browsing context</a> is in <var title="">objects</var>, and abort these steps.</p>

   </li>

   <li>

    <p>Otherwise, if <var title="">elements</var> has only one
    element, return that element and abort these steps.</p>

   </li>

   <li>

    <p>Otherwise return an <code><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> rooted at the
    <code><a href="dom.html#document">Document</a></code> node, whose filter matches only <a href="#dom-window-nameditem-filter" title="dom-window-namedItem-filter">named objects</a> with the
    name <var title="">name</var>. (By definition, these will all be
    elements.)</p> <!-- the same one each time is returned, because of
    the rule under collections -->

   </li>

  </ol><p><dfn id="dom-window-nameditem-filter" title="dom-window-nameditem-filter">Named objects</dfn>
  with the name <var title="">name</var>, for the purposes of the
  above algorithm, are those that are either:</p>

  <ul><li><a href="#child-browsing-context" title="child browsing context">child browsing
   contexts</a> of the <a href="#active-document">active document</a> whose name is
   <var title="">name</var>,</li>

   <li><code><a href="the-a-element.html#the-a-element">a</a></code>, <code><a href="#the-applet-element">applet</a></code>, <code><a href="the-area-element.html#the-area-element">area</a></code>,
   <code><a href="the-embed-element.html#the-embed-element">embed</a></code>, <code><a href="the-form-element.html#the-form-element">form</a></code>, <code><a href="#frameset">frameset</a></code>,
   <code><a href="the-img-element.html#the-img-element">img</a></code>, or <code><a href="the-object-element.html#the-object-element">object</a></code> elements that have a <code title="attr-name">name</code> content attribute whose value is <var title="">name</var>, or</li>

   <li><a href="infrastructure.html#html-elements">HTML elements</a> that have an <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> content attribute whose value is <var title="">name</var>.</li>

  </ul></div>


  <div class="impl">

  <h4 id="garbage-collection-and-browsing-contexts"><span class="secno">5.2.5 </span>Garbage collection and browsing contexts</h4>

  <p>A <a href="#browsing-context">browsing context</a> has a strong reference to each of
  its <code><a href="dom.html#document">Document</a></code>s and its <code><a href="#windowproxy">WindowProxy</a></code> object,
  and the user agent itself has a strong reference to its <a href="#top-level-browsing-context" title="top-level browsing context">top-level browsing
  contexts</a>.</p>

  <p>A <code><a href="dom.html#document">Document</a></code> has a strong reference to its
  <code><a href="#window">Window</a></code> object.</p>

  <p class="note">A <code><a href="#window">Window</a></code> object <a href="common-dom-interfaces.html#implied-strong-reference" title="implied
  strong reference">has a strong reference</a> to its
  <code><a href="dom.html#document">Document</a></code> object through its <code title="dom-document"><a href="#dom-document-0">document</a></code> attribute.  Thus, references
  from other scripts to either of those objects will keep both
  alive. Similarly, both <code><a href="dom.html#document">Document</a></code> and <code><a href="#window">Window</a></code>
  objects have <a href="common-dom-interfaces.html#implied-strong-reference" title="implied strong reference">implied strong
  references</a> to the <code><a href="#windowproxy">WindowProxy</a></code> object.</p>

  <p>Each <a href="#concept-script" title="concept-script">script</a> has a strong
  reference to its <a href="#script's-browsing-context" title="script's browsing context">browsing
  context</a> and its <a href="#script's-document" title="script's
  document">document</a>.</p>

  <!-- discard a document -->
  <p>When a <a href="#browsing-context">browsing context</a> is to <dfn id="discard-a-document">discard a
  <code>Document</code></dfn>, the user agent must run the following
  steps:</p>

  <ol><li><p>Set the <code><a href="dom.html#document">Document</a></code>'s <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state to
   false.</p></li>

   <li><p>Run any <a href="#unloading-document-cleanup-steps">unloading document cleanup steps</a> for
   the <code><a href="dom.html#document">Document</a></code> that are defined by this specification
   and <a href="infrastructure.html#other-applicable-specifications">other applicable specifications</a>.</p></li>

   <li><p><a href="#abort-a-document" title="abort a document">Abort the
   <code>Document</code></a>.</p></li>

   <li><p>Remove any <a href="#concept-task" title="concept-task">tasks</a>
   associated with the <code><a href="dom.html#document">Document</a></code> in any <a href="#task-source">task
   source</a>, without running those tasks.</p></li>

   <li><p><a href="#a-browsing-context-is-discarded" title="a browsing context is discarded">Discard</a>
   all the <a href="#child-browsing-context" title="child browsing context">child browsing
   contexts</a> of the <code><a href="dom.html#document">Document</a></code>.</p></li>

   <li><p>Lose the strong reference from the <code><a href="dom.html#document">Document</a></code>'s
   <a href="#browsing-context">browsing context</a> to the
   <code><a href="dom.html#document">Document</a></code>.</p></li>

  </ol><p class="note">Whenever a <code><a href="dom.html#document">Document</a></code> object is <a href="#discard-a-document" title="discard a Document">discarded</a>, it is also removed from
  the list of <span>the worker's <code><a href="dom.html#document">Document</a></code>s</span> of each
  worker whose list contains that <code><a href="dom.html#document">Document</a></code>.</p>

  <p>When <dfn id="a-browsing-context-is-discarded">a <em><span>browsing context</span></em> is
  discarded</dfn>, the strong reference from the user agent itself to
  the <a href="#browsing-context">browsing context</a> must be severed, and all the
  <code><a href="dom.html#document">Document</a></code> objects for all the entries in the
  <a href="#browsing-context">browsing context</a>'s session history must be <a href="#discard-a-document" title="discard a document">discarded</a> as well.</p>

  <p>User agents may <a href="#a-browsing-context-is-discarded" title="a browsing context is
  discarded">discard</a> <a href="#top-level-browsing-context" title="top-level browsing
  context">top-level browsing contexts</a> at any time (typically,
  in response to user requests, e.g. when a user closes a window
  containing one or more <a href="#top-level-browsing-context" title="top-level browsing
  context">top-level browsing contexts</a>). Other <a href="#browsing-context" title="browsing context">browsing contexts</a> must be discarded
  once their <code><a href="#windowproxy">WindowProxy</a></code> object is eligible for garbage
  collection.</p>

  </div>



  <h4 id="browser-interface-elements"><span class="secno">5.2.6 </span>Browser interface elements</h4>

  <p>To allow Web pages to integrate with Web browsers, certain Web
  browser interface elements are exposed in a limited way to scripts
  in Web pages.</p>

  <p>Each interface element is represented by a <code><a href="#barprop">BarProp</a></code>
  object:</p>

  <pre class="idl">interface <dfn id="barprop">BarProp</dfn> {
           attribute boolean <a href="#dom-barprop-visible" title="dom-BarProp-visible">visible</a>;
};</pre>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-window-locationbar"><a href="#dom-window-locationbar">locationbar</a></code> . <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code></dt>
   <dd>
    <p>Returns true if the location bar is visible; otherwise, returns false.</p>
   </dd>

   <dt><var title="">window</var> . <code title="dom-window-menubar"><a href="#dom-window-menubar">menubar</a></code> . <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code></dt>
   <dd>
    <p>Returns true if the menu bar is visible; otherwise, returns false.</p>
   </dd>

   <dt><var title="">window</var> . <code title="dom-window-personalbar"><a href="#dom-window-personalbar">personalbar</a></code> . <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code></dt>
   <!--<dt><var title="">window</var> . <code title="dom-window-directories">directories</code> . <code title="dom-BarProp-visible">visible</code></dt>-->
   <dd>
    <p>Returns true if the personal bar is visible; otherwise, returns false.</p>
   </dd>

   <dt><var title="">window</var> . <code title="dom-window-scrollbars"><a href="#dom-window-scrollbars">scrollbars</a></code> . <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code></dt>
   <dd>
    <p>Returns true if the scroll bars are visible; otherwise, returns false.</p>
   </dd>

   <dt><var title="">window</var> . <code title="dom-window-statusbar"><a href="#dom-window-statusbar">statusbar</a></code> . <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code></dt>
   <dd>
    <p>Returns true if the status bar is visible; otherwise, returns false.</p>
   </dd>

   <dt><var title="">window</var> . <code title="dom-window-toolbar"><a href="#dom-window-toolbar">toolbar</a></code> . <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code></dt>
   <dd>
    <p>Returns true if the toolbar is visible; otherwise, returns false.</p>
   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-barprop-visible" title="dom-BarProp-visible">visible</dfn> attribute, on
  getting, must return either true or a value determined by the user
  agent to most accurately represent the visibility state of the user
  interface element that the object represents, as described below. On
  setting, the new value must be discarded.</p>

  <p>The following <code><a href="#barprop">BarProp</a></code> objects exist for each
  <code><a href="dom.html#document">Document</a></code> object in a <a href="#browsing-context">browsing
  context</a>. Some of the user interface elements represented by
  these objects might have no equivalent in some user agents; for
  those user agents, except when otherwise specified, the object must
  act as if it was present and visible (i.e. its <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code> attribute must return
  true).</p>

  <dl><dt><dfn id="the-location-bar-barprop-object">The location bar <code>BarProp</code> object</dfn></dt>

   <dd>Represents the user interface element that contains a control
   that displays the <a href="urls.html#url">URL</a> of the <a href="#active-document">active
   document</a>, or some similar interface concept.</dd>

   <dt><dfn id="the-menu-bar-barprop-object">The menu bar <code>BarProp</code> object</dfn></dt>

   <dd>Represents the user interface element that contains a list of
   commands in menu form, or some similar interface concept.</dd>

   <dt><dfn id="the-personal-bar-barprop-object">The personal bar <code>BarProp</code> object</dfn></dt>

   <dd>Represents the user interface element that contains links to
   the user's favorite pages, or some similar interface concept.</dd>

   <dt><dfn id="the-scrollbar-barprop-object">The scrollbar <code>BarProp</code> object</dfn></dt>

   <dd>Represents the user interface element that contains a scrolling
   mechanism, or some similar interface concept.</dd>

   <dt><dfn id="the-status-bar-barprop-object">The status bar <code>BarProp</code> object</dfn></dt>

   <dd>Represents a user interface element found immediately below or
   after the document, as appropriate for the user's media. If the
   user agent has no such user interface element, then the object may
   act as if the corresponding user interface element was absent
   (i.e. its <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code>
   attribute may return false).</dd>

   <dt><dfn id="the-toolbar-barprop-object">The toolbar <code>BarProp</code> object</dfn></dt>

   <dd>Represents the user interface element found immediately above
   or before the document, as appropriate for the user's media. If the
   user agent has no such user interface element, then the object may
   act as if the corresponding user interface element was absent
   (i.e. its <code title="dom-BarProp-visible"><a href="#dom-barprop-visible">visible</a></code>
   attribute may return false).</dd>

  </dl><p>The <dfn id="dom-window-locationbar" title="dom-window-locationbar"><code>locationbar</code></dfn>
  attribute must return <a href="#the-location-bar-barprop-object">the location bar <code>BarProp</code>
  object</a>.</p>

  <p>The <dfn id="dom-window-menubar" title="dom-window-menubar"><code>menubar</code></dfn>
  attribute must return <a href="#the-menu-bar-barprop-object">the menu bar <code>BarProp</code>
  object</a>.</p>

  <p>The <dfn id="dom-window-personalbar" title="dom-window-personalbar"><code>personalbar</code></dfn>
  attribute must return <a href="#the-personal-bar-barprop-object">the personal bar <code>BarProp</code>
  object</a>.</p>

  <p>The <dfn id="dom-window-scrollbars" title="dom-window-scrollbars"><code>scrollbars</code></dfn>
  attribute must return <a href="#the-scrollbar-barprop-object">the scrollbar <code>BarProp</code>
  object</a>.</p>

  <p>The <dfn id="dom-window-statusbar" title="dom-window-statusbar"><code>statusbar</code></dfn> attribute
  must return <a href="#the-status-bar-barprop-object">the status bar <code>BarProp</code>
  object</a>.</p>

  <p>The <dfn id="dom-window-toolbar" title="dom-window-toolbar"><code>toolbar</code></dfn>
  attribute must return <a href="#the-toolbar-barprop-object">the toolbar <code>BarProp</code>
  object</a>.</p>

<!--
  <p>For legacy reasons, the <dfn
  title="dom-window-directories"><code>directories</code></dfn>
  attribute must also return <span>the personal bar
  <code>BarProp</code> object</span>.</p>
-->

  <hr><p>For historical reasons, the <dfn id="dom-window-status" title="dom-window-status"><code>status</code></dfn> attribute on the
  <code><a href="#window">Window</a></code> object must return an empty string on getting,
  and do nothing on setting.</p>

  </div>


  <div class="impl">

  <h4 id="the-windowproxy-object"><span class="secno">5.2.7 </span>The <code><a href="#windowproxy">WindowProxy</a></code> object</h4>


  <p>As mentioned earlier, each <a href="#browsing-context">browsing context</a> has a
  <dfn id="windowproxy"><code>WindowProxy</code></dfn> object. This object is unusual
  in that all operations that would be performed on it must be
  performed on the <code><a href="#window">Window</a></code> object of the <a href="#browsing-context">browsing
  context</a>'s <a href="#active-document">active document</a> instead. It is thus
  indistinguishable from that <code><a href="#window">Window</a></code> object in every way
  until the <a href="#browsing-context">browsing context</a> is navigated.</p>

  <p>There is no <code><a href="#windowproxy">WindowProxy</a></code> interface object.</p>

  <p class="note">The <code><a href="#windowproxy">WindowProxy</a></code> object allows scripts
  to act as if each <a href="#browsing-context">browsing context</a> had a single
  <code><a href="#window">Window</a></code> object, while still keeping separate
  <code><a href="#window">Window</a></code> objects for each <code><a href="dom.html#document">Document</a></code>.</p>

  <div class="example">

   <p>In the following example, the variable <var title="">x</var> is
   set to the <code><a href="#windowproxy">WindowProxy</a></code> object returned by the <code title="dom-window"><a href="#dom-window">window</a></code> accessor on the global object. All
   of the expressions following the assignment return true, because in
   every respect, the <code><a href="#windowproxy">WindowProxy</a></code> object acts like the
   underlying <code><a href="#window">Window</a></code> object.</p>

   <pre>var x = window;
x instanceof Window; // true
x === this; // true</pre>

  </div>

  </div>
<!--TOPIC:HTML-->



<!--TOPIC:Security-->
  <h3 id="origin"><span class="secno">5.3 </span>Origin</h3>
  <!-- Hallowed are the Ori -->

  <p>The <dfn id="origin-0">origin</dfn> of a resource and the <dfn id="effective-script-origin">effective script
  origin</dfn> of a resource are both either opaque identifiers or
  tuples consisting of a scheme component, a host component, a port
  component, and optionally extra data.</p>

  <p class="note">The extra data could include the certificate of the
  site when using encrypted connections, to ensure that if the site's
  secure certificate changes, the origin is considered to change as
  well.</p>

  <div class="impl">

  <p>An <a href="#origin-0">origin</a> or <a href="#effective-script-origin">effective script origin</a>
  can be defined as an <dfn id="concept-origin-alias" title="concept-origin-alias">alias</dfn>
  to another <a href="#origin-0">origin</a> or <a href="#effective-script-origin">effective script
  origin</a>. The value of the <a href="#origin-0">origin</a> or
  <a href="#effective-script-origin">effective script origin</a> is then the value of the
  <a href="#origin-0">origin</a> or <a href="#effective-script-origin">effective script origin</a> to which
  it is an alias.</p>

  <p>These characteristics are defined as follows:</p>

  <dl><dt>For URLs</dt>

   <dd>

    <p>The <a href="#origin-0">origin</a> and <a href="#effective-script-origin">effective script
    origin</a> of the <a href="urls.html#url">URL</a> are the origin defined in
    <cite>The Web Origin Concept</cite>. <a href="#refsORIGIN">[ORIGIN]</a></p>

   </dd>


   <dt>For <code><a href="dom.html#document">Document</a></code> objects</dt>

   <dd>

    <dl class="switch"><dt id="sandboxOrigin">If a <code><a href="dom.html#document">Document</a></code>'s <a href="#active-sandboxing-flag-set">active
     sandboxing flag set</a> has its <a href="#sandboxed-origin-browsing-context-flag">sandboxed origin
     browsing context flag</a> set</dt>

     <dd>

      <p>The <a href="#origin-0">origin</a> is a globally unique identifier
      assigned when the <code><a href="dom.html#document">Document</a></code> is created.</p>

      <p>The <a href="#effective-script-origin">effective script origin</a> is initially an
      <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code>.</p>

     </dd>


     <dt>If a <code><a href="dom.html#document">Document</a></code> was generated from a <a href="#javascript-protocol" title="javascript protocol"><code>javascript:</code>
     URL</a></dt>

     <dd>

      <p>The <a href="#origin-0">origin</a> is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the script of that <a href="#javascript-protocol" title="javascript protocol"><code>javascript:</code>
      URL</a>.</p>

      <p>The <a href="#effective-script-origin">effective script origin</a> is initially an
      <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code>.</p>

     </dd>


     <dt>If a <code><a href="dom.html#document">Document</a></code> was served over the network and
     has an address that uses a URL scheme with a server-based naming
     authority</dt>

     <dd>

      <p>The <a href="#origin-0">origin</a> is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of <a href="dom.html#the-document's-address">the <code>Document</code>'s
      address</a>.</p>

      <p>The <a href="#effective-script-origin">effective script origin</a> is initially an
      <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code>.</p>

     </dd>


     <dt>If a <code><a href="dom.html#document">Document</a></code> was generated from a <a href="infrastructure.html#data-protocol" title="data protocol"><code title="">data:</code> URL</a> that
     was returned as the location of an HTTP redirect (<a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or equivalent</a> in
     other protocols)</dt>

     <dd>

      <p>The <a href="#origin-0">origin</a> is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the <a href="urls.html#url">URL</a> that redirected to
      the <a href="infrastructure.html#data-protocol" title="data protocol"><code title="">data:</code>
      URL</a>.</p>

      <p>The <a href="#effective-script-origin">effective script origin</a> is initially an
      <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code>.</p>

     </dd>


     <dt>If a <code><a href="dom.html#document">Document</a></code> was generated from a <a href="infrastructure.html#data-protocol" title="data protocol"><code title="">data:</code> URL</a>
     found in another <code><a href="dom.html#document">Document</a></code> or in a script</dt>

     <dd>

      <p>The <a href="#origin-0">origin</a> is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code> or script that
      initiated the <a href="#navigate" title="navigate">navigation</a> to that
      <a href="urls.html#url">URL</a>.</p>

      <p>The <a href="#effective-script-origin">effective script origin</a> is initially an
      <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#effective-script-origin">effective script origin</a> of the
      <code><a href="dom.html#document">Document</a></code> or script that initiated the <a href="#navigate" title="navigate">navigation</a> to that <a href="urls.html#url">URL</a>.</p>

     </dd>


     <dt>If a <code><a href="dom.html#document">Document</a></code> has the <a href="dom.html#the-document's-address" title="the
     document's address">address</a>
     "<code><a href="urls.html#about:blank">about:blank</a></code>"</dt>

     <dd>

      <p>The <a href="#origin-0">origin</a> and <a href="#effective-script-origin">effective script
      origin</a> of the <code><a href="dom.html#document">Document</a></code> are <a href="#about-blank-origin">those it was assigned when its
      browsing context was created</a>.</p>

     </dd>


     <dt>If a <code><a href="dom.html#document">Document</a></code> is <a href="the-iframe-element.html#an-iframe-srcdoc-document">an <code>iframe</code> <code title="attr-iframe-srcdoc">srcdoc</code> document</a></dt>

     <dd>

      <p>The <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code> is an
      <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code>'s
      <a href="#browsing-context">browsing context</a>'s <a href="#browsing-context-container">browsing context
      container</a>'s <code><a href="dom.html#document">Document</a></code>.</p>

      <p>The <a href="#effective-script-origin">effective script origin</a> is initially an
      <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#effective-script-origin">effective script origin</a> of the
      <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing context</a>'s
      <a href="#browsing-context-container">browsing context container</a>'s
      <code><a href="dom.html#document">Document</a></code>.</p>

     </dd>


     <dt>If a <code><a href="dom.html#document">Document</a></code> was obtained in some other manner
     (e.g. a <a href="infrastructure.html#data-protocol" title="data protocol"><code title="">data:</code>
     URL</a> typed in by the user, a <code><a href="dom.html#document">Document</a></code> created
     using the <code title="dom-DOMImplementation-createDocument"><a href="infrastructure.html#dom-domimplementation-createdocument">createDocument()</a></code>
     API, etc)</dt>

     <dd>

      <p>The <a href="#origin-0">origin</a> is a globally unique identifier
      assigned when the <code><a href="dom.html#document">Document</a></code> is created.</p>

      <p>The <a href="#effective-script-origin">effective script origin</a> is initially an
      <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
      <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code>.</p>

     </dd>

    </dl><p class="note">The <a href="#effective-script-origin">effective script origin</a> of a
    <code><a href="dom.html#document">Document</a></code> can be manipulated using the <code title="dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> IDL
    attribute.</p>

   </dd>


   <dt>For images</dt>

   <dd>

    <dl class="switch"><dt>If an image is the image of an <code><a href="the-img-element.html#the-img-element">img</a></code> element and
     its image data is <a href="urls.html#cors-cross-origin">CORS-cross-origin</a></dt>

     <dd>The <a href="#origin-0">origin</a> is a globally unique identifier
     assigned when the image is created.</dd>


     <dt>If an image is the image of an <code><a href="the-img-element.html#the-img-element">img</a></code> element and
     its image data is <a href="urls.html#cors-same-origin">CORS-same-origin</a></dt>

     <dd>The <a href="#origin-0">origin</a> is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
     <a href="#origin-0">origin</a> of the <code><a href="the-img-element.html#the-img-element">img</a></code> element's
     <code><a href="dom.html#document">Document</a></code>.</dd>

     <!-- all image loads go through the "potentially CORS-enabled
     fetch" algorithm so they're all either CORS-cross-origin or
     CORS-same-origin if they succeed at all -->

    </dl><p>Images do not have an <a href="#effective-script-origin">effective script origin</a>.</p>

   </dd>


   <dt>For <code><a href="the-audio-element.html#the-audio-element">audio</a></code> and <code><a href="the-video-element.html#the-video-element">video</a></code> elements</dt>

   <dd>

    <dl class="switch"><dt>If the <a href="media-elements.html#media-data">media data</a> is
     <a href="urls.html#cors-cross-origin">CORS-cross-origin</a></dt>

     <dd>The <a href="#origin-0">origin</a> is a globally unique identifier
     assigned when the image is created.</dd>


     <dt>If the <a href="media-elements.html#media-data">media data</a> is
     <a href="urls.html#cors-same-origin">CORS-same-origin</a></dt>

     <dd>The <a href="#origin-0">origin</a> is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
     <a href="#origin-0">origin</a> of the <a href="media-elements.html#media-element">media element</a>'s
     <code><a href="dom.html#document">Document</a></code>.</dd>

    </dl><p><a href="media-elements.html#media-element" title="media element">Media elements</a> do not have
    an <a href="#effective-script-origin">effective script origin</a>.</p>

   </dd>


   <dt>For fonts</dt>

   <dd>

    <p>The <a href="#origin-0">origin</a> of a downloadable Web font is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
    <a href="#origin-0">origin</a> of the <a href="urls.html#absolute-url">absolute URL</a> used to
    obtain the font (after any redirects). <a href="#refsCSSFONTS">[CSSFONTS]</a></p> <!-- this means you can
    get data from a remote site if you can make it redirect to your
    own site in some fashion controlled by the data you want to read
    -->

    <p>The <a href="#origin-0">origin</a> of a locally installed system font is
    an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
    <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code> in which that
    font is being used.</p>

    <p>Fonts do not have an <a href="#effective-script-origin">effective script origin</a>.</p>

   </dd>


   <dt>For scripts</dt>

   <dd>

    <p>The <a href="#origin-0">origin</a> and <a href="#effective-script-origin">effective script
    origin</a> of a script are determined from another resource,
    called the <i>owner</i>:</p>

    <dl class="switch"><dt>If a script is in a <code><a href="the-script-element.html#the-script-element">script</a></code> element</dt>

     <dd>The owner is the <code><a href="dom.html#document">Document</a></code> to which the
     <code><a href="the-script-element.html#the-script-element">script</a></code> element belongs.</dd>


     <dt>If a script is in an <a href="#event-handler-content-attributes" title="event handler content
     attributes">event handler content attribute</a></dt>

     <dd>The owner is the <code><a href="dom.html#document">Document</a></code> to which the
     attribute node belongs.</dd>


     <dt>If a script is a function or other code reference created by
     another script</dt>

     <dd>The owner is the script that created it.</dd>


     <dt>If a script is a <a href="#javascript-protocol" title="javascript protocol"><code title="">javascript:</code> URL</a> that was returned as the
     location of an HTTP redirect (<a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or equivalent</a> in
     other protocols)</dt>

     <dd>The owner is the <a href="urls.html#url">URL</a> that redirected to the
     <a href="#javascript-protocol" title="javascript protocol"><code title="">javascript:</code> URL</a>.</dd>


     <dt>If a script is a <a href="#javascript-protocol" title="javascript protocol"><code title="">javascript:</code> URL</a> in an attribute</dt>

     <dd>The owner is the <code><a href="dom.html#document">Document</a></code> of the element on
     which the attribute is found.</dd>


     <dt>If a script is a <a href="#javascript-protocol" title="javascript protocol"><code title="">javascript:</code> URL</a> in a style sheet</dt>

     <dd>The owner is the <a href="urls.html#url">URL</a> of the style sheet.</dd>


     <dt>If a script is a <a href="#javascript-protocol" title="javascript protocol"><code title="">javascript:</code> URL</a> to which a <a href="#browsing-context">browsing
     context</a> is being <a href="#navigate" title="navigate">navigated</a>,
     the URL having been provided by the user (e.g. by using a
     <i>bookmarklet</i>)</dt>

     <dd>The owner is the <code><a href="dom.html#document">Document</a></code> of the <a href="#browsing-context">browsing
     context</a>'s <a href="#active-document">active document</a>.</dd>


     <dt>If a script is a <a href="#javascript-protocol" title="javascript protocol"><code title="">javascript:</code> URL</a> to which a <a href="#browsing-context">browsing
     context</a> is being <a href="#navigate" title="navigate">navigated</a>,
     the URL having been declared in markup</dt>

     <dd>The owner is the <code><a href="dom.html#document">Document</a></code> of the element
     (e.g. an <code><a href="the-a-element.html#the-a-element">a</a></code> or <code><a href="the-area-element.html#the-area-element">area</a></code> element) that
     declared the URL.</dd>


     <dt>If a script is a <a href="#javascript-protocol" title="javascript protocol"><code title="">javascript:</code> URL</a> to which a <a href="#browsing-context">browsing
     context</a> is being <a href="#navigate" title="navigate">navigated</a>,
     the URL having been provided by script</dt>

     <dd>The owner is the script that provided the URL.</dd>

    </dl><p>The <a href="#origin-0">origin</a> of the script is then an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the
    <a href="#origin-0">origin</a> of the owner, and the <a href="#effective-script-origin">effective script
    origin</a> of the script is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a> to the <a href="#effective-script-origin">effective
    script origin</a> of the owner.</p>

   </dd>

  </dl><p>Other specifications can override the above definitions by
  themselves specifying the origin of a particular <a href="urls.html#url">URL</a>,
  <code><a href="dom.html#document">Document</a></code>, image, <a href="media-elements.html#media-element">media element</a>, font, or
  <a href="#concept-script" title="concept-script">script</a>.</p>

  <!-- e.g.:

    <p>The <span>origin</span> of a <code>Document</code> object
    returned by the <code>XMLHttpRequest</code> API is an <span
    title="concept-origin-alias">alias</span> to the
    <span>XMLHttpRequest origin</span> of the
    <code>XMLHttpRequest</code> object.</p>

  -->

  <hr><p>The <dfn id="unicode-serialization-of-an-origin">Unicode serialization of an origin</dfn> is the string
  obtained by applying the following algorithm to the given
  <a href="#origin-0">origin</a>:</p>

  <ol><li><p>If the <a href="#origin-0">origin</a> in question is not a
   scheme/host/port tuple, then return the literal string "<code title="">null</code>" and abort these steps.</p></li>

   <li><p>Otherwise, let <var title="">result</var> be the scheme part
   of the <a href="#origin-0">origin</a> tuple.</p></li>

   <li><p>Append the string "<code title="">://</code>" to <var title="">result</var>.</p></li>

   <li><p>Apply the IDNA ToUnicode algorithm to each component of the
   host part of the <a href="#origin-0">origin</a> tuple, and append the results
   &#8212; each component, in the same order, separated by "." (U+002E) characters &#8212; to <var title="">result</var>. <a href="#refsRFC3490">[RFC3490]</a></p></li>

   <li><p>If the port part of the <a href="#origin-0">origin</a> tuple gives a port
   that is different from the default port for the protocol given by
   the scheme part of the <a href="#origin-0">origin</a> tuple, then append a
   ":" (U+003A) character and the given port, in base ten, to
   <var title="">result</var>.</p></li>

   <li><p>Return <var title="">result</var>.</p></li>

  </ol><p>The <dfn id="ascii-serialization-of-an-origin">ASCII serialization of an origin</dfn> is the string
  obtained by applying the following algorithm to the given
  <a href="#origin-0">origin</a>:</p>

  <ol><li><p>If the <a href="#origin-0">origin</a> in question is not a
   scheme/host/port tuple, then return the literal string "<code title="">null</code>" and abort these steps.</p></li>

   <li><p>Otherwise, let <var title="">result</var> be the scheme part
   of the <a href="#origin-0">origin</a> tuple.</p></li>

   <li><p>Append the string "<code title="">://</code>" to <var title="">result</var>.</p></li>

   <li>

    <p>Apply the IDNA ToASCII algorithm the host part of the
    <a href="#origin-0">origin</a> tuple, with both the AllowUnassigned and
    UseSTD3ASCIIRules flags set, and append the results <var title="">result</var>.</p>

    <p>If ToASCII fails to convert one of the components of the
    string, e.g. because it is too long or because it contains invalid
    characters, then return the empty string and abort these steps. <a href="#refsRFC3490">[RFC3490]</a></p>

   </li>

   <li><p>If the port part of the <a href="#origin-0">origin</a> tuple gives a port
   that is different from the default port for the protocol given by
   the scheme part of the <a href="#origin-0">origin</a> tuple, then append a
   ":" (U+003A) character and the given port, in base ten, to
   <var title="">result</var>.</p></li>

   <li><p>Return <var title="">result</var>.</p></li>

  </ol><p>Two <a href="#origin-0" title="origin">origins</a> are said to be the
  <dfn id="same-origin">same origin</dfn> if the following algorithm returns true:</p>

  <ol><li><p>Let <var title="">A</var> be the first <a href="#origin-0">origin</a>
   being compared, and <var title="">B</var> be the second
   <a href="#origin-0">origin</a> being compared.</p></li>

   <li><p>If <var title="">A</var> and <var title="">B</var> are both
   opaque identifiers, and their value is equal, then return
   true.</p></li>

   <li><p>Otherwise, if either <var title="">A</var> or <var title="">B</var> or both are opaque identifiers, return
   false.</p></li>

   <li><p>If <var title="">A</var> and <var title="">B</var> have
   scheme components that are not identical, return false.</p></li>

   <li><p>If <var title="">A</var> and <var title="">B</var> have host
   components that are not identical, return false.</p></li>

   <li><p>If <var title="">A</var> and <var title="">B</var> have port
   components that are not identical, return false.</p></li>

   <li><p>If either <var title="">A</var> or <var title="">B</var>
   have additional data, but that data is not identical for both,
   return false.</p></li>

   <li><p>Return true.</p></li>

  </ol></div>


  <h4 id="relaxing-the-same-origin-restriction"><span class="secno">5.3.1 </span>Relaxing the same-origin restriction</h4>

  <dl class="domintro"><dt><var title="">document</var> . <code title="dom-document-domain"><a href="#dom-document-domain">domain</a></code> [ = <var title="">domain</var> ]</dt>

   <dd>

    <p>Returns the current domain used for security checks.</p>

    <p>Can be set to a value that removes subdomains, to change the
    <a href="#effective-script-origin">effective script origin</a> to allow pages on other
    subdomains of the same domain (if they do the same thing) to
    access each other.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-document-domain" title="dom-document-domain"><code>domain</code></dfn>
  attribute on <code><a href="dom.html#document">Document</a></code> objects must be initialized to
  <a href="#the-document's-domain">the document's domain</a>, if it has one, and the empty
  string otherwise. If the value is an IPv6 address, then the square
  brackets from the host portion of the <a href="urls.html#url-host" title="url-host">&lt;host&gt;</a> component must be omitted from
  the attribute's value.</p>

  <p>On getting, the attribute must return its current value, unless
  the <code><a href="dom.html#document">Document</a></code> has no <a href="#browsing-context">browsing context</a>, in
  which case it must return the empty string.</p>

  <p>On setting, the user agent must run the following algorithm:</p>

  <ol><li>

    <p>If the <code><a href="dom.html#document">Document</a></code> has no <a href="#browsing-context">browsing
    context</a>, throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception and
    abort these steps.</p>

   </li>

   <li>

    <p>If the new value is an IP address, let <var title="">new
    value</var> be the new value. Otherwise, apply the IDNA ToASCII
    algorithm to the new value, with both the AllowUnassigned and
    UseSTD3ASCIIRules flags set, and let <var title="">new value</var>
    be the result of the ToASCII algorithm.</p>

    <p>If ToASCII fails to convert one of the components of the
    string, e.g. because it is too long or because it contains invalid
    characters, then throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception and abort
    these steps. <a href="#refsRFC3490">[RFC3490]</a></p>

   </li>

   <li>

    <p>If <var title="">new value</var> is not exactly equal to the
    current value of the <code title="dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> attribute, then
    run these substeps:</p>

    <ol><li>

      <p>If the current value is an IP address, throw a
      <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception and abort these steps.</p>

     </li>

     <li>

      <p>If <var title="">new value</var>, prefixed by a "." (U+002E), does not exactly match the end of the current value,
      throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception and abort these
      steps.</p>

      <!-- this is the step that prevents us from ever setting
      document.domain if the >effective script origin< isn't a
      scheme/host/port tuple -->

     </li>

     <li>

      <p>If <var title="">new value</var> matches a suffix in the
      Public Suffix List, or, if <var title="">new value</var>,
      prefixed by a "." (U+002E), matches the end of a
      suffix in the Public Suffix List, then throw a
      <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception and abort these steps. <a href="#refsPSL">[PSL]</a></p>

      <p>Suffixes must be compared after applying the IDNA ToASCII
      algorithm to them, with both the AllowUnassigned and
      UseSTD3ASCIIRules flags set, in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
      case-insensitive</a> manner. <a href="#refsRFC3490">[RFC3490]</a></p>

     </li>

    </ol></li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</p></li>

   <li>

    <p>Set the attribute's value to <var title="">new value</var>.</p>

   </li>

   <li>

    <p>If the <a href="#effective-script-origin">effective script origin</a> of the
    <code><a href="dom.html#document">Document</a></code> is an <a href="#concept-origin-alias" title="concept-origin-alias">alias</a>, set it to the value of
    the <a href="#effective-script-origin">effective script origin</a> (essentially de-aliasing
    the <a href="#effective-script-origin">effective script origin</a>).</p>

   </li>

   <li>

    <p>If <var title="">new value</var> is not the empty string, then
    run these substeps:</p>

    <ol><li>

      <p>Set the host part of the <a href="#effective-script-origin">effective script origin</a>
      tuple of the <code><a href="dom.html#document">Document</a></code> to <var title="">new
      value</var>.</p>

     </li>

     <li>

      <p>Set the port part of the <a href="#effective-script-origin">effective script origin</a>
      tuple of the <code><a href="dom.html#document">Document</a></code> to "manual override" (a value
      that, for the purposes of <a href="#same-origin" title="same origin">comparing
      origins</a>, is identical to "manual override" but not
      identical to any other value).</p>

     </li>

    </ol></li>

  </ol><p>The <dfn id="the-document's-domain" title="the document's domain">domain</dfn> of a
  <code><a href="dom.html#document">Document</a></code> is the host part of the document's
  <a href="#origin-0">origin</a>, if the value of that <a href="#origin-0">origin</a> is a
  scheme/host/port tuple. If it isn't, then the document does not have
  a domain.</p>

  </div>

  <p class="note">The <code title="dom-document-domain"><a href="#dom-document-domain">domain</a></code>
  attribute is used to enable pages on different hosts of a domain to
  access each others' DOMs.</p>

  <p class="warning">Do not use the <code title="dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> attribute when
  using shared hosting. If an untrusted third party is able to host an
  HTTP server at the same IP address but on a different port, then the
  same-origin protection that normally protects two different sites on
  the same host will fail, as the ports are ignored when comparing
  origins after the <code title="dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> attribute has
  been used.</p>
<!--TOPIC:HTML-->




  <h3 id="sandboxing"><span class="secno">5.4 </span>Sandboxing</h3>

  <p>A <dfn id="sandboxing-flag-set">sandboxing flag set</dfn> is a set of zero or more of the
  following flags, which are used to restrict the abilities that
  potentially untrusted resources have:</p>

  <dl><dt>The <dfn id="sandboxed-navigation-browsing-context-flag">sandboxed navigation browsing context flag</dfn></dt>

   <dd>

    <p>This flag <a href="#sandboxLinks">prevents content from
    navigating browsing contexts other than the sandboxed browsing
    context itself</a> (or browsing contexts further nested inside
    it), <a href="#auxiliary-browsing-context" title="auxiliary browsing context">auxiliary browsing
    contexts</a> (which are protected by the <a href="#sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed
    auxiliary navigation browsing context flag</a> defined next),
    and the <a href="#top-level-browsing-context">top-level browsing context</a> (which is
    protected by the <a href="#sandboxed-top-level-navigation-browsing-context-flag">sandboxed top-level navigation browsing
    context flag</a> defined below).</p>

    <p>If the <a href="#sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed auxiliary navigation browsing context
    flag</a> is not set, then in certain cases the restrictions
    nonetheless allow popups (new <a href="#top-level-browsing-context" title="top-level browsing
    context">top-level browsing contexts</a>) to be opened. These
    <a href="#browsing-context" title="browsing context">browsing contexts</a> always
    have <dfn id="one-permitted-sandboxed-navigator">one permitted sandboxed navigator</dfn>, set when the
    browsing context is created, which allows the <a href="#browsing-context">browsing
    context</a> that created them to actually navigate them.
    (Otherwise, the <a href="#sandboxed-navigation-browsing-context-flag">sandboxed navigation browsing context
    flag</a> would prevent them from being navigated even if they
    were opened.)</p>

   </dd>


   <dt>The <dfn id="sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed auxiliary navigation browsing context flag</dfn></dt>

   <dd>

    <p>This flag <a href="#sandboxWindowOpen">prevents content from
    creating new auxiliary browsing contexts</a>, e.g. using the <code title="attr-hyperlink-target"><a href="#attr-hyperlink-target">target</a></code> attribute, the <code title="dom-open"><a href="#dom-open">window.open()</a></code> method, or the <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code> method.</p>

   </dd>


   <dt>The <dfn id="sandboxed-top-level-navigation-browsing-context-flag">sandboxed top-level navigation browsing context flag</dfn></dt>

   <dd>

    <p>This flag <a href="#sandboxLinks">prevents content from
    navigating their <span>top-level browsing context</span></a>.</p>

    <p>When the <code title="attr-iframe-sandbox-allow-top-navigation"><a href="#attr-iframe-sandbox-allow-top-navigation">allow-top-navigation</a></code>
    is set, content can navigate its <a href="#top-level-browsing-context">top-level browsing
    context</a>, but other <a href="#browsing-context" title="browsing context">browsing
    contexts</a> are still protected by the <a href="#sandboxed-navigation-browsing-context-flag">sandboxed
    navigation browsing context flag</a> and possibly the
    <a href="#sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed auxiliary navigation browsing context
    flag</a>.</p>

   </dd>


   <dt>The <dfn id="sandboxed-plugins-browsing-context-flag">sandboxed plugins browsing context flag</dfn></dt>

   <dd>

    <p>This flag prevents content from instantiating <a href="infrastructure.html#plugin" title="plugin">plugins</a>, whether using <a href="the-embed-element.html#sandboxPluginEmbed">the <code>embed</code> element</a>, <a href="the-object-element.html#sandboxPluginObject">the <code>object</code> element</a>,
    <a href="#sandboxPluginApplet">the <code>applet</code>
    element</a>, or through <a href="#sandboxPluginNavigate">navigation</a> of a <a href="#nested-browsing-context">nested
    browsing context</a>, unless those <a href="infrastructure.html#plugin" title="plugin">plugins</a> can be <a href="infrastructure.html#concept-plugin-secure" title="concept-plugin-secure">secured</a>.</p>

   </dd>


   <dt>The <dfn id="sandboxed-seamless-iframes-flag">sandboxed seamless iframes flag</dfn></dt>

   <dd>

    <p>This flag prevents content from using the <code title="attr-iframe-seamless"><a href="the-iframe-element.html#attr-iframe-seamless">seamless</a></code> attribute on
    descendant <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements.</p>

    <p class="note">This prevents a page inserted using the <code title="attr-iframe-sandbox-allow-same-origin"><a href="#attr-iframe-sandbox-allow-same-origin">allow-same-origin</a></code>
    keyword from using a CSS-selector-based method of probing the DOM
    of other pages on the same site (in particular, pages that contain
    user-sensitive information).</p>

    <!-- http://lists.w3.org/Archives/Public/public-web-security/2009Dec/thread.html#msg51 -->

   </dd>


   <dt>The <dfn id="sandboxed-origin-browsing-context-flag">sandboxed origin browsing context flag</dfn></dt>

   <dd>

    <p>This flag <a href="#sandboxOrigin">forces content into a unique
    origin</a>, thus preventing it from accessing other content from
    the same <a href="#origin-0">origin</a>.</p>

    <p>This flag also <a href="dom.html#sandboxCookies">prevents script from
    reading from or writing to the <code title="dom-document-cookie">document.cookie</code> IDL
    attribute</a>, and blocks access to <code title="dom-localStorage">localStorage</code>.
        <a href="#refsWEBSTORAGE">[WEBSTORAGE]</a>
        </p>

   </dd>


   <dt>The <dfn id="sandboxed-forms-browsing-context-flag">sandboxed forms browsing context flag</dfn></dt>

   <dd>

    <p>This flag <a href="#sandboxSubmitBlocked">blocks form
    submission</a>.</p>

   </dd>


   <dt>The <dfn id="sandboxed-scripts-browsing-context-flag">sandboxed scripts browsing context flag</dfn></dt>

   <dd>

    <p>This flag <a href="#sandboxScriptBlocked">blocks script
    execution</a>.</p>

   </dd>


   <dt>The <dfn id="sandboxed-automatic-features-browsing-context-flag">sandboxed automatic features browsing context
   flag</dfn></dt>

   <dd>

    <p>This flag blocks features that trigger automatically, such as
    <a href="media-elements.html#attr-media-autoplay" title="attr-media-autoplay">automatically playing a
    video</a> or <a href="attributes-common-to-form-controls.html#attr-fe-autofocus" title="attr-fe-autofocus">automatically
    focusing a form control</a>.</p>

   </dd>

  </dl><p>When the user agent is to <dfn id="parse-a-sandboxing-directive">parse a sandboxing
  directive</dfn>, given a string <var title="">input</var> and a
  <a href="#sandboxing-flag-set">sandboxing flag set</a> <var title="">output</var>, it must
  run the following steps:</p>

  <ol><li><p><a href="common-microsyntaxes.html#split-a-string-on-spaces" title="split a string on spaces">Split <var title="">input</var> on spaces</a>, to obtain <var title="">tokens</var>.</p></li>

   <li><p>Let <var title="">output</var> be empty.</p></li>

   <li>

    <p>Add the following flags to <var title="">output</var>:</p>

    <ul><li><p>The <a href="#sandboxed-navigation-browsing-context-flag">sandboxed navigation browsing context flag</a></p></li>

     <li><p>The <a href="#sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed auxiliary navigation browsing context
     flag</a>, unless <var title="">tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-popups" title="attr-iframe-sandbox-allow-popups"><code>allow-popups</code></dfn>
     keyword</p></li>

     <li><p>The <a href="#sandboxed-top-level-navigation-browsing-context-flag">sandboxed top-level navigation browsing context
     flag</a>, unless <var title="">tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-top-navigation" title="attr-iframe-sandbox-allow-top-navigation"><code>allow-top-navigation</code></dfn>
     keyword</p></li>

     <li><p>The <a href="#sandboxed-plugins-browsing-context-flag">sandboxed plugins browsing context flag</a></p></li>

     <li><p>The <a href="#sandboxed-seamless-iframes-flag">sandboxed seamless iframes flag</a></p></li>

     <li>

      <p>The <a href="#sandboxed-origin-browsing-context-flag">sandboxed origin browsing context flag</a>,
      unless the <var title="">tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-same-origin" title="attr-iframe-sandbox-allow-same-origin"><code>allow-same-origin</code></dfn>
      keyword</p>

      <div class="note">

       <p>The <code title="attr-iframe-sandbox-allow-same-origin"><a href="#attr-iframe-sandbox-allow-same-origin">allow-same-origin</a></code>
       keyword is intended for two cases.</p>

       <p>First, it can be used to allow content from the same site to
       be sandboxed to disable scripting, while still allowing access to
       the DOM of the sandboxed content.</p>

       <p>Second, it can be used to embed content from a third-party
       site, sandboxed to prevent that site from opening popup windows,
       etc, without preventing the embedded page from communicating back
       to its originating site, using the database APIs to store data,
       etc.</p>

      </div>

     </li>

     <li><p>The <a href="#sandboxed-forms-browsing-context-flag">sandboxed forms browsing context flag</a>,
     unless <var title="">tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-forms" title="attr-iframe-sandbox-allow-forms"><code>allow-forms</code></dfn>
     keyword</p></li>

     <li><p>The <a href="#sandboxed-scripts-browsing-context-flag">sandboxed scripts browsing context flag</a>,
     unless <var title="">tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-scripts" title="attr-iframe-sandbox-allow-scripts"><code>allow-scripts</code></dfn>
     keyword</p></li>

     <li>

      <p>The <a href="#sandboxed-automatic-features-browsing-context-flag">sandboxed automatic features browsing context
      flag</a>, unless <var title="">tokens</var> contains the
      <code title="attr-iframe-sandbox-allow-scripts"><a href="#attr-iframe-sandbox-allow-scripts">allow-scripts</a></code>
      keyword (defined above)</p>

      <p class="note">This flag is relaxed by the same keyword as
      scripts, because when scripts are enabled these features are
      trivially possible anyway, and it would be unfortunate to force
      authors to use script to do them when sandboxed rather than
      allowing them to use the declarative features.</p>

     </li>

    </ul></li>

  </ol><hr><p>Every <a href="#top-level-browsing-context">top-level browsing context</a> has a <dfn id="popup-sandboxing-flag-set">popup
  sandboxing flag set</dfn>, which is a <a href="#sandboxing-flag-set">sandboxing flag
  set</a>. When a <a href="#browsing-context">browsing context</a> is created, its
  <a href="#popup-sandboxing-flag-set">popup sandboxing flag set</a> must be empty. It is
  populated by <a href="#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for choosing a browsing context given a
  browsing context name</a>.</p>

  <p>Every <a href="#nested-browsing-context">nested browsing context</a> has an
  <dfn id="iframe-sandboxing-flag-set"><code>iframe</code> sandboxing flag set</dfn>, which is a
  <a href="#sandboxing-flag-set">sandboxing flag set</a>. Which flags in a <a href="#nested-browsing-context">nested
  browsing context</a>'s <a href="#iframe-sandboxing-flag-set"><code>iframe</code> sandboxing flag
  set</a> are set at any particular time is determined by the
  <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element's <code title="attr-iframe-sandbox"><a href="the-iframe-element.html#attr-iframe-sandbox">sandbox</a></code> attribute.</p>

  <p>Every <code><a href="dom.html#document">Document</a></code> has an <dfn id="active-sandboxing-flag-set">active sandboxing flag
  set</dfn>, which is a <a href="#sandboxing-flag-set">sandboxing flag set</a>. When the
  <code><a href="dom.html#document">Document</a></code> is created, its <a href="#active-sandboxing-flag-set">active sandboxing flag
  set</a> must be empty. It is populated by the <a href="#navigate" title="navigate">navigation algorithm</a>.</p>



  <h3 id="history"><span class="secno">5.5 </span>Session history and navigation</h3>

  <h4 id="the-session-history-of-browsing-contexts"><span class="secno">5.5.1 </span>The session history of browsing contexts</h4>

  <p>The sequence of <code><a href="dom.html#document">Document</a></code>s in a <a href="#browsing-context">browsing
  context</a> is its <dfn id="session-history">session history</dfn>.</p>

  <p><code><a href="#history-1">History</a></code> objects provide a representation of the
  pages in the session history of <a href="#browsing-context" title="browsing
  context">browsing contexts</a>. Each <a href="#browsing-context">browsing
  context</a>, including <a href="#nested-browsing-context" title="nested browsing
  context">nested browsing contexts</a>, has a distinct session
  history.</p>

  <p>Each <code><a href="dom.html#document">Document</a></code> object in a <a href="#browsing-context">browsing
  context</a>'s <a href="#session-history">session history</a> is associated with a
  unique instance of the <code><a href="#history-1">History</a></code> object, although they
  all must model the same underlying <a href="#session-history">session history</a>.</p>

  <div class="impl">

  <p>The <dfn id="dom-history" title="dom-history"><code>history</code></dfn> attribute
  of the <code><a href="#window">Window</a></code> interface must return the object
  implementing the <code><a href="#history-1">History</a></code> interface for that
  <code><a href="#window">Window</a></code> object's <code><a href="dom.html#document">Document</a></code>.</p>

  </div>

  <p><code><a href="#history-1">History</a></code> objects represent their <a href="#browsing-context">browsing
  context</a>'s session history as a flat list of <a href="#session-history-entry" title="session history entry">session history entries</a>. Each
  <dfn id="session-history-entry">session history entry</dfn> consists of a <a href="urls.html#url">URL</a> and
  optionally a <a href="#state-object">state object</a><span class="impl">, and may
  in addition have a title, a <code><a href="dom.html#document">Document</a></code> object, form data,
  a scroll position, and other information associated with
  it</span>.</p>

  <div class="impl">

  <p class="note">This does not imply that the user interface need be
  linear. See the <a href="#history-notes">notes below</a>.</p>

  </div>

  <p class="note">Titles associated with <a href="#session-history-entry" title="session history
  entry">session history entries</a> need not have any relation
  with the current <code><a href="the-title-element.html#the-title-element">title</a></code> of the
  <code><a href="dom.html#document">Document</a></code>. The title of a <a href="#session-history-entry">session history
  entry</a> is intended to explain the state of the document at
  that point, so that the user can navigate the document's
  history.</p>

  <p>URLs without associated <a href="#state-object" title="state object">state
  objects</a> are added to the session history as the user (or
  script) navigates from page to page.</p>

  <p>A <dfn id="state-object">state object</dfn> is an object representing a user
  interface state.</p>

  <p>Pages can <a href="#dom-history-pushstate" title="dom-history-pushState">add</a> <a href="#state-object" title="state object">state objects</a> between their entry in the
  session history and the next ("forward") entry. These are then <a href="#event-popstate" title="event-popstate">returned to the script</a> when the user
  (or script) goes back in the history, thus enabling authors to use
  the "navigation" metaphor even in one-page applications.</p>

  <div class="note">

   <p><a href="#state-object" title="state object">State objects</a> are intended to
   be used for two main purposes: first, storing a preparsed
   description of the state in the <a href="urls.html#url">URL</a> so that in the
   simple case an author doesn't have to do the parsing (though one
   would still need the parsing for handling <a href="urls.html#url" title="URL">URLs</a> passed around by users, so it's only a minor
   optimization), and second, so that the author can store state that
   one wouldn't store in the URL because it only applies to the current
   <code><a href="dom.html#document">Document</a></code> instance and it would have to be reconstructed
   if a new <code><a href="dom.html#document">Document</a></code> were opened.</p>

   <p>An example of the latter would be something like keeping track of
   the precise coordinate from which a popup <code><a href="the-div-element.html#the-div-element">div</a></code> was made
   to animate, so that if the user goes back, it can be made to animate
   to the same location. Or alternatively, it could be used to keep a
   pointer into a cache of data that would be fetched from the server
   based on the information in the <a href="urls.html#url">URL</a>, so that when going
   back and forward, the information doesn't have to be fetched
   again.</p>

  </div>

  <hr><p>At any point, one of the entries in the session history is the
  <dfn id="current-entry">current entry</dfn>. This is the entry representing the
  <a href="#active-document">active document</a> of the <a href="#browsing-context">browsing context</a>.
  Which entry is the <a href="#current-entry">current entry</a> is changed by the
  algorithms defined in this specification, e.g. during <a href="#traverse-the-history" title="traverse the history">session history traversal</a>.</p>

  <p class="note">The <a href="#current-entry">current entry</a> is usually an entry
  for the <a href="#dom-location-href" title="dom-location-href">location</a> of the
  <code><a href="dom.html#document">Document</a></code>. However, it can also be one of the entries
  for <a href="#state-object" title="state object">state objects</a> added to the
  history by that document.</p>

  <p><dfn id="an-entry-with-persisted-user-state">An entry with persisted user state</dfn> is one that also
  has user-agent defined state. This specification does not specify
  what kind of state can be stored.</p>
  
  <p class="example">For example, some user agents might want to
  persist the scroll position, or the values of form controls.</p>

  <p class="note">User agents that persist the value of form controls
  are encouraged to also persist their directionality (the value of
  the element's <code title="attr-dir"><a href="global-attributes.html#the-dir-attribute">dir</a></code> attribute). This
  prevents values from being displayed incorrectly after a history
  traversal when the user had originally entered the values with an
  explicit, non-default directionality.</p>

  <p>Entries that consist of <a href="#state-object" title="state object">state
  objects</a> share the same <code><a href="dom.html#document">Document</a></code> as the entry for
  the page that was active when they were added.</p>

  <p>Contiguous entries that differ just by fragment identifier also
  share the same <code><a href="dom.html#document">Document</a></code>.</p>

  <p class="note">All entries that share the same
  <code><a href="dom.html#document">Document</a></code> (and that are therefore merely different
  states of one particular document) are contiguous by definition.</p>

  <p>Each <code><a href="dom.html#document">Document</a></code> in a <a href="#browsing-context">browsing context</a> can
  also have a <dfn id="latest-entry">latest entry</dfn>. This is the entry or that
  <code><a href="dom.html#document">Document</a></code> that was most the recently traversed to. When
  a <code><a href="dom.html#document">Document</a></code> is created, it initially has no <a href="#latest-entry">latest
  entry</a>.</p>

  <div class="impl">

  <p>User agents may <a href="#discard-a-document" title="discard a Document">discard</a>
  the <code><a href="dom.html#document">Document</a></code> objects of entries other than the
  <a href="#current-entry">current entry</a> that are not referenced from any script,
  reloading the pages afresh when the user or script navigates back to
  such pages. This specification does not specify when user agents
  should discard <code><a href="dom.html#document">Document</a></code> objects and when they should
  cache them.</p>

  <p>Entries that have had their <code><a href="dom.html#document">Document</a></code> objects
  discarded must, for the purposes of the algorithms given below, act
  as if they had not. When the user or script navigates back or
  forwards to a page which has no in-memory DOM objects, any other
  entries that shared the same <code><a href="dom.html#document">Document</a></code> object with it
  must share the new object as well.</p>

  </div>


<!--TOPIC:DOM APIs-->
  <h4 id="the-history-interface"><span class="secno">5.5.2 </span>The <code><a href="#history-1">History</a></code> interface</h4>

  <pre class="idl">interface <dfn id="history-1">History</dfn> {
  readonly attribute long <a href="#dom-history-length" title="dom-history-length">length</a>;
  readonly attribute any <a href="#dom-history-state" title="dom-history-state">state</a>;
  void <a href="#dom-history-go" title="dom-history-go">go</a>(optional long delta);
  void <a href="#dom-history-back" title="dom-history-back">back</a>();
  void <a href="#dom-history-forward" title="dom-history-forward">forward</a>();
  void <a href="#dom-history-pushstate" title="dom-history-pushState">pushState</a>(any data, DOMString title, optional DOMString? url);
  void <a href="#dom-history-replacestate" title="dom-history-replaceState">replaceState</a>(any data, DOMString title, optional DOMString? url);
};</pre>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-history"><a href="#dom-history">history</a></code> . <code title="dom-history-length"><a href="#dom-history-length">length</a></code></dt>

   <dd>

    <p>Returns the number of entries in the <a href="#joint-session-history">joint session history</a>.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-history"><a href="#dom-history">history</a></code> . <code title="dom-history-state"><a href="#dom-history-state">state</a></code></dt>

   <dd>

    <p>Returns the current <a href="#state-object">state object</a>.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-history"><a href="#dom-history">history</a></code> . <code title="dom-history-go"><a href="#dom-history-go">go</a></code>( [ <var title="">delta</var> ] )</dt>

   <dd>

    <p>Goes back or forward the specified number of steps in the <a href="#joint-session-history">joint session history</a>.</p>

    <p>A zero delta will reload the current page.</p>

    <p>If the delta is out of range, does nothing.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-history"><a href="#dom-history">history</a></code> . <code title="dom-history-back"><a href="#dom-history-back">back</a></code>()</dt>

   <dd>

    <p>Goes back one step in the <a href="#joint-session-history">joint session history</a>.</p>

    <p>If there is no previous page, does nothing.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-history"><a href="#dom-history">history</a></code> . <code title="dom-history-forward"><a href="#dom-history-forward">forward</a></code>()</dt>

   <dd>

    <p>Goes forward one step in the <a href="#joint-session-history">joint session history</a>.</p>

    <p>If there is no next page, does nothing.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-history"><a href="#dom-history">history</a></code> . <code title="dom-history-pushState"><a href="#dom-history-pushstate">pushState</a></code>(<var title="">data</var>, <var title="">title</var> [, <var title="">url</var> ] )</dt>

   <dd>

    <p>Pushes the given data onto the session history, with the given title, and, if provided, the given URL.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-history"><a href="#dom-history">history</a></code> . <code title="dom-history-replaceState"><a href="#dom-history-replacestate">replaceState</a></code>(<var title="">data</var>, <var title="">title</var> [, <var title="">url</var> ] )</dt>

   <dd>

    <p>Updates the current entry in the session history to have the given data, title, and, if provided, URL.</p>

   </dd>

  </dl><!--TOPIC:HTML--><p>The <dfn id="joint-session-history">joint session history</dfn> of a <code><a href="#history-1">History</a></code>
  object is the union of all the <a href="#session-history" title="session history">session
  histories</a> of all <a href="#browsing-context" title="browsing context">browsing
  contexts</a> of all the <a href="#fully-active">fully active</a>
  <code><a href="dom.html#document">Document</a></code> objects that share the <code><a href="#history-1">History</a></code>
  object's <a href="#top-level-browsing-context">top-level browsing context</a>, with all the
  entries that are <a href="#current-entry" title="current entry">current entries</a>
  in their respective <a href="#session-history" title="session history">session
  histories</a> removed except for the <a href="#current-entry-of-the-joint-session-history">current entry of the
  joint session history</a>.</p>

  <p>The <dfn id="current-entry-of-the-joint-session-history">current entry of the joint session history</dfn> is the
  entry that most recently became a <a href="#current-entry">current entry</a> in its
  <a href="#session-history">session history</a>.</p>

  <p>Entries in the <a href="#joint-session-history">joint session history</a> are ordered
  chronologically by the time they were added to their respective
  <a href="#session-history" title="session history">session histories</a>. (Since all
  these <a href="#browsing-context" title="browsing context">browsing contexts</a> by
  definition share an <a href="#event-loop">event loop</a>, there is always a
  well-defined sequential order in which their <a href="#session-history" title="session
  history">session histories</a> had their entries added.) Each
  entry has an index; the earliest entry has index 0, and the
  subsequent entries are numbered with consecutively increasing
  integers (1, 2, 3, etc).</p>

<!--TOPIC:DOM APIs-->
  <div class="impl">

  <p>The <dfn id="dom-history-length" title="dom-history-length"><code>length</code></dfn>
  attribute of the <code><a href="#history-1">History</a></code> interface must return the
  number of entries in the <a href="#joint-session-history">joint session history</a>.</p>

  <p>The actual entries are not accessible from script.</p>

  <p>The <dfn id="dom-history-state" title="dom-history-state"><code>state</code></dfn>
  attribute of the <code><a href="#history-1">History</a></code> interface must return the last
  value it was set to by the user agent. Initially, its value must be
  null.</p>

  <p>When the <dfn id="dom-history-go" title="dom-history-go"><code>go(<var title="">delta</var>)</code></dfn> method is invoked, if the
  argument to the method was omitted or has the value zero, the user
  agent must act as if the <code title="dom-location-reload"><a href="#dom-location-reload">location.reload()</a></code> method was
  called instead. Otherwise, the user agent must <a href="#traverse-the-history-by-a-delta">traverse the
  history by a delta</a> whose value is the value of the method's
  argument.</p>

  <p>When the <dfn id="dom-history-back" title="dom-history-back"><code>back()</code></dfn>
  method is invoked, the user agent must <a href="#traverse-the-history-by-a-delta">traverse the history by
  a delta</a> &#8722;1.</p>

  <p>When the <dfn id="dom-history-forward" title="dom-history-forward"><code>forward()</code></dfn>method is
  invoked, the user agent must <a href="#traverse-the-history-by-a-delta">traverse the history by a
  delta</a> +1.</p>
<!--TOPIC:HTML-->

  <p>To <dfn id="traverse-the-history-by-a-delta">traverse the history by a delta</dfn> <var title="">delta</var>, the user agent must <a href="#queue-a-task">queue a task</a>
  to run the following steps. The <a href="#task-source">task source</a> for the
  queued task is the <a href="#history-traversal-task-source">history traversal task source</a>.</p>

  <ol><li><p>Let <var title="">delta</var> be the argument to the
   method.</p></li>

   <li><p>If the index of the <a href="#current-entry-of-the-joint-session-history">current entry of the joint session
   history</a> plus <var title="">delta</var> is less than zero or
   greater than or equal to the number of items in the <a href="#joint-session-history">joint
   session history</a>, then abort these steps.</p>

   </li><li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="#unload-a-document">unload a
   document</a> algorithm is currently running, abort these
   steps.</p></li>

   <li><p>If there is an ongoing attempt to navigate the
   <a href="#browsing-context">browsing context</a> that has not yet <a href="#concept-navigate-mature" title="concept-navigate-mature">matured</a> (i.e. it has not
   passed the point of making its <code><a href="dom.html#document">Document</a></code> the
   <a href="#active-document">active document</a>), then cancel that attempt to navigate
   the <a href="#browsing-context">browsing context</a>.</p></li>

   <li><p>Let <var title="">specified entry</var> be the entry in the
   <a href="#joint-session-history">joint session history</a> whose index is the sum of <var title="">delta</var> and the index of the <a href="#current-entry-of-the-joint-session-history">current entry of
   the joint session history</a>.</p></li>

   <li><p>Let <var title="">specified browsing context</var> be the
   <a href="#browsing-context">browsing context</a> of the <var title="">specified
   entry</var>.</p></li>

   <li>

    <p>If the <var title="">specified browsing context</var>'s
    <a href="#active-document">active document</a> is not the same <code><a href="dom.html#document">Document</a></code>
    as the <code><a href="dom.html#document">Document</a></code> of the <var title="">specified
    entry</var>, then run these substeps:</p>

    <ol><li><p><a href="#prompt-to-unload-a-document" title="prompt to unload a document">Prompt to
     unload</a> the <a href="#active-document">active document</a> of the <var title="">specified browsing context</var>. If the user
     <a href="#refused-to-allow-the-document-to-be-unloaded">refused to allow the document to be unloaded</a>, then
     abort these steps.</p></li>

     <li><p><a href="#unload-a-document" title="unload a document">Unload</a> the
     <a href="#active-document">active document</a> of the <var title="">specified
     browsing context</var> with the <var title="">recycle</var>
     parameter set to false.</p></li>

    </ol></li>

   <li><p><a href="#traverse-the-history">Traverse the history</a> of the <var title="">specified browsing context</var> to the <var title="">specified entry</var>.</p>

  </li></ol><p>When the user navigates through a <a href="#browsing-context">browsing context</a>,
  e.g. using a browser's back and forward buttons, the user agent must
  <a href="#traverse-the-history-by-a-delta">traverse the history by a delta</a> equivalent to the
  action specified by the user.</p>

  <hr><!--TOPIC:DOM APIs--><p>The <dfn id="dom-history-pushstate" title="dom-history-pushState"><code>pushState(<var title="">data</var>, <var title="">title</var>, <var title="">url</var>)</code></dfn> method adds a state object entry to
  the history.</p>

  <p>The <dfn id="dom-history-replacestate" title="dom-history-replaceState"><code>replaceState(<var title="">data</var>, <var title="">title</var>, <var title="">url</var>)</code></dfn> method updates the state object,
  title, and optionally the <a href="urls.html#url">URL</a> of the <a href="#current-entry">current
  entry</a> in the history.</p>

  <p>When either of these methods is invoked, the user agent must run
  the following steps:</p>

  <ol><li><p>Let <var title="">cloned data</var> be a <a href="common-dom-interfaces.html#structured-clone">structured
   clone</a> of the specified <var title="">data</var>. If this
   throws an exception, then rethrow that exception and abort these
   steps.</p></li>

   <li>

    <p>If a third argument is specified and is not null, run these substeps:</p>

    <ol><li><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> the value of the
     third argument, relative to the <a href="#entry-script">entry script</a>'s <a href="#script's-base-url" title="script's base URL">base URL</a>.</li>

     <li>If that fails, throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception
     and abort these steps.</li>

     <li>Compare the resulting <a href="urls.html#absolute-url">absolute URL</a> to <a href="dom.html#the-document's-address">the
     document's address</a>. If any part of these two <a href="urls.html#url" title="URL">URLs</a> differ other than the <a href="urls.html#url-path" title="url-path">&lt;path&gt;</a>, <a href="urls.html#url-query" title="url-query">&lt;query&gt;</a>, and <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a> components, then
     throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception and abort these
     steps.</li>

     <li>If the <a href="#origin-0">origin</a> of the resulting <a href="urls.html#absolute-url">absolute
     URL</a> is not the same as the <a href="#origin-0">origin</a> of the
     <a href="#entry-script">entry script</a>'s <a href="#script's-document" title="script's
     document">document</a>, and either the <a href="urls.html#url-path" title="url-path">&lt;path&gt;</a> or <a href="urls.html#url-query" title="url-query">&lt;query&gt;</a> components of the two
     <a href="urls.html#url" title="URL">URLs</a> compared in the previous step
     differ, throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception and abort
     these steps. (This prevents sandboxed content from spoofing other
     pages on the same origin.)</li>

     <li><p>Let <var title="">new URL</var> be the resulting
     <a href="urls.html#absolute-url">absolute URL</a>.</p></li>

    </ol><p>For the purposes of the comparisons in the above substeps, the
    <a href="urls.html#url-path" title="url-path">&lt;path&gt;</a> and <a href="urls.html#url-query" title="url-query">&lt;query&gt;</a> components can only be the
    same if the URLs are both <a href="urls.html#hierarchical-url" title="hierarchical
    URL">hierarchical URLs</a>.</p>

   </li>

   <li>

    <p>If a third argument is <em>not</em> specified, or is null, then let <var title="">new URL</var> be the <a href="urls.html#url">URL</a> of the
    <a href="#current-entry">current entry</a>.</p>

   </li><li>

    <p>If the method invoked was the <code title="dom-history-pushState"><a href="#dom-history-pushstate">pushState()</a></code> method:</p>

    <ol><li>

      <p>Remove all the entries in the <a href="#browsing-context">browsing context</a>'s
      <a href="#session-history">session history</a> after the <a href="#current-entry">current
      entry</a>. If the <a href="#current-entry">current entry</a> is the last
      entry in the session history, then no entries are
      removed.</p>

      <p class="note">This <a href="#history-notes">doesn't
      necessarily have to affect</a> the user agent's user
      interface.</p>

     </li>

     <li><p>Remove any <a href="#concept-task" title="concept-task">tasks</a> queued
     by the <a href="#history-traversal-task-source">history traversal task source</a> that are
     associated with any <code><a href="dom.html#document">Document</a></code> objects in the
     <a href="#top-level-browsing-context">top-level browsing context</a>'s <a href="#document-family">document
     family</a>.</p></li>

     <li><p>If appropriate, update the <a href="#current-entry">current entry</a> to
     reflect any state that the user agent wishes to persist. The
     entry is then said to be <a href="#an-entry-with-persisted-user-state">an entry with persisted user
     state</a>.</p></li>

     <li><p>Add a <a href="#state-object">state object</a> entry to the session
     history, after the <a href="#current-entry">current entry</a>, with <var title="">cloned data</var> as the <a href="#state-object">state object</a>, the
     given <var title="">title</var> as the title, and <var title="">new URL</var> as the <a href="urls.html#url">URL</a> of the
     entry.</p></li>

     <li><p>Update the <a href="#current-entry">current entry</a> to be this newly
     added entry.</p></li>

    </ol><p>Otherwise, if the method invoked was the <code title="dom-history-replaceState"><a href="#dom-history-replacestate">replaceState()</a></code> method:</p>

    <ol><li><p>Update the <a href="#current-entry">current entry</a> in the session
     history so that <var title="">cloned data</var> is the entry's
     new state object, the given <var title="">title</var> is the new
     title, and <var title="">new URL</var> is the entry's new
     <a href="urls.html#url">URL</a>.</p></li>

    </ol></li>

   <li><p>If the <a href="#current-entry">current entry</a> in the session history
   represents a non-GET request (e.g. it was the result of a POST
   submission) then update it to instead represent a GET request
   (<a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">or
   equivalent</a>).</p></li>

   <li>

    <p>Set <a href="dom.html#the-document's-address">the document's address</a> to <var title="">new
    URL</var>.</p>

    <p class="note">Since this is neither a <a href="#navigate" title="navigate">navigation</a> of the <a href="#browsing-context">browsing
    context</a> nor a <a href="#traverse-the-history" title="traverse the history">history
    traversal</a>, it does not cause a <code title="event-hashchange"><a href="#event-hashchange">hashchange</a></code> event to be fired.</p>

   </li>

   <li>

    <p>Set <code title="dom-history-state"><a href="#dom-history-state">history.state</a></code> to a
    <a href="common-dom-interfaces.html#structured-clone">structured clone</a> of <var title="">cloned
    data</var>.</p> <!-- it's a clone of /cloned data/, not /data/, so
    that there's no risk of running scripts again -->

   </li>

   <li>

    <p>Let the <a href="#latest-entry">latest entry</a> of the
    <code><a href="dom.html#document">Document</a></code> of the <a href="#current-entry">current entry</a> be the
    <a href="#current-entry">current entry</a>.</p>

   </li>

  </ol><p class="note">The <var title="">title</var> is purely
  advisory. User agents might use the title in the user interface.</p>

  <p>User agents may limit the number of state objects added to the
  session history per page. If a page hits the UA-defined limit, user
  agents must remove the entry immediately after the first entry for
  that <code><a href="dom.html#document">Document</a></code> object in the session history after
  having added the new entry. (Thus the state history acts as a FIFO
  buffer for eviction, but as a LIFO buffer for navigation.)</p>

  </div>

  <div class="example">

   <p>Consider a game where the user can navigate along a line, such
   that the user is always at some coordinate, and such that the user
   can bookmark the page corresponding to a particular coordinate, to
   return to it later.</p>

   <p>A static page implementing the x=5 position in such a game could
   look like the following:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;!-- this is http://example.com/line?x=5 --&gt;
&lt;title&gt;Line Game - 5&lt;/title&gt;
&lt;p&gt;You are at coordinate 5 on the line.&lt;/p&gt;
&lt;p&gt;
 &lt;a href="?x=6"&gt;Advance to 6&lt;/a&gt; or
 &lt;a href="?x=4"&gt;retreat to 4&lt;/a&gt;?
&lt;/p&gt;</pre>

   <p>The problem with such a system is that each time the user
   clicks, the whole page has to be reloaded. Here instead is another
   way of doing it, using script:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;!-- this starts off as http://example.com/line?x=5 --&gt;
&lt;title&gt;Line Game - 5&lt;/title&gt;
&lt;p&gt;You are at coordinate &lt;span id="coord"&gt;5&lt;/span&gt; on the line.&lt;/p&gt;
&lt;p&gt;
 &lt;a href="?x=6" onclick="go(1); return false;"&gt;Advance to 6&lt;/a&gt; or
 &lt;a href="?x=4" onclick="go(-1); return false;"&gt;retreat to 4&lt;/a&gt;?
&lt;/p&gt;
&lt;script&gt;
 var currentPage = 5; // prefilled by server
 function go(d) {
   setupPage(currentPage + d);
   history.pushState(currentPage, document.title, '?x=' + currentPage);
 }
 onpopstate = function(event) {
   setupPage(event.state);
 }
 function setupPage(page) {
   currentPage = page;
   document.title = 'Line Game - ' + currentPage;
   document.getElementById('coord').textContent = currentPage;
   document.links[0].href = '?x=' + (currentPage+1);
   document.links[0].textContent = 'Advance to ' + (currentPage+1);
   document.links[1].href = '?x=' + (currentPage-1);
   document.links[1].textContent = 'retreat to ' + (currentPage-1);
 }
&lt;/script&gt;</pre>

   <p>In systems without script, this still works like the previous
   example. However, users that <em>do</em> have script support can
   now navigate much faster, since there is no network access for the
   same experience. Furthermore, contrary to the experience the user
   would have with just a na&#239;ve script-based approach,
   bookmarking and navigating the session history still work.</p>

   <p>In the example above, the <var title="">data</var> argument to
   the <code title="dom-history-pushState"><a href="#dom-history-pushstate">pushState()</a></code> method
   is the same information as would be sent to the server, but in a
   more convenient form, so that the script doesn't have to parse the
   URL each time the user navigates.</p>

  </div>

  <div class="example">

   <p>Applications might not use the same title for a <a href="#session-history-entry">session
   history entry</a> as the value of the document's
   <code><a href="the-title-element.html#the-title-element">title</a></code> element at that time. For example, here is a
   simple page that shows a block in the <code><a href="the-title-element.html#the-title-element">title</a></code> element.
   Clearly, when navigating backwards to a previous state the user
   does not go back in time, and therefore it would be inappropriate
   to put the time in the session history title.</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;TITLE&gt;Line&lt;/TITLE&gt;
&lt;SCRIPT&gt;
 setInterval(function () { document.title = 'Line - ' + new Date(); }, 1000);
 var i = 1;
 function inc() {
   set(i+1);
   history.pushState(i, 'Line - ' + i);
 }
 function set(newI) {
   i = newI;
   document.forms.F.I.value = newI;
 }
&lt;/SCRIPT&gt;
&lt;BODY ONPOPSTATE="set(event.state)"&gt;
&lt;FORM NAME=F&gt;
State: &lt;OUTPUT NAME=I&gt;1&lt;/OUTPUT&gt; &lt;INPUT VALUE="Increment" TYPE=BUTTON ONCLICK="inc()"&gt;
&lt;/FORM&gt;</pre>

  </div>



  <h4 id="the-location-interface"><span class="secno">5.5.3 </span>The <code><a href="#location">Location</a></code> interface</h4>

  <p>Each <code><a href="dom.html#document">Document</a></code> object in a <a href="#browsing-context">browsing
  context</a>'s session history is associated with a unique
  instance of a <code><a href="#location">Location</a></code> object.</p>

  <dl class="domintro"><dt><var title="">document</var> . <code title="dom-document-location"><a href="#dom-document-location">location</a></code> [ = <var title="">value</var> ]</dt>
   <dt><var title="">window</var> . <code title="dom-location"><a href="#dom-location">location</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns a <code><a href="#location">Location</a></code> object with the current page's location.</p>

    <p>Can be set, to navigate to another page.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-document-location" title="dom-document-location"><code>location</code></dfn> attribute
  of the <code><a href="dom.html#document">Document</a></code> interface must return the
  <code><a href="#location">Location</a></code> object for that <code><a href="dom.html#document">Document</a></code> object,
  if it is in a <a href="#browsing-context">browsing context</a>, and null otherwise.</p>

  <p>The <dfn id="dom-location" title="dom-location"><code>location</code></dfn>
  attribute of the <code><a href="#window">Window</a></code> interface must return the
  <code><a href="#location">Location</a></code> object for that <code><a href="#window">Window</a></code> object's
  <code><a href="dom.html#document">Document</a></code>.</p>

  </div>

  <p><code><a href="#location">Location</a></code> objects provide a representation of <a href="dom.html#the-document's-address" title="the document's address">their document's address</a>, and
  allow the <a href="#current-entry">current entry</a> of the <a href="#browsing-context">browsing
  context</a>'s session history to be changed, by adding or
  replacing entries in the <code title="dom-history"><a href="#dom-history">history</a></code>
  object.</p>

  <pre class="idl">interface <dfn id="location">Location</dfn> {
  stringifier attribute DOMString <a href="#dom-location-href" title="dom-location-href">href</a>;
  void <a href="#dom-location-assign" title="dom-location-assign">assign</a>(DOMString url);
  void <a href="#dom-location-replace" title="dom-location-replace">replace</a>(DOMString url);
  void <a href="#dom-location-reload" title="dom-location-reload">reload</a>();

  // <a href="urls.html#url-decomposition-idl-attributes">URL decomposition IDL attributes</a> <!-- blame brendan for these "innovative" names -->
           attribute DOMString <a href="#dom-location-protocol" title="dom-location-protocol">protocol</a>;
           attribute DOMString <a href="#dom-location-host" title="dom-location-host">host</a>;
           attribute DOMString <a href="#dom-location-hostname" title="dom-location-hostname">hostname</a>;
           attribute DOMString <a href="#dom-location-port" title="dom-location-port">port</a>;
           attribute DOMString <a href="#dom-location-pathname" title="dom-location-pathname">pathname</a>;
           attribute DOMString <a href="#dom-location-search" title="dom-location-search">search</a>;
           attribute DOMString <a href="#dom-location-hash" title="dom-location-hash">hash</a>;
};</pre>

  <dl class="domintro"><dt><var title="">location</var> . <code title="dom-location-href"><a href="#dom-location-href">href</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the current page's location.</p>

    <p>Can be set, to navigate to another page.</p>

   </dd>

   <dt><var title="">location</var> . <code title="dom-location-assign"><a href="#dom-location-assign">assign</a></code>(<var title="">url</var>)</dt>

   <dd>

    <p>Navigates to the given page.</p>

   </dd>

   <dt><var title="">location</var> . <code title="dom-location-replace"><a href="#dom-location-replace">replace</a></code>(<var title="">url</var>)</dt>

   <dd>

    <p>Removes the current page from the session history and navigates to the given page.</p>

   </dd>

   <dt><var title="">location</var> . <code title="dom-location-reload"><a href="#dom-location-reload">reload</a></code>()</dt>

   <dd>

    <p>Reloads the current page.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-location-href" title="dom-location-href"><code>href</code></dfn>
  attribute must return <a href="dom.html#the-document's-address" title="the document's address">the
  address</a> of the associated <code><a href="dom.html#document">Document</a></code> object, as an
  <a href="urls.html#absolute-url">absolute URL</a>.</p>

  <p>On setting, if the <code><a href="#location">Location</a></code> object's associated
  <code><a href="dom.html#document">Document</a></code> object has <a href="#completely-loaded">completely loaded</a>,
  then the user agent must act as if the <code title="dom-location-assign"><a href="#dom-location-assign">assign()</a></code> method had been called
  with the new value as its argument. Otherwise, the user agent must
  act as if the <code title="dom-location-replace"><a href="#dom-location-replace">replace()</a></code>
  method had been called with the new value as its argument.</p>
  <!--DONAV location.href, defined in terms of the paragraphs below-->

  <p>When the <dfn id="dom-location-assign" title="dom-location-assign"><code>assign(<var title="">url</var>)</code></dfn> method is invoked, the UA must
  <a href="urls.html#resolve-a-url" title="resolve a url">resolve</a> the argument, relative to
  the <a href="#entry-script">entry script</a>'s <a href="#script's-base-url" title="script's base URL">base
  URL</a>, and if that is successful, must
  <a href="#navigate">navigate</a><!--DONAV location.href/assign--> the
  <a href="#browsing-context">browsing context</a> to the specified <var title="">url</var>. If the <a href="#browsing-context">browsing context</a>'s
  <a href="#session-history">session history</a> contains only one
  <code><a href="dom.html#document">Document</a></code>, and that was the <code><a href="urls.html#about:blank">about:blank</a></code>
  <code><a href="dom.html#document">Document</a></code> created when the <a href="#browsing-context">browsing context</a>
  was created, then the navigation must be done with <a href="#replacement-enabled">replacement
  enabled</a>.</p> <!-- READ ME WHEN EDITING THIS: IE and Firefox
  only seem to treat it that way if the DOM is still a virgin DOM;
  Safari doesn't check that. Thus this might need changing if testing
  shows the IE/Firefox behaviour is required here. -->

  <p>When the <dfn id="dom-location-replace" title="dom-location-replace"><code>replace(<var title="">url</var>)</code></dfn> method is invoked, the UA must
  <a href="urls.html#resolve-a-url" title="resolve a url">resolve</a> the argument, relative to
  the <a href="#entry-script">entry script</a>'s <a href="#script's-base-url" title="script's base URL">base
  URL</a>, and if that is successful,
  <a href="#navigate">navigate</a><!--DONAV location.href/replace--> the
  <a href="#browsing-context">browsing context</a> to the specified <var title="">url</var> with <a href="#replacement-enabled">replacement enabled</a>.</p>

  <p>Navigation for the <code title="dom-location-assign"><a href="#dom-location-assign">assign()</a></code> and <code title="dom-location-replace"><a href="#dom-location-replace">replace()</a></code> methods must be done
  with the <a href="#script's-browsing-context" title="script's browsing context">browsing
  context</a> of the script that invoked the method as the
  <a href="#source-browsing-context">source browsing context</a>.</p>

  <p>If the <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> step of the
  <code title="dom-location-assign"><a href="#dom-location-assign">assign()</a></code> and <code title="dom-location-replace"><a href="#dom-location-replace">replace()</a></code> methods is not
  successful, then the user agent must instead throw a
  <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception.</p>

  <p>When the <dfn id="dom-location-reload" title="dom-location-reload"><code>reload()</code></dfn> method is
  invoked, the user agent must run the appropriate steps from the
  following list:</p>

  <dl class="switch"><dt>If the currently executing <a href="#concept-task" title="concept-task">task</a> is the dispatch of a <code title="event-resize">resize</code> event in response to the user
   resizing the <a href="#browsing-context">browsing context</a></dt>

   <dd><p>Repaint the <a href="#browsing-context">browsing context</a> and abort these
   steps.</p></dd> <!-- this theoretically would have no effect but in
   practice can be useful to work around rendering bugs. -->

   <dt>If the <a href="#browsing-context">browsing context</a>'s <a href="#active-document">active
   document</a> is <a href="the-iframe-element.html#an-iframe-srcdoc-document">an <code>iframe</code> <code title="attr-iframe-srcdoc">srcdoc</code> document</a></dt>

   <dd><p><a href="the-iframe-element.html#process-the-iframe-attributes" title="process the iframe attributes">Reprocess the
   <code>iframe</code> attributes</a> of the <a href="#browsing-context">browsing
   context</a>'s <a href="#browsing-context-container">browsing context container</a>.</p></dd>

   <dt>If the <a href="#browsing-context">browsing context</a>'s <a href="#active-document">active
   document</a> has its <a href="dom.html#reload-override-flag">reload override
   flag</a> set</dt>

   <dd><p>Perform <a href="dom.html#an-overridden-reload">an overridden reload</a>.</p></dd>

   <dt>Otherwise</dt>

   <dd><p><a href="#navigate">Navigate</a><!--DONAV location.reload()--> the
   <a href="#browsing-context">browsing context</a> to <a href="dom.html#the-document's-address">the document's
   address</a> with <a href="#replacement-enabled">replacement enabled</a>. The
   <a href="#source-browsing-context">source browsing context</a> must be the <a href="#browsing-context">browsing
   context</a> being navigated.</p></dd> <!-- it appears that
   document.reload() always uses GET and does not, e.g., re-POST. -->

   <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/saved/141 -->

  </dl><p>When a user requests that the current page of a <a href="#browsing-context">browsing
  context</a> be reloaded through a user interface element, the
  user agent should <a href="#navigate">navigate</a><!--DONAV user reload--> the
  <a href="#browsing-context">browsing context</a> to the same resource as
  <code><a href="dom.html#document">Document</a></code>, with <a href="#replacement-enabled">replacement enabled</a>. In the
  case of non-idempotent methods (e.g. HTTP POST), the user agent
  should prompt the user to confirm the operation first, since
  otherwise transactions (e.g. purchases or database modifications)
  could be repeated. User agents may allow the user to explicitly
  override any caches when reloading. If <a href="#browsing-context">browsing
  context</a>'s <a href="#active-document">active document</a>'s <a href="dom.html#reload-override-flag">reload
  override flag</a> is set, then the user agent may instead perform
  <a href="dom.html#an-overridden-reload">an overridden reload</a> rather than the navigation
  described in this paragraph.</p>

  </div>

  <p>The <code><a href="#location">Location</a></code> interface also has the complement of
  <a href="urls.html#url-decomposition-idl-attributes">URL decomposition IDL attributes</a>, <dfn id="dom-location-protocol" title="dom-location-protocol"><code>protocol</code></dfn>, <dfn id="dom-location-host" title="dom-location-host"><code>host</code></dfn>, <dfn id="dom-location-port" title="dom-location-port"><code>port</code></dfn>, <dfn id="dom-location-hostname" title="dom-location-hostname"><code>hostname</code></dfn>, <dfn id="dom-location-pathname" title="dom-location-pathname"><code>pathname</code></dfn>, <dfn id="dom-location-search" title="dom-location-search"><code>search</code></dfn>, and <dfn id="dom-location-hash" title="dom-location-hash"><code>hash</code></dfn>. <span class="impl">These must follow the rules given for <a href="urls.html#url-decomposition-idl-attributes">URL
  decomposition IDL attributes</a>, with the <a href="urls.html#concept-uda-input" title="concept-uda-input">input</a> being <a href="dom.html#the-document's-address" title="the
  document's address">the address</a> of the associated
  <code><a href="dom.html#document">Document</a></code> object, as an <a href="urls.html#absolute-url">absolute URL</a> (same
  as the <code title="dom-location-href"><a href="#dom-location-href">href</a></code> attribute), and
  the <a href="urls.html#concept-uda-setter" title="concept-uda-setter">common setter action</a>
  being the same as setting the <code title="dom-location-href"><a href="#dom-location-href">href</a></code> attribute to the new output
  value.</span></p> <!--TOPIC:HTML-->


<!--ADD-TOPIC:Security-->
  <div class="impl">

  <h5 id="security-location"><span class="secno">5.5.3.1 </span>Security</h5>

  <p id="security-3">User agents must throw a
  <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception whenever any of the members of a
  <code><a href="#location">Location</a></code> object are accessed by scripts whose
  <a href="#effective-script-origin">effective script origin</a> is not the <a href="#same-origin" title="same
  origin">same</a> as the <code><a href="#location">Location</a></code> object's associated
  <code><a href="dom.html#document">Document</a></code>'s <a href="#effective-script-origin">effective script origin</a>, with
  the following exceptions:</p>

  <ul><li>The <code title="dom-location-href"><a href="#dom-location-href">href</a></code> setter, if the
   script is running in a <a href="#browsing-context">browsing context</a> that is
   <a href="#allowed-to-navigate">allowed to navigate</a> the browsing context with which
   the <code><a href="#location">Location</a></code> object is associated

   </li><li>The <code title="dom-location-replace"><a href="#dom-location-replace">replace()</a></code> method,
   if the script is running in a <a href="#browsing-context">browsing context</a> that is
   <a href="#allowed-to-navigate">allowed to navigate</a> the browsing context with which
   the <code><a href="#location">Location</a></code> object is associated

  </li></ul></div>
<!--REMOVE-TOPIC:Security-->


  <div class="impl">

  <h4 id="history-notes"><span class="secno">5.5.4 </span>Implementation notes for session history</h4>
  <!-- don't change the ID without updating multiple internal links -->

  <p><i>This section is non-normative.</i></p>
  <p>The <code><a href="#history-1">History</a></code> interface is not meant to place
  restrictions on how implementations represent the session history to
  the user.</p>

  <p>For example, session history could be implemented in a tree-like
  manner, with each page having multiple "forward" pages. This
  specification doesn't define how the linear list of pages in the
  <code title="dom-history"><a href="#dom-history">history</a></code> object are derived from the
  actual session history as seen from the user's perspective.</p>

  <p>Similarly, a page containing two <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>s has a <code title="dom-history"><a href="#dom-history">history</a></code> object distinct from the
  <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>s' <code title="dom-history"><a href="#dom-history">history</a></code>
  objects, despite the fact that typical Web browsers present the user
  with just one "Back" button, with a session history that interleaves
  the navigation of the two inner frames and the outer page.</p>

<!--ADD-TOPIC:Security-->
  <p><strong>Security</strong>: It is suggested that to avoid letting
  a page "hijack" the history navigation facilities of a UA by abusing
  <code title="dom-history-pushState"><a href="#dom-history-pushstate">pushState()</a></code>, the UA
  provide the user with a way to jump back to the previous page
  (rather than just going back to the previous state). For example,
  the back button could have a drop down showing just the pages in the
  session history, and not showing any of the states. Similarly, an
  aural browser could have two "back" commands, one that goes back to
  the previous state, and one that jumps straight back to the previous
  page.</p>

  <p>In addition, a user agent could ignore calls to <code title="dom-history-pushState"><a href="#dom-history-pushstate">pushState()</a></code> that are invoked on
  a timer, or from event listeners that are not triggered in response
  to a clear user action, or that are invoked in rapid succession.</p>
<!--REMOVE-TOPIC:Security-->

  </div>


  <h3 id="browsing-the-web"><span class="secno">5.6 </span>Browsing the Web</h3>

  <div class="impl">

  <h4 id="navigating-across-documents"><span class="secno">5.6.1 </span>Navigating across documents</h4>

  <p>Certain actions cause the <a href="#browsing-context">browsing context</a> to
  <i><a href="#navigate">navigate</a></i> to a new resource. Navigation always involves
  <dfn id="source-browsing-context">source browsing context</dfn>, which is the browsing context
  which was responsible for starting the navigation.</p>

  <p class="example">For example, <a href="#following-hyperlinks-0" title="following
  hyperlinks">following a hyperlink</a>, <a href="#concept-form-submit" title="concept-form-submit">form submission</a>, and the <code title="dom-open"><a href="#dom-open">window.open()</a></code> and <code title="dom-location-assign"><a href="#dom-location-assign">location.assign()</a></code> methods can all
  cause a browsing context to navigate.</p>

  <p>A user agent may provide various ways for the user to explicitly
  cause a browsing context to navigate, in addition to those defined
  in this specification.</p>

  <!-- NAVIGATE <dfn>navigate</dfn> -->
  <!-- For places that _call_ this, as opposed to just referring to
  it, search for "DONAV" -->
  <p>When a browsing context is <dfn id="navigate" title="navigate">navigated</dfn>
  to a new resource, the user agent must run the following steps:</p>

  <ol><li><p>Release the <a href="#storage-mutex">storage mutex</a>.</p></li>

   <li id="sandboxLinks">

    <p>If the <a href="#source-browsing-context">source browsing context</a> is not the same as
    the <a href="#browsing-context">browsing context</a> being navigated, and the
    <a href="#source-browsing-context">source browsing context</a> is not one of the <a href="#ancestor-browsing-context" title="ancestor browsing context">ancestor browsing
    contexts</a> of the <a href="#browsing-context">browsing context</a> being
    navigated, and the <a href="#browsing-context">browsing context</a> being navigated
    is not a <a href="#top-level-browsing-context">top-level browsing context</a>, and the
    <a href="#source-browsing-context">source browsing context</a>'s <a href="#active-document">active
    document</a>'s <a href="#active-sandboxing-flag-set">active sandboxing flag set</a> has its
    <a href="#sandboxed-navigation-browsing-context-flag">sandboxed navigation browsing context flag</a> set, then
    abort these steps.</p>

    <p>Otherwise, if the <a href="#browsing-context">browsing context</a> being navigated
    is a <a href="#top-level-browsing-context">top-level browsing context</a>, and is one of the
    <a href="#ancestor-browsing-context" title="ancestor browsing context">ancestor browsing
    contexts</a> of the <a href="#source-browsing-context">source browsing context</a>, and
    the <a href="#source-browsing-context">source browsing context</a>'s <code><a href="dom.html#document">Document</a></code>'s
    <a href="#active-sandboxing-flag-set">active sandboxing flag set</a> has its <a href="#sandboxed-top-level-navigation-browsing-context-flag">sandboxed
    top-level navigation browsing context flag</a> set, then abort
    these steps.</p>

    <p>Otherwise, if the <a href="#browsing-context">browsing context</a> being navigated
    is a <a href="#top-level-browsing-context">top-level browsing context</a>, and is not one of
    the <a href="#ancestor-browsing-context" title="ancestor browsing context">ancestor browsing
    contexts</a> of the <a href="#source-browsing-context">source browsing context</a>, and
    the <a href="#source-browsing-context">source browsing context</a>'s <code><a href="dom.html#document">Document</a></code>'s
    <a href="#active-sandboxing-flag-set">active sandboxing flag set</a> has its <a href="#sandboxed-navigation-browsing-context-flag">sandboxed
    navigation browsing context flag</a> set, and the <a href="#source-browsing-context">source
    browsing context</a> is not the <a href="#one-permitted-sandboxed-navigator">one permitted sandboxed
    navigator</a> of the <a href="#browsing-context">browsing context</a> being
    navigated, then abort these steps.</p> <!-- we do not check the
    /sandboxed auxiliary navigation browsing context flag/ here,
    that's only for actually opening the new top-level browsing
    context. -->

    <p>In all of these cases, the user agent may additionally offer to
    open the new resource in a new <a href="#top-level-browsing-context">top-level browsing
    context</a> or in the <a href="#top-level-browsing-context">top-level browsing context</a>
    of the <a href="#source-browsing-context">source browsing context</a>, at the user's option,
    in which case the user agent must <a href="#navigate">navigate</a><!--DONAV
    sandbox manual load--> that designated <a href="#top-level-browsing-context">top-level browsing
    context</a> to the new resource as if the user had requested it
    independently.</p>

    <p class="note">Doing so, however, can be dangerous, as it means
    that the user is overriding the author's explicit request to
    sandbox the content.</p>

   </li>

   <li id="seamlessLinks"><p>If the <a href="#source-browsing-context">source browsing
   context</a> is the same as the <a href="#browsing-context">browsing context</a>
   being navigated, and this browsing context has its <a href="the-iframe-element.html#seamless-browsing-context-flag">seamless
   browsing context flag</a> set, and the <a href="#browsing-context">browsing
   context</a> being navigated was not chosen using an
   <dfn id="explicit-self-navigation-override">explicit self-navigation override</dfn>, then find the
   nearest <a href="#ancestor-browsing-context">ancestor browsing context</a> that does not have
   its <a href="the-iframe-element.html#seamless-browsing-context-flag">seamless browsing context flag</a> set, and continue
   these steps as if <em>that</em> <a href="#browsing-context">browsing context</a> was
   the one that was going to be <a href="#navigate" title="navigate">navigated</a> instead.</p></li>

   <li><p>If there is a preexisting attempt to navigate the
   <a href="#browsing-context">browsing context</a>, and the <a href="#source-browsing-context">source browsing
   context</a> is the same as the <a href="#browsing-context">browsing context</a>
   being navigated, and that attempt is currently
   running the <a href="#unload-a-document">unload a document</a> algorithm, and the
   <a href="#origin-0">origin</a> of the <a href="urls.html#url">URL</a> of the resource being
   loaded in that navigation is not the <a href="#same-origin">same origin</a> as
   the <a href="#origin-0">origin</a> of the <a href="urls.html#url">URL</a> of the resource
   being loaded in <em>this</em> navigation, then abort these steps
   without affecting the preexisting attempt to navigate the
   <a href="#browsing-context">browsing context</a>.</p></li>
   <!-- http://www.hixie.ch/tests/adhoc/html/navigation/unload/ -->

   <li><p>If a <a href="#concept-task" title="concept-task">task</a> queued by the
   <a href="#traverse-the-history-by-a-delta">traverse the history by a delta</a> algorithm is running
   the <a href="#unload-a-document">unload a document</a> algorithm for the <a href="#active-document">active
   document</a> of the <a href="#browsing-context">browsing context</a> being
   navigated, then abort these steps without affecting the
   <a href="#unload-a-document">unload a document</a> algorithm or the aforementioned
   history traversal task.</p></li> <!-- this stops pages from
   hijacking the back/forward button -->

   <li id="navigate-fragid-step"><p><i>Fragment identifiers</i>: If
   the <a href="urls.html#absolute-url">absolute URL</a> of the new resource is the same as
   the <a href="dom.html#the-document's-address" title="the document's address">address</a> of the
   <a href="#active-document">active document</a> of the <a href="#browsing-context">browsing context</a>
   being navigated, ignoring any <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a> components of those
   <a href="urls.html#url" title="URL">URLs</a>, and the new resource is to be
   fetched using HTTP GET <a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">or
   equivalent</a>, and the <a href="urls.html#absolute-url">absolute URL</a> of the new
   resource has a <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a>
   component (even if it is empty), then <a href="#scroll-to-fragid" title="navigate-fragid">navigate to that fragment identifier</a>
   and abort these steps.</p></li>

   <li><p>Cancel any preexisting attempt to navigate the
   <a href="#browsing-context">browsing context</a>, including canceling any instances of
   the <a href="urls.html#fetch">fetch</a> algorithm started by those attempts. If one
   of those attempts has already <a href="#create-a-document-object" title="create a document
   object">created a new <code>Document</code> object</a>, <a href="#abort-a-document" title="abort a document">abort</a> that <code><a href="dom.html#document">Document</a></code>
   also. (Previous navigation attempts whose <a href="urls.html#fetch">fetch</a>
   requests have <em>finished</em> are unaffected, however.)</p></li>

   <li><p>If the new resource is to be handled using a mechanism that
   does not affect the browsing context, e.g. ignoring the navigation
   request altogether because the specified scheme is not one of the
   supported protocols, then abort these steps and proceed with that
   mechanism instead.</p></li>

   <li><p><a href="#prompt-to-unload-a-document" title="prompt to unload a document">Prompt to
   unload</a> the <code><a href="dom.html#document">Document</a></code> object. If the user
   <a href="#refused-to-allow-the-document-to-be-unloaded">refused to allow the document to be unloaded</a>, then
   abort these steps.</p></li>

   <li><p><a href="#abort-a-document" title="abort a document">Abort</a> the
   <a href="#active-document">active document</a> of the <a href="#browsing-context">browsing
   context</a>.</p></li>

   <li>

    <p>If the new resource is to be handled by displaying some sort of
    inline content, e.g. an error message because the specified scheme
    is not one of the supported protocols, or an inline prompt to
    allow the user to select <a href="#dom-navigator-registerprotocolhandler" title="dom-navigator-registerProtocolHandler">a registered
    handler</a> for the given scheme, then <a href="#read-ua-inline" title="navigate-ua-inline">display the inline content</a> and
    abort these steps.</p>

    <p class="note">In the case of a registered handler being used,
    the algorithm will be reinvoked with a new URL to handle the
    request.</p>

   </li>

   <li>

    <p>If the resource has already been obtained (e.g. because it is
    being used to populate an <code><a href="the-object-element.html#the-object-element">object</a></code> element's new
    <a href="#child-browsing-context">child browsing context</a>), then skip this step.</p>

    <p>Otherwise:</p>

    <p>If the new resource is to be fetched using HTTP GET <a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">or equivalent</a>, and
    there are <a href="#relevant-application-cache" title="relevant application cache">relevant
    application caches</a> that are identified by a URL with the
    <a href="#same-origin">same origin</a> as the URL in question, and that have
    this URL as one of their entries, excluding entries marked as
    <a href="#concept-appcache-foreign" title="concept-appcache-foreign">foreign</a>, and whose
    <a href="#concept-appcache-mode" title="concept-appcache-mode">mode</a> is <a href="#concept-appcache-mode-fast" title="concept-appcache-mode-fast">fast</a>, and the user agent
    is not in a mode where it will avoid using <a href="#application-cache" title="application cache">application caches</a> then get the
    resource from the <a href="#concept-appcache-selection" title="concept-appcache-selection">most
    appropriate application cache</a> of those that match.</p>

    <p class="example">For example, imagine an HTML page with an
    associated application cache displaying an image and a form, where
    the image is also used by several other application caches. If the
    user right-clicks on the image and chooses "View Image", then the
    user agent could decide to show the image from any of those
    caches, but it is likely that the most useful cache for the user
    would be the one that was used for the aforementioned HTML
    page. On the other hand, if the user submits the form, and the
    form does a POST submission, then the user agent will not use an
    application cache at all; the submission will be made to the
    network.</p>

    <p>Otherwise, <a href="urls.html#fetch">fetch</a><!--FETCH--> the new resource,
    with the <i>manual redirect flag</i> set.</p>

    <p>If the resource is being fetched using a method other than one
    <a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">equivalent to</a>
    HTTP's GET<!-- or HEAD (but that can't happen) -->, or, if the
    <a href="#navigate" title="navigate">navigation algorithm</a> was invoked as
    a result of the <a href="#concept-form-submit" title="concept-form-submit">form submission
    algorithm</a>, then the <a href="urls.html#fetch" title="fetch">fetching
    algorithm</a> must be invoked from the <a href="#origin-0">origin</a> of
    the <a href="#active-document">active document</a> of the <a href="#source-browsing-context">source browsing
    context</a>, if any.</p> <!-- potentially http-origin privacy
    sensitive -->

    <p>If the <a href="#browsing-context">browsing context</a> being navigated is a
    <a href="#child-browsing-context">child browsing context</a> for an <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> or
    <code><a href="the-object-element.html#the-object-element">object</a></code> element, then the <a href="urls.html#fetch" title="fetch">fetching
    algorithm</a> must be invoked from the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> or
    <code><a href="the-object-element.html#the-object-element">object</a></code> element's <a href="#browsing-context-scope-origin">browsing context scope
    origin</a>, if it has one.</p> <!-- potentially http-origin
    privacy sensitive -->

    <p>The <a href="urls.html#fetch">fetch</a> algorithm must <a href="#delay-the-load-event">delay the load
    event</a> of the <a href="#browsing-context">browsing context</a>.</p> <!-- this
    is what makes <iframe> elements delay the load event of their
    parent browsing context when their child browsing context is in
    between this step and the step that starts the parser. -->

   </li>

   <li>

    <!-- ******************** ASYNC BOUNDARY ******************** -->

    <p>At this point, unless this step has already been reached once
    before in the execution of this instance of the algorithm, the
    user agents must return to whatever algorithm invoked the
    navigation steps and must continue these steps asynchronously.</p>

   </li>

   <li>

    <p>If fetching the resource results in a redirect, and either the
    <a href="urls.html#url">URL</a> of the target of the redirect has the <a href="#same-origin">same
    origin</a> as the original resource, or the resource is being
    obtained using the POST method or a safe method (in HTTP terms),
    return to <a href="#navigate-fragid-step">the step labeled
    "fragment identifiers"</a> with the new resource, except that if
    the <a href="urls.html#url">URL</a> of the target of the redirect does not have a
    fragment identifier and the <a href="urls.html#url">URL</a> of the resource that
    led to the redirect does, then the fragment identifier of the
    resource that led to the redirect must be propagated to the
    <a href="urls.html#url">URL</a> of the target of the redirect.</p>

    <p class="example">So for instance, if the original URL was "<code title="">http://example.com/#!sample</code>" and "<code title="">http://example.com/</code>" is found to redirect to
    "<code title="">https://example.com/</code>", the URL of the new
    resource will be "<code title="">https://example.com/#!sample</code>".</p>

    <p>Otherwise, if fetching the resource results in a redirect but
    the <a href="urls.html#url">URL</a> of the target of the redirect does not have
    the <a href="#same-origin">same origin</a> as the original resource and the
    resource is being obtained using a method that is neither the POST
    method nor a safe method (in HTTP terms), then abort these
    steps. The user agent may indicate to the user that the navigation
    has been aborted for security reasons.</p>

   </li>

   <li><p>Wait for one or more bytes to be available or for the user
   agent to establish that the resource in question is empty. During
   this time, the user agent may allow the user to cancel this
   navigation attempt or start other navigation attempts.</p></li>

   <li>

    <p>If the resource was not fetched from an <a href="#application-cache">application
    cache</a>, and was to be fetched using HTTP GET <a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">or equivalent</a>, and its
    URL <a href="#concept-appcache-matches-fallback" title="concept-appcache-matches-fallback">matches the
    fallback namespace</a> of one or more <a href="#relevant-application-cache" title="relevant
    application cache">relevant application caches</a>, and the
    <a href="#concept-appcache-selection" title="concept-appcache-selection">most appropriate
    application cache</a> of those that match does not have an
    entry in its <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online
    whitelist</a> that has the <a href="#same-origin">same origin</a> as the
    resource's URL and that is a <a href="infrastructure.html#prefix-match">prefix match</a> for the
    resource's URL, and the user didn't cancel the navigation attempt
    during the previous step, and the navigation attempt failed (e.g.
    the server returned a 4xx or 5xx status code <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or equivalent</a>, or
    there was a DNS error), then:</p> <!-- note that a redirect can
    never reach this point as it is handled earlier, meaning that a
    captive portal captures URLs in fallback namespaces and you can't
    ever get to the fallback file of a resource if you have a captive
    portal -->

    <p>Let <var title="">candidate</var> be the <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback resource</a>
    specified for the <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespace</a> in
    question. If multiple application caches match, the user agent
    must use the fallback of the <a href="#concept-appcache-selection" title="concept-appcache-selection">most appropriate application
    cache</a> of those that match.</p>

    <p>If <var title="">candidate</var> is not marked as <a href="#concept-appcache-foreign" title="concept-appcache-foreign">foreign</a>, then the user
    agent must discard the failed load and instead continue along
    these steps using <var title="">candidate</var> as the
    resource. <a href="dom.html#the-document's-address">The document's address</a>, if appropriate,
    will still be the originally requested URL, not the fallback URL,
    but the user agent may indicate to the user that the original page
    load failed, that the page used was a fallback resource, and what
    the URL of the fallback resource actually is.</p>

   </li>

<!--FORK--><!--APPCACHE-PREFER-ONLINE-->

   <li>

    <p><i>Resource handling</i>: If the resource's out-of-band
    metadata (e.g. HTTP headers), not counting any <a href="urls.html#content-type" title="Content-Type">type information</a> (such as the
    Content-Type HTTP header), requires some sort of processing that
    will not affect the browsing context, then perform that processing
    and abort these steps.</p>

    <div class="note">
     <p>Such processing might be triggered by, amongst other things, the
     following:</p>
     <ul class="brief"><li>HTTP status codes (e.g. 204 No Content or 205 Reset Content)</li>
      <li>Network errors (e.g. the network interface being unavailable)</li>
      <li>Cryptographic protocol failures (e.g. an incorrect TLS certificate)</li>
      <!-- Other schemes are handled earlier -->
      <!-- Content-Disposition is handled below -->
      <!-- Content-Type is handled in subsequent steps -->
      <!-- ...and I can't think of any others. -->
     </ul></div>

<!--DOWNLOAD-->

    <!-- theoretically, HTTP 205 processing would occur here,
    resetting all forms with no other effect. However, it seems nobody
    actually wants to use this ability, so requiring it here seems
    like unnecessary work. -->

    <p>HTTP 401 responses that do not include a challenge recognized
    by the user agent must be processed as if they had no challenge,
    e.g. rendering the entity body as if the response had been 200
    OK.</p>

    <p>User agents may show the entity body of an HTTP 401 response
    even when the response does include a recognized challenge, with the
    option to login being included in a non-modal fashion, to enable
    the information provided by the server to be used by the user
    before authenticating. Similarly, user agents should allow the
    user to authenticate (in a non-modal fashion) against
    authentication challenges included in other responses such as HTTP
    200 OK responses, effectively allowing resources to present HTTP
    login forms without requiring their use.</p>

   </li>

   <li><p>Let <var title="">type</var> be <a href="urls.html#content-type-sniffing-0" title="Content-Type
   sniffing">the sniffed type of the resource</a>.</p></li>

   <li><p>If the user agent has been configured to process resources
   of the given <var title="">type</var> using some mechanism other
   than rendering the content in a <a href="#browsing-context">browsing context</a>, then
   skip this step. Otherwise, if the <var title="">type</var> is one
   of the following types, jump to the appropriate entry in the
   following list, and process the resource as described there:</p>

    <dl class="switch"><!-- an <span>HTML MIME type</span> --><dt>"<code><a href="#text/html">text/html</a></code>"</dt>
     <dd>Follow the steps given in the <a href="#read-html" title="navigate-html">HTML document</a> section, and abort
     these steps.</dd>

     <!-- an <span>XML MIME type</span> -->
     <dt>"<code>application/xml</code>"</dt>
     <dt>"<code>text/xml</code>"</dt>
     <dt>"<code>image/svg+xml</code>"</dt>
     <dt>"<code><a href="#application/xhtml+xml">application/xhtml+xml</a></code>"</dt>
     <dt>Any other type ending in "<code title="">+xml</code>" that is not an <a href="#explicitly-supported-xml-type">explicitly supported XML type</a></dt> <!-- no need to say that the _subtype_ ends in "+xml" so long as the "sniffed type" algorithm continues to drop parameters -->
     <dd>Follow the steps given in the <a href="#read-xml" title="navigate-xml">XML
     document</a> section. If that section determines that the
     content is <em>not</em> to be displayed as a generic XML
     document, then proceed to the next step in this overall set of
     steps. Otherwise, abort these steps.</dd>

     <dt>"<code>text/plain</code>"</dt>
     <dd>Follow the steps given in the <a href="#read-text" title="navigate-text">plain text file</a> section, and abort
     these steps.</dd>

     <dt>"<code><a href="#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code>"</dt>
     <dd>Follow the steps given in the <a href="#read-multipart-x-mixed-replace" title="navigate-multipart-x-mixed-replace">multipart/x-mixed-replace</a>
     section, and abort these steps.</dd>

     <dt>A supported image, video, or audio type</dt>
     <dd>Follow the steps given in the <a href="#read-media" title="navigate-media">media</a> section, and abort these
     steps.</dd>

     <dt>A type that will use an external application to render the
     content in the <a href="#browsing-context">browsing context</a></dt>
     <dd>Follow the steps given in the <a href="#read-plugin" title="navigate-plugin">plugin</a> section, and abort these
     steps.</dd>

    </dl><p>An <dfn id="explicitly-supported-xml-type">explicitly supported XML type</dfn> is one for which
    the user agent is configured to use an external application to
    render the content (either a <a href="infrastructure.html#plugin">plugin</a> rendering
    directly in the <a href="#browsing-context">browsing context</a>, or a separate
    application), or one for which the user agent has dedicated
    processing rules (e.g. a Web browser with a built-in Atom feed
    viewer would be said to explicitly support the
    <code>application/atom+xml</code> MIME type), or one for which the
    user agent has a dedicated handler (e.g. one registered using
    <code title="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code>).</p>

    <p><dfn id="set-the-document's-address" title="set the document's address">Setting the document's
    address</dfn>: If there is no <dfn id="override-url">override URL</dfn>, then any
    <code><a href="dom.html#document">Document</a></code> created by these steps must have its <a href="dom.html#the-document's-address" title="the document's address">address</a> set to the
    <a href="urls.html#url">URL</a> that was originally to be <a href="urls.html#fetch" title="fetch">fetched</a>, ignoring any other data that was
    used to obtain the resource (e.g. the entity body in the case of a
    POST submission is not part of <a href="dom.html#the-document's-address">the document's
    address</a>, nor is the URL of the fallback resource in the
    case of the original load having failed and that URL having been
    found to match a <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback
    namespace</a>). However, if there <em>is</em> an <a href="#override-url">override
    URL</a>, then any <code><a href="dom.html#document">Document</a></code> created by these steps
    must have its <a href="dom.html#the-document's-address" title="the document's address">address</a>
    set to that <a href="urls.html#url">URL</a> instead.</p>

    <p class="note">An <a href="#override-url" title="override URL">override URL</a>
    is set when <a href="#concept-js-deref" title="concept-js-deref">dereferencing a
    <code>javascript:</code> URL</a>.</p>

    <p><dfn id="create-a-document-object" title="create a Document object">Creating a new
    <code>Document</code> object</dfn>: when a <code><a href="dom.html#document">Document</a></code>
    is created as part of the above steps, the user agent must
    additionally run the following algorithm as part of creating the
    new object:</p>

    <ol><li><p>Create a new <code><a href="#window">Window</a></code> object, and associate it
     with the <code><a href="dom.html#document">Document</a></code>, with one exception: if the
     <a href="#browsing-context">browsing context</a>'s only entry in its <a href="#session-history">session
     history</a> is the <code><a href="urls.html#about:blank">about:blank</a></code>
     <code><a href="dom.html#document">Document</a></code> that was added when the <a href="#browsing-context">browsing
     context</a> was created, and navigation is occurring with
     <a href="#replacement-enabled">replacement enabled</a>, and that <code><a href="dom.html#document">Document</a></code>
     has the <a href="#same-origin">same origin</a> as the new
     <code><a href="dom.html#document">Document</a></code>, then use the <code><a href="#window">Window</a></code> object of
     that <code><a href="dom.html#document">Document</a></code> instead, and change the <code title="dom-document"><a href="#dom-document-0">document</a></code> attribute of the
     <code><a href="#window">Window</a></code> object to point to the new
     <code><a href="dom.html#document">Document</a></code>.</p>

     </li><li>

      <p>Populate <code><a href="dom.html#document">Document</a></code>'s <a href="#active-sandboxing-flag-set">active sandboxing flag
      set</a> with the union of the flags that are present in the
      following <a href="#sandboxing-flag-set" title="sandboxing flag set">sandboxing flag
      sets</a> at the time the <code><a href="dom.html#document">Document</a></code> object is
      created:</p>

      <ul><li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing
       context</a> is a <a href="#top-level-browsing-context">top-level browsing context</a>,
       then: the flags set on the <a href="#browsing-context">browsing context</a>'s
       <a href="#popup-sandboxing-flag-set">popup sandboxing flag set</a>.</p></li>

       <li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing
       context</a> is a <a href="#nested-browsing-context">nested browsing context</a>, then:
       the flags set on the <a href="#browsing-context">browsing context</a>'s
       <a href="#iframe-sandboxing-flag-set"><code>iframe</code> sandboxing flag set</a>.</p></li>

       <li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing
       context</a> is a <a href="#nested-browsing-context">nested browsing context</a>, then:
       the flags set on the <a href="#browsing-context">browsing context</a>'s <a href="#parent-browsing-context">parent
       browsing context</a>'s <a href="#active-document">active document</a>'s
       <a href="#active-sandboxing-flag-set">active sandboxing flag set</a>.</p></li>

       <li><p>The flags set on the resource's <a href="#forced-sandboxing-flag-set">forced sandboxing
       flag set</a>.</p></li>

      </ul><p>Each resource obtained by this <a href="#navigate" title="navigate">navigation algorithm</a> has a <dfn id="forced-sandboxing-flag-set">forced
      sandboxing flag set</dfn>, which is a <a href="#sandboxing-flag-set">sandboxing flag
      set</a>. A resource by default has no flags set in its
      <a href="#forced-sandboxing-flag-set">forced sandboxing flag set</a>, but other
      specifications can define that certain flags are set.</p>

      <p class="note">In particular, the <a href="#forced-sandboxing-flag-set">forced sandboxing flag
      set</a> is used by the Content Security Policy specification.
      <a href="#refsCSP">[CSP]</a></p>

     </li>

    </ol></li>

   <li id="navigate-non-Document">

    <p><i>Non-document content</i>: If, given <var title="">type</var>, the new resource is to be handled by
    displaying some sort of inline content, e.g. a native rendering of
    the content, an error message because the specified type is not
    supported, or an inline prompt to allow the user to select <a href="#dom-navigator-registercontenthandler" title="dom-navigator-registerContentHandler">a registered
    handler</a> for the given type, then <a href="#read-ua-inline" title="navigate-ua-inline">display the inline content</a> and
    abort these steps.</p>

    <p class="note">In the case of a registered handler being used,
    the algorithm will be reinvoked with a new URL to handle the
    request.</p>

   </li>

   <li><p>Otherwise, the document's <var title="">type</var> is such
   that the resource will not affect the browsing context, e.g.
   because the resource is to be handed to an external application or
   because it is an unknown type that will be processed <a href="#as-a-download">as a
   download</a>. Process the resource appropriately.</p>

  </li></ol><hr><p>Some of the sections below, to which the above algorithm defers
  in certain cases, require the user agent to <dfn id="update-the-session-history-with-the-new-page">update the session
  history with the new page</dfn>. When a user agent is required to do
  this, it must <a href="#queue-a-task">queue a task</a> (associated with the
  <code><a href="dom.html#document">Document</a></code> object of the <a href="#current-entry">current entry</a>, not
  the new one) to run the following steps:</p>

  <ol><li>

    <p><a href="#unload-a-document" title="unload a document">Unload</a> the
    <code><a href="dom.html#document">Document</a></code> object of the <a href="#current-entry">current entry</a>,
    with the <var title="">recycle</var> parameter set to false.</p>

    <p>If this instance of the <a href="#navigate" title="navigate">navigation</a> algorithm is canceled while
    this step is running the <a href="#unload-a-document">unload a document</a> algorithm,
    then the <a href="#unload-a-document">unload a document</a> algorithm must be allowed
    to run to completion, but this instance of the <a href="#navigate" title="navigate">navigation</a> algorithm must not run beyond
    this step. (In particular, for instance, the cancelation of this
    algorithm does not abort any event dispatch or script execution
    occurring as part of unloading the document or its
    descendants.)</p>

   </li>

   <li>

    <dl><dt>If the navigation was initiated for <dfn id="entry-update">entry update</dfn> of
     an entry</dt>

     <dd>

      <ol><li><p>Replace the <code><a href="dom.html#document">Document</a></code> of the entry being
       updated, and any other entries that referenced the same
       document as that entry, with the new
       <code><a href="dom.html#document">Document</a></code>.</p></li>

       <li><p><a href="#traverse-the-history">Traverse the history</a> to the new
       entry.</p></li>

      </ol><p class="note">This can only happen if the entry being updated
      is no the <a href="#current-entry">current entry</a>, and can never happen with
      <a href="#replacement-enabled">replacement enabled</a>. (It happens when the user
      tried to traverse to a session history entry that no longer had
      a <code><a href="dom.html#document">Document</a></code> object.)</p>

     </dd>


     <dt>Otherwise</dt>

     <dd>

      <ol><li>

        <p>Remove all the entries in the <a href="#browsing-context">browsing
        context</a>'s <a href="#session-history">session history</a> after the
        <a href="#current-entry">current entry</a>. If the <a href="#current-entry">current entry</a>
        is the last entry in the session history, then no entries are
        removed.</p>

        <p class="note">This <a href="#history-notes">doesn't
        necessarily have to affect</a> the user agent's user
        interface.</p>

       </li>

       <li><p>Remove any <a href="#concept-task" title="concept-task">tasks</a>
       queued by the <a href="#history-traversal-task-source">history traversal task source</a> that
       are associated with any <code><a href="dom.html#document">Document</a></code> objects in the
       <a href="#top-level-browsing-context">top-level browsing context</a>'s <a href="#document-family">document
       family</a>.</p></li> <!-- so the network is racing
       history.back(), in the case of setting location.href="" and
       then calling history.back() -->

       <li><p>Append a new entry at the end of the <code><a href="#history-1">History</a></code>
       object representing the new resource and its
       <code><a href="dom.html#document">Document</a></code> object and related state.</p></li>

       <li><p><a href="#traverse-the-history">Traverse the history</a> to the new entry. If
       the navigation was initiated with <a href="#replacement-enabled">replacement
       enabled</a>, then the traversal must itself be initiated
       with <a href="#replacement-enabled">replacement enabled</a>.</p>

       </li>

      </ol></dd>

    </dl></li>

   <li><p>The <a href="#navigate" title="navigate">navigation algorithm</a> has
   now <dfn id="concept-navigate-mature" title="concept-navigate-mature">matured</dfn>.</p></li>

   <li><p><i>Fragment identifier loop</i>: <a href="#spin-the-event-loop">Spin the event
   loop</a> for a user-agent-defined amount of time, as desired by
   the user agent implementor. (This is intended to allow the user
   agent to optimize the user experience in the face of performance
   concerns.)</p></li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code> object has no parser, or its
   parser has <a href="#stop-parsing" title="stop parsing">stopped parsing</a>, or
   the user agent has reason to believe the user is no longer
   interested in scrolling to the fragment identifier, then abort
   these steps.</p></li>

   <li><p><a href="#scroll-to-the-fragment-identifier">Scroll to the fragment identifier</a> given in
   <a href="dom.html#the-document's-address">the document's address</a>. If this fails to find <a href="#the-indicated-part-of-the-document" title="the indicated part of the document">an indicated part of the
   document</a>, then return to the <i>fragment identifier loop</i>
   step.</p></li>

  </ol><p>The <a href="#task-source">task source</a> for this <a href="#concept-task" title="concept-task">task</a> is the <a href="#networking-task-source">networking task
  source</a>.</p>


  <h4 id="read-html"><span class="secno">5.6.2 </span><dfn title="navigate-html">Page load processing model for HTML files</dfn></h4>

  <p>When an HTML document is to be loaded in a <a href="#browsing-context">browsing
  context</a>, the user agent must <a href="#queue-a-task">queue a task</a> to
  <a href="#create-a-document-object">create a <code>Document</code> object</a>, mark it as being
  an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>, set its <a href="infrastructure.html#concept-document-content-type" title="concept-document-content-type">content type</a> to "<code title="">text/html</code>", create an <a href="#html-parser">HTML parser</a>, and
  associate it with the document. Each <a href="#concept-task" title="concept-task">task</a> that the <a href="#networking-task-source">networking task
  source</a> places on the <a href="#task-queue">task queue</a> while the <a href="urls.html#fetch" title="fetch">fetching algorithm</a> runs must then fill the
  parser's <a href="#the-input-byte-stream">input byte stream</a> with the fetched bytes and
  cause the <a href="#html-parser">HTML parser</a> to perform the appropriate
  processing of the input stream.</p>

  <p class="note">The <a href="#the-input-byte-stream">input byte stream</a> converts bytes
  into characters for use in the <a href="#tokenization" title="tokenization">tokenizer</a>. This process relies, in part,
  on character encoding information found in the real <a href="urls.html#content-type" title="Content-Type">Content-Type metadata</a> of the resource;
  the "sniffed type" is not used for this purpose.</p>

  <!-- next two paragraphs are nearly identical to the navigate-text
  section, keep them in sync -->

  <p>When no more bytes are available, the user agent must <a href="#queue-a-task">queue
  a task</a> for the parser to process the implied EOF character,
  which eventually causes a <code title="event-load">load</code> event
  to be fired.</p>

  <p>After creating the <code><a href="dom.html#document">Document</a></code> object, but before any
  script execution, certainly before the parser <a href="#stop-parsing" title="stop
  parsing">stops</a>, the user agent must <a href="#update-the-session-history-with-the-new-page">update the session
  history with the new page</a>.</p>

  <p class="note"><a href="#concept-appcache-init" title="concept-appcache-init">Application
  cache selection</a> happens <a href="#parser-appcache">in the
  HTML parser</a>.</p>

  <p>The <a href="#task-source">task source</a> for the two tasks mentioned in this
  section must be the <a href="#networking-task-source">networking task source</a>.</p>



  <h4 id="read-xml"><span class="secno">5.6.3 </span><dfn title="navigate-xml">Page load processing model for XML files</dfn></h4>

  <p>When faced with displaying an XML file inline, user agents must
  first <a href="#create-a-document-object">create a <code>Document</code> object</a>, following
  the requirements of the XML and Namespaces in XML recommendations,
  RFC 3023, DOM Core, and other relevant specifications. <a href="#refsXML">[XML]</a> <a href="#refsXMLNS">[XMLNS]</a> <a href="#refsRFC3023">[RFC3023]</a> <a href="#refsDOMCORE">[DOMCORE]</a></p>

  <p>The actual HTTP headers and other metadata, not the headers as
  mutated or implied by the algorithms given in this specification,
  are the ones that must be used when determining the character
  encoding according to the rules given in the above
  specifications. Once the character encoding is established, the
  <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> must be set to that
  character encoding.</p>

  <p>If the root element, as parsed according to the XML
  specifications cited above, is found to be an <code><a href="the-html-element.html#the-html-element">html</a></code>
  element with an attribute <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code> whose value is not the
  empty string, then, as soon as the element is <a href="infrastructure.html#insert-an-element-into-a-document" title="insert an
  element into a document">inserted into the document</a>, the user
  agent must <a href="urls.html#resolve-a-url" title="resolve a url">resolve</a> the value of
  that attribute relative to that element, and if that is successful,
  must run the <a href="#concept-appcache-init" title="concept-appcache-init">application cache
  selection algorithm</a> with the resulting <a href="urls.html#absolute-url">absolute
  URL</a> with any <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a> component removed as
  the manifest URL, and passing in the newly-created
  <code><a href="dom.html#document">Document</a></code>. Otherwise, if the attribute is absent, its
  value is the empty string, or resolving its value fails, then as
  soon as the root element is <a href="infrastructure.html#insert-an-element-into-a-document" title="insert an element into a
  document">inserted into the document</a>, the user agent must run
  the <a href="#concept-appcache-init" title="concept-appcache-init">application cache selection
  algorithm</a> with no manifest, and passing in the
  <code><a href="dom.html#document">Document</a></code>.</p>

  <p class="note">Because the processing of the <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code> attribute happens
  only once the root element is parsed, any URLs referenced by
  processing instructions before the root element (such as <code title="">&lt;?xml-stylesheet?&gt;</code> and <code title="">&lt;?xbl?&gt;</code> PIs) will be fetched from the network and
  cannot be cached.</p><!-- v2: fix this somehow -->

  <p>User agents may examine the namespace of the root
  <code><a href="infrastructure.html#element">Element</a></code> node of this <code><a href="dom.html#document">Document</a></code> object to
  perform namespace-based dispatch to alternative processing tools,
  e.g. determining that the content is actually a syndication feed and
  passing it to a feed handler. If such processing is to take place,
  abort the steps in this section, and jump to <a href="#navigate-non-Document">the next step</a> (labeled
  "non-document content") in the <a href="#navigate">navigate</a> steps
  above.</p>

  <p>Otherwise, then, with the newly created <code><a href="dom.html#document">Document</a></code>,
  the user agents must <a href="#update-the-session-history-with-the-new-page">update the session history with the new
  page</a>. User agents may do this before the complete document
  has been parsed (thus achieving <i>incremental rendering</i>), and
  must do this before any scripts are to be executed. If the <code><a href="dom.html#document">Document</a></code>
  contains any element in the <a href="namespaces.html#html-namespace-0">HTML namespace</a>, the <a href="namespaces.html#svg-namespace">SVG namespace</a>,
  or in the <a href="namespaces.html#mathml-namespace">MathML namespace</a> then the user agent must render the
  <code><a href="dom.html#document">Document</a></code> according to <a href="#rendering">the rendering section</a>.
  If not, then a native representation of the Document, e.g. a tree view of the corresponding
  source, may be produced. In that case, abort the steps in this section, and jump to <a href="#navigate-non-Document">the next step</a> in the <a href="#navigate">navigate</a> steps
  above.</p>

  <p>Error messages from the parse process (e.g. XML namespace
  well-formedness errors) may be reported inline by mutating the
  <code><a href="dom.html#document">Document</a></code>.</p>


  <h4 id="read-text"><span class="secno">5.6.4 </span><dfn title="navigate-text">Page load processing model for text files</dfn></h4>

  <p>When a plain text document is to be loaded in a <a href="#browsing-context">browsing
  context</a>, the user agent must <a href="#queue-a-task">queue a task</a> to
  <a href="#create-a-document-object">create a <code>Document</code> object</a>, mark it as being
  an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>, set its <a href="infrastructure.html#concept-document-content-type" title="concept-document-content-type">content type</a> to "<code title="">text/plain</code>", create an <a href="#html-parser">HTML parser</a>,
  associate it with the document, act as if the tokenizer had emitted
  a start tag token with the tag name "pre" followed by a single
  "LF" (U+000A) character<!-- to get eaten, so that a leading
  LF in the text/plain stream doesn't get eaten itself-->, and switch
  the <a href="#html-parser">HTML parser</a>'s tokenizer to the <a href="#plaintext-state">PLAINTEXT
  state</a>. Each <a href="#concept-task" title="concept-task">task</a> that the
  <a href="#networking-task-source">networking task source</a> places on the <a href="#task-queue">task
  queue</a> while the <a href="urls.html#fetch" title="fetch">fetching algorithm</a>
  runs must then fill the parser's <a href="#the-input-byte-stream">input byte stream</a> with
  the fetched bytes and cause the <a href="#html-parser">HTML parser</a> to perform
  the appropriate processing of the input stream.</p>

  <p>The rules for how to convert the bytes of the plain text document
  into actual characters, and the rules for actually rendering the
  text to the user, are defined in RFC 2046, RFC 3676, and subsequent
  versions thereof. <a href="#refsRFC2046">[RFC2046]</a> <a href="#refsRFC3676">[RFC3676]</a></p>

  <p>The <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> must be set to the
  character encoding used to decode the document.</p>

  <p>Upon creation of the <code><a href="dom.html#document">Document</a></code> object, the user agent
  must run the <a href="#concept-appcache-init" title="concept-appcache-init">application cache
  selection algorithm</a> with no manifest, and passing in the
  newly-created <code><a href="dom.html#document">Document</a></code>.</p>

  <!-- next two paragraphs are nearly identical to the navigate-html
  section and similar to the "navigate-ua-inline" section, and the
  next three are similar to the navigate-media and navigate-plugin
  sections; keep them all in sync -->

  <p>When no more bytes are available, the user agent must <a href="#queue-a-task">queue
  a task</a> for the parser to process the implied EOF character,
  which eventually causes a <code title="event-load">load</code> event
  to be fired.</p>

  <p>After creating the <code><a href="dom.html#document">Document</a></code> object, but potentially
  before the page has finished parsing, the user agent must
  <a href="#update-the-session-history-with-the-new-page">update the session history with the new page</a>.</p>

  <p>User agents may add content to the <code><a href="the-head-element.html#the-head-element">head</a></code> element of
  the <code><a href="dom.html#document">Document</a></code>, e.g. linking to a style sheet or an XBL
  binding, providing script, giving the document a <code><a href="the-title-element.html#the-title-element">title</a></code>,
  etc.</p>

  <p class="note">In particular, if the user agent supports the <code title="">Format=Flowed</code> feature of RFC 3676 then the user
  agent would need to apply extra styling to cause the text to wrap
  correctly and to handle the quoting feature. This could be performed
  using, e.g., an XBL binding or a CSS extension.</p>

  <p>The <a href="#task-source">task source</a> for the two tasks mentioned in this
  section must be the <a href="#networking-task-source">networking task source</a>.</p>


  <h4 id="read-multipart-x-mixed-replace"><span class="secno">5.6.5 </span><dfn title="navigate-multipart-x-mixed-replace">Page load processing model for <code>multipart/x-mixed-replace</code> resources</dfn></h4>

  <p>When a resource with the type
  <code><a href="#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code> is to be loaded in a
  <a href="#browsing-context">browsing context</a>, the user agent must parse the
  resource using the rules for multipart types. <a href="#refsRFC2046">[RFC2046]</a></p>

  <p>For each body part obtained from the resource, the user agent
  must run a new instance of the <a href="#navigate">navigate</a> algorithm,
  starting from the <i>resource handling</i> step, using the new body
  part as the resource being navigated, with <a href="#replacement-enabled">replacement
  enabled</a> if a previous body part from the same resource
  resulted in a <code><a href="dom.html#document">Document</a></code> object being <a href="#create-a-document-object" title="create
  a document object">created</a>, and otherwise using the same
  setup as the <a href="#navigate">navigate</a> attempt that caused this section
  to be invoked in the first place.</p>

  <p>For the purposes of algorithms processing these body parts as if
  they were complete stand-alone resources, the user agent must act as
  if there were no more bytes for those resources whenever the
  boundary following the body part is reached.</p>

  <p class="note">Thus, <code title="event-load">load</code> events
  (and for that matter <code title="event-unload">unload</code>
  events) do fire for each body part loaded.</p>


  <h4 id="read-media"><span class="secno">5.6.6 </span><dfn title="navigate-media">Page load processing model for media</dfn></h4>

  <p>When an image, video, or audio resource is to be loaded in a
  <a href="#browsing-context">browsing context</a>, the user agent should <a href="#create-a-document-object">create a
  <code>Document</code> object</a>, mark it as being an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>, set its <a href="infrastructure.html#concept-document-content-type" title="concept-document-content-type">content type</a> to the sniffed
  MIME type of the resource (<var title="">type</var> in the
  <a href="#navigate">navigate</a> algorithm), append an <code><a href="the-html-element.html#the-html-element">html</a></code>
  element to the <code><a href="dom.html#document">Document</a></code>, append a <code><a href="the-head-element.html#the-head-element">head</a></code>
  element and a <code><a href="the-body-element.html#the-body-element">body</a></code> element to the <code><a href="the-html-element.html#the-html-element">html</a></code>
  element, append an element <var title="">host element</var> for the
  media, as described below, to the <code><a href="the-body-element.html#the-body-element">body</a></code> element, and set
  the appropriate attribute of the element <var title="">host
  element</var>, as described below, to the address of the image,
  video, or audio resource.</p>

  <p>The element <var title="">host element</var> to create for the
  media is the element given in the table below in the second cell of
  the row whose first cell describes the media. The appropriate
  attribute to set is the one given by the third cell in that same
  row.</p>

  <table><thead><tr><th> Type of media
         </th><th> Element for the media
         </th><th> Appropriate attribute
    </th></tr><tr><td> Image
         </td><td> <code><a href="the-img-element.html#the-img-element">img</a></code>
         </td><td> <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code>
    </td></tr><tr><td> Video
         </td><td> <code><a href="the-video-element.html#the-video-element">video</a></code>
         </td><td> <code title="attr-media-src"><a href="media-elements.html#attr-media-src">src</a></code>
    </td></tr><tr><td> Audio
         </td><td> <code><a href="the-audio-element.html#the-audio-element">audio</a></code>
         </td><td> <code title="attr-media-src"><a href="media-elements.html#attr-media-src">src</a></code>
  </td></tr></thead></table><!-- next three paragraphs are similar to the navigate-text section,
  keep them in sync --><p>Then, the user agent must act as if it had <a href="#stop-parsing" title="stop
  parsing">stopped parsing</a>.</p>

  <p>Upon creation of the <code><a href="dom.html#document">Document</a></code> object, the user agent
  must run the <a href="#concept-appcache-init" title="concept-appcache-init">application cache
  selection algorithm</a> with no manifest, and passing in the
  newly-created <code><a href="dom.html#document">Document</a></code>.</p>

  <p>After creating the <code><a href="dom.html#document">Document</a></code> object, but potentially
  before the page has finished fully loading, the user agent must
  <a href="#update-the-session-history-with-the-new-page">update the session history with the new page</a>.</p>

  <p>User agents may add content to the <code><a href="the-head-element.html#the-head-element">head</a></code> element of
  the <code><a href="dom.html#document">Document</a></code>, or attributes to the element <var title="">host element</var>, e.g. to link to a style sheet or an XBL
  binding, to provide a script, to give the document a
  <code><a href="the-title-element.html#the-title-element">title</a></code>, to make the media <a href="media-elements.html#attr-media-autoplay" title="attr-media-autoplay">autoplay</a>, etc.</p>


  <h4 id="read-plugin"><span class="secno">5.6.7 </span><dfn title="navigate-plugin">Page load processing model for content that uses plugins</dfn></h4>

  <p>When a resource that requires an external resource to be rendered
  is to be loaded in a <a href="#browsing-context">browsing context</a>, the user agent
  should <a href="#create-a-document-object">create a <code>Document</code> object</a>, mark it
  as being an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>, set
  its <a href="infrastructure.html#concept-document-content-type" title="concept-document-content-type">content type</a> to
  the sniffed MIME type of the resource (<var title="">type</var> in
  the <a href="#navigate">navigate</a> algorithm), append an <code><a href="the-html-element.html#the-html-element">html</a></code>
  element to the <code><a href="dom.html#document">Document</a></code>, append a <code><a href="the-head-element.html#the-head-element">head</a></code>
  element and a <code><a href="the-body-element.html#the-body-element">body</a></code> element to the <code><a href="the-html-element.html#the-html-element">html</a></code>
  element, append an <code><a href="the-embed-element.html#the-embed-element">embed</a></code> to the <code><a href="the-body-element.html#the-body-element">body</a></code>
  element, and set the <code title="attr-embed-src"><a href="the-embed-element.html#attr-embed-src">src</a></code>
  attribute of the <code><a href="the-embed-element.html#the-embed-element">embed</a></code> element to the address of the
  resource.</p>

  <!-- next three paragraphs are similar to the navigate-text section,
  keep them in sync -->

  <p>Then, the user agent must act as if it had <a href="#stop-parsing" title="stop
  parsing">stopped parsing</a>.</p>

  <p>Upon creation of the <code><a href="dom.html#document">Document</a></code> object, the user agent
  must run the <a href="#concept-appcache-init" title="concept-appcache-init">application cache
  selection algorithm</a> with no manifest, and passing in the
  newly-created <code><a href="dom.html#document">Document</a></code>.</p>

  <p>After creating the <code><a href="dom.html#document">Document</a></code> object, but potentially
  before the page has finished fully loading, the user agent must
  <a href="#update-the-session-history-with-the-new-page">update the session history with the new page</a>.</p>

  <p>User agents may add content to the <code><a href="the-head-element.html#the-head-element">head</a></code> element of
  the <code><a href="dom.html#document">Document</a></code>, or attributes to the <code><a href="the-embed-element.html#the-embed-element">embed</a></code>
  element, e.g. to link to a style sheet or an XBL binding, or to give
  the document a <code><a href="the-title-element.html#the-title-element">title</a></code>.</p>

  <p class="note" id="sandboxPluginNavigate">If the
  <code><a href="dom.html#document">Document</a></code>'s <a href="#active-sandboxing-flag-set">active sandboxing flag set</a> has
  its <a href="#sandboxed-plugins-browsing-context-flag">sandboxed plugins browsing context flag</a> set, the
  synthesized <code><a href="the-embed-element.html#the-embed-element">embed</a></code> element will <a href="the-embed-element.html#sandboxPluginEmbed">fail to render the content</a> if the
  relevant <a href="infrastructure.html#plugin">plugin</a> cannot be <a href="infrastructure.html#concept-plugin-secure" title="concept-plugin-secure">secured</a>.</p>


  <h4 id="read-ua-inline"><span class="secno">5.6.8 </span><dfn title="navigate-ua-inline">Page load processing model for inline content that doesn't have a DOM</dfn></h4>

  <p>When the user agent is to display a user agent page inline in a
  <a href="#browsing-context">browsing context</a>, the user agent should <a href="#create-a-document-object">create a
  <code>Document</code> object</a>, mark it as being an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>, set its <a href="infrastructure.html#concept-document-content-type" title="concept-document-content-type">content type</a> to "<code title="">text/html</code>", and then either associate that
  <code><a href="dom.html#document">Document</a></code> with a custom rendering that is not rendered
  using the normal <code><a href="dom.html#document">Document</a></code> rendering rules, or mutate
  that <code><a href="dom.html#document">Document</a></code> until it represents the content the user
  agent wants to render.</p>

  <!-- next two paragraphs are similar to the navigate-text section,
  keep them in sync -->

  <p>Once the page has been set up, the user agent must act as if it
  had <a href="#stop-parsing" title="stop parsing">stopped parsing</a>.</p>

  <p>Upon creation of the <code><a href="dom.html#document">Document</a></code> object, the user agent
  must run the <a href="#concept-appcache-init" title="concept-appcache-init">application cache
  selection algorithm</a> with no manifest, passing in the
  newly-created <code><a href="dom.html#document">Document</a></code>.</p>

  <p>After creating the <code><a href="dom.html#document">Document</a></code> object, but potentially
  before the page has been completely set up, the user agent must
  <a href="#update-the-session-history-with-the-new-page">update the session history with the new page</a>.</p>



  <h4 id="scroll-to-fragid"><span class="secno">5.6.9 </span><dfn title="navigate-fragid">Navigating to a fragment identifier</dfn></h4>

  <p>When a user agent is supposed to navigate to a fragment
  identifier, then the user agent must <a href="#queue-a-task">queue a task</a> to
  run the following steps:</p>

  <ol><li>

    <p>Remove all the entries in the <a href="#browsing-context">browsing context</a>'s
    <a href="#session-history">session history</a> after the <a href="#current-entry">current
    entry</a>. If the <a href="#current-entry">current entry</a> is the last entry
    in the session history, then no entries are removed.</p>

    <p class="note">This <a href="#history-notes">doesn't necessarily
    have to affect</a> the user agent's user interface.</p>

   </li>

   <li><p>Remove any <a href="#concept-task" title="concept-task">tasks</a> queued by
   the <a href="#history-traversal-task-source">history traversal task source</a> that are associated
   with any <code><a href="dom.html#document">Document</a></code> objects in the <a href="#top-level-browsing-context">top-level
   browsing context</a>'s <a href="#document-family">document family</a>.</p></li>

   <li><p>Append a new entry at the end of the <code><a href="#history-1">History</a></code>
   object representing the new resource and its <code><a href="dom.html#document">Document</a></code>
   object and related state. Its <a href="urls.html#url">URL</a> must be set to the
   address to which the user agent was <a href="#navigate" title="navigate">navigating</a>. The title must be left
   unset.</p></li>

   <li><p><a href="#traverse-the-history">Traverse the history</a> to the new entry. This
   will <a href="#scroll-to-the-fragment-identifier">scroll to the fragment identifier</a> given in what
   is now <a href="dom.html#the-document's-address">the document's address</a>.</p></li>

  </ol><p class="note">If the scrolling fails because the relevant <a href="infrastructure.html#concept-id" title="concept-id">ID</a> has not yet been parsed, then the
  original <a href="#navigate" title="navigate">navigation</a> algorithm will
  take care of the scrolling instead, as the last few steps of its
  <a href="#update-the-session-history-with-the-new-page">update the session history with the new page</a>
  algorithm.</p>

  <hr><p>When the user agent is required to <dfn id="scroll-to-the-fragment-identifier">scroll to the fragment
  identifier</dfn>, it must either change the scrolling position of
  the document using the <a href="infrastructure.html#scroll-an-element-into-view">scroll an element into view</a>
  algorithm defined in the CSSOM View specification, with the <var title="">align to top flag</var> set, or perform some other action,
  such that <a href="#the-indicated-part-of-the-document">the indicated part of the document</a> is brought
  to the user's attention. If there is no indicated part, or if the
  indicated part is not <a href="#being-rendered">being rendered</a>, then the user
  agent must not scroll anywhere. <a href="#refsCSSOMVIEW">[CSSOMVIEW]</a></p>

  <p><dfn id="the-indicated-part-of-the-document">The indicated part of the document</dfn> is the one that the
  fragment identifier, if any, identifies. The semantics of the
  fragment identifier in terms of mapping it to a specific DOM Node is
  defined by the specification that defines the <a href="infrastructure.html#mime-type">MIME type</a>
  used by the <code><a href="dom.html#document">Document</a></code> (for example, the processing of
  fragment identifiers for <a href="infrastructure.html#xml-mime-type" title="XML MIME type">XML MIME
  types</a> is the responsibility of RFC3023). <a href="#refsRFC3023">[RFC3023]</a></p>

  <p>For HTML documents (and <a href="infrastructure.html#html-mime-type" title="HTML MIME type">HTML MIME
  types</a>), the following processing model must be followed to
  determine what <a href="#the-indicated-part-of-the-document">the indicated part of the document</a>
  is.</p>

  <ol><li><p><a href="urls.html#parse-a-url" title="parse a url">Parse</a> the <a href="urls.html#url">URL</a>,
   and let <var title="">fragid</var> be the <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a> component of the
   URL.</p></li><!-- parsing can't fail, since we checked earlier on
   when navigating -->

   <li><p>If <var title="">fragid</var> is the empty string, then
   <a href="#the-indicated-part-of-the-document">the indicated part of the document</a> is the top of the
   document; stop the algorithm here.</p></li>

   <li><p>Let <var title="">decoded fragid</var> be the result of
   expanding any sequences of percent-encoded octets in <var title="">fragid</var> that are valid UTF-8 sequences into Unicode
   characters as defined by UTF-8. If any percent-encoded octets in
   that string are not valid UTF-8 sequences (e.g. they expand to
   surrogate code points), then skip this step and the next one.</p>

   </li><li><p>If this step was not skipped and there is an element in the
   DOM that has an <a href="infrastructure.html#concept-id" title="concept-id">ID</a> exactly equal to
   <var title="">decoded fragid</var>, then the first such element in
   tree order is <a href="#the-indicated-part-of-the-document">the indicated part of the document</a>; stop
   the algorithm here.</p></li>

   <li><p>If there is an <code><a href="the-a-element.html#the-a-element">a</a></code> element in the DOM that has a
   <code title="attr-a-name"><a href="#attr-a-name">name</a></code> attribute whose value is
   exactly equal to <var title="">fragid</var> (<em>not</em> <var title="">decoded fragid</var>), then the first such element in tree
   order is <a href="#the-indicated-part-of-the-document">the indicated part of the document</a>; stop the
   algorithm here.</p></li>

   <li><p>If <var title="">fragid</var> is an <a href="infrastructure.html#ascii-case-insensitive">ASCII
   case-insensitive</a> match for the string <code title="">top</code>, then <a href="#the-indicated-part-of-the-document">the indicated part of the
   document</a> is the top of the document; stop the algorithm
   here.</p></li>

   <li><p>Otherwise, there is no <a href="#the-indicated-part-of-the-document" title="the indicated part of
   the document">indicated part of the document</a>.</p></li>

  </ol><p>For the purposes of the interaction of HTML with Selectors' <code title="selector-target">:target</code> pseudo-class, the
  <dfn id="target-element"><i>target element</i></dfn> is <a href="#the-indicated-part-of-the-document">the indicated part of the
  document</a>, if that is an element; otherwise there is no
  <i><a href="#target-element">target element</a></i>. <a href="#refsSELECTORS">[SELECTORS]</a></p>

  <p>The <a href="#task-source">task source</a> for the task mentioned in this
  section must be the <a href="#dom-manipulation-task-source">DOM manipulation task source</a>.</p>

  </div>



  <h4 id="history-traversal"><span class="secno">5.6.10 </span>History traversal</h4> <!-- session history -->

  <div class="impl">

  <p>When a user agent is required to <dfn id="traverse-the-history">traverse the history</dfn>
  to a <var title="">specified entry</var>, optionally with
  <a href="#replacement-enabled">replacement enabled</a>, the user agent must act as
  follows.</p>

  <p class="note">This algorithm is not just invoked when <a href="#traverse-the-history-by-a-delta" title="traverse the history by a delta">explicitly going back or
  forwards in the session history</a> &#8212; it is also invoked in
  other situations, for example when <a href="#navigate" title="navigate">navigating
  a browsing context</a>, as part of <a href="#update-the-session-history-with-the-new-page" title="update the
  session history with the new page">updating the session history with
  the new page</a>.</p>

  <ol><li><p>If there is no longer a <code><a href="dom.html#document">Document</a></code> object for the
   entry in question, <a href="#navigate">navigate</a><!--DONAV history traversal
   after eviction--> the browsing context to the location for that
   entry to perform an <a href="#entry-update">entry update</a> of that entry, and
   abort these steps. The "<a href="#navigate">navigate</a>" algorithm reinvokes
   this "traverse" algorithm to complete the traversal, at which point
   there <em>is</em> a <code><a href="dom.html#document">Document</a></code> object and so this step
   gets skipped. The navigation must be done using the same
   <a href="#source-browsing-context">source browsing context</a> as was used the first time
   this entry was created. (This can never happen with
   <a href="#replacement-enabled">replacement enabled</a>.)</p></li>

   <li><p>If the <a href="#current-entry">current entry</a>'s title was not set by the
   <code title="dom-history-pushState"><a href="#dom-history-pushstate">pushState()</a></code> or <code title="dom-history-replaceState"><a href="#dom-history-replacestate">replaceState()</a></code> methods,
   then set its title to the value returned by the <code title="dom-document-title"><a href="dom.html#document.title">document.title</a></code> IDL
   attribute.</p></li>

   <li><p>If appropriate, update the <a href="#current-entry">current entry</a> in the
   <a href="#browsing-context">browsing context</a>'s <code><a href="dom.html#document">Document</a></code> object's
   <code><a href="#history-1">History</a></code> object to reflect any state that the user
   agent wishes to persist. The entry is then said to be <a href="#an-entry-with-persisted-user-state">an
   entry with persisted user state</a>.</p></li>

   <li><p>If the <var title="">specified entry</var> has a different
   <code><a href="dom.html#document">Document</a></code> object than the <a href="#current-entry">current entry</a>
   then the following substeps:</p>

    <ol><li>

      <p>If the browsing context is a <a href="#top-level-browsing-context">top-level browsing
      context</a>, but not an <a href="#auxiliary-browsing-context">auxiliary browsing
      context</a>, and the <a href="#origin-0">origin</a> of the
      <code><a href="dom.html#document">Document</a></code> of the <var title="">specified entry</var>
      is not the <a href="#same-origin" title="same origin">same</a> as the
      <a href="#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code> of the
      <a href="#current-entry">current entry</a>, then run the following
      sub-sub-steps:</p>

      <ol><li><p>The current <a href="#browsing-context-name">browsing context name</a> must be
       stored with all the entries in the history that are associated
       with <code><a href="dom.html#document">Document</a></code> objects with the <a href="#same-origin">same
       origin</a> as the <a href="#active-document">active document</a> <em>and</em>
       that are contiguous with the <a href="#current-entry">current entry</a>.</p></li>

       <li id="resetBCName"><p>The browsing context's <a href="#browsing-context-name">browsing
       context name</a> must be unset.</p></li>

      </ol></li>

     <li id="appcache-history-2"><p>Make the <var title="">specified
     entry</var>'s <code><a href="dom.html#document">Document</a></code> object the <a href="#active-document">active
     document</a> of the <a href="#browsing-context">browsing context</a>.</p></li>

     <li>

      <p>If the <var title="">specified entry</var> has a
      <a href="#browsing-context-name">browsing context name</a> stored with it, then run the
      following sub-sub-steps:</p>

      <ol><li><p>Set the browsing context's <a href="#browsing-context-name">browsing context
       name</a> to the name stored with the specified
       entry.</p></li>

       <li><p>Clear any <a href="#browsing-context-name" title="browsing context name">browsing
       context names</a> stored with all entries in the history
       that are associated with <code><a href="dom.html#document">Document</a></code> objects with the
       <a href="#same-origin">same origin</a> as the new <a href="#active-document">active
       document</a> and that are contiguous with the specified
       entry.</p></li>

      </ol></li>

     <li id="history-autocomplete"><p>If the <var title="">specified
     entry</var>'s <code><a href="dom.html#document">Document</a></code> has any <code><a href="the-input-element.html#the-input-element">input</a></code>
     elements whose <a href="common-input-element-attributes.html#resulting-autocompletion-state">resulting autocompletion state</a> is <i title="">off</i>, invoke the <a href="#concept-form-reset-control" title="concept-form-reset-control">reset algorithm</a> of each
     of those elements.</p></li>

     <li>

      <p>If the <a href="dom.html#current-document-readiness">current document readiness</a> of the <var title="">specified entry</var>'s <code><a href="dom.html#document">Document</a></code> is "<code title="">complete</code>", <a href="#queue-a-task">queue a task</a> to run the
      following sub-sub-steps:</p>

      <ol><li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="#page-showing">page showing</a>
       flag is true, then abort this task (i.e. don't fire the event
       below).</p></li>

       <li><p>Set the <code><a href="dom.html#document">Document</a></code>'s <a href="#page-showing">page
       showing</a> flag to true.</p></li>

       <li><p>Fire a <code title="event-pageshow"><a href="#event-pageshow">pageshow</a></code>
       event at the <code><a href="#window">Window</a></code> object of that
       <code><a href="dom.html#document">Document</a></code>, but with its <code title="dom-event-target"><a href="infrastructure.html#dom-event-target">target</a></code> set to the
       <code><a href="dom.html#document">Document</a></code> object (and the <code title="dom-event-currentTarget">currentTarget</code> set to the
       <code><a href="#window">Window</a></code> object), using the
       <code><a href="#pagetransitionevent">PageTransitionEvent</a></code> interface, with the <code title="dom-PageTransitionEvent-persisted"><a href="#dom-pagetransitionevent-persisted">persisted</a></code>
       attribute initialized to true. This event must not bubble, must
       not be cancelable, and has no default action.</p></li>

      </ol><!-- an interesting thing to test would be to traverse back
      during onload, before the first pageshow has fired, and then to
      traverse forward again, and see if we get _two_ pageshows. If
      so, it indicates that browsers don't have a "page showing" flag
      like this and that the history traversal task source has a
      higher priority than the DOM manipulation task source. --></li>

    </ol></li>

   <li><p>Set <a href="dom.html#the-document's-address">the document's address</a> to the URL of the
   <var title="">specified entry</var>.</p></li>

   <li><p>If the <var title="">specified entry</var> has a URL whose
   fragment identifier differs from that of the <a href="#current-entry">current
   entry</a>'s when compared in a <a href="infrastructure.html#case-sensitive">case-sensitive</a>
   manner, and the two share the same <code><a href="dom.html#document">Document</a></code> object,
   then let <var title="">hash changed</var> be true, and let <var title="">old URL</var> be the URL of the <a href="#current-entry">current entry</a>
   and <var title="">new URL</var> be the URL of the <var title="">specified entry</var>. Otherwise, let <var title="">hash
   changed</var> be false.</p></li>

   <li><p>If the traversal was initiated with <dfn id="replacement-enabled">replacement
   enabled</dfn>, remove the entry immediately before the
   <var title="">specified entry</var> in the session history.</p>

   </li><li><p>If the <var title="">specified entry</var> is not <a href="#an-entry-with-persisted-user-state">an
   entry with persisted user state</a>, but its URL has a fragment
   identifier, <a href="#scroll-to-the-fragment-identifier">scroll to the fragment
   identifier</a>.</p></li>

   <li>

    <p>If the entry is <a href="#an-entry-with-persisted-user-state">an entry with persisted user
    state</a>, the user agent may update aspects of the document
    and its rendering, for instance the scroll position or values of
    form fields, that it had previously recorded.</p>

    <!-- see similar paragraphs in the textarea and input sections -->
    <p class="note">This can even include updating the <code title="attr-dir"><a href="global-attributes.html#the-dir-attribute">dir</a></code> attribute of <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
    elements or <code><a href="the-input-element.html#the-input-element">input</a></code> elements whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in either the
    <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a> state or the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-search">Search</a> state, if the
    persisted state includes the directionality of user input in such
    controls.</p>

   </li>

   <li><p>If the entry is a <a href="#state-object">state object</a> entry, let <var title="">state</var> be a <a href="common-dom-interfaces.html#structured-clone">structured clone</a> of that
   state object. Otherwise, let <var title="">state</var> be
   null.</p></li>

   <li><p>Set <code title="dom-history-state"><a href="#dom-history-state">history.state</a></code> to
   <var title="">state</var>.</p></li>

   <li><p>Let <var title="">state changed</var> be true if the
   <code><a href="dom.html#document">Document</a></code> of the <var title="">specified entry</var>
   has a <a href="#latest-entry">latest entry</a>, and that entry is not the <var title="">specified entry</var>; otherwise let it be false.</p>

   </li><li><p>Let the <a href="#latest-entry">latest entry</a> of the
   <code><a href="dom.html#document">Document</a></code> of the <var title="">specified entry</var> be
   the <var title="">specified entry</var>.</p></li>

   <li><p>If <var title="">state changed</var> is true, fire a <code title="event-popstate"><a href="#event-popstate">popstate</a></code> event at the
   <code><a href="#window">Window</a></code> object of the <code><a href="dom.html#document">Document</a></code>, using the
   <code><a href="#popstateevent">PopStateEvent</a></code> interface, with the <code title="dom-PopStateEvent-state"><a href="#dom-popstateevent-state">state</a></code> attribute initialized
   to the value of <var title="">state</var>. This event must bubble
   but not be cancelable and has no default action.</p></li>

   <li><p>If <var title="">hash changed</var> is true, then fire a
   <code title="event-hashchange"><a href="#event-hashchange">hashchange</a></code> event at the
   <a href="#browsing-context">browsing context</a>'s <code><a href="#window">Window</a></code> object, using
   the <code><a href="#hashchangeevent">HashChangeEvent</a></code> interface, with the <code title="dom-HashChangeEvent-oldURL"><a href="#dom-hashchangeevent-oldurl">oldURL</a></code> attribute
   initialized to <var title="">old URL</var> and the <code title="dom-HashChangeEvent-newURL"><a href="#dom-hashchangeevent-newurl">newURL</a></code> attribute
   initialized to <var title="">new URL</var>. This event must bubble
   but not be cancelable and has no default action.</p></li>

   <li><p>The <a href="#current-entry">current entry</a> is now the <var title="">specified entry</var>.</p></li>

  </ol><p>The <a href="#task-source">task source</a> for the tasks mentioned above is the
  <a href="#dom-manipulation-task-source">DOM manipulation task source</a>.</p>


  <h5 id="event-definitions-0"><span class="secno">5.6.10.1 </span>Event definitions</h5>

  </div>

  <p>The <dfn id="event-popstate" title="event-popstate"><code>popstate</code></dfn> event
  is fired in certain cases when navigating to a <a href="#session-history-entry">session history
  entry</a>.</p>

  <pre class="idl">[Constructor(DOMString type, optional <a href="#popstateeventinit">PopStateEventInit</a> eventInitDict)]
interface <dfn id="popstateevent">PopStateEvent</dfn> : <a href="infrastructure.html#event">Event</a> {
  readonly attribute any <a href="#dom-popstateevent-state" title="dom-PopStateEvent-state">state</a>;
};

dictionary <dfn id="popstateeventinit">PopStateEventInit</dfn> : <a href="infrastructure.html#eventinit">EventInit</a> {
  any state;
};</pre>

  <dl class="domintro"><dt><var title="">event</var> . <code title="dom-PopStateEvent-state"><a href="#dom-popstateevent-state">state</a></code></dt>

   <dd>

    <p>Returns a copy of the information that was provided to <code title="dom-history-pushState"><a href="#dom-history-pushstate">pushState()</a></code> or <code title="dom-history-replaceState"><a href="#dom-history-replacestate">replaceState()</a></code>.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-popstateevent-state" title="dom-PopStateEvent-state"><code>state</code></dfn>
  attribute must return the value it was initialized to. When the
  object is created, this attribute must be initialized to null. It
  represents the context information for the event, or null, if the
  state represented is the initial state of the
  <code><a href="dom.html#document">Document</a></code>.</p>

  </div>

  <hr><p>The <dfn id="event-hashchange" title="event-hashchange"><code>hashchange</code></dfn>
  event is fired when navigating to a <a href="#session-history-entry">session history
  entry</a> whose <a href="urls.html#url">URL</a> differs from that of the
  previous one only in the fragment identifier.</p>

  <pre class="idl">[Constructor(DOMString type, optional <a href="#hashchangeeventinit">HashChangeEventInit</a> eventInitDict)]
interface <dfn id="hashchangeevent">HashChangeEvent</dfn> : <a href="infrastructure.html#event">Event</a> {
  readonly attribute DOMString <a href="#dom-hashchangeevent-oldurl" title="dom-HashChangeEvent-oldURL">oldURL</a>;
  readonly attribute DOMString <a href="#dom-hashchangeevent-newurl" title="dom-HashChangeEvent-newURL">newURL</a>;
};

dictionary <dfn id="hashchangeeventinit">HashChangeEventInit</dfn> : <a href="infrastructure.html#eventinit">EventInit</a> {
  DOMString oldURL;
  DOMString newURL;
};</pre>

  <dl class="domintro"><dt><var title="">event</var> . <code title="dom-HashChangeEvent-oldURL"><a href="#dom-hashchangeevent-oldurl">oldURL</a></code></dt>

   <dd>

    <p>Returns the <a href="urls.html#url">URL</a> of the <a href="#session-history-entry">session history
    entry</a> that was previously current.</p>

   </dd>


   <dt><var title="">event</var> . <code title="dom-HashChangeEvent-newURL"><a href="#dom-hashchangeevent-newurl">newURL</a></code></dt>

   <dd>

    <p>Returns the <a href="urls.html#url">URL</a> of the <a href="#session-history-entry">session history
    entry</a> that is now current.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-hashchangeevent-oldurl" title="dom-HashChangeEvent-oldURL"><code>oldURL</code></dfn>
  attribute must return the value it was initialized to. When the
  object is created, this attribute must be initialized to null. It
  represents context information for the event, specifically the URL
  of the <a href="#session-history-entry">session history entry</a> that was traversed
  from.</p>

  <p>The <dfn id="dom-hashchangeevent-newurl" title="dom-HashChangeEvent-newURL"><code>newURL</code></dfn>
  attribute must return the value it was initialized to. When the
  object is created, this attribute must be initialized to null. It
  represents context information for the event, specifically the URL
  of the <a href="#session-history-entry">session history entry</a> that was traversed to.</p>

  </div>

  <hr><p>The <dfn id="event-pageshow" title="event-pageshow"><code>pageshow</code></dfn> event
  is fired when traversing <em>to</em> a <a href="#session-history-entry">session history
  entry</a>. The <dfn id="event-pagehide" title="event-pagehide"><code>pagehide</code></dfn> event is fired
  when traversing <em>from</em> a <a href="#session-history-entry">session history entry</a>.
  The specification uses the <a href="#page-showing">page showing</a> flag to ensure
  that scripts receive these events in a consistent manner (e.g. that
  they never receive two <code title="event-pagehide"><a href="#event-pagehide">pagehide</a></code>
  events in a row without an intervening <code title="event-pageshow"><a href="#event-pageshow">pageshow</a></code>, or vice versa).</p>

  <pre class="idl">[Constructor(DOMString type, optional <a href="#pagetransitioneventinit">PageTransitionEventInit</a> eventInitDict)]
interface <dfn id="pagetransitionevent">PageTransitionEvent</dfn> : <a href="infrastructure.html#event">Event</a> {
  readonly attribute boolean <a href="#dom-pagetransitionevent-persisted" title="dom-PageTransitionEvent-persisted">persisted</a>;
};

dictionary <dfn id="pagetransitioneventinit">PageTransitionEventInit</dfn> : <a href="infrastructure.html#eventinit">EventInit</a> {
  boolean persisted;
};</pre>

  <dl class="domintro"><dt><var title="">event</var> . <code title="dom-PageTransitionEvent-persisted"><a href="#dom-pagetransitionevent-persisted">persisted</a></code></dt>

   <dd>

    <p>Returns false if the page is newly being loaded (and the <code title="event-load">load</code> event will fire). Otherwise, returns true.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-pagetransitionevent-persisted" title="dom-PageTransitionEvent-persisted"><code>persisted</code></dfn>
  attribute must return the value it was initialized to. When the
  object is created, this attribute must be initialized to false. It
  represents the context information for the event.</p>

  </div>



  <h4 id="unloading-documents"><span class="secno">5.6.11 </span>Unloading documents</h4>

  <div class="impl">

  <p>A <code><a href="dom.html#document">Document</a></code> has a <dfn id="concept-document-salvageable" title="concept-document-salvageable"><var>salvageable</var></dfn>
  state, which must initially be true, a <dfn id="fired-unload">fired unload</dfn> flag,
  which must initially be false, and a <dfn id="page-showing">page showing</dfn> flag,
  which must initially be false.</p>

  <p><a href="#event-loop" title="event loop">Event loops</a> have a
  <dfn id="termination-nesting-level">termination nesting level</dfn> counter, which must initially
  be zero.</p>

  <p>When a user agent is to <dfn id="prompt-to-unload-a-document">prompt to unload a document</dfn>,
  it must run the following steps.</p>

  <ol><li><p>Increase the <a href="#event-loop">event loop</a>'s <a href="#termination-nesting-level">termination
   nesting level</a> by one.</p></li>

   <li><p>Increase the <code><a href="dom.html#document">Document</a></code>'s
   <a href="dynamic-markup-insertion.html#ignore-opens-during-unload-counter">ignore-opens-during-unload counter</a> by one.</p></li>

   <li><p>Let <var title="">event</var> be a new
   <code><a href="#beforeunloadevent">BeforeUnloadEvent</a></code> event object with the name <code title="event-beforeunload">beforeunload</code>, which does not
   bubble but is cancelable.</p></li>

   <li><p><i>Dispatch</i>: Dispatch <var title="">event</var> at the
   <code><a href="dom.html#document">Document</a></code>'s <code><a href="#window">Window</a></code> object.</p></li>

   <li><p>Decrease the <a href="#event-loop">event loop</a>'s <a href="#termination-nesting-level">termination
   nesting level</a> by one.</p></li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</p></li>

   <li><p>If any event listeners were triggered by the earlier
   <i>dispatch</i> step, then set the <code><a href="dom.html#document">Document</a></code>'s <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state to
   false.</p></li>

   <li>

    <p>If the <code title="dom-BeforeUnloadEvent-returnValue"><a href="#dom-beforeunloadevent-returnvalue">returnValue</a></code>
    attribute of the <var title="">event</var> object is not the empty
    string, or if the event was canceled, then the user agent should
    ask the user to confirm that they wish to unload the document.</p>

    <p>The prompt shown by the user agent may include the string of
    the <code title="dom-BeforeUnloadEvent-returnValue"><a href="#dom-beforeunloadevent-returnvalue">returnValue</a></code>
    attribute, or some leading subset thereof. (A user agent may want
    to truncate the string to 1024 characters for display, for
    instance.)</p>

    <p>The user agent must <a href="#pause">pause</a> while waiting for the
    user's response.</p>

    <p>If the user did not confirm the page navigation, then the user
    agent <dfn id="refused-to-allow-the-document-to-be-unloaded">refused to allow the document to be unloaded</dfn>.</p>

   </li>

   <li><p>If this algorithm was invoked by another instance of the
   "prompt to unload a document" algorithm (i.e. through the steps
   below that invoke this algorithm for all descendant browsing
   contexts), then jump to the step labeled <i>end</i>.</p></li>

   <li><p>Let <var title="">descendants</var> be the <a href="#list-of-the-descendant-browsing-contexts">list of the
   descendant browsing contexts</a> of the
   <code><a href="dom.html#document">Document</a></code>.</p></li>

   <li>

    <p>If <var title="">descendants</var> is not an empty list, then
    for each <a href="#browsing-context">browsing context</a> <var title="">b</var> in
    <var title="">descendants</var> run the following substeps:</p>

    <ol><li><p><a href="#prompt-to-unload-a-document" title="prompt to unload a document">Prompt to
     unload</a> the <a href="#active-document">active document</a> of the
     <a href="#browsing-context">browsing context</a> <var title="">b</var>. If the user
     <a href="#refused-to-allow-the-document-to-be-unloaded">refused to allow the document to be unloaded</a>, then
     the user implicitly also <a href="#refused-to-allow-the-document-to-be-unloaded" title="refused to allow the
     document to be unloaded">refused to allow <em>this</em> document
     to be unloaded</a>; jump to the step labeled <i>end</i>.</p>

     </li><li><p>If <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state of
     the <a href="#active-document">active document</a> of the <a href="#browsing-context">browsing
     context</a> <var title="">b</var> is false, then set the <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state of
     <em>this</em> document to false also.</p></li>

    </ol></li>

   <li><p><i>End</i>: Decrease the <code><a href="dom.html#document">Document</a></code>'s
   <a href="dynamic-markup-insertion.html#ignore-opens-during-unload-counter">ignore-opens-during-unload counter</a> by one.</p></li>

  </ol><p>When a user agent is to <dfn id="unload-a-document">unload a document</dfn>, it must run
  the following steps. These steps are passed an argument, <var title="">recycle</var>, which is either true or false, indicating
  whether the <code><a href="dom.html#document">Document</a></code> object is going to be
  re-used. (This is set by the <code title="dom-document-open"><a href="dynamic-markup-insertion.html#dom-document-open">document.open()</a></code> method.)</p>

  <ol><li><p>Increase the <a href="#event-loop">event loop</a>'s <a href="#termination-nesting-level">termination
   nesting level</a> by one.</p></li>

   <li><p>Increase the <code><a href="dom.html#document">Document</a></code>'s
   <a href="dynamic-markup-insertion.html#ignore-opens-during-unload-counter">ignore-opens-during-unload counter</a> by one.</p></li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="#page-showing">page showing</a>
   flag is false, then jump to the step labled <i>unload event</i>
   below (i.e. skip firing the <code title="event-pagehide"><a href="#event-pagehide">pagehide</a></code> even and don't rerun the
   <a href="#unloading-document-visibility-change-steps">unloading document visibility change steps</a>).</p></li>

   <li><p>Set the <code><a href="dom.html#document">Document</a></code>'s <a href="#page-showing">page showing</a>
   flag to false.</p></li>

   <li><p>Fire a <code title="event-pagehide"><a href="#event-pagehide">pagehide</a></code> event at
   the <code><a href="#window">Window</a></code> object of the <code><a href="dom.html#document">Document</a></code>, but
   with its <code title="dom-event-target"><a href="infrastructure.html#dom-event-target">target</a></code> set to the
   <code><a href="dom.html#document">Document</a></code> object (and the <code title="dom-event-currentTarget">currentTarget</code> set to the
   <code><a href="#window">Window</a></code> object), using the
   <code><a href="#pagetransitionevent">PageTransitionEvent</a></code> interface, with the <code title="dom-PageTransitionEvent-persisted"><a href="#dom-pagetransitionevent-persisted">persisted</a></code>
   attribute initialized to true. This event must not bubble, must not
   be cancelable, and has no default action.</p></li>

   <li>

    <p>Run any <dfn id="unloading-document-visibility-change-steps">unloading document visibility change steps</dfn>
    for <code><a href="dom.html#document">Document</a></code> that are defined by <a href="infrastructure.html#other-applicable-specifications">other
    applicable specifications</a>.</p>

    <p class="note">This is specifically intended for use by the Page
    Visibility specification. <a href="#refsPAGEVIS">[PAGEVIS]</a></p>

   </li>

   <li><p><i>Unload event</i>: If the <code><a href="dom.html#document">Document</a></code>'s
   <a href="#fired-unload">fired unload</a> flag is false, <a href="#fire-a-simple-event">fire a simple
   event</a> named <code title="event-unload">unload</code> at the
   <code><a href="dom.html#document">Document</a></code>'s <code><a href="#window">Window</a></code> object.</p></li>

   <li><p>Decrease the <a href="#event-loop">event loop</a>'s <a href="#termination-nesting-level">termination
   nesting level</a> by one.</p></li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</p></li>

   <li><p>If any event listeners were triggered by the earlier
   <i>unload event</i> step, then set the <code><a href="dom.html#document">Document</a></code>
   object's <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state to
   false and set the <code><a href="dom.html#document">Document</a></code>'s <a href="#fired-unload">fired unload</a>
   flag to true.</p></li>

   <li><p>Run any <a href="#unloading-document-cleanup-steps">unloading document cleanup steps</a> for
   <code><a href="dom.html#document">Document</a></code> that are defined by this specification and
   <a href="infrastructure.html#other-applicable-specifications">other applicable specifications</a>.</p></li>

   <li><p>If this algorithm was invoked by another instance of the
   "unload a document" algorithm (i.e. by the steps below that invoke
   this algorithm for all descendant browsing contexts), then jump to
   the step labeled <i>end</i>.</p></li>

   <li><p>Let <var title="">descendants</var> be the <a href="#list-of-the-descendant-browsing-contexts">list of the
   descendant browsing contexts</a> of the
   <code><a href="dom.html#document">Document</a></code>.</p></li>

   <li>

    <p>If <var title="">descendants</var> is not an empty list, then
    for each <a href="#browsing-context">browsing context</a> <var title="">b</var> in
    <var title="">descendants</var> run the following substeps:</p>

    <ol><li><p><a href="#unload-a-document" title="unload a document">Unload</a> the
     <a href="#active-document">active document</a> of the <a href="#browsing-context">browsing context</a>
     <var title="">b</var> with the <var title="">recycle</var>
     parameter set to false.</p></li>

     <li><p>If <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state of
     the <a href="#active-document">active document</a> of the <a href="#browsing-context">browsing
     context</a> <var title="">b</var> is false, then set the <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state of
     <em>this</em> document to false also.</p></li>

    </ol></li>

   <li><p>If <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> and <var title="">recycle</var> are both false, then the
   <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing context</a> must <a href="#discard-a-document" title="discard a document">discard the
   <code>Document</code></a>.</p></li>

   <li><p><i>End</i>: Decrease the <code><a href="dom.html#document">Document</a></code>'s
   <a href="dynamic-markup-insertion.html#ignore-opens-during-unload-counter">ignore-opens-during-unload counter</a> by one.</p></li>

  </ol><p>This specification defines the following <dfn id="unloading-document-cleanup-steps">unloading document
  cleanup steps</dfn>. Other specifications can define more.</p>

  <ol><li>

    <p><span>Make disappear</span> any <code>WebSocket</code> objects
    that were created by the <code title="dom-WebSocket">WebSocket()</code> constructor whose global
    object is the <code><a href="dom.html#document">Document</a></code>'s <code><a href="#window">Window</a></code> object.

    <a href="#refsWEBSOCKET">[WEBSOCKET]</a>

    </p>

    <p>If this affected any <code>WebSocket</code> objects, the set
    <code><a href="dom.html#document">Document</a></code>'s <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state to
    false.</p>

   </li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code>'s <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state is
   false, <span title="concept-EventSource-forcibly-close">forcibly
   close</span> any <code>EventSource</code> objects that whose
   constructor was invoked from the <code><a href="dom.html#document">Document</a></code>'s
   <code><a href="#window">Window</a></code> object.</p></li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code>'s <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state is
   false, empty the <code><a href="dom.html#document">Document</a></code>'s <code><a href="#window">Window</a></code>'s
   <a href="#list-of-active-timers">list of active timers</a>.</p></li>

  </ol><h5 id="event-definition"><span class="secno">5.6.11.1 </span>Event definition</h5>

  </div>

  <pre class="idl">interface <dfn id="beforeunloadevent">BeforeUnloadEvent</dfn> : <a href="infrastructure.html#event">Event</a> {
           attribute DOMString <a href="#dom-beforeunloadevent-returnvalue" title="dom-BeforeUnloadEvent-returnValue">returnValue</a>;
};</pre>

  <dl class="domintro"><dt><var title="">event</var> . <code title="dom-BeforeUnloadEvent-returnValue"><a href="#dom-beforeunloadevent-returnvalue">returnValue</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the current return value of the event (the message to show the user).</p>

    <p>Can be set, to update the message.</p>

   </dd>

  </dl><p class="note">There are no <code><a href="#beforeunloadevent">BeforeUnloadEvent</a></code>-specific
  initialization methods.</p>

  <div class="impl">

  <p>The <dfn id="dom-beforeunloadevent-returnvalue" title="dom-BeforeUnloadEvent-returnValue"><code>returnValue</code></dfn>
  attribute represents the message to show the user. When the event is
  created, the attribute must be set to the empty string. On getting,
  it must return the last value it was set to. On setting, the
  attribute must be set to the new value.</p>

  </div>


  <div class="impl">

  <h4 id="aborting-a-document-load"><span class="secno">5.6.12 </span>Aborting a document load</h4>

  <p>If a <code><a href="dom.html#document">Document</a></code> is <dfn id="abort-a-document" title="abort a
  document">aborted</dfn>, the user agent must run the following
  steps:</p>

  <ol><li><p><a href="#abort-a-document" title="abort a document">Abort</a> the <a href="#active-document" title="active document">active documents</a> of every
   <a href="#child-browsing-context">child browsing context</a>.</p></li>

   <li><p>Cancel any instances of the <a href="urls.html#fetch" title="fetch">fetch</a>
   algorithm in the context of this <code><a href="dom.html#document">Document</a></code>, discarding
   any <a href="#concept-task" title="concept-task">tasks</a> <a href="#queue-a-task" title="queue a
   task">queued</a> for them, and discarding any further data
   received from the network for them.</p></li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code> has an <a href="dom.html#active-parser">active
   parser</a>, then <a href="#abort-a-parser" title="abort a parser">abort that
   parser</a>.</p></li>

   <li><p>Set the <code><a href="dom.html#document">Document</a></code>'s <var title="concept-document-salvageable"><a href="#concept-document-salvageable">salvageable</a></var> state to
   false.</p></li>

   <!-- we could also stop all script, or stop animations -->

  </ol><p>User agents may allow users to explicitly invoke the <a href="#abort-a-document" title="abort a document">abort a document</a> algorithm for a
  <code><a href="dom.html#document">Document</a></code>. If the user does so, then, if that
  <code><a href="dom.html#document">Document</a></code> is an <a href="#active-document">active document</a>, the user
  agent should <a href="#queue-a-task">queue a task</a> to <a href="#fire-a-simple-event">fire a simple
  event</a> named <code title="event-abort">abort</code> at that
  <code><a href="dom.html#document">Document</a></code>'s <code><a href="#window">Window</a></code> object before invoking
  the <a href="#abort-a-document" title="abort a document">abort</a> algorithm.</p>

  <!-- I'd love to make this more precise, anyone have any suggestions
  on what it should say? -->

  </div>


<!--TOPIC:Offline Web Applications-->
  <h3 id="offline"><span class="secno">5.7 </span>Offline Web applications</h3>

  <!-- v2 ideas for appcache:

     * A way to limit what gets download when the user agent is
       updating the application cache and it turns out the server has
       changed EVERY page because every page has a dynamic "site last
       modified" date on it.

       http://groups.google.com/group/gears-users/browse_thread/thread/efbd808325df607a/c73adb34f9b63cf7?hl=en&q=whatwg#c73adb34f9b63cf7


     * Multiuser appcaches.

       If the application code (HTML, JS, CSS) is all the same for two
       users, then appcache works for multiple users by just having
       the data for the users separate from the logic.

       This is the expected model for most apps. For example, your
       typical blog has just one set of CSS for all users.

       For systems where the user affects what HTML, JS, and CSS is
       served back, the spec as written pretty much requires that
       there be one app per user, and one generic "login" app that
       then redirects to one of those other apps - and where each app
       has a different base URL, separate manifest, etc.

       An alternative that we could explore in a future version is to
       have the manifest include a manifest name, and then have script
       that allows you to "activate" a particular manifest name for a
       given appcache.

       So each appcache group would be futher subdivided into named
       subgroups, and for a given manifest URL with such a group of
       subgroups, one subgroup would be the default one at a time. The
       inactive ones would just lie dormant, but and the active ones
       would act like now, but there'd be a scripted way to change the
       default (and maybe query what available variants exist for the
       current appcache), so that you could log back in as someone
       else by just making the script pick the other user's variant,
       and then reloading.


     * Add and remove specific additional files from the cache (e.g.
       precaching new master entries).

  -->

  <h4 id="introduction-4"><span class="secno">5.7.1 </span>Introduction</h4>

  <p><i>This section is non-normative.</i></p>
  <p>In order to enable users to continue interacting with Web
  applications and documents even when their network connection is
  unavailable &#8212; for instance, because they are traveling outside
  of their ISP's coverage area &#8212; authors can provide a manifest
  which lists the files that are needed for the Web application to
  work offline and which causes the user's browser to keep a copy of
  the files for use offline.</p>

  <p>To illustrate this, consider a simple clock applet consisting of
  an HTML page "<code title="">clock.html</code>", a CSS style sheet
  "<code title="">clock.css</code>", and a JavaScript script "<code title="">clock.js</code>".</p>

  <p>Before adding the manifest, these three files might look like
  this:</p>

  <pre>EXAMPLE offline/clock/clock1.html</pre>
  <pre>EXAMPLE offline/clock/clock1.css</pre>
  <pre>EXAMPLE offline/clock/clock1.js</pre>

  <p>If the user tries to open the "<code title="">clock.html</code>"
  page while offline, though, the user agent (unless it happens to
  have it still in the local cache) will fail with an error.</p>

  <p>The author can instead provide a manifest of the three files, say
  "<code title="">clock.appcache</code>":</p>

  <pre>EXAMPLE offline/clock/clock2.appcache</pre>

  <p>With a small change to the HTML file, the manifest (served as
  <code><a href="#text/cache-manifest">text/cache-manifest</a></code>) is linked to the application:</p>

  <pre>EXAMPLE offline/clock/clock2.html</pre>

  <p>Now, if the user goes to the page, the browser will cache the
  files and make them available even when the user is offline.</p>

  <p class="note">Authors are encouraged to include the main page in
  the manifest also, but in practice the page that referenced the
  manifest is automatically cached even if it isn't explicitly
  mentioned.</p>

  <p class="note">With the exception of "no-store" directive, HTTP
  cache headers and restrictions on caching pages served over TLS
  (encrypted, using <code title="">https:</code>) are overridden by
  manifests. Thus, pages will not expire from an application cache
  before the user agent has updated it, and even applications served
  over TLS can be made to work offline.</p>

<!--(doesn't currently function)
  <p><a href="http://www.whatwg.org/demos/offline/clock/clock2.html">View this example online</a>.</p>
-->



  <h5 id="appcacheevents"><span class="secno">5.7.1.1 </span>Event summary</h5>

  <p><i>This section is non-normative.</i></p>
  <p>When the user visits a page that declares a manifest, the browser
  will try to update the cache. It does this by fetching a copy of the
  manifest and, if the manifest has changed since the user agent last
  saw it, redownloading all the resources it mentions and caching them
  anew.</p>

  <p>As this is going on, a number of events get fired on the
  <code><a href="#applicationcache">ApplicationCache</a></code> object to keep the script updated as
  to the state of the cache update, so that the user can be notified
  appropriately. The events are as follows:</p>

  <table><thead><tr><th> Event name
     </th><th> Interface
     </th><th> Fired when...
     </th><th> Next events
   </th></tr></thead><tbody><tr><td> <dfn id="event-appcache-checking" title="event-appcache-checking"><code>checking</code></dfn>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> The user agent is checking for an update, or attempting to download the manifest for the first time. <strong>This is always the first event in the sequence.</strong>
     </td><td> <code title="event-appcache-noupdate"><a href="#event-appcache-noupdate">noupdate</a></code>, <code title="event-appcache-downloading"><a href="#event-appcache-downloading">downloading</a></code>, <code title="event-appcache-obsolete"><a href="#event-appcache-obsolete">obsolete</a></code>, <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code>
    </td></tr><tr><td> <dfn id="event-appcache-noupdate" title="event-appcache-noupdate"><code>noupdate</code></dfn>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> The manifest hadn't changed.
     </td><td> Last event in sequence.
    </td></tr><tr><td> <dfn id="event-appcache-downloading" title="event-appcache-downloading"><code>downloading</code></dfn>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> The user agent has found an update and is fetching it, or is downloading the resources listed by the manifest for the first time.
     </td><td> <code title="event-appcache-progress"><a href="#event-appcache-progress">progress</a></code>, <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code>, <code title="event-appcache-cached"><a href="#event-appcache-cached">cached</a></code>, <code title="event-appcache-updateready"><a href="#event-appcache-updateready">updateready</a></code>
    </td></tr><tr><td> <dfn id="event-appcache-progress" title="event-appcache-progress"><code>progress</code></dfn>
     </td><td> <code>ProgressEvent</code>
     </td><td> The user agent is downloading resources listed by the manifest.
     </td><td> <code title="event-appcache-progress"><a href="#event-appcache-progress">progress</a></code>, <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code>, <code title="event-appcache-cached"><a href="#event-appcache-cached">cached</a></code>, <code title="event-appcache-updateready"><a href="#event-appcache-updateready">updateready</a></code>
    </td></tr><tr><td> <dfn id="event-appcache-cached" title="event-appcache-cached"><code>cached</code></dfn>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> The resources listed in the manifest have been downloaded, and the application is now cached.
     </td><td> Last event in sequence.
    </td></tr><tr><td> <dfn id="event-appcache-updateready" title="event-appcache-updateready"><code>updateready</code></dfn>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> The resources listed in the manifest have been newly redownloaded, and the script can use <code title="dom-appcache-swapCache"><a href="#dom-appcache-swapcache">swapCache()</a></code> to switch to the new cache.
     </td><td> Last event in sequence.
    </td></tr><tr><td> <dfn id="event-appcache-obsolete" title="event-appcache-obsolete"><code>obsolete</code></dfn>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> The manifest was found to have become a 404 or 410 page, so the application cache is being deleted.
     </td><td> Last event in sequence.
    </td></tr><tr><td rowspan="4"> <dfn id="event-appcache-error" title="event-appcache-error"><code>error</code></dfn>
     </td><td rowspan="4"> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> The manifest was a 404 or 410 page, so the attempt to cache the application has been aborted.
     </td><td rowspan="3"> Last event in sequence.
    </td></tr><tr><td> The manifest hadn't changed, but the page referencing the manifest failed to download properly.
    </td></tr><tr><td> A fatal error occurred while fetching the resources listed in the manifest.
    </td></tr><tr><td> The manifest changed while the update was being run.
     </td><td> The user agent will try fetching the files again momentarily.
  </td></tr></tbody></table><div class="impl">

  <h4 id="appcache"><span class="secno">5.7.2 </span>Application caches</h4> <!--APPCACHE-->

  <p>An <dfn id="application-cache">application cache</dfn> is a set of cached resources
  consisting of:</p>

  <ul><li>

    <p>One or more resources (including their out-of-band metadata,
    such as HTTP headers, if any), identified by URLs, each falling
    into one (or more) of the following categories:</p>

    <dl><dt><dfn id="concept-appcache-master" title="concept-appcache-master">Master entries</dfn>

     </dt><dd><p class="note">These are documents that were added to the
     cache because a <a href="#browsing-context">browsing context</a> was <a href="#navigate" title="navigate">navigated</a> to that document and the
     document indicated that this was its cache, using the <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code> attribute.</p>


     </dd><dt><dfn id="concept-appcache-manifest" title="concept-appcache-manifest">The manifest</dfn>

     </dt><dd><p class="note">This is the resource corresponding to the URL
     that was given in a master entry's <code><a href="the-html-element.html#the-html-element">html</a></code> element's
     <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code> attribute. The
     manifest is fetched and processed during the <a href="#application-cache-download-process">application
     cache download process</a>. All the <a href="#concept-appcache-master" title="concept-appcache-master">master entries</a> have the
     <a href="#same-origin" title="same origin">same origin</a> as the manifest.</p>


     </dd><dt><dfn id="concept-appcache-explicit" title="concept-appcache-explicit">Explicit entries</dfn>

     </dt><dd><p class="note">These are the resources that were listed in
     the cache's <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a> in an <a href="#concept-appcache-manifest-explicit" title="concept-appcache-manifest-explicit">explicit
     section</a>.</p>


     </dd><dt><dfn id="concept-appcache-fallback" title="concept-appcache-fallback">Fallback entries</dfn>

     </dt><dd><p class="note">These are the resources that were listed in
     the cache's <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a> in a <a href="#concept-appcache-manifest-fallback" title="concept-appcache-manifest-fallback">fallback
     section</a>.</p>


    </dd></dl><p><a href="#concept-appcache-explicit" title="concept-appcache-explicit">Explicit entries</a>
    and <a href="#concept-appcache-fallback" title="concept-appcache-fallback">Fallback
    entries</a> can be marked as <dfn id="concept-appcache-foreign" title="concept-appcache-foreign">foreign</dfn>, which means that
    they have a <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code>
    attribute but that it doesn't point at this cache's <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a>.</p>

    <p class="note">A URL in the list can be flagged with multiple
    different types, and thus an entry can end up being categorized as
    multiple entries. For example, an entry can be a manifest entry
    and an explicit entry at the same time, if the manifest is listed
    within the manifest.</p>

   </li>

   <li>

    <p>Zero or more <dfn id="concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback
    namespaces</dfn>, each of which is mapped to a <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback entry</a>.</p>

    <p class="note">These are URLs used as <a href="#concept-appcache-matches-fallback" title="concept-appcache-matches-fallback">prefix match
    patterns</a> for resources that are to be fetched from the
    network if possible, or to be replaced by the corresponding <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback entry</a> if not.
    Each namespace URL has the <a href="#same-origin">same origin</a> as <a href="#concept-appcache-manifest" title="concept-appcache-manifest">the manifest</a>.</p>

   </li>

   <li>

    <p>Zero or more URLs that form the <dfn id="concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist
    namespaces</dfn>.</p>

    <p class="note">These are used as prefix match patterns, and
    declare URLs for which the user agent will ignore the application
    cache, instead fetching them normally (i.e. from the network or
    local HTTP cache as appropriate).</p>

   </li>

   <li>

    <p>An <dfn id="concept-appcache-onlinewhitelist-wildcard" title="concept-appcache-onlinewhitelist-wildcard">online whitelist
    wildcard flag</dfn>, which is either <i title="">open</i> or <i title="">blocking</i>.</p>

    <p class="note">The <i title="">open</i> state indicates that any
    URL not listed as cached is to be implicitly treated as being in
    the <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online
    whitelist namespaces</a>; the <i title="">blocking</i> state
    indicates that URLs not listed explicitly in the manifest are to
    be treated as unavailable.</p>

   </li>

   <li>

    <p>A <dfn id="concept-appcache-mode" title="concept-appcache-mode">cache mode flag</dfn>,
    which is 
<!--FORK--><!--APPCACHE-PREFER-ONLINE-->
    in the <dfn id="concept-appcache-mode-fast" title="concept-appcache-mode-fast"><i>fast</i></dfn>
<!--FORK--><!--APPCACHE-PREFER-ONLINE-->
    state.</p>

   </li>

  </ul><p>Each <a href="#application-cache">application cache</a> has a <dfn id="concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</dfn>, which is
  either <i>complete</i> or <i>incomplete</i>.</p>

  <hr><p>An <dfn id="application-cache-group">application cache group</dfn> is a group of <a href="#application-cache" title="application cache">application caches</a>, identified by
  the <a href="urls.html#absolute-url">absolute URL</a> of a resource <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a> which is used to
  populate the caches in the group.</p>

  <p>An <a href="#application-cache">application cache</a> is <dfn id="concept-appcache-newer" title="concept-appcache-newer">newer</dfn> than another if it was
  created after the other (in other words, <a href="#application-cache" title="application
  cache">application caches</a> in an <a href="#application-cache-group">application cache
  group</a> have a chronological order).</p>

  <p>Only the newest <a href="#application-cache">application cache</a> in an
  <a href="#application-cache-group">application cache group</a> can have its <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a> set to
  <i>incomplete</i>; the others are always all <i>complete</i>.</p>

  <p>Each <a href="#application-cache-group">application cache group</a> has an <dfn id="concept-appcache-status" title="concept-appcache-status">update status</dfn>, which is one of
  the following: <i>idle</i>, <i>checking</i>, <i>downloading</i>.</p>

  <p>A <dfn id="relevant-application-cache">relevant application cache</dfn> is an <a href="#application-cache">application
  cache</a> that is the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a> in its <a href="#application-cache-group" title="application cache group">group</a> to be
  <i>complete</i>.</p>

  <p>Each <a href="#application-cache-group">application cache group</a> has a <dfn id="concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
  entries</dfn>. Each entry in this list consists of a resource and a
  corresponding <code><a href="dom.html#document">Document</a></code> object. It is used during the
  <a href="#application-cache-download-process">application cache download process</a> to ensure that new
  master entries are cached even if the <a href="#application-cache-download-process">application cache
  download process</a> was already running for their
  <a href="#application-cache-group">application cache group</a> when they were loaded.</p>

  <p>An <a href="#application-cache-group">application cache group</a> can be marked as <dfn id="concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</dfn>, meaning that it
  must be ignored when looking at what <a href="#application-cache-group" title="application cache
  group">application cache groups</a> exist.</p>

  <hr><p>A <dfn id="cache-host">cache host</dfn> is a <code><a href="dom.html#document">Document</a></code> or a
  <code>SharedWorkerGlobalScope</code> object. A <a href="#cache-host">cache
  host</a> can be associated with an <a href="#application-cache">application
  cache</a>.
    <a href="#refsWEBWORKERS">[WEBWORKERS]</a>
    </p>

  <p>A <code><a href="dom.html#document">Document</a></code> initially is not associated with an
  <a href="#application-cache">application cache</a>, but can become associated with one
  early during the page load process, when steps <a href="#parser-appcache">in the parser</a> and in the <a href="#navigate" title="navigate">navigation</a> sections cause <a href="#concept-appcache-init" title="concept-appcache-init">cache selection</a> to occur.</p>

  <p>A <code>SharedWorkerGlobalScope</code> can be associated with an
  <a href="#application-cache">application cache</a> when it is created.
    <a href="#refsWEBWORKERS">[WEBWORKERS]</a>
    </p>

  <p>Each <a href="#cache-host">cache host</a> has an associated
  <code><a href="#applicationcache">ApplicationCache</a></code> object.</p>

  <hr><p>Multiple <a href="#application-cache" title="application cache">application
  caches</a> in different <a href="#application-cache-group" title="application cache
  group">application cache groups</a> can contain the same
  resource, e.g. if the manifests all reference that resource. If the
  user agent is to <dfn id="concept-appcache-selection" title="concept-appcache-selection">select an
  application cache</dfn> from a list of <a href="#relevant-application-cache" title="relevant
  application cache">relevant application caches</a> that contain a
  resource, the user agent must use the application cache that the
  user most likely wants to see the resource from, taking into account
  the following:</p>

  <ul><li>which application cache was most recently updated,

   </li><li>which application cache was being used to display the
   resource from which the user decided to look at the new resource,
   and

   </li><li>which application cache the user prefers.

  </li></ul><hr><p>A URL <dfn id="concept-appcache-matches-fallback" title="concept-appcache-matches-fallback">matches a
  fallback namespace</dfn> if there exists a <a href="#relevant-application-cache">relevant
  application cache</a> whose <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a>'s URL has the
  <a href="#same-origin">same origin</a> as the URL in question, and that has a
  <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespace</a>
  that is a <a href="infrastructure.html#prefix-match">prefix match</a> for the URL being examined. If
  multiple fallback namespaces match the same URL, the longest one is
  the one that matches. A URL looking for a fallback namespace can
  match more than one application cache at a time, but only matches
  one namespace in each cache.</p>

  <div class="example">

   <p>If a manifest <code title="">http://example.com/app1/manifest</code> declares that
   <code title="">http://example.com/resources/images</code> is a
   fallback namespace, and the user navigates to <code title="">HTTP://EXAMPLE.COM:80/resources/images/cat.png</code>,
   then the user agent will decide that the application cache
   identified by <code title="">http://example.com/app1/manifest</code> contains a
   namespace with a match for that URL.</p>

   <!-- "resolve a url" canonicalises the case for the scheme and host
   and removes the port if it is the default -->

  </div>

  </div>



  <h4 id="manifests"><span class="secno">5.7.3 </span>The cache manifest syntax</h4>


  <h5 id="some-sample-manifests"><span class="secno">5.7.3.1 </span>Some sample manifests</h5>

  <p><i>This section is non-normative.</i></p>
  <div class="example">

   <p>This example manifest requires two images and a style sheet to be
   cached and whitelists a CGI script.</p>

   <pre>CACHE MANIFEST
# the above line is required

# this is a comment
# there can be as many of these anywhere in the file
# they are all ignored
  # comments can have spaces before them
  # but must be alone on the line

# blank lines are ignored too

# these are files that need to be cached they can either be listed
# first, or a "CACHE:" header could be put before them, as is done
# lower down.
images/sound-icon.png
images/background.png
# note that each file has to be put on its own line

# here is a file for the online whitelist -- it isn't cached, and
# references to this file will bypass the cache, always hitting the
# network (or trying to, if the user is offline).
NETWORK:
comm.cgi

# here is another set of files to cache, this time just the CSS file.
CACHE:
style/default.css</pre>

   <p>It could equally well be written as follows:</p>

   <pre>CACHE MANIFEST
NETWORK:
comm.cgi
CACHE:
style/default.css
images/sound-icon.png
images/background.png</pre>

  </div>

  <div class="example">

   <p>Offline application cache manifests can use absolute paths or
   even absolute URLs:</p>

   <pre>CACHE MANIFEST

/main/home
/main/app.js
/settings/home
/settings/app.js
http://img.example.com/logo.png
http://img.example.com/check.png
http://img.example.com/cross.png</pre>

  </div>

  <div class="example">

   <p>The following manifest defines a catch-all error page that is
   displayed for any page on the site while the user is offline. It
   also specifies that the <a href="#concept-appcache-onlinewhitelist-wildcard" title="concept-appcache-onlinewhitelist-wildcard">online whitelist
   wildcard flag</a> is <i title="">open</i>, meaning that accesses
   to resources on other sites will not be blocked. (Resources on the
   same site are already not blocked because of the catch-all fallback
   namespace.)</p>

   <p>So long as all pages on the site reference this manifest, they
   will get cached locally as they are fetched, so that subsequent hits
   to the same page will load the page immediately from the
   cache. Until the manifest is changed, those pages will not be
   fetched from the server again. When the manifest changes, then all
   the files will be redownloaded.</p>

   <p>Subresources, such as style sheets, images, etc, would only be
   cached using the regular HTTP caching semantics, however.</p>

   <pre>CACHE MANIFEST
FALLBACK:
/ /offline.html
NETWORK:
*</pre>

  </div>



  <h5 id="writing-cache-manifests"><span class="secno">5.7.3.2 </span>Writing cache manifests</h5>

  <p>Manifests must be served using the
  <code><a href="#text/cache-manifest">text/cache-manifest</a></code> <a href="infrastructure.html#mime-type">MIME type</a>. All
  resources served using the <code><a href="#text/cache-manifest">text/cache-manifest</a></code>
  <a href="infrastructure.html#mime-type">MIME type</a> must follow the syntax of application cache
  manifests, as described in this section.</p>

  <p>An application cache manifest is a text file, whose text is
  encoded using UTF-8. Data in application cache manifests is
  line-based. Newlines must be represented by "LF" (U+000A)
  characters, "CR" (U+000D) characters, or "CR" (U+000D) "LF" (U+000A) pairs. <a href="#refsRFC3629">[RFC3629]</a></p>

  <p class="note">This is a <a href="introduction.html#willful-violation">willful violation</a> of RFC
  2046, which requires all <code title="">text/*</code> types to only
  allow CRLF line breaks. This requirement, however, is outdated; the
  use of CR, LF, and CRLF line breaks is commonly supported and indeed
  sometimes CRLF is <em>not</em> supported by text editors. <a href="#refsRFC2046">[RFC2046]</a></p>

  <p>The first line of an application cache manifest must consist of
  the string "CACHE", a single U+0020 SPACE character, the string
  "MANIFEST", and either a U+0020 SPACE character, a "tab" (U+0009) character, a "LF" (U+000A) character, or a
  "CR" (U+000D) character. The first line may optionally
  be preceded by a "BOM" (U+FEFF) character. If any
  other text is found on the first line, it is ignored.</p>

  <p>Subsequent lines, if any, must all be one of the following:</p>

  <dl><dt>A blank line
   </dt><dd>
    <p>Blank lines must consist of zero or more U+0020 SPACE and
    "tab" (U+0009) characters only.</p>

   </dd><dt>A comment
   </dt><dd>
    <p>Comment lines must consist of zero or more U+0020 SPACE and
    "tab" (U+0009) characters, followed by a single
    "#" (U+0023) character, followed by zero or more
    characters other than "LF" (U+000A) and "CR" (U+000D) characters.</p>

    <p class="note">Comments must be on a line on their own. If they
    were to be included on a line with a URL, the "#" would be
    mistaken for part of a fragment identifier.</p>

   </dd><dt>A section header
   </dt><dd>

    <p>Section headers change the current section. There are four
    possible section headers:

    </p><dl><dt><code>CACHE:</code>
     </dt><dd>Switches to the <dfn id="concept-appcache-manifest-explicit" title="concept-appcache-manifest-explicit">explicit section</dfn>.

     </dd><dt><code>FALLBACK:</code>
     </dt><dd>Switches to the <dfn id="concept-appcache-manifest-fallback" title="concept-appcache-manifest-fallback">fallback section</dfn>.

     </dd><dt><code>NETWORK:</code>
     </dt><dd>Switches to the <dfn id="concept-appcache-manifest-network" title="concept-appcache-manifest-network">online whitelist section</dfn>.

<!--FORK--><!--APPCACHE-PREFER-ONLINE-->

    </dd></dl><p>Section header lines must consist of zero or more U+0020 SPACE
    and "tab" (U+0009) characters, followed by one
    of the names above (including the ":)" (U+003A) character
    followed by zero or more U+0020 SPACE and "tab" (U+0009) characters.</p>

    <p>Ironically, by default, the current section is the
    <a href="#concept-appcache-manifest-explicit" title="concept-appcache-manifest-explicit">explicit section</a>.</p>

   </dd><dt>Data for the current section
   </dt><dd>
    <p>The format that data lines must take depends on the current
    section.</p>

    <p>When the current section is the <a href="#concept-appcache-manifest-explicit" title="concept-appcache-manifest-explicit">explicit
    section</a>, data lines must consist of zero or more U+0020
    SPACE and "tab" (U+0009) characters, a
    <a href="urls.html#valid-url">valid URL</a> identifying a resource other than the
    manifest itself, and then zero or more U+0020 SPACE and "tab" (U+0009) characters.</p>

    <p>When the current section is the <a href="#concept-appcache-manifest-fallback" title="concept-appcache-manifest-fallback">fallback
    section</a>, data lines must consist of zero or more U+0020
    SPACE and "tab" (U+0009) characters, a
    <a href="urls.html#valid-url">valid URL</a> identifying a resource other than the
    manifest itself, one or more U+0020 SPACE and "tab" (U+0009) characters, another <a href="urls.html#valid-url">valid URL</a>
    identifying a resource other than the manifest itself, and then
    zero or more U+0020 SPACE and "tab" (U+0009)
    characters.</p>

    <p>When the current section is the <a href="#concept-appcache-manifest-network" title="concept-appcache-manifest-network">online whitelist
    section</a>, data lines must consist of zero or more U+0020
    SPACE and "tab" (U+0009) characters, either a
    single "*" (U+002A) character <!--
    concept-appcache-onlinewhitelist-wildcard --> or a <a href="urls.html#valid-url">valid
    URL</a> identifying a resource other than the manifest itself,
    and then zero or more U+0020 SPACE and "tab" (U+0009) characters.</p>

<!--FORK--><!--APPCACHE-PREFER-ONLINE-->

<!--
    <p class="note">The URLs in data lines can't be empty strings,
    since those would be relative URLs to the manifest itself. Such
    lines would be confused with blank or invalid lines, anyway.</p>
-->

  </dd></dl><p>Manifests may contain sections more than once. Sections may be
  empty.</p>

  <p>URLs that are to be fallback pages associated with <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespaces</a>, and
  those namespaces themselves, must be given in <a href="#concept-appcache-manifest-fallback" title="concept-appcache-manifest-fallback">fallback sections</a>,
  with the namespace being the first URL of the data line, and the
  corresponding fallback page being the second URL. All the other
  pages to be cached must be listed in <a href="#concept-appcache-manifest-explicit" title="concept-appcache-manifest-explicit">explicit
  sections</a>.</p>

  <p><a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">Fallback
  namespaces</a> and <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback entries</a> must have
  the <a href="#same-origin">same origin</a> as the manifest itself.</p>

  <p>A <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback
  namespace</a> must not be listed more than once.</p>

  <p>Namespaces that the user agent is to put into the <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist</a>
  must all be specified in <a href="#concept-appcache-manifest-network" title="concept-appcache-manifest-network">online whitelist
  sections</a>. (This is needed for any URL that the page is
  intending to use to communicate back to the server.) To specify that
  all URLs are automatically whitelisted in this way, a "*" (U+002A) character may be specified as one of the URLs. <!--
  concept-appcache-onlinewhitelist-wildcard --></p>

  <p>Authors should not include namespaces in the <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist</a> for
  which another namespace in the <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist</a> is
  a <a href="infrastructure.html#prefix-match">prefix match</a>.</p>

  <p>Relative URLs must be given relative to the manifest's own
  URL. All URLs in the manifest must have the same <a href="urls.html#url-scheme" title="url-scheme">&lt;scheme&gt;</a> as the manifest itself
  (either explicitly or implicitly, through the use of relative
  URLs).</p>

  <p>URLs in manifests must not have fragment identifiers (i.e. the
  U+0023 NUMBER SIGN character isn't allowed in URLs in
  manifests).</p>

  <p><a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">Fallback
  namespaces</a> and namespaces in the <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist</a> are
  matched by <a href="infrastructure.html#prefix-match">prefix match</a>.</p>


  <div class="impl">

  <h5 id="parsing-cache-manifests"><span class="secno">5.7.3.3 </span>Parsing cache manifests</h5>

  <p>When a user agent is to <dfn id="parse-a-manifest">parse a manifest</dfn>, it means
  that the user agent must run the following steps:</p>

  <ol><li><p>The user agent must decode the byte stream corresponding
   with the manifest to be parsed <a href="infrastructure.html#decoded-as-utf-8,-with-error-handling" title="decoded as UTF-8, with
   error handling">as UTF-8, with error handling</a>. <!--All
   U+0000 NULL characters must be replaced by U+FFFD REPLACEMENT
   CHARACTERs. (this isn't black-box testable since neither U+0000 nor
   U+FFFD are valid anywhere in the syntax and thus both will be
   treated the same anyway)--></p></li>

   <li><p>Let <var title="">base URL</var> be the <a href="urls.html#absolute-url">absolute
   URL</a> representing the manifest.</p></li>

   <li><p>Let <var title="">explicit URLs</var> be an initially empty
   list of <a href="urls.html#absolute-url" title="absolute URL">absolute URLs</a> for <a href="#concept-appcache-explicit" title="concept-appcache-explicit">explicit entries</a>.</p></li>

   <li><p>Let <var title="">fallback URLs</var> be an initially empty
   mapping of <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback
   namespaces</a> to <a href="urls.html#absolute-url" title="absolute URL">absolute
   URLs</a> for <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback
   entries</a>.</p></li>

   <li><p>Let <var title="">online whitelist namespaces</var> be an
   initially empty list of <a href="urls.html#absolute-url" title="absolute URL">absolute
   URLs</a> for an <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online
   whitelist</a>.</p></li>

   <li><p>Let <var title="">online whitelist wildcard flag</var> be <i title="">blocking</i>. <!--
   concept-appcache-onlinewhitelist-wildcard --></p></li>

   <li><p>Let <var title="">cache mode flag</var> be <i title="">fast</i>. <!-- concept-appcache-mode-fast --></p></li>

   <li><p>Let <var title="">input</var> be the decoded text of the
   manifest's byte stream.</p></li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially pointing at the first
   character.</p></li>

   <li><p>If <var title="">position</var> is pointing at a "BOM" (U+FEFF) character, then advance <var title="">position</var> to the next character.</p></li>

   <li><p>If the characters starting from <var title="">position</var>
   are "CACHE", followed by a U+0020 SPACE character, followed by
   "MANIFEST", then advance <var title="">position</var> to the next
   character after those. Otherwise, this isn't a cache manifest;
   abort this algorithm with a failure while checking for the magic
   signature.</p></li>

   <li><p>If the character at <var title="">position</var> is neither
   a U+0020 SPACE character, a "tab" (U+0009)
   character, "LF" (U+000A) character, nor a "CR" (U+000D) character, then this isn't a cache manifest; abort this
   algorithm with a failure while checking for the magic
   signature.</p></li>

   <li><p>This is a cache manifest. The algorithm cannot fail beyond
   this point (though bogus lines can get ignored).</p></li>

   <li><p><a href="common-microsyntaxes.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are
   <em>not</em> "LF" (U+000A) or "CR" (U+000D)
   characters, and ignore those characters. (Extra text on the first
   line, after the signature, is ignored.)</p></li>

   <li><p>Let <var title="">mode</var> be "explicit".</p></li>

   <li><p><i>Start of line</i>: If <var title="">position</var> is
   past the end of <var title="">input</var>, then jump to the last
   step. Otherwise, <a href="common-microsyntaxes.html#collect-a-sequence-of-characters">collect a sequence of characters</a> that
   are "LF" (U+000A), "CR" (U+000D), U+0020
   SPACE, or "tab" (U+0009) characters.</p></li>
   <!-- strips leading spaces, ignores space-only lines, ignores blank lines -->

   <li><p>Now, <a href="common-microsyntaxes.html#collect-a-sequence-of-characters">collect a sequence of characters</a> that are
   <em>not</em> "LF" (U+000A) or "CR" (U+000D)
   characters, and let the result be <var title="">line</var>.</p></li>

   <li><p>Drop any trailing U+0020 SPACE and "tab" (U+0009) characters at the end of <var title="">line</var>.</p></li>

   <li><p>If <var title="">line</var> is the empty string, then jump
   back to the step labeled "start of line".</p></li>

   <li><p>If the first character in <var title="">line</var> is a
   "#" (U+0023) character, then jump back to the step
   labeled "start of line".</p></li>

   <li><p>If <var title="">line</var> equals "CACHE:" (the word
   "CACHE" followed by a ":)" (U+003A) character, then set <var title="">mode</var> to "explicit" and jump back to the step
   labeled "start of line".</p></li>

   <li><p>If <var title="">line</var> equals "FALLBACK:" (the word
   "FALLBACK" followed by a ":)" (U+003A) character, then set <var title="">mode</var> to "fallback" and jump back to the step
   labeled "start of line".</p></li>

   <li><p>If <var title="">line</var> equals "NETWORK:" (the word
   "NETWORK" followed by a ":)" (U+003A) character, then set <var title="">mode</var> to "online whitelist" and jump back to the step
   labeled "start of line".</p></li>

<!--FORK--><!--APPCACHE-PREFER-ONLINE-->

   <li><p>If <var title="">line</var> ends with a ":" (U+003A) character, then set <var title="">mode</var> to "unknown" and
   jump back to the step labeled "start of line".</p></li>

   <li><p>This is either a data line or it is syntactically
   incorrect.</p></li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">line</var>, initially pointing at the start of the
   string.</p></li>

   <li><p>Let <var title="">tokens</var> be a list of strings,
   initially empty.</p></li>

   <li>

    <p>While <var title="">position</var> doesn't point past the end
    of <var title="">line</var>:</p>

    <ol><li><p>Let <var title="">current token</var> be an empty
     string.</p></li>

     <li><p>While <var title="">position</var> doesn't point past the
     end of <var title="">line</var> and the character at <var title="">position</var> is neither a U+0020 SPACE nor a "tab" (U+0009) character, add the character at <var title="">position</var> to <var title="">current token</var> and
     advance <var title="">position</var> to the next character in
     <var title="">input</var>.</p></li>

     <li><p>Add <var title="">current token</var> to the <var title="">tokens</var> list.</p></li>

     <li><p>While <var title="">position</var> doesn't point past the
     end of <var title="">line</var> and the character at <var title="">position</var> is either a U+0020 SPACE or a "tab" (U+0009) character, advance <var title="">position</var> to the next character in <var title="">input</var>.</p></li>

    </ol></li>

   <li>

    <p>Process <var title="">tokens</var> as follows:</p>

    <dl class="switch"><dt>If <var title="">mode</var> is "explicit"</dt>

     <dd>

      <p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> the first item in
      <var title="">tokens</var>, relative to <var title="">base
      URL</var>; ignore the rest.</p>

      <p>If this fails, then jump back to the step labeled "start of
      line".</p>

      <p>If the resulting <a href="urls.html#absolute-url">absolute URL</a> has a different
      <a href="urls.html#url-scheme" title="url-scheme">&lt;scheme&gt;</a> component than
      the manifest's URL (compared in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
      case-insensitive</a> manner), then jump back to the step
      labeled "start of line".</p>

      <p>Drop the <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a>
      component of the resulting <a href="urls.html#absolute-url">absolute URL</a>, if it has
      one.</p>

      <p>Add the resulting <a href="urls.html#absolute-url">absolute URL</a> to the <var title="">explicit URLs</var>.</p>

     </dd>

     <dt>If <var title="">mode</var> is "fallback"</dt>

     <dd>

      <p>Let <var title="">part one</var> be the first token in <var title="">tokens</var>, and let <var title="">part two</var> be
      the second token in <var title="">tokens</var>.</p>

      <p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> <var title="">part
      one</var> and <var title="">part two</var>, relative to <var title="">base URL</var>.</p>

      <p>If either fails, then jump back to the step labeled "start of
      line".</p>

      <p>If the <a href="urls.html#absolute-url">absolute URL</a> corresponding to either <var title="">part one</var> or <var title="">part two</var> does not
      have the <a href="#same-origin">same origin</a> as the manifest's URL, then
      jump back to the step labeled "start of line".</p> <!-- SECURITY
      -->

      <p>Drop any <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a>
      components of the resulting <a href="urls.html#absolute-url" title="absolute URL">absolute
      URLs</a>.</p>

      <p>If the <a href="urls.html#absolute-url">absolute URL</a> corresponding to <var title="">part one</var> is already in the <var title="">fallback
      URLs</var> mapping as a <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespace</a>,
      then jump back to the step labeled "start of line".</p>

      <p>Otherwise, add the <a href="urls.html#absolute-url">absolute URL</a> corresponding to
      <var title="">part one</var> to the <var title="">fallback
      URLs</var> mapping as a <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespace</a>,
      mapped to the <a href="urls.html#absolute-url">absolute URL</a> corresponding to <var title="">part two</var> as the <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback entry</a>.</p>

     </dd>

     <dt>If <var title="">mode</var> is "online whitelist"</dt>

     <dd>

      <p>If the first item in <var title="">tokens</var> is a "*" (U+002A) character, then set <var title="">online whitelist
      wildcard flag</var> to <i title="">open</i> and jump back to the
      step labeled "start of line".</p>

      <p>Otherwise, <a href="urls.html#resolve-a-url" title="resolve a url">resolve</a> the
      first item in <var title="">tokens</var>, relative to <var title="">base URL</var>; ignore the rest.</p>

      <p>If this fails, then jump back to the step labeled "start of
      line".</p>

      <p>If the resulting <a href="urls.html#absolute-url">absolute URL</a> has a different
      <a href="urls.html#url-scheme" title="url-scheme">&lt;scheme&gt;</a> component than
      the manifest's URL (compared in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
      case-insensitive</a> manner), then jump back to the step
      labeled "start of line".</p>

      <p>Drop the <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a>
      component of the resulting <a href="urls.html#absolute-url">absolute URL</a>, if it has
      one.</p>

      <p>Add the resulting <a href="urls.html#absolute-url">absolute URL</a> to the <var title="">online whitelist namespaces</var>.</p>

     </dd>

<!--FORK--><!--APPCACHE-PREFER-ONLINE-->

     <dt>If <var title="">mode</var> is "unknown"</dt>

     <dd>

      <p>Do nothing. The line is ignored.</p>

     </dd>

    </dl></li>

   <li><p>Jump back to the step labeled "start of line". (That step
   jumps to the next, and last, step when the end of the file is
   reached.)</p></li>

   <li><p>Return the <var title="">explicit URLs</var> list, the <var title="">fallback URLs</var> mapping, the <var title="">online
   whitelist namespaces</var>, the <var title="">online whitelist
   wildcard flag</var>, and the <var title="">cache mode
   flag</var>.</p></li>

  </ol><div class="note">

   <p>The resource that declares the manifest (with the <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code> attribute) will always
   get taken from the cache, whether it is listed in the cache or not,
   even if it is listed in an <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist
   namespace</a>.</p>

   <p>If a resource is listed in the <a href="#concept-appcache-manifest-explicit" title="concept-appcache-manifest-explicit">explicit section</a>
   or as a <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback
   entry</a> in the <a href="#concept-appcache-manifest-fallback" title="concept-appcache-manifest-fallback">fallback section</a>,
   the resource will always be taken from the cache, regardless of any
   other matching entries in the <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespaces</a> or
   <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist
   namespaces</a>.</p>

   <p>When a <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback
   namespace</a> and an <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist
   namespace</a> overlap, the <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist
   namespace</a> has priority.</p>

   <p>The <a href="#concept-appcache-onlinewhitelist-wildcard" title="concept-appcache-onlinewhitelist-wildcard">online whitelist
   wildcard flag</a> is applied last, only for URLs that match
   neither the <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online
   whitelist namespace</a> nor the <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespace</a> and
   that are not listed in the <a href="#concept-appcache-manifest-explicit" title="concept-appcache-manifest-explicit">explicit
   section</a>.</p>

  </div>


  <h4 id="downloading-or-updating-an-application-cache"><span class="secno">5.7.4 </span>Downloading or updating an application cache</h4>

  <p>When the user agent is required (by other parts of this
  specification) to start the <dfn id="application-cache-download-process">application cache download
  process</dfn> for an <a href="urls.html#absolute-url">absolute URL</a> purported to identify
  a <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a>, or for an
  <a href="#application-cache-group">application cache group</a>, potentially given a particular
  <a href="#cache-host">cache host</a>, and potentially given a <a href="#concept-appcache-master" title="concept-appcache-master">master</a> resource, the user
  agent must run the steps below. These steps are always run
  asynchronously, in parallel with the <a href="#event-loop">event loop</a> <a href="#concept-task" title="concept-task">tasks</a>.</p>

  <p>Some of these steps have requirements that only apply if the user
  agent <dfn id="shows-caching-progress">shows caching progress</dfn>. Support for this is
  optional. Caching progress UI could consist of a progress bar or
  message panel in the user agent's interface, or an overlay, or
  something else. Certain events fired during the <a href="#application-cache-download-process">application
  cache download process</a> allow the script to override the display
  of such an interface. The goal of this is to allow Web applications
  to provide more seamless update mechanisms, hiding from the user the
  mechanics of the application cache mechanism. User agents may
  display user interfaces independent of this, but are encouraged to
  not show prominent update progress notifications for applications
  that cancel the relevant events.</p>

  <p class="note">These events are delayed until after the <code title="event-load">load</code> event has fired.</p>

  <p>The <a href="#application-cache-download-process">application cache download process</a> steps are as
  follows:

  </p><ol><li><p>Optionally, wait until the permission to start the
   <a href="#application-cache-download-process">application cache download process</a> has been obtained
   from the user and until the user agent is confident that the
   network is available. This could include doing nothing until the
   user explicitly opts-in to caching the site, or could involve
   prompting the user for permission. The algorithm might never get
   past this point. (This step is particularly intended to be used by
   user agents running on severely space-constrained devices or in
   highly privacy-sensitive environments).</p></li>

   <li>

    <p>Atomically, so as to avoid race conditions, perform the
    following substeps:</p>

    <ol><li>

      <p>Pick the appropriate substeps:</p>

      <dl class="switch"><dt>If these steps were invoked with an <a href="urls.html#absolute-url">absolute
       URL</a> purported to identify a <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a></dt>

       <dd>

        <p>Let <var title="">manifest URL</var> be that <a href="urls.html#absolute-url">absolute
        URL</a>.</p>

        <p>If there is no <a href="#application-cache-group">application cache group</a>
        identified by <var title="">manifest URL</var>, then create a
        new <a href="#application-cache-group">application cache group</a> identified by <var title="">manifest URL</var>. Initially, it has no <a href="#application-cache" title="application cache">application caches</a>. One will
        be created later in this algorithm.</p>

       </dd>


       <dt>If these steps were invoked with an <a href="#application-cache-group">application cache
       group</a></dt>

       <dd>

        <p>Let <var title="">manifest URL</var> be the <a href="urls.html#absolute-url">absolute
        URL</a> of the <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a> used to
        identify the <a href="#application-cache-group">application cache group</a> to be
        updated.</p>

        <p>If that <a href="#application-cache-group">application cache group</a> is <a href="#concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</a>, then abort
        this instance of the <a href="#application-cache-download-process">application cache download
        process</a>. This can happen if another instance of this
        algorithm found the manifest to be 404 or 410 while this
        algorithm was waiting in the first step above.</p>

       </dd>

      </dl></li>

     <li><p>Let <var title="">cache group</var> be the
     <a href="#application-cache-group">application cache group</a> identified by <var title="">manifest URL</var>.</p></li>

     <li><p>If these steps were invoked with a <a href="#concept-appcache-master" title="concept-appcache-master">master</a> resource, then add
     the resource, along with the resource's <code><a href="dom.html#document">Document</a></code>, to
     <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
     entries</a>.</p></li>

     <li><p>If these steps were invoked with a <a href="#cache-host">cache
     host</a>, and the <a href="#concept-appcache-status" title="concept-appcache-status">status</a> of <var title="">cache group</var> is <i>checking</i> or
     <i>downloading</i>, then <a href="#queue-a-post-load-task">queue a post-load task</a> to
     <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-appcache-checking"><a href="#event-appcache-checking">checking</a></code> that is
     cancelable at the <code><a href="#applicationcache">ApplicationCache</a></code> singleton of that
     <a href="#cache-host">cache host</a>. The default action of this event must
     be, if the user agent <a href="#shows-caching-progress">shows caching progress</a>, the
     display of some sort of user interface indicating to the user
     that the user agent is checking to see if it can download the
     application.</p></li>

     <li><p>If these steps were invoked with a <a href="#cache-host">cache
     host</a>, and the <a href="#concept-appcache-status" title="concept-appcache-status">status</a> of <var title="">cache group</var> is <i>downloading</i>, then also
     <a href="#queue-a-post-load-task">queue a post-load task</a> to <a href="#fire-a-simple-event">fire a simple
     event</a> named <code title="event-appcache-downloading"><a href="#event-appcache-downloading">downloading</a></code> that is
     cancelable at the <code><a href="#applicationcache">ApplicationCache</a></code> singleton of that
     <a href="#cache-host">cache host</a>. The default action of this event must
     be, if the user agent <a href="#shows-caching-progress">shows caching progress</a>, the
     display of some sort of user interface indicating to the user the
     application is being downloaded.</p></li>

     <li><p>If the <a href="#concept-appcache-status" title="concept-appcache-status">status</a>
     of the <var title="">cache group</var> is either <i>checking</i>
     or <i>downloading</i>, then abort this instance of the
     <a href="#application-cache-download-process">application cache download process</a>, as an update is
     already in progress.</p></li>

     <li><p>Set the <a href="#concept-appcache-status" title="concept-appcache-status">status</a> of <var title="">cache group</var> to <i>checking</i>.</p>

     </li><li><p>For each <a href="#cache-host">cache host</a> associated with an
     <a href="#application-cache">application cache</a> in <var title="">cache
     group</var>, <a href="#queue-a-post-load-task">queue a post-load task</a> to <a href="#fire-a-simple-event">fire a
     simple event</a> that is cancelable named <code title="event-appcache-checking"><a href="#event-appcache-checking">checking</a></code> at the
     <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the <a href="#cache-host">cache
     host</a>. The default action of these events must be, if the
     user agent <a href="#shows-caching-progress">shows caching progress</a>, the display of
     some sort of user interface indicating to the user that the user
     agent is checking for the availability of updates.</p></li>

    </ol><p class="note">The remainder of the steps run asynchronously.</p>

    <p>If <var title="">cache group</var> already has an
    <a href="#application-cache">application cache</a> in it, then this is an <dfn id="concept-appcache-upgrade" title="concept-appcache-upgrade">upgrade attempt</dfn>. Otherwise,
    this is a <dfn id="concept-appcache-cache" title="concept-appcache-cache">cache
    attempt</dfn>.</p>

   </li>

   <li><p>If this is a <a href="#concept-appcache-cache" title="concept-appcache-cache">cache
   attempt</a>, then this algorithm was invoked with a <a href="#cache-host">cache
   host</a>; <a href="#queue-a-post-load-task">queue a post-load task</a> to <a href="#fire-a-simple-event">fire a
   simple event</a> named <code title="event-appcache-checking"><a href="#event-appcache-checking">checking</a></code> that is cancelable
   at the <code><a href="#applicationcache">ApplicationCache</a></code> singleton of that <a href="#cache-host">cache
   host</a>. The default action of this event must be, if the user
   agent <a href="#shows-caching-progress">shows caching progress</a>, the display of some sort
   of user interface indicating to the user that the user agent is
   checking for the availability of updates.</p></li>

   <li>

    <p><i>Fetching the manifest</i>: <a href="urls.html#fetch">Fetch</a><!--FETCH-->
    the resource from <var title="">manifest URL</var> with the
    <i>synchronous flag</i> set, and let <var title="">manifest</var>
    be that resource. HTTP caching semantics should be honored for
    this request.</p> <!-- http-origin privacy sensitive, though it
    doesn't matter, since this can never be cross-origin -->

    <p>Parse <var title="">manifest</var> according to the <a href="#parse-a-manifest" title="parse a manifest">rules for parsing manifests</a>,
    obtaining a list of <a href="#concept-appcache-explicit" title="concept-appcache-explicit">explicit entries</a>, <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback entries</a> and the
    <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback
    namespaces</a> that map to them, entries for the <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist</a>,
    and values for the <a href="#concept-appcache-onlinewhitelist-wildcard" title="concept-appcache-onlinewhitelist-wildcard">online whitelist
    wildcard flag</a> and the <a href="#concept-appcache-mode" title="concept-appcache-mode">cache mode flag</a>.</p>

    <p class="note">The <a href="infrastructure.html#mime-type">MIME type</a> of the resource is
    ignored &#8212; it is assumed to be
    <code><a href="#text/cache-manifest">text/cache-manifest</a></code>. In the future, if new manifest
    formats are supported, the different types will probably be
    distinguished on the basis of the file signatures (for the current
    format, that is the "<code title="">CACHE&#160;MANIFEST</code>"
    string at the top of the file).</p>

   </li>

   <li>

    <p>If <i>fetching the manifest</i> fails due to a 404 or 410
    response <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or
    equivalent</a>, then run these substeps:</p>

    <ol><li><p>Mark <var title="">cache group</var> as <a href="#concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</a>. This <var title="">cache group</var> no longer exists for any purpose other
     than the processing of <code><a href="dom.html#document">Document</a></code> objects already
     associated with an <a href="#application-cache">application cache</a> in the <var title="">cache group</var>.</p></li>

     <li><p>Let <var title="">task list</var> be an empty list of
     <a href="#concept-task" title="concept-task">tasks</a>.</p>

     </li><li><p>For each <a href="#cache-host">cache host</a> associated with an
     <a href="#application-cache">application cache</a> in <var title="">cache
     group</var>, create a <a href="#concept-task" title="concept-task">task</a> to
     <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-appcache-obsolete"><a href="#event-appcache-obsolete">obsolete</a></code> that is
     cancelable at the <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the
     <a href="#cache-host">cache host</a>, and append it to <var title="">task
     list</var>. The default action of these events must be, if the
     user agent <a href="#shows-caching-progress">shows caching progress</a>, the display of
     some sort of user interface indicating to the user that the
     application is no longer available for offline use.</p></li>

     <li><p>For each entry in <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
     entries</a>, create a <a href="#concept-task" title="concept-task">task</a>
     to <a href="#fire-a-simple-event">fire a simple event</a> that is cancelable named
     <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code> (not <code title="event-appcache-obsolete"><a href="#event-appcache-obsolete">obsolete</a></code>!) at the
     <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the
     <code><a href="dom.html#document">Document</a></code> for this entry, if there still is one, and
     append it to <var title="">task list</var>. The default action of
     this event must be, if the user agent <a href="#shows-caching-progress">shows caching
     progress</a>, the display of some sort of user interface
     indicating to the user that the user agent failed to save the
     application for offline use.</p></li>

     <li><p>If <var title="">cache group</var> has an
     <a href="#application-cache">application cache</a> whose <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a> is
     <i>incomplete</i>, then discard that <a href="#application-cache">application
     cache</a>.</p>

     </li><li><p>If appropriate, remove any user interface indicating that
     an update for this cache is in progress.</p></li>

     <li><p>Let the <a href="#concept-appcache-status" title="concept-appcache-status">status</a> of <var title="">cache group</var> be <i>idle</i>.</p></li>

     <li><p>For each <a href="#concept-task" title="concept-task">task</a> in <var title="">task list</var>, <a href="#queue-a-post-load-task" title="queue a post-load
     task">queue that task as a post-load task</a>.</p></li>

     <li><p>Abort the <a href="#application-cache-download-process">application cache download
     process</a>.</p></li>

    </ol></li>

   <li>

    <p>Otherwise, if <i>fetching the manifest</i> fails in some other
    way (e.g. the server returns another 4xx or 5xx response <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or equivalent</a>, or
    there is a DNS error, or the connection times out, or the user
    cancels the download, or the parser for manifests fails when
    checking the magic signature), or if the server returned a
    redirect, then run the <a href="#cache-failure-steps">cache failure steps</a>. <a href="#refsHTTP">[HTTP]</a></p>

   </li>

   <li>

    <p>If this is an <a href="#concept-appcache-upgrade" title="concept-appcache-upgrade">upgrade
    attempt</a> and the newly downloaded <var title="">manifest</var> is byte-for-byte identical to the manifest
    found in the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a>
    <a href="#application-cache">application cache</a> in <var title="">cache group</var>,
    or the server reported it as "304 Not Modified" <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or equivalent</a>, then
    run these substeps:</p>

    <ol><li><p>Let <var title="">cache</var> be the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a> <a href="#application-cache">application
     cache</a> in <var title="">cache group</var>.</p></li>

     <li><p>Let <var title="">task list</var> be an empty list of
     <a href="#concept-task" title="concept-task">tasks</a>.</p>

     </li><li>

      <p>For each entry in <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
      entries</a>, wait for the resource for this entry to have
      either completely downloaded or failed.</p>

      <p>If the download failed (e.g. the server returns a 4xx or 5xx
      response <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or
      equivalent</a>, or there is a DNS error, the connection times
      out, or the user cancels the download), or if the resource is
      labeled with the "no-store" cache directive, then create a <a href="#concept-task" title="concept-task">task</a> to <a href="#fire-a-simple-event">fire a simple
      event</a> that is cancelable named <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code> at the
      <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the
      <code><a href="dom.html#document">Document</a></code> for this entry, if there still is one, and
      append it to <var title="">task list</var>. The default action
      of this event must be, if the user agent <a href="#shows-caching-progress">shows caching
      progress</a>, the display of some sort of user interface
      indicating to the user that the user agent failed to save the
      application for offline use.</p>

      <p>Otherwise, associate the <code><a href="dom.html#document">Document</a></code> for this entry
      with <var title="">cache</var>; store the resource for this
      entry in <var title="">cache</var>, if it isn't already there,
      and categorize its entry as a <a href="#concept-appcache-master" title="concept-appcache-master">master entry</a>. If the
      resource's <a href="urls.html#url">URL</a> has a <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a> component, it must
      be removed from the entry in <var title="">cache</var>
      (application caches never include fragment identifiers).</p>

     </li>

     <li><p>For each <a href="#cache-host">cache host</a> associated with an
     <a href="#application-cache">application cache</a> in <var title="">cache
     group</var>, create a <a href="#concept-task" title="concept-task">task</a> to
     <a href="#fire-a-simple-event">fire a simple event</a> that is cancelable named <code title="event-appcache-noupdate"><a href="#event-appcache-noupdate">noupdate</a></code> at the
     <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the <a href="#cache-host">cache
     host</a>, and append it to <var title="">task list</var>. The
     default action of these events must be, if the user agent
     <a href="#shows-caching-progress">shows caching progress</a>, the display of some sort of
     user interface indicating to the user that the application is up
     to date.</p></li>

     <li><p>Empty <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
     entries</a>.</p></li>

     <li><p>If appropriate, remove any user interface indicating that
     an update for this cache is in progress.</p></li>

     <li><p>Let the <a href="#concept-appcache-status" title="concept-appcache-status">status</a> of <var title="">cache group</var> be <i>idle</i>.</p></li>

     <li><p>For each <a href="#concept-task" title="concept-task">task</a> in <var title="">task list</var>, <a href="#queue-a-post-load-task" title="queue a post-load
     task">queue that task as a post-load task</a>.</p></li>

     <li><p>Abort the <a href="#application-cache-download-process">application cache download
     process</a>.</p></li>

    </ol></li>

   <li><p>Let <var title="">new cache</var> be a newly created
   <a href="#application-cache">application cache</a> in <var title="">cache
   group</var>. Set its <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a> to
   <i>incomplete</i>.</p></li>

   <li><p>For each entry in <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
   entries</a>, associate the <code><a href="dom.html#document">Document</a></code> for this entry
   with <var title="">new cache</var>.</p></li>

   <li><p>Set the <a href="#concept-appcache-status" title="concept-appcache-status">status</a>
   of <var title="">cache group</var> to <i>downloading</i>.</p></li>

   <li><p>For each <a href="#cache-host">cache host</a> associated with an
   <a href="#application-cache">application cache</a> in <var title="">cache group</var>,
   <a href="#queue-a-post-load-task">queue a post-load task</a> to <a href="#fire-a-simple-event">fire a simple
   event</a> that is cancelable named <code title="event-appcache-downloading"><a href="#event-appcache-downloading">downloading</a></code> at the
   <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the <a href="#cache-host">cache
   host</a>. The default action of these events must be, if the
   user agent <a href="#shows-caching-progress">shows caching progress</a>, the display of some
   sort of user interface indicating to the user that a new version is
   being downloaded.</p></li>

   <li><p>Let <var title="">file list</var> be an empty list of
   URLs with flags.</p></li>

   <li><p>Add all the URLs in the list of <a href="#concept-appcache-explicit" title="concept-appcache-explicit">explicit entries</a> obtained
   by parsing <var title="">manifest</var> to <var title="">file
   list</var>, each flagged with "explicit entry".</p></li>

   <li><p>Add all the URLs in the list of <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback entries</a> obtained
   by parsing <var title="">manifest</var> to <var title="">file
   list</var>, each flagged with "fallback entry".</p></li>

   <li><p>If this is an <a href="#concept-appcache-upgrade" title="concept-appcache-upgrade">upgrade
   attempt</a>, then add all the URLs of <a href="#concept-appcache-master" title="concept-appcache-master">master entries</a> in the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a> <a href="#application-cache">application
   cache</a> in <var title="">cache group</var> whose <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a> is
   <i>complete</i> to <var title="">file list</var>, each flagged with
   "master entry".</p></li>

   <li><p>If any URL is in <var title="">file list</var> more than
   once, then merge the entries into one entry for that URL, that
   entry having all the flags that the original entries had.</p></li>

   <li>

    <p>For each URL in <var title="">file list</var>, run the
    following steps. These steps may be run in parallel for two or
    more of the URLs at a time. If, while running these steps, the
    <code><a href="#applicationcache">ApplicationCache</a></code> object's <code title="dom-appcache-abort"><a href="#dom-appcache-abort">abort()</a></code> method <a href="#send-a-signal" title="send
    a signal">sends a signal</a> to this instance of the
    <a href="#application-cache-download-process">application cache download process</a> algorithm, then
    run the <a href="#cache-failure-steps">cache failure steps</a> instead.</p>

    <ol><li>

      <p>If the resource URL being processed was flagged as neither an
      "explicit entry" nor or a "fallback entry", then the user agent
      may skip this URL.</p>

      <p class="note">This is intended to allow user agents to expire
      resources not listed in the manifest from the cache. Generally,
      implementors are urged to use an approach that expires
      lesser-used resources first.</p>

     </li>

     <li><p>For each <a href="#cache-host">cache host</a> associated with an
     <a href="#application-cache">application cache</a> in <var title="">cache
     group</var>, <a href="#queue-a-post-load-task">queue a post-load task</a> to fire an event
     with the name <code title="event-appcache-progress"><a href="#event-appcache-progress">progress</a></code>, which does not
     bubble, which is cancelable, and which uses the
     <code>ProgressEvent</code> interface, at the
     <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the <a href="#cache-host">cache
     host</a>. The <code title="dom-ProgressEvents-lengthComputable">lengthComputable</code>
     attribute must be set to true, the <code title="dom-ProgressEvents-total">total</code> attribute must be
     set to the number of files in <var title="">file list</var>, and
     the <code title="dom-ProgressEvents-loaded">loaded</code>
     attribute must be set to the number of files in <var title="">file list</var> that have been either downloaded or
     skipped so far. The default action of these events must be, if
     the user agent <a href="#shows-caching-progress">shows caching progress</a>, the display
     of some sort of user interface indicating to the user that a file
     is being downloaded in preparation for updating the application.
     <a href="#refsPROGRESS">[PROGRESS]</a></p></li>

     <li>

      <p><a href="urls.html#fetch">Fetch</a><!--FETCH--> the resource, from the
      <a href="#origin-0">origin</a> of the <a href="urls.html#url">URL</a> <var title="">manifest URL</var>, with the <i>synchronous flag</i>
      set and the <i>manual redirect flag</i> set. If this is an <a href="#concept-appcache-upgrade" title="concept-appcache-upgrade">upgrade attempt</a>, then
      use the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a>
      <a href="#application-cache">application cache</a> in <var title="">cache
      group</var> as an HTTP cache, and honor HTTP caching semantics
      (such as expiration, ETags, and so forth) with respect to that
      cache. User agents may also have other caches in place that are
      also honored.</p> <!-- not http-origin privacy sensitive -->

      <p class="note">If the resource in question is already being
      downloaded for other reasons then the existing download process
      can sometimes be used for the purposes of this step, as defined
      by the <a href="urls.html#fetch" title="fetch">fetching</a> algorithm.</p>

      <p class="example">An example of a resource that might already
      be being downloaded is a large image on a Web page that is being
      seen for the first time. The image would get downloaded to
      satisfy the <code><a href="the-img-element.html#the-img-element">img</a></code> element on the page, as well as
      being listed in the cache manifest. According to the rules for
      <a href="urls.html#fetch" title="fetch">fetching</a> that image only need be
      downloaded once, and it can be used both for the cache and for
      the rendered Web page.</p>

     </li>

     <li>

      <p>If the previous step fails (e.g. the server returns a 4xx or
      5xx response <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or
      equivalent</a>, or there is a DNS error, or the connection
      times out, or the user cancels the download), or if the server
      returned a redirect, or if the resource is labeled with the
      "no-store" cache directive, then run the first appropriate step
      from the following list: <a href="#refsHTTP">[HTTP]</a></p>

      <dl class="switch"><dt>If the URL being processed was flagged as an "explicit
       entry" or a "fallback entry"</dt>

       <dd>

        <p>If these steps are being run in parallel for any other URLs
        in <var title="">file list</var>, then abort these steps for
        those other URLs. Run the <a href="#cache-failure-steps">cache failure
        steps</a>.</p>

        <p class="note">Redirects are fatal because they are either
        indicative of a network problem (e.g. a captive portal); or
        would allow resources to be added to the cache under URLs that
        differ from any URL that the networking model will allow
        access to, leaving orphan entries; or would allow resources to
        be stored under URLs different than their true URLs. All of
        these situations are bad.</p>

       </dd>

       <dt>If the error was a 404 or 410 HTTP response <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or equivalent</a></dt>

       <dt>If the resource was labeled with the "no-store" cache
       directive</dt>

       <dd>

        <p>Skip this resource. It is dropped from the cache.</p>

       </dd>

       <dt>Otherwise</dt>

       <dd>

        <p>Copy the resource and its metadata from the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a> <a href="#application-cache">application
        cache</a> in <var title="">cache group</var> whose <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a>
        is <i>complete</i>, and act as if that was the fetched
        resource, ignoring the resource obtained from the network.</p>

       </dd>

      </dl><p>User agents may warn the user of these errors as an aid to
      development.</p>

      <p class="note">These rules make errors for resources listed in
      the manifest fatal, while making it possible for other resources
      to be removed from caches when they are removed from the server,
      without errors, and making non-manifest resources survive
      server-side errors.</p>

      <p class="note">Except for the "no-store" directive, HTTP
      caching rules that would cause a file to be expired or otherwise
      not cached are ignored for the purposes of the <a href="#application-cache-download-process">application
      cache download process</a>.</p>

     </li>

     <li>

      <p>Otherwise, the fetching succeeded. Store the resource in
      the <var title="">new cache</var>.</p>

      <p>If the user agent is not able to store the resource (e.g.
      because of quota restrictions), the user agent may prompt the
      user or try to resolve the problem in some other manner (e.g.
      automatically pruning content in other caches). If the problem
      cannot be resolved, the user agent must run the <a href="#cache-failure-steps">cache
      failure steps</a>.</p>

     </li>

     <li><p>If the URL being processed was flagged as an "explicit
     entry" in <var title="">file list</var>, then categorize the
     entry as an <a href="#concept-appcache-explicit" title="concept-appcache-explicit">explicit
     entry</a>.</p></li>

     <li><p>If the URL being processed was flagged as a "fallback
     entry" in <var title="">file list</var>, then categorize the
     entry as a <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback
     entry</a>.</p></li>

     <li><p>If the URL being processed was flagged as an "master
     entry" in <var title="">file list</var>, then categorize the
     entry as a <a href="#concept-appcache-master" title="concept-appcache-master">master
     entry</a>.</p></li>

     <li><p>As an optimization, if the resource is an HTML or XML file
     whose root element is an <code><a href="the-html-element.html#the-html-element">html</a></code> element with a <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code> attribute whose value
     doesn't match the manifest URL of the application cache being
     processed, then the user agent should mark the entry as being
     <a href="#concept-appcache-foreign" title="concept-appcache-foreign">foreign</a>.</p>

    </li></ol></li>

   <li><p>For each <a href="#cache-host">cache host</a> associated with an
   <a href="#application-cache">application cache</a> in <var title="">cache group</var>,
   <a href="#queue-a-post-load-task">queue a post-load task</a> to fire an event with the name
   <code title="event-appcache-progress"><a href="#event-appcache-progress">progress</a></code>, which does
   not bubble, which is cancelable, and which uses the
   <code>ProgressEvent</code> interface, at the
   <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the <a href="#cache-host">cache
   host</a>. The <code title="dom-ProgressEvents-lengthComputable">lengthComputable</code>
   attribute must be set to true, the <code title="dom-ProgressEvents-total">total</code> and the <code title="dom-ProgressEvents-loaded">loaded</code> attributes must be
   set to the number of files in <var title="">file list</var>. The
   default action of these events must be, if the user agent
   <a href="#shows-caching-progress">shows caching progress</a>, the display of some sort of
   user interface indicating to the user that all the files have been
   downloaded. <a href="#refsPROGRESS">[PROGRESS]</a></p></li>

   <li><p>Store the list of <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespaces</a>,
   and the URLs of the <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback entries</a> that they
   map to, in <var title="">new cache</var>.</p></li>

   <li><p>Store the URLs that form the new <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online whitelist</a> in
   <var title="">new cache</var>.</p></li>

   <li><p>Store the value of the new <a href="#concept-appcache-onlinewhitelist-wildcard" title="concept-appcache-onlinewhitelist-wildcard">online whitelist
   wildcard flag</a> in <var title="">new cache</var>.</p></li>

   <li><p>Store the value of the new <a href="#concept-appcache-mode" title="concept-appcache-mode">cache mode flag</a> in <var title="">new cache</var>.</p></li>

   <li>

    <p>For each entry in <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
    entries</a>, wait for the resource for this entry to have
    either completely downloaded or failed.</p>

    <p>If the download failed (e.g. the server returns a 4xx or 5xx
    response <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or
    equivalent</a>, or there is a DNS error, the connection times
    out, or the user cancels the download), or if the resource is
    labeled with the "no-store" cache directive, then run these
    substeps:</p>

    <ol><li><p>Unassociate the <code><a href="dom.html#document">Document</a></code> for this entry from
     <var title="">new cache</var>.</p></li>

     <li><p><a href="#queue-a-post-load-task">Queue a post-load task</a> to <a href="#fire-a-simple-event">fire a simple
     event</a> that is cancelable named <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code> at the
     <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the
     <code><a href="dom.html#document">Document</a></code> for this entry, if there still is one. The
     default action of this event must be, if the user agent
     <a href="#shows-caching-progress">shows caching progress</a>, the display of some sort of
     user interface indicating to the user that the user agent failed
     to save the application for offline use.</p>

     </li><li>

      <p>If this is a <a href="#concept-appcache-cache" title="concept-appcache-cache">cache
      attempt</a> and this entry is the last entry in <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
      entries</a>, then run these further substeps:</p>

      <ol><li><p>Discard <var title="">cache group</var> and its only
       <a href="#application-cache">application cache</a>, <var title="">new
       cache</var>.</p>

       </li><li><p>If appropriate, remove any user interface indicating
       that an update for this cache is in progress.</p></li>

       <li><p>Abort the <a href="#application-cache-download-process">application cache download
       process</a>.</p></li>

      </ol></li>

     <li><p>Otherwise, remove this entry from <var title="">cache
     group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list
     of pending master entries</a>.</p></li>

    </ol><p>Otherwise, store the resource for this entry in <var title="">new cache</var>, if it isn't already there, and
    categorize its entry as a <a href="#concept-appcache-master" title="concept-appcache-master">master entry</a>.</p>

   </li>

   <li>

    <p><a href="urls.html#fetch">Fetch</a><!--FETCH--> the resource from <var title="">manifest URL</var> again, with the <i>synchronous
    flag</i> set, and let <var title="">second manifest</var> be that
    resource. HTTP caching semantics should again be honored for this
    request.</p> <!-- http-origin privacy sensitive, though it doesn't
    matter, since this can never be cross-origin -->

    <p class="note">Since caching can be honored, authors are
    encouraged to avoid setting the cache headers on the manifest in
    such a way that the user agent would simply not contact the
    network for this second request; otherwise, the user agent would
    not notice if the cache had changed during the cache update
    process.</p>

   </li>

   <li>

    <p>If the previous step failed for any reason, or if the fetching
    attempt involved a redirect, or if <var title="">second
    manifest</var> and <var title="">manifest</var> are not
    byte-for-byte identical, then schedule a rerun of the entire
    algorithm with the same parameters after a short delay, and run
    the <a href="#cache-failure-steps">cache failure steps</a>.</p>

   </li>

   <li>

    <p>Otherwise, store <var title="">manifest</var> in <var title="">new cache</var>, if it's not there already, and
    categorize its entry as <a href="#concept-appcache-manifest" title="concept-appcache-manifest">the manifest</a>.</p>

   </li>

   <li><p>Set the <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a> of
   <var title="">new cache</var> to <i>complete</i>.</p></li>

   <li><p>Let <var title="">task list</var> be an empty list of <a href="#concept-task" title="concept-task">tasks</a>.</p>

   </li><li>

    <p>If this is a <a href="#concept-appcache-cache" title="concept-appcache-cache">cache
    attempt</a>, then for each <a href="#cache-host">cache host</a> associated
    with an <a href="#application-cache">application cache</a> in <var title="">cache
    group</var>, create a <a href="#concept-task" title="concept-task">task</a> to
    <a href="#fire-a-simple-event">fire a simple event</a> that is cancelable named <code title="event-appcache-cached"><a href="#event-appcache-cached">cached</a></code> at the
    <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the <a href="#cache-host">cache
    host</a>, and append it to <var title="">task list</var>. The
    default action of these events must be, if the user agent
    <a href="#shows-caching-progress">shows caching progress</a>, the display of some sort of
    user interface indicating to the user that the application has
    been cached and that they can now use it offline.</p>

    <p>Otherwise, it is an <a href="#concept-appcache-upgrade" title="concept-appcache-upgrade">upgrade attempt</a>. For each
    <a href="#cache-host">cache host</a> associated with an <a href="#application-cache">application
    cache</a> in <var title="">cache group</var>, create a <a href="#concept-task" title="concept-task">task</a> to <a href="#fire-a-simple-event">fire a simple
    event</a> that is cancelable named <code title="event-appcache-updateready"><a href="#event-appcache-updateready">updateready</a></code> at the
    <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the <a href="#cache-host">cache
    host</a>, and append it to <var title="">task list</var>. The
    default action of these events must be, if the user agent
    <a href="#shows-caching-progress">shows caching progress</a>, the display of some sort of
    user interface indicating to the user that a new version is
    available and that they can activate it by reloading the page.</p>

   </li>

   <li><p>If appropriate, remove any user interface indicating that
   an update for this cache is in progress.</p></li>

   <li><p>Set the <a href="#concept-appcache-status" title="concept-appcache-status">update
   status</a> of <var title="">cache group</var> to
   <i>idle</i>.</p></li>

   <li><p>For each <a href="#concept-task" title="concept-task">task</a> in <var title="">task list</var>, <a href="#queue-a-post-load-task" title="queue a post-load
   task">queue that task as a post-load task</a>.</p></li>

  </ol><p>The <dfn id="cache-failure-steps">cache failure steps</dfn> are as follows:</p>

  <ol><li><p>Let <var title="">task list</var> be an empty list of <a href="#concept-task" title="concept-task">tasks</a>.</p>

   </li><li>

    <p>For each entry in <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
    entries</a>, run the following further substeps. These steps
    may be run in parallel for two or more entries at a time.</p>

    <ol><li><p>Wait for the resource for this entry to have either
     completely downloaded or failed.</p>

     </li><li><p>Unassociate the <code><a href="dom.html#document">Document</a></code> for this entry from
     its <a href="#application-cache">application cache</a>, if it has one.</p></li>

     <li><p>Create a <a href="#concept-task" title="concept-task">task</a> to
     <a href="#fire-a-simple-event">fire a simple event</a> that is cancelable named <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code> at the
     <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the
     <code><a href="dom.html#document">Document</a></code> for this entry, if there still is one, and
     append it to <var title="">task list</var>. The default action of
     these events must be, if the user agent <a href="#shows-caching-progress">shows caching
     progress</a>, the display of some sort of user interface
     indicating to the user that the user agent failed to save the
     application for offline use.</p>

    </li></ol></li>

   <li><p>For each <a href="#cache-host">cache host</a> still associated with an
   <a href="#application-cache">application cache</a> in <var title="">cache group</var>,
   create a <a href="#concept-task" title="concept-task">task</a> to <a href="#fire-a-simple-event">fire a
   simple event</a> that is cancelable named <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code> at the
   <code><a href="#applicationcache">ApplicationCache</a></code> singleton of the <a href="#cache-host">cache
   host</a>, and append it to <var title="">task list</var>. The
   default action of these events must be, if the user agent
   <a href="#shows-caching-progress">shows caching progress</a>, the display of some sort of
   user interface indicating to the user that the user agent failed to
   save the application for offline use.</p></li>

   <li><p>Empty <var title="">cache group</var>'s <a href="#concept-appcache-pending-masters" title="concept-appcache-pending-masters">list of pending master
   entries</a>.</p></li>

   <li><p>If <var title="">cache group</var> has an <a href="#application-cache">application
   cache</a> whose <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a> is
   <i>incomplete</i>, then discard that <a href="#application-cache">application
   cache</a>.</p>

   </li><li><p>If appropriate, remove any user interface indicating that an
   update for this cache is in progress.</p></li>

   <li><p>Let the <a href="#concept-appcache-status" title="concept-appcache-status">status</a>
   of <var title="">cache group</var> be <i>idle</i>.</p></li>

   <li><p>If this was a <a href="#concept-appcache-cache" title="concept-appcache-cache">cache
   attempt</a>, discard <var title="">cache group</var>
   altogether.</p>

   </li><li><p>For each <a href="#concept-task" title="concept-task">task</a> in <var title="">task list</var>, <a href="#queue-a-post-load-task" title="queue a post-load
   task">queue that task as a post-load task</a>.</p></li>

   <li><p>Abort the <a href="#application-cache-download-process">application cache download
   process</a>.</p></li>

  </ol><p>Attempts to <a href="urls.html#fetch">fetch</a> resources as part of the
  <a href="#application-cache-download-process">application cache download process</a> may be done with
  cache-defeating semantics, to avoid problems with stale or
  inconsistent intermediary caches.</p>

  <hr><p>User agents may invoke the <a href="#application-cache-download-process">application cache download
  process</a>, in the background, for any <a href="#application-cache-group">application cache
  group</a>, at any time (with no <a href="#cache-host">cache host</a>). This
  allows user agents to keep caches primed and to update caches even
  before the user visits a site.</p>

  <hr><p>Each <code><a href="dom.html#document">Document</a></code> has a list of <dfn id="pending-application-cache-download-process-tasks">pending application
  cache download process tasks</dfn> that is used to delay events
  fired by the algorithm above until the document's <code title="event-load">load</code> event has fired. When the
  <code><a href="dom.html#document">Document</a></code> is created, the list must be empty.</p>

  <p>When the steps above say to <dfn id="queue-a-post-load-task">queue a post-load task</dfn>
  <var title="">task</var>, where <var title="">task</var> is a <a href="#concept-task" title="concept-task">task</a> that dispatches an event on a
  target <code><a href="#applicationcache">ApplicationCache</a></code> object <var title="">target</var>, the user agent must run the appropriate steps
  from the following list:</p>

  <dl><dt>If <var title="">target</var>'s <code><a href="dom.html#document">Document</a></code> is
   <a href="#ready-for-post-load-tasks">ready for post-load tasks</a></dt>

   <dd><p><a href="#queue-a-task" title="queue a task">Queue</a> the task <var title="">task</var>.</p></dd>

   <dt>Otherwise</dt>

   <dd><p>Add <var title="">task</var> to <var title="">target</var>'s
   <code><a href="dom.html#document">Document</a></code>'s list of <a href="#pending-application-cache-download-process-tasks">pending application cache
   download process tasks</a>.</p></dd>

  </dl><p>The <a href="#task-source">task source</a> for these <a href="#concept-task" title="concept-task">tasks</a> is the <a href="#networking-task-source">networking task
  source</a>.</p>




  <h4 id="the-application-cache-selection-algorithm"><span class="secno">5.7.5 </span>The application cache selection algorithm</h4>

  <p>When the <dfn id="concept-appcache-init" title="concept-appcache-init">application cache
  selection algorithm</dfn> algorithm is invoked with a
  <code><a href="dom.html#document">Document</a></code> <var title="">document</var> and optionally a
  manifest <a href="urls.html#url">URL</a> <var title="">manifest URL</var>, the user
  agent must run the first applicable set of steps from the following
  list:</p>

  <dl class="switch"><dt>If there is a <var title="">manifest URL</var>, and <var title="">document</var> was loaded from an <a href="#application-cache">application
   cache</a>, and the URL of the <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a> of that cache's
   <a href="#application-cache-group">application cache group</a> is <em>not</em> the same as
   <var title="">manifest URL</var></dt>

   <dd>

    <p>Mark the entry for the resource from which <var title="">document</var> was taken in the <a href="#application-cache">application
    cache</a> from which it was loaded as <a href="#concept-appcache-foreign" title="concept-appcache-foreign">foreign</a>.</p>

    <p>Restart the current navigation from the top of the <a href="#navigate" title="navigate">navigation algorithm</a>, undoing any changes
    that were made as part of the initial load (changes can be avoided
    by ensuring that the step to <a href="#update-the-session-history-with-the-new-page">update the session history with
    the new page</a> is only ever completed <em>after</em> this
    <a href="#concept-appcache-init" title="concept-appcache-init">application cache selection
    algorithm</a> is run, though this is not required).</p>

    <p class="note">The navigation will not result in the same
    resource being loaded, because "foreign" entries are never picked
    during navigation.</p>

    <p>User agents may notify the user of the inconsistency between
    the cache manifest and the document's own metadata, to aid in
    application development.</p>

   </dd>


   <dt>If <var title="">document</var> was loaded from an
   <a href="#application-cache">application cache</a>, and that <a href="#application-cache">application
   cache</a> still exists (it is not now <a href="#concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</a>)<!--[redundant],
   and either there is no <var title="">manifest URL</var>, or the URL
   of the <span title="concept-appcache-manifest">manifest</span> of
   the cache's <span>application cache group</span> is the same as
   <var title="">manifest URL</var>--></dt>

   <dd>

    <p>Associate <var title="">document</var> with the
    <a href="#application-cache">application cache</a> from which it was loaded. Invoke,
    in the background, the <a href="#application-cache-download-process">application cache download
    process</a> for that <a href="#application-cache">application cache</a>'s
    <a href="#application-cache-group">application cache group</a>, with <var title="">document</var> as the <a href="#cache-host">cache host</a>.</p>

   </dd>


   <dt>If <var title="">document</var> <!--[redundant] was not loaded
   from an <span>application cache</span>, but it--> was loaded using
   HTTP GET <a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">or
   equivalent</a>, and, there is a <var title="">manifest
   URL</var>, and <var title="">manifest URL</var> has the <a href="#same-origin">same
   origin</a> as <var title="">document</var></dt>

   <dd>

    <p>Invoke, in the background, the <a href="#application-cache-download-process">application cache download
    process</a> for <var title="">manifest URL</var>, with <var title="">document</var> as the <a href="#cache-host">cache host</a> and with
    the resource from which <var title="">document</var> was parsed as
    the <a href="#concept-appcache-master" title="concept-appcache-master">master</a>
    resource.</p>

    <p>If there are <a href="#relevant-application-cache" title="relevant application cache">relevant
    application caches</a> that are identified by a URL with the
    <a href="#same-origin">same origin</a> as the URL of <var title="">document</var>, and that have this URL as one of their
    entries, excluding entries marked as <a href="#concept-appcache-foreign" title="concept-appcache-foreign">foreign</a>, then the user
    agent should use the <a href="#concept-appcache-selection" title="concept-appcache-selection">most
    appropriate application cache</a> of those that match as an
    HTTP cache for any subresource loads. User agents may also have
    other caches in place that are also honored.</p>

   </dd>


   <dt>Otherwise</dt> <!-- not from cache and either no <var
   title="">manifest URL</var>, or non-GET, or wrong-origin manifest -->

   <dd>

    <p>The <code><a href="dom.html#document">Document</a></code> is not associated with any
    <a href="#application-cache">application cache</a>.</p>

    <p>If there was a <var title="">manifest URL</var>, the user agent
    may report to the user that it was ignored, to aid in application
    development.</p>

   </dd>

  </dl><h4 id="changesToNetworkingModel"><span class="secno">5.7.6 </span>Changes to the networking model</h4>

  <p>When a <a href="#cache-host">cache host</a> is associated with an
  <a href="#application-cache">application cache</a> whose <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a> is
  <i>complete</i>, any and all loads for resources related to that
  <a href="#cache-host">cache host</a> other than those for <a href="#child-browsing-context" title="child
  browsing context">child browsing contexts</a> must go through the
  following steps instead of immediately invoking the mechanisms
  appropriate to that resource's scheme:</p>

  <ol><!--FETCH--><li><p>If the resource is not to be fetched using the HTTP GET
   mechanism <a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">or
   equivalent</a>, or if its <a href="urls.html#url">URL</a> has a different <a href="urls.html#url-scheme" title="url-scheme">&lt;scheme&gt;</a> component than the
   <a href="#application-cache">application cache</a>'s <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a>, then
   <a href="urls.html#fetch">fetch</a> the resource normally and abort these
   steps.</p></li>

   <li><p>If the resource's URL is <a href="#concept-appcache-master" title="concept-appcache-master">a master entry</a>, <a href="#concept-appcache-manifest" title="concept-appcache-manifest">the manifest</a>, <a href="#concept-appcache-explicit" title="concept-appcache-explicit">an explicit entry</a>, or
   <a href="#concept-appcache-fallback" title="concept-appcache-fallback">a fallback entry</a> in
   the <a href="#application-cache">application cache</a>, then get the resource from the
   cache (instead of fetching it), and abort these steps.</p></li>

   <li><p>If there is an entry in the <a href="#application-cache">application cache</a>'s
   <a href="#concept-appcache-onlinewhitelist" title="concept-appcache-onlinewhitelist">online
   whitelist</a> that has the <a href="#same-origin">same origin</a> as the
   resource's URL and that is a <a href="infrastructure.html#prefix-match">prefix match</a> for the
   resource's URL, then <a href="urls.html#fetch">fetch</a> the resource normally and
   abort these steps.</p></li>

   <li>

    <p>If the resource's URL has the <a href="#same-origin">same origin</a> as the
    manifest's URL, and there is a <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespace</a>
    <var title="">f</var> in the <a href="#application-cache">application cache</a> that
    is a <a href="infrastructure.html#prefix-match">prefix match</a> for the resource's URL, then:</p>

    <p><a href="urls.html#fetch">Fetch</a> the resource normally. If this results in a
    redirect to a resource with another <a href="#origin-0">origin</a>
    (indicative of a captive portal), or a 4xx or 5xx status code
    <a href="urls.html#concept-http-equivalent-codes" title="concept-http-equivalent-codes">or equivalent</a>,
    or if there were network errors (but not if the user canceled the
    download), then instead get, from the cache, the resource of the
    <a href="#concept-appcache-fallback" title="concept-appcache-fallback">fallback entry</a>
    corresponding to the <a href="#concept-appcache-fallback-ns" title="concept-appcache-fallback-ns">fallback namespace</a>
    <var title="">f</var>. Abort these steps.</p>

   </li>

   <li><p>If the <a href="#application-cache">application cache</a>'s <a href="#concept-appcache-onlinewhitelist-wildcard" title="concept-appcache-onlinewhitelist-wildcard">online whitelist
   wildcard flag</a> is <i title="">open</i>, then
   <a href="urls.html#fetch">fetch</a> the resource normally and abort these
   steps.</p></li>

   <li><p>Fail the resource load as if there had been a generic
   network error.</p></li>

  </ol><p class="note">The above algorithm ensures that so long as the
  <a href="#concept-appcache-onlinewhitelist-wildcard" title="concept-appcache-onlinewhitelist-wildcard">online
  whitelist wildcard flag</a> is <i title="">blocking</i>,
  resources that are not present in the <a href="#concept-appcache-manifest" title="concept-appcache-manifest">manifest</a> will always fail
  to load (at least, after the <a href="#application-cache">application cache</a> has been
  primed the first time), making the testing of offline applications
  simpler.</p>

  </div>


  <div class="impl">

  <h4 id="expiring-application-caches"><span class="secno">5.7.7 </span>Expiring application caches</h4>

  <p>As a general rule, user agents should not expire application
  caches, except on request from the user, or after having been left
  unused for an extended period of time.</p>

  <p>Application caches and cookies have similar implications with
  respect to privacy (e.g. if the site can identify the user when
  providing the cache, it can store data in the cache that can be used
  for cookie resurrection). Implementors are therefore encouraged to
  expose application caches in a manner related to HTTP cookies,
  allowing caches to be expunged together with cookies and other
  origin-specific data.</p>

  <p class="example">For example, a user agent could have a "delete
  site-specific data" feature that clears all cookies, application
  caches, local storage, databases, etc, from an origin all at
  once.</p>

  </div>


  <div class="impl">

  <h4 id="disk-space"><span class="secno">5.7.8 </span>Disk space</h4>

  <p>User agents should consider applying constraints on disk usage of
  <a href="#application-cache" title="application cache">application caches</a>, and care
  should be taken to ensure that the restrictions cannot be easily
  worked around using subdomains.</p>

  <p>User agents should allow users to see how much space each domain
  is using, and may offer the user the ability to delete specific
  <a href="#application-cache" title="application cache">application caches</a>.</p>

  <p class="note">How quotas are presented to the user is not defined
  by this specification. User agents are encouraged to provide
  features such as allowing a user to indicate that certain sites are
  trusted to use more than the default quota, e.g. by asynchronously
  presenting a user interface while a cache is being updated, or by
  having an explicit whitelist in the user agent's configuration
  interface.</p>

  </div>



  <h4 id="application-cache-api"><span class="secno">5.7.9 </span>Application cache API</h4>

  <pre class="idl">interface <dfn id="applicationcache">ApplicationCache</dfn> : <a href="infrastructure.html#eventtarget">EventTarget</a> {

  // <a href="#concept-appcache-status" title="concept-appcache-status">update status</a>
  const unsigned short <a href="#dom-appcache-uncached" title="dom-appcache-UNCACHED">UNCACHED</a> = 0;
  const unsigned short <a href="#dom-appcache-idle" title="dom-appcache-IDLE">IDLE</a> = 1;
  const unsigned short <a href="#dom-appcache-checking" title="dom-appcache-CHECKING">CHECKING</a> = 2;
  const unsigned short <a href="#dom-appcache-downloading" title="dom-appcache-DOWNLOADING">DOWNLOADING</a> = 3;
  const unsigned short <a href="#dom-appcache-updateready" title="dom-appcache-UPDATEREADY">UPDATEREADY</a> = 4;
  const unsigned short <a href="#dom-appcache-obsolete" title="dom-appcache-OBSOLETE">OBSOLETE</a> = 5;
  readonly attribute unsigned short <a href="#dom-appcache-status" title="dom-appcache-status">status</a>;

  // updates
  void <a href="#dom-appcache-update" title="dom-appcache-update">update</a>();
  void <a href="#dom-appcache-abort" title="dom-appcache-abort">abort</a>();
  void <a href="#dom-appcache-swapcache" title="dom-appcache-swapCache">swapCache</a>();

  // events
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-appcache-onchecking" title="handler-appcache-onchecking">onchecking</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-appcache-onerror" title="handler-appcache-onerror">onerror</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-appcache-onnoupdate" title="handler-appcache-onnoupdate">onnoupdate</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-appcache-ondownloading" title="handler-appcache-ondownloading">ondownloading</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-appcache-onprogress" title="handler-appcache-onprogress">onprogress</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-appcache-onupdateready" title="handler-appcache-onupdateready">onupdateready</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-appcache-oncached" title="handler-appcache-oncached">oncached</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-appcache-onobsolete" title="handler-appcache-onobsolete">onobsolete</a>;
};</pre>

  <dl class="domintro"><dt><var title="">cache</var> = <var title="">window</var> . <code title="dom-applicationCache"><a href="#dom-applicationcache">applicationCache</a></code></dt>
   <dd>

    <p>(In a window.) Returns the <code><a href="#applicationcache">ApplicationCache</a></code> object that applies to the <a href="#active-document">active document</a> of that <code><a href="#window">Window</a></code>.</p>

   </dd>

   <dt><var title="">cache</var> = <var title="">self</var> . <code title="dom-applicationCache"><a href="#dom-applicationcache">applicationCache</a></code></dt>
   <dd>

    <p>(In a shared worker.) Returns the <code><a href="#applicationcache">ApplicationCache</a></code> object that applies to the current shared worker.
        <a href="#refsWEBWORKERS">[WEBWORKERS]</a>
        </p>

   </dd>

   <dt><var title="">cache</var> . <code title="dom-appcache-status"><a href="#dom-appcache-status">status</a></code></dt>
   <dd>

    <p>Returns the current status of the application cache, as given by the constants defined below.</p>

   </dd>

   <dt><var title="">cache</var> . <code title="dom-appcache-update"><a href="#dom-appcache-update">update</a></code>()</dt>
   <dd>

    <p>Invokes the <a href="#application-cache-download-process">application cache download process</a>.</p>

    <p>Throws an <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception if there is no application cache to update.</p>

    <p>Calling this method is not usually necessary, as user agents
    will generally take care of updating <a href="#application-cache" title="application
    cache">application caches</a> automatically.</p>

    <p>The method can be useful in situations such as long-lived
    applications. For example, a Web mail application might stay open
    in a browser tab for weeks at a time. Such an application could
    want to test for updates each day.</p>

   </dd>

   <dt><var title="">cache</var> . <code title="dom-appcache-abort"><a href="#dom-appcache-abort">abort</a></code>()</dt>
   <dd>

    <p>Cancels the <a href="#application-cache-download-process">application cache download process</a>.</p>

    <p>This method is intended to be used by Web application showing
    their own caching progress UI, in case the user wants to stop the
    update (e.g. because bandwidth is limited).</p>

   </dd>

   <dt><var title="">cache</var> . <code title="dom-appcache-swapCache"><a href="#dom-appcache-swapcache">swapCache</a></code>()</dt>
   <dd>

    <p>Switches to the most recent application cache, if there is a
    newer one. If there isn't, throws an
    <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception.</p>

    <p>This does not cause previously-loaded resources to be reloaded;
    for example, images do not suddenly get reloaded and style sheets
    and scripts do not get reparsed or reevaluated. The only change is
    that subsequent requests for cached resources will obtain the
    newer copies.</p>

    <p>The <code title="event-appcache-updateready"><a href="#event-appcache-updateready">updateready</a></code>
    event will fire before this method can be called. Once it fires,
    the Web application can, at its leisure, call this method to
    switch the underlying cache to the one with the more recent
    updates. To make proper use of this, applications have to be able
    to bring the new features into play; for example, reloading
    scripts to enable new features.</p>

    <p>An easier alternative to <code title="dom-appcache-swapCache"><a href="#dom-appcache-swapcache">swapCache()</a></code> is just to
    reload the entire page at a time suitable for the user, using
    <code title="dom-location-reload"><a href="#dom-location-reload">location.reload()</a></code>.</p>

   </dd>

  </dl><div class="impl">

  <p>There is a one-to-one mapping from <a href="#cache-host" title="cache host">cache
  hosts</a> to <code><a href="#applicationcache">ApplicationCache</a></code> objects. The <dfn id="dom-applicationcache" title="dom-applicationCache"><code>applicationCache</code></dfn>
  attribute on <code><a href="#window">Window</a></code> objects must return the
  <code><a href="#applicationcache">ApplicationCache</a></code> object associated with the
  <code><a href="#window">Window</a></code> object's <a href="#active-document">active document</a>. The <dfn id="dom-sharedworkerglobalscope-applicationcache" title="dom-SharedWorkerGlobalScope-applicationCache"><code>applicationCache</code></dfn>
  attribute on <code>SharedWorkerGlobalScope</code> objects must
  return the <code><a href="#applicationcache">ApplicationCache</a></code> object associated with the
  worker.
    <a href="#refsWEBWORKERS">[WEBWORKERS]</a>
    </p>

  <p class="note">A <code><a href="#window">Window</a></code> or
  <code>SharedWorkerGlobalScope</code> object has an associated
  <code><a href="#applicationcache">ApplicationCache</a></code> object even if that <a href="#cache-host">cache
  host</a> has no actual <a href="#application-cache">application cache</a>.</p>

  <hr><p>The <dfn id="dom-appcache-status" title="dom-appcache-status"><code>status</code></dfn>
  attribute, on getting, must return the current state of the
  <a href="#application-cache">application cache</a> that the
  <code><a href="#applicationcache">ApplicationCache</a></code> object's <a href="#cache-host">cache host</a> is
  associated with, if any. This must be the appropriate value from the
  following list:</p>

  </div>

  <dl><dt><dfn id="dom-appcache-uncached" title="dom-appcache-UNCACHED"><code>UNCACHED</code></dfn>
   (numeric value 0)</dt>

   <dd><p>The <code><a href="#applicationcache">ApplicationCache</a></code> object's <a href="#cache-host">cache
   host</a> is not associated with an <a href="#application-cache">application
   cache</a> at this time.</p></dd>

   <dt><dfn id="dom-appcache-idle" title="dom-appcache-IDLE"><code>IDLE</code></dfn>
   (numeric value 1)</dt>

   <dd><p>The <code><a href="#applicationcache">ApplicationCache</a></code> object's <a href="#cache-host">cache
   host</a> is associated with an <a href="#application-cache">application cache</a>
   whose <a href="#application-cache-group">application cache group</a>'s <a href="#concept-appcache-status" title="concept-appcache-status">update status</a> is
   <i>idle</i>, and that <a href="#application-cache">application cache</a> is the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a> cache in its
   <a href="#application-cache-group">application cache group</a>, and the <a href="#application-cache-group">application
   cache group</a> is not marked as <a href="#concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</a>.</p></dd>

   <dt><dfn id="dom-appcache-checking" title="dom-appcache-CHECKING"><code>CHECKING</code></dfn>
   (numeric value 2)</dt>

   <dd><p>The <code><a href="#applicationcache">ApplicationCache</a></code> object's <a href="#cache-host">cache
   host</a> is associated with an <a href="#application-cache">application cache</a>
   whose <a href="#application-cache-group">application cache group</a>'s <a href="#concept-appcache-status" title="concept-appcache-status">update status</a> is
   <i>checking</i>.</p></dd>

   <dt><dfn id="dom-appcache-downloading" title="dom-appcache-DOWNLOADING"><code>DOWNLOADING</code></dfn>
   (numeric value 3)</dt>

   <dd><p>The <code><a href="#applicationcache">ApplicationCache</a></code> object's <a href="#cache-host">cache
   host</a> is associated with an <a href="#application-cache">application cache</a>
   whose <a href="#application-cache-group">application cache group</a>'s <a href="#concept-appcache-status" title="concept-appcache-status">update status</a> is
   <i>downloading</i>.</p></dd>

   <dt><dfn id="dom-appcache-updateready" title="dom-appcache-UPDATEREADY"><code>UPDATEREADY</code></dfn>
   (numeric value 4)</dt>

   <dd><p>The <code><a href="#applicationcache">ApplicationCache</a></code> object's <a href="#cache-host">cache
   host</a> is associated with an <a href="#application-cache">application cache</a>
   whose <a href="#application-cache-group">application cache group</a>'s <a href="#concept-appcache-status" title="concept-appcache-status">update status</a> is
   <i>idle</i>, and whose <a href="#application-cache-group">application cache group</a> is not
   marked as <a href="#concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</a>,
   but that <a href="#application-cache">application cache</a> is <em>not</em> the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a> cache in its
   group.</p></dd>

   <dt><dfn id="dom-appcache-obsolete" title="dom-appcache-OBSOLETE"><code>OBSOLETE</code></dfn>
   (numeric value 5)</dt>

   <dd><p>The <code><a href="#applicationcache">ApplicationCache</a></code> object's <a href="#cache-host">cache
   host</a> is associated with an <a href="#application-cache">application cache</a>
   whose <a href="#application-cache-group">application cache group</a> is marked as <a href="#concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</a>.</p></dd>

  </dl><div class="impl">

  <hr><p>If the <dfn id="dom-appcache-update" title="dom-appcache-update"><code>update()</code></dfn> method is
  invoked, the user agent must invoke the <a href="#application-cache-download-process">application cache
  download process</a>, in the background, for the
  <a href="#application-cache-group">application cache group</a> of the <a href="#application-cache">application
  cache</a> with which the <code><a href="#applicationcache">ApplicationCache</a></code> object's
  <a href="#cache-host">cache host</a> is associated, but without giving that
  <a href="#cache-host">cache host</a> to the algorithm. If there is no such
  <a href="#application-cache">application cache</a>, or if its <a href="#application-cache-group">application cache
  group</a> is marked as <a href="#concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</a>, then the method
  must throw an <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception instead.</p>

  <p>If the <dfn id="dom-appcache-abort" title="dom-appcache-abort"><code>abort()</code></dfn>
  method is invoked, the user agent must <dfn id="send-a-signal">send a signal</dfn> to
  the current <a href="#application-cache-download-process">application cache download process</a> for the
  <a href="#application-cache-group">application cache group</a> of the <a href="#application-cache">application
  cache</a> with which the <code><a href="#applicationcache">ApplicationCache</a></code> object's
  <a href="#cache-host">cache host</a> is associated, if any. If there is no such
  <a href="#application-cache">application cache</a>, or it does not have a current
  <a href="#application-cache-download-process">application cache download process</a>, then do
  nothing.</p>

  <p>If the <dfn id="dom-appcache-swapcache" title="dom-appcache-swapCache"><code>swapCache()</code></dfn> method
  is invoked, the user agent must run the following steps:

  </p><ol><li><p>Check that <code><a href="#applicationcache">ApplicationCache</a></code> object's
   <a href="#cache-host">cache host</a> is associated with an <a href="#application-cache">application
   cache</a>. If it is not, then throw an
   <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception and abort these
   steps.</p></li>

   <li><p>Let <var title="">cache</var> be the <a href="#application-cache">application
   cache</a> with which the <code><a href="#applicationcache">ApplicationCache</a></code> object's
   <a href="#cache-host">cache host</a> is associated. (By definition, this is the
   same as the one that was found in the previous step.)</p></li>

   <li><p>If <var title="">cache</var>'s <a href="#application-cache-group">application cache
   group</a> is marked as <a href="#concept-appcache-obsolete" title="concept-appcache-obsolete">obsolete</a>, then unassociate
   the <code><a href="#applicationcache">ApplicationCache</a></code> object's <a href="#cache-host">cache host</a>
   from <var title="">cache</var> and abort these steps. (Resources
   will now load from the network instead of the cache.)</p></li>

   <li><p>Check that there is an application cache in the same
   <a href="#application-cache-group">application cache group</a> as <var title="">cache</var>
   whose <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness
   flag</a> is <i>complete</i> and that is <a href="#concept-appcache-newer" title="concept-appcache-newer">newer</a> than <var title="">cache</var>. If there is not, then throw an
   <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception and abort these
   steps.</p></li>

   <li><p>Let <var title="">new cache</var> be the <a href="#concept-appcache-newer" title="concept-appcache-newer">newest</a> <a href="#application-cache">application
   cache</a> in the same <a href="#application-cache-group">application cache group</a> as
   <var title="">cache</var> whose <a href="#concept-appcache-completeness" title="concept-appcache-completeness">completeness flag</a> is
   <i>complete</i>.</p></li>

   <li><p>Unassociate the <code><a href="#applicationcache">ApplicationCache</a></code> object's
   <a href="#cache-host">cache host</a> from <var title="">cache</var> and instead
   associate it with <var title="">new cache</var>.</p></li>

  </ol><p>The following are the <a href="#event-handlers">event handlers</a> (and their
  corresponding <a href="#event-handler-event-type" title="event handler event type">event handler
  event types</a>) that must be supported, as IDL attributes, by
  all objects implementing the <code><a href="#applicationcache">ApplicationCache</a></code>
  interface:</p>

  <table><thead><tr><th><a href="#event-handlers" title="event handlers">Event handler</a> </th><th><a href="#event-handler-event-type">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-appcache-onchecking" title="handler-appcache-onchecking"><code>onchecking</code></dfn> </td><td> <code title="event-appcache-checking"><a href="#event-appcache-checking">checking</a></code>
    </td></tr><tr><td><dfn id="handler-appcache-onerror" title="handler-appcache-onerror"><code>onerror</code></dfn> </td><td> <code title="event-appcache-error"><a href="#event-appcache-error">error</a></code>
    </td></tr><tr><td><dfn id="handler-appcache-onnoupdate" title="handler-appcache-onnoupdate"><code>onnoupdate</code></dfn> </td><td> <code title="event-appcache-noupdate"><a href="#event-appcache-noupdate">noupdate</a></code>
    </td></tr><tr><td><dfn id="handler-appcache-ondownloading" title="handler-appcache-ondownloading"><code>ondownloading</code></dfn> </td><td> <code title="event-appcache-downloading"><a href="#event-appcache-downloading">downloading</a></code>
    </td></tr><tr><td><dfn id="handler-appcache-onprogress" title="handler-appcache-onprogress"><code>onprogress</code></dfn> </td><td> <code title="event-appcache-progress"><a href="#event-appcache-progress">progress</a></code>
    </td></tr><tr><td><dfn id="handler-appcache-onupdateready" title="handler-appcache-onupdateready"><code>onupdateready</code></dfn> </td><td> <code title="event-appcache-updateready"><a href="#event-appcache-updateready">updateready</a></code>
    </td></tr><tr><td><dfn id="handler-appcache-oncached" title="handler-appcache-oncached"><code>oncached</code></dfn> </td><td> <code title="event-appcache-cached"><a href="#event-appcache-cached">cached</a></code>
    </td></tr><tr><td><dfn id="handler-appcache-onobsolete" title="handler-appcache-onobsolete"><code>onobsolete</code></dfn> </td><td> <code title="event-appcache-obsolete"><a href="#event-appcache-obsolete">obsolete</a></code>
  </td></tr></tbody></table></div>


  <h4 id="browser-state"><span class="secno">5.7.10 </span>Browser state</h4>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatoronline">NavigatorOnLine</dfn> {
  readonly attribute boolean <a href="#dom-navigator-online" title="dom-navigator-onLine">onLine</a>;
};</pre>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-onLine"><a href="#dom-navigator-online">onLine</a></code></dt>

   <dd>

    <p>Returns false if the user agent is definitely offline
    (disconnected from the network). Returns true if the user agent
    might be online.</p>

    <p>The events <code title="event-online"><a href="#event-online">online</a></code> and <code title="event-offline"><a href="#event-offline">offline</a></code> are fired when the value of
    this attribute changes.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-navigator-online" title="dom-navigator-onLine"><code>navigator.onLine</code></dfn>
  attribute must return false if the user agent will not contact the
  network when the user follows links or when a script requests a
  remote page (or knows that such an attempt would fail), and must
  return true otherwise.</p>

  <p>When the value that would be returned by the <code title="dom-navigator-onLine"><a href="#dom-navigator-online">navigator.onLine</a></code> attribute of a
  <code><a href="#window">Window</a></code> or <code>WorkerGlobalScope</code> changes from
  true to false, the user agent must <a href="#queue-a-task">queue a task</a> to
  <a href="#fire-a-simple-event">fire a simple event</a> named <dfn id="event-offline" title="event-offline"><code>offline</code></dfn> at the
  <code><a href="#window">Window</a></code> or <code>WorkerGlobalScope</code> object.</p>

  <p>On the other hand, when the value that would be returned by the
  <code title="dom-navigator-onLine"><a href="#dom-navigator-online">navigator.onLine</a></code> attribute
  of a <code><a href="#window">Window</a></code> or <code>WorkerGlobalScope</code> changes
  from false to true, the user agent must <a href="#queue-a-task">queue a task</a> to
  <a href="#fire-a-simple-event">fire a simple event</a> named <dfn id="event-online" title="event-online"><code>online</code></dfn> at the
  <code><a href="#window">Window</a></code> or <code>WorkerGlobalScope</code> object.</p>

  <p>The <a href="#task-source">task source</a> for these <a href="#concept-task" title="concept-task">tasks</a> is the <a href="#networking-task-source">networking task
  source</a>.</p>

  </div>

  <p class="note">This attribute is inherently unreliable. A computer
  can be connected to a network without having Internet access.</p>

  <div class="example">

   <p>In this example, an indicator is updated as the browser goes
   online and offline.</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Online status&lt;/title&gt;
  &lt;script&gt;
   function updateIndicator() {
     document.getElementById('indicator').textContent = navigator.onLine ? 'online' : 'offline';
   }
  &lt;/script&gt;
 &lt;/head&gt;
 &lt;body onload="updateIndicator()" ononline="updateIndicator()" onoffline="updateIndicator()"&gt;
  &lt;p&gt;The network is: &lt;span id="indicator"&gt;(state unknown)&lt;/span&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>

<!--TOPIC:HTML-->

  <h2 id="webappapis"><span class="secno">6 </span>Web application APIs</h2>

  <h3 id="scripting"><span class="secno">6.1 </span>Scripting</h3>

  <h4 id="introduction-5"><span class="secno">6.1.1 </span>Introduction</h4>

  <p>Various mechanisms can cause author-provided executable code to
  run in the context of a document. These mechanisms include, but are
  probably not limited to:</p>

  <ul><li>Processing of <code><a href="the-script-element.html#the-script-element">script</a></code> elements.</li>

   <li>Processing of inline <code title="javascript
   protocol"><a href="#javascript-protocol">javascript:</a></code> URLs (e.g. the <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code> attribute of <code><a href="the-img-element.html#the-img-element">img</a></code>
   elements, or an <code title="">@import</code> rule in a CSS
   <code><a href="the-style-element.html#the-style-element">style</a></code> element block).</li>

   <li>Event handlers, whether registered through the DOM using <code title="">addEventListener()</code>, by explicit <a href="#event-handler-content-attributes">event handler
   content attributes</a>, by <a href="#event-handler-idl-attributes">event handler IDL
   attributes</a>, or otherwise.</li>

   <li>Processing of technologies like XBL or SVG that have their own
   scripting features.</li>

  </ul><div class="impl">

  <h4 id="enabling-and-disabling-scripting"><span class="secno">6.1.2 </span>Enabling and disabling scripting</h4>

  <p><dfn id="concept-bc-script" title="concept-bc-script">Scripting is enabled</dfn> in a
  <em><a href="#browsing-context"><span>browsing context</span></a></em> when all of the
  following conditions are true:</p>

  <ul><li>The user agent supports scripting.</li>

   <li>The user has not disabled scripting for this <a href="#browsing-context">browsing
   context</a> at this time. (User agents may provide users with
   the option to disable scripting globally, or in a finer-grained
   manner, e.g. on a per-origin basis.)
   <!--INSERT FINGERPRINT-->
   </li>

   <li id="sandboxScriptBlocked">The <a href="#browsing-context">browsing context</a>'s
   <a href="#active-document">active document</a>'s <a href="#active-sandboxing-flag-set">active sandboxing flag
   set</a> does not have its <a href="#sandboxed-scripts-browsing-context-flag">sandboxed scripts browsing
   context flag</a> set.</li>

  </ul><p><dfn id="concept-bc-noscript" title="concept-bc-noscript">Scripting is disabled</dfn> in a
  <a href="#browsing-context">browsing context</a> when any of the above conditions are
  false (i.e. when scripting is not <a href="#concept-bc-script" title="concept-bc-script">enabled</a>).</p>

  <hr><p><dfn id="concept-n-script" title="concept-n-script">Scripting is enabled</dfn> for a
  <em><a href="infrastructure.html#node">node</a></em> if the <code><a href="dom.html#document">Document</a></code> object of the node (the
  node itself, if it is itself a <code><a href="dom.html#document">Document</a></code> object) has an
  associated <a href="#browsing-context">browsing context</a>, and <a href="#concept-bc-script" title="concept-bc-script">scripting is enabled</a> in that
  <a href="#browsing-context">browsing context</a>.</p>

  <p><dfn id="concept-n-noscript" title="concept-n-noscript">Scripting is disabled</dfn> for a
  node if there is no such <a href="#browsing-context">browsing context</a>, or if <a href="#concept-bc-noscript" title="concept-bc-noscript">scripting is disabled</a> in that
  <a href="#browsing-context">browsing context</a>.</p>

  </div>


  <div class="impl">

  <!-- SCRIPT EXEC (marks areas related to creation of scripts) -->
  <h4 id="processing-model-2"><span class="secno">6.1.3 </span>Processing model</h4>

  <h5 id="definitions-0"><span class="secno">6.1.3.1 </span>Definitions</h5>

  <p>This specification describes three kinds of <a href="infrastructure.html#javascript-global-environment" title="JavaScript global environment">JavaScript global
  environments</a>: the <dfn id="document-environment">document environment</dfn>, the
  <dfn id="dedicated-worker-environment">dedicated worker environment</dfn>, and the <dfn id="shared-worker-environment">shared worker
  environment</dfn>. The <a href="#dedicated-worker-environment">dedicated worker environment</a> and
  the <a href="#shared-worker-environment">shared worker environment</a> are both types of <dfn id="worker-environment" title="worker environment">worker environments</dfn>.</p>

  <p>Except where otherwise specified, a <a href="infrastructure.html#javascript-global-environment">JavaScript global
  environment</a> is a <a href="#document-environment">document environment</a>.</p> <!--
  note that we never actually say where one of these is created... -->

  <hr><p>A <dfn id="concept-script" title="concept-script">script</dfn> has:</p>

  <dl><dt>A <dfn id="script-execution-environment">script execution environment</dfn></dt>

   <dd>

    <p>The characteristics of the script execution environment depend
    on the language, and are not defined by this specification.</p>

    <p class="example">In JavaScript, the script execution environment
    consists of the interpreter, the stack of <i>execution
    contexts</i>, the <i>global code</i> and <i>function code</i> and
    the <code>Function</code> objects resulting, and so forth.</p>

   </dd>

   <dt>A <dfn id="list-of-code-entry-points">list of code entry-points</dfn></dt>

   <dd>

    <p>Each code entry-point represents a block of executable code
    that the script exposes to other scripts and to the user
    agent.</p>

    <p class="example">Each <code>Function</code> object in a
    JavaScript <a href="#script-execution-environment">script execution environment</a> has a
    corresponding code entry-point, for instance.</p>

    <p>The main program code of the script, if any, is the
    <dfn id="initial-code-entry-point"><i>initial code entry-point</i></dfn>. Typically, the code
    corresponding to this entry-point is executed immediately after
    the script is parsed.</p>

    <p class="example">In JavaScript, this corresponds to the
    execution context of the global code.</p>

   </dd>

   <dt>A relationship with the <dfn id="script's-global-object">script's global object</dfn></dt>

   <dd>

    <p>An object that provides the APIs that the code can use.</p>

    <p class="example">This is typically a <code><a href="#window">Window</a></code>
    object. In JavaScript, this corresponds to the <i>global
    object</i>.</p>

    <p class="note">When a <a href="#script's-global-object">script's global object</a> is an
    empty object, it can't do anything that interacts with the
    environment.</p>

    <p>If the <a href="#script's-global-object">script's global object</a> is a
    <code><a href="#window">Window</a></code> object, then in JavaScript, the ThisBinding of
    the global execution context for this script must be the
    <code><a href="#window">Window</a></code> object's <code><a href="#windowproxy">WindowProxy</a></code> object,
    rather than the global object. <a href="#refsECMA262">[ECMA262]</a></p>

    <p class="note">This is a <a href="introduction.html#willful-violation">willful violation</a> of the
    JavaScript specification current at the time of writing
    (ECMAScript edition 5, as defined in section 10.4.1.1 Initial
    Global Execution Context, step 3). The JavaScript specification
    requires that the <code title="">this</code> keyword in the global
    scope return the global object, but this is not compatible with
    the security design prevalent in implementations as specified
    herein. <a href="#refsECMA262">[ECMA262]</a></p>

   </dd>

   <dt>A relationship with the <dfn id="script's-browsing-context">script's browsing context</dfn></dt>

   <dd>

    <p>A <a href="#browsing-context">browsing context</a> that is assigned responsibility
    for actions taken by the script.</p>

    <p class="example">When a script creates and <a href="#navigate" title="navigate">navigates</a> a new <a href="#top-level-browsing-context">top-level browsing
    context</a>, the <code title="dom-opener"><a href="#dom-opener">opener</a></code>
    attribute of the new <a href="#browsing-context">browsing context</a>'s
    <code><a href="#window">Window</a></code> object will be set to the <a href="#script's-browsing-context">script's
    browsing context</a>'s <code><a href="#windowproxy">WindowProxy</a></code> object.</p>

   </dd>

   <dt>A relationship with the <dfn id="script's-document">script's document</dfn></dt>

   <dd>

    <p>A <code><a href="dom.html#document">Document</a></code> that is assigned responsibility for
    actions taken by the script.</p>

    <p class="example">For example, the <a href="dom.html#the-document's-address" title="the document's
    address">address</a> of the <a href="#script's-document">script's document</a> is
    used to set the <a href="dom.html#the-document's-address" title="the document's
    address">address</a> of any <code><a href="dom.html#document">Document</a></code> elements
    created using <code title="dom-DOMImplementation-createDocument"><a href="infrastructure.html#dom-domimplementation-createdocument">createDocument()</a></code>.</p>

   </dd>

   <dt>The <dfn id="script's-referrer-source">script's referrer source</dfn></dt>

   <dd>

    <p>Either a <code><a href="dom.html#document">Document</a></code> (specifically, the
    <a href="#script's-document">script's document</a>), or a <a href="urls.html#url">URL</a>, which is
    used by some APIs to determine what value to use for the <code title="http-referer">Referer</code> (sic) header in calls to the
    <a href="urls.html#fetch" title="fetch">fetching</a> algorithm.</p>

   </dd>

   <dt>A <dfn id="script's-url-character-encoding" title="script's URL character encoding">URL character encoding</dfn></dt>

   <dd>

    <p>A character encoding, set when the script is created, used to
    encode URLs. <span id="sce-not-copy" title="">If the character
    encoding is set from another source, e.g. a <a href="infrastructure.html#document's-character-encoding">document's
    character encoding</a>, then the <a href="#script's-url-character-encoding">script's URL character
    encoding</a> must follow the source, so that if the source's
    changes, so does the script's.</span></p>

   </dd>

   <dt>A <dfn id="script's-base-url" title="script's base URL">base URL</dfn></dt>

   <dd>

    <p>A <a href="urls.html#url">URL</a>, set when the script is created, used to
    resolve relative URLs. <span id="sbu-not-copy" title="">If the
    base URL is set from another source, e.g. a <a href="urls.html#document-base-url">document base
    URL</a>, then the <a href="#script's-base-url">script's base URL</a> must follow
    the source, so that if the source's changes, so does the
    script's.</span></p>

   </dd>

  </dl></div>


  <div class="impl">

  <h5 id="calling-scripts"><span class="secno">6.1.3.2 </span>Calling scripts</h5>

  <p>When a user agent is to <dfn id="jump-to-a-code-entry-point">jump to a code entry-point</dfn> for
  a <a href="#concept-script" title="concept-script">script</a>, for example to invoke
  an event listener defined in that <a href="#concept-script" title="concept-script">script</a>, the user agent must run the
  following steps:</p>

  <ol><li><p>If the <a href="#script's-global-object">script's global object</a> is a
   <code><a href="#window">Window</a></code> object whose <code><a href="dom.html#document">Document</a></code> object is
   not <a href="#fully-active">fully active</a>, then abort these steps without doing
   anything. The callback is not run.</p>

   </li><li><p>Set the <a href="#entry-script">entry script</a> to be the <a href="#concept-script" title="concept-script">script</a> being invoked.</p></li>

   <li><p>Make the <a href="#script-execution-environment" title="script execution environment">script
   execution environment</a> for the <a href="#concept-script" title="concept-script">script</a> execute the code for the given
   code entry-point.</p></li>

   <li><p>Set the <a href="#entry-script">entry script</a> back to whatever it was
   when this algorithm started.</p></li>

   <li><p><a href="#perform-a-microtask-checkpoint">Perform a microtask checkpoint</a>.</p></li>

  </ol><p>This algorithm is not invoked by one script calling another.</p>

  </div>


  <div class="impl">

  <h5 id="creating-scripts"><span class="secno">6.1.3.3 </span>Creating scripts</h5>

  <p>When the specification says that a <a href="#concept-script" title="concept-script">script</a> is to be <dfn id="create-a-script" title="create a
  script">created</dfn>, given some script source, a script source
  URL, its scripting language, a global object, a browsing context, a
  document, a referrer source, a URL character encoding, and a base
  URL, the user agent must run the following steps:</p>

  <ol><li><p>If <a href="#concept-bc-noscript" title="concept-bc-noscript">scripting is
   disabled</a> for <a href="#browsing-context">browsing context</a> passed to this
   algorithm, then abort these steps, as if the script did nothing but
   return void.</p>

   </li><li><p>Set up a <a href="#script-execution-environment">script execution environment</a> as
   appropriate for the scripting language.</p></li>

   <li><p>Parse/compile/initialize the source of the script using the
   <a href="#script-execution-environment">script execution environment</a>, as appropriate for the
   scripting language, and thus obtain the <a href="#list-of-code-entry-points">list of code
   entry-points</a> for the script. If the semantics of the
   scripting language and the given source code are such that there is
   executable code to be immediately run, then the <i><a href="#initial-code-entry-point">initial code
   entry-point</a></i> is the entry-point for that code.</p></li>

   <li><p>Set up the <a href="#script's-global-object">script's global object</a>, the
   <a href="#script's-browsing-context">script's browsing context</a>, the <a href="#script's-document">script's
   document</a>, the <a href="#script's-referrer-source">script's referrer source</a>, the
   <a href="#script's-url-character-encoding">script's URL character encoding</a>, and the
   <a href="#script's-base-url">script's base URL</a> from the settings passed to this
   algorithm.</p></li>

   <li>
 
    <p>If all the steps above succeeded (in particular, if the script
    was compiled successfully), <a href="#jump-to-a-code-entry-point" title="jump to a code
    entry-point">Jump</a> to the <a href="#concept-script" title="concept-script">script</a>'s <i><a href="#initial-code-entry-point">initial code
    entry-point</a></i>.</p>

    <p>Otherwise, <a href="#report-the-error">report the error</a> at the script source
    URL, with the problematic position (line number and column
    number), in the script's <a href="#origin-0">origin</a>, using the <code title="handler-window-onerror"><a href="#handler-window-onerror">onerror</a></code> <a href="#event-handlers" title="event
    handlers">event handler</a> of the <a href="#script's-global-object">script's global
    object</a>. If the error is still <i title="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i> after this, then
    the error may be reported to the user.</p>

   </li>

  </ol><hr><p>When the user agent is to <dfn id="create-an-impotent-script">create an impotent script</dfn>,
  given some script source and URL, its scripting language, and a
  browsing context, the user agent must <a href="#create-a-script">create a script</a>,
  using the given script source, URL, and scripting language, using a
  new empty object as the global object, and using the given browsing
  context as the browsing context. The referrer source, URL character
  encoding, and base URL for the resulting <a href="#concept-script" title="concept-script">script</a> are not important as no APIs
  are exposed to the script.</p>

  <hr><p>When the specification says that a <a href="#concept-script" title="concept-script">script</a> is to be <dfn id="create-a-script-from-a-node" title="create a
  script from a node">created from a node</dfn> <var title="">node</var>, given some script source, its URL, and its
  scripting language, the user agent must <a href="#create-a-script">create a
  script</a>, using the given script source, URL, and scripting
  language, and using <a href="#the-script-settings-determined-from-the-node">the script settings determined from the
  node</a> <var title="">node</var>.</p>

  <p><dfn id="the-script-settings-determined-from-the-node">The script settings determined from the node</dfn> <var title="">node</var> are computed as follows:</p>

  <ol><li><p>Let <var title="">document</var> be the
   <code><a href="dom.html#document">Document</a></code> of <var title="">node</var> (or <var title="">node</var> itself if it is a
   <code><a href="dom.html#document">Document</a></code>).</p></li>

   <li><p>The global object is the <code><a href="#window">Window</a></code> object of <var title="">document</var>.</p></li>

   <li><p>The browsing context is the <a href="#browsing-context">browsing context</a> of
   <var title="">document</var>.</p>

   </li><li><p>The document is <var title="">document</var>.</p>

   </li><li><p>The referrer source is <var title="">document</var>.</p>

   </li><li><p>The URL character encoding is the <a href="infrastructure.html#document's-character-encoding" title="document's
   character encoding">character encoding</a> of <var title="">document</var>. (<a href="#sce-not-copy">This is a
   reference, not a copy</a>.)</p></li>

   <li><p>The base URL is the <a href="urls.html#document-base-url" title="document base URL">base
   URL</a> of <var title="">document</var>. (<a href="#sbu-not-copy">This is a reference, not a copy</a>.)</p></li>

  </ol></div>


  <div class="impl">

  <h5 id="killing-scripts"><span class="secno">6.1.3.4 </span>Killing scripts</h5>

  <p>User agents may impose resource limitations on scripts, for
  example CPU quotas, memory limits, total execution time limits, or
  bandwidth limitations. When a script exceeds a limit, the user agent
  may either throw a <code><a href="infrastructure.html#quotaexceedederror">QuotaExceededError</a></code> exception, abort
  the script without an exception, prompt the user, or throttle script
  execution.</p>

  <div class="example">

   <p>For example, the following script never terminates. A user agent
   could, after waiting for a few seconds, prompt the user to either
   terminate the script or let it continue.</p>

   <pre>&lt;script&gt;
 while (true) { /* loop */ }
&lt;/script&gt;</pre>

  </div>

  <p>User agents are encouraged to allow users to disable scripting
  whenever the user is prompted either by a script (e.g. using the
  <code title="dom-alert"><a href="#dom-alert">window.alert()</a></code> API) or because of a
  script's actions (e.g. because it has exceeded a time limit).</p>

  <p>If scripting is disabled while a script is executing, the script
  should be terminated immediately.</p>

  <p>User agents may allow users to specifically disable scripts just
  for the purposes of closing a <a href="#browsing-context">browsing context</a>.</p>

  <p class="example">For example, the prompt mentioned in the example
  above could also offer the user with a mechanism to just close the
  page entirely, without running any <code title="event-unload">unload</code> event handlers.</p>

  </div>


  <div class="impl">

  <h5 id="runtime-script-errors"><span class="secno">6.1.3.5 </span>Runtime script errors</h5>

  <p>When the user agent is required to <dfn id="report-the-error" title="report the
  error">report an error</dfn> at a particular <a href="urls.html#url">URL</a> <var title="">location</var> with a particular position <var title="">line</var>:<var title="">col</var> in a particular origin <var title="">origin</var>, using the <a href="#event-handlers" title="event handlers">event
  handler</a> <var title="">onerror</var>, it must run these steps,
  after which the error is either <dfn id="concept-error-handled" title="concept-error-handled"><i>handled</i></dfn> or <dfn id="concept-error-nothandled" title="concept-error-nothandled"><i>not handled</i></dfn>:</p>

  <dl class="switch"><dt>If the value of <var title="">onerror</var> is an
   <code><a href="#onerroreventhandler">OnErrorEventHandler</a></code></dt>

   <dd>

    <ol><li><p>Let <var title="">message</var> be a user-agent-defined
     string describing the error in a helpful manner.</p></li>

     <li><p>If the <var title="">location</var> <a href="urls.html#url">URL</a> does
     not have a <a href="#same-origin" title="same origin">same</a>
     <a href="#origin-0">origin</a> as the <var title="">origin</var>, then set
     <var title="">message</var> to "<code title="">Script
     error.</code>", set <var title="">location</var> to the empty
     string, and set <var title="">line</var> and <var title="">col</var> to 0.</p></li>

     <li>

      <p>The callback must be invoked with four arguments: <var title="">message</var>, <var title="">location</var>, <var title="">line</var>, and <var title="">col</var>.</p>

      <p>If the callback returns true, then the error is <i title="concept-error-handled"><a href="#concept-error-handled">handled</a></i>. Otherwise, the error
      is <i title="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i>.</p>

      <p>Any uncaught exceptions thrown or errors caused by this
      function may be reported to the user immediately after the error
      that the function was called for; the <a href="#report-the-error" title="report the
      error">report an error</a> algorithm must not be used to handle
      exceptions thrown or errors caused by this function.</p>

     </li>

    </ol></dd>

   <dt>Otherwise</dt>

   <dd>

    <p>The error is <i title="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i>.</p>

   </dd>

  </dl><h6 id="runtime-script-errors-in-documents"><span class="secno">6.1.3.5.1 </span>Runtime script errors in documents</h6>

  <p>Whenever an uncaught runtime script error occurs in one of the
  scripts associated with a <code><a href="dom.html#document">Document</a></code>, the user agent must
  <a href="#report-the-error">report the error</a> at the URL of the resource containing
  the script (as established when the <a href="#concept-script" title="concept-script">script</a> was <a href="#create-a-script" title="create a
  script">created</a>), with the problematic position (line number
  and column number) in that resource, in the script's
  <a href="#origin-0">origin</a>, using the <code title="handler-window-onerror"><a href="#handler-window-onerror">onerror</a></code> <a href="#event-handlers" title="event
  handlers">event handler</a> of the <a href="#script's-global-object">script's global
  object</a>. If the error is still <i title="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i> after this, then
  the error may be reported to the user.</p>

  <p>The resource containing the script will typically be the file
  from which the <code><a href="dom.html#document">Document</a></code> was parsed, e.g. for inline
  <code><a href="the-script-element.html#the-script-element">script</a></code> elements or <a href="#event-handler-content-attributes">event handler content
  attributes</a>; or the JavaScript file that the script was in,
  for external scripts. Even for dynamically-generated scripts, user
  agents are strongly encouraged to attempt to keep track of the
  original source of a script. For example, if an external script uses
  the <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code> API to
  insert an inline <code><a href="the-script-element.html#the-script-element">script</a></code> element during parsing, the URL
  of the resource containing the script would ideally be reported as
  being the external script, and the line number might ideally be
  reported as the line with the <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code> call or where the
  string passed to that call was first constructed. Naturally,
  implementing this can be somewhat non-trivial.</p>

  <p>User agents are similarly encouraged to keep careful track of the
  original line numbers, even in the face of <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code> calls mutating
  the document as it is parsed, or <a href="#event-handler-content-attributes">event handler content
  attributes</a> spanning multiple lines.</p>

  </div>


  <div class="impl">

  <h4 id="event-loops"><span class="secno">6.1.4 </span>Event loops</h4>

  <h5 id="definitions-1"><span class="secno">6.1.4.1 </span>Definitions</h5>

  <p>To coordinate events, user interaction, scripts, rendering,
  networking, and so forth, user agents must use <dfn id="event-loop" title="event
  loop">event loops</dfn> as described in this section.</p>

  <p>There must be at least one <a href="#event-loop">event loop</a> per user
  agent, and at most one <a href="#event-loop">event loop</a> per <a href="#unit-of-related-similar-origin-browsing-contexts">unit of
  related similar-origin browsing contexts</a>.</p>

  <p class="note">When there is more than one <a href="#event-loop">event loop</a>
  for a <a href="#unit-of-related-browsing-contexts">unit of related browsing contexts</a>, complications
  arise when a <a href="#browsing-context">browsing context</a> in that group is <a href="#navigate" title="navigate">navigated</a> such that it switches from one
  <a href="#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a> to
  another. This specification does not currently describe how to
  handle these complications.</p>

  <p>An <a href="#event-loop">event loop</a> always has at least one <a href="#browsing-context">browsing
  context</a>. If an <a href="#event-loop">event loop</a>'s <a href="#browsing-context" title="browsing context">browsing contexts</a> all go away, then
  the <a href="#event-loop">event loop</a> goes away as well. A <a href="#browsing-context">browsing
  context</a> always has an <a href="#event-loop">event loop</a> coordinating
  its activities.</p>

    <p class="note">Other specifications can define new kinds of event
  loops that aren't associated with browsing contexts; in particular,
  the Web Workers specification does so.</p>
  
  <p>An <a href="#event-loop">event loop</a> has one or more <dfn id="task-queue" title="task
  queue">task queues</dfn>. A <a href="#task-queue">task queue</a> is an ordered
  list of <dfn id="concept-task" title="concept-task">tasks</dfn>, which can be:</p>

  <dl><dt>Events</dt>

   <dd>

    <p>Asynchronously dispatching an <code><a href="infrastructure.html#event">Event</a></code> object at a
    particular <code><a href="infrastructure.html#eventtarget">EventTarget</a></code> object is a task.</p>

    <p class="note">Not all events are dispatched using the <a href="#task-queue">task
    queue</a>, many are dispatched synchronously during other
    tasks.</p>

   </dd>


   <dt>Parsing</dt>

   <dd><p>The <a href="#html-parser">HTML parser</a> tokenizing one or more bytes,
   and then processing any resulting tokens, is typically a
   task.</p></dd>


   <dt>Callbacks</dt>

   <dd><p>Calling a callback asynchronously is a task.</p></dd>


   <dt>Using a resource</dt>

   <dd><p>When an algorithm <a href="urls.html#fetch" title="fetch">fetches</a> a
   resource, if the fetching occurs asynchronously then the processing
   of the resource once some or all of the resource is available is a
   task.</p></dd>


   <dt>Reacting to DOM manipulation</dt>

   <dd><p>Some elements have tasks that trigger in response to DOM
   manipulation, e.g. when that element is <a href="infrastructure.html#insert-an-element-into-a-document" title="insert an
   element into a document">inserted into the document</a>.</p>

  </dd></dl><p>When a user agent is to <dfn id="queue-a-task">queue a task</dfn>, it must add the
  given task to one of the <a href="#task-queue" title="task queue">task queues</a>
  of the relevant <a href="#event-loop">event loop</a>. All the tasks from one
  particular <dfn id="task-source">task source</dfn> (e.g. the callbacks generated by
  timers, the events fired for mouse movements, the tasks queued for
  the parser) must always be added to the same <a href="#task-queue">task
  queue</a>, but tasks from different <a href="#task-source" title="task
  source">task sources</a> may be placed in different <a href="#task-queue" title="task queue">task queues</a>.</p>

  <p class="example">For example, a user agent could have one
  <a href="#task-queue">task queue</a> for mouse and key events (the <a href="#user-interaction-task-source">user
  interaction task source</a>), and another for everything
  else. The user agent could then give keyboard and mouse events
  preference over other tasks three quarters of the time, keeping the
  interface responsive but not starving other task queues, and never
  processing events from any one <a href="#task-source">task source</a> out of
  order.</p>

  <p>Each <a href="#concept-task" title="concept-task">task</a> that is <a href="#queue-a-task" title="queue a task">queued</a> onto a <a href="#task-queue">task queue</a> of
  an <a href="#event-loop">event loop</a> defined by this specification is
  associated with a <code><a href="dom.html#document">Document</a></code>; if the task was queued in
  the context of an element, then it is the element's
  <code><a href="dom.html#document">Document</a></code>; if the task was queued in the context of a
  <a href="#browsing-context">browsing context</a>, then it is the <a href="#browsing-context">browsing
  context</a>'s <a href="#active-document">active document</a> at the time the task
  was queued; if the task was queued by or for a <a href="#concept-script" title="concept-script">script</a> then the document is the
  <a href="#script's-document">script's document</a>.</p>

  <p>A user agent may have one <dfn id="storage-mutex">storage mutex</dfn>. This mutex is
  used to control access to shared state like cookies. At any one
  point, the <a href="#storage-mutex">storage mutex</a> is either free, or owned by a
  particular <a href="#event-loop">event loop</a> or instance of the <a href="urls.html#fetch" title="fetch">fetching</a> algorithm.</p>

  <p>If a user agent does not implement a <a href="#storage-mutex">storage mutex</a>,
  it is exempt from implementing the requirements that require it to
  acquire or release it.</p>

  <p class="note">User agent implementors have to make a choice
  between two evils. On the one hand, not implementing the storage
  mutex means that there is a risk of data corruption: a site could,
  for instance, try to read a cookie, increment its value, then write
  it back out, using the new value of the cookie as a unique
  identifier for the session; if the site does this twice in two
  different browser windows at the same time, it might end up using
  the same "unique" identifier for both sessions, with potentially
  disastrous effects. On the other hand, implementing the storage
  mutex has potentially serious performance implications: whenever a
  site uses Web Storage or cookies, all other sites that try to use
  Web Storage or cookies are blocked until the first site finishes.</p>

  <p>Whenever a <a href="#concept-script" title="concept-script">script</a> calls into
  a <a href="infrastructure.html#plugin">plugin</a>, and whenever a <a href="infrastructure.html#plugin">plugin</a> calls into
  a <a href="#concept-script" title="concept-script">script</a>, the user agent must
  release the <a href="#storage-mutex">storage mutex</a>.</p>


  <h5 id="processing-model-3"><span class="secno">6.1.4.2 </span>Processing model</h5>

  <p>An <a href="#event-loop">event loop</a> must continually run through the
  following steps for as long as it exists:</p>

  <ol><li><p>Run the oldest <a href="#concept-task" title="concept-task">task</a> on one
   of the <a href="#event-loop">event loop</a>'s <a href="#task-queue" title="task queue">task
   queues</a>, ignoring tasks whose associated
   <code><a href="dom.html#document">Document</a></code>s are not <a href="#fully-active">fully active</a>. The user
   agent may pick any <a href="#task-queue">task queue</a>.</p></li>

   <!-- warning! if you renumber these steps, make sure to update the
   "spin the event loop" algorithm below! -->

   <li><p>If the <a href="#storage-mutex">storage mutex</a> is now owned by the
   <a href="#event-loop">event loop</a>, release it so that it is once again
   free.</p></li>

   <li><p>Remove that task from its <a href="#task-queue">task queue</a>.</p></li>

   <li><p><a href="#perform-a-microtask-checkpoint">Perform a microtask checkpoint</a>.</p></li>

   <li><p><a href="#provide-a-stable-state">Provide a stable state</a>.</p></li>

   <li><p>If necessary, update the rendering or user interface of any
   <code><a href="dom.html#document">Document</a></code> or <a href="#browsing-context">browsing context</a> to reflect
   the current state.</p></li>

   <li><p>Return to the first step of the <a href="#event-loop">event
   loop</a>.</p></li>

  </ol><hr><p>When a user agent is to <dfn id="perform-a-microtask-checkpoint">perform a microtask
  checkpoint</dfn>, if the <a href="#running-mutation-observers">running mutation observers</a>
  flag is false, then the user agent must run the following steps:</p>

  <ol><li><p>Let the <a href="#running-mutation-observers">running mutation observers</a> flag be
   true.</p></li>

   <li>

    <p><a href="infrastructure.html#concept-mo-invoke" title="concept-mo-invoke">Invoke
    <code>MutationObserver</code> objects</a> for the <a href="#unit-of-related-similar-origin-browsing-contexts">unit
    of related similar-origin browsing contexts</a> to which the
    <a href="#script's-browsing-context">script's browsing context</a> belongs.</p>

    <p class="note">This will typically fire scripted callbacks, which
    calls the <a href="#jump-to-a-code-entry-point">jump to a code entry-point</a> algorithm, which
    calls this <a href="#perform-a-microtask-checkpoint">perform a microtask checkpoint</a> algorithm
    again, which is why we use the <a href="#running-mutation-observers">running mutation
    observers</a> flag to avoid reentrancy.</p>

   </li>

   <li><p>Let the <a href="#running-mutation-observers">running mutation observers</a> flag be
   false.</p></li>

  </ol><hr><p>When the user agent is to <dfn id="provide-a-stable-state">provide a stable state</dfn>, if
  any asynchronously-running algorithms are <dfn id="await-a-stable-state" title="await a stable
  state">awaiting a stable state</dfn>, then the user agent must run
  their <dfn id="synchronous-section">synchronous section</dfn> and then resume running their
  asynchronous algorithm (if appropriate).</p>

  <p class="note">A <a href="#synchronous-section">synchronous section</a> never mutates
  the DOM, runs any script, or has any other side-effects.</p>

  <p class="note">Steps in <a href="#synchronous-section" title="synchronous
  section">synchronous sections</a> are marked with &#8987;.</p>

  <hr><p>When an algorithm says to <dfn id="spin-the-event-loop">spin the event loop</dfn> until
  a condition <var title="">goal</var> is met, the user agent must run
  the following steps:</p>

  <ol><li><p>Let <var title="">task source</var> be the <a href="#task-source">task
   source</a> of the currently running <a href="#concept-task" title="concept-task">task</a>.</p></li>

   <li>

    <p>Stop the currently running <a href="#concept-task" title="concept-task">task</a>, allowing the <a href="#event-loop">event
    loop</a> to resume, but continue these steps
    asynchronously.</p>

    <p class="note">This causes the <a href="#event-loop">event loop</a> to move on
    to the second step of its processing model (defined above).</p>

   </li>

   <li><p>Wait until the condition <var title="">goal</var> is
   met.</p></li>

   <li><p><a href="#queue-a-task">Queue a task</a> to continue running these steps,
   using the <a href="#task-source">task source</a> <var title="">task
   source</var>. Wait until this task runs before continuing these
   steps.</p></li>

   <li><p>Return to the caller.</p></li>

  </ol><hr><p>Some of the algorithms in this specification, for historical
  reasons, require the user agent to <dfn id="pause">pause</dfn> while running a
  <a href="#concept-task" title="concept-task">task</a> until a condition <var title="">goal</var> is met. This means running the following
  steps:</p>

  <ol><li><p>If any asynchronously-running algorithms are <a href="#await-a-stable-state" title="await a stable state">awaiting a stable state</a>, then
   run their <a href="#synchronous-section">synchronous section</a> and then resume running
   their asynchronous algorithm. (See the <a href="#event-loop">event loop</a>
   processing model definition above for details.)</p>

   </li><li><p>If necessary, update the rendering or user interface of any
   <code><a href="dom.html#document">Document</a></code> or <a href="#browsing-context">browsing context</a> to reflect
   the current state.</p></li>

   <li><p>Wait until the condition <var title="">goal</var> is met.
   While a user agent has a paused <a href="#concept-task" title="concept-task">task</a>, the corresponding <a href="#event-loop">event
   loop</a> must not run further <a href="#concept-task" title="concept-task">tasks</a>, and any script in the currently
   running <a href="#concept-task" title="concept-task">task</a> must block. User
   agents should remain responsive to user input while paused,
   however, albeit in a reduced capacity since the <a href="#event-loop">event
   loop</a> will not be doing anything.</p></li>

  </ol><hr><p>When a user agent is to <dfn id="obtain-the-storage-mutex">obtain the storage mutex</dfn> as
  part of running a <a href="#concept-task" title="concept-task">task</a>, it must
  run through the following steps:</p>

  <ol><li><p>If the <a href="#storage-mutex">storage mutex</a> is already owned by this
   <a href="#concept-task" title="concept-task">task</a>'s <a href="#event-loop">event loop</a>,
   then abort these steps.</p></li>

   <li><p>Otherwise, <a href="#pause">pause</a> until the <a href="#storage-mutex">storage
   mutex</a> can be taken by the <a href="#event-loop">event loop</a>.</p></li>

   <li><p>Take ownership of the <a href="#storage-mutex">storage mutex</a>.</p></li>

  </ol></div>


  <div class="impl">

  <h5 id="generic-task-sources"><span class="secno">6.1.4.3 </span>Generic task sources</h5>

  <p>The following <a href="#task-source" title="task source">task sources</a> are
  used by a number of mostly unrelated features in this and other
  specifications.</p>

  <dl><dt>The <dfn id="dom-manipulation-task-source">DOM manipulation task source</dfn></dt>

   <dd>

    <p>This <a href="#task-source">task source</a> is used for features that react
    to DOM manipulations, such as things that happen asynchronously
    when an element is <a href="infrastructure.html#insert-an-element-into-a-document" title="insert an element into a
    document">inserted into the document</a>.</p>

   </dd>

   <dt>The <dfn id="user-interaction-task-source">user interaction task source</dfn></dt>

   <dd>

    <p>This <a href="#task-source">task source</a> is used for features that react
    to user interaction, for example keyboard or mouse input.</p>

    <p>Asynchronous events sent in response to user input (e.g. <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> events) must be fired using
    <a href="#concept-task" title="concept-task">tasks</a> <a href="#queue-a-task" title="queue a
    task">queued</a> with the <a href="#user-interaction-task-source">user interaction task
    source</a>. <a href="#refsDOMEVENTS">[DOMEVENTS]</a></p>

   </dd>

   <dt>The <dfn id="networking-task-source">networking task source</dfn></dt>

   <dd>

    <p>This <a href="#task-source">task source</a> is used for features that trigger
    in response to network activity.</p>

    <!-- XHR should use this -->

   </dd>

   <dt>The <dfn id="history-traversal-task-source">history traversal task source</dfn></dt>

   <dd>

    <p>This <a href="#task-source">task source</a> is used to queue calls to <code title="dom-history-back"><a href="#dom-history-back">history.back()</a></code> and similar
    APIs.</p>

   </dd>

  </dl></div>



  <div class="impl">

  <!-- SCRIPT EXEC -->
  <h4 id="javascript-protocol"><span class="secno">6.1.5 </span><dfn title="javascript protocol">The <code title="">javascript:</code> URL scheme</dfn></h4>

  <p>When a <a href="urls.html#url">URL</a> using the <code title="">javascript:</code> scheme is <dfn id="concept-js-deref" title="concept-js-deref">dereferenced</dfn>, the user agent must run
  the following steps:</p>

  <ol><li><p>Let the script source be the string obtained using the
   content retrieval operation defined for <code title="">javascript:</code> URLs. <a href="#refsJSURL">[JSURL]</a></p></li>

   <li>

    <p>Use the appropriate step from the following list:</p>

    <dl><dt>If a <a href="#browsing-context">browsing context</a> is being <a href="#navigate" title="navigate">navigated</a> to a <code>javascript:</code>
     URL, and the <a href="#source-browsing-context">source browsing context</a> for that
     navigation, if any, has <a href="#concept-bc-noscript" title="concept-bc-noscript">scripting disabled</a></dt>

     <dd>

      <p>Let <var title="">result</var> be void.</p>

     </dd>

     <dt>If a <a href="#browsing-context">browsing context</a> is being <a href="#navigate" title="navigate">navigated</a> to a <code>javascript:</code>
     URL, and the <a href="#active-document">active document</a> of that browsing
     context has the <a href="#same-origin">same origin</a> as the script given by
     that URL</dt>

     <dd>

      <!-- http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/ -->

      <p>Let <var title="">address</var> be the <a href="dom.html#the-document's-address" title="the
      document's address">address</a> of the <a href="#active-document">active
      document</a> of the <a href="#browsing-context">browsing context</a> being
      navigated.</p>

      <p>If <var title="">address</var> is <code><a href="urls.html#about:blank">about:blank</a></code>,
      and the <a href="#browsing-context">browsing context</a> being navigated has a
      <a href="#creator-browsing-context">creator browsing context</a>, then let <var title="">address</var> be the <a href="dom.html#the-document's-address" title="the document's
      address">address</a> of the <a href="#creator-document">creator
      <code>Document</code></a> instead.</p>

      <p><a href="#create-a-script-from-a-node" title="create a script from a node">Create a
      script</a> from the <code><a href="dom.html#document">Document</a></code> node of the
      <a href="#active-document">active document</a>, using the aforementioned script
      source, the <a href="urls.html#url">URL</a> of the resource where the
      <code>javascript:</code> URL, was found, and assuming the
      scripting language is JavaScript.</p>

      <p>Let <var title="">result</var> be the return value of the
      <i><a href="#initial-code-entry-point">initial code entry-point</a></i> of this <a href="#concept-script" title="concept-script">script</a>. If an exception was
      thrown, let <var title="">result</var> be void instead. (The
      result will be void also if <a href="#concept-bc-noscript" title="concept-bc-noscript">scripting is disabled</a>.)</p>

      <p>When it comes time to <a href="#set-the-document's-address">set the document's address</a>
      in the <a href="#navigate" title="navigate">navigation algorithm</a>, use
      <var title="">address</var> as the <a href="#override-url">override
      URL</a>.</p>

     </dd>

<!--(turns out only Firefox does this, and only for <img src=""> and a
     few others, so it's commented out for now pending someone having
     a convincing use case)

     <dt>If the <code>Document</code> object of the element,
     attribute, or style sheet from which the <code>javascript:</code>
     URL was reached has an associated <span>browsing
     context</span></dt>

     <dd>

      <p><span>Create an impotent script</span> using the
      aforementioned script source, with the scripting language set to
      JavaScript, and with the <code>Document</code>'s object's
      <span>browsing context</span> as the browsing context.</p>

      <p>Let <var title="">result</var> be the return value of the
      <i>initial code entry-point</i> of this <span
      title="concept-script">script</span>. If an exception was
      thrown, let <var title="">result</var> be void instead. (The
      result will be void also if <span
      title="concept-bc-noscript">scripting is disabled</span>.)</p>

     </dd>
-->

     <dt>Otherwise</dt>

     <dd>

      <p>Let <var title="">result</var> be void.</p>

     </dd>

    </dl></li>

   <li>

    <p>If the result of executing the script is void (there is no
    return value), then the URL must be treated in a manner equivalent
    to an HTTP resource with an HTTP 204 No Content response.</p>

    <p>Otherwise, the URL must be treated in a manner equivalent to an
    HTTP resource with a 200 OK response whose <a href="urls.html#content-type" title="Content-Type">Content-Type metadata</a> is
    <code><a href="#text/html">text/html</a></code> and whose response body is the return value
    converted to a string value.</p>

    <p class="note">Certain contexts, in particular <code><a href="the-img-element.html#the-img-element">img</a></code>
    elements, ignore the <a href="urls.html#content-type" title="Content-Type">Content-Type
    metadata</a>.</p>

   </li>

  </ol><div class="example">

   <p>So for example a <code title="">javascript:</code> URL for a
   <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code> attribute of an
   <code><a href="the-img-element.html#the-img-element">img</a></code> element would be evaluated in the context of an
   empty object as soon as the attribute is set; it would then be
   sniffed to determine the image type and decoded as an image.</p>

   <p>A <code title="">javascript:</code> URL in an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute of an <code><a href="the-a-element.html#the-a-element">a</a></code>
   element would only be evaluated when the link was <a href="#following-hyperlinks-0" title="following hyperlinks">followed</a>.</p>

   <p>The <code title="attr-iframe-src"><a href="the-iframe-element.html#attr-iframe-src">src</a></code> attribute of an
   <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element would be evaluated in the context of
   the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>'s own <a href="#browsing-context">browsing context</a>; once
   evaluated, its return value (if it was not void) would replace that
   <a href="#browsing-context">browsing context</a>'s document, thus changing the
   variables visible in that <a href="#browsing-context">browsing context</a>.</p>

  </div>

  </div>



  <h4 id="events"><span class="secno">6.1.6 </span>Events</h4>

  <div class="impl">

  <h5 id="event-handler-attributes"><span class="secno">6.1.6.1 </span>Event handlers</h5>

  </div>

  <!--test: <a href="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null))%3B%0Aw(a.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'html')))%3B%0Aw(b%3Da.firstChild.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'body')))%3B%0Aw(b.test%20%3D%20w)%3B%0Aw(b.setAttribute('onclick'%2C%20'test(%22fire%3A%20%22%20%2B%20event)'))%3B%0Aw(b.onclick)%3B%0Aw(e%3Da.createEvent('Event'))%3B%0Aw(e.initEvent('click'%2C%20false%2C%20false))%3B%0Aw(b.dispatchEvent(e))%3B%0A%3C%2Fscript%3E">test</a>-->

  <p>Many objects can have <dfn id="event-handlers">event handlers</dfn> specified. These
  act as non-capture event listeners for the object on which they are
  specified. <a href="#refsDOMCORE">[DOMCORE]</a></p>

  <p>An <a href="#event-handlers" title="event handlers">event handler</a> can either
  have the value null or be set to a callback object. This is defined
  using the <code><a href="#eventhandler">EventHandler</a></code> callback interface type. <span class="impl">Initially, event handlers must be set to
  null.</span></p>

  <p>Event handlers are exposed in one of two ways.</p>

  <p>The first way, common to all event handlers, is as an <a href="#event-handler-idl-attributes" title="event handler IDL attributes">event handler IDL
  attribute</a>.</p>

  <p>The second way is as an <a href="#event-handler-content-attributes" title="event handler content
  attributes">event handler content attribute</a>. Event handlers
  on <a href="infrastructure.html#html-elements">HTML elements</a> and some of the event handlers on
  <code><a href="#window">Window</a></code> objects are exposed in this way.</p>

  <div class="impl">

  <hr><p><dfn id="event-handler-idl-attributes">Event handler IDL attributes</dfn>, on setting, must set the
  corresponding event handler to their new value, and on
  getting, must return whatever the current value of the corresponding
  event handler is (possibly null).</p>

  <p>If an <a href="#event-handler-idl-attributes" title="event handler IDL attributes">event handler
  IDL attribute</a> exposes an <a href="#event-handlers" title="event handlers">event
  handler</a> of an object that doesn't exist, it must always
  return null on getting and must do nothing on setting.</p>

  <p class="note">This can happen in particular for <a href="#event-handler-idl-attributes" title="event
  handler IDL attributes">event handler IDL attribute</a> on
  <code><a href="the-body-element.html#the-body-element">body</a></code> elements that do not have corresponding
  <code><a href="#window">Window</a></code> objects.</p>

  <p class="note">Certain event handler IDL attributes have additional
  requirements, in particular the <code title="handler-MessagePort-onmessage">onmessage</code> attribute of
  <code>MessagePort</code> objects.</p>

  <p>On getting, <a href="#event-handler-idl-attributes">event handler IDL attributes</a> must return
  the value of their corresponding event handlers, except when the
  value is an <a href="#concept-handler-error" title="concept-handler-error">internal error
  value</a>, in which case the user agent must set the corresponding
  event handler to null, and then throw an exception corresponding to
  the error condition.</p>

  <hr></div>

  <p><dfn id="event-handler-content-attributes">Event handler content attributes</dfn>, when specified, must
  contain valid JavaScript code which, when parsed, would match the
  <code title="">FunctionBody</code> production after automatic
  semicolon insertion. <a href="#refsECMA262">[ECMA262]</a></p>

  <div class="impl">

  <!-- SCRIPT EXEC -->
  <p>When an <a href="#event-handler-content-attributes" title="event handler content attributes">event
  handler content attribute</a> is set, if the element is owned by
  a <code><a href="dom.html#document">Document</a></code> that is in a <a href="#browsing-context">browsing context</a>,
  and <a href="#concept-bc-script" title="concept-bc-script">scripting is enabled</a> for
  that <a href="#browsing-context">browsing context</a>, the user agent must run the
  following steps to create a <a href="#concept-script" title="concept-script">script</a> after setting the content
  attribute to its new value:</p>

  <ol><li><p>Set the corresponding <a href="#event-handlers" title="event handlers">event
   handler</a> to null.</p></li>

   <li><p>Set up a <a href="#script-execution-environment">script execution environment</a> for
   JavaScript.</p></li>

   <li><p>Let <var title="">body</var> be the <a href="#event-handler-content-attributes" title="event
   handler content attributes">event handler content
   attribute</a>'s new value.</p></li>

   <li>

    <p>If <var title="">body</var> is not parsable as
    <i>FunctionBody</i> or if parsing detects an <i>early error</i>
    then <a href="#set-the-event-handler-content-attribute-to-an-error">set the event handler content attribute to an
    error</a> as defined below, and abort these steps.</p>

    <p class="note"><i>FunctionBody</i> is defined in ECMAScript
    edition 5 section 13 Function Definition. <i>Early error</i> is
    defined in ECMAScript edition 5 section 16 Errors. <a href="#refsECMA262">[ECMA262]</a></p>

   </li>

   <li>

    <p>If <var title="">body</var> begins with a Directive Prologue
    that contains a Use Strict Directive then let <var title="">strict</var> be true, otherwise let <var title="">strict</var> be false.</p> <!-- we can't defer to 10.1.1
    since we're not using a Function constructor but doing it
    ourselves. -->

    <p class="note">The terms "Directive Prologue" and "Use Strict
    Directive" are defined in ECMAScript edition 5 section 14.1
    Directive Prologues and the Use Strict Directive. <a href="#refsECMA262">[ECMA262]</a></p>

   </li>

<!--
currently this is unnecessary: http://www.w3.org/Bugs/Public/show_bug.cgi?id=11977#c4
   <li>

    <p>If <var title="">strict</var> is true, and anything in <var
    title="">body</var> is a <code>SyntaxError</code> according to the
    Strict Mode Restrictions, then <span>set the event handler content
    attribute to an error</span> as defined below, and abort these
    steps.</p>

    <p class="note">The Strict Mode Restrictions are those listed in
    ECMAScript edition 5 section 13.1 Strict Mode Restrictions. <a
    href="#refsECMA262">[ECMA262]</a></p>

   </li>
-->

   <li>

    <p>Using the script execution environment created above, create a
    function object (as defined in ECMAScript edition 5 section 13.2
    Creating Function Objects), with:</p>

    <dl><dt>Parameter list <var title="">FormalParameterList</var></dt>

     <dd>

      <dl class="switch"><dt>If the attribute is the <code title="handler-window-onerror"><a href="#handler-window-onerror">onerror</a></code> attribute of the
       <code><a href="#window">Window</a></code> object</dt>

       <dd>Let the function have four arguments, named <code title="">event</code>, <code title="">source</code>, <code title="">lineno</code>, and <code title="">column</code>.</dd>
       <!-- /column/ is new as of 2012; see https://www.w3.org/Bugs/Public/show_bug.cgi?id=13319 -->

       <dt>Otherwise</dt>

       <dd>Let the function have a single argument called <code title="">event</code>.</dd>

      </dl></dd>

     <dt>Function body <var title="">FunctionBody</var></dt>

     <dd>The result of parsing <var title="">body</var> above.</dd>

     <dt>Lexical Environment <var title="">Scope</var></dt>

     <dd>

      <ol><li>Let <var title="">Scope</var> be the result of
       NewObjectEnvironment(the element's <code><a href="dom.html#document">Document</a></code>, the
       <var title="">global environment</var>).</li>

       <li>If the element has a <a href="association-of-controls-and-forms.html#form-owner">form owner</a>, let <var title="">Scope</var> be the result of NewObjectEnvironment(the
       element's <a href="association-of-controls-and-forms.html#form-owner">form owner</a>, <var title="">Scope</var>).</li>

       <li>Let <var title="">Scope</var> be the result of
       NewObjectEnvironment(the element's object, <var title="">Scope</var>).</li>

      </ol><p class="note">NewObjectEnvironment() is defined in ECMAScript
      edition 5 section 10.2.2.3 NewObjectEnvironment (O, E). <a href="#refsECMA262">[ECMA262]</a></p>

     </dd>

     <dt>Boolean flag <var title="">Strict</var></dt>

     <dd>The value of <var title="">strict</var>.</dd>

    </dl><p>Let this new function be the only entry in the script's
    <a href="#list-of-code-entry-points">list of code entry-points</a>.</p>

   </li>

   <li><p>Set up the <a href="#script's-global-object">script's global object</a>, the
   <a href="#script's-browsing-context">script's browsing context</a>, the <a href="#script's-document">script's
   document</a>, the <a href="#script's-referrer-source">script's referrer source</a>, the
   <a href="#script's-url-character-encoding">script's URL character encoding</a>, and the
   <a href="#script's-base-url">script's base URL</a> from <a href="#the-script-settings-determined-from-the-node">the script settings
   determined from the node</a> on which the attribute is being
   set.</p></li>

   <li><p>Set the corresponding <a href="#event-handlers" title="event handlers">event
   handler</a> to the aforementioned function.</p></li>

  </ol><p>When a user agent is required, by the steps above, to <dfn id="set-the-event-handler-content-attribute-to-an-error">set
  the event handler content attribute to an error</dfn>, the user
  agent must set the corresponding <a href="#event-handlers" title="event handlers">event
  handler</a> to an <dfn id="concept-handler-error" title="concept-handler-error">internal
  error value</dfn> representing the error condition, keeping track of
  the <a href="urls.html#url">URL</a> of the resource where the <a href="#event-handler-content-attributes" title="event
  handler content attributes">event handler content attribute</a>
  was set, and the relevant line number inside that resource where the
  error occurred.</p>

  <p>When an event handler content attribute is removed, the user
  agent must set the corresponding <a href="#event-handlers" title="event handlers">event
  handler</a> to null.</p>
  <!--
  http://software.hixie.ch/utilities/js/live-dom-viewer/saved/245 onload
  http://software.hixie.ch/utilities/js/live-dom-viewer/saved/247 onclick
  see http://www.w3.org/Bugs/Public/show_bug.cgi?id=7626#c5 for reasoning
  -->

  </div>

  <p class="note">When an <a href="#event-handler-content-attributes" title="event handler content
  attributes">event handler content attribute</a> is set on an
  element owned by a <code><a href="dom.html#document">Document</a></code> that is not in a
  <a href="#browsing-context">browsing context</a>, the corresponding event handler is
  not changed.</p>

  <!-- v2: we should probably support HTML4's Content-Script-Type header here. -->

  <div class="impl">

  <hr><p>When an <a href="#event-handlers" title="event handlers">event handler</a> <var title="">H</var> of an element or object <var title="">T</var>
  implementing the <code><a href="infrastructure.html#eventtarget">EventTarget</a></code> interface is first set to
  a non-null value, the user agent must append an <a href="infrastructure.html#concept-event-listener" title="concept-event-listener">event listener</a> to the list of
  <a href="infrastructure.html#concept-event-listener" title="concept-event-listener">event listeners</a>
  associated with <var title="">T</var> with <i>type</i> set to the
  <dfn id="event-handler-event-type">event handler event type</dfn> corresponding to <var title="">H</var>, <i>capture</i> set to false, and <i>listener</i>
  set to <a href="#the-event-handler-processing-algorithm">the event handler processing algorithm</a> defined
  below. <a href="#refsDOMCORE">[DOMCORE]</a></p>

  <p class="note">The <i>listener</i> is emphatically <em>not</em> the
  <a href="#event-handlers" title="event handlers">event handler</a> itself. Every
  event handler ends up registering the same <i>listener</i>, the
  algorithm defined below, which takes care of invoking the right
  callback, and processing the callback's return value.</p>

  <p class="note">This only happens the first time the <a href="#event-handlers" title="event handlers">event handler</a>'s value is set. Since
  listeners are called in the order they were registered, the order of
  event listeners for a particular event type will always be first the
  event listeners registered with <code title="dom-EventTarget-addEventListener">addEventListener()</code>
  before the first time the <a href="#event-handlers" title="event handlers">event
  handler</a> was set to a non-null value, then the callback to
  which it is currently set, if any, and finally the event listeners
  registered with <code title="dom-EventTarget-addEventListener">addEventListener()</code>
  <em>after</em> the first time the <a href="#event-handlers" title="event handlers">event
  handler</a> was set to a non-null value.</p>

  </div>

  <div class="example">

   <p>This example demonstrates the order in which event listeners are
   invoked. If the button in this example is clicked by the user, the
   page will show four alerts, with the text "ONE", "TWO", "THREE",
   and "FOUR" respectively.</p>

   <pre>&lt;button id="test"&gt;Start Demo&lt;/button&gt;
&lt;script&gt;
 var button = document.getElementById('test');
 button.addEventListener('click', function () { alert('ONE') }, false);
 button.setAttribute('onclick', "alert('NOT CALLED')"); // event handler listener is registered here
 button.addEventListener('click', function () { alert('THREE') }, false);
 button.onclick = function () { alert('TWO'); };
 button.addEventListener('click', function () { alert('FOUR') }, false);
&lt;/script&gt;</pre>

  </div>

  <div class="impl">

  <p class="note">The interfaces implemented by the event object do
  not influence whether an <a href="#event-handlers" title="event handlers">event
  handler</a> is triggered or not.</p>

  <p><dfn id="the-event-handler-processing-algorithm">The event handler processing algorithm</dfn> for an
  <a href="#event-handlers" title="event handlers">event handler</a> <var title="">H</var> and an <code><a href="infrastructure.html#event">Event</a></code> object <var title="">E</var> is as follows:</p>

  <ol><li><p>If <var title="">H</var>'s value is null, then abort these
   steps.</p></li>

   <li><p>If <var title="">H</var>'s value is an <a href="#concept-handler-error" title="concept-handler-error">internal error value</a>, then set
   the <a href="#event-handlers" title="event handlers">event handler</a> to null and
   then <a href="#report-the-error">report the error</a> at the appropriate URL and with
   the appropriate position (line number and column number), as
   established when the error was detected, in the <a href="#origin-0">origin</a>
   of the <code><a href="dom.html#document">Document</a></code> of the node of the <a href="#event-handler-content-attributes" title="event
   handler content attributes">event handler content attribute</a>,
   using the <code title="handler-window-onerror"><a href="#handler-window-onerror">onerror</a></code> <a href="#event-handlers" title="event handlers">event handler</a> of the
   <code><a href="#window">Window</a></code> object of that <code><a href="dom.html#document">Document</a></code>, and abort
   these steps.</p></li>

   <li><p>Let <var title="">callback</var> be <var title="">H</var>'s
   value, the callback that the <a href="#event-handlers" title="event handlers">event
   handler</a> was last set to.</p></li>

   <li><p>Invoke <var title="">callback</var> with one
   argument, the value of which is the <code><a href="infrastructure.html#event">Event</a></code> object <var title="">E</var>, with the <i title="dfn-callback-this-value">callback this value</i> set to
   <var title="">E</var>'s <code title="dom-Event-currentTarget">currentTarget</code>. Let the
   return value be <var title="">return value</var>. <a href="#refsWEBIDL">[WEBIDL]</a></p></li>

   <li>

    <p>Process <var title="">return value</var> as follows:</p>

    <dl class="switch"><dt>If the event type is <code class="event-mouseover">mouseover</code></dt>

     <dd><p>If <var title="">return value</var> is a boolean with the
     value true, then cancel the event.</p></dd>

     <dt>If the <code><a href="infrastructure.html#event">Event</a></code> object <var title="">E</var> is a
     <code><a href="#beforeunloadevent">BeforeUnloadEvent</a></code> object</dt>

     <dd><p>If <var title="">return value</var> is a string, and the
     <code><a href="infrastructure.html#event">Event</a></code> object <var title="">E</var>'s <code title="dom-BeforeUnloadEvent-returnValue"><a href="#dom-beforeunloadevent-returnvalue">returnValue</a></code>
     attribute's value is the empty string, then set the <code title="dom-BeforeUnloadEvent-returnValue"><a href="#dom-beforeunloadevent-returnvalue">returnValue</a></code>
     attribute's value to <var title="">return value</var>.</p></dd>

     <dt>Otherwise</dt>

     <dd><p>If <var title="">return value</var> is a boolean with the
     value false, then cancel the event.</p></dd>

     <!-- IE actually uncancels the event if the function returns true -->

    </dl></li>

  </ol></div>

  <hr><p>The <code><a href="#eventhandler">EventHandler</a></code> interface represents a callback
  used for event handlers. It is represented in Web IDL as
  follows:</p>

  <pre class="idl">[TreatNonCallableAsNull]
callback <dfn id="eventhandlernonnull">EventHandlerNonNull</dfn> = any (<a href="infrastructure.html#event">Event</a> event);
typedef <a href="#eventhandlernonnull">EventHandlerNonNull</a>? <dfn id="eventhandler">EventHandler</dfn>;</pre>

  <p class="note">In JavaScript, any <code>Function</code> object
  implements this interface.</p>

  <div class="example">

   <p>For example, the following document fragment:</p>

   <pre>&lt;body onload="alert(this)" onclick="alert(this)"&gt;</pre>

   <p>...leads to an alert saying "<code title="">[object&#160;Window]</code>" when the document is loaded,
   and an alert saying "<code title="">[object&#160;HTMLBodyElement]</code>" whenever the user
   clicks something in the page.</p>

  </div>

  <p class="note">The return value of the function affects whether the
  event is canceled or not: <span class="impl">as described
  above,</span> if the return value is false, the event is canceled
  (except for <code class="event-mouseover">mouseover</code> events,
  where the return value has to be true to cancel the event). With
  <code title="event-beforeunload">beforeunload</code> events, the
  value is instead used to determine the message to show the user.</p>

  <p>For historical reasons, the <code title="handler-onerror"><a href="#handler-onerror">onerror</a></code> handler has different
  arguments:</p>

  <pre class="idl">[TreatNonCallableAsNull]
callback <dfn id="onerroreventhandlernonnull">OnErrorEventHandlerNonNull</dfn> = any ((<a href="infrastructure.html#event">Event</a> or DOMString) event, DOMString source, unsigned long lineno, unsigned long column);
typedef <a href="#onerroreventhandlernonnull">OnErrorEventHandlerNonNull</a>? <dfn id="onerroreventhandler">OnErrorEventHandler</dfn>;</pre>

  <!-- onreadystatechange is also defined specially, using [LenientThis]; see IDL -->


  <h5 id="event-handlers-on-elements,-document-objects,-and-window-objects"><span class="secno">6.1.6.2 </span>Event handlers on elements, <code><a href="dom.html#document">Document</a></code> objects, and <code><a href="#window">Window</a></code> objects</h5>

  <p>The following are the <a href="#event-handlers">event handlers</a> (and their
  corresponding <a href="#event-handler-event-type" title="event handler event type">event handler
  event types</a>) <span class="impl">that must be</span> supported
  by all <a href="infrastructure.html#html-elements">HTML elements</a>, as both content attributes and
  IDL attributes, and on <code><a href="dom.html#document">Document</a></code> and <code><a href="#window">Window</a></code>
  objects, as IDL attributes.</p>

  <table><thead><tr><th><a href="#event-handlers" title="event handlers">Event handler</a> </th><th><a href="#event-handler-event-type">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-onabort" title="handler-onabort"><code>onabort</code></dfn> </td><td> <code title="event-abort">abort</code>
    </td></tr><tr><td><dfn id="handler-oncancel" title="handler-oncancel"><code>oncancel</code></dfn> </td><td> <code title="event-media-cancel">cancel</code>
    </td></tr><tr><td><dfn id="handler-oncanplay" title="handler-oncanplay"><code>oncanplay</code></dfn> </td><td> <code title="event-media-canplay"><a href="media-elements.html#event-media-canplay">canplay</a></code>
    </td></tr><tr><td><dfn id="handler-oncanplaythrough" title="handler-oncanplaythrough"><code>oncanplaythrough</code></dfn> </td><td> <code title="event-media-canplaythrough"><a href="media-elements.html#event-media-canplaythrough">canplaythrough</a></code>
    </td></tr><tr><td><dfn id="handler-onchange" title="handler-onchange"><code>onchange</code></dfn> </td><td> <code title="event-change">change</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onclick" title="handler-onclick"><code>onclick</code></dfn> </td><td> <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onclose" title="handler-onclose"><code>onclose</code></dfn> </td><td> <code title="event-close">close</code> <!-- new for <dialog> -->
    </td></tr><tr><td><dfn id="handler-oncontextmenu" title="handler-oncontextmenu"><code>oncontextmenu</code></dfn> </td><td> <code title="event-contextmenu">contextmenu</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-oncuechange" title="handler-oncuechange"><code>oncuechange</code></dfn> </td><td> <code title="event-cuechange">cuechange</code>
    </td></tr><tr><td><dfn id="handler-ondblclick" title="handler-ondblclick"><code>ondblclick</code></dfn> </td><td> <code title="event-dblclick">dblclick</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-ondrag" title="handler-ondrag"><code>ondrag</code></dfn> </td><td> <code title="event-drag"><a href="#event-drag">drag</a></code>
    </td></tr><tr><td><dfn id="handler-ondragend" title="handler-ondragend"><code>ondragend</code></dfn> </td><td> <code title="event-dragend"><a href="#event-dragend">dragend</a></code>
    </td></tr><tr><td><dfn id="handler-ondragenter" title="handler-ondragenter"><code>ondragenter</code></dfn> </td><td> <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code>
    </td></tr><tr><td><dfn id="handler-ondragleave" title="handler-ondragleave"><code>ondragleave</code></dfn> </td><td> <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code>
    </td></tr><tr><td><dfn id="handler-ondragover" title="handler-ondragover"><code>ondragover</code></dfn> </td><td> <code title="event-dragover"><a href="#event-dragover">dragover</a></code>
    </td></tr><tr><td><dfn id="handler-ondragstart" title="handler-ondragstart"><code>ondragstart</code></dfn> </td><td> <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-ondrop" title="handler-ondrop"><code>ondrop</code></dfn> </td><td> <code title="event-drop"><a href="#event-drop">drop</a></code>
    </td></tr><tr><td><dfn id="handler-ondurationchange" title="handler-ondurationchange"><code>ondurationchange</code></dfn> </td><td> <code title="event-media-durationchange"><a href="media-elements.html#event-media-durationchange">durationchange</a></code>
    </td></tr><tr><td><dfn id="handler-onemptied" title="handler-onemptied"><code>onemptied</code></dfn> </td><td> <code title="event-media-emptied"><a href="media-elements.html#event-media-emptied">emptied</a></code>
    </td></tr><tr><td><dfn id="handler-onended" title="handler-onended"><code>onended</code></dfn> </td><td> <code title="event-media-ended"><a href="media-elements.html#event-media-ended">ended</a></code>
    </td></tr><tr><td><dfn id="handler-oninput" title="handler-oninput"><code>oninput</code></dfn> </td><td> <code title="event-input">input</code>
    </td></tr><tr><td><dfn id="handler-oninvalid" title="handler-oninvalid"><code>oninvalid</code></dfn> </td><td> <code title="event-invalid">invalid</code>
    </td></tr><tr><td><dfn id="handler-onkeydown" title="handler-onkeydown"><code>onkeydown</code></dfn> </td><td> <code title="event-keydown">keydown</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onkeypress" title="handler-onkeypress"><code>onkeypress</code></dfn> </td><td> <code title="event-keypress">keypress</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onkeyup" title="handler-onkeyup"><code>onkeyup</code></dfn> </td><td> <code title="event-keyup">keyup</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onloadeddata" title="handler-onloadeddata"><code>onloadeddata</code></dfn> </td><td> <code title="event-media-loadeddata"><a href="media-elements.html#event-media-loadeddata">loadeddata</a></code>
    </td></tr><tr><td><dfn id="handler-onloadedmetadata" title="handler-onloadedmetadata"><code>onloadedmetadata</code></dfn> </td><td> <code title="event-media-loadedmetadata"><a href="media-elements.html#event-media-loadedmetadata">loadedmetadata</a></code>
    </td></tr><tr><td><dfn id="handler-onloadstart" title="handler-onloadstart"><code>onloadstart</code></dfn> </td><td> <code title="event-media-loadstart"><a href="media-elements.html#event-media-loadstart">loadstart</a></code>
    </td></tr><tr><td><dfn id="handler-onmousedown" title="handler-onmousedown"><code>onmousedown</code></dfn> </td><td> <code title="event-mousedown">mousedown</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onmousemove" title="handler-onmousemove"><code>onmousemove</code></dfn> </td><td> <code title="event-mousemove">mousemove</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onmouseout" title="handler-onmouseout"><code>onmouseout</code></dfn> </td><td> <code title="event-mouseout">mouseout</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onmouseover" title="handler-onmouseover"><code>onmouseover</code></dfn> </td><td> <code title="event-mouseover">mouseover</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onmouseup" title="handler-onmouseup"><code>onmouseup</code></dfn> </td><td> <code title="event-mouseup">mouseup</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onmousewheel" title="handler-onmousewheel"><code>onmousewheel</code></dfn> </td><td> <code title="event-mousewheel">mousewheel</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onpause" title="handler-onpause"><code>onpause</code></dfn> </td><td> <code title="event-media-pause"><a href="media-elements.html#event-media-pause">pause</a></code>
    </td></tr><tr><td><dfn id="handler-onplay" title="handler-onplay"><code>onplay</code></dfn> </td><td> <code title="event-media-play"><a href="media-elements.html#event-media-play">play</a></code>
    </td></tr><tr><td><dfn id="handler-onplaying" title="handler-onplaying"><code>onplaying</code></dfn> </td><td> <code title="event-media-playing"><a href="media-elements.html#event-media-playing">playing</a></code>
    </td></tr><tr><td><dfn id="handler-onprogress" title="handler-onprogress"><code>onprogress</code></dfn> </td><td> <code title="event-media-progress"><a href="media-elements.html#event-media-progress">progress</a></code>
    </td></tr><tr><td><dfn id="handler-onratechange" title="handler-onratechange"><code>onratechange</code></dfn> </td><td> <code title="event-media-ratechange"><a href="media-elements.html#event-media-ratechange">ratechange</a></code>
    </td></tr><tr><td><dfn id="handler-onreset" title="handler-onreset"><code>onreset</code></dfn> </td><td> <code title="event-reset">reset</code>
    </td></tr><tr><td><dfn id="handler-onseeked" title="handler-onseeked"><code>onseeked</code></dfn> </td><td> <code title="event-media-seeked"><a href="media-elements.html#event-media-seeked">seeked</a></code>
    </td></tr><tr><td><dfn id="handler-onseeking" title="handler-onseeking"><code>onseeking</code></dfn> </td><td> <code title="event-media-seeking"><a href="media-elements.html#event-media-seeking">seeking</a></code>
    </td></tr><tr><td><dfn id="handler-onselect" title="handler-onselect"><code>onselect</code></dfn> </td><td> <code title="event-select">select</code> <!-- widely used --> <!-- [CSSOM] -->
    </td></tr><tr><td><dfn id="handler-onshow" title="handler-onshow"><code>onshow</code></dfn> </td><td> <code title="event-show">show</code>
    </td></tr><tr><td><dfn id="handler-onstalled" title="handler-onstalled"><code>onstalled</code></dfn> </td><td> <code title="event-media-stalled"><a href="media-elements.html#event-media-stalled">stalled</a></code>
    </td></tr><tr><td><dfn id="handler-onsubmit" title="handler-onsubmit"><code>onsubmit</code></dfn> </td><td> <code title="event-submit">submit</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onsuspend" title="handler-onsuspend"><code>onsuspend</code></dfn> </td><td> <code title="event-media-suspend"><a href="media-elements.html#event-media-suspend">suspend</a></code>
    </td></tr><tr><td><dfn id="handler-ontimeupdate" title="handler-ontimeupdate"><code>ontimeupdate</code></dfn> </td><td> <code title="event-media-timeupdate"><a href="media-elements.html#event-media-timeupdate">timeupdate</a></code>
    </td></tr><tr><td><dfn id="handler-onvolumechange" title="handler-onvolumechange"><code>onvolumechange</code></dfn> </td><td> <code title="event-media-volumechange"><a href="media-elements.html#event-media-volumechange">volumechange</a></code>
    </td></tr><tr><td><dfn id="handler-onwaiting" title="handler-onwaiting"><code>onwaiting</code></dfn> </td><td> <code title="event-media-waiting"><a href="media-elements.html#event-media-waiting">waiting</a></code>

<!-- not supported, use dnd: -->
<!--<tr><td><dfn title="handler-onbeforecopy"><code>onbeforecopy</code></dfn> <td> <code title="event-beforecopy">beforecopy</code>--> <!-- widely used -->
<!--<tr><td><dfn title="handler-oncopy"><code>oncopy</code></dfn> <td> <code title="event-copy">copy</code>--> <!-- widely used -->
<!--<tr><td><dfn title="handler-onpaste"><code>onpaste</code></dfn> <td> <code title="event-paste">paste</code>--> <!-- widely used -->
<!-- not supported yet (v2?): -->
<!--<tr><td><dfn title="handler-onselectstart"><code>onselectstart</code></dfn> <td> <code title="event-selectstart">selectstart</code>--> <!-- widely used -->
  </td></tr></tbody></table><hr><p>The following are the <a href="#event-handlers">event handlers</a> (and their
  corresponding <a href="#event-handler-event-type" title="event handler event type">event handler
  event types</a>) <span class="impl">that must be</span> supported
  by all <a href="infrastructure.html#html-elements">HTML elements</a> other than <code><a href="the-body-element.html#the-body-element">body</a></code> and
  <code><a href="#frameset">frameset</a></code>, as both content attributes and IDL
  attributes, and on <code><a href="dom.html#document">Document</a></code> objects, as IDL
  attributes:</p>

  <table><thead><tr><th><a href="#event-handlers" title="event handlers">Event handler</a> </th><th><a href="#event-handler-event-type">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-onblur" title="handler-onblur"><code>onblur</code></dfn> </td><td> <code title="event-blur">blur</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onerror" title="handler-onerror"><code>onerror</code></dfn> </td><td> <code title="event-error">error</code>
    </td></tr><tr><td><dfn id="handler-onfocus" title="handler-onfocus"><code>onfocus</code></dfn> </td><td> <code title="event-focus">focus</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-onload" title="handler-onload"><code>onload</code></dfn> </td><td> <code title="event-load">load</code>
    </td></tr><tr><td><dfn id="handler-onscroll" title="handler-onscroll"><code>onscroll</code></dfn> </td><td> <code title="event-scroll">scroll</code>
  </td></tr></tbody></table><hr><p>The following are the <a href="#event-handlers">event handlers</a> (and their
  corresponding <a href="#event-handler-event-type" title="event handler event type">event handler
  event types</a>) <span class="impl">that must be</span> supported
  by <code><a href="#window">Window</a></code> objects, as IDL attributes on the
  <code><a href="#window">Window</a></code> object, and with corresponding content
  attributes and IDL attributes exposed on the <code><a href="the-body-element.html#the-body-element">body</a></code> and
  <code><a href="#frameset">frameset</a></code> elements:</p>

  <table><thead><tr><th><a href="#event-handlers" title="event handlers">Event handler</a> </th><th><a href="#event-handler-event-type">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-window-onafterprint" title="handler-window-onafterprint"><code>onafterprint</code></dfn> </td><td> <code title="event-afterprint">afterprint</code>
    </td></tr><tr><td><dfn id="handler-window-onbeforeprint" title="handler-window-onbeforeprint"><code>onbeforeprint</code></dfn> </td><td> <code title="event-beforeprint">beforeprint</code>
    </td></tr><tr><td><dfn id="handler-window-onbeforeunload" title="handler-window-onbeforeunload"><code>onbeforeunload</code></dfn> </td><td> <code title="event-beforeunload">beforeunload</code>
    </td></tr><tr><td><dfn id="handler-window-onblur" title="handler-window-onblur"><code>onblur</code></dfn> </td><td> <code title="event-blur">blur</code>
    </td></tr><tr><td><dfn id="handler-window-onerror" title="handler-window-onerror"><code>onerror</code></dfn> </td><td> <code title="event-error">error</code>
    </td></tr><tr><td><dfn id="handler-window-onfocus" title="handler-window-onfocus"><code>onfocus</code></dfn> </td><td> <code title="event-focus">focus</code>
    </td></tr><tr><td><dfn id="handler-window-onhashchange" title="handler-window-onhashchange"><code>onhashchange</code></dfn> </td><td> <code title="event-hashchange"><a href="#event-hashchange">hashchange</a></code> <!-- new -->
    </td></tr><tr><td><dfn id="handler-window-onload" title="handler-window-onload"><code>onload</code></dfn> </td><td> <code title="event-load">load</code> <!-- widely used -->
    </td></tr><tr><td><dfn id="handler-window-onmessage" title="handler-window-onmessage"><code>onmessage</code></dfn> </td><td> <code title="event-message">message</code> <!-- new for postMessage -->
    </td></tr><tr><td><dfn id="handler-window-onoffline" title="handler-window-onoffline"><code>onoffline</code></dfn> </td><td> <code title="event-offline"><a href="#event-offline">offline</a></code> <!-- new -->
    </td></tr><tr><td><dfn id="handler-window-ononline" title="handler-window-ononline"><code>ononline</code></dfn> </td><td> <code title="event-online"><a href="#event-online">online</a></code> <!-- new -->
    </td></tr><tr><td><dfn id="handler-window-onpagehide" title="handler-window-onpagehide"><code>onpagehide</code></dfn> </td><td> <code title="event-pagehide"><a href="#event-pagehide">pagehide</a></code> <!-- new -->
    </td></tr><tr><td><dfn id="handler-window-onpageshow" title="handler-window-onpageshow"><code>onpageshow</code></dfn> </td><td> <code title="event-pageshow"><a href="#event-pageshow">pageshow</a></code> <!-- new -->
    </td></tr><tr><td><dfn id="handler-window-onpopstate" title="handler-window-onpopstate"><code>onpopstate</code></dfn> </td><td> <code title="event-popstate"><a href="#event-popstate">popstate</a></code> <!-- new -->
    </td></tr><tr><td><dfn id="handler-window-onresize" title="handler-window-onresize"><code>onresize</code></dfn> </td><td> <code title="event-resize">resize</code> <!-- widely used --> <!-- [CSSOM] -->
    </td></tr><tr><td><dfn id="handler-window-onscroll" title="handler-window-onscroll"><code>onscroll</code></dfn> </td><td> <code title="event-scroll">scroll</code>
    </td></tr><tr><td><dfn id="handler-window-onstorage" title="handler-window-onstorage"><code>onstorage</code></dfn> </td><td> <code title="event-storage">storage</code> <!-- new -->
    </td></tr><tr><td><dfn id="handler-window-onunload" title="handler-window-onunload"><code>onunload</code></dfn> </td><td> <code title="event-unload">unload</code> <!-- widely used -->
  </td></tr></tbody></table><p class="note">The <code title="handler-window-onerror"><a href="#handler-window-onerror">onerror</a></code>
  handler is also used for <a href="#runtime-script-errors">reporting script errors</a>.</p>

  <hr><!-- this guy is only on Document and not on HTMLElement because
  otherwise HTMLScriptElement would have it and that causes
  compatibility issues since IE fires readystatechange events on
  <script>, not load events, and we can't fire both, and some sites
  try to decide which to look for based on the presence of
  script.onreadystatechange on HTMLScriptElement.
     http://www.w3.org/Bugs/Public/show_bug.cgi?id=13965
     http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-September/033136.html
  --><p>The following are the <a href="#event-handlers">event handlers</a> (and their
  corresponding <a href="#event-handler-event-type" title="event handler event type">event handler
  event types</a>) <span class="impl">that must be</span> supported
  on <code><a href="dom.html#document">Document</a></code> objects as IDL attributes:</p>

  <table><thead><tr><th><a href="#event-handlers" title="event handlers">Event handler</a> </th><th><a href="#event-handler-event-type">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-onreadystatechange" title="handler-onreadystatechange"><code>onreadystatechange</code></dfn> </td><td> <code title="event-readystatechange"><a href="dom.html#event-readystatechange">readystatechange</a></code>
  </td></tr></tbody></table><div class="impl">

  <h5 id="event-firing"><span class="secno">6.1.6.3 </span>Event firing</h5>

  <p>Certain operations and methods are defined as firing events on
  elements. For example, the <code title="dom-click"><a href="#dom-click">click()</a></code>
  method on the <code><a href="elements.html#htmlelement">HTMLElement</a></code> interface is defined as
  firing a <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> event on the
  element. <a href="#refsDOMEVENTS">[DOMEVENTS]</a></p>

  <p><dfn id="fire-a-simple-event" title="fire a simple event">Firing a simple event named <var title="">e</var></dfn> means that an event with the name <var title="">e</var>, which does not bubble (except where otherwise
  stated) and is not cancelable (except where otherwise stated), and
  which uses the <code><a href="infrastructure.html#event">Event</a></code> interface, must be created and
  dispatched at the given target.</p>

  <p><dfn id="fire-a-synthetic-mouse-event" title="fire a synthetic mouse event">Firing a synthetic
  mouse event named <var title="">e</var></dfn> means that an event
  with the name <var title="">e</var>, which does not bubble (except
  where otherwise stated) and is not cancelable (except where
  otherwise stated), and which uses the <code><a href="infrastructure.html#mouseevent-10">MouseEvent</a></code>
  interface, must be created and dispatched at the given target. The
  event object must have its <code title="">screenX</code>, <code title="">screenY</code>, <code title="">clientX</code>, <code title="">clientY</code>, and <code title="">button</code> attributes
  initialized to 0, its <code title="">ctrlKey</code>, <code title="">shiftKey</code>, <code title="">altKey</code>, and <code title="">metaKey</code> attributes initialized according to the
  current state of the key input device, if any (false for any keys
  that are not available), its <code title="">detail</code> attribute
  initialized to 1, and its <code title="">relatedTarget</code>
  attribute initialized to null. The <code title="">getModifierState()</code> method on the object must return
  values appropriately describing the state of the key input device at
  the time the event is created.</p>

  <p><dfn id="fire-a-click-event" title="fire a click event">Firing a <code title="event-click">click</code> event</dfn> means <a href="#fire-a-synthetic-mouse-event" title="fire
  a synthetic mouse event">firing a synthetic mouse event named <code title="event-click">click</code></a>, which bubbles and is
  cancelable.</p>

  <p>The default action of these events is to do nothing except where
  otherwise stated.</p>

  </div>


  <div class="impl">

  <h5 id="events-and-the-window-object"><span class="secno">6.1.6.4 </span>Events and the <code><a href="#window">Window</a></code> object</h5>

  <p>When an event is dispatched at a DOM node in a
  <code><a href="dom.html#document">Document</a></code> in a <a href="#browsing-context">browsing context</a>, if the
  event is not a <code title="event-load">load</code> event, the user
  agent must act as if, for the purposes of <a href="infrastructure.html#concept-event-dispatch" title="concept-event-dispatch">event dispatching</a>, the
  <code><a href="#window">Window</a></code> object is the parent of the
  <code><a href="dom.html#document">Document</a></code> object. <a href="#refsDOMCORE">[DOMCORE]</a></p>

  </div>


  <h3 id="atob"><span class="secno">6.2 </span>Base64 utility methods</h3>

  <p>The <code title="dom-windowbase64-atob"><a href="#dom-windowbase64-atob">atob()</a></code> and <code title="dom-windowbase64-btoa"><a href="#dom-windowbase64-btoa">btoa()</a></code> methods allow authors to
  transform content to and from the base64 encoding.</p>

  <!-- v2: actual binary support -->

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="windowbase64">WindowBase64</dfn> {
  DOMString <a href="#dom-windowbase64-btoa" title="dom-windowbase64-btoa">btoa</a>(DOMString btoa);
  DOMString <a href="#dom-windowbase64-atob" title="dom-windowbase64-atob">atob</a>(DOMString atob);
};
<a href="#window">Window</a> implements <a href="#windowbase64">WindowBase64</a>;</pre>

  <p class="note">In these APIs, for mnemonic purposes, the "b" can be
  considered to stand for "binary", and the "a" for "ASCII". In
  practice, though, for primarily historical reasons, both the input
  and output of these functions are Unicode strings.</p>

  <dl class="domintro"><dt><var title="">result</var> = <var title="">window</var> . <code title="dom-windowbase64-btoa"><a href="#dom-windowbase64-btoa">btoa</a></code>( <var title="">data</var> )</dt>

   <dd>

    <p>Takes the input data, in the form of a Unicode string
    containing only characters in the range U+0000 to U+00FF, each
    representing a binary byte with values 0x00 to 0xFF respectively,
    and converts it to its base64 representation, which it returns.</p>

    <p>Throws an <code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code> exception if the
    input string contains any out-of-range characters.</p>

   </dd>

   <dt><var title="">result</var> = <var title="">window</var> . <code title="dom-windowbase64-atob"><a href="#dom-windowbase64-atob">atob</a></code>( <var title="">data</var> )</dt>

   <dd>

    <p>Takes the input data, in the form of a Unicode string
    containing base64-encoded binary data, decodes it, and returns a
    string consisting of characters in the range U+0000 to U+00FF,
    each representing a binary byte with values 0x00 to 0xFF
    respectively, corresponding to that binary data.</p>

    <p>Throws an <code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code> exception if the
    input string is not valid base64 data.</p>

   </dd>

  </dl><div class="impl">

  <p class="note">The <code><a href="#windowbase64">WindowBase64</a></code> interface adds to the
  <code><a href="#window">Window</a></code> interface and the <code>WorkerUtils</code>
  interface (part of Web Workers).</p>

  <p>The <dfn id="dom-windowbase64-btoa" title="dom-windowbase64-btoa"><code>btoa()</code></dfn>
  method must throw an <code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code> exception if
  the method's first argument contains any character whose code point
  is greater than U+00FF. Otherwise, the user agent must convert that
  argument to a sequence of octets whose <var title="">n</var>th octet
  is the eight-bit representation of the code point of the <var title="">n</var>th character of the argument, and then must apply
  the base64 algorithm to that sequence of octets, and return the
  result. <a href="#refsRFC4648">[RFC4648]</a><!--base64--></p>
  <!-- Aryeh says: This seems to be what all browsers do as of January
  2011 (except IE, which doesn't support these functions at all). -->


  <p>The <dfn id="dom-windowbase64-atob" title="dom-windowbase64-atob"><code>atob()</code></dfn>
  method must run the following steps to parse the string passed in
  the method's first argument:</p>

  <ol><!-- Aryeh says: Copies Firefox behavior as of January 2011
   (4.0b8). WebKit is somewhat laxer, and Opera throws no exceptions
   at all. gsnedders reports Opera's behavior causes site-compat
   problems, and I figure most sites depend on Firefox if on anything,
   so go with that. --><!-- Since updated to drop whitespace, based on the arguments here:
      http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-May/031613.html
   --><li><p>Let <var title="">input</var> be the string being
   parsed.</p></li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially pointing at the start of the
   string.</p></li>

   <li><p>Remove all <a href="common-microsyntaxes.html#space-character" title="space character">space
   characters</a> from <var title="">input</var>.</p></li>

   <li><p>If the length of <var title="">input</var> divides by 4
   leaving no remainder, then: if <var title="">input</var> ends with
   one or two "=" (U+003D) characters, remove them from <var title="">input</var>.</p></li>

   <li><p>If the length of <var title="">input</var> divides by 4
   leaving a remainder of 1, throw an
   <code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code> exception and abort these
   steps.</p>

   </li><li>

    <p>If <var title="">input</var> contains a character that is not
    in the following list of characters and character ranges, throw an
    <code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code> exception and abort these
    steps:</p>

    <ul class="brief"><li>"+" (U+002B)
     </li><li>"/" (U+002F)
     </li><li><a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>
     </li><li><a href="common-microsyntaxes.html#uppercase-ascii-letters">uppercase ASCII letters</a>
     </li><li><a href="common-microsyntaxes.html#lowercase-ascii-letters">lowercase ASCII letters</a>
    </li></ul></li>

   <li><p>Let <var title="">output</var> be a string, initially
   empty.</p></li>

   <li><p>Let <var title="">buffer</var> be a buffer that can have
   bits appended to it, initially empty.</p></li>

   <li>

    <p>While <var title="">position</var> does not point past the end
    of <var title="">input</var>, run these substeps:</p>

    <ol><li>

      <p>Find the character pointed to by <var title="">position</var>
      in the first column of the following table. Let <var title="">n</var> be the number given in the second cell of the
      same row.</p>

      <div id="base64-table">
       <table><thead><tr><th>Character
          </th><th>Number
        </th></tr></thead><tbody><tr><td>A</td><td>0
         </td></tr><tr><td>B</td><td>1
         </td></tr><tr><td>C</td><td>2
         </td></tr><tr><td>D</td><td>3
         </td></tr><tr><td>E</td><td>4
         </td></tr><tr><td>F</td><td>5
         </td></tr><tr><td>G</td><td>6
         </td></tr><tr><td>H</td><td>7
         </td></tr><tr><td>I</td><td>8
         </td></tr><tr><td>J</td><td>9
         </td></tr><tr><td>K</td><td>10
         </td></tr><tr><td>L</td><td>11
         </td></tr><tr><td>M</td><td>12
         </td></tr><tr><td>N</td><td>13
         </td></tr><tr><td>O</td><td>14
         </td></tr><tr><td>P</td><td>15
         </td></tr><tr><td>Q</td><td>16
         </td></tr><tr><td>R</td><td>17
         </td></tr><tr><td>S</td><td>18
         </td></tr><tr><td>T</td><td>19
         </td></tr><tr><td>U</td><td>20
         </td></tr><tr><td>V</td><td>21
         </td></tr><tr><td>W</td><td>22
         </td></tr><tr><td>X</td><td>23
         </td></tr><tr><td>Y</td><td>24
         </td></tr><tr><td>Z</td><td>25
         </td></tr><tr><td>a</td><td>26
         </td></tr><tr><td>b</td><td>27
         </td></tr><tr><td>c</td><td>28
         </td></tr><tr><td>d</td><td>29
         </td></tr><tr><td>e</td><td>30
         </td></tr><tr><td>f</td><td>31
         </td></tr><tr><td>g</td><td>32
         </td></tr><tr><td>h</td><td>33
         </td></tr><tr><td>i</td><td>34
         </td></tr><tr><td>j</td><td>35
         </td></tr><tr><td>k</td><td>36
         </td></tr><tr><td>l</td><td>37
         </td></tr><tr><td>m</td><td>38
         </td></tr><tr><td>n</td><td>39
         </td></tr><tr><td>o</td><td>40
         </td></tr><tr><td>p</td><td>41
         </td></tr><tr><td>q</td><td>42
         </td></tr><tr><td>r</td><td>43
         </td></tr><tr><td>s</td><td>44
         </td></tr><tr><td>t</td><td>45
         </td></tr><tr><td>u</td><td>46
         </td></tr><tr><td>v</td><td>47
         </td></tr><tr><td>w</td><td>48
         </td></tr><tr><td>x</td><td>49
         </td></tr><tr><td>y</td><td>50
         </td></tr><tr><td>z</td><td>51
         </td></tr><tr><td>0</td><td>52
         </td></tr><tr><td>1</td><td>53
         </td></tr><tr><td>2</td><td>54
         </td></tr><tr><td>3</td><td>55
         </td></tr><tr><td>4</td><td>56
         </td></tr><tr><td>5</td><td>57
         </td></tr><tr><td>6</td><td>58
         </td></tr><tr><td>7</td><td>59
         </td></tr><tr><td>8</td><td>60
         </td></tr><tr><td>9</td><td>61
         </td></tr><tr><td>+</td><td>62
         </td></tr><tr><td>/</td><td>63
       </td></tr></tbody></table></div>

     </li>

     <li><p>Append to <var title="">buffer</var> the six bits
     corresponding to <var title="">number</var>, most significant bit
     first.</p></li>

     <li><p>If <var title="">buffer</var> has accumulated 24 bits,
     interpret them as three 8-bit big-endian numbers. Append the
     three characters with code points equal to those numbers to <var title="">output</var>, in the same order, and then empty <var title="">buffer</var>.</p></li>

     <li><p>Advance <var title="">position</var> by one
     character.</p></li>

    </ol></li>

   <li>

    <p>If <var title="">buffer</var> is not empty, it contains either
    12 or 18 bits. If it contains 12 bits, discard the last four and
    interpret the remaining eight as an 8-bit big-endian number. If it
    contains 18 bits, discard the last two and interpret the remaining
    16 as two 8-bit big-endian numbers. Append the one or two
    characters with code points equal to those one or two numbers to
    <var title="">output</var>, in the same order.</p>

    <p class="note">The discarded bits mean that, for instance, <code title="">atob("YQ")</code> and <code title="">atob("YR")</code>
    both return "<code title="">a</code>".</p>

   </li>

   <li><p>Return <var title="">output</var>.</p></li>

  </ol><!-- Note: this function is defined explicitly here because RFC4648
  does not specify how to handle erroneous input, and no preexisting
  browser implementation simply throws an exception on all erroneous
  input. --></div>

  <p class="note">Some base64 encoders add newlines or other
  whitespace to their output. The <code title="dom-windowbase64-atob"><a href="#dom-windowbase64-atob">atob()</a></code> method throws an
  exception if its input contains characters other than those
  described by the regular expression bracket expression <code title="">[+/=0-9A-Za-z]</code>, so other characters need to be
  removed before <code title="dom-windowbase64-atob"><a href="#dom-windowbase64-atob">atob()</a></code> is
  used for decoding.</p>



  <h3 id="timers"><span class="secno">6.3 </span>Timers</h3>

  <p>The <code title="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout()</a></code>
  and <code title="dom-windowtimers-setInterval"><a href="#dom-windowtimers-setinterval">setInterval()</a></code>
  methods allow authors to schedule timer-based callbacks.</p>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="windowtimers">WindowTimers</dfn> {
  long <a href="#dom-windowtimers-settimeout" title="dom-windowtimers-setTimeout">setTimeout</a>(<span>Function</span> handler, optional long timeout, any... arguments);
  long <a href="#dom-windowtimers-settimeout" title="dom-windowtimers-setTimeout">setTimeout</a>(DOMString handler, optional long timeout, any... arguments);
  void <a href="#dom-windowtimers-cleartimeout" title="dom-windowtimers-clearTimeout">clearTimeout</a>(long handle);
  long <a href="#dom-windowtimers-setinterval" title="dom-windowtimers-setInterval">setInterval</a>(<span>Function</span> handler, optional long timeout, any... arguments);
  long <a href="#dom-windowtimers-setinterval" title="dom-windowtimers-setInterval">setInterval</a>(DOMString handler, optional long timeout, any... arguments);
  void <a href="#dom-windowtimers-clearinterval" title="dom-windowtimers-clearInterval">clearInterval</a>(long handle);
};
<a href="#window">Window</a> implements <a href="#windowtimers">WindowTimers</a>;</pre>

  <!-- Demonstrating the need for wrapping of the timeout argument value treated as long rather than clamping or treating as double:
          http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1228
       Demonstrating the need for the timeout argument to be signed rather than unsigned:
          http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1229
  -->

  <dl class="domintro"><dt><var title="">handle</var> = <var title="">window</var> . <code title="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout</a></code>( <var title="">handler</var> [, <var title="">timeout</var> [, <var title="">arguments</var>... ] ] )</dt>

   <dd>

    <p>Schedules a timeout to run <var title="">handler</var> after
    <var title="">timeout</var> milliseconds. Any <var title="">arguments</var> are passed straight through to the <var title="">handler</var>.</p>

   </dd>

   <dt><var title="">handle</var> = <var title="">window</var> . <code title="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout</a></code>( <var title="">code</var> [, <var title="">timeout</var> ] )</dt>

   <dd>

    <p>Schedules a timeout to compile and run <var title="">code</var>
    after <var title="">timeout</var> milliseconds.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-windowtimers-clearTimeout"><a href="#dom-windowtimers-cleartimeout">clearTimeout</a></code>( <var title="">handle</var> )</dt>

   <dd>

    <p>Cancels the timeout set with <code title="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout()</a></code> identified by <var title="">handle</var>.</p>

   </dd>

   <dt><var title="">handle</var> = <var title="">window</var> . <code title="dom-windowtimers-setInterval"><a href="#dom-windowtimers-setinterval">setInterval</a></code>( <var title="">handler</var> [, <var title="">timeout</var> [, <var title="">arguments</var>... ] ] )</dt>

   <dd>

    <p>Schedules a timeout to run <var title="">handler</var> every
    <var title="">timeout</var> milliseconds. Any <var title="">arguments</var> are passed straight through to the <var title="">handler</var>.</p>

   </dd>

   <dt><var title="">handle</var> = <var title="">window</var> . <code title="dom-windowtimers-setInterval"><a href="#dom-windowtimers-setinterval">setInterval</a></code>( <var title="">code</var> [, <var title="">timeout</var> ] )</dt>

   <dd>

    <p>Schedules a timeout to compile and run <var title="">code</var>
    every <var title="">timeout</var> milliseconds.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-windowtimers-clearInterval"><a href="#dom-windowtimers-clearinterval">clearInterval</a></code>( <var title="">handle</var> )</dt>

   <dd>

    <p>Cancels the timeout set with <code title="dom-windowtimers-setInterval"><a href="#dom-windowtimers-setinterval">setInterval()</a></code> identified by <var title="">handle</var>.</p>

   </dd>

  </dl><p class="note">This API does not guarantee that timers will run
  exactly on schedule. Delays due to CPU load, other tasks, etc, are
  to be expected.</p>

  <div class="impl">

  <p class="note">The <code><a href="#windowtimers">WindowTimers</a></code> interface adds to the
  <code><a href="#window">Window</a></code> interface and the <code>WorkerUtils</code>
  interface (part of Web Workers).
    <a href="#refsWEBWORKERS">[WEBWORKERS]</a>
    </p>

  <p>Each object that implements the <code><a href="#windowtimers">WindowTimers</a></code>
  interface has a <dfn id="list-of-active-timers">list of active timers</dfn>. Each entry in this
  lists is identified by a number, which must be unique within the
  list for the lifetime of the object that implements the
  <code><a href="#windowtimers">WindowTimers</a></code> interface.</p>

  <hr><p>The <dfn id="dom-windowtimers-settimeout" title="dom-windowtimers-setTimeout"><code>setTimeout()</code></dfn>
  method must run the following steps:

  </p><ol><li><p>Let <var title="">handle</var> be a user-agent-defined
   integer that is greater than zero that will identify the timeout to
   be set by this call in the <a href="#list-of-active-timers">list of active
   timers</a>.</p></li>

   <li><p>Add an entry to the <a href="#list-of-active-timers">list of active timers</a> for
   <var title="">handle</var>.</p></li>

   <li><p><a href="#get-the-timed-task">Get the timed task</a> <var title="">handle</var>
   in the <a href="#list-of-active-timers">list of active timers</a>, and let <var title="">task</var> be the result. This algorithm uses the first
   argument to the method (<var title="">handler</var>) and, if there
   are any, the third and subsequent arguments to the method (<var title="">arguments</var>), to establish precisely what <var title="">task</var> does.</p></li>

   <li><p>Let <var title="">timeout</var> be the second argument to
   the method, or zero if the argument was omitted.</p></li>

   <li><p>If the currently running <a href="#concept-task" title="concept-task">task</a> is a task that was created by the
   <code title="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout()</a></code>
   method, and <var title="">timeout</var> is less than 4, then
   increase <var title="">timeout</var> to 4.</p></li>

   <li><p>Return <var title="">handle</var>, and then continue running
   this algorithm asynchronously.</p></li>

   <li>

    <p>If the <a href="#method-context">method context</a> is a <code><a href="#window">Window</a></code>
    object, wait until the <code><a href="dom.html#document">Document</a></code> associated with the
    <a href="#method-context">method context</a> has been <a href="#fully-active">fully active</a> for
    a further <var title="">timeout</var> milliseconds (not
    necessarily consecutively).</p>

    <p>Otherwise, if the <a href="#method-context">method context</a> is a
    <code>WorkerUtils</code> object, wait until <var title="">timeout</var> milliseconds have passed with the worker
    not suspended (not necessarily consecutively).</p>

    <p>Otherwise, act as described in the specification that defines
    that the <code><a href="#windowtimers">WindowTimers</a></code> interface is implemented by
    some other object.</p>

   </li>

   <li>

    <p>Wait until any invocations of this algorithm that had the same
    <a href="#method-context">method context</a>, that started before this one, and
    whose <var title="">timeout</var> is equal to or less than this
    one's, have completed.</p>

    <p class="note">Argument conversion as defined by Web IDL (for
    example, invoking <code title="">toString()</code> methods on
    objects passed as the first argument) happens in the algorithms
    defined in Web IDL, before this algorithm is invoked.</p>

    <div class="example">

     <p>So for example, the following rather silly code will result in
     the log containing "<code title="">ONE&#160;TWO&#160;</code>":</p>

     <pre>var log = '';
function logger(s) { log += s + ' '; }

setTimeout({ toString: function () {
  setTimeout("logger('ONE')", 100);
  return "logger('TWO')";
} }, 100);</pre>

    </div>

   </li>

   <li>

    <p>Optionally, wait a further user-agent defined length of
    time.</p>

    <p class="note">This is intended to allow user agents to pad
    timeouts as needed to optimise the power usage of the device. For
    example, some processors have a low-power mode where the
    granularity of timers is reduced; on such platforms, user agents
    can slow timers down to fit this schedule instead of requiring the
    processor to use the more accurate mode with its associated higher
    power usage.</p>

   </li>

   <li>

    <p><a href="#queue-a-task" title="queue a task">Queue</a> the <a href="#concept-task" title="concept-task">task</a> <var title="">task</var>.</p>

    <p class="note">Once the task has been processed, it is safe to
    remove the entry for <var title="">handle</var> from the
    <a href="#list-of-active-timers">list of active timers</a> (there is no way for the
    entry's existence to be detected past this point, so it does not
    technically matter one way or the other).</p>

   </li>

  </ol><hr><p>The <dfn id="dom-windowtimers-setinterval" title="dom-windowtimers-setInterval"><code>setInterval()</code></dfn>
  method must run the following steps:

  </p><ol><li><p>Let <var title="">handle</var> be a user-agent-defined
   integer that is greater than zero that will identify the timeout to
   be set by this call in the <a href="#list-of-active-timers">list of active
   timers</a>.</p></li>

   <li><p>Add an entry to the <a href="#list-of-active-timers">list of active timers</a> for
   <var title="">handle</var>.</p></li>

   <li><p><a href="#get-the-timed-task">Get the timed task</a> <var title="">handle</var>
   in the <a href="#list-of-active-timers">list of active timers</a>, and let <var title="">task</var> be the result. This algorithm uses the first
   argument to the method (<var title="">handler</var>) and, if there
   are any, the third and subsequent arguments to the method (<var title="">arguments</var>), to establish precisely what <var title="">task</var> does.</p></li>

   <li><p>Let <var title="">timeout</var> be the second argument to
   the method, or zero if the argument was omitted.</p></li>

   <li><p>If <var title="">timeout</var> is less than 4, then
   increase <var title="">timeout</var> to 4.</p></li> <!-- (but see
   note below about IE) -->

   <li><p>Return <var title="">handle</var>, and then continue running
   this algorithm asynchronously.</p></li>

   <!-- Note: IE doesn't actually run intervals with duration zero, it
   aborts roughly here in the algorithm for them. -->

   <li>

    <p><i title="">Wait</i>: If the <a href="#method-context">method context</a> is a
    <code><a href="#window">Window</a></code> object, wait until the <code><a href="dom.html#document">Document</a></code>
    associated with the <a href="#method-context">method context</a> has been <a href="#fully-active">fully
    active</a> for a further <var title="">interval</var>
    milliseconds (not necessarily consecutively).</p>

    <p>Otherwise, if the <a href="#method-context">method context</a> is a
    <code>WorkerUtils</code> object, wait until <var title="">interval</var> milliseconds have passed with the worker
    not suspended (not necessarily consecutively).</p>

    <p>Otherwise, act as described in the specification that defines
    that the <code><a href="#windowtimers">WindowTimers</a></code> interface is implemented by
    some other object.</p>

   </li>

   <li>

    <p>Optionally, wait a further user-agent defined length of
    time.</p>

    <p class="note">This is intended to allow user agents to pad
    timeouts as needed to optimise the power usage of the device. For
    example, some processors have a low-power mode where the
    granularity of timers is reduced; on such platforms, user agents
    can slow timers down to fit this schedule instead of requiring the
    processor to use the more accurate mode with its associated higher
    power usage.</p>

   </li>

   <li><p><a href="#queue-a-task" title="queue a task">Queue</a> the <var title="">task</var> <a href="#concept-task" title="concept-task">task</a>.</p></li>

   <li><p>Return to the step labeled <i>wait</i>.</p></li>

  </ol><hr><p>The <dfn id="dom-windowtimers-cleartimeout" title="dom-windowtimers-clearTimeout"><code>clearTimeout()</code></dfn>
  and <dfn id="dom-windowtimers-clearinterval" title="dom-windowtimers-clearInterval"><code>clearInterval()</code></dfn>
  methods must clear the entry identified as <var title="">handle</var> from the <a href="#list-of-active-timers">list of active timers</a> of
  the <code><a href="#windowtimers">WindowTimers</a></code> object on which the method was
  invoked, where <var title="">handle</var> is the argument passed to
  the method, if any. (If <var title="">handle</var> does not identify
  an entry in the <a href="#list-of-active-timers">list of active timers</a> of the
  <code><a href="#windowtimers">WindowTimers</a></code> object on which the method was invoked,
  the method does nothing.)</p>

  <hr><p>The <dfn id="method-context">method context</dfn>, when referenced by the algorithms
  in this section, is the object on which the method for which the
  algorithm is running is implemented (a <code><a href="#window">Window</a></code> or
  <code>WorkerUtils</code> object).</p>

  <p>When the above methods are invoked and try to <dfn id="get-the-timed-task">get the timed
  task</dfn> <var title="">handle</var> in list <var title="">list</var>,
  they must run the following steps:</p>

  <ol><li>

    <p>If the first argument to the invoked method is a
    <code>Function</code>, then return a <a href="#concept-task" title="concept-task">task</a> that checks if the entry for <var title="">handle</var> in <var title="">list</var> has been
    cleared, and if it has not, calls the <code>Function</code> with
    as its arguments the third and subsequent arguments to the invoked
    method (if any) and with an undefined <var title="">thisArg</var>,
    and abort these steps. <a href="#refsECMA262">[ECMA262]</a></p>

    <p class="note">Setting <var title="">thisArg</var> to undefined
    means that the function code will be executed with the <code title="">this</code> keyword bound to the <code><a href="#windowproxy">WindowProxy</a></code>
    or the <code>WorkerGlobalScope</code> object, as if the code was
    running in the global scope.</p>

    <p>Otherwise, continue with the remaining steps.</p>

   </li>

   <li><p>Let <var title="">script source</var> be the first argument
   to the method.</p></li>

   <li><p>Let <var title="">script language</var> be
   JavaScript.</p></li>

   <li>

    <p>If the <a href="#method-context">method context</a> is a <code><a href="#window">Window</a></code>
    object, let <var title="">global object</var> be the <a href="#method-context">method
    context</a>, let <var title="">browsing context</var> be the
    <a href="#browsing-context">browsing context</a> with which <var title="">global
    object</var> is associated, let <var title="">document</var> and
    <var title="">referrer source</var> be the <code><a href="dom.html#document">Document</a></code>
    associated with <var title="">global object</var>, let <var title="">character encoding</var> be the <a href="infrastructure.html#document's-character-encoding" title="document's
    character encoding">character encoding</a> of the
    <code><a href="dom.html#document">Document</a></code> associated with <var title="">global
    object</var> (<a href="#sce-not-copy">this is a reference, not a
    copy</a>), and let <var title="">base URL</var> be the <a href="urls.html#document-base-url" title="document base URL">base URL</a> of the
    <code><a href="dom.html#document">Document</a></code> associated with <var title="">global
    object</var> (<a href="#sbu-not-copy">this is a reference, not a
    copy</a>).</p>

    <p>Otherwise, if the <a href="#method-context">method context</a> is a
    <code>WorkerUtils</code> object, let <var title="">global
    object</var>, <var title="">browsing context</var>, <var title="">document</var>, <var title="">referrer source</var>, <var title="">character encoding</var>, and <var title="">base
    URL</var> be the <a href="#script's-global-object">script's global object</a>,
    <a href="#script's-browsing-context">script's browsing context</a>, <a href="#script's-document">script's
    document</a>, <a href="#script's-referrer-source">script's referrer source</a>,
    <a href="#script's-url-character-encoding">script's URL character encoding</a>, and <a href="#script's-base-url">script's
    base URL</a> (respectively) of the <a href="#concept-script" title="concept-script">script</a> that the <span>run a
    worker</span> algorithm created when it created the <a href="#method-context">method
    context</a>.</p>

    <p>Otherwise, act as described in the specification that defines
    that the <code><a href="#windowtimers">WindowTimers</a></code> interface is implemented by
    some other object.</p>

   </li>

   <li><p>Return a <a href="#concept-task" title="concept-task">task</a> that checks
   if the entry for <var title="">handle</var> in <var title="">list</var> has been cleared, and if it has not, <a href="#create-a-script" title="create a script">creates a script</a> using <var title="">script source</var> as the script source, the
   <a href="urls.html#url">URL</a> where <var title="">script source</var> can be
   found, <var title="">scripting language</var> as the scripting
   language, <var title="">global object</var> as the global object,
   <var title="">browsing context</var> as the browsing context, <var title="">document</var> as the document, <var title="">referrer
   source</var> as the referrer source, <var title="">character
   encoding</var> as the URL character encoding, and <var title="">base URL</var> as the base URL.</p></li>

  </ol><hr><p>The <a href="#task-source">task source</a> for these <a href="#concept-task" title="concept-task">tasks</a> is the <dfn id="timer-task-source">timer task
  source</dfn>.</p>

  </div>



  <h3 id="user-prompts"><span class="secno">6.4 </span>User prompts</h3>

  <!--
   v2 ideas:
    * in-window modal dialogs
       - escape/enter handling
       - dragging the window out of the tab
    * in-window non-modal palettes
       - with a solution for the mobile space
  -->

  <h4 id="simple-dialogs"><span class="secno">6.4.1 </span>Simple dialogs</h4>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-alert"><a href="#dom-alert">alert</a></code>(<var title="">message</var>)</dt>
   <dd>

    <p>Displays a modal alert with the given message, and waits for the user to dismiss it.</p>

    <p>A call to the <code title="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>
    method is implied when this method is invoked.</p>

   </dd>

   <dt><var title="">result</var> = <var title="">window</var> . <code title="dom-confirm"><a href="#dom-confirm">confirm</a></code>(<var title="">message</var>)</dt>
   <dd>

    <p>Displays a modal OK/Cancel prompt with the given message, waits
    for the user to dismiss it, and returns true if the user clicks OK
    and false if the user clicks Cancel.</p>

    <p>A call to the <code title="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>
    method is implied when this method is invoked.</p>

   </dd>

   <dt><var title="">result</var> = <var title="">window</var> . <code title="dom-prompt"><a href="#dom-prompt">prompt</a></code>(<var title="">message</var> [, <var title="">default</var>] )</dt>
   <dd>

    <p>Displays a modal text field prompt with the given message,
    waits for the user to dismiss it, and returns the value that the
    user entered. If the user cancels the prompt, then returns null
    instead. If the second argument is present, then the given value
    is used as a default.</p>

    <p>A call to the <code title="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>
    method is implied when this method is invoked.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-alert" title="dom-alert"><code>alert(<var title="">message</var>)</code></dfn> method, when invoked, must run
  the following steps:</p>

  <ol><li><p>If the <a href="#event-loop">event loop</a>'s <a href="#termination-nesting-level">termination nesting
   level</a> is non-zero, optionally abort these steps.</p></li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</p></li>

   <li><p>Show the given <var title="">message</var> to the
   user.</p></li>

   <li><p>Optionally, <a href="#pause">pause</a> while waiting for for the
   user to acknowledge the message.</p></li>

  </ol><p>The <dfn id="dom-confirm" title="dom-confirm"><code>confirm(<var title="">message</var>)</code></dfn> method, when invoked, must run
  the following steps:</p>

  <ol><li><p>If the <a href="#event-loop">event loop</a>'s <a href="#termination-nesting-level">termination nesting
   level</a> is non-zero, optionally abort these steps, returning
   false.</p></li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</p></li>

   <li><p>Show the given <var title="">message</var> to the user, and
   ask the user to respond with a positive or negative
   response.</p></li>

   <li><p><a href="#pause">Pause</a> until the user responds either positively
   or negatively.</p></li>

   <li><p>If the user responded positively, return true; otherwise,
   the user responded negatively: return false.</p></li>

  </ol><p>The <dfn id="dom-prompt" title="dom-prompt"><code>prompt(<var title="">message</var>, <var title="">default</var>)</code></dfn>
  method, when invoked, must run the following steps:</p>

  <ol><li><p>If the <a href="#event-loop">event loop</a>'s <a href="#termination-nesting-level">termination nesting
   level</a> is non-zero, optionally abort these steps, returning
   null.</p></li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</p></li>

   <li><p>Show the given <var title="">message</var> to the user, and
   ask the user to either respond with a string value or abort. The
   second argument is optional. If the second argument (<var title="">default</var>) is present, then the response must be
   defaulted to the value given by <var title="">default</var>.</p></li>

   <li><p><a href="#pause">Pause</a> while waiting for the user's
   response.</p></li>

   <li><p>If the user aborts, then return null; otherwise, return the
   string that the user responded with.</p></li>

  </ol></div>


  <h4 id="printing"><span class="secno">6.4.2 </span>Printing</h4>

<!--TOPIC:DOM APIs-->
  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-print"><a href="#dom-print">print</a></code>()</dt>

   <dd>

    <p>Prompts the user to print the page.</p>

    <p>A call to the <code title="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>
    method is implied when this method is invoked.</p>

   </dd>

  </dl><div class="impl">

  <p>When the <dfn id="dom-print" title="dom-print"><code>print()</code></dfn> method
  is invoked, if the <code><a href="dom.html#document">Document</a></code> is <a href="#ready-for-post-load-tasks">ready for
  post-load tasks</a>, then the user agent must synchronously run
  the <a href="#printing-steps">printing steps</a>. Otherwise, the user agent must only
  set the <dfn id="print-when-loaded">print when loaded</dfn> flag on the
  <code><a href="dom.html#document">Document</a></code>.</p>
<!--TOPIC:HTML-->

  <p>User agents should also run the <a href="#printing-steps">printing steps</a>
  whenever the user asks for the opportunity to <a href="#obtain-a-physical-form">obtain a
  physical form</a> (e.g. printed copy), or the representation of a
  physical form (e.g. PDF copy), of a document.</p>

  <p>The <dfn id="printing-steps">printing steps</dfn> are as follows:</p>

  <ol><li>

    <p>The user agent may display a message to the user and/or may
    abort these steps.</p>

    <p class="example">For instance, a kiosk browser could silently
    ignore any invocations of the <code title="dom-print"><a href="#dom-print">print()</a></code> method.</p>

    <p class="example">For instance, a browser on a mobile device
    could detect that there are no printers in the vicinity and
    display a message saying so before continuing to offer a "save to
    PDF" option.</p>

   </li>

   <li>

    <p>The user agent must <a href="#fire-a-simple-event">fire a simple event</a> named
    <code title="event-beforeprint">beforeprint</code> at the
    <code><a href="#window">Window</a></code> object of the <code><a href="dom.html#document">Document</a></code> that is
      being printed, as well as any <a href="#nested-browsing-context" title="nested browsing
    context">nested browsing contexts</a> in it.</p>

    <p class="example">The <code title="event-beforeprint">beforeprint</code> event can be used
    to annotate the printed copy, for instance adding the time at
    which the document was printed.</p>

   </li>

   <li>

    <p>The user agent must release the <a href="#storage-mutex">storage mutex</a>.</p>

   </li>

   <li>

    <p>The user agent should offer the user the opportunity to
    <a href="#obtain-a-physical-form">obtain a physical form</a> (or the representation of a
    physical form) of the document. The user agent may wait for the
    user to either accept or decline before returning; if so, the user
    agent must <a href="#pause">pause</a> while the method is waiting. Even if
    the user agent doesn't wait at this point, the user agent must use
    the state of the relevant documents as they are at this point in
    the algorithm if and when it eventually creates the alternate
    form.</p>

   </li>

   <li>

    <p>The user agent must <a href="#fire-a-simple-event">fire a simple event</a> named
    <code title="event-afterprint">afterprint</code> at the
    <code><a href="#window">Window</a></code> object of the <code><a href="dom.html#document">Document</a></code> that is
    being printed, as well as any <a href="#nested-browsing-context" title="nested browsing
    context">nested browsing contexts</a> in it.</p>

    <p class="example">The <code title="event-afterprint">afterprint</code> event can be used
    to revert annotations added in the earlier event, as well as
    showing post-printing UI. For instance, if a page is walking the
    user through the steps of applying for a home loan, the script
    could automatically advance to the next step after having printed
    a form or other.</p>

   </li>

  </ol></div>


<!--TOPIC:DOM APIs-->
  <h4 id="dialogs-implemented-using-separate-documents"><span class="secno">6.4.3 </span>Dialogs implemented using separate documents</h4>

  <dl class="domintro"><dt><var title="">result</var> = <var title="">window</var> . <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog</a></code>(<var title="">url</var> [, <var title="">argument</var>] )</dt>

   <dd>

    <p>Prompts the user with the given page, waits for that page to
    close, and returns the return value.</p>

    <p>A call to the <code title="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>
    method is implied when this method is invoked.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-showmodaldialog" title="dom-showModalDialog"><code>showModalDialog(<var title="">url</var>, <var title="">argument</var><!--, <var
  title="">features</var>-->)</code></dfn> method, when invoked, must
  cause the user agent to run the following steps:</p>

  <ol><li>

    <p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> <var title="">url</var> relative to the <a href="#entry-script">entry script</a>'s
    <a href="#script's-base-url" title="script's base URL">base URL</a>.</p>

    <p>If this fails, then throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception
    and abort these steps.</p>

   </li>

   <li><p>If the <a href="#event-loop">event loop</a>'s <a href="#termination-nesting-level">termination nesting
   level</a> is non-zero, optionally abort these steps, returning
   the empty string.</p></li>

   <li>

    <p>Release the <a href="#storage-mutex">storage mutex</a>.</p>

   </li>

   <li>

    <p>If the user agent is configured such that this invocation of
    <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code> is
    somehow disabled, then return the empty string and abort these
    steps.</p>

    <p class="note">User agents are expected to disable this method in
    certain cases to avoid user annoyance (e.g. as part of their popup
    blocker feature). For instance, a user agent could require that a
    site be white-listed before enabling this method, or the user
    agent could be configured to only allow one modal dialog at a
    time.</p>

   </li>

   <li>

    <p>If the <a href="#active-sandboxing-flag-set">active sandboxing flag set</a>
    of the <a href="#active-document">active document</a>
    of the <a href="#script's-browsing-context" title="script's browsing context">browsing context</a>
    of the <a href="#concept-script" title="concept-script">script</a> that invoked the method
    has its
    <a href="#sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed auxiliary navigation browsing context flag</a>
    set, then return the empty string and abort these steps.</p>

   </li>

   <li>

    <p>Let <var title="">the list of background browsing
    contexts</var> be a list of all the browsing contexts that:</p>

    <ul><li>are part of the same <a href="#unit-of-related-browsing-contexts">unit of related browsing
     contexts</a> as the browsing context of the
     <code><a href="#window">Window</a></code> object on which the <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code> method was
     called, and that</li>

     <li>have an <a href="#active-document">active document</a> whose
     <a href="#origin-0">origin</a> is the <a href="#same-origin" title="same origin">same</a>
     as the <a href="#origin-0">origin</a> of the <a href="#concept-script" title="concept-script">script</a> that called the <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code> method at
     the time the method was called,</li> <!-- Note that changing
     document.domain to talk to another domain doesn't make you able
     to block that domain -->

    </ul><p>...as well as any browsing contexts that are nested inside any
    of the browsing contexts matching those conditions.</p>

   </li>

   <li>

    <p>Disable the user interface for all the browsing contexts in
    <var title="">the list of background browsing contexts</var>. This
    should prevent the user from navigating those browsing contexts,
    causing events to be sent to those browsing context, or editing
    any content in those browsing contexts. However, it does not
    prevent those browsing contexts from receiving events from sources
    other than the user, from running scripts, from running
    animations, and so forth.</p>

   </li>

   <li>

    <p>Create a new <a href="#auxiliary-browsing-context">auxiliary browsing context</a>, with the
    <a href="#opener-browsing-context">opener browsing context</a> being the browsing context of
    the <code><a href="#window">Window</a></code> object on which the <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code> method was
    called. The new auxiliary browsing context has no name.</p>

    <p class="note">This <a href="#browsing-context">browsing context</a>'s
    <code><a href="dom.html#document">Document</a></code>s' <code><a href="#window">Window</a></code> objects all implement
    the <code><a href="#windowmodal">WindowModal</a></code> interface.</p>

   </li>

   <li>

    <p>Set all the flags
    in the new browsing context's <a href="#popup-sandboxing-flag-set">popup sandboxing flag set</a>
    that are set in the
    <a href="#active-sandboxing-flag-set">active sandboxing flag set</a>
    of the <a href="#active-document">active document</a>
    of the <a href="#script's-browsing-context" title="script's browsing context">browsing context</a>
    of the <a href="#concept-script" title="concept-script">script</a> that invoked the method.
    The <a href="#script's-browsing-context" title="script's browsing context">browsing context</a>
    of the <a href="#concept-script" title="concept-script">script</a> that invoked the method
    must be set as the new browsing context's
    <a href="#one-permitted-sandboxed-navigator">one permitted sandboxed navigator</a>.</p>

   </li>

   <li>

    <p>Let the <a href="#dialog-arguments">dialog arguments</a> of the new browsing
    context be set to the value of <var title="">argument</var>, or
    the 'undefined' value if the argument was omitted.</p>

   </li>

   <li>

    <p>Let the <a href="#dialog-arguments'-origin">dialog arguments' origin</a> be the
    <a href="#origin-0">origin</a> of the <a href="#concept-script" title="concept-script">script</a> that called the <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code> method.</p>

   </li>

   <li>

    <p><a href="#navigate">Navigate</a><!--DONAV showModalDialog--> the new
    <a href="#browsing-context">browsing context</a> to the <a href="urls.html#absolute-url">absolute URL</a>
    that resulted from <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a>
    <var title="">url</var> earlier, with <a href="#replacement-enabled">replacement
    enabled</a>, and with the <a href="#script's-browsing-context" title="script's browsing
    context">browsing context</a> of the <a href="#concept-script" title="concept-script">script</a> that invoked the method as
    the <a href="#source-browsing-context">source browsing context</a>.</p>

   </li>

   <li>

    <p><a href="#spin-the-event-loop">Spin the event loop</a> until the new <a href="#browsing-context">browsing
    context</a> is closed. (The user agent must allow the user to
    indicate that the <a href="#browsing-context">browsing context</a> is to be
    closed.)</p>

   </li>

   <li>

    <p>Reenable the user interface for all the browsing contexts in
    <var title="">the list of background browsing contexts</var>.</p>

   </li>

   <li>

    <p>Return the <a href="#auxiliary-browsing-context">auxiliary browsing context</a>'s
    <a href="#return-value">return value</a>.</p>

   </li>

  </ol><p>The <code><a href="#window">Window</a></code> objects of <code><a href="dom.html#document">Document</a></code>s hosted
  by <a href="#browsing-context" title="browsing context">browsing contexts</a> created
  by the above algorithm must also implement the
  <code><a href="#windowmodal">WindowModal</a></code> interface.</p>

  <p class="note">When this happens, the members of the
  <code><a href="#windowmodal">WindowModal</a></code> interface, in JavaScript environments,
  appear to actually be part of the <code><a href="#window">Window</a></code> interface
  (e.g. they are on the same prototype chain as the <code title="dom-alert"><a href="#dom-alert">window.alert()</a></code> method).</p>

  </div>

  <pre class="idl">[NoInterfaceObject] interface <dfn id="windowmodal">WindowModal</dfn> {
  readonly attribute any <a href="#dom-windowmodal-dialogarguments" title="dom-WindowModal-dialogArguments">dialogArguments</a>;
           attribute DOMString <a href="#dom-windowmodal-returnvalue" title="dom-WindowModal-returnValue">returnValue</a>;
};</pre>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-WindowModal-dialogArguments"><a href="#dom-windowmodal-dialogarguments">dialogArguments</a></code></dt>

   <dd>

    <p>Returns the <var title="">argument</var> argument that was
    passed to the <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code> method.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-WindowModal-returnValue"><a href="#dom-windowmodal-returnvalue">returnValue</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the current return value for the window.</p>

    <p>Can be set, to change the value that will be returned by the
    <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code>
    method.</p>

   </dd>

  </dl><div class="impl">

  <p>Such browsing contexts have associated <dfn id="dialog-arguments">dialog
  arguments</dfn>, which are stored along with the <dfn id="dialog-arguments'-origin">dialog
  arguments' origin</dfn>. These values are set by the <code title="dom-showModalDialog"><a href="#dom-showmodaldialog">showModalDialog()</a></code> method in the
  algorithm above, when the browsing context is created, based on the
  arguments provided to the method.</p>

  <p>The <dfn id="dom-windowmodal-dialogarguments" title="dom-WindowModal-dialogArguments"><code>dialogArguments</code></dfn>
  IDL attribute, on getting, must check whether its browsing context's
  <a href="#active-document">active document</a>'s <a href="#origin-0">origin</a> is the <a href="#same-origin" title="same origin">same</a> as the <a href="#dialog-arguments'-origin">dialog arguments'
  origin</a>. If it is, then the browsing context's <a href="#dialog-arguments">dialog
  arguments</a> must be returned unchanged. Otherwise, if the
  <a href="#dialog-arguments">dialog arguments</a> are an object, then the empty string
  must be returned, and if the <a href="#dialog-arguments">dialog arguments</a> are not
  an object, then the stringification of the <a href="#dialog-arguments">dialog
  arguments</a> must be returned.

  </p><p>These browsing contexts also have an associated <dfn id="return-value">return
  value</dfn>. The <a href="#return-value">return value</a> of a browsing context
  must be initialized to the empty string when the browsing context is
  created.</p>

  <p>The <dfn id="dom-windowmodal-returnvalue" title="dom-WindowModal-returnValue"><code>returnValue</code></dfn>
  IDL attribute, on getting, must return the <a href="#return-value">return value</a>
  of its browsing context, and on setting, must set the <a href="#return-value">return
  value</a> to the given new value.</p>

  </div>

  <p class="note">The <code title="dom-window-close"><a href="#dom-window-close">window.close()</a></code> method can be used to
  close the browsing context.</p>
<!--TOPIC:HTML-->


<!--TOPIC:DOM APIs-->
  <h3 id="system-state-and-capabilities"><span class="secno">6.5 </span>System state and capabilities</h3>

  <h4 id="the-navigator-object"><span class="secno">6.5.1 </span>The <code><a href="#navigator">Navigator</a></code> object</h4>

  <div class="impl">

  <p>The <dfn id="dom-navigator" title="dom-navigator"><code>navigator</code></dfn>
  attribute of the <code><a href="#window">Window</a></code> interface must return an
  instance of the <code><a href="#navigator">Navigator</a></code> interface, which represents
  the identity and state of the user agent (the client), and allows
  Web pages to register themselves as potential protocol and content
  handlers:</p>

  </div>

  <pre class="idl">interface <dfn id="navigator">Navigator</dfn> {
  // objects implementing this interface also implement the interfaces given below
};
<a href="#navigator">Navigator</a> implements <a href="#navigatorid">NavigatorID</a>;
<a href="#navigator">Navigator</a> implements <a href="#navigatoronline">NavigatorOnLine</a>;
<a href="#navigator">Navigator</a> implements <a href="#navigatorcontentutils">NavigatorContentUtils</a>;
<a href="#navigator">Navigator</a> implements <a href="#navigatorstorageutils">NavigatorStorageUtils</a>;</pre>

<!-- v2:
  cookieEnabled geolocator javaEnabled mozIsLocallyAvailable preference
  readonly attribute <span>MimeTypeArray</span> <span title="dom-navigator-mimeTypes">mimeTypes</span>;
  readonly attribute <span>PluginArray</span> <span title="dom-navigator-plugins">plugins</span>;
  (the latter is used in a <video> element demo now, so we might need to pull this forward from v2!)
-->

  <div class="impl">

  <p>These interfaces are defined separately so that other
  specifications can re-use parts of the <code><a href="#navigator">Navigator</a></code>
  interface.</p>

   <!-- v2: also, could expose languages:
   <dt><dfn title="dom-navigator-browserLanguage"><code>browserLanguage</code></dfn></dt> <!- - Opera and IE only - ->
   <dd><p>Must return either null or a language tag representing the language the browser uses in its interface.</p></dd>
   <dt><dfn title="dom-navigator-userLanguage"><code>userLanguage</code></dfn></dt> <!- - Opera and IE only - ->
   <dt><dfn title="dom-navigator-language"><code>language</code></dfn></dt> <!- - Opera, Safari, and Mozilla only - ->
   <dd><p>Must return either null or a language tag representing the user's preferred language.</p></dd>
   -->

  </div>


  <h5 id="client-identification"><span class="secno">6.5.1.1 </span>Client identification</h5>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatorid">NavigatorID</dfn> {<!--
  readonly attribute DOMString <span title="dom-navigator-appCodeName">appCodeName</span>;-->
  readonly attribute DOMString <a href="#dom-navigator-appname" title="dom-navigator-appName">appName</a>;
  readonly attribute DOMString <a href="#dom-navigator-appversion" title="dom-navigator-appVersion">appVersion</a>;
  readonly attribute DOMString <a href="#dom-navigator-platform" title="dom-navigator-platform">platform</a>;
  readonly attribute DOMString <a href="#dom-navigator-useragent" title="dom-navigator-userAgent">userAgent</a>;
};</pre>

  <p>In certain cases, despite the best efforts of the entire
  industry, Web browsers have bugs and limitations that Web authors
  are forced to work around.</p>

  <p>This section defines a collection of attributes that can be used
  to determine, from script, the kind of user agent in use, in order
  to work around these issues.</p>

  <p>Client detection should always be limited to detecting known
  current versions; future versions and unknown versions should always
  be assumed to be fully compliant.</p>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-appName"><a href="#dom-navigator-appname">appName</a></code></dt>
   <dd>
    <p>Returns the name of the browser.</p>
   </dd>

   <dt><var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-appVersion"><a href="#dom-navigator-appversion">appVersion</a></code></dt>
   <dd>
    <p>Returns the version of the browser.</p>
   </dd>

   <dt><var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-platform"><a href="#dom-navigator-platform">platform</a></code></dt>
   <dd>
    <p>Returns the name of the platform.</p>
   </dd>

   <dt><var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-userAgent"><a href="#dom-navigator-useragent">userAgent</a></code></dt>
   <dd>
    <p>Returns the complete User-Agent header.</p>
   </dd>

  </dl><div class="impl">

  <dl><!-- redundant
   <dt><dfn title="dom-navigator-appCodeName"><code>appCodeName</code></dfn></dt>
   <dd><p>Must return the string "<code title="">Mozilla</code>".</p></dd>
   --><!-- appMinorVersion: IE only. In IE8b1, returns " Beta" (with the space) --><dt><dfn id="dom-navigator-appname" title="dom-navigator-appName"><code>appName</code></dfn></dt>
   <dd><p>Must return either the string "<code title="">Netscape</code>" or the full name of the browser, e.g. "<code title="">Mellblom Browsernator</code>".</p></dd>

   <dt><dfn id="dom-navigator-appversion" title="dom-navigator-appVersion"><code>appVersion</code></dfn></dt>
   <dd><p>Must return either the string "<code title="">4.0</code>" or a string representing the version of the browser in detail, e.g. "<code title="">1.0 (VMS; en-US) Mellblomenator/9000</code>".</p></dd>

   <!-- buildID: Mozilla only -->

   <!-- oscpu: Mozilla only -->

   <dt><dfn id="dom-navigator-platform" title="dom-navigator-platform"><code>platform</code></dfn></dt>
   <dd><p>Must return either the empty string or a string representing the platform on which the browser is executing, e.g. "<code title="">MacIntel</code>", "<code title="">Win32</code>", "<code title="">FreeBSD i386</code>", "<code title="">WebTV OS</code>".</p></dd>

   <!-- product: Mozilla and Safari only; always returns "Gecko" -->

   <!-- productSub: Mozilla and Safari only; returns same as buildID in Mozilla, and returns the fixed string "20030107" in Safari -->

   <!-- securityPolicy: Mozilla only; always returns "" -->

   <!-- taintEnabled(): Opera, IE and Mozilla have this function as one that always returns false -->

   <dt><dfn id="dom-navigator-useragent" title="dom-navigator-userAgent"><code>userAgent</code></dfn></dt>
   <dd><p>Must return the string used for the value of the "<code title="">User-Agent</code>" header in HTTP requests, or the empty string if no such header is ever sent.</p></dd>

   <!-- vendor: Mozilla and Safari only; always returns "" in Mozilla, and returns the fixed string "Apple Computer, Inc." in Safari -->

   <!-- vendorSub: Mozilla and Safari only; always returns "" -->

  </dl><p class="warning">Any information in this API that varies from user
  to user can be used to profile the user. In fact, if enough such
  information is available, a user can actually be uniquely
  identified. For this reason, user agent implementors are strongly
  urged to include as little information in this API as possible.
  <!--INSERT FINGERPRINT-->
  </p>

  </div>


  <h5 id="custom-handlers"><span class="secno">6.5.1.2 </span>Custom scheme and content handlers</h5>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatorcontentutils">NavigatorContentUtils</dfn> {
  // content handler registration
  void <a href="#dom-navigator-registerprotocolhandler" title="dom-navigator-registerProtocolHandler">registerProtocolHandler</a>(DOMString scheme, DOMString url, DOMString title);
  void <a href="#dom-navigator-registercontenthandler" title="dom-navigator-registerContentHandler">registerContentHandler</a>(DOMString mimeType, DOMString url, DOMString title);
  DOMString <a href="#dom-navigator-isprotocolhandlerregistered" title="dom-navigator-isProtocolHandlerRegistered">isProtocolHandlerRegistered</a>(DOMString scheme, DOMString url);
  DOMString <a href="#dom-navigator-iscontenthandlerregistered" title="dom-navigator-isContentHandlerRegistered">isContentHandlerRegistered</a>(DOMString mimeType, DOMString url);
  void <a href="#dom-navigator-unregisterprotocolhandler" title="dom-navigator-unregisterProtocolHandler">unregisterProtocolHandler</a>(DOMString scheme, DOMString url);
  void <a href="#dom-navigator-unregistercontenthandler" title="dom-navigator-unregisterContentHandler">unregisterContentHandler</a>(DOMString mimeType, DOMString url);
};</pre>

  <p>The <dfn id="dom-navigator-registerprotocolhandler" title="dom-navigator-registerProtocolHandler"><code>registerProtocolHandler()</code></dfn>
  method allows Web sites to register themselves as possible handlers
  for particular schemes. For example, an online telephone messaging
  service could register itself as a handler of the <code>sms:</code>
  scheme, so that if the user clicks on such a link, he is given the
  opportunity to use that Web site. Analogously, the <dfn id="dom-navigator-registercontenthandler" title="dom-navigator-registerContentHandler"><code>registerContentHandler()</code></dfn>
  method allows Web sites to register themselves as possible handlers
  for content in a particular <a href="infrastructure.html#mime-type">MIME type</a>. For example, the
  same online telephone messaging service could register itself as a
  handler for <code>text/vcard</code> files, so that if the user has
  no native application capable of handling vCards, his Web browser
  can instead suggest he use that site to view contact information
  stored on vCards that he opens. <a href="#refsRFC5724">[RFC5724]</a>
  <a href="#refsRFC6350">RFC6350</a></p>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler</a></code>(<var title="">scheme</var>, <var title="">url</var>, <var title="">title</var>)</dt>
   <dt><var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler</a></code>(<var title="">mimeType</var>, <var title="">url</var>, <var title="">title</var>)</dt>

   <dd>

    <p>Registers a handler for the given scheme or content type, at
    the given URL, with the given title.</p>

    <p>The string "<code title="">%s</code>" in the URL is used as a
    placeholder for where to put the URL of the content to be
    handled.</p>

    <p>Throws a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception if the user agent
    blocks the registration (this might happen if trying to register
    as a handler for "http", for instance).</p>

    <p>Throws a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> if the "<code title="">%s</code>" string is missing in the URL.</p>

   </dd>

  </dl><div class="impl">

  <p>User agents may, within the constraints described in this
  section, do whatever they like when the methods are called. A UA
  could, for instance, prompt the user and offer the user the
  opportunity to add the site to a shortlist of handlers, or make the
  handlers his default, or cancel the request. UAs could provide such
  a UI through modal UI or through a non-modal transient notification
  interface. UAs could also simply silently collect the information,
  providing it only when relevant to the user.</p>

  <p>User agents should keep track of which sites have registered
  handlers (even if the user has declined such registrations) so that
  the user is not repeatedly prompted with the same request.</p>

  <p>The arguments to the methods have the following meanings and
  corresponding implementation requirements. The requirements that
  involve throwing exceptions must be processed in the order given
  below, stopping at the first exception thrown. (So the exceptions
  for the first argument take precedence over the exceptions for the
  second argument.)</p>

  <dl><dt><var title="">scheme</var> (<code title="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler()</a></code> only)</dt>

   <dd>

    <p>A scheme, such as <code>mailto</code> or <code>web+auth</code>.
    The scheme must be compared in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
    case-insensitive</a> manner by user agents for the purposes of
    comparing with the scheme part of URLs that they consider against
    the list of registered handlers.</p>

    <p>The <var title="">scheme</var> value, if it contains a colon
    (as in "<code>mailto:</code>"), will never match anything, since
    schemes don't contain colons.</p>

    <p>If the <code title="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler()</a></code>
    method is invoked with a scheme that is neither a
    <a href="#whitelisted-scheme">whitelisted scheme</a> nor a scheme whose value starts
    with the substring "<code title="">web+</code>" and otherwise
    contains only characters in the range <a href="common-microsyntaxes.html#lowercase-ascii-letters">lowercase ASCII letters</a>, the user agent must throw a
    <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception.</p>

    <p>The following schemes are the <dfn id="whitelisted-scheme" title="whitelisted
    scheme">whitelisted schemes</dfn>:</p>

    <ul class="brief"><li><code title="">irc</code></li>
     <li><code title="">mailto</code></li>
     <li><code title="">magnet</code></li>
     <li><code title="">mms</code></li>
     <li><code title="">news</code></li>
     <li><code title="">nntp</code></li>
     <li><code title="">sip</code></li>
     <li><code title="">sms</code></li>
     <li><code title="">smsto</code></li>
     <li><code title="">ssh</code></li>
     <li><code title="">tel</code></li>
     <li><code title="">urn</code></li>
     <li><code title="">webcal</code></li>
     <li><code title="">xmpp</code></li>
    </ul><p class="note">This list can be changed. If there are schemes
    that should be added, please send feedback.</p>

    <p class="note">This list excludes any schemes that could
    reasonably be expected to be supported inline, e.g. in an
    <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, such as <code title="">http</code> or (more
    theoretically) <code title="">gopher</code>. If those were
    supported, they could potentially be used in man-in-the-middle
    attacks, by replacing pages that have frames with such content
    with content under the control of the protocol handler. If the
    user agent has native support for the schemes, this could further
    be used for cookie-theft attacks.</p>

   </dd>

   <dt><var title="">mimeType</var> (<code title="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code> only)</dt>

   <dd>

    <p>A <a href="infrastructure.html#mime-type">MIME type</a>, such as
    <code>model/vnd.flatland.3dml</code> or
    <code>application/vnd.google-earth.kml+xml</code>. The <a href="infrastructure.html#mime-type">MIME
    type</a> must be compared in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
    case-insensitive</a> manner by user agents for the purposes of
    comparing with MIME types of documents that they consider against
    the list of registered handlers.</p>

    <p>User agents must compare the given values only to the MIME
    type/subtype parts of content types, not to the complete type
    including parameters. Thus, if <var title="">mimeType</var> values
    passed to this method include characters such as commas or
    whitespace, or include MIME parameters, then the handler being
    registered will never be used.</p>

    <p class="note">The type is compared to the <a href="infrastructure.html#mime-type">MIME type</a>
    used by the user agent <em>after</em> the sniffing algorithms have
    been applied.</p>

    <p>If the <code title="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code>
    method is invoked with a <a href="infrastructure.html#mime-type">MIME type</a> that is in the
    <a href="#type-blacklist">type blacklist</a> or that the user agent has deemed a
    privileged type, the user agent must throw a
    <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception.</p>

    <p>The following <a href="infrastructure.html#mime-type" title="MIME type">MIME types</a> are in
    the <dfn id="type-blacklist">type blacklist</dfn>:</p>

    <ul class="brief"><li><code><a href="#application/x-www-form-urlencoded">application/x-www-form-urlencoded</a></code></li>
     <li><code><a href="#application/xhtml+xml">application/xhtml+xml</a></code></li>
     <li><code>application/xml</code></li>
     <li><code>image/gif</code></li>
     <li><code>image/jpeg</code></li>
     <li><code>image/png</code></li>
     <li><code>image/svg+xml</code></li>
     <li><code><a href="#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code></li>
     <li><code><a href="#text/cache-manifest">text/cache-manifest</a></code></li>
     <li><code>text/css</code></li>
     <li><code><a href="#text/html">text/html</a></code></li>
     <li><code>text/ping</code></li>
     <li><code>text/plain</code></li>
     <li><code>text/xml</code></li>
     <li>All types that the user agent supports displaying natively in a <a href="#browsing-context">browsing context</a> during <a href="#navigate" title="navigate">navigation</a>, except for <code>application/rss+xml</code> and <code>application/atom+xml</code></li>

    </ul><p class="note">This list can be changed. If there are schemes
    that should be added, please send feedback.</p>

   </dd>


   <dt><var title="">url</var></dt>

   <dd>

    <p>A string used to build the <a href="urls.html#url">URL</a> of the page that
    will handle the requests.</p>

    <p>User agents must throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception if
    the <var title="">url</var> argument passed to one of these
    methods does not contain the exact literal string
    "<code><a href="the-s-element.html#the-s-element">%s</a></code>".</p>

    <p>User agents must throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> if <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> the <var title="">url</var>
    argument relative to the <a href="#entry-script">entry script</a>'s <a href="#script's-base-url" title="script's base URL">base URL</a>, is not successful.</p>

    <p class="note">The resulting <a href="urls.html#absolute-url">absolute URL</a> would by
    definition not be a <a href="urls.html#valid-url">valid URL</a> as it would include the
    string "<code title="">%s</code>" which is not a valid component
    in a URL.</p>

    <p>User agents must throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception if
    the resulting <a href="urls.html#absolute-url">absolute URL</a> has an <a href="#origin-0">origin</a>
    that differs from the <a href="#origin-0">origin</a> of the <a href="#entry-script">entry
    script</a>.</p>

    <p class="note">This is forcibly the case if the <code title="">%s</code> placeholder is in the scheme, host, or port
    parts of the URL.</p>

    <p>The resulting <a href="urls.html#absolute-url">absolute URL</a> is the
    <dfn id="proto-url">proto-URL</dfn>. It identifies the handler for the purposes
    of the methods described below.</p>

    <p>When the user agent uses this handler, it must replace the
    first occurrence of the exact literal string "<code title="">%s</code>" in the <var title="">url</var> argument with
    an escaped version of the <a href="urls.html#absolute-url">absolute URL</a> of the content
    in question (as defined below), then <a href="urls.html#resolve-a-url" title="resolve a
    url">resolve</a> the resulting URL, relative to the <a href="#script's-base-url" title="script's base URL">base URL</a> of the <a href="#entry-script">entry
    script</a> at the time the <code title="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code>
    or <code title="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler()</a></code>
    methods were invoked, and then <a href="#navigate">navigate</a><!--DONAV
    user--> an appropriate <a href="#browsing-context">browsing context</a> to the
    resulting URL using the GET method (<a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">or equivalent</a> for
    non-HTTP URLs).</p>

    <p>To get the escaped version of the <a href="urls.html#absolute-url">absolute URL</a> of
    the content in question, the user agent must replace every
    character in that <a href="urls.html#absolute-url">absolute URL</a> that doesn't match the
    &lt;query&gt; production defined in RFC 3986 by the
    percent-encoded form of that character. <a href="#refsRFC3986">[RFC3986]</a></p>

    <div class="example">

     <p>If the user had visited a site at <code title="">http://example.com/</code> that made the following
     call:</p>

     <pre>navigator.registerContentHandler('application/x-soup', 'soup?url=%s', 'SoupWeb&#8482;')</pre>

     <p>...and then, much later, while visiting <code title="">http://www.example.net/</code>, clicked on a link such
     as:</p>

     <pre>&lt;a href="chickenk&#239;wi.soup"&gt;Download our Chicken K&#239;wi soup!&lt;/a&gt;</pre>

     <p>...then, assuming this <code>chickenk&#239;wi.soup</code> file
     was served with the <a href="infrastructure.html#mime-type">MIME type</a>
     <code>application/x-soup</code>, the UA might navigate to the
     following URL:</p>

     <pre>http://example.com/soup?url=http://www.example.net/chickenk%C3%AFwi.soup</pre>

     <p>This site could then fetch the <code>chickenk&#239;wi.soup</code>
     file and do whatever it is that it does with soup (synthesize it
     and ship it to the user, or whatever).</p>

    </div>

   </dd>

   <dt><var title="">title</var></dt>

   <dd>

    <p>A descriptive title of the handler, which the UA might use to
    remind the user what the site in question is.</p>

   </dd>

  </dl><p>This section does not define how the pages registered by these
  methods are used, beyond the requirements on how to process the <var title="">url</var> value (see above). To some extent, the <a href="#navigate" title="navigate">processing model for navigating across
  documents</a> defines some cases where these methods are
  relevant, but in general UAs may use this information wherever they
  would otherwise consider handing content to native plugins or helper
  applications.</p>

  <p>UAs must not use registered content handlers to handle content
  that was returned as part of a non-GET transaction (or rather, as
  part of any non-idempotent transaction), as the remote site would
  not be able to fetch the same data.</p>

  <hr></div>

  <p>In addition to the registration methods, there are also methods
  for determining if particular handlers have been registered, and for
  unregistering handlers.</p>

  <dl class="domintro"><dt><var title="">state</var> = <var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-isProtocolHandlerRegistered"><a href="#dom-navigator-isprotocolhandlerregistered">isProtocolHandlerRegistered</a></code>(<var title="">scheme</var>, <var title="">url</var>)</dt>
   <dt><var title="">state</var> = <var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-isContentHandlerRegistered"><a href="#dom-navigator-iscontenthandlerregistered">isContentHandlerRegistered</a></code>(<var title="">mimeType</var>, <var title="">url</var>)</dt>

   <dd>

    <p>Returns one of the following strings describing the state of
    the handler given by the arguments:</p>

    <dl><dt><code title="">new</code>
     </dt><dd>Indicates that no attempt has been made to register the given
     handler (or that the handler has been unregistered). It would be
     appropriate to promote the availability of the handler or to just
     automatically register the handler.

     </dd><dt><code title="">registered</code>
     </dt><dd>Indicates that the given handler has been registered or that
     the site is blocked from registering the handler. Trying to
     register the handler again would have no effect.

     </dd><dt><code title="">declined</code>
     </dt><dd>Indicates that the given handler has been offered but was
     rejected. Trying to register the handler again may prompt the
     user again.

    </dd></dl></dd>

   <dt><var title="">state</var> = <var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-unregisterProtocolHandler"><a href="#dom-navigator-unregisterprotocolhandler">unregisterProtocolHandler</a></code>(<var title="">scheme</var>, <var title="">url</var>)</dt>
   <dt><var title="">state</var> = <var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-unregisterContentHandler"><a href="#dom-navigator-unregistercontenthandler">unregisterContentHandler</a></code>(<var title="">mimeType</var>, <var title="">url</var>)</dt>

   <dd>

    <p>Unregisters the handler given by the arguments.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-navigator-isprotocolhandlerregistered" title="dom-navigator-isProtocolHandlerRegistered"><code>isProtocolHandlerRegistered()</code></dfn>
  method must return the <a href="#handler-state-string">handler state string</a> that most
  closely describes the current state of the handler described by the
  two arguments to the method, where the first argument gives the
  scheme and the second gives the string used to build the
  <a href="urls.html#url">URL</a> of the page that will handle the requests.
  <!--INSERT FINGERPRINT-->
  </p>

  <p>The first argument must be compared to the schemes for which
  custom protocol handlers are registered in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> manner to find the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and
  if that is successful, must then be matched against the <a href="#proto-url" title="proto-URL">proto-URLs</a> of the relevant handlers to find
  the described handler.</p>

  <hr><p>The <dfn id="dom-navigator-iscontenthandlerregistered" title="dom-navigator-isContentHandlerRegistered"><code>isContentHandlerRegistered()</code></dfn>
  method must return the <a href="#handler-state-string">handler state string</a> that most
  closely describes the current state of the handler described by the
  two arguments to the method, where the first argument gives the
  <a href="infrastructure.html#mime-type">MIME type</a> and the second gives the string used to build
  the <a href="urls.html#url">URL</a> of the page that will handle the requests.
  <!--INSERT FINGERPRINT-->
  </p>

  <p>The first argument must be compared to the <a href="infrastructure.html#mime-type" title="MIME
  type">MIME types</a> for which custom content handlers are
  registered in an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> manner to find
  the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and
  if that is successful, must then be matched against the
  <a href="#proto-url" title="proto-URL">proto-URLs</a> of the relevant handlers to
  find the described handler.</p>

  <hr><p>The <dfn id="handler-state-string" title="handler state string">handler state strings</dfn>
  are the following strings. Each string describes several situations,
  as given by the following list.</p>

  <dl><dt><code title="">new</code>

   </dt><dd>The described handler has never been registered for the given
   scheme or type.

   <dd>The described handler was once registered for the given scheme
   or type, but the site has since unregistered it. If the handler
   were to be reregistered, the user would be notified accordingly.

   <dd>The described handler was once registered for the given scheme
   or type, but the site has since unregistered it, but the user has
   indicated that the site is to be blocked from registering the type
   again, so the user agent would ignore further registration attempts.


   </dd></dd></dd><dt><code title="">registered</code>

   </dt><dd>An attempt was made to register the described handler for the
   given scheme or type, but the user has not yet been notified, and
   the user agent would ignore further registration attempts. (Maybe
   the user agent batches registration requests to display them when
   the user requests to be notified about them, and the user has not
   yet requested that the user agent notify it of the previous
   registration attempt.)

   <dd>The described handler is registered for the given scheme or
   type (maybe, or maybe not, as the default handler).

   <dd>The described handler is permanently blocked from being
   (re)registered. (Maybe the user marked the registration attempt as
   spam, or blocked the site for other reasons.)


   </dd></dd></dd><dt><code title="">declined</code>

   </dt><dd>An attempt was made to register the described handler for the
   given scheme or type, but the user has not yet been notified;
   however, the user might be notified if another registration attempt
   were to be made. (Maybe the last registration attempt was made
   while the page was in the background and the user closed the page
   without looking at it, and the user agent requires confirmation for
   this registration attempt.)

   <dd>An attempt was made to register the described handler for the
   given scheme or type, but the user has not yet responded.

   <dd>An attempt was made to register the described handler for the
   given scheme or type, but the user declined the offer. The user has
   not indicated that the handler is to be permanently blocked,
   however, so another attempt to register the described handler might
   result in the user being prompted again.

   <dd>The described handler was once registered for the given scheme
   or type, but the user has since removed it. The user has not
   indicated that the handler is to be permanently blocked, however,
   so another attempt to register the described handler might result
   in the user being prompted again.

  </dd></dd></dd></dd></dl><hr><p>The <dfn id="dom-navigator-unregisterprotocolhandler" title="dom-navigator-unregisterProtocolHandler"><code>unregisterProtocolHandler()</code></dfn>
  method must unregister the handler described by the two arguments to
  the method, where the first argument gives the scheme and the second
  gives the string used to build the <a href="urls.html#url">URL</a> of the page that
  will handle the requests.</p>

  <p>The first argument must be compared to the schemes for which
  custom protocol handlers are registered in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> manner to find the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and
  if that is successful, must then be matched against the <a href="#proto-url" title="proto-URL">proto-URLs</a> of the relevant handlers to find
  the described handler.</p>

  <hr><p>The <dfn id="dom-navigator-unregistercontenthandler" title="dom-navigator-unregisterContentHandler"><code>unregisterContentHandler()</code></dfn>
  method must unregister the handler described by the two arguments to
  the method, where the first argument gives the <a href="infrastructure.html#mime-type">MIME
  type</a> and the second gives the string used to build the
  <a href="urls.html#url">URL</a> of the page that will handle the requests.</p>

  <p>The first argument must be compared to the <a href="infrastructure.html#mime-type" title="MIME
  type">MIME types</a> for which custom content handlers are
  registered in an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> manner to find
  the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and
  if that is successful, must then be matched against the
  <a href="#proto-url" title="proto-URL">proto-URLs</a> of the relevant handlers to
  find the described handler.</p>

  <hr><p>The second argument of the four methods described above must be
  preprocessed as follows:</p>

  <ol><li><p>If the string does not contain the substring "<code title="">%s</code>", abort these steps. There's no matching
   handler.</p></li>

   <li><p><a href="urls.html#resolve-a-url" title="resolve a URL">Resolve</a> the string
   relative to the <a href="#script's-base-url" title="script's base URL">base URL</a> of
   the <a href="#entry-script">entry script</a>.</p></li>

   <li><p>If this fails, then throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code>
   exception, aborting the method.</p></li>

   <li><p>If the resoluting <a href="urls.html#absolute-url">absolute URL</a>'s
   <a href="#origin-0">origin</a> is not the <a href="#same-origin">same origin</a> as that of
   the <a href="#entry-script">entry script</a> throw a <a href="infrastructure.html#securityerror">SecurityError</a>
   exception, aborting the method.</p></li>

   <li><p>Return the resulting <a href="urls.html#absolute-url">absolute URL</a> as the result
   of preprocessing the argument.</p></li>

  </ol></div>



<!--ADD-TOPIC:Security-->
  <div class="impl">

  <h5 id="security-and-privacy"><span class="secno">6.5.1.3 </span>Security and privacy</h5>

  <p>These mechanisms can introduce a number of concerns, in
  particular privacy concerns.</p>

  <p><strong>Hijacking all Web usage.</strong> User agents should not
  allow schemes that are key to its normal operation, such as
  <code>http</code> or <code>https</code>, to be rerouted through
  third-party sites. This would allow a user's activities to be
  trivially tracked, and would allow user information, even in secure
  connections, to be collected.</p>

  <p><strong>Hijacking defaults.</strong> It is strongly recommended
  that user agents do not automatically change any defaults, as this
  could lead the user to send data to remote hosts that the user is
  not expecting. New handlers registering themselves should never
  automatically cause those sites to be used.</p>

  <p><strong>Registration spamming.</strong> User agents should
  consider the possibility that a site will attempt to register a
  large number of handlers, possibly from multiple domains (e.g. by
  redirecting through a series of pages each on a different domain,
  and each registering a handler for <code>video/mpeg</code> &#8212;
  analogous practices abusing other Web browser features have been
  used by pornography Web sites for many years). User agents should
  gracefully handle such hostile attempts, protecting the user.</p>

  <p><strong>Misleading titles.</strong> User agents should not rely
  wholly on the <var title="">title</var> argument to the methods when
  presenting the registered handlers to the user, since sites could
  easily lie. For example, a site <code>hostile.example.net</code>
  could claim that it was registering the "Cuddly Bear Happy Content
  Handler". User agents should therefore use the handler's domain in
  any UI along with any title.</p>

  <p><strong>Hostile handler metadata.</strong> User agents should
  protect against typical attacks against strings embedded in their
  interface, for example ensuring that markup or escape characters in
  such strings are not executed, that null bytes are properly handled,
  that over-long strings do not cause crashes or buffer overruns, and
  so forth.</p>

  <p><strong>Leaking Intranet URLs.</strong> The mechanism described
  in this section can result in secret Intranet URLs being leaked, in
  the following manner:</p>

  <ol><li>The user registers a third-party content handler as the default
   handler for a content type.</li>

   <li>The user then browses his corporate Intranet site and accesses
   a document that uses that content type.</li>

   <li>The user agent contacts the third party and hands the third
   party the URL to the Intranet content.</li>

  </ol><p>No actual confidential file data is leaked in this manner, but
  the URLs themselves could contain confidential information. For
  example, the URL could be
  <code>http://www.corp.example.com/upcoming-aquisitions/the-sample-company.egf</code>,
  which might tell the third party that Example Corporation is
  intending to merge with The Sample Company. Implementors might wish
  to consider allowing administrators to disable this feature for
  certain subdomains, content types, or schemes.</p>

  <p><strong>Leaking secure URLs.</strong> User agents should not send
  HTTPS URLs to third-party sites registered as content handlers
  without the user's informed consent, for the same reason that user
  agents sometimes avoid sending <code title="http-referer">Referer</code> (sic) HTTP headers from secure
  sites to third-party sites.</p>

  <p><strong>Leaking credentials.</strong> User agents must never send
  username or password information in the URLs that are escaped and
  included sent to the handler sites. User agents may even avoid
  attempting to pass to Web-based handlers the URLs of resources
  that are known to require authentication to access, as such sites
  would be unable to access the resources in question without
  prompting the user for credentials themselves (a practice that would
  require the user to know whether to trust the third-party handler, a
  decision many users are unable to make or even understand).</p>

  </div>
<!--REMOVE-TOPIC:Security-->


  <div class="impl">

  <h5 id="sample-handler-impl"><span class="secno">6.5.1.4 </span>Sample user interface</h5>

  <p><i>This section is non-normative.</i></p>
  <p>A simple implementation of this feature for a desktop Web browser
  might work as follows.</p>

  <p>The <code title="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code>
  method could display a modal dialog box:</p>

  <p><img alt="The modal dialog box could have the title 'Content Handler Registration', and could say 'This Web page: Kittens at work http://kittens.example.org/ ...would like permission to handle files of type: application/x-meowmeow using the following Web-based application: Kittens-at-work displayer http://kittens.example.org/?show=%s Do you trust the administrators of the &quot;kittens.example.org&quot; domain?' with two buttons, 'Trust kittens.example.org' and 'Cancel'." height="374" src="images/sample-content-handler-registration.png" width="534"></p>

  <p>In this dialog box, "Kittens at work" is the title of the page
  that invoked the method, "http://kittens.example.org/" is the URL of
  that page, "application/x-meowmeow" is the string that was passed to
  the <code title="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code>
  method as its first argument (<var title="">mimeType</var>),
  "http://kittens.example.org/?show=%s" was the second argument (<var title="">url</var>), and "Kittens-at-work displayer" was the third
  argument (<var title="">title</var>).</p>

  <p>If the user clicks the Cancel button, then nothing further
  happens. If the user clicks the "Trust" button, then the handler is
  remembered.</p>

  <p>When the user then attempts to fetch a URL that uses the
  "application/x-meowmeow" <a href="infrastructure.html#mime-type">MIME type</a>, then it might
  display a dialog as follows:</p>

  <p><img alt="The dialog box could have the title 'Unknown File Type' and could say 'You have attempted to access:' followed by a URL, followed by a prompt such as 'How would you like FerretBrowser to handle this resource?' with three radio buttons, one saying 'Contact the FerretBrowser plugin registry to see if there is an official way to handle this resource.', one saying 'Pass this URL to a local application' with an application selector, and one saying 'Pass this URL to the &quot;Kittens-at-work displayer&quot; application at &quot;kittens.example.org&quot;', with a checkbox labeled 'Always do this for resources using the &quot;application/x-meowmeow&quot; type in future.', and with two buttons, 'Ok' and 'Cancel'." height="428" src="images/sample-content-handler.png" width="577"></p>

  <p>In this dialog, the third option is the one that was primed by
  the site registering itself earlier.</p>

  <p>If the user does select that option, then the browser, in
  accordance with the requirements described in the previous two
  sections, will redirect the user to
  "http://kittens.example.org/?show=data%3Aapplication/x-meowmeow;base64,S2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D".</p>

  <p>The <code title="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler()</a></code>
  method would work equivalently, but for schemes instead of unknown
  content types.</p>

  </div>



  <h5 id="manually-releasing-the-storage-mutex"><span class="secno">6.5.1.5 </span>Manually releasing the storage mutex</h5>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatorstorageutils">NavigatorStorageUtils</dfn> {
  void <a href="#dom-navigator-yieldforstorageupdates" title="dom-navigator-yieldForStorageUpdates">yieldForStorageUpdates</a>();
};</pre>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code title="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">yieldForStorageUpdates</a></code>()</dt>

   <dd>

    <p>If a script uses the <code title="dom-document-cookie"><a href="dom.html#dom-document-cookie">document.cookie</a></code> API, or the
    <code title="dom-localStorage">localStorage</code> API, the
    browser will block other scripts from accessing cookies or storage
    until the first script finishes.
        <a href="#refsWEBSTORAGE">[WEBSTORAGE]</a>
        </p>

    <p>Calling the <code title="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>
    method tells the user agent to unblock any other scripts that may
    be blocked, even though the script hasn't returned.</p>

    <p>Values of cookies and items in the <code>Storage</code> objects
    of <code title="dom-localStorage">localStorage</code> attributes
    can change after calling this method, whence its name.
        <a href="#refsWEBSTORAGE">[WEBSTORAGE]</a>
        </p>

   </dd>

  </dl><div class="impl">

   <p>The <dfn id="dom-navigator-yieldforstorageupdates" title="dom-navigator-yieldForStorageUpdates"><code>yieldForStorageUpdates()</code></dfn>
   method, when invoked, must, if the <a href="#storage-mutex">storage mutex</a> is
   owned by the <a href="#event-loop">event loop</a> of the <a href="#concept-task" title="concept-task">task</a> that resulted in the method being
   called, release the <a href="#storage-mutex">storage mutex</a> so that it is once
   again free. Otherwise, it must do nothing.</p>

  </div>


  <h4 id="the-external-interface"><span class="secno">6.5.2 </span>The <code><a href="#external">External</a></code> interface</h4>

  <div class="impl">

  <p>The <dfn id="dom-external" title="dom-external"><code>external</code></dfn>
  attribute of the <code><a href="#window">Window</a></code> interface must return an
  instance of the <code><a href="#external">External</a></code> interface. The same object
  must be returned each time.</p>

  </div>

  <pre class="idl">interface <dfn id="external">External</dfn> {
  void <a href="#dom-external-addsearchprovider" title="dom-external-AddSearchProvider">AddSearchProvider</a>(DOMString engineURL);
  unsigned long <a href="#dom-external-issearchproviderinstalled" title="dom-external-IsSearchProviderInstalled">IsSearchProviderInstalled</a>(DOMString engineURL);
};</pre>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-external"><a href="#dom-external">external</a></code> . <code title="dom-external-AddSearchProvider"><a href="#dom-external-addsearchprovider">AddSearchProvider</a></code>( <var title="">url</var> )</dt>
   <dd>

    <p>Adds the search engine described by the OpenSearch description
    document at <var title="">url</var>. <a href="#refsOPENSEARCH">[OPENSEARCH]</a></p>

    <p>The OpenSearch description document has to be on the same
    server as the script that calls this method.</p>

   </dd>

   <dt><var title="">installed</var> = <var title="">window</var> . <code title="dom-external"><a href="#dom-external">external</a></code> . <code title="dom-external-IsSearchProviderInstalled"><a href="#dom-external-issearchproviderinstalled">IsSearchProviderInstalled</a></code>( <var title="">url</var> )</dt>
   <dd>

    <p>Returns a value based on comparing <var title="">url</var> to
    the URLs of the results pages of the installed search engines.</p>

    <dl><dt>0 </dt><dd>None of the installed search engines match <var title="">url</var>.
     </dd><dt>1 </dt><dd>One or more installed search engines match <var title="">url</var>, but none are the user's default search engine.
     </dd><dt>2 </dt><dd>The user's default search engine matches <var title="">url</var>.
    </dd></dl><p>The <var title="">url</var> is compared to the URLs of the
    results pages of the installed search engines using a prefix
    match. Only results pages on the same domain as the script that
    calls this method are checked.</p>

   </dd>

  </dl><p class="note">Another way of exposing search engines using
  OpenSearch description documents is using a <code><a href="the-link-element.html#the-link-element">link</a></code>
  element with the <code title="rel-search"><a href="#link-type-search">search</a></code> link
  type.</p>

  <div class="impl">

   <p>The <dfn id="dom-external-addsearchprovider" title="dom-external-AddSearchProvider"><code>AddSearchProvider()</code></dfn>
   method, when invoked, must run the following steps:</p>

   <ol><li><p>Optionally, abort these steps. User agents may implement
    the method as a stub method that never does anything, or may
    arbitrarily ignore invocations with particular arguments for
    security, privacy, or usability reasons.</p></li>

    <li><p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> the value of the
    method's first argument relative to the <a href="#entry-script">entry
    script</a>'s <a href="#script's-base-url" title="script's base URL">base
    URL</a>.</p></li>

    <li><p>If this fails, abort these steps.</p></li>

    <li><p>Process the resulting <a href="urls.html#absolute-url">absolute URL</a> as the
    <a href="urls.html#url">URL</a> to an OpenSearch description document. <a href="#refsOPENSEARCH">[OPENSEARCH]</a></p></li>

   </ol><p>The <dfn id="dom-external-issearchproviderinstalled" title="dom-external-IsSearchProviderInstalled"><code>IsSearchProviderInstalled()</code></dfn>
   method, when invoked, must run the following steps:
   <!--INSERT FINGERPRINT-->
   </p>

   <ol><li><p>Optionally, return 0 and abort these steps. User agents may
    implement the method as a stub method that never returns a
    non-zero value, or may arbitrarily ignore invocations with
    particular arguments for security, privacy, or usability
    reasons.</p></li>

    <li><p>If the <a href="#origin-0">origin</a> of the <a href="#entry-script">entry script</a>
    is an opaque identifier (i.e. it has no host component), then
    return 0 and abort these steps.</p></li>

    <li><p>Let <var title="">host1</var> be the host component of the
    <a href="#origin-0">origin</a> of the <a href="#entry-script">entry script</a>.</p></li>

    <li><p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> the <var title="">scriptURL</var> argument relative to the <a href="#entry-script">entry
    script</a>'s <a href="#script's-base-url" title="script's base URL">base
    URL</a>.</p></li>

    <li><p>If this fails, return 0 and abort these steps.</p></li>

    <li><p>Let <var title="">host2</var> be be the <a href="urls.html#url-host" title="url-host">&lt;host&gt;</a> component of the resulting
    <a href="urls.html#absolute-url">absolute URL</a>.</p></li>

    <li>

     <p>If the longest suffix in the Public Suffix List that matches
     the end of <var title="">host1</var> is different than the
     longest suffix in the Public Suffix List that matches the end of
     <var title="">host2</var>, then return 0 and abort these steps.
     <a href="#refsPSL">[PSL]</a></p>

     <p>If the next domain component of <var title="">host1</var> and
     <var title="">host2</var> after their common suffix are not the
     same, then return 0 and abort these steps.</p>

     <p>Domain labels must be compared after applying the IDNA ToASCII
     algorithm to them, with both the AllowUnassigned and
     UseSTD3ASCIIRules flags set, in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
     case-insensitive</a> manner. <a href="#refsRFC3490">[RFC3490]</a></p>

    </li>

    <li><p>Let <var title="">search engines</var> be the list of
    search engines known by the user agent and made available to the
    user by the user agent for which the resulting <a href="urls.html#absolute-url">absolute
    URL</a> is a <a href="infrastructure.html#prefix-match">prefix match</a> of the search engine's
    <a href="urls.html#url">URL</a>, if any. For search engines registered using
    OpenSearch description documents, the <a href="urls.html#url">URL</a> of the
    search engine corresponds to the URL given in a <code title="">Url</code> element whose <code title="">rel</code>
    attribute is "<code title="">results</code>" (the default). <a href="#refsOPENSEARCH">[OPENSEARCH]</a></p></li>

    <li><p>If <var title="">search engines</var> is empty, return 0
    and abort these steps.</p></li>

    <li><p>If the user's default search engine (as determined by the
    user agent) is one of the search engines in <var title="">search
    engines</var>, then return 2 and abort these steps.</p></li>

    <li><p>Return 1.</p></li>

   </ol></div>
<!--TOPIC:HTML-->



  <h2 id="editing"><span class="secno">7 </span><dfn>User interaction</dfn></h2>


  <h3 id="the-hidden-attribute"><span class="secno">7.1 </span>The <dfn title="attr-hidden"><code>hidden</code></dfn> attribute</h3>

  <p>All <a href="infrastructure.html#html-elements">HTML elements</a> may have the <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> content attribute set. The <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute is a <a href="common-microsyntaxes.html#boolean-attribute">boolean
  attribute</a>. When specified on an element, it indicates that
  the element is not yet, or is no longer, directly relevant to the
  page's current state, or that it is being used to declare content to
  be reused by other parts of the page as opposed to being directly
  accessed by the user. <span class="impl">User agents should not
  render elements that have the <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute specified.</span></p>

  <div class="example">

   <p>In the following skeletal example, the attribute is used to hide
   the Web game's main screen until the user logs in:</p>

   <pre>  &lt;h1&gt;The Example Game&lt;/h1&gt;
  &lt;section id="login"&gt;
   &lt;h2&gt;Login&lt;/h2&gt;
   &lt;form&gt;
    ...
    &lt;!-- calls login() once the user's credentials have been checked --&gt;
   &lt;/form&gt;
   &lt;script&gt;
    function login() {
      // switch screens
      document.getElementById('login').hidden = true;
      document.getElementById('game').hidden = false;
    }
   &lt;/script&gt;
  &lt;/section&gt;
  &lt;section id="game" hidden&gt;
   ...
  &lt;/section&gt;</pre>

  </div>

  <p>The <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute must not be
  used to hide content that could legitimately be shown in another
  presentation. For example, it is incorrect to use <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> to hide panels in a tabbed dialog,
  because the tabbed interface is merely a kind of overflow
  presentation &#8212; one could equally well just show all the form
  controls in one big page with a scrollbar. It is similarly incorrect
  to use this attribute to hide content just from one presentation
  &#8212; if something is marked <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code>, it is hidden from all
  presentations, including, for instance, screen readers.</p>

  <!-- for example, "<a hidden href=#content>Skip to content</a>" would be inappropriate. -->
  <!-- (but only add that example if you first add some more good valid examples -->

  <p>Elements that are not themselves <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> must not <a href="#hyperlink">hyperlink</a> to
  elements that are <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code>. The <code title="">for</code> attributes of <code><a href="the-label-element.html#the-label-element">label</a></code> and
  <code><a href="the-output-element.html#the-output-element">output</a></code> elements that are not themselves <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> must similarly not refer to
  elements that are <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code>. In both
  cases, such references would cause user confusion.</p>

  <p>Elements and scripts may, however, refer to elements that are
  <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> in other contexts.</p>

  <div class="example">

   <p>For example, it would be incorrect to use the <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute to link to a
   section marked with the <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code>
   attribute. If the content is not applicable or relevant, then there
   is no reason to link to it.</p>

   <p>It would be fine, however, to use the ARIA <code title="attr-aria-describedby">aria-describedby</code> attribute to
   refer to descriptions that are themselves <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code>. While hiding the descriptions
   implies that they are not useful alone, they could be written in
   such a way that they are useful in the specific context of being
   referenced from the images that they describe.</p>

   <p>Similarly, a <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code> element with the <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute could be used by a
   scripted graphics engine as an off-screen buffer, and a form
   control could refer to a hidden <code><a href="the-form-element.html#the-form-element">form</a></code> element using its
   <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code> attribute.</p>

  </div>

  <p>Accessibility APIs are encouraged to provide a way to expose
  structured content while marking it as hidden in the default view.
  Such content should not be perceivable to users in the normal document
  flow in any modality, whether using Assistive Technology (AT) or
  mainstream User Agents.</p>

  <p>When such features are available, User Agents may use them to
  expose the full semantics of <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code>
  elements to AT when appropriate, if such content is referenced
  indirectly by an <a href="infrastructure.html#concept-id" title="concept-id">ID reference</a> or
  <a href="common-microsyntaxes.html#valid-hash-name-reference">valid hash-name reference</a>. This allows ATs to access the
  structure of these <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> elements
  upon user request, while keeping the content hidden in all
  presentations of the normal document flow. Authors who wish to prevent
  user-initiated viewing of a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code>
  element should not reference the element with such a mechanism.</p>

  <p>Because some User Agents have flattened hidden content when
  exposing such content to AT, authors should not reference <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> content which would lose essential
  meaning when flattened.</p>

  <p>For example, it would be appropriate for the structure of <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> table headers referenced from a
  <code title="attr-tdth-headers"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-headers">headers</a></code> attribute to be exposed
  to users of AT with such an API.</p>

  <p>Cases where it would be inappropriate for the structure of <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> elements to be exposed to users of
  AT with such an API include:</p>

  <ul><li>a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> element referenced by
   an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute within the
   same document</li>

   <li>a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> form element referenced
   by a <code><a href="the-label-element.html#the-label-element">label</a></code> element's <code title="attr-label-for"><a href="the-label-element.html#attr-label-for">for</a></code> attribute (because the sorts of
   elements referenced from a <code><a href="the-label-element.html#the-label-element">label</a></code> element's <code title="attr-label-for"><a href="the-label-element.html#attr-label-for">for</a></code> attribute lose meaning when
   flattened)</li>

  </ul><p>Specifications which define elements and attributes which may be
  included in <a href="infrastructure.html#conforming-documents" title="Conforming documents">conforming HTML5
  documents</a> (such as SVG, MathML, and WAI-ARIA) may define how or
  whether this applies to their elements and attributes. <a href="#refsARIA">[ARIA]</a> <a href="#refsMATHML">[MATHML]</a> <a href="#refsSVG">[SVG]</a></p>

  <p>Elements in a section hidden by the <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute are still active,
  e.g. scripts and form controls in such sections still execute
  and submit respectively. Only their presentation to the user
  changes.</p>

  <div class="impl">

  <p>The <dfn id="dom-hidden" title="dom-hidden"><code>hidden</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the content attribute of the
  same name.</p>

  </div>

  <h3 id="inert-subtrees"><span class="secno">7.2 </span>Inert subtrees</h3>

  <p>A subtree of a <code><a href="dom.html#document">Document</a></code> can be marked as
  <dfn id="inert">inert</dfn>. When a node or one of its ancestors is
  <a href="#inert">inert</a>, then the user agent must act as if the element
  was absent for the purposes of targetting user interaction events,
  may ignore the node for the purposes of text search user interfaces
  (commonly known as "find in page"), and may prevent the user from
  selecting text in that node. User agents should allow the user to
  override the restrictions on search and text selection, however.</p>

  <p class="example">For example, consider a page that consists of
  just a single <a href="#inert">inert</a> paragraph positioned in the middle
  of a <code><a href="the-body-element.html#the-body-element">body</a></code>. If a user moves their pointing device from
  the <code><a href="the-body-element.html#the-body-element">body</a></code> over to the <a href="#inert">inert</a> paragraph and
  clicks on the paragraph, no <code title="event-mouseover">mouseover</code> event would be fired, and
  the <code title="event-mousemove">mousemove</code> and <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> events would be fired on the
  <code><a href="the-body-element.html#the-body-element">body</a></code> element rather than the paragraph.</p>

  <p class="note">When a node or one of its ancestors is inert, it
  also can't be focused (see the <a href="#focusing-steps">focusing steps</a>), and it
  is disabled if it is a <a href="#concept-command" title="concept-command">command</a>.</p>

  <p>An entire <code><a href="dom.html#document">Document</a></code> can be marked as <dfn id="blocked-by-a-modal-dialog">blocked by
  a modal dialog</dfn> <var title="">dialog</var>. While a
  <code><a href="dom.html#document">Document</a></code> is so marked, every node that is <a href="infrastructure.html#in-a-document" title="in a Document">in the <code>Document</code></a>, with the
  exception of the <var title="">dialog</var> element, its ancestors,
  and its descendants, must be marked <a href="#inert">inert</a>. (The
  elements excepted by this paragraph can additionally be marked
  <a href="#inert">inert</a> through other means; being part of a modal dialog
  does not "protect" a node from being marked <a href="#inert">inert</a>.)</p>

  <p>Only one element at a time can mark a <code><a href="dom.html#document">Document</a></code> as
  being <a href="#blocked-by-a-modal-dialog">blocked by a modal dialog</a>. When a new
  <code><a href="#the-dialog-element">dialog</a></code> is made to <a href="#blocked-by-a-modal-dialog" title="blocked by a modal
  dialog">block</a> a <code><a href="dom.html#document">Document</a></code>, the previous element,
  if any, stops blocking the <code><a href="dom.html#document">Document</a></code>.</p>

  <p class="note">The <code><a href="#the-dialog-element">dialog</a></code> element's <code title="dom-dialog-showModal"><a href="#dom-dialog-showmodal">showModal()</a></code> method makes use of
  this mechanism.</p>


<!--INERT-->


<!--TOPIC:DOM APIs-->
  <h3 id="activation"><span class="secno">7.3 </span>Activation</h3>

  <!-- v2 idea: HTMLImageElement.click(x, y); or clickPoint(), if
       click() can't be done in IE; can this be emulated in IE by
       posting a synthetic mouse click event with those X and Y
       coords? (ack Csaba Gabor)
  -->

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-click"><a href="#dom-click">click</a></code>()</dt>

   <dd>

    <p>Acts as if the element was clicked.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-click" title="dom-click"><code>click()</code></dfn> method must
  <a href="content-models.html#run-synthetic-click-activation-steps">run synthetic click activation steps</a> on the
  element.</p>

  </div>
<!--TOPIC:HTML-->


  <h3 id="focus"><span class="secno">7.4 </span>Focus</h3>

  <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%20%0A...%3Cform%3E%3Cinput%20name%3Da%20onfocus%3D%22value%2B%3D1%3Bd.name%3D%27a%27%3Bname%3D%27d%27%3Bb.focus()%22%3E%0A%3Cinput%20name%3Db%20onfocus%3D%22value%2B%3D1%3Bc.focus()%22%3E%0A%3Cinput%20name%3Dc%20onfocus%3D%22value%2B%3D1%3Bd.focus()%22%3E%0A%3Cinput%20name%3Dd%20onfocus%3D%22value%2B%3D1%3Ba.focus()%22%3E -->

  <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cform%3E%0A%3Ctextarea%20name%3Dt%20cols%3D100%20rows%3D3%3E%3C%2Ftextarea%3E%3Cp%3E%0A%3Cinput%20name%3Da%20onfocus%3D%22t.value%2B%3D%27af1%20%27%3Bb.focus()%3Balert(document.activeElement.name)%3Bt.value%2B%3D%27af2%20%27%3B%22%20onblur%3D%22t.value%2B%3D%27ab%20%27%3B%22%3E%0A%3Cinput%20name%3Db%20onfocus%3D%22t.value%2B%3D%27bf1%20%27%3Bc.focus()%3Bt.value%2B%3D%27bf2%20%27%3B%22%20onblur%3D%22t.value%2B%3D%27bb%20%27%3B%22%3E%0A%3Cinput%20name%3Dc%20onfocus%3D%22t.value%2B%3D%27cf1%20%27%3Bc.focus()%3Bt.value%2B%3D%27cf2%20%27%3B%22%20onblur%3D%22t.value%2B%3D%27cb%20%27%3B%22%3E%0A -->

  <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%3Cbody%20onload%3D%22document.forms%5B0%5D.a.focus()%22%3E%0A...%3Cform%3E%0A%3Ctextarea%20name%3Dt%20cols%3D100%20rows%3D3%3E%3C%2Ftextarea%3E%3Cp%3E%0A%3Cinput%20name%3Da%20onblur%3D%22t.value%2B%3D'ab%20'%3B%20b.focus()%3B%22%3E%0A%3Cinput%20name%3Db%20onfocus%3D%22t.value%2B%3D'bf1%20'%3Ba.focus()%3Bt.value%2B%3D'bf2%20'%3B%22%20onblur%3D%22t.value%2B%3D'bb%20'%3B%22%3E -->

  <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%3Cbody%3E...%3Cform%3E%0A%3Ctextarea%20name%3Dt%20cols%3D100%20rows%3D3%3E%3C%2Ftextarea%3E%3Cp%3E%0A%3Cinput%20name%3Da%20onfocus%3D%22t.value%2B%3D%27af%20%27%3B%22%20onblur%3D%22t.value%2B%3D%27ab1%20%27%3Bb.focus()%3Bt.value%2B%3D%27ab2%20%27%3B%22%3E%0A%3Cinput%20name%3Db%20onfocus%3D%22t.value%2B%3D%27bf1%20%27%3Ba.focus()%3Bt.value%2B%3D%27bf2%20%27%3B%22%20onblur%3D%22t.value%2B%3D%27bb%20%27%3B%22%3E -->

  <!-- v2: more things to define, if no other specs define them:
   - define onfocus/onblur behaviour for Window
   - Other things to look at are IE's focus APIs (HTMLElement.setActive(),
     onBeforeActivate, onActivate, onBeforeDeactivate, onDeactivate):
       https://bugzilla.mozilla.org/show_bug.cgi?id=296471
       https://bugzilla.mozilla.org/show_bug.cgi?id=296469
       http://msdn.microsoft.com/workshop/author/dhtml/reference/methods/setactive.asp
       http://msdn.microsoft.com/workshop/author/dhtml/reference/events/onbeforeactivate.asp
  -->

  <div class="impl">

  <p>When an element is <i>focused</i>, key events received by the
  document must be targeted at that element. There may be no element
  focused; when no element is focused, key events received by the
  document must be targeted at <a href="dom.html#the-body-element-0">the body element</a>, if there
  is one, or else at the <code><a href="dom.html#document">Document</a></code>'s root element, if
  there is one. If there is no root element, key events must not be
  fired.</p>

  <p>User agents may track focus for each <a href="#browsing-context">browsing
  context</a> or <code><a href="dom.html#document">Document</a></code> individually, or may support
  only one focused element per <a href="#top-level-browsing-context">top-level browsing context</a>
  &#8212; user agents should follow platform conventions in this
  regard.</p>

  <p>Which elements within a <a href="#top-level-browsing-context">top-level browsing context</a>
  currently have focus must be independent of whether or not the
  <a href="#top-level-browsing-context">top-level browsing context</a> itself has the <i>system
  focus</i>.</p>

  <p id="bc-focus-ergo-bcc-focus">When a <a href="#child-browsing-context">child browsing
  context</a> is focused, its <a href="#browsing-context-container">browsing context
  container</a> must also have focus.</p>

  <p class="note">When an element is focused, the element matches the
  CSS <code>:focus</code> pseudo-class.</p>

  </div>


  <h4 id="sequential-focus-navigation-and-the-tabindex-attribute"><span class="secno">7.4.1 </span>Sequential focus navigation and the <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute</h4>

  <p>The <dfn id="attr-tabindex" title="attr-tabindex"><code>tabindex</code></dfn>
  content attribute allows authors to control whether an element is
  supposed to be focusable, whether it is supposed to be reachable
  using sequential focus navigation, and what is to be the relative
  order of the element for the purposes of sequential focus
  navigation. The name "tab index" comes from the common use of the
  "tab" key to navigate through the focusable elements. The term
  "tabbing" refers to moving forward through the focusable elements
  that can be reached using sequential focus navigation.</p>

  <p>The <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute, if
  specified, must have a value that is a <a href="common-microsyntaxes.html#valid-integer">valid
  integer</a>.</p>

  <div class="impl">

  <p>Each element has a <dfn id="specially-focusable">tabindex focus
  flag</dfn>. This flag is a factor that contributes towards
  determining whether an element is <a href="#focusable">focusable</a>, as
  described in the next section.</p>

  <p>If the attribute is specified, it must be parsed using the
  <a href="common-microsyntaxes.html#rules-for-parsing-integers">rules for parsing integers</a>. The attribute's values have
  the following meanings:</p>

  <dl><dt>If the attribute is omitted or parsing the value returns an
   error</dt>

   <dd>

    <p>The user agent should follow platform conventions to determine
    if the element's <a href="#specially-focusable">tabindex focus flag</a> is set and, if
    so, whether the element can be reached using sequential focus
    navigation, and if so, what its relative order should be.</p>

    <p class="note">One valid reason to ignore the platform
    conventions and always allow an element to be focused (by setting
    its <a href="#specially-focusable">tabindex focus flag</a>) would be if the user's only
    mechanism for activating an element is through a keyboard action
    that triggers the focused element.</p>

   </dd>

   <dt id="negative-tabindex">If the value is a negative integer</dt>

   <dd>

    <p>The user agent must set the element's <a href="#specially-focusable">tabindex focus
    flag</a>, but should not allow the element to be reached using
    sequential focus navigation.</p>

    <p class="note">One valid reason to ignore the requirement that
    sequential focus navigation not allow the author to lead to the
    element would be if the user's only mechanism for moving the focus
    is sequential focus navigation. For instance, a keyboard-only user
    would be unable to click on a text field with a negative <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code>, so that user's user agent
    would be well justified in allowing the user to tab to the control
    regardless.</p>

   </dd>

   <dt>If the value is a zero</dt>

   <dd>

    <p>The user agent must set the element's <a href="#specially-focusable">tabindex focus
    flag</a>, should allow the element to be reached using
    sequential focus navigation, and should follow platform
    conventions to determine the element's relative order.</p>

   </dd>

   <dt>If the value is greater than zero</dt>

   <dd>

    <p>The user agent must set the element's <a href="#specially-focusable">tabindex focus
    flag</a>, should allow the element to be reached using
    sequential focus navigation, and should place the element in the
    sequential focus navigation order so that it is:</p>

    <ul><li>before any <a href="#focusable">focusable</a> element whose <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute has been omitted
     or whose value, when parsed, returns an error,</li>

     <li>before any <a href="#focusable">focusable</a> element whose <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute has a value equal
     to or less than zero,</li>

     <li>after any element whose <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute has a value
     greater than zero but less than the value of the <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute on the
     element,</li>

     <li>after any element whose <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute has a value equal
     to the value of the <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code>
     attribute on the element but that is earlier in the document in
     <a href="infrastructure.html#tree-order">tree order</a> than the element,</li>

     <li>before any element whose <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute has a value equal
     to the value of the <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code>
     attribute on the element but that is later in the document in
     <a href="infrastructure.html#tree-order">tree order</a> than the element, and</li>

     <li>before any element whose <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute has a value
     greater than the value of the <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute on the
     element.</li>

    </ul></dd>

  </dl><p>An element that has its <a href="#specially-focusable">tabindex focus flag</a> set but
  does not otherwise have an <a href="content-models.html#activation-behavior">activation behavior</a> defined
  has an <a href="content-models.html#activation-behavior">activation behavior</a> that does nothing.</p>

  <p class="note">This means that an element that is only focusable
  because of its <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> attribute
  will fire a <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> event in response
  to a non-mouse activation (e.g. hitting the "enter" key while the
  element is focused).</p>

  <p>The <dfn id="dom-tabindex" title="dom-tabIndex"><code>tabIndex</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the value of the <code title="attr-tabindex"><a href="#attr-tabindex">tabindex</a></code> content attribute. Its default
  value is 0 for elements that are focusable and &#8722;1 for
  elements that are not focusable.</p>

  </div>



  <div class="impl">

  <h4 id="focus-management"><span class="secno">7.4.2 </span>Focus management</h4>

  <p>An element is <dfn id="focusable">focusable</dfn> if the user agent's default
  behavior allows it to be focusable or if the element has its
  <a href="#specially-focusable">tabindex focus flag</a> set, but only if the element is
  either <a href="#being-rendered">being rendered</a> or <!-- CANVAS-FOCUS-FALLBACK -->
  is a descendant of a <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code> element that
  <a href="#represents">represents</a> <a href="content-models.html#embedded-content-2">embedded content</a>.</p>

  <p>User agents should make the following elements
  <a href="#focusable">focusable</a> as part of their default behavior, unless
  platform conventions dictate otherwise:</p>

  <ul><li><code><a href="the-a-element.html#the-a-element">a</a></code> elements that have an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute</li>

   <li><code><a href="the-link-element.html#the-link-element">link</a></code> elements that have an <code title="attr-link-href"><a href="the-link-element.html#attr-link-href">href</a></code> attribute</li>

   <li><code><a href="the-button-element.html#the-button-element">button</a></code> elements that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

   <li><code><a href="the-input-element.html#the-input-element">input</a></code> elements whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute are not in the
   <a href="states-of-the-type-attribute.html#hidden-state-(type=hidden)" title="attr-input-type-hidden">Hidden</a> state and that
   are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

   <li><code><a href="the-select-element.html#the-select-element">select</a></code> elements that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

   <li><code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a></li>

   <li><code><a href="#the-command-element">command</a></code> elements that do not have a <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code> attribute</li>

   <li>Elements with a <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code>
   attribute set, if that would enable the user agent to allow the
   user to begin a drag operations for those elements without the use
   of a pointing device</li>

   <li><a href="#editing-host" title="editing host">Editing hosts</a></li>

   <li><a href="#browsing-context-container" title="browsing context container">Browsing context
   containers</a></li> <!-- like <iframe>s -->

  </ul><p>In addition, each shape that is generated for an
  <code><a href="the-area-element.html#the-area-element">area</a></code> element should be <a href="#focusable">focusable</a>, unless
  platform conventions dictate otherwise. (A single <code><a href="the-area-element.html#the-area-element">area</a></code>
  element can correspond to multiple shapes, since image maps can be
  reused with multiple images on a page.)</p>

  <p>The user agent may also make part of a <code><a href="#the-details-element">details</a></code>
  element's rendering <a href="#focusable">focusable</a>, to enable the element to
  be opened or closed using keyboard input. However, this is distinct
  from the <code><a href="#the-details-element">details</a></code> or <code><a href="#the-summary-element">summary</a></code> element being
  focusable.</p>

  <hr><p>The <dfn id="focusing-steps">focusing steps</dfn> for an element are as follows:</p>

  <ol><li><p>If the element is not <a href="infrastructure.html#in-a-document" title="in a Document">in a
   <code>Document</code></a>, or if the element's
   <code><a href="dom.html#document">Document</a></code> has no <a href="#browsing-context">browsing context</a>, or if
   the element's <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing context</a>
   has no <a href="#top-level-browsing-context">top-level browsing context</a>, or if the element
   is not <a href="#focusable">focusable</a>, or if the element is already
   focused, then abort these steps.</p>

   </li><li><p>If focusing the element will remove the focus from another
   element, then run the <a href="#unfocusing-steps">unfocusing steps</a> for that
   element.</p></li>

   <li>

    <p>Make the element the currently focused element in its
    <a href="#top-level-browsing-context">top-level browsing context</a>.</p>

    <p>Some elements, most notably <code><a href="the-area-element.html#the-area-element">area</a></code>, can correspond
    to more than one distinct focusable area. If a particular area was
    indicated when the element was focused, then that is the area that
    must get focus; otherwise, e.g. when using the <code title="dom-focus"><a href="#dom-focus">focus()</a></code> method, the first such region in
    tree order is the one that must be focused.</p>

   </li>

   <li>

    <p>The user agent may apply relevant platform-specific conventions
    for focusing widgets.</p>

    <p class="note">For example, some platforms select the contents of
    a text field when that field is focused.</p>

   </li>

   <li><p><a href="#fire-a-simple-event">Fire a simple event</a> named <code title="event-focus">focus</code> at the element.</p></li>
   <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/saved/723 -->

  </ol><p>User agents must synchronously run the <a href="#focusing-steps">focusing
  steps</a> for an element whenever the user moves the focus to a
  <a href="#focusable">focusable</a> element.</p>

  <p>The <dfn id="unfocusing-steps">unfocusing steps</dfn> for an element are as
  follows:</p>

  <ol><li><p>If the element is an <code><a href="the-input-element.html#the-input-element">input</a></code> element, and the
   <code title="event-input-change"><a href="common-input-element-apis.html#event-input-change">change</a></code> event applies to the
   element, and the element does not have a defined <a href="content-models.html#activation-behavior">activation
   behavior</a>, and the user has changed the element's <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> or its list of <a href="states-of-the-type-attribute.html#concept-input-type-file-selected" title="concept-input-type-file-selected">selected files</a>
   while the control was focused without committing that change, then
   <a href="#fire-a-simple-event">fire a simple event</a> that bubbles named <code title="event-change">change</code> at the element.</p>

   </li><li><p>Unfocus the element.</p></li>

   <li><p><a href="#fire-a-simple-event">Fire a simple event</a> named <code title="event-blur">blur</code> at the element.</p></li>
   <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/saved/723 -->

  </ol><p>When an element that is focused stops being a
  <a href="#focusable">focusable</a> element, or stops being focused without
  another element being explicitly focused in its stead, the user
  agent should synchronously run the <a href="#unfocusing-steps">unfocusing steps</a> for
  the affected element only.</p>

  <p class="example">For example, this might happen because the
  element is removed from its <code><a href="dom.html#document">Document</a></code>, or has a <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute added. It would also
  happen to an <code><a href="the-input-element.html#the-input-element">input</a></code> element when the element gets <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>.</p>

  </div>


<!--TOPIC:DOM APIs-->
  <h4 id="document-level-focus-apis"><span class="secno">7.4.3 </span>Document-level focus APIs</h4>

  <dl class="domintro"><dt><var title="">document</var> . <code title="dom-document-activeElement"><a href="#dom-document-activeelement">activeElement</a></code></dt>

   <dd>

    <p>Returns the currently focused element.</p>

   </dd>

   <dt><var title="">document</var> . <code title="dom-document-hasFocus"><a href="#dom-document-hasfocus">hasFocus</a></code>()</dt>

   <dd>

    <p>Returns true if the document has focus; otherwise, returns false.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-window-focus"><a href="#dom-window-focus">focus</a></code>()</dt>

   <dd>

    <p>Focuses the window. Use of this method is discouraged. Allow the user to control window focus instead.</p>

   </dd>

   <dt><var title="">window</var> . <code title="dom-window-blur"><a href="#dom-window-blur">blur</a></code>()</dt>

   <dd>

    <p>Unfocuses the window. Use of this method is discouraged. Allow the user to control window focus instead.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-document-activeelement" title="dom-document-activeElement"><code>activeElement</code></dfn>
  attribute on <code><a href="dom.html#document">Document</a></code> objects must return the
  element in the document that is focused. If no element in the
  <code><a href="dom.html#document">Document</a></code> is focused, this must return <a href="dom.html#the-body-element-0">the body
  element</a>.</p>

  <p class="note">When a <a href="#child-browsing-context">child browsing context</a> is
  focused, its <a href="#browsing-context-container">browsing context container</a> is also
  focused, <a href="#bc-focus-ergo-bcc-focus">by definition</a>. For
  example, if the user moves the focus to a text field in an
  <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> is the element with
  focus in the <a href="#parent-browsing-context">parent browsing context</a>.</p>

  <p>The <dfn id="dom-document-hasfocus" title="dom-document-hasFocus"><code>hasFocus()</code></dfn> method
  on <code><a href="dom.html#document">Document</a></code> objects must return true if the
  <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing context</a> is focused,
  and all its <a href="#ancestor-browsing-context" title="ancestor browsing context">ancestor
  browsing contexts</a> are also focused, and the <a href="#top-level-browsing-context">top-level
  browsing context</a> has the <i>system focus</i>. If the
  <code><a href="dom.html#document">Document</a></code> has no <a href="#browsing-context">browsing context</a> or if its
  <a href="#browsing-context">browsing context</a> has no <a href="#top-level-browsing-context">top-level browsing
  context</a>, then the method will always return false.</p>

  <p>The <dfn id="dom-window-focus" title="dom-window-focus"><code>focus()</code></dfn>
  method on the <code><a href="#window">Window</a></code> object, when invoked, provides a
  hint to the user agent that the script believes the user might be
  interested in the contents of the <a href="#browsing-context">browsing context</a> of
  the <code><a href="#window">Window</a></code> object on which the method was invoked.</p>

  <p>User agents are encouraged to have this <code title="dom-window-focus"><a href="#dom-window-focus">focus()</a></code> method trigger some kind of
  notification.</p>

  <p>The <dfn id="dom-window-blur" title="dom-window-blur"><code>blur()</code></dfn> method
  on the <code><a href="#window">Window</a></code> object, when invoked, provides a hint to
  the user agent that the script believes the user probably is not
  currently interested in the contents of the <a href="#browsing-context">browsing
  context</a> of the <code><a href="#window">Window</a></code> object on which the method
  was invoked, but that the contents might become interesting again in
  the future.</p>

  <p>User agents are encouraged to ignore calls to this <code title="dom-window-blur"><a href="#dom-window-blur">blur()</a></code> method entirely.</p>

  <p class="note">Historically the <code title="dom-window-blur"><a href="#dom-window-blur">focus()</a></code> and <code title="dom-window-blur"><a href="#dom-window-blur">blur()</a></code> methods actually affected the
  system focus, but hostile sites widely abuse this behavior to the
  user's detriment.</p>

  </div>


  <h4 id="element-level-focus-apis"><span class="secno">7.4.4 </span>Element-level focus APIs</h4>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-focus"><a href="#dom-focus">focus</a></code>()</dt>

   <dd>

    <p>Focuses the element.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-blur"><a href="#dom-blur">blur</a></code>()</dt>

   <dd>

    <p>Unfocuses the element. Use of this method is discouraged. Focus
    another element instead.</p>

<!--FORK-->
    <p>Do not use this method to hide the focus ring. Do not use any
    other method that hides the focus ring from keyboard users,in
    particluar do not use a CSS rule to override the 'outline'
    property. Removal of the focus ring leads to serious accessibility
    issues for users who navigate and interact with interactive
    content using the keyboard.</p>
<!--FORK-->

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-focus" title="dom-focus"><code>focus()</code></dfn> method,
  when invoked, must run the following algorithm:</p>

  <ol><li><p>If the element is marked as <i><a href="#locked-for-focus">locked for focus</a></i>, then abort
   these steps.</p></li>

   <li><p>Mark the element as <dfn id="locked-for-focus">locked for focus</dfn>.</p></li>

   <li><p>Run the <a href="#focusing-steps">focusing steps</a> for the
   element.</p></li>

   <li><p>Unmark the element as <i><a href="#locked-for-focus">locked for focus</a></i>.</p></li>

  </ol><p>The <dfn id="dom-blur" title="dom-blur"><code>blur()</code></dfn> method, when
  invoked, should run the <a href="#unfocusing-steps">unfocusing steps</a> for the
  element on which the method was called instead. User agents may
  selectively or uniformly ignore calls to this method for usability
  reasons.</p>

  <p class="example">For example, if the <code title="dom-blur"><a href="#dom-blur">blur()</a></code> method is unwisely being used to
  remove the focus ring for aesthetics reasons, the page would become
  unusable by keyboard users. Ignoring calls to this method would thus
  allow keyboard users to interact with the page.</p>

  </div>
<!--TOPIC:HTML-->



  <h3 id="assigning-keyboard-shortcuts"><span class="secno">7.5 </span>Assigning keyboard shortcuts</h3>

  <h4 id="introduction-6"><span class="secno">7.5.1 </span>Introduction</h4>

  <p><i>This section is non-normative.</i></p>
  <p>Each element that can be activated or focused can be assigned a
  single key combination to activate it, using the <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> attribute.</p>

  <p>The exact shortcut is determined by the user agent, based on
  information about the user's keyboard, what keyboard shortcuts
  already exist on the platform, and what other shortcuts have been
  specified on the page, using the information provided in the <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> attribute as a guide.</p>

  <p>In order to ensure that a relevant keyboard shortcut is available
  on a wide variety of input devices, the author can provide a number
  of alternatives in the <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code>
  attribute.</p>

  <p>Each alternative consists of a single character, such as a letter
  or digit.</p>

  <p>User agents can provide users with a list of the keyboard
  shortcuts, but authors are encouraged to do so also. The <code title="dom-accessKeyLabel"><a href="#dom-accesskeylabel">accessKeyLabel</a></code> IDL attribute
  returns a string representing the actual key combination assigned by
  the user agent.</p>

  <div class="example">

   <p>In this example, an author has provided a button that can be
   invoked using a shortcut key. To support full keyboards, the author
   has provided "C" as a possible key. To support devices equipped
   only with numeric keypads, the author has provided "1" as another
   possibly key.</p>

   <pre>&lt;input type=button value=Collect onclick="collect()"
       <strong>accesskey="C 1"</strong> id=c&gt;</pre>

  </div>

  <div class="example">

   <p>To tell the user what the shortcut key is, the author has 
   this script here opted to explicitly add the key combination to the
   button's label:</p>

   <pre>function addShortcutKeyLabel(button) {
<strong>  if (button.accessKeyLabel != '')
    button.value += ' (' + button.accessKeyLabel + ')';</strong>
}
addShortcutKeyLabel(document.getElementById('c'));</pre>

   <p>Browsers on different platforms will show different labels, even
   for the same key combination, based on the convention prevalent on
   that platform. For example, if the key combination is the Control
   key, the Shift key, and the letter C, a Windows browser might
   display "<samp>Ctrl+Shift+C</samp>", whereas a Mac browser might
   display "<samp>^&#8679;C</samp>", while an Emacs browser might
   just display "<samp>C-C</samp>". Similarly, if the key combination
   is the Alt key and the Escape key, Windows might use
   "<samp>Alt+Esc</samp>", Mac might use
   "<samp>&#8997;&#9099;</samp>", and an Emacs browser might use
   "<samp>M-ESC</samp>" or "<samp>ESC ESC</samp>".</p>

   <p>In general, therefore, it is unwise to attempt to parse the
   value returned from the <code title="dom-accessKeyLabel"><a href="#dom-accesskeylabel">accessKeyLabel</a></code> IDL attribute.</p>

  </div>


  <h4 id="the-accesskey-attribute"><span class="secno">7.5.2 </span>The <dfn title="attr-accesskey"><code>accesskey</code></dfn> attribute</h4>

  <p>All <a href="infrastructure.html#html-elements">HTML elements</a> may have the <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> content attribute set. The
  <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> attribute's value is
  used by the user agent as a guide for creating a keyboard shortcut
  that activates or focuses the element.</p>

  <p>If specified, the value must be an <a href="common-microsyntaxes.html#ordered-set-of-unique-space-separated-tokens">ordered set of unique
  space-separated tokens</a> that are <a href="infrastructure.html#case-sensitive">case-sensitive</a>,
  each of which must be exactly one Unicode code point in length.</p>

  <div class="example">

   <p>In the following example, a variety of links are given with
   access keys so that keyboard users familiar with the site can
   more quickly navigate to the relevant pages:</p>

   <pre>&lt;nav&gt;
 &lt;p&gt;
  &lt;a title="Consortium Activities" accesskey="A" href="/Consortium/activities"&gt;Activities&lt;/a&gt; |
  &lt;a title="Technical Reports and Recommendations" accesskey="T" href="/TR/"&gt;Technical Reports&lt;/a&gt; |
  &lt;a title="Alphabetical Site Index" accesskey="S" href="/Consortium/siteindex"&gt;Site Index&lt;/a&gt; |
  &lt;a title="About This Site" accesskey="B" href="/Consortium/"&gt;About Consortium&lt;/a&gt; |
  &lt;a title="Contact Consortium" accesskey="C" href="/Consortium/contact"&gt;Contact&lt;/a&gt;
 &lt;/p&gt;
&lt;/nav&gt;</pre>

  </div>

  <div class="example">

   <p>In the following example, the search field is given two possible
   access keys, "s" and "0" (in that order). A user agent on a device
   with a full keyboard might pick
   <kbd><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd><a href="the-s-element.html#the-s-element">S</a></kbd></kbd> as the
   shortcut key, while a user agent on a small device with just a
   numeric keypad might pick just the plain unadorned key
   <kbd><kbd>0</kbd></kbd>:</p>

   <pre>&lt;form action="/search"&gt;
 &lt;label&gt;Search: &lt;input type="search" name="q" accesskey="s 0"&gt;&lt;/label&gt;
 &lt;input type="submit"&gt;
&lt;/form&gt;</pre>

  </div>

  <div class="example">

   <p>In the following example, a button has possible access keys
   described. A script then tries to update the button's label to
   advertise the key combination the user agent selected.</p>

   <pre>&lt;input type=submit accesskey="N @ 1" value="Compose"&gt;
...
&lt;script&gt;
 function labelButton(button) {
   if (button.accessKeyLabel)
     button.value += ' (' + button.accessKeyLabel + ')';
 }
 var inputs = document.getElementsByTagName('input');
 for (var i = 0; i &lt; inputs.length; i += 1) {
   if (inputs[i].type == "submit")
     labelButton(inputs[i]);
 }
&lt;/script&gt;</pre>

   <p>On one user agent, the button's label might become
   "<samp>Compose (&#8984;N)</samp>". On another, it might become
   "<samp>Compose (Alt+&#8679;+1)</samp>". If the user agent doesn't
   assign a key, it will be just "<samp>Compose</samp>". The exact
   string depends on what the <a href="#assigned-access-key">assigned access key</a> is, and
   on how the user agent represents that key combination.</p>

  </div>


  <div class="impl">

  <h4 id="processing-model-4"><span class="secno">7.5.3 </span>Processing model</h4>

  <p>An element's <dfn id="assigned-access-key">assigned access key</dfn> is a key combination
  derived from the element's <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> content attribute.
  Initially, an element must not have an <a href="#assigned-access-key">assigned access
  key</a>.</p>

  <p>Whenever an element's <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> attribute is set, changed,
  or removed, the user agent must update the element's <a href="#assigned-access-key">assigned
  access key</a> by running the following steps:</p>

  <ol><li><p>If the element has no <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> attribute, then skip to the
   <i>fallback</i> step below.</p></li>

   <li><p>Otherwise, <a href="common-microsyntaxes.html#split-a-string-on-spaces" title="split a string on spaces">split the
   attribute's value on spaces</a>, and let <var title="">keys</var> be the resulting tokens.</p></li>

   <li>

    <p>For each value in <var title="">keys</var> in turn, in the
    order the tokens appeared in the attribute's value, run the
    following substeps:</p>

    <ol><li><p>If the value is not a string exactly one Unicode code
     point in length, then skip the remainder of these steps for this
     value.</p></li>

     <li><p>If the value does not correspond to a key on the system's
     keyboard, then skip the remainder of these steps for this
     value.</p></li>

     <li><p>If the user agent can find a mix of zero or more modifier
     keys that, combined with the key that corresponds to the value
     given in the attribute, can be used as the access key, then the
     user agent may assign that combination of keys as the element's
     <a href="#assigned-access-key">assigned access key</a> and abort these steps.</p></li>

    </ol></li>

   <li><p><i>Fallback</i>: Optionally, the user agent may assign a key
   combination of its choosing as the element's <a href="#assigned-access-key">assigned access
   key</a> and then abort these steps.</p></li>

   <li><p>If this step is reached, the element has no <a href="#assigned-access-key">assigned
   access key</a>.</p></li>

  </ol><p>Once a user agent has selected and assigned an access key for an
  element, the user agent should not change the element's
  <a href="#assigned-access-key">assigned access key</a> unless the <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> content attribute is changed
  or the element is moved to another <code><a href="dom.html#document">Document</a></code>.</p>

  <p>When the user presses the key combination corresponding to the
  <a href="#assigned-access-key">assigned access key</a> for an element, if the element
  <a href="#concept-command" title="concept-command">defines a command</a>, the
  command's <a href="#command-facet-hiddenstate" title="command-facet-HiddenState">Hidden
  State</a> facet is false (visible), the command's <a href="#command-facet-disabledstate" title="command-facet-DisabledState">Disabled State</a> facet is
  also false (enabled), and the element is <a href="infrastructure.html#in-a-document">in a
  <code>Document</code></a>, then the user agent must trigger the
  <a href="#command-facet-action" title="command-facet-Action">Action</a> of the command.</p>

  <p class="note">User agents might expose elements that have an <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> attribute in other ways as
  well, e.g. in a menu displayed in response to a specific key
  combination.</p> <!-- the actual conformance criteria for this is in
  the section that defines commands -->

  <hr><p>The <dfn id="dom-accesskey" title="dom-accessKey"><code>accessKey</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-accesskey"><a href="#the-accesskey-attribute">accesskey</a></code> content attribute.</p>

  <p>The <dfn id="dom-accesskeylabel" title="dom-accessKeyLabel"><code>accessKeyLabel</code></dfn> IDL
  attribute must return a string that represents the element's
  <a href="#assigned-access-key">assigned access key</a>, if any. If the element does not
  have one, then the IDL attribute must return the empty string.</p>

  </div>



  <h3 id="editing-0"><span class="secno">7.6 </span>Editing</h3>

  <h4 id="contenteditable"><span class="secno">7.6.1 </span>Making document regions editable: The <code title="attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code> content
  attribute</h4>

  <p>The <dfn id="attr-contenteditable" title="attr-contenteditable"><code>contenteditable</code></dfn>
  attribute is an <a href="common-microsyntaxes.html#enumerated-attribute">enumerated attribute</a> whose keywords are
  the empty string, <code title="">true</code>, and <code title="">false</code>. The empty string and the <code title="">true</code> keyword map to the <i>true</i> state. The <code title="">false</code> keyword maps to the <i>false</i> state. In
  addition, there is a third state, the <i>inherit</i> state, which is
  the <i>missing value default</i> (and the <i>invalid value
  default</i>).</p>

  <p>The <i>true</i> state indicates that the element is editable. The
  <i>inherit</i> state indicates that the element is editable if its
  parent is. The <i>false</i> state indicates that the element is not
  editable.</p>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-contentEditable"><a href="#dom-contenteditable">contentEditable</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns "<code title="">true</code>", "<code title="">false</code>", or "<code title="">inherit</code>", based
    on the state of the <code title="attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code> attribute.</p>

    <p>Can be set, to change that state.</p>

    <p>Throws a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception if the new value
    isn't one of those strings.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-isContentEditable"><a href="#dom-iscontenteditable">isContentEditable</a></code></dt>

   <dd>

    <p>Returns true if the element is editable; otherwise, returns false.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-contenteditable" title="dom-contentEditable"><code>contentEditable</code></dfn> IDL
  attribute, on getting, must return the string "<code title="">true</code>" if the content attribute is set to the true
  state, "<code title="">false</code>" if the content attribute is set
  to the false state, and "<code title="">inherit</code>"
  otherwise. On setting, if the new value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> match for the string "<code title="">inherit</code>" then the content attribute must be removed,
  if the new value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for
  the string "<code title="">true</code>" then the content attribute
  must be set to the string "<code title="">true</code>", if the new
  value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string
  "<code title="">false</code>" then the content attribute must be set
  to the string "<code title="">false</code>", and otherwise the
  attribute setter must throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception.</p>

  <p>The <dfn id="dom-iscontenteditable" title="dom-isContentEditable"><code>isContentEditable</code></dfn>
  IDL attribute, on getting, must return true if the element is either
  an <a href="#editing-host">editing host</a> or <a href="#editable">editable</a>, and false
  otherwise.</p>

  </div>


  <h4 id="making-entire-documents-editable:-the-designmode-idl-attribute"><span class="secno">7.6.2 </span>Making entire documents editable: The <code title="dom-document-designMode"><a href="#designMode">designMode</a></code> IDL attribute</h4>

  <div class="impl">

  <p>Documents have a <dfn id="designMode" title="dom-document-designMode"><code>designMode</code></dfn>, which
  can be either enabled or disabled.</p>

  </div>

  <dl class="domintro"><dt><var title="">document</var> . <code title="dom-document-designMode"><a href="#designMode">designMode</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns "<code title="">on</code>" if the document is editable,
    and "<code title="">off</code>" if it isn't.</p>

    <p>Can be set, to change the document's current state.</p>

   </dd>

  </dl><div class="impl">

  <p>The <code title="dom-document-designMode"><a href="#designMode">designMode</a></code> IDL
  attribute on the <code><a href="dom.html#document">Document</a></code> object takes two values,
  "<code title="">on</code>" and "<code title="">off</code>". When it
  is set, the new value must be compared in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> manner to these two values. If it matches
  the "<code title="">on</code>" value, then <code title="dom-document-designMode"><a href="#designMode">designMode</a></code> must be enabled,
  and if it matches the "<code title="">off</code>" value, then <code title="dom-document-designMode"><a href="#designMode">designMode</a></code> must be
  disabled. Other values must be ignored.</p>

  <p>When <code title="dom-document-designMode"><a href="#designMode">designMode</a></code> is
  enabled, the IDL attribute must return the value "<code title="">on</code>", and when it is disabled, it must return the
  value "<code title="">off</code>".</p>

  <p>The last state set must persist until the document is destroyed
  or the state is changed. Initially, documents must have their <code title="dom-document-designMode"><a href="#designMode">designMode</a></code> disabled.</p>

  </div>


  <h4 id="best-practices-for-in-page-editors"><span class="secno">7.6.3 </span>Best practices for in-page editors</h4>

  <p>Authors are encouraged to set the 'white-space' property on <a href="#editing-host" title="editing host">editing hosts</a> and on markup that was
  originally created through these editing mechanisms to the value
  'pre-wrap'. Default HTML whitespace handling is not well suited to
  WYSIWYG editing, and line wrapping will not work correctly in some
  corner cases if 'white-space' is left at its default value.</p>

  <div class="example">

   <p>As an example of problems that occur if the default 'normal'
   value is used instead, consider the case of the user typing
   "<kbd>yellow&#9251;&#9251;ball</kbd>", with two spaces (here
   represented by "&#9251;") between the words. With the editing
   rules in place for the default value of 'white-space' ('normal'),
   the resulting markup will either consist of
   "<samp>yellow&amp;nbsp;&#160;ball</samp>" or
   "<samp>yellow&#160;&amp;nbsp;ball</samp>"; i.e., there will be a
   non-breaking space between the two words in addition to the regular
   space. This is necessary because the 'normal' value for
   'white-space' requires adjacent regular spaces to be collapsed
   together.</p>

   <p>In the former case, "<samp>yellow&#9085;</samp>" might wrap to
   the next line ("&#9085;" being used here to represent a
   non-breaking space) even though "<samp>yellow</samp>" alone might
   fit at the end of the line; in the latter case,
   "<samp>&#9085;ball</samp>", if wrapped to the start of the line,
   would have visible indentation from the non-breaking space.</p>

   <p>When 'white-space' is set to 'pre-wrap', however, the editing
   rules will instead simply put two regular spaces between the words,
   and should the two words be split at the end of a line, the spaces
   would be neatly removed from the rendering.</p>

  </div>



  <h4 id="editing-apis"><span class="secno">7.6.4 </span>Editing APIs</h4>

  <p>The definition of the terms <dfn id="active-range">active range</dfn>, <dfn id="editing-host">editing
  host</dfn>, and <dfn id="editable">editable</dfn>, the user interface requirements
  of elements that are <a href="#editing-host" title="editing host">editing hosts</a>
  or <a href="#editable">editable</a>, the

  <dfn id="execCommand" title="dom-document-execCommand"><code>execCommand()</code></dfn>,
  <dfn id="dom-document-querycommandenabled" title="dom-document-queryCommandEnabled"><code>queryCommandEnabled()</code></dfn>,
  <dfn id="dom-document-querycommandindeterm" title="dom-document-queryCommandIndeterm"><code>queryCommandIndeterm()</code></dfn>,
  <dfn id="dom-document-querycommandstate" title="dom-document-queryCommandState"><code>queryCommandState()</code></dfn>,
  <dfn id="dom-document-querycommandsupported" title="dom-document-queryCommandSupported"><code>queryCommandSupported()</code></dfn>, and
  <dfn id="dom-document-querycommandvalue" title="dom-document-queryCommandValue"><code>queryCommandValue()</code></dfn>

  methods, text selections, and the <dfn id="delete-the-selection">delete the selection</dfn>
  algorithm are defined in the HTML Editing APIs specification. The
  interaction of editing and the undo/redo features in user agents is
  defined by the UndoManager and DOM Transaction specification. <a href="#refsEDITING">[EDITING]</a> <a href="#refsUNDO">[UNDO]</a></p>

  <!-- those might get merged in here eventually -->



  <h4 id="spelling-and-grammar-checking"><span class="secno">7.6.5 </span>Spelling and grammar checking</h4>

  <div class="impl">

  <p>User agents can support the checking of spelling and grammar of
  editable text, either in form controls (such as the value of
  <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements), or in elements in an <a href="#editing-host">editing
  host</a> (e.g. using <code title="attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>).</p>

  <p>For each element, user agents must establish a <dfn id="concept-spellcheck-default" title="concept-spellcheck-default">default behavior</dfn>, either
  through defaults or through preferences expressed by the user. There
  are three possible default behaviors for each element:</p>

  <dl><dt><dfn id="concept-spellcheck-default-true" title="concept-spellcheck-default-true">true-by-default</dfn>

   </dt><dd>The element will be checked for spelling and grammar if its
   contents are editable.

   </dd><dt><dfn id="concept-spellcheck-default-false" title="concept-spellcheck-default-false">false-by-default</dfn>

   </dt><dd>The element will never be checked for spelling and grammar.

   </dd><dt><dfn id="concept-spellcheck-default-inherit" title="concept-spellcheck-default-inherit">inherit-by-default</dfn>

   </dt><dd>The element's default behavior is the same as its parent
   element's. Elements that have no parent element cannot have this as
   their default behavior.

  </dd></dl><hr></div>

  <p>The <dfn id="attr-spellcheck" title="attr-spellcheck"><code>spellcheck</code></dfn>
  attribute is an <a href="common-microsyntaxes.html#enumerated-attribute">enumerated attribute</a> whose keywords are
  the empty string, <code title="">true</code> and <code title="">false</code>. The empty string and the <code title="">true</code> keyword map to the <i>true</i> state. The <code title="">false</code> keyword maps to the <i>false</i> state. In
  addition, there is a third state, the <i>default</i> state, which is
  the <i>missing value default</i> (and the <i>invalid value
  default</i>).</p>

  <p class="note">The <i>true</i> state indicates that the element is
  to have its spelling and grammar checked. The <i>default</i> state
  indicates that the element is to act according to a default
  behavior, possibly based on the parent element's own <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> state, as defined below.
  The <i>false</i> state indicates that the element is not to be
  checked.</p>

  <div class="impl">

  <hr></div>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-spellcheck"><a href="#dom-spellcheck">spellcheck</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns true if the element is to have its spelling and grammar
    checked; otherwise, returns false.</p>

    <p>Can be set, to override the default and set the <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> content attribute.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-spellcheck" title="dom-spellcheck"><code>spellcheck</code></dfn> IDL
  attribute, on getting, must return true if the element's <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> content attribute is in
  the <i>true</i> state, or if the element's <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> content attribute is in
  the <i>default</i> state and the element's <a href="#concept-spellcheck-default" title="concept-spellcheck-default">default behavior</a> is <a href="#concept-spellcheck-default-true" title="concept-spellcheck-default-true">true-by-default</a>, or
  if the element's <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code>
  content attribute is in the <i>default</i> state and the element's
  <a href="#concept-spellcheck-default" title="concept-spellcheck-default">default behavior</a> is
  <a href="#concept-spellcheck-default-inherit" title="concept-spellcheck-default-inherit">inherit-by-default</a>
  and the element's parent element's <code title="dom-spellcheck"><a href="#dom-spellcheck">spellcheck</a></code> IDL attribute would return
  true; otherwise, if none of those conditions applies, then the
  attribute must instead return false.</p>

  <p class="note">The <code title="dom-spellcheck"><a href="#dom-spellcheck">spellcheck</a></code>
  IDL attribute is not affected by user preferences that override the
  <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> content attribute,
  and therefore might not reflect the actual spellchecking state.</p>

  <p>On setting, if the new value is true, then the element's <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> content attribute must be
  set to the literal string "<code title="">true</code>", otherwise it
  must be set to the literal string "<code title="">false</code>".

  </p><hr><p>User agents must only consider the following pieces of text as
  checkable for the purposes of this feature:</p>

  <ul><li>The value of <code><a href="the-input-element.html#the-input-element">input</a></code> elements to which the <code title="attr-input-readonly"><a href="common-input-element-attributes.html#attr-input-readonly">readonly</a></code> attribute applies,
   whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attributes are not
   in the <a href="states-of-the-type-attribute.html#password-state-(type=password)" title="attr-input-type-password">Password</a>
   state, and that are not <i title="concept-input-immutable"><a href="the-input-element.html#concept-input-immutable">immutable</a></i> (i.e. that do not
   have the <code title="attr-input-readonly"><a href="common-input-element-attributes.html#attr-input-readonly">readonly</a></code>
   attribute specified and that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>).</li>

   <li>The value of <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements that do not have a
   <code title="attr-textarea-readonly"><a href="the-textarea-element.html#attr-textarea-readonly">readonly</a></code> attribute and
   that are not <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>.</li>

   <li>Text in <code><a href="infrastructure.html#text-0">Text</a></code> nodes that are
   children of <a href="#editing-host" title="editing host">editing hosts</a> or
   <a href="#editable">editable</a> elements.</li>

   <li>Text in attributes of <a href="#editable">editable</a> elements.</li>

  </ul><p>For text that is part of a <code><a href="infrastructure.html#text-0">Text</a></code> node, the element
  with which the text is associated is the element that is the
  immediate parent of the first character of the word, sentence, or
  other piece of text. For text in attributes, it is the attribute's
  element. For the values of <code><a href="the-input-element.html#the-input-element">input</a></code> and
  <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements, it is the element itself.</p>

  <p>To determine if a word, sentence, or other piece of text in an
  applicable element (as defined above) is to have spelling- and/or
  grammar-checking enabled, the UA must use the following
  algorithm:</p>

  <ol><!-- user override --><li>If the user has disabled the checking for this text, then the
   checking is disabled.</li>

   <li>Otherwise, if the user has forced the checking for this text to
   always be enabled, then the checking is enabled.</li>

   <!-- content attribute: on, off -->

   <li>Otherwise, if the element with which the text is associated has
   a <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> content
   attribute, then: if that attribute is in the <i>true</i> state,
   then checking is enabled; otherwise, if that attribute is in the
   <i>false</i> state, then checking is disabled.</li>

   <!-- inherit, if there is one to inherit from -->

   <li>Otherwise, if there is an ancestor element with a <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> content attribute that is
   not in the <i>default</i> state, then: if the nearest such
   ancestor's <code title="attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> content
   attribute is in the <i>true</i> state, then checking is enabled;
   otherwise, checking is disabled.</li>

   <!-- default -->

   <li>Otherwise, if the element's <a href="#concept-spellcheck-default" title="concept-spellcheck-default">default behavior</a> is <a href="#concept-spellcheck-default-true" title="concept-spellcheck-default-true">true-by-default</a>,
   then checking is enabled.</li>

   <li>Otherwise, if the element's <a href="#concept-spellcheck-default" title="concept-spellcheck-default">default behavior</a> is <a href="#concept-spellcheck-default-false" title="concept-spellcheck-default-false">false-by-default</a>,
   then checking is disabled.</li>

   <!-- default inheritance -->

   <li>Otherwise, if the element's parent element has <em>its</em>
   checking enabled, then checking is enabled.</li>

   <li>Otherwise, checking is disabled.</li>

  </ol><p>If the checking is enabled for a word/sentence/text, the user
  agent should indicate spelling and/or grammar errors in that
  text. User agents should take into account the other semantics given
  in the document when suggesting spelling and grammar
  corrections. User agents may use the language of the element to
  determine what spelling and grammar rules to use, or may use the
  user's preferred language settings. UAs should use
  <code><a href="the-input-element.html#the-input-element">input</a></code> element attributes such as <code title="attr-input-pattern"><a href="common-input-element-attributes.html#attr-input-pattern">pattern</a></code> to ensure that the
  resulting value is valid, where possible.</p>

  <p>If checking is disabled, the user agent should not indicate
  spelling or grammar errors for that text.</p>

  <div class="example">

   <p>The element with ID "a" in the following example would be the
   one used to determine if the word "Hello" is checked for spelling
   errors. In this example, it would not be.</p>

   <pre>&lt;div contenteditable="true"&gt;
 &lt;span spellcheck="false" id="a"&gt;Hell&lt;/span&gt;&lt;em&gt;o!&lt;/em&gt;
&lt;/div&gt;</pre>

   <p>The element with ID "b" in the following example would have
   checking enabled (the leading space character in the attribute's
   value on the <code><a href="the-input-element.html#the-input-element">input</a></code> element causes the attribute to be
   ignored, so the ancestor's value is used instead, regardless of the
   default).</p>

   <pre>&lt;p spellcheck="true"&gt;
 &lt;label&gt;Name: &lt;input spellcheck=" false" id="b"&gt;&lt;/label&gt;
&lt;/p&gt;</pre>

  </div>

  </div>

  <p class="note">This specification does not define the user
  interface for spelling and grammar checkers. A user agent could
  offer on-demand checking, could perform continuous checking while
  the checking is enabled, or could use other interfaces.</p>


  <h3 id="dnd"><span class="secno">7.7 </span><dfn>Drag and drop</dfn></h3>

<!-- v2: ideas for drag and drop:

     * being able to animate a drop target:

       > To implement this with simple interface I've proposed, events
       > should be handled either by existing elements (like list
       > items that compare their size and position of dragged element
       > to decide whether element should be dropped before or after)
       > or handled by container that would probably need to calculate
       > positions of it's children and create new element to show
       > drop target. Smooth Mac-like drag'n'drop can be implemented
       > by animating drop target's padding/margin. So that's quite a
       > bit of code that's going to be reinvented each time someone
       > implements reordering.

       <hyatt> :droptarget
       <hyatt> or something
       <hyatt> we don't support a pseudo-class for the drop target but that's a great idea
       <Hixie_> yeah, thinking about that too
       <Hixie_> :drop-target, :drop-target(above), :drop-target(below) and having ondragover be able to say "not on me, but next to me maybe"

       - some way to be able to match an element that is being dragged over.

       - some way to be able to animate an element as it goes into and out of   
         this state (CSS transitions?), e.g. to be able to animate something
         "getting out of the way" to let you drop an item between others.

       - as an extension to the previous feature, a way to distinguish being    
         dragged above or to the left of the drag target vs below or to the
         right of the drag target.

     * We should let drop targets communicate back to drag sources if
       they want to communicate. (e.g. expose Window, and thus
       postMessage(), on the dataTransfer object on drop.)
       Or maybe just use a MessagePort!

       We should let drag sources provide a set of options via a
       context menu when the drop happens. (So that, e.g., the source
       can know whether a capabilities URI that it is passing along is
       supposed to be read-write access or read-only access to the
       object being dragged.)

       We should let potential drop targets see the types (but not the
       contents!) of dragged data so they can establish if they care
       or not. (dataTransfer.hasType())

       Ack: Ben Laurie (@g)

     * Interop with native apps. In particular, we probably want to
       whitelist the list of types that a Web page can see, since
       otherwise we'll end up exposing things like the username (if a
       user drags a file from their desktop, the path is exposed on
       some OSes).

     Other things listed below:
      DND-v2: more native support: text/html from selections, etc
      DND-v3: add Blob support
      DND-v4: add structured clone support
      DND-v5: add promises (should be able to say "if you accept this
              drop, then I can provide the File object that
              corresponds to it eventually")

         DataTransferPromise.type = 'string' or 'file' or 'blob' or 'data'
                            .onneeddata - can wait until this fires to provide data
                            .setData() - call this once you have data, must be the right type

-->

  <p>This section defines an event-based drag-and-drop mechanism.</p>

  <p>This specification does not define exactly what a
  <em>drag-and-drop operation</em> actually is.</p>

  <p>On a visual medium with a pointing device, a drag operation could
  be the default action of a <code title="event-mousedown">mousedown</code> event that is followed by a
  series of <code title="event-mousemove">mousemove</code> events, and
  the drop could be triggered by the mouse being released.</p>

  <p>When using an input modality other than a pointing device, users
  would probably have to explicitly indicate their intention to
  perform a drag-and-drop operation, stating what they wish to drag
  and where they wish to drop it, respectively.</p>

  <div class="impl">

  <p>However it is implemented, drag-and-drop operations must have a
  starting point (e.g. where the mouse was clicked, or the start of
  the selection or element that was selected for the drag), may have
  any number of intermediate steps (elements that the mouse moves over
  during a drag, or elements that the user picks as possible drop
  points as he cycles through possibilities), and must either have an
  end point (the element above which the mouse button was released, or
  the element that was finally selected), or be canceled. The end
  point must be the last element selected as a possible drop point
  before the drop occurs (so if the operation is not canceled, there
  must be at least one element in the middle step).</p>

  </div>


  <h4 id="introduction-7"><span class="secno">7.7.1 </span>Introduction</h4>

  <p><i>This section is non-normative.</i></p>
  <p>To make an element draggable is simple: give the element a <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> attribute, and set an event
  listener for <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> that
  stores the data being dragged.</p>

  <p>The event handler typically needs to check that it's not a text
  selection that is being dragged, and then needs to store data into
  the <code><a href="#datatransfer">DataTransfer</a></code> object and set the allowed effects
  (copy, move, link, or some combination).</p>

  <p>For example:</p>

  <pre>&lt;p&gt;What fruits do you like?&lt;/p&gt;
&lt;ol ondragstart="dragStartHandler(event)"&gt;
 &lt;li draggable="true" data-value="fruit-apple"&gt;Apples&lt;/li&gt;
 &lt;li draggable="true" data-value="fruit-orange"&gt;Oranges&lt;/li&gt;
 &lt;li draggable="true" data-value="fruit-pear"&gt;Pears&lt;/li&gt;
&lt;/ol&gt;
&lt;script&gt;
  var internalDNDType = 'text/x-example'; // set this to something specific to your site
  function dragStartHandler(event) {
    if (event.target instanceof HTMLLIElement) {
      // use the element's data-value="" attribute as the value to be moving:
      event.dataTransfer.setData(internalDNDType, event.target.dataset.value);
      event.dataTransfer.effectAllowed = 'move'; // only allow moves
    } else {
      event.preventDefault(); // don't allow selection to be dragged
    }
  }
&lt;/script&gt;</pre>

  <hr><p>To accept a drop, the drop target has to have a <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute and listen to the
  <code title="drop-event">drop</code> event.</p>

  <p>The value of the <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code>
  attribute specifies what kind of data to accept (e.g. "<code title="">string:text/plain</code>" to accept any text strings, or
  "<code>file:image/png</code>" to accept a PNG image file) and what
  kind of feedback to give (e.g. "<code>move</code>" to indicate that
  the data will be moved).</p>

  <p class="note">Instead of using the <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute, a drop target can
  handle the <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> event (to
  report whether or not the drop target is to accept the drop) and the
  <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event (to specify what
  feedback is to be shown to the user).</p>

  <p>The <code title="event-drop"><a href="#event-drop">drop</a></code> event allows the actual
  drop to be performed. This event needs to be canceled, so that the
  <code title="dom-DataTransfer-DropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code>
  attribute's value can be used by the source (otherwise it's
  reset).</p>

  <p>For example:</p>

  <pre>&lt;p&gt;Drop your favorite fruits below:&lt;/p&gt;
&lt;ol dropzone="move string:text/x-example" ondrop="dropHandler(event)"&gt;
 &lt;!-- don't forget to change the "text/x-example" type to something
 specific to your site --&gt;
&lt;/ol&gt;
&lt;script&gt;
  var internalDNDType = 'text/x-example'; // set this to something specific to your site
  function dropHandler(event) {
    var li = document.createElement('li');
    var data = event.dataTransfer.getData(internalDNDType);
    if (data == 'fruit-apple') {
      li.textContent = 'Apples';
    } else if (data == 'fruit-orange') {
      li.textContent = 'Oranges';
    } else if (data == 'fruit-pear') {
      li.textContent = 'Pears';
    } else {
      li.textContent = 'Unknown Fruit';
    }
    event.target.appendChild(li);
  }
&lt;/script&gt;</pre>

  <hr><p>To remove the original element (the one that was dragged) from
  the display, the <code title="event-dragend"><a href="#event-dragend">dragend</a></code> event
  can be used.</p>

  <p>For our example here, that means updating the original markup to
  handle that event:</p>

  <pre>&lt;p&gt;What fruits do you like?&lt;/p&gt;
&lt;ol ondragstart="dragStartHandler(event)" ondragend="dragEndHandler(event)"&gt;
 <em>...as before...</em>
&lt;/ol&gt;
&lt;script&gt;
  function dragStartHandler(event) {
    // <em>...as before...</em>
  }
  function dragEndHandler(event) {
    // remove the dragged element
    event.target.parentNode.removeChild(event.target);
  }
&lt;/script&gt;</pre>



  <h4 id="the-drag-data-store"><span class="secno">7.7.2 </span>The drag data store</h4>

  <p>The data that underlies a drag-and-drop operation, known as the
  <dfn id="drag-data-store">drag data store</dfn>, consists of the following information:</p>

  <ul><li><p>A <dfn id="drag-data-store-item-list">drag data store item list</dfn>, which is a list of
   items representing the dragged data, each consisting of the
   following information:</p>

    <dl><dt><dfn id="the-drag-data-item-kind">The drag data item kind</dfn></dt>

     <dd>

      <p>The kind of data:</p>

      <dl><dt><i>Plain Unicode string</i></dt>
       <dd>
        <p>Text.</p>
       </dd>

<!-- DND-v3:
       <dt><i title="">Blob</i></dt>
       <dd>
        <p>Binary data.</p>
       </dd>
-->

       <dt><i title="">File</i></dt>
       <dd>
        <p>Binary data with a file name.</p>
       </dd>

<!-- DND-v4:
       <dt><i>Structured object</i></dt>
       <dd>
        <p>An object that will be cloned using the <span>structured clone</span> algorithm.</p>
       </dd>
-->

      </dl></dd>

     <dt><dfn id="the-drag-data-item-type-string">The drag data item type string</dfn></dt>

     <dd>

      <p>A Unicode string giving the type or format of the data,
      generally given by a <a href="infrastructure.html#mime-type">MIME type</a>. Some values that
      are not <a href="infrastructure.html#mime-type" title="MIME type">MIME types</a> are
      special-cased for legacy reasons. The API does not enforce the
      use of <a href="infrastructure.html#mime-type" title="MIME type">MIME types</a>; other values
      can be used as well. In all cases, however, the values are all
      <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII lowercase</a> by the API.</p>

      <p class="note">Strings that contain <a href="common-microsyntaxes.html#space-character" title="space
      character">space characters</a> cannot be used with the <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute, so authors are
      encouraged to use only <a href="infrastructure.html#mime-type" title="MIME type">MIME types</a>
      or custom strings (without spaces).</p>

      <p>There is a limit of one <i>Plain Unicode string</i> item per
      <a href="#the-drag-data-item-type-string" title="The drag data item type string">item type
      string</a>.</p> <!-- DND-v4: consider limiting the structured
      objects too -->

     </dd>

     <dt>The actual data</dt>

     <dd><p>A Unicode or binary string, in some cases with a file name
     (itself a Unicode string), <!-- (DND-v4:) or an object, --> as
     per <a href="#the-drag-data-item-kind">the drag data item kind</a>.</p></dd>

    </dl><p>The <a href="#drag-data-store-item-list">drag data store item list</a> is ordered in the
    order that the items were added to the list; most recently added
    last.</p>

   </li>

   <li>

    <p>The following information, used to generate the UI feedback
    during the drag:</p>

    <ul><li>User-agent-defined default feedback information, known as the
     <dfn id="drag-data-store-default-feedback">drag data store default feedback</dfn>.</li>

     <li>Optionally, a bitmap image and the coordinate of a point
     within that image, known as the <dfn id="drag-data-store-bitmap">drag data store bitmap</dfn>
     and <dfn id="drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate</dfn>.</li>

    </ul></li>

   <li>

    <p>A <dfn id="drag-data-store-mode">drag data store mode</dfn>, which is one of the
    following:</p>

    <dl><dt><dfn id="concept-dnd-rw" title="concept-dnd-rw">Read/write mode</dfn></dt>
     <dd>

      <p>For the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event.
      New data can be added to the <a href="#drag-data-store">drag data store</a>.</p>

     </dd>

     <dt><dfn id="concept-dnd-ro" title="concept-dnd-ro">Read-only mode</dfn></dt>
     <dd>

      <p>For the <code title="event-drop"><a href="#event-drop">drop</a></code> event. The list of
      items representing dragged data can be read, including the data.
      No new data can be added.</p>

     </dd>

     <dt><dfn id="concept-dnd-p" title="concept-dnd-p">Protected mode</dfn></dt>
     <dd>

      <p>For all other events. The formats and kinds in the <a href="#drag-data-store">drag
      data store</a> list of items representing dragged data can be
      enumerated, but the data itself is unavailable and no new data can
      be added.</p>

     </dd>

    </dl></li>

   <li>

    <p>A <dfn id="drag-data-store-allowed-effects-state">drag data store allowed effects state</dfn>, which is a
    string.</p>

   </li>

  </ul><p>When a <a href="#drag-data-store">drag data store</a> is <dfn id="create-a-drag-data-store" title="create a drag
  data store">created</dfn>, it must be initialized such that its
  <a href="#drag-data-store-item-list">drag data store item list</a> is empty, it has no
  <a href="#drag-data-store-default-feedback">drag data store default feedback</a>, it has no <a href="#drag-data-store-bitmap">drag
  data store bitmap</a> and <a href="#drag-data-store-hot-spot-coordinate">drag data store hot spot
  coordinate</a>, its <a href="#drag-data-store-mode">drag data store mode</a> is <a href="#concept-dnd-p" title="concept-dnd-p">protected mode</a>, and its <a href="#drag-data-store-allowed-effects-state">drag data
  store allowed effects state</a> is the string "<code title="">uninitialized</code>".</p>


  <h4 id="the-datatransfer-interface"><span class="secno">7.7.3 </span>The <code><a href="#datatransfer">DataTransfer</a></code> interface</h4>

  <p><code><a href="#datatransfer">DataTransfer</a></code> objects are used to expose the
  <a href="#drag-data-store">drag data store</a> that underlies a drag-and-drop
  operation.</p>

  <pre class="idl">interface <dfn id="datatransfer">DataTransfer</dfn> {
           attribute DOMString <a href="#dom-datatransfer-dropeffect" title="dom-DataTransfer-dropEffect">dropEffect</a>;
           attribute DOMString <a href="#dom-datatransfer-effectallowed" title="dom-DataTransfer-effectAllowed">effectAllowed</a>;

  readonly attribute <a href="#datatransferitemlist">DataTransferItemList</a> <a href="#dom-datatransfer-items" title="dom-DataTransfer-items">items</a>;

  void <a href="#dom-datatransfer-setdragimage" title="dom-DataTransfer-setDragImage">setDragImage</a>(Element image, long x, long y);

  /* old interface */
  readonly attribute <span>DOMString</span>[] <a href="#dom-datatransfer-types" title="dom-DataTransfer-types">types</a>;
  DOMString <a href="#dom-datatransfer-getdata" title="dom-DataTransfer-getData">getData</a>(DOMString format);
  void <a href="#dom-datatransfer-setdata" title="dom-DataTransfer-setData">setData</a>(DOMString format, DOMString data);
  void <a href="#dom-datatransfer-cleardata" title="dom-DataTransfer-clearData">clearData</a>(optional DOMString format);
  readonly attribute <a href="infrastructure.html#filelist">FileList</a> <a href="#dom-datatransfer-files" title="dom-DataTransfer-files">files</a>;
};</pre>

  <dl class="domintro"><dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the kind of operation that is currently selected. If
    the kind of operation isn't one of those that is allowed by the
    <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
    attribute, then the operation will fail.</p>

    <p>Can be set, to change the selected operation.</p>

    <p>The possible values are "<code title="">none</code>", "<code title="">copy</code>", "<code title="">link</code>", and "<code title="">move</code>".</p>

   </dd>


   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the kinds of operations that are to be allowed.</p>

    <p>Can be set (during the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event), to change the
    allowed operations.</p>

    <p>The possible values are "<code title="">none</code>", "<code title="">copy</code>", "<code title="">copyLink</code>", "<code title="">copyMove</code>", "<code title="">link</code>", "<code title="">linkMove</code>", "<code title="">move</code>", "<code title="">all</code>", and "<code title="">uninitialized</code>",</p>

   </dd>


   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-items"><a href="#dom-datatransfer-items">items</a></code></dt>

   <dd>

    <p>Returns a <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object, with the drag data.</p>

   </dd>


   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-setDragImage"><a href="#dom-datatransfer-setdragimage">setDragImage</a></code>(<var title="">element</var>, <var title="">x</var>, <var title="">y</var>)</dt>

   <dd>

    <p>Uses the given element to update the drag feedback, replacing any previously specified feedback.</p>

   </dd>
   

   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-types"><a href="#dom-datatransfer-types">types</a></code></dt>

   <dd>

    <p>Returns an array listing the formats that were set in the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event. In addition, if
    any files are being dragged, then one of the types will be the
    string "<code title="">Files</code>".</p>

   </dd>


   <dt><var title="">data</var> = <var title="">dataTransfer</var> . <code title="dom-DataTransfer-getData"><a href="#dom-datatransfer-getdata">getData</a></code>(<var title="">format</var>)</dt>

   <dd>

    <p>Returns the specified data. If there is no such data, returns the empty string.</p>

   </dd>


   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-setData"><a href="#dom-datatransfer-setdata">setData</a></code>(<var title="">format</var>, <var title="">data</var>)</dt>

   <dd>

    <p>Adds the specified data.</p>

   </dd>


   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-clearData"><a href="#dom-datatransfer-cleardata">clearData</a></code>( [ <var title="">format</var> ] )</dt>

   <dd>

    <p>Removes the data of the specified formats. Removes all data if
    the argument is omitted.</p>

   </dd>


   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-files"><a href="#dom-datatransfer-files">files</a></code></dt>

   <dd>

    <p>Returns a <code><a href="infrastructure.html#filelist">FileList</a></code> of the files being dragged, if any.</p>

   </dd>

  </dl><p><code><a href="#datatransfer">DataTransfer</a></code> objects are used during the <a href="#dndevents">drag-and-drop events</a>, and are only valid while
  those events are being fired.</p>

  <div class="impl">

  <p>A <code><a href="#datatransfer">DataTransfer</a></code> object is associated with a
  <a href="#drag-data-store">drag data store</a> while it is valid.</p>

  <p>The <dfn id="dom-datatransfer-dropeffect" title="dom-DataTransfer-dropEffect"><code>dropEffect</code></dfn>
  attribute controls the drag-and-drop feedback that the user is given
  during a drag-and-drop operation. When the <code><a href="#datatransfer">DataTransfer</a></code>
  object is created, the <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute is
  set to a string value. On getting, it must return its current value.
  On setting, if the new value is one of "<code title="">none</code>",
  "<code title="">copy</code>", "<code title="">link</code>", or
  "<code title="">move</code>", then the attribute's current value
  must be set to the new value. Other values must be ignored.</p>

  <p>The <dfn id="dom-datatransfer-effectallowed" title="dom-DataTransfer-effectAllowed"><code>effectAllowed</code></dfn>
  attribute is used in the drag-and-drop processing model to
  initialize the <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute
  during the <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> and <code title="event-dragover"><a href="#event-dragover">dragover</a></code> events. When the
  <code><a href="#datatransfer">DataTransfer</a></code> object is created, the <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
  attribute is set to a string value. On getting, it must return its
  current value. On setting, if <a href="#drag-data-store">drag data store</a>'s <a href="#drag-data-store-mode" title="drag data store mode">mode</a> is the <a href="#concept-dnd-rw" title="concept-dnd-rw">read/write mode</a> and the new value is
  one of "<code title="">none</code>", "<code title="">copy</code>",
  "<code title="">copyLink</code>", "<code title="">copyMove</code>",
  "<code title="">link</code>", "<code title="">linkMove</code>",
  "<code title="">move</code>", "<code title="">all</code>", or "<code title="">uninitialized</code>", then the attribute's current value
  must be set to the new value. Otherwise it must be left
  unchanged.</p>

  <p>The <dfn id="dom-datatransfer-items" title="dom-DataTransfer-items"><code>items</code></dfn>
  attribute must return a <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object
  associated with the <code><a href="#datatransfer">DataTransfer</a></code> object. The same
  object must be returned each time.</p>

  <p>The <dfn id="dom-datatransfer-setdragimage" title="dom-DataTransfer-setDragImage"><code>setDragImage(<var title="">element</var>, <var title="">x</var>, <var title="">y</var>)</code></dfn> method must run the following
  steps:</p>

  <ol><li><p>If the <code><a href="#datatransfer">DataTransfer</a></code> object is no longer
   associated with a <a href="#drag-data-store">drag data store</a>, abort these steps.
   Nothing happens.</p></li>

   <li><p>If the <a href="#drag-data-store">drag data store</a>'s <a href="#drag-data-store-mode" title="drag data
   store mode">mode</a> is not the <a href="#concept-dnd-rw" title="concept-dnd-rw">read/write mode</a>, abort these steps.
   Nothing happens.</p></li>

   <li><p>If the <var title="">element</var> argument is an
   <code><a href="the-img-element.html#the-img-element">img</a></code> element, then set the <a href="#drag-data-store-bitmap">drag data store
   bitmap</a> to the element's image (at its intrinsic size);
   otherwise, set the <a href="#drag-data-store-bitmap">drag data store bitmap</a> to an image
   generated from the given element (the exact mechanism for doing so
   is not currently specified).</p></li>

   <li><p>Set the <a href="#drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate</a> to
   the given <var title="">x</var>, <var title="">y</var>
   coordinate.</p></li>

  </ol><p>The <dfn id="dom-datatransfer-types" title="dom-DataTransfer-types"><code>types</code></dfn>
  attribute must return a <a href="infrastructure.html#live">live</a> <a href="infrastructure.html#dfn-read-only-array" title="dfn-read-only-array">read only</a> array giving the
  strings that the following steps would produce. The same object must
  be returned each time.</p>

  <ol><li><p>Start with an empty list <var title="">L</var>.</p></li>

   <li><p>If the <code><a href="#datatransfer">DataTransfer</a></code> object is no longer
   associated with a <a href="#drag-data-store">drag data store</a>, the array is empty.
   Abort these steps; return the empty list <var title="">L</var>.</p></li>

   <li><p>For each item in the <a href="#drag-data-store-item-list">drag data store item list</a>
   <!-- in some order...? --> whose <a href="#the-drag-data-item-kind" title="the drag data item
   kind">kind</a> is <i>Plain Unicode string</i>, add an entry to
   the list <var title="">L</var> consisting of the item's <a href="#the-drag-data-item-type-string" title="the drag data item type string">type string</a>.</p></li>

   <li><p>If there are any items in the <a href="#drag-data-store-item-list">drag data store item
   list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item kind">kind</a>
   is <i><a href="infrastructure.html#file">File</a></i>, then add an entry to the list <var title="">L</var>
   consisting of the string "<code title="">Files</code>". (This value
   can be distinguished from the other values because it is not
   lowercase.)</p></li>

   <!-- <li><p>Sort the list...?</p></li> -->

   <li><p>The strings produced by these steps are those in the list
   <var title="">L</var>.</p></li>

  </ol><p>The <dfn id="dom-datatransfer-getdata" title="dom-DataTransfer-getData"><code>getData(<var title="">format</var>)</code></dfn> method
  must run the following steps:</p>

  <ol><li><p>If the <code><a href="#datatransfer">DataTransfer</a></code> object is no longer
   associated with a <a href="#drag-data-store">drag data store</a>, return the empty
   string and abort these steps.</p></li>

   <li><p>If the <a href="#drag-data-store">drag data store</a>'s <a href="#drag-data-store-mode" title="drag data
   store mode">mode</a> is the <a href="#concept-dnd-p" title="concept-dnd-p">protected mode</a>, return the empty
   string and abort these steps.</p></li>

   <li><p>Let <var title="">format</var> be the first argument,
   <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII lowercase</a>.</p></li>

   <li><p>Let <var title="">convert-to-URL</var> be false.</p></li>

   <li><p>If <var title="">format</var> equals "<code title="">text</code>", change it to "<code title="">text/plain</code>".</p></li>

   <li><p>If <var title="">format</var> equals "<code title="">url</code>", change it to "<code title="">text/uri-list</code>" and set <var title="">convert-to-URL</var> to true.</p></li>

   <li><p>If there is no item in the <a href="#drag-data-store-item-list">drag data store item
   list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item kind">kind</a>
   is <i>Plain Unicode string</i> and whose <a href="#the-drag-data-item-type-string" title="the drag data
   item type string">type string</a> is equal to <var title="">format</var>, return the empty string and abort these
   steps.</p></li>

   <li><p>Let <var title="">result</var> be the data of the item
   in the <a href="#drag-data-store-item-list">drag data store item list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item kind">kind</a> is <i>Plain Unicode
   string</i> and whose <a href="#the-drag-data-item-type-string" title="the drag data item type
   string">type string</a> is equal to <var title="">format</var>.</p></li>

   <li><p>If <var title="">convert-to-URL</var> is true, then parse
   <var title="">result</var> as appropriate for <code title="">text/uri-list</code> data, and then set <var title="">result</var> to the first URL from the list, if any, or
   the empty string otherwise. <a href="#refsRFC2483">[RFC2483]</a></p></li>

   <li><p>Return <var title="">result</var>.</p></li>

  </ol><p>The <dfn id="dom-datatransfer-setdata" title="dom-DataTransfer-setData"><code>setData(<var title="">format</var>, <var title="">data</var>)</code></dfn> method
  must run the following steps:</p>

  <ol><li><p>If the <code><a href="#datatransfer">DataTransfer</a></code> object is no longer
   associated with a <a href="#drag-data-store">drag data store</a>, abort these steps.
   Nothing happens.</p></li>

   <li><p>If the <a href="#drag-data-store">drag data store</a>'s <a href="#drag-data-store-mode" title="drag data
   store mode">mode</a> is not the <a href="#concept-dnd-rw" title="concept-dnd-rw">read/write mode</a>, abort these steps.
   Nothing happens.</p></li>

   <li><p>Let <var title="">format</var> be the first argument,
   <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII lowercase</a>.</p></li>

   <li>

    <p>If <var title="">format</var> equals "<code title="">text</code>", change it to "<code title="">text/plain</code>".</p>

    <p>If <var title="">format</var> equals "<code title="">url</code>", change it to "<code title="">text/uri-list</code>".</p>

   </li>

   <li><p>Remove the item in the <a href="#drag-data-store-item-list">drag data store item
   list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item kind">kind</a>
   is <i>Plain Unicode string</i> and whose <a href="#the-drag-data-item-type-string" title="the drag data
   item type string">type string</a> is equal to <var title="">format</var>, if there is one.</p></li>

   <li><p>Add an item to the <a href="#drag-data-store-item-list">drag data store item list</a>
   whose <a href="#the-drag-data-item-kind" title="the drag data item kind">kind</a> is <i>Plain
   Unicode string</i>, whose <a href="#the-drag-data-item-type-string" title="the drag data item type
   string">type string</a> is equal to <var title="">format</var>,
   and whose data is the string given by the method's second
   argument.</p></li>

  </ol><p>The <dfn id="dom-datatransfer-cleardata" title="dom-DataTransfer-clearData"><code>clearData()</code></dfn>
  method must run the following steps:</p>

  <ol><li><p>If the <code><a href="#datatransfer">DataTransfer</a></code> object is no longer
   associated with a <a href="#drag-data-store">drag data store</a>, abort these steps.
   Nothing happens.</p></li>

   <li><p>If the <a href="#drag-data-store">drag data store</a>'s <a href="#drag-data-store-mode" title="drag data
   store mode">mode</a> is not the <a href="#concept-dnd-rw" title="concept-dnd-rw">read/write mode</a>, abort these steps.
   Nothing happens.</p></li>

   <li><p>If the method was called with no arguments, remove each item
   in the <a href="#drag-data-store-item-list">drag data store item list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item kind">kind</a> is <i>Plain Unicode
   string</i>, and abort these steps.</p></li>

   <li><p>Let <var title="">format</var> be the first argument,
   <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII lowercase</a>.</p></li>

   <li>

    <p>If <var title="">format</var> equals "<code title="">text</code>", change it to "<code title="">text/plain</code>".</p>

    <p>If <var title="">format</var> equals "<code title="">url</code>", change it to "<code title="">text/uri-list</code>".</p>

   </li>

   <li><p>Remove the item in the <a href="#drag-data-store-item-list">drag data store item
   list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item kind">kind</a>
   is <i>Plain Unicode string</i> and whose <a href="#the-drag-data-item-type-string" title="the drag data
   item type string">type string</a> is equal to <var title="">format</var>, if there is one.</p></li>

  </ol><p class="note">The <code title="dom-DataTransfer-clearData"><a href="#dom-datatransfer-cleardata">clearData()</a></code> method does
  not affect whether any files were included in the drag, so the <code title="dom-DataTransfer-types"><a href="#dom-datatransfer-types">types</a></code> attribute's list might
  still not be empty after calling <code title="dom-DataTransfer-clearData"><a href="#dom-datatransfer-cleardata">clearData()</a></code> (it would
  still contain the "<code title="">Files</code>" string if any files
  were included in the drag).</p>

  <p>The <dfn id="dom-datatransfer-files" title="dom-DataTransfer-files"><code>files</code></dfn>
  attribute must return a <a href="infrastructure.html#live">live</a> <code><a href="infrastructure.html#filelist">FileList</a></code>
  sequence consisting of <code><a href="infrastructure.html#file">File</a></code> objects representing the
  files found by the following steps. The same object must be returned
  each time. Furthermore, for a given <code><a href="infrastructure.html#filelist">FileList</a></code> object and
  a given underlying file, the same <code><a href="infrastructure.html#file">File</a></code> object must be
  used each time.</p>

  <ol><li><p>Start with an empty list <var title="">L</var>.</p></li>

   <li><p>If the <code><a href="#datatransfer">DataTransfer</a></code> object is no longer
   associated with a <a href="#drag-data-store">drag data store</a>, the
   <code><a href="infrastructure.html#filelist">FileList</a></code> is empty. Abort these steps; return the
   empty list <var title="">L</var>.</p></li>

   <li><p>If the <a href="#drag-data-store">drag data store</a>'s <a href="#drag-data-store-mode" title="drag data
   store mode">mode</a> is the <a href="#concept-dnd-p" title="concept-dnd-p">protected mode</a>, abort these steps;
   return the empty list <var title="">L</var>.</p></li>

   <li><p>For each item in the <a href="#drag-data-store-item-list">drag data store item list</a>
   <!-- in some order...? --> whose <a href="#the-drag-data-item-kind" title="the drag data item
   kind">kind</a> is <i><a href="infrastructure.html#file">File</a></i> <!-- DND-v3: (not <i>Blob</i>) -->,
   add the item's data (the file, in particular its name and contents,
   as well as its <a href="#the-drag-data-item-type-string" title="the drag data item type
   string">type</a>) to the list <var title="">L</var>.</p></li>

   <!-- <li><p>Sort the list...?</p></li> -->

   <li><p>The files found by these steps are those in the list <var title="">L</var>.</p></li>

  </ol><p class="note">This version of the API does not expose the types of
  the files during the drag.</p>

  </div>


  <h5 id="the-datatransferitemlist-interface"><span class="secno">7.7.3.1 </span>The <code><a href="#datatransferitemlist">DataTransferItemList</a></code> interface</h5>

  <p>Each <code><a href="#datatransfer">DataTransfer</a></code> object is associated with a
  <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object.</p>

  <pre class="idl">interface <dfn id="datatransferitemlist">DataTransferItemList</dfn> {
  readonly attribute unsigned long <a href="#dom-datatransferitemlist-length" title="dom-DataTransferItemList-length">length</a>;
  <a href="#dom-datatransferitemlist-item" title="dom-DataTransferItemList-item">getter</a> <a href="#datatransferitem">DataTransferItem</a> (unsigned long index);
  <a href="#dom-datatransferitemlist-removeitem" title="dom-DataTransferItemList-removeItem">deleter</a> void (unsigned long index);
  void <a href="#dom-datatransferitemlist-clear" title="dom-DataTransferItemList-clear">clear</a>();

  <a href="#datatransferitem">DataTransferItem</a>? <a href="#dom-datatransferitemlist-add" title="dom-DataTransferItemList-add">add</a>(DOMString data, DOMString type);<!--
DND-v3:  <span>DataTransferItem</span>? <span title="dom-DataTransferItemList-add">add</span>(<span>Blob</span> data);-->
  <a href="#datatransferitem">DataTransferItem</a>? <a href="#dom-datatransferitemlist-add" title="dom-DataTransferItemList-add">add</a>(<a href="infrastructure.html#file">File</a> data);<!--
DND-v4:  <span>DataTransferItem</span>? <span title="dom-DataTransferItemList-add">add</span>(any data, DOMString type);--><!--
DND-v5:  <span>DataTransferItem</span>? <span title="dom-DataTransferItemList-add">add</span>(<span>DataTransferPromise</span> data);-->
};</pre>

  <dl class="domintro"><dt><var title="">items</var> . <code title="dom-DataTransferItemList-length"><a href="#dom-datatransferitemlist-length">length</a></code></dt>

   <dd><p>Returns the number of items in the <a href="#drag-data-store">drag data store</a>.</p></dd>


   <dt><var title="">items</var>[<var title="">index</var>]</dt>

   <dd>

    <p>Returns the <code><a href="#datatransferitem">DataTransferItem</a></code> object representing the <var title="">index</var>th entry in the <a href="#drag-data-store">drag data store</a>.</p>

   </dd>


   <dt><code title="">delete</code> <var title="">items</var>[<var title="">index</var>]</dt>

   <dd>

    <p>Removes the <var title="">index</var>th entry in the <a href="#drag-data-store">drag data store</a>.</p>

   </dd>


   <dt><var title="">items</var> . <code title="dom-DataTransferItemList-clear"><a href="#dom-datatransferitemlist-clear">clear</a></code>()</dt>

   <dd>

    <p>Removes all the entries in the <a href="#drag-data-store">drag data store</a>.</p>

   </dd>


   <dt><var title="">items</var> . <code title="dom-DataTransferItemList-add"><a href="#dom-datatransferitemlist-add">add</a></code>(<var title="">data</var>)</dt>
   <dt><var title="">items</var> . <code title="dom-DataTransferItemList-add"><a href="#dom-datatransferitemlist-add">add</a></code>(<var title="">data</var>, <var title="">type</var>)</dt>

   <dd>

    <p>Adds a new entry for the given data to the <a href="#drag-data-store">drag data
    store</a>. If the data is plain text <!-- DND-v4: or an object -->
    then a <var title="">type</var> string has to be provided
    also.</p>

   </dd>

  </dl><div class="impl">

  <p>While the <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object's
  <code><a href="#datatransfer">DataTransfer</a></code> object is associated with a <a href="#drag-data-store">drag
  data store</a>, the <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object's
  <i>mode</i> is the same as the <a href="#drag-data-store-mode">drag data store mode</a>.
  When the <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object's
  <code><a href="#datatransfer">DataTransfer</a></code> object is <em>not</em> associated with a
  <a href="#drag-data-store">drag data store</a>, the <code><a href="#datatransferitemlist">DataTransferItemList</a></code>
  object's <i>mode</i> is the <i>disabled mode</i>. The <a href="#drag-data-store">drag
  data store</a> referenced in this section (which is used only
  when the <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object is not in the
  <i>disabled mode</i>) is the <a href="#drag-data-store">drag data store</a> with which
  the <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object's
  <code><a href="#datatransfer">DataTransfer</a></code> object is associated.</p>

  <p>The <dfn id="dom-datatransferitemlist-length" title="dom-DataTransferItemList-length"><code>length</code></dfn>
  attribute must return zero if the object is in the <i>disabled
  mode</i>; otherwise it must return the number of items in the
  <a href="#drag-data-store-item-list">drag data store item list</a>.</p>

  <p>When a <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object is not in the
  <i>disabled mode</i>, its <a href="infrastructure.html#supported-property-indices">supported property indices</a>
  are the numbers in the range

    <span title="">0 .. <var title="">n</var>-1</span>,

  where <var title="">n</var> is the number of items in the <a href="#drag-data-store-item-list">drag
  data store item list</a>.</p>

  <p>To <dfn id="dom-datatransferitemlist-item" title="dom-DataTransferItemList-item">determine the value of
  an indexed property</dfn> <var title="">i</var> of a
  <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object, the user agent must return a
  <code><a href="#datatransferitem">DataTransferItem</a></code> object representing the <var title="">i</var>th item in the <a href="#drag-data-store">drag data store</a>. The
  same object must be returned each time a particular item is obtained
  from this <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object. The
  <code><a href="#datatransferitem">DataTransferItem</a></code> object must be associated with the
  same <code><a href="#datatransfer">DataTransfer</a></code> object as the
  <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object when it is first created.</p>

  <p>To <dfn id="dom-datatransferitemlist-removeitem" title="dom-DataTransferItemList-removeItem">delete an
  existing indexed property</dfn> <var title="">i</var> of a
  <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object, the user agent must run these
  steps:</p>

  <ol><li><p>If the <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object is not in the
   <i title="concept-dnd-rw"><a href="#concept-dnd-rw">read/write mode</a></i>, throw an
   <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception and abort these
   steps.</p></li>

   <li><p>Remove the <var title="">i</var>th item from the <a href="#drag-data-store">drag
   data store</a>.</p></li>

  </ol><p>The <dfn id="dom-datatransferitemlist-clear" title="dom-DataTransferItemList-clear"><code>clear</code></dfn> method,
  if the <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object is in the <i title="concept-dnd-rw"><a href="#concept-dnd-rw">read/write mode</a></i>, must remove all the
  items from the <a href="#drag-data-store">drag data store</a>. Otherwise, it must do
  nothing.</p>

  <p>The <dfn id="dom-datatransferitemlist-add" title="dom-DataTransferItemList-add"><code>add()</code></dfn> method
  must run the following steps:</p>

  <ol><li><p>If the <code><a href="#datatransferitemlist">DataTransferItemList</a></code> object is not in the
   <i title="concept-dnd-rw"><a href="#concept-dnd-rw">read/write mode</a></i>, return null and
   abort these steps.</p></li>

   <li>

    <p>Jump to the appropriate set of steps from the following list:</p>

    <dl class="switch"><dt>If the first argument to the method is a string</dt>

     <dd>

      <p>If there is already an item in the <a href="#drag-data-store-item-list">drag data store item
      list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item
      kind">kind</a> is <i>Plain Unicode string</i> and whose <a href="#the-drag-data-item-type-string" title="the drag data item type string">type string</a> is
      equal to the value of the method's second argument,
      <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII lowercase</a>, then throw a
      <code><a href="infrastructure.html#notsupportederror">NotSupportedError</a></code> exception and abort these
      steps.</p>

      <p>Otherwise, add an item to the <a href="#drag-data-store-item-list">drag data store item
      list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item
      kind">kind</a> is <i>Plain Unicode string</i>, whose <a href="#the-drag-data-item-type-string" title="the drag data item type string">type string</a> is
      equal to the value of the method's second argument,
      <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII lowercase</a>, and whose data is the
      string given by the method's first argument.</p>

     </dd>

<!--DND-v3:
     <dt>If the first argument to the method is a <code>Blob</code></dt>

     <dd>

      <p>Add an item to the <span>drag data store item list</span>
      whose <span title="the drag data item kind">kind</span> is
      <i>Blob</i>, whose <span title="the drag data item type
      string">type string</span> is the <code
      title="dom-Blob-type">type</code> of the <code>Blob</code>,
      <span>converted to ASCII lowercase</span>, and whose data is the
      same as the <code>Blob</code>'s data.</p>

     </dd>
-->

     <dt>If the first argument to the method is a <code><a href="infrastructure.html#file">File</a></code></dt>

     <dd>

      <p>Add an item to the <a href="#drag-data-store-item-list">drag data store item list</a>
      whose <a href="#the-drag-data-item-kind" title="the drag data item kind">kind</a> is
      <i><a href="infrastructure.html#file">File</a></i>, whose <a href="#the-drag-data-item-type-string" title="the drag data item type
      string">type string</a> is the <code title="dom-Blob-type">type</code> of the <code><a href="infrastructure.html#file">File</a></code>,
      <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII lowercase</a>, and whose data is the
      same as the <code><a href="infrastructure.html#file">File</a></code>'s data.</p>

     </dd>

<!--DND-v4: (might want to prevent duplicates like for strings; see above)
[make sure that the cloning happens before any side-effects can happen]
     <dt>Otherwise

     <dd>

      <p>Add an item to the <span>drag data store item list</span>
      whose <span title="the drag data item kind">kind</span> is
      <i>Object</i>, whose <span title="the drag data item type
      string">type string</span> is equal to the value of the method's
      second argument, <span>converted to ASCII lowercase</span>, and
      whose data is a <span>structured clone</span> of the method's
      first argument. If creating the clone throws an exception, then
      throw that exception and abort these steps.</p>

     </dd>
-->

    </dl></li>

   <li><p><a href="#dom-datatransferitemlist-item" title="dom-DataTransferItemList-item">Determine the value
   of the indexed property</a> corresponding to the newly added
   item, and return that value (a newly created
   <code><a href="#datatransferitem">DataTransferItem</a></code> object).</p></li>

  </ol></div>


  <h5 id="the-datatransferitem-interface"><span class="secno">7.7.3.2 </span>The <code><a href="#datatransferitem">DataTransferItem</a></code> interface</h5>

  <p>Each <code><a href="#datatransferitem">DataTransferItem</a></code> object is associated with a
  <code><a href="#datatransfer">DataTransfer</a></code> object.</p>

  <pre class="idl">interface <dfn id="datatransferitem">DataTransferItem</dfn> {
  readonly attribute DOMString <a href="#dom-datatransferitem-kind" title="dom-DataTransferItem-kind">kind</a>;
  readonly attribute DOMString <a href="#dom-datatransferitem-type" title="dom-DataTransferItem-type">type</a>;
  void <a href="#dom-datatransferitem-getasstring" title="dom-DataTransferItem-getAsString">getAsString</a>(<a href="#functionstringcallback">FunctionStringCallback</a>? _callback);<!--
DND-v3:  <span>Blob</span> <span title="dom-DataTransferItem-getAsBlob">getAsBlob</span>();-->
  <a href="infrastructure.html#file">File</a>? <a href="#dom-datatransferitem-getasfile" title="dom-DataTransferItem-getAsFile">getAsFile</a>();<!--
DND-v4:  void <span title="dom-DataTransferItem-getAsObject">getAsObject</span>(<span>FunctionObjectCallback</span> _callback);-->
};

[Callback, NoInterfaceObject]
interface <dfn id="functionstringcallback">FunctionStringCallback</dfn> {
  void <span title="dom-FunctionStringCallback-handleEvent">handleEvent</span>(DOMString data);
};<!--

// DND-v4:
[Callback, NoInterfaceObject]
interface <dfn>FunctionObjectCallback</dfn> {
  void <span title="dom-FunctionObjectCallback-handleEvent">handleEvent</span>(any data);
};--></pre>

  <dl class="domintro"><dt><var title="">item</var> . <code title="dom-DataTransferItem-kind"><a href="#dom-datatransferitem-kind">kind</a></code></dt>
   <dd>

    <p>Returns <a href="#the-drag-data-item-kind">the drag data item kind</a>, one of: "string",
    <!-- DND-v3: "blob", --> "file"<!-- DND-v4: , "object" -->.</p>

   </dd>

   <dt><var title="">item</var> . <code title="dom-DataTransferItem-type"><a href="#dom-datatransferitem-type">type</a></code></dt>
   <dd>

    <p>Returns <a href="#the-drag-data-item-type-string">the drag data item type string</a>.</p>

   </dd>

   <dt><var title="">item</var> . <code title="dom-DataTransferItem-getAsString"><a href="#dom-datatransferitem-getasstring">getAsString</a></code>(<var title="">callback</var>)</dt>
   <dd>

    <p>Invokes the callback with the string data as the argument, if <a href="#the-drag-data-item-kind">the drag data item kind</a> is <i>Plain Unicode string</i>.</p>

   </dd>

<!-- DND-v3:
   <dt><var title="">file</var> = <var title="">item</var> . <code title="dom-DataTransferItem-getAsBlob">getAsBlob</code>()</dt>
   <dd>

    <p>Returns a <code>Blob</code> object, if <span>the drag data item kind</span> is <i>Blob</i> or <i>File</i>.</p>

   </dd>
-->

   <dt><var title="">file</var> = <var title="">item</var> . <code title="dom-DataTransferItem-getAsFile"><a href="#dom-datatransferitem-getasfile">getAsFile</a></code>()</dt>
   <dd>

    <p>Returns a <code><a href="infrastructure.html#file">File</a></code> object, if <a href="#the-drag-data-item-kind">the drag data item kind</a> is <i><a href="infrastructure.html#file">File</a></i>.</p>

   </dd>

<!-- DND-v4:
   <dt><var title="">file</var> = <var title="">item</var> . <code title="dom-DataTransferItem-getAsObject">getAsObject</code>()</dt>
   <dd>

    <p>Invokes the callback with the cloned object data as the argument, if <span>the drag data item kind</span> is <i>Plain Unicode string</i> or <i>Object</i>.</p>

   </dd>
-->

  </dl><div class="impl">

  <p>While the <code><a href="#datatransferitem">DataTransferItem</a></code> object's
  <code><a href="#datatransfer">DataTransfer</a></code> object is associated with a <a href="#drag-data-store">drag
  data store</a> and that <a href="#drag-data-store">drag data store</a>'s <a href="#drag-data-store-item-list">drag
  data store item list</a> still contains the item that the
  <code><a href="#datatransferitem">DataTransferItem</a></code> object represents, the
  <code><a href="#datatransferitem">DataTransferItem</a></code> object's <i>mode</i> is the same as
  the <a href="#drag-data-store-mode">drag data store mode</a>. When the
  <code><a href="#datatransferitem">DataTransferItem</a></code> object's <code><a href="#datatransfer">DataTransfer</a></code>
  object is <em>not</em> associated with a <a href="#drag-data-store">drag data
  store</a>, or if the item that the <code><a href="#datatransferitem">DataTransferItem</a></code>
  object represents has been removed from the relevant <a href="#drag-data-store-item-list">drag data
  store item list</a>, the <code><a href="#datatransferitem">DataTransferItem</a></code> object's
  <i>mode</i> is the <i>disabled mode</i>. The <a href="#drag-data-store">drag data
  store</a> referenced in this section (which is used only when the
  <code><a href="#datatransferitem">DataTransferItem</a></code> object is not in the <i>disabled
  mode</i>) is the <a href="#drag-data-store">drag data store</a> with which the
  <code><a href="#datatransferitem">DataTransferItem</a></code> object's <code><a href="#datatransfer">DataTransfer</a></code>
  object is associated.</p>

  <p>The <dfn id="dom-datatransferitem-kind" title="dom-DataTransferItem-kind"><code>kind</code></dfn> attribute
  must return the empty string if the <code><a href="#datatransferitem">DataTransferItem</a></code>
  object is in the <i>disabled mode</i>; otherwise it must return the
  string given in the cell from the second column of the following
  table from the row whose cell in the first column contains <a href="#the-drag-data-item-kind">the
  drag data item kind</a> of the item represented by the
  <code><a href="#datatransferitem">DataTransferItem</a></code> object:</p>

  <table><thead><tr><th> Kind </th><th> String
   </th></tr></thead><tbody><tr><td> <i>Plain Unicode string</i> </td><td> "<code title="">string</code>"
<!-- DND-v3:    <tr> <td> <i>Blob</i> <td> "<code title="">blob</code>"-->
    </td></tr><tr><td> <i><a href="infrastructure.html#file">File</a></i> </td><td> "<code title="">file</code>"
<!-- DND-v4:    <tr> <td> <i>Object</i> <td> "<code title="">object</code>"-->
  </td></tr></tbody></table><p>The <dfn id="dom-datatransferitem-type" title="dom-DataTransferItem-type"><code>type</code></dfn> attribute
  must return the empty string if the <code><a href="#datatransferitem">DataTransferItem</a></code>
  object is in the <i>disabled mode</i>; otherwise it must return
  <a href="#the-drag-data-item-type-string">the drag data item type string</a> of the item represented
  by the <code><a href="#datatransferitem">DataTransferItem</a></code> object.</p>

  <p>The <dfn id="dom-datatransferitem-getasstring" title="dom-DataTransferItem-getAsString"><code>getAsString(<var title="">callback</var>)</code></dfn> method must run the following
  steps:</p>

  <ol><li><p>If the <var title="">callback</var> is null, abort these
   steps.</p></li>

   <li><p>If the <code><a href="#datatransferitem">DataTransferItem</a></code> object is not in the <i title="concept-dnd-rw"><a href="#concept-dnd-rw">read/write mode</a></i> or the <i title="concept-dnd-ro"><a href="#concept-dnd-ro">read-only mode</a></i>, abort these steps. The
   callback is never invoked.</p></li>

   <li><p>If <a href="#the-drag-data-item-kind">the drag data item kind</a> is not <i>Plain
   Unicode string</i>, abort these steps. The callback is never
   invoked.</p></li>

   <li><p>Otherwise, <a href="#queue-a-task">queue a task</a> to invoke <var title="">callback</var>, passing the actual data of the item
   represented by the <code><a href="#datatransferitem">DataTransferItem</a></code> object as the
   argument.</p></li>

  </ol><!--DND-v3:
  <p>The <dfn
  title="dom-DataTransferItem-getAsBlob"><code>getAsBlob()</code></dfn>
  method must run the following steps:</p>

  <ol>

   <li><p>If the <code>DataTransferItem</code> object is not in the <i
   title="concept-dnd-rw">read/write mode</i> or the <i
   title="concept-dnd-ro">read-only mode</i>, return null and abort
   these steps.</p></li>

   <li>

--><!--DND-v4:
    <p>If <span>the drag data item kind</span> is <i>Object</i>,
    return null.</p></li>
--><!--DND-v3:

    <p>If <span>the drag data item kind</span> is <i>File</i>, then
    return a new <code>File</code> object representing the actual data
    of the item represented by the <code>DataTransferItem</code>
    object.</p>

    <p>If <span>the drag data item kind</span> is <i>Unicode Data
    string</i>, then return a new <code>Blob</code> object
    representing the actual data of the item represented by the
    <code>DataTransferItem</code> object, with the <code
    title="dom-Blob-type">type</code> of the <code>Blob</code> being
    <span>the drag data item type string</span> and with the binary
    data of the <code>Blob</code> object being the Unicode string
    encoded as UTF-8. <a href="#refsRFC3629">[RFC3629]</a></p>

    <p>Otherwise, <span>the drag data item kind</span> is <i>Blob</i>;
    return a new <code>Blob</code> object representing the actual data
    of the item represented by the <code>DataTransferItem</code>
    object.</p>

   </li>

  </ol>
--><p>The <dfn id="dom-datatransferitem-getasfile" title="dom-DataTransferItem-getAsFile"><code>getAsFile()</code></dfn>
  method must run the following steps:</p>

  <ol><li><p>If the <code><a href="#datatransferitem">DataTransferItem</a></code> object is not in the <i title="concept-dnd-rw"><a href="#concept-dnd-rw">read/write mode</a></i> or the <i title="concept-dnd-ro"><a href="#concept-dnd-ro">read-only mode</a></i>, return null and abort
   these steps.</p></li>

   <li><p>If <a href="#the-drag-data-item-kind">the drag data item kind</a> is not <i><a href="infrastructure.html#file">File</a></i>,
   then return null and abort these steps.</p></li>

   <li><p>Return a new <code><a href="infrastructure.html#file">File</a></code> object representing the
   actual data of the item represented by the
   <code><a href="#datatransferitem">DataTransferItem</a></code> object.</p>

  </li></ol><!--DND-v4:
  <p>The <dfn
  title="dom-DataTransferItem-getAsObject"><code>getAsObject(<var
  title="">callback</var>)</code></dfn> method must run the following
  steps:</p>

  <ol>

   <li><p>If the <code>DataTransferItem</code> object is not in the <i
   title="concept-dnd-rw">read/write mode</i> or the <i
   title="concept-dnd-ro">read-only mode</i>, return null and abort
   these steps.</p></li>

   <li>

    <p>Let <var title="">data</var> be the actual data of the item
    represented by the <code>DataTransferItem</code> object.</p>

    <p>If <span>the drag data item kind</span> is <i>Unicode Data
    string</i>, then <var title="">data</var> is a <code
    title="">DOMString</code> containing the actual data.</p>

    <p>If <span>the drag data item kind</span> is <i>Blob</i>, then
    <var title="">data</var> is a <code>Blob</code> representing the
    actual data.</p>

    <p>If <span>the drag data item kind</span> is <i>File</i>, then
    <var title="">data</var> is a <code>File</code> representing the
    actual data.</p>

    <p>If <span>the drag data item kind</span> is <i>Object</i>, then
    <var title="">data</var> is the object that is the actual
    data.</p>

   </li>

   <li><span>Queue a task</span> to invoke <var
   title="">callback</var>, passing a <span>structured clone</span> of
   <var title="">data</var> as the argument.</p></li>

  </ol>
--></div>



  <h4 id="the-dragevent-interface"><span class="secno">7.7.4 </span>The <code><a href="#dragevent">DragEvent</a></code> interface</h4>

  <p>The drag-and-drop processing model involves several events. They
  all use the <code><a href="#dragevent">DragEvent</a></code> interface.</p>

  <pre class="idl">[Constructor(DOMString type, optional <a href="#drageventinit">DragEventInit</a> eventInitDict)]
interface <dfn id="dragevent">DragEvent</dfn> : <a href="infrastructure.html#mouseevent-10">MouseEvent</a> {
  readonly attribute <a href="#datatransfer">DataTransfer</a>? <a href="#dom-dragevent-datatransfer" title="dom-DragEvent-dataTransfer">dataTransfer</a>;
};

dictionary <dfn id="drageventinit">DragEventInit</dfn> : <a href="infrastructure.html#eventinit">EventInit</a> {
  // Attributes from UIEvent:
  <a href="#window">Window</a>? <a href="infrastructure.html#dom-uievent-view" title="dom-UIEvent-view">view</a> = null;
  long <a href="infrastructure.html#dom-uievent-detail" title="dom-UIEvent-detail">detail</a> = 0;
  // Attributes for MouseEvent:
  long <a href="infrastructure.html#dom-mouseevent-screenx" title="dom-MouseEvent-screenX">screenX</a> = 0;
  long <a href="infrastructure.html#dom-mouseevent-screeny" title="dom-MouseEvent-screenY">screenY</a> = 0;
  long <a href="infrastructure.html#dom-mouseevent-clientx" title="dom-MouseEvent-clientX">clientX</a> = 0;
  long <a href="infrastructure.html#dom-mouseevent-clienty" title="dom-MouseEvent-clientY">clientY</a> = 0;
  boolean <a href="infrastructure.html#dom-mouseevent-ctrlkey" title="dom-MouseEvent-ctrlKey">ctrlKey</a> = false;
  boolean <a href="infrastructure.html#dom-mouseevent-shiftkey" title="dom-MouseEvent-shiftKey">shiftKey</a> = false;
  boolean <a href="infrastructure.html#dom-mouseevent-altkey" title="dom-MouseEvent-altKey">altKey</a> = false;
  boolean <a href="infrastructure.html#dom-mouseevent-metakey" title="dom-MouseEvent-metaKey">metaKey</a> = false;
  unsigned short <a href="infrastructure.html#dom-mouseevent-button" title="dom-MouseEvent-button">button</a> = 0;
  unsigned short <a href="infrastructure.html#dom-mouseevent-buttons" title="dom-MouseEvent-buttons">buttons</a> = 0;
  EventTarget? <a href="infrastructure.html#dom-mouseevent-relatedtarget" title="dom-MouseEvent-relatedTarget">relatedTarget</a> = null;
  // Attributes for <a href="#dragevent">DragEvent</a>:
  <a href="#datatransfer">DataTransfer</a>? dataTransfer;
};</pre>

  <dl class="domintro"><dt><var title="">event</var> . <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code></dt>

   <dd>

    <p>Returns the <code><a href="#datatransfer">DataTransfer</a></code> object for the event.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-dragevent-datatransfer" title="dom-DragEvent-dataTransfer"><code>dataTransfer</code></dfn>
  attribute of the <code><a href="#dragevent">DragEvent</a></code> interface must return the
  value it was initialized to. When the object is created, this
  attribute must be initialized to null. It represents the context
  information for the event.</p>

  </div>

  <div class="impl">

  <p>When a user agent is required to <dfn id="fire-a-dnd-event">fire a DND event</dfn>
  named <var title="">e</var> at an element, using a particular
  <a href="#drag-data-store">drag data store</a>, the user agent must run the following
  steps:</p>

  <ol><li>

    <p>If <var title="">e</var> is <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code>, set the <a href="#drag-data-store-mode">drag data
    store mode</a> to the <a href="#concept-dnd-rw" title="concept-dnd-rw">read/write
    mode</a>.</p>

    <p>If <var title="">e</var> is <code title="event-drop"><a href="#event-drop">drop</a></code>, set the <a href="#drag-data-store-mode">drag data store
    mode</a> to the <a href="#concept-dnd-ro" title="concept-dnd-ro">read-only
    mode</a>.</p>

   </li>

   <li><p>Let <var title="">dataTransfer</var> be a newly created
   <code><a href="#datatransfer">DataTransfer</a></code> object associated with the given
   <a href="#drag-data-store">drag data store</a>.</p></li>

   <li><p id="effectAllowed-initialization">Set the <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
   attribute to the <a href="#drag-data-store">drag data store</a>'s <a href="#drag-data-store-allowed-effects-state">drag data
   store allowed effects state</a>.</p></li>

   <li>

    <p id="dropEffect-initialization">Set the <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute to
    "<code title="">none</code>" if <var title="">e</var> is <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code>, <code title="event-drag"><a href="#event-drag">drag</a></code>, or <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code>; to the value
    corresponding to the <a href="#current-drag-operation">current drag operation</a> if <var title="">e</var> is <code title="event-drop"><a href="#event-drop">drop</a></code> or <code title="event-dragend"><a href="#event-dragend">dragend</a></code>; and to a value based on the
    <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
    attribute's value and to the drag-and-drop source, as given by the
    following table, otherwise (i.e. if <var title="">e</var> is <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> or <code title="event-dragover"><a href="#event-dragover">dragover</a></code>):</p>

    <table><thead><tr><th><code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code></th>
       <th><code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code></th>
      </tr></thead><tr><td>"<code title="">none</code>"</td>
      <td>"<code title="">none</code>"</td>
     </tr><tr><td>"<code title="">copy</code>"</td>
      <td>"<code title="">copy</code>"</td>
     </tr><tr><td>"<code title="">copyLink</code>"</td>
      <td>"<code title="">copy</code>", or, <a href="#concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">if appropriate</a>, "<code title="">link</code>"</td>
     </tr><tr><td>"<code title="">copyMove</code>"</td>
      <td>"<code title="">copy</code>", or, <a href="#concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">if appropriate</a>, "<code title="">move</code>"</td>
     </tr><tr><td>"<code title="">all</code>"</td>
      <td>"<code title="">copy</code>", or, <a href="#concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">if appropriate</a>, either "<code title="">link</code>" or "<code title="">move</code>"</td>
     </tr><tr><td>"<code title="">link</code>"</td>
      <td>"<code title="">link</code>"</td>
     </tr><tr><td>"<code title="">linkMove</code>"</td>
      <td>"<code title="">link</code>", or, <a href="#concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">if appropriate</a>, "<code title="">move</code>"</td>
     </tr><tr><td>"<code title="">move</code>"</td>
      <td>"<code title="">move</code>"</td>
     </tr><tr><td>"<code title="">uninitialized</code>" when what is being dragged is a selection from a text field</td>
      <td>"<code title="">move</code>", or, <a href="#concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">if appropriate</a>, either "<code title="">copy</code>" or "<code title="">link</code>"</td>
     </tr><tr><td>"<code title="">uninitialized</code>" when what is being dragged is a selection</td>
      <td>"<code title="">copy</code>", or, <a href="#concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">if appropriate</a>, either "<code title="">link</code>" or "<code title="">move</code>"</td>
     </tr><tr><td>"<code title="">uninitialized</code>" when what is being dragged is an <code><a href="the-a-element.html#the-a-element">a</a></code> element with an <code>href</code> attribute</td>
      <td>"<code title="">link</code>", or, <a href="#concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">if appropriate</a>, either "<code title="">copy</code>" or "<code title="">move</code>"</td>
     </tr><tr><td>Any other case</td>
      <td>"<code title="">copy</code>", or, <a href="#concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">if appropriate</a>, either "<code title="">link</code>" or "<code title="">move</code>"</td>
     </tr></table><p>Where the table above provides <dfn id="concept-platform-dropeffect-override" title="concept-platform-dropEffect-override">possibly appropriate
    alternatives</dfn>, user agents may instead use the listed
    alternative values if platform conventions dictate that the user
    has requested those alternate effects.</p>

    <p class="example">For example, Windows platform conventions are
    such that dragging while holding the "alt" key indicates a
    preference for linking the data, rather than moving or copying it.
    Therefore, on a Windows system, if "<code title="">link</code>" is
    an option according to the table above while the "alt" key is
    depressed, the user agent could select that instead of "<code title="">copy</code>" or "<code title="">move</code>.</p>

   </li>

   <li>

    <p>Create a <code><a href="#dragevent">DragEvent</a></code> object and initialize it to
    have the given name <var title="">e</var>, to bubble, to be
    cancelable unless <var title="">e</var> is <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code> or <code title="event-dragend"><a href="#event-dragend">dragend</a></code>, and to have the <code title="dom-UIEvent-detail"><a href="infrastructure.html#dom-uievent-detail">detail</a></code> attribute initialized to
    zero, the mouse and key attributes initialized according to the
    state of the input devices as they would be for user interaction
    events, the <code title="">relatedTarget</code> attribute
    initialized to null, and the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> attribute
    initialized to <var title="">dataTransfer</var>, the
    <code><a href="#datatransfer">DataTransfer</a></code> object created above.</p>

    <!-- interaction event spec point -->

    <p>If there is no relevant pointing device, the object must have
    its <code title="">screenX</code>, <code title="">screenY</code>,
    <code title="">clientX</code>, <code title="">clientY</code>, and
    <code title="">button</code> attributes set to 0.</p>

   </li>

   <li><p>Dispatch the newly created <code><a href="#dragevent">DragEvent</a></code> object at
   the specified target element.</p></li>

   <li><p>Set the <a href="#drag-data-store-allowed-effects-state">drag data store allowed effects state</a>
   to the current value of <var title="">dataTransfer</var>'s <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
   attribute. (It can only have changed value if <var title="">e</var>
   is <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code>.)</p></li>

   <li><p>Set the <a href="#drag-data-store-mode">drag data store mode</a> back to the <a href="#concept-dnd-p" title="concept-dnd-p">protected mode</a> if it was changed in
   the first step.</p></li>

   <li><p>Break the association between <var title="">dataTransfer</var> and the <a href="#drag-data-store">drag data
   store</a>.</p></li>

  </ol></div>


  <div class="impl">

  <h4 id="drag-and-drop-processing-model"><span class="secno">7.7.5 </span>Drag-and-drop processing model</h4>

  <p>When the user attempts to begin a drag operation, the user agent
  must run the following steps. User agents must act as if these steps
  were run even if the drag actually started in another document or
  application and the user agent was not aware that the drag was
  occuring until it intersected with a document under the user agent's
  purview.</p>

  <ol><li>

    <p>Determine what is being dragged, as follows:</p>

    <p>If the drag operation was invoked on a selection, then it is
    the selection that is being dragged.</p>

    <p>Otherwise, if the drag operation was invoked on a
    <code><a href="dom.html#document">Document</a></code>, it is the first element, going up the
    ancestor chain, starting at the node that the user tried to drag,
    that has the IDL attribute <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> set to true. If there is no
    such element, then nothing is being dragged; abort these steps,
    the drag-and-drop operation is never started.</p>

    <p>Otherwise, the drag operation was invoked outside the user
    agent's purview. What is being dragged is defined by the document
    or application where the drag was started.</p>

    <p class="note"><code><a href="the-img-element.html#the-img-element">img</a></code> elements and <code><a href="the-a-element.html#the-a-element">a</a></code>
    elements with an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code>
    attribute have their <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code>
    attribute set to true by default.</p>

   </li>

   <li><p><a href="#create-a-drag-data-store">Create a drag data store</a>. All the DND events
   fired subsequently by the steps in this section must use this
   <a href="#drag-data-store">drag data store</a>.</p></li>

   <li>

    <p>Establish which DOM node is the <dfn id="source-node">source node</dfn>, as
    follows:</p>

    <p>If it is a selection that is being dragged, then the
    <a href="#source-node">source node</a> is the <code><a href="infrastructure.html#text-0">Text</a></code> node that the
    user started the drag on (typically the <code><a href="infrastructure.html#text-0">Text</a></code> node
    that the user originally clicked). If the user did not specify a
    particular node, for example if the user just told the user agent
    to begin a drag of "the selection", then the <a href="#source-node">source
    node</a> is the first <code><a href="infrastructure.html#text-0">Text</a></code> node containing a part
    of the selection.</p>

    <p>Otherwise, if it is an element that is being dragged, then the
    <a href="#source-node">source node</a> is the element that is being dragged.</p>

    <p>Otherwise, the <a href="#source-node">source node</a> is part of another
    document or application. When this specification requires that an
    event be dispatched at the <a href="#source-node">source node</a> in this case,
    the user agent must instead follow the platform-specific
    conventions relevant to that situation.</p>

    <p class="note">Multiple events are fired on the <a href="#source-node">source
    node</a> during the course of the drag-and-drop operation.</p>

   </li>

   <li>

    <p>Determine the <dfn id="list-of-dragged-nodes">list of dragged nodes</dfn>, as follows:</p>

    <p>If it is a selection that is being dragged, then the <a href="#list-of-dragged-nodes">list
    of dragged nodes</a> contains, in <a href="infrastructure.html#tree-order">tree order</a>,
    every node that is partially or completely included in the
    selection (including all their ancestors).</p>

    <p>Otherwise, the <a href="#list-of-dragged-nodes">list of dragged nodes</a> contains only
    the <a href="#source-node">source node</a>, if any.</p>

   </li>

   <li>

    <p>If it is a selection that is being dragged, then add an item to
    the <a href="#drag-data-store-item-list">drag data store item list</a>, with its properties
    set as follows:</p>

    <dl><dt><a href="#the-drag-data-item-type-string">The drag data item type string</a>
     </dt><dd>"<code>text/plain</code>"</dd>

     <dt><a href="#the-drag-data-item-kind">The drag data item kind</a>
     </dt><dd><i>Plain Unicode string</i></dd>

     <dt>The actual data</dt>
     <dd>The text of the selection</dd>

    </dl><p>Otherwise, if any files are being dragged, then add one item
    per file to the <a href="#drag-data-store-item-list">drag data store item list</a>, with their
    properties set as follows:</p>

    <dl><dt><a href="#the-drag-data-item-type-string">The drag data item type string</a>
     </dt><dd>The MIME type of the file, if known, or "<code>application/octet-stream</code>" otherwise.</dd>

     <dt><a href="#the-drag-data-item-kind">The drag data item kind</a>
     </dt><dd><i><a href="infrastructure.html#file">File</a></i></dd>

     <dt>The actual data</dt>
     <dd>The file's contents and name.</dd>

    </dl><p class="note">Dragging files can currently only happen from
    outside a <a href="#browsing-context">browsing context</a>, for example from a file
    system manager application.</p>

    <p>If the drag initiated outside of the application, the user
    agent must add items to the <a href="#drag-data-store-item-list">drag data store item list</a>
    as appropriate for the data being dragged, honoring platform
    conventions where appropriate; however, if the platform
    conventions do not use <a href="infrastructure.html#mime-type" title="MIME type">MIME types</a>
    to label dragged data, the user agent must make a best-effort
    attempt to map the types to MIME types, and, in any case, all the
    <a href="#the-drag-data-item-type-string" title="the drag data item type string">drag data item type
    strings</a> must be <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII
    lowercase</a>.</p>

    <p>User agents may also add one or more items representing the
    selection or dragged element(s) in other forms, e.g. as HTML.</p>

   </li>

   <!-- DND-v2: text/html as an export format -->

<!--MD-->

   <li>Perform <dfn id="drag-and-drop-initialization-steps">drag-and-drop initialization steps</dfn> defined
   in any <a href="infrastructure.html#other-applicable-specifications">other applicable specifications</a>.</li>

<!--MD-->

   <li>

    <p>Run the following substeps:</p>

    <ol><li><p>Let <var title="">urls</var> be an empty list of <a href="urls.html#absolute-url" title="absolute URL">absolute URLs</a>.</p></li>

     <li>

      <p>For each <var title="">node</var> in the <a href="#list-of-dragged-nodes">list of
      dragged nodes</a>:</p>

      <dl><dt>If the node is an <code><a href="the-a-element.html#the-a-element">a</a></code> element with an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute</dt>

       <dd>Add to <var title="">urls</var> the result of <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> the element's <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> content attribute
       relative to the element.</dd>

       <dt>If the node is an <code><a href="the-img-element.html#the-img-element">img</a></code> element with an <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code> attribute</dt>

       <dd>Add to <var title="">urls</var> the result of <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> the element's <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code> content attribute relative to
       the element.</dd>

       <!-- DND-v2: more -->

      </dl></li>

     <li><p>If <var title="">urls</var> is still empty, abort these
     substeps.</p></li>

     <li><p>Let <var title="">url string</var> be the result of
     concatenating the strings in <var title="">urls</var>, in the
     order they were added, separated by a U+000D CARRIAGE RETURN
     U+000A LINE FEED character pair (CRLF).</p></li>

     <li><p>Add one item to the <a href="#drag-data-store-item-list">drag data store item
     list</a>, with its properties set as follows:</p>

      <dl><dt><a href="#the-drag-data-item-type-string">The drag data item type string</a>
       </dt><dd><code>text/uri-list</code></dd>

       <dt><a href="#the-drag-data-item-kind">The drag data item kind</a>
       </dt><dd><i>Plain Unicode string</i></dd>

       <dt>The actual data</dt>
       <dd><var title="">url string</var></dd>

      </dl></li>

    </ol></li>

   <li>

    <p>Update the <a href="#drag-data-store-default-feedback">drag data store default feedback</a> as
    appropriate for the user agent (if the user is dragging the
    selection, then the selection would likely be the basis for this
    feedback; if the user is dragging an element, then that element's
    rendering would be used; if the drag began outside the user agent,
    then the platform conventions for determining the drag feedback
    should be used).</p>

   </li>

   <li>

    <p><a href="#fire-a-dnd-event">Fire a DND event</a> named <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> at the <a href="#source-node">source
    node</a>.</p>

    <p>If the event is canceled, then the drag-and-drop operation
    should not occur; abort these steps.</p> <!-- only a should
    because the UA can always allow the user to drag without the page
    knowing -->

    <p class="note">Since events with no event listeners registered
    are, almost by definition, never canceled, drag-and-drop is always
    available to the user if the author does not specifically prevent
    it.</p>

   </li>

   <li>

    <p><a href="#initiate-the-drag-and-drop-operation">Initiate the drag-and-drop operation</a> in a manner
    consistent with platform conventions, and as described below.</p>

    <p id="base-dnd-feedback">The drag-and-drop feedback must be
    generated from the first of the following sources that is
    available:</p>

    <ol><li>The <a href="#drag-data-store-bitmap">drag data store bitmap</a>, if any. In this
     case, the <a href="#drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate</a> should
     be used as hints for where to put the cursor relative to the
     resulting image. The values are expressed as distances in CSS
     pixels from the left side and from the top side of the image
     respectively. <a href="#refsCSS">[CSS]</a></li>

     <li>The <a href="#drag-data-store-default-feedback">drag data store default feedback</a>.</li>

    </ol></li>

  </ol><p>From the moment that the user agent is to <dfn id="initiate-the-drag-and-drop-operation">initiate the
  drag-and-drop operation</dfn>, until the end of the drag-and-drop
  operation, device input events (e.g. mouse and keyboard events) must
  be suppressed.</p>

  <p>During the drag operation, the element directly indicated by the
  user as the drop target is called the <dfn id="immediate-user-selection">immediate user
  selection</dfn>. (Only elements can be selected by the user; other
  nodes must not be made available as drop targets.) However, the
  <a href="#immediate-user-selection">immediate user selection</a> is not necessarily the
  <dfn id="current-target-element">current target element</dfn>, which is the element currently
  selected for the drop part of the drag-and-drop operation.</p>

  <p>The <a href="#immediate-user-selection">immediate user selection</a> changes as the user
  selects different elements (either by pointing at them with a
  pointing device, or by selecting them in some other way). The
  <a href="#current-target-element">current target element</a> changes when the <a href="#immediate-user-selection">immediate
  user selection</a> changes, based on the results of event
  listeners in the document, as described below.</p>

  <p>Both the <a href="#current-target-element">current target element</a> and the
  <a href="#immediate-user-selection">immediate user selection</a> can be null, which means no
  target element is selected. They can also both be elements in other
  (DOM-based) documents, or other (non-Web) programs altogether. (For
  example, a user could drag text to a word-processor.) The
  <a href="#current-target-element">current target element</a> is initially null.</p>

  <p>In addition, there is also a <dfn id="current-drag-operation">current drag operation</dfn>,
  which can take on the values "<code title="">none</code>", "<code title="">copy</code>", "<code title="">link</code>", and "<code title="">move</code>". Initially, it has the value "<code title="">none</code>". It is updated by the user agent as described
  in the steps below.</p>

  <p>User agents must, as soon as the drag operation is <a href="#initiate-the-drag-and-drop-operation" title="initiate the drag-and-drop operation">initiated</a> and
  every 350ms (&#177;200ms) thereafter for as long as the drag
  operation is ongoing, <a href="#queue-a-task">queue a task</a> to perform the
  following steps in sequence:</p>

  <ol><li>

    <p>If the user agent is still performing the previous iteration of
    the sequence (if any) when the next iteration becomes due, abort
    these steps for this iteration (effectively "skipping missed
    frames" of the drag-and-drop operation).</p>

   </li>

   <li>

    <p><a href="#fire-a-dnd-event">Fire a DND event</a> named <code title="event-drag"><a href="#event-drag">drag</a></code> event at the <a href="#source-node">source
    node</a>. If this event is canceled, the user agent must set
    the <a href="#current-drag-operation">current drag operation</a> to "<code title="">none</code>" (no drag operation).</p>

   </li>

   <li>

    <p>If the <code title="event-drag"><a href="#event-drag">drag</a></code> event was not
    canceled and the user has not ended the drag-and-drop operation,
    check the state of the drag-and-drop operation, as follows:</p>

    <ol><li>

      <p>If the user is indicating a different <a href="#immediate-user-selection">immediate user
      selection</a> than during the last iteration (or if this is
      the first iteration), and if this <a href="#immediate-user-selection">immediate user
      selection</a> is not the same as the <a href="#current-target-element">current target
      element</a>, then update the <a href="#current-target-element">current target
      element</a> as follows:</p>

      <dl class="switch"><dt>If the new <a href="#immediate-user-selection">immediate user selection</a> is null</dt>

       <dd><p>Set the <a href="#current-target-element">current target element</a> to null
       also.</p></dd>

       <dt>If the new <a href="#immediate-user-selection">immediate user selection</a> is in a
       non-DOM document or application</dt>

       <dd><p>Set the <a href="#current-target-element">current target element</a> to the
       <a href="#immediate-user-selection">immediate user selection</a>.</p></dd>

       <dt>Otherwise</dt>

       <dd>

        <p><a href="#fire-a-dnd-event">Fire a DND event</a> named <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> at the
        <a href="#immediate-user-selection">immediate user selection</a>.</p>

        <p>If the event is canceled, then set the <a href="#current-target-element">current target
        element</a> to the <a href="#immediate-user-selection">immediate user
        selection</a>.</p>

        <p>Otherwise, run the appropriate step from the following
        list:</p>

        <dl class="switch"><dt>If the <a href="#immediate-user-selection">immediate user selection</a> is a text
         field (e.g. <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>, or an <code><a href="the-input-element.html#the-input-element">input</a></code>
         element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code>
         attribute is in the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a> state) or an
         <a href="#editing-host">editing host</a> or <a href="#editable">editable</a> element,
         and the <a href="#drag-data-store-item-list">drag data store item list</a> has an item
         with <a href="#the-drag-data-item-type-string">the drag data item type string</a>
         "<code>text/plain</code>" and <a href="#the-drag-data-item-kind">the drag data item
         kind</a> <i>Plain Unicode string</i></dt>

         <dd><p>Set the <a href="#current-target-element">current target element</a> to the
         <a href="#immediate-user-selection">immediate user selection</a> anyway.</p></dd>


         <dt>If the <a href="#immediate-user-selection">immediate user selection</a> is an element
         with a <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute
         that <a href="#concept-dropzone-match" title="concept-dropzone-match">matches</a> the
         <a href="#drag-data-store">drag data store</a></dt>

         <dd><p>Set the <a href="#current-target-element">current target element</a> to the
         <a href="#immediate-user-selection">immediate user selection</a> anyway.</p></dd>


         <dt>If the <a href="#immediate-user-selection">immediate user selection</a> is an element
         that itself has an ancestor element with a <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute that <a href="#concept-dropzone-match" title="concept-dropzone-match">matches</a> the <a href="#drag-data-store">drag
         data store</a></dt>

         <dd>

          <p>Let <var title="">new target</var> be the nearest
          (deepest) such ancestor element.</p>

          <p>If the <a href="#immediate-user-selection">immediate user selection</a> is <var title="">new target</var>, then leave the <a href="#current-target-element">current
          target element</a> unchanged.</p>

          <p>Otherwise, <a href="#fire-a-dnd-event">fire a DND event</a> named <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> at <var title="">new target</var>. Then, set the <a href="#current-target-element">current
          target element</a> to <var title="">new target</var>

         </p></dd>


         <dt>If the <a href="#immediate-user-selection">immediate user selection</a> is
         <a href="dom.html#the-body-element-0">the body element</a></dt>

         <dd><p>Leave the <a href="#current-target-element">current target element</a>
         unchanged.</p></dd>


         <dt>Otherwise</dt>

         <dd>

          <p><a href="#fire-a-dnd-event">Fire a DND event</a> named <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> at <a href="dom.html#the-body-element-0">the body
          element</a>, if there is one, or at the
          <code><a href="dom.html#document">Document</a></code> object, if not. Then, set the
          <a href="#current-target-element">current target element</a> to <a href="dom.html#the-body-element-0">the body
          element</a>, regardless of whether that event was
          canceled or not.</p>

         </dd>

        </dl></dd>

      </dl></li>

     <li>

      <p>If the previous step caused the <a href="#current-target-element">current target
      element</a> to change, and if the previous target element was
      not null or a part of a non-DOM document, then <a href="#fire-a-dnd-event">fire a DND
      event</a> named <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code> at the previous target
      element.</p>

     </li>

     <li>

      <p>If the <a href="#current-target-element">current target element</a> is a DOM element,
      then <a href="#fire-a-dnd-event">fire a DND event</a> named <code title="event-dragover"><a href="#event-dragover">dragover</a></code> at this <a href="#current-target-element">current
      target element</a>.</p>

      <p>If the <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event is
      not canceled, run the appropriate step from the following
      list:</p>

      <dl class="switch"><dt>If the <a href="#current-target-element">current target element</a> is a text field
       (e.g. <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>, or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
       whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
       the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a> state) or an
       <a href="#editing-host">editing host</a> or <a href="#editable">editable</a> element, and
       the <a href="#drag-data-store-item-list">drag data store item list</a> has an item with
       <a href="#the-drag-data-item-type-string">the drag data item type string</a>
       "<code>text/plain</code>" and <a href="#the-drag-data-item-kind">the drag data item
       kind</a> <i>Plain Unicode string</i></dt>

       <dd><p>Set the <a href="#current-drag-operation">current drag operation</a> to either
       "<code title="">copy</code>" or "<code title="">move</code>",
       as appropriate given the platform conventions.</p></dd>


       <dt>If the <a href="#current-target-element">current target element</a> is an element
       with a <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute
       that <a href="#concept-dropzone-match" title="concept-dropzone-match">matches</a> the
       <a href="#drag-data-store">drag data store</a> and <a href="#concept-dropzone-operation" title="concept-dropzone-operation">specifies an
       operation</a></dt>

       <dd><p>Set the <a href="#current-drag-operation">current drag operation</a> to the
       operation <a href="#concept-dropzone-operation" title="concept-dropzone-operation">specified</a> by the
       <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute of the
       <a href="#current-target-element">current target element</a>.</p>


       </dd><dt>If the <a href="#current-target-element">current target element</a> is an element
       with a <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute
       that <a href="#concept-dropzone-match" title="concept-dropzone-match">matches</a> the
       <a href="#drag-data-store">drag data store</a> and does not <a href="#concept-dropzone-operation" title="concept-dropzone-operation">specify an
       operation</a></dt>

       <dd><p>Set the <a href="#current-drag-operation">current drag operation</a> to "<code title="">copy</code>".</p>


       </dd><dt>Otherwise</dt>

       <dd><p>Reset the <a href="#current-drag-operation">current drag operation</a> to "<code title="">none</code>".</p></dd>

      </dl><p>Otherwise (if the <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event <em>is</em>
      canceled), set the <a href="#current-drag-operation">current drag operation</a> based on
      the values of the <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code> and
      <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code>
      attributes of the <code><a href="#dragevent">DragEvent</a></code> object's <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> object as
      they stood after the event dispatch finished, as per the
      following table:</p>

      <table><thead><tr><th><code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code></th>
         <th><code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code></th>
         <th>Drag operation</th>
        </tr></thead><tr><td>"<code title="">uninitialized</code>", "<code title="">copy</code>", "<code title="">copyLink</code>", "<code title="">copyMove</code>", or "<code title="">all</code>"</td>
        <td>"<code title="">copy</code>"</td>
        <td>"<code title="">copy</code>"</td>
       </tr><tr><td>"<code title="">uninitialized</code>", "<code title="">link</code>", "<code title="">copyLink</code>", "<code title="">linkMove</code>", or "<code title="">all</code>"</td>
        <td>"<code title="">link</code>"</td>
        <td>"<code title="">link</code>"</td>
       </tr><tr><td>"<code title="">uninitialized</code>", "<code title="">move</code>", "<code title="">copyMove</code>", "<code title="">linkMove</code>", or "<code title="">all</code>"</td>
        <td>"<code title="">move</code>"</td>
        <td>"<code title="">move</code>"</td>
       </tr><tr><td colspan="2">Any other case</td>
        <td>"<code title="">none</code>"</td>
       </tr></table></li>

     <li>

      <p>Otherwise, if the <a href="#current-target-element">current target element</a> is not
      a DOM element, use platform-specific mechanisms to determine
      what drag operation is being performed (none, copy, link, or
      move), and set the <i><a href="#current-drag-operation">current drag operation</a></i>
      accordingly.</p>

     </li>

     <li>

      <p>Update the drag feedback (e.g. the mouse cursor) to match the
      <a href="#current-drag-operation">current drag operation</a>, as follows:</p>

      <table><thead><tr><th>Drag operation</th>
         <th>Feedback</th>
        </tr></thead><tr><td>"<code title="">copy</code>"</td>
        <td>Data will be copied if dropped here.</td>
       </tr><tr><td>"<code title="">link</code>"</td>
        <td>Data will be linked if dropped here.</td>
       </tr><tr><td>"<code title="">move</code>"</td>
        <td>Data will be moved if dropped here.</td>
       </tr><tr><td>"<code title="">none</code>"</td>
        <td>No operation allowed, dropping here will cancel the drag-and-drop operation.</td>
       </tr></table></li>

    </ol></li>

   <li>

    <p>Otherwise, if the user ended the drag-and-drop operation (e.g.
    by releasing the mouse button in a mouse-driven drag-and-drop
    interface), or if the <code title="event-drag"><a href="#event-drag">drag</a></code> event
    was canceled, then this will be the last iteration. Run the
    following steps, then stop the drag-and-drop operation:</p>

    <ol><li>

      <p>If the <a href="#current-drag-operation">current drag operation</a> is "<code title="">none</code>" (no drag operation), or, if the user ended
      the drag-and-drop operation by canceling it (e.g. by hitting the
      <kbd>Escape</kbd> key), or if the <a href="#current-target-element">current target
      element</a> is null, then the drag operation failed. Run
      these substeps:</p>

      <ol><li><p>Let <var title="">dropped</var> be false.</p></li>

       <li><p>If the <a href="#current-target-element">current target element</a> is a DOM
       element, <a href="#fire-a-dnd-event">fire a DND event</a> named <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code> at it; otherwise, if
       it is not null, use platform-specific conventions for drag
       cancellation.</p>

      </li></ol><p>Otherwise, the drag operation might be a success; run these
      substeps:</p>

      <ol><li><p>Let <var title="">dropped</var> be true.</p></li>

       <li><p>If the <a href="#current-target-element">current target element</a> is a DOM
       element, <a href="#fire-a-dnd-event">fire a DND event</a> named <code title="event-drop"><a href="#event-drop">drop</a></code> at it; otherwise, use
       platform-specific conventions for indicating a drop.</p></li>

       <li>

        <p>If the event is canceled, set the <a href="#current-drag-operation">current drag
        operation</a> to the value of the <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute
        of the <code><a href="#dragevent">DragEvent</a></code> object's <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> object
        as it stood after the event dispatch finished.</p>

        <p>Otherwise, the event is not canceled; perform the event's
        default action, which depends on the exact target as
        follows:</p>

        <dl class="switch"><dt>If the <a href="#current-target-element">current target element</a> is a text
         field (e.g. <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>, or an <code><a href="the-input-element.html#the-input-element">input</a></code>
         element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code>
         attribute is in the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a> state) or an
         <a href="#editing-host">editing host</a> or <a href="#editable">editable</a> element,
         and the <a href="#drag-data-store-item-list">drag data store item list</a> has an item
         with <a href="#the-drag-data-item-type-string">the drag data item type string</a>
         "<code>text/plain</code>" and <a href="#the-drag-data-item-kind">the drag data item
         kind</a> <i>Plain Unicode string</i></dt>

         <dd><p>Insert the actual data of the first item in the
         <a href="#drag-data-store-item-list">drag data store item list</a> to have <a href="#the-drag-data-item-type-string" title="the drag data item type string">a drag data item type
         string</a> of "<code>text/plain</code>" and <a href="#the-drag-data-item-kind" title="the drag data item kind">a drag data item kind</a>
         that is <i>Plain Unicode string</i> into the text field or
         <a href="#editing-host">editing host</a> or <a href="#editable">editable</a> element in
         a manner consistent with platform-specific conventions (e.g.
         inserting it at the current mouse cursor position, or
         inserting it at the end of the field).</p></dd>

         <dt>Otherwise</dt>

         <dd><p>Reset the <a href="#current-drag-operation">current drag operation</a> to
         "<code title="">none</code>".</p></dd>

        </dl></li>

      </ol></li>

     <li>

      <p><a href="#fire-a-dnd-event">Fire a DND event</a> named <code title="event-dragend"><a href="#event-dragend">dragend</a></code> at the <a href="#source-node">source
      node</a>.</p>

     </li>

     <li>

      <p>Run the appropriate steps from the following list as the
      default action of the <code title="event-dragend"><a href="#event-dragend">dragend</a></code>
      event:</p>

      <dl class="switch"><dt>If <var title="">dropped</var> is true, the <a href="#current-target-element">current
       target element</a> is a <i>text field</i> (see below), the
       <a href="#current-drag-operation">current drag operation</a> is "<code title="">move</code>", and the source of the drag-and-drop
       operation is a selection in the DOM that is entirely contained
       within an <a href="#editing-host">editing host</a></dt>

       <dd><p><a href="#delete-the-selection">Delete the selection</a>.</p></dd>

       <dt>If <var title="">dropped</var> is true, the <a href="#current-target-element">current
       target element</a> is a <i>text field</i> (see below), the
       <a href="#current-drag-operation">current drag operation</a> is "<code title="">move</code>", and the source of the drag-and-drop
       operation is a selection in a text field</dt>

       <dd><p>The user agent should delete the dragged selection from
       the relevant text field.</p></dd>

       <dt>If <var title="">dropped</var> is false or if the
       <a href="#current-drag-operation">current drag operation</a> is "<code title="">none</code>"</dt>

       <dd><p>The drag was canceled. If the platform conventions
       dictate that this be represented to the user (e.g. by animating
       the dragged selection going back to the source of the
       drag-and-drop operation), then do so.</p></dd>

       <dt>Otherwise</dt>

       <dd><p>The event has no default action.</p></dd>

      </dl><p>For the purposes of this step, a <i>text field</i> is a
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
      whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
      one of the
      <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a>,
      <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-search">Search</a>,
      <a href="states-of-the-type-attribute.html#telephone-state-(type=tel)" title="attr-input-type-tel">Tel</a>,
      <a href="states-of-the-type-attribute.html#url-state-(type=url)" title="attr-input-type-url">URL</a>,
      <a href="states-of-the-type-attribute.html#e-mail-state-(type=email)" title="attr-input-type-email">E-mail</a>,
      <a href="states-of-the-type-attribute.html#password-state-(type=password)" title="attr-input-type-password">Password</a>, or
      <a href="states-of-the-type-attribute.html#number-state-(type=number)" title="attr-input-type-number">Number</a>
      states.</p>


     </li>

    </ol></li>

  </ol><p class="note">User agents are encouraged to consider how to react
  to drags near the edge of scrollable regions. For example, if a user
  drags a link to the bottom of the viewport on a long page, it might
  make sense to scroll the page so that the user can drop the link
  lower on the page.</p>

  <p class="note">This model is independent of which
  <code><a href="dom.html#document">Document</a></code> object the nodes involved are from; the events
  are fired as described above and the rest of the processing model
  runs as described above, irrespective of how many documents are
  involved in the operation.</p>

  </div>


  <h4 id="dndevents"><span class="secno">7.7.6 </span>Events summary</h4>

  <p><i>This section is non-normative.</i></p>
  <p>The following events are involved in the drag-and-drop
  model.</p>

  <table><thead><tr><th> Event Name </th>
     <th> Target </th>
     <!-- <th> Bubbles? </th> -->
     <th> Cancelable? </th>
     <th> <a href="#drag-data-store-mode">Drag data store mode</a> </th>
     <!-- <th> <code title="dom-DataTransfer-effectAllowed">effectAllowed</code> </th> -->
     <th> <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> </th>
     <th> Default Action </th>
    </tr></thead><tbody><tr><td><dfn id="event-dragstart" title="event-dragstart"><code>dragstart</code></dfn></td>
     <td><a href="#source-node">Source node</a></td>
     <!-- <td>&#x2713; Bubbles</td> -->
     <td>&#10003; Cancelable</td>
     <td><a href="#concept-dnd-rw" title="concept-dnd-rw">Read/write mode</a>
     <!-- <td>"<code title="">uninitialized</code>"</td> -->
     </td><td>"<code title="">none</code>"</td>
     <td>Initiate the drag-and-drop operation</td>
    </tr><tr><td><dfn id="event-drag" title="event-drag"><code>drag</code></dfn></td>
     <td><a href="#source-node">Source node</a></td>
     <!-- <td>&#x2713; Bubbles</td> -->
     <td>&#10003; Cancelable</td>
     <td><a href="#concept-dnd-p" title="concept-dnd-p">Protected mode</a>
     <!-- <td>Same as last event</td> -->
     </td><td>"<code title="">none</code>"</td>
     <td>Continue the drag-and-drop operation</td>
    </tr><tr><td><dfn id="event-dragenter" title="event-dragenter"><code>dragenter</code></dfn></td>
     <td><a href="#immediate-user-selection">Immediate user selection</a> or <a href="dom.html#the-body-element-0">the body element</a></td>
     <!-- <td>&#x2713; Bubbles</td> -->
     <td>&#10003; Cancelable</td>
     <td><a href="#concept-dnd-p" title="concept-dnd-p">Protected mode</a>
     <!-- <td>Same as last event</td> -->
     </td><td><a href="#dropEffect-initialization">Based on <code>effectAllowed</code> value</a></td>
     <td>Reject <a href="#immediate-user-selection">immediate user selection</a> as potential <a href="#current-target-element" title="current target element">target element</a></td>
    </tr><tr><td><dfn id="event-dragleave" title="event-dragleave"><code>dragleave</code></dfn></td>
     <td><a href="#current-target-element" title="current target element">Previous target element</a></td>
     <!-- <td>&#x2713; Bubbles</td> -->
     <td>&#8212;</td>
     <td><a href="#concept-dnd-p" title="concept-dnd-p">Protected mode</a>
     <!-- <td>Same as last event</td> -->
     </td><td>"<code title="">none</code>"</td>
     <td>None</td>
    </tr><tr><td><dfn id="event-dragover" title="event-dragover"><code>dragover</code></dfn></td>
     <td><a href="#current-target-element">Current target element</a></td>
     <!-- <td>&#x2713; Bubbles</td> -->
     <td>&#10003; Cancelable</td>
     <td><a href="#concept-dnd-p" title="concept-dnd-p">Protected mode</a>
     <!-- <td>Same as last event</td> -->
     </td><td><a href="#dropEffect-initialization">Based on <code>effectAllowed</code> value</a></td>
     <td>Reset the <a href="#current-drag-operation">current drag operation</a> to "none"</td>
    </tr><tr><td><dfn id="event-drop" title="event-drop"><code>drop</code></dfn></td>
     <td><a href="#current-target-element">Current target element</a></td>
     <!-- <td>&#x2713; Bubbles</td> -->
     <td>&#10003; Cancelable</td>
     <td><a href="#concept-dnd-ro" title="concept-dnd-ro">Read-only mode</a>
     <!-- <td>Same as last event</td> -->
     </td><td><a href="#current-drag-operation">Current drag operation</a></td>
     <td>Varies</td>
    </tr><tr><td><dfn id="event-dragend" title="event-dragend"><code>dragend</code></dfn></td>
     <td><a href="#source-node">Source node</a></td>
     <!-- <td>&#x2713; Bubbles</td> -->
     <td>&#8212;</td>
     <td><a href="#concept-dnd-p" title="concept-dnd-p">Protected mode</a>
     <!-- <td>Same as last event</td> -->
     </td><td><a href="#current-drag-operation">Current drag operation</a></td>
     <td>Varies</td>
    </tr></tbody></table><p>Not shown in the above table: all these events bubble, and the
  <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
  attribute always has the value it had after the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event, defaulting to "<code title="">uninitialized</code>" in the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event.</p>



  <h4 id="the-draggable-attribute"><span class="secno">7.7.7 </span>The <dfn title="attr-draggable"><code>draggable</code></dfn> attribute</h4>

  <p>All <a href="infrastructure.html#html-elements">HTML elements</a> may have the <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute set. The
  <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> attribute is an
  <a href="common-microsyntaxes.html#enumerated-attribute">enumerated attribute</a>. It has three states. The first
  state is <i>true</i> and it has the keyword <code title="">true</code>. The second state is <i>false</i> and it has
  the keyword <code title="">false</code>. The third state is
  <i>auto</i>; it has no keywords but it is the <i>missing value
  default</i>.</p>

  <p>The <i>true</i> state means the element is draggable; the
  <i>false</i> state means that it is not. The <i>auto</i> state
  uses the default behavior of the user agent.</p>

  <p>An element with a <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code>
  attribute should also have a <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code>
  attribute that names the element for the purpose of non-visual
  interactions. <!-- "should", not "must", only because this is a
  relatively new attribute and its design implications are not
  entirely obvious yet. For example, what happens if you use an
  element with text as a drag source? Is that sufficiently clear for
  ATs? Indeed, shouldn't the element generally be distinguishable
  anyway for it to be useful to drag? See also the dropzone attribute.
  --></p>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns true if the element is draggable; otherwise, returns
    false.</p>

    <p>Can be set, to override the default and set the <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-draggable" title="dom-draggable"><code>draggable</code></dfn> IDL
  attribute, whose value depends on the content attribute's in the way
  described below, controls whether or not the element is
  draggable. Generally, only text selections are draggable, but
  elements whose <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL
  attribute is true become draggable as well.</p>

  <p>If an element's <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code>
  content attribute has the state <i>true</i>, the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute must return
  true.</p>

  <p>Otherwise, if the element's <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute has the
  state <i>false</i>, the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute must return
  false.</p>

  <p>Otherwise, the element's <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute has the
  state <i>auto</i>. If the element is an <code><a href="the-img-element.html#the-img-element">img</a></code> element,
  or, if the element is an <code><a href="the-a-element.html#the-a-element">a</a></code> element with an <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> content attribute, the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute must return
  true.</p>

  <p>Otherwise, the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> DOM
  must return false.</p>

  <p>If the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute
  is set to the value false, the <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute must be
  set to the literal value <code title="">false</code>. If the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute is set to the
  value true, the <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code>
  content attribute must be set to the literal value <code title="">true</code>.</p>

  </div>


  <h4 id="the-dropzone-attribute"><span class="secno">7.7.8 </span>The <dfn title="attr-dropzone"><code>dropzone</code></dfn> attribute</h4>

  <p>All <a href="infrastructure.html#html-elements">HTML elements</a> may have the <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> content attribute set. When
  specified, its value must be an <a href="common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens">unordered set of unique
  space-separated tokens</a> that are <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a>. The allowed values are the following:</p>

  <dl><dt><dfn id="attr-dropzone-copy" title="attr-dropzone-copy"><code>copy</code></dfn></dt>

   <dd><p>Indicates that dropping an accepted item on the element will
   result in a copy of the dragged data.</p>


   </dd><dt><dfn id="attr-dropzone-move" title="attr-dropzone-move"><code>move</code></dfn></dt>

   <dd><p>Indicates that dropping an accepted item on the element will
   result in the dragged data being moved to the new location.</p>


   </dd><dt><dfn id="attr-dropzone-link" title="attr-dropzone-link"><code>link</code></dfn></dt>

   <dd><p>Indicates that dropping an accepted item on the element will
   result in a link to the original data.</p>


   </dd><dt>Any keyword with eight characters or more, beginning with the
   an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">string:</code>"<dt>

   </dt></dt><dd><p>Indicates that items with <a href="#the-drag-data-item-kind">the drag data item
   kind</a> <i>Plain Unicode string</i> and <a href="#the-drag-data-item-type-string">the drag data
   item type string</a> set to a value that matches the remainder
   of the keyword are accepted.</p></dd>

<!--DND-v3:
   <dt>Any keyword with six characters or more, beginning with an
   <span>ASCII case-insensitive</span> match for the string "<code
   title="">blob:</code>"<dt>

   <dd><p>Indicates that items with <span>the drag data item
   kind</span> <i>Blob</i>, <i>File</i>, or <i>Plain Unicode
   string</i> and <span>the drag data item type string</span> set to a
   value that matches the remainder of the keyword are
   accepted.</p></dd>
-->

   <dt>Any keyword with six characters or more, beginning with an
   <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">file:</code>"<dt>

   </dt></dt><dd><p>Indicates that items with <a href="#the-drag-data-item-kind">the drag data item
   kind</a> <i><a href="infrastructure.html#file">File</a></i> and <a href="#the-drag-data-item-type-string">the drag data item type
   string</a> set to a value that matches the remainder of the
   keyword are accepted.</p></dd>

<!--DND-v4:
   <dt>Any keyword with eight characters or more, beginning with an
   <span>ASCII case-insensitive</span> match for the string "<code
   title="">object:</code>"<dt>

   <dd><p>Indicates that items with <span>the drag data item type
   string</span> set to a value that matches the remainder of the
   keyword are accepted.</p></dd>
-->

  </dl><p>The <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> content
  attribute's values must not have more than one of the three feedback
  values (<code title="attr-dropzone-copy"><a href="#attr-dropzone-copy">copy</a></code>, <code title="attr-dropzone-move"><a href="#attr-dropzone-move">move</a></code>, and <code title="attr-dropzone-link"><a href="#attr-dropzone-link">link</a></code>) specified. If none are
  specified, the <code title="attr-dropzone-copy"><a href="#attr-dropzone-copy">copy</a></code> value is
  implied.</p>

  <p>An element with a <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code>
  attribute should also have a <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code>
  attribute that names the element for the purpose of non-visual
  interactions. <!-- "should", not "must", only because this is a
  relatively new attribute and its design implications are not
  entirely obvious yet. For example, what happens if you use an
  element with text as a drop zone? Is that sufficiently clear for
  ATs? See also the draggable attribute. --></p>

  <div class="impl">

  <p>A <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute <dfn id="concept-dropzone-match" title="concept-dropzone-match">matches a drag data store</dfn> if
  the <a href="#dropzone-processing-steps"><code title="attr-dropzone">dropzone</code> processing
  steps</a> result in a match.</p>

  <p>A <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute <dfn id="concept-dropzone-operation" title="concept-dropzone-operation">specifies an operation</dfn> if
  the <a href="#dropzone-processing-steps"><code title="attr-dropzone">dropzone</code> processing
  steps</a> result in a specified operation. The specified
  operation is as given by those steps.</p>

  <p>The <dfn id="dropzone-processing-steps"><code title="attr-dropzone">dropzone</code> processing
  steps</dfn> are as follows. They either result in a match or not,
  and separate from this result either in a specified operation or
  not, as defined below.</p>

  <ol><li><p>Let <var title="">value</var> be the value of the <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute.</p></li>

   <li><p>Let <var title="">keywords</var> be the result of <a href="common-microsyntaxes.html#split-a-string-on-spaces" title="split a string on spaces">splitting <var title="">value</var> on spaces</a>.</p></li>

   <li><p>Let <var title="">matched</var> be false.</p></li>

   <li><p>Let <var title="">operation</var> be unspecified.</p></li>

   <li>

    <p>For each value in <var title="">keywords</var>, if any, in the
    order that they were found in <var title="">value</var>, run the
    following steps.</p>

    <ol><li><p>Let <var title="">keyword</var> be the keyword.</p></li>

     <li>

      <p>If <var title="">keyword</var> is one of "<code title="attr-dropzone-copy"><a href="#attr-dropzone-copy">copy</a></code>", "<code title="attr-dropzone-move"><a href="#attr-dropzone-move">move</a></code>", or "<code title="attr-dropzone-link"><a href="#attr-dropzone-link">link</a></code>", then: run the following
      substeps:</p>

      <ol><li><p>If <var title="">operation</var> is still unspecified,
       then let <var title="">operation</var> be the string given by
       <var title="">keyword</var>.</p></li>

       <li><p>Skip to the step labeled <i>end of keyword</i>
       below.</p></li>

      </ol></li>

     <li><p>If <var title="">keyword</var> does not contain a ":" (U+003A) character, or if the first such character in <var title="">keyword</var> is either the first character or the last
     character in the string, then skip to the step labeled <i>end of
     keyword</i> below.</p></li>

     <li><p>Let <var title="">kind code</var> be the substring
     of <var title="">keyword</var> from the first character in the
     string to the last character in the string that is before the
     first ":" (U+003A) character in the string, <a href="infrastructure.html#converted-to-ascii-lowercase">converted
     to ASCII lowercase</a>.</p>

     </li><li>

      <p>Jump to the appropriate step from the list below, based on
      the value of <var title="">kind code</var>:</p>

      <dl class="switch"><dt>If <var title="">kind code</var> is the string "<code title="">string</code>"</dt>
       <dd>

        <p>Let <var title="">kind<!--DND-v3:/DND-v4: s--></var> be
        <i>Plain Unicode string</i>.</p>

       </dd>

<!--DND-v3:
       <dt>If <var title="">kind code</var> is the string "<code title="">blob</code>"</dt>
       <dd>

        <p>Let <var title="">kinds</var> be <i>Plain Unicode
        string</i>, <i>Blob</i>, and <i>File</i>.</p>

       </dd>
-->

       <dt>If <var title="">kind code</var> is the string "<code title="">file</code>"</dt>
       <dd>

        <p>Let <var title="">kind<!--DND-v3:/DND-v4: s--></var> be
        <i><a href="infrastructure.html#file">File</a></i>.</p>

       </dd>

<!--DND-v4:
       <dt>If <var title="">kind code</var> is the string "<code title="">object</code>"</dt>
       <dd>

        <p>Let <var title="">kinds</var> be <i>Plain Unicode
        string</i>, <i>Blob</i>, <i>File</i>, and <i>Object</i>.</p>

       </dd>
-->

       <dt>Otherwise</dt>
       <dd>

        <p>Skip to the step labeled <i>end of keyword</i> below.</p>

       </dd>

      </dl></li>

     <li><p>Let <var title="">type</var> be the substring of <var title="">keyword</var> from the first character after the first
     ":" (U+003A) character in the string, to the last character
     in the string, <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII
     lowercase</a>.</p></li>

     <li><p>If there exist any items in the <a href="#drag-data-store-item-list">drag data store item
     list</a> whose <a href="#the-drag-data-item-kind" title="the drag data item kind">drag data
     item kind</a> is <!--DND-v3:/DND-v4: one of--> the
     kind<!--DND-v3:/DND-v4: s--> given in <var title="">kind<!--DND-v3:/DND-v4: s--></var> and whose <span title="the drag data item type">drag data item type</span> is
     <var title="">type</var>, then let <var title="">matched</var> be
     true.</p></li>

     <li><p><i>End of keyword</i>: Go on to the next keyword, if any,
     or the next step in the overall algorithm, if there are no
     more.</p></li>

    </ol></li>

   <li>

    <p>The algorithm results in a match if <var title="">matched</var>
    is true, and does not otherwise.</p>

    <p>The algorithm results in a specified operation if <var title="">operation</var> is not unspecified. The specified
    operation, if one is specified, is the one given by <var title="">operation</var>.</p>

   </li>

  </ol><p>The <dfn id="dom-dropzone" title="dom-dropzone"><code>dropzone</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the content attribute of the
  same name.</p>

  </div>

  <div class="example">

   <p>In this example, a <code><a href="the-div-element.html#the-div-element">div</a></code> element is made into a drop
   target for image files using the <code title="attr-dropzone"><a href="#the-dropzone-attribute">dropzone</a></code> attribute. Images dropped
   into the target are then displayed.</p>

   <pre>&lt;div dropzone="copy file:image/png file:image/gif file:image/jpeg" ondrop="receive(event, this)"&gt;
 &lt;p&gt;Drop an image here to have it displayed.&lt;/p&gt;
&lt;/div&gt;
&lt;script&gt;
 function receive(event, element) {
   var data = event.dataTransfer.items;
   for (var i = 0; i &lt; data.length; i += 1) {
     if ((data[i].kind == 'file') &amp;&amp; (data[i].type.match('^image/'))) {
       var img = new Image();
       img.src = window.createObjectURL(data[i].getAsFile());
       element.appendChild(img);
     }
   }
 }
&lt;/script&gt;</pre>

  </div>


<!--
  <h4>Copy and paste</h4>

  <p>Copy-and-paste is a form of drag-and-drop: the "copy" part is
  equivalent to dragging content to another application (the
  "clipboard"), and the "paste" part is equivalent to dragging content
  <em>from</em> another application.</p>

  <p>Select-and-paste (a model used by mouse operations in the X
  Window System) is equivalent to a drag-and-drop operation where the
  source is the selection.</p>


  <div class="impl">

  <h5>Copy to clipboard</h5>

  <p>When the user invokes a copy operation, the user agent must act
  as if the user had invoked a drag on the current selection. If the
  drag-and-drop operation initiates, then the user agent must act as
  if the user had indicated (as the <span>immediate user
  selection</span>) a hypothetical application representing the
  clipboard. Then, the user agent must act as if the user had ended
  the drag-and-drop operation without canceling it. If the
  drag-and-drop operation didn't get canceled, the user agent should
  then follow the relevant platform-specific conventions for copy
  operations (e.g. updating the clipboard).</p>

  <p>The events involved in this process are the <code
  title="event-dragstart">dragstart</code>, <code
  title="event-drag">drag</code>, and <code
  title="event-dragend">dragend</code> events.</p>


  <h5>Cut to clipboard</h5>

  <p>When the user invokes a cut operation, the user agent must act as
  if the user had invoked a copy operation (see the previous section),
  followed, if the copy was completed successfully, by <a
  href="#contenteditable-delete">a selection delete operation</a>.</p>

  <p>The events involved in this process are the <code
  title="event-dragstart">dragstart</code>, <code
  title="event-drag">drag</code>, and <code
  title="event-dragend">dragend</code> events.</p>


  <h5>Paste from clipboard</h5>

  <p>When the user invokes a clipboard paste operation, the user agent
  must act as if the user had invoked a drag on a hypothetical
  application representing the clipboard, setting the data associated
  with the drag as the content on the clipboard (in whatever formats
  are available).</p>

  <p>Then, the user agent must act as if the user had indicated (as
  the <span>immediate user selection</span>) the element with the
  keyboard focus, and then ended the drag-and-drop operation without
  canceling it.</p>

  <p>The events involved in this process are the <code
  title="event-dragenter">dragenter</code>, <code
  title="event-dragover">dragover</code>, <code
  title="event-dragleave">dragleave</code>, and <code
  title="event-drop">drop</code> events.</p>


  <h5>Paste from selection</h5>

  <p>When the user invokes a selection paste operation, the user agent
  must act as if the user had invoked a drag on the current selection,
  then indicated (as the <span>immediate user selection</span>) the
  element with the keyboard focus, and then ended the drag-and-drop
  operation without canceling it.</p>

  <p>All the drag-and-drop events can be involved in this process.</p>

  </div>
-->


<!--ADD-TOPIC:Security-->
  <div class="impl">

  <h4 id="security-risks-in-the-drag-and-drop-model"><span class="secno">7.7.9 </span>Security risks in the drag-and-drop model</h4>

  <p>User agents must not make the data added to the
  <code><a href="#datatransfer">DataTransfer</a></code> object during the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event available to scripts
  until the <code title="event-drop"><a href="#event-drop">drop</a></code> event, because
  otherwise, if a user were to drag sensitive information from one
  document to a second document, crossing a hostile third document in
  the process, the hostile document could intercept the data.</p>

  <p>For the same reason, user agents must consider a drop to be
  successful only if the user specifically ended the drag operation
  &#8212; if any scripts end the drag operation, it must be considered
  unsuccessful (canceled) and the <code title="event-drop"><a href="#event-drop">drop</a></code>
  event must not be fired.</p>

  <p>User agents should take care to not start drag-and-drop
  operations in response to script actions. For example, in a
  mouse-and-window environment, if a script moves a window while the
  user has his mouse button depressed, the UA would not consider that
  to start a drag. This is important because otherwise UAs could cause
  data to be dragged from sensitive sources and dropped into hostile
  documents without the user's consent.</p>

  <p>User agents should filter potentially active (scripted) content
  (e.g. HTML) when it is dragged and when it is dropped, using a
  whitelist of known-safe features. Similarly, relative URLs should be
  turned into absolute URLs to avoid references changing in unexpected
  ways. This specification does not specify how this is performed.</p>

  <div class="example">

   <p>Consider a hostile page providing some content and getting the
   user to select and drag and drop (or indeed, copy and paste) that
   content to a victim page's <code title="attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code> region. If the
   browser does not ensure that only safe content is dragged,
   potentially unsafe content such as scripts and event handlers in
   the selection, once dropped (or pasted) into the victim site, get
   the privileges of the victim site. This would thus enable a
   cross-site scripting attack.</p>

  </div>

  </div>
<!--REMOVE-TOPIC:Security-->


<!--FIND-->

<!--POSTMSG-->
<!--POSTMSG-->
<!--TOPIC:HTML Syntax and Parsing-->

  <h2 id="syntax"><span class="secno">8 </span><dfn>The HTML syntax</dfn></h2>

  <p class="note">This section only describes the rules for resources
  labeled with an <a href="infrastructure.html#html-mime-type">HTML MIME type</a>. Rules for XML resources
  are discussed in the section below entitled "<a href="#the-xhtml-syntax">The XHTML
  syntax</a>".</p>


  <h3 id="writing"><span class="secno">8.1 </span>Writing HTML documents</h3>

  <div class="impl">

  <p><i>This section only applies to documents, authoring tools, and
  markup generators. In particular, it does not apply to conformance
  checkers; conformance checkers must use the requirements given in
  the next section ("parsing HTML documents").</i></p>

  </div>

  <p>Documents must consist of the following parts, in the given
  order:</p>

  <ol><li>Optionally, a single "BOM" (U+FEFF) character.</li>

   <li>Any number of <a href="#syntax-comments" title="syntax-comments">comments</a> and
   <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>

   <li>A <a href="#syntax-doctype" title="syntax-doctype">DOCTYPE</a>.

   </li><li>Any number of <a href="#syntax-comments" title="syntax-comments">comments</a> and
   <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>

   <li>The root element, in the form of an <code><a href="the-html-element.html#the-html-element">html</a></code> <a href="#syntax-elements" title="syntax-elements">element</a>.</li>

   <li>Any number of <a href="#syntax-comments" title="syntax-comments">comments</a> and
   <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>

  </ol><p>The various types of content mentioned above are described in the
  next few sections.</p>

  <p>In addition, there are some restrictions on how <a href="the-meta-element.html#character-encoding-declaration" title="character encoding declaration">character encoding
  declarations</a> are to be serialized, as discussed in the
  section on that topic.</p>

  <div class="note">

   <p>Space characters before the root <code><a href="the-html-element.html#the-html-element">html</a></code> element, and
   space characters at the start of the <code><a href="the-html-element.html#the-html-element">html</a></code> element and
   before the <code><a href="the-head-element.html#the-head-element">head</a></code> element, will be dropped when the
   document is parsed; space characters <em>after</em> the root
   <code><a href="the-html-element.html#the-html-element">html</a></code> element will be parsed as if they were at the end
   of the <code><a href="the-body-element.html#the-body-element">body</a></code> element. Thus, space characters around the
   root element do not round-trip.</p>

   <p>It is suggested that newlines be inserted after the DOCTYPE,
   after any comments that are before the root element, after the
   <code><a href="the-html-element.html#the-html-element">html</a></code> element's start tag (if it is not <a href="#syntax-tag-omission" title="syntax-tag-omission">omitted</a>), and after any comments
   that are inside the <code><a href="the-html-element.html#the-html-element">html</a></code> element but before the
   <code><a href="the-head-element.html#the-head-element">head</a></code> element.</p>

  </div>

  <p>Many strings in the HTML syntax (e.g. the names of elements and
  their attributes) are case-insensitive, but only for characters in
  the ranges U+0041 to U+005A (LATIN CAPITAL LETTER A to LATIN CAPITAL
  LETTER Z) and U+0061 to U+007A (LATIN SMALL LETTER A to LATIN SMALL
  LETTER Z). For convenience, in this section this is just referred to
  as "case-insensitive".</p>


  <h4 id="the-doctype"><span class="secno">8.1.1 </span>The DOCTYPE</h4>

  <p>A <dfn id="syntax-doctype" title="syntax-doctype">DOCTYPE</dfn> is a <!-- mostly
  useless but nonetheless --> required preamble.</p>

  <p class="note">DOCTYPEs are required for legacy reasons. When
  omitted, browsers tend to use a different rendering mode that is
  incompatible with some specifications. Including the DOCTYPE in a
  document ensures that the browser makes a best-effort attempt at
  following the relevant specifications.</p>

  <p>A DOCTYPE must consist of the following components, in this
  order:</p>

  <ol class="brief"><li>A string that is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">&lt;!DOCTYPE</code>".</li>
   <li>One or more <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>
   <li>A string that is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">html</code>".</li>
   <li>Optionally, a <a href="#doctype-legacy-string">DOCTYPE legacy string</a> or an <a href="#obsolete-permitted-doctype-string">obsolete permitted DOCTYPE string</a> (defined below).</li>
   <li>Zero or more <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>
   <li>A U+003E GREATER-THAN SIGN character (&gt;).</li>
  </ol><p class="note">In other words, <code>&lt;!DOCTYPE html&gt;</code>,
  case-insensitively.</p>

  <hr><p>For the purposes of HTML generators that cannot output HTML
  markup with the short DOCTYPE "<code title="">&lt;!DOCTYPE
  html&gt;</code>", a <dfn id="doctype-legacy-string">DOCTYPE legacy string</dfn> may be inserted
  into the DOCTYPE (in the position defined above). This string must
  consist of:</p>

  <ol class="brief"><li>One or more <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>
   <li>A string that is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">SYSTEM</code>".</li>
   <li>One or more <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>
   <li>A U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (the <i>quote mark</i>).</li>
   <li>The literal string "<code><a href="urls.html#about:legacy-compat">about:legacy-compat</a></code>".</li>
   <li>A matching U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (i.e. the same character as in the earlier step labeled <i>quote mark</i>).</li>
  </ol><p class="note">In other words, <code>&lt;!DOCTYPE html SYSTEM
  "about:legacy-compat"&gt;</code> or <code>&lt;!DOCTYPE html SYSTEM
  'about:legacy-compat'&gt;</code>, case-insensitively except for the
  part in single or double quotes.</p>

  <p>The <a href="#doctype-legacy-string">DOCTYPE legacy string</a> should not be used unless
  the document is generated from a system that cannot output the
  shorter string.</p>

  <hr><!-- see the parser section before changing this bit --><p>To help authors transition from HTML4 and XHTML1, an
  <dfn id="obsolete-permitted-doctype-string">obsolete permitted DOCTYPE string</dfn> can be inserted into
  the DOCTYPE (in the position defined above). This string must
  consist of:</p>

  <ol class="brief"><li>One or more <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>
   <li>A string that is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">PUBLIC</code>".</li>
   <li>One or more <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>
   <li>A U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (the <i>first quote mark</i>).</li>
   <li>The string from one of the cells in the first column of the table below. The row to which this cell belongs is the <i>selected row</i>.</li>
   <li>A matching U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (i.e. the same character as in the earlier step labeled <i>first quote mark</i>).</li>
   <li>If the cell in the second column of the <i>selected row</i> is not blank, one or more <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>
   <li>If the cell in the second column of the <i>selected row</i> is not blank, a U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (the <i>third quote mark</i>).</li>
   <li>If the cell in the second column of the <i>selected row</i> is not blank, the string from the cell in the second column of the <i>selected row</i>.</li>
   <li>If the cell in the second column of the <i>selected row</i> is not blank, a matching U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (i.e. the same character as in the earlier step labeled <i>third quote mark</i>).</li>
  </ol><table><caption>
    Allowed values for public and system identifiers in an <a href="#obsolete-permitted-doctype-string">obsolete permitted DOCTYPE string</a>.
   </caption>
   <thead><tr><th> Public identifier
     </th><th> System identifier
   </th></tr></thead><tbody><tr><td> <code title="">-//W3C//DTD&#160;HTML&#160;4.0//EN</code>
     </td><td>
    </td></tr><tr><td> <code title="">-//W3C//DTD&#160;HTML&#160;4.0//EN</code>
     </td><td> <code title="">http://www.w3.org/TR/REC-html40/strict.dtd</code>
    </td></tr><tr><td> <code title="">-//W3C//DTD&#160;HTML&#160;4.01//EN</code>
     </td><td>
    </td></tr><tr><td> <code title="">-//W3C//DTD&#160;HTML&#160;4.01//EN</code>
     </td><td> <code title="">http://www.w3.org/TR/html4/strict.dtd</code>
    </td></tr><tr><td> <code title="">-//W3C//DTD&#160;XHTML&#160;1.0&#160;Strict//EN</code>
     </td><td> <code title="">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</code>
    </td></tr><tr><td> <code title="">-//W3C//DTD&#160;XHTML&#160;1.1//EN</code>
     </td><td> <code title="">http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd</code>
  </td></tr></tbody></table><p>A <a href="#syntax-doctype" title="syntax-doctype">DOCTYPE</a> containing an
  <a href="#obsolete-permitted-doctype-string">obsolete permitted DOCTYPE string</a> is an <dfn id="obsolete-permitted-doctype">obsolete
  permitted DOCTYPE</dfn>. Authors should not use <a href="#obsolete-permitted-doctype" title="obsolete permitted DOCTYPE">obsolete permitted
  DOCTYPEs</a>, as they are unnecessarily long.</p>




  <h4 id="elements-0"><span class="secno">8.1.2 </span>Elements</h4>

  <p>There are five different kinds of <dfn id="syntax-elements" title="syntax-elements">elements</dfn>: <a href="#void-elements">void elements</a>,
  <a href="#raw-text-elements">raw text elements</a>, <a href="#rcdata-elements">RCDATA elements</a>,
  <a href="#foreign-elements">foreign elements</a>, and <a href="#normal-elements">normal elements</a>.</p>

  <dl><dt><dfn id="void-elements">Void elements</dfn></dt>

   <dd><code><a href="the-area-element.html#the-area-element">area</a></code>, <code><a href="the-base-element.html#the-base-element">base</a></code>, <code><a href="the-br-element.html#the-br-element">br</a></code>,
   <code><a href="the-col-element.html#the-col-element">col</a></code>, <code><a href="#the-command-element">command</a></code>, <code><a href="the-embed-element.html#the-embed-element">embed</a></code>,
   <code><a href="the-hr-element.html#the-hr-element">hr</a></code>, <code><a href="the-img-element.html#the-img-element">img</a></code>, <code><a href="the-input-element.html#the-input-element">input</a></code>,
   <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>, <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-meta-element.html#the-meta-element">meta</a></code>,
   <code><a href="the-param-element.html#the-param-element">param</a></code>, <code><a href="the-source-element.html#the-source-element">source</a></code>, <code><a href="the-track-element.html#the-track-element">track</a></code>,
   <code><a href="the-wbr-element.html#the-wbr-element">wbr</a></code></dd>
   <!-- see also other places that say VOIDLIST -->

   <dt><dfn id="raw-text-elements">Raw text elements</dfn></dt>

   <dd><code><a href="the-script-element.html#the-script-element">script</a></code>, <code><a href="the-style-element.html#the-style-element">style</a></code></dd> <!-- iframe and
   noscript don't count as raw text for syntax purposes -->

   <dt><dfn id="rcdata-elements">RCDATA elements</dfn></dt>

   <dd><code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>, <code><a href="the-title-element.html#the-title-element">title</a></code></dd>

   <dt><dfn id="foreign-elements">Foreign elements</dfn></dt>

   <dd>Elements from the <a href="namespaces.html#mathml-namespace">MathML namespace</a>
   and the <a href="namespaces.html#svg-namespace">SVG namespace</a>.</dd>

   <dt><dfn id="normal-elements">Normal elements</dfn></dt>

   <dd>All other allowed <a href="infrastructure.html#html-elements">HTML elements</a> are normal
   elements.</dd>

  </dl><p><dfn id="syntax-tags" title="syntax-tags">Tags</dfn> are used to delimit the start
  and end of elements in the markup. <a href="#raw-text-elements" title="raw text
  elements">Raw text</a>, <a href="#rcdata-elements" title="RCDATA
  elements">RCDATA</a>, and <a href="#normal-elements" title="normal
  elements">normal</a> elements have a <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> to indicate where they
  begin, and an <a href="#syntax-end-tag" title="syntax-end-tag">end tag</a> to
  indicate where they end. The start and end tags of certain
  <a href="#normal-elements">normal elements</a> can be <a href="#syntax-tag-omission" title="syntax-tag-omission">omitted</a>, as described
  later. Those that cannot be omitted must not be omitted. <a href="#void-elements">Void
  elements</a> only have a start tag; end tags must not be
  specified for <a href="#void-elements">void elements</a>. <a href="#foreign-elements">Foreign
  elements</a> must either have a start tag and an end tag, or a
  start tag that is marked as self-closing, in which case they must
  not have an end tag.</p>

  <p>The contents of the element must be placed between just after the
  start tag (which <a href="#syntax-tag-omission" title="syntax-tag-omission">might be implied,
  in certain cases</a>) and just before the end tag (which again,
  <a href="#syntax-tag-omission" title="syntax-tag-omission">might be implied in certain
  cases</a>). The exact allowed contents of each individual element
  depend on the content model of that element, as described earlier in
  this specification. Elements must not contain content that their
  content model disallows. In addition to the restrictions placed on
  the contents by those content models, however, the five types of
  elements have additional <em>syntactic</em> requirements.</p>

  <p><a href="#void-elements">Void elements</a> can't have any contents (since there's
  no end tag, no content can be put between the start tag and the end
  tag).</p>

  <p><a href="#raw-text-elements">Raw text elements</a> can have <a href="#syntax-text" title="syntax-text">text</a>, though it has <a href="#cdata-rcdata-restrictions">restrictions</a> described
  below.</p>

  <p><a href="#rcdata-elements">RCDATA elements</a> can have <a href="#syntax-text" title="syntax-text">text</a> and <a href="#syntax-charref" title="syntax-charref">character references</a>, but the text
  must not contain an <a href="#syntax-ambiguous-ampersand" title="syntax-ambiguous-ampersand">ambiguous ampersand</a>.
  There are also <a href="#cdata-rcdata-restrictions">further
  restrictions</a> described below.</p>

  <p><a href="#foreign-elements">Foreign elements</a> whose start tag is marked as
  self-closing can't have any contents (since, again, as there's no
  end tag, no content can be put between the start tag and the end
  tag). <a href="#foreign-elements">Foreign elements</a> whose start tag is <em>not</em>
  marked as self-closing can have <a href="#syntax-text" title="syntax-text">text</a>, <a href="#syntax-charref" title="syntax-charref">character references</a>, <a href="#syntax-cdata" title="syntax-cdata">CDATA sections</a>, other <a href="#syntax-elements" title="syntax-elements">elements</a>, and <a href="#syntax-comments" title="syntax-comments">comments</a>, but the text must not
  contain the character U+003C LESS-THAN SIGN (&lt;) or an <a href="#syntax-ambiguous-ampersand" title="syntax-ambiguous-ampersand">ambiguous ampersand</a>.</p>

  <div class="note">

   <p>The HTML syntax does not support namespace
   declarations, even in <a href="#foreign-elements">foreign elements</a>.</p>

   <p>For instance, consider the following HTML fragment:</p>

   <pre>&lt;p&gt;
 &lt;svg&gt;
  &lt;metadata&gt;
   &lt;!-- this is invalid --&gt;
   &lt;cdr:license xmlns:cdr="http://www.example.com/cdr/metadata" name="MIT"/&gt;
  &lt;/metadata&gt;
 &lt;/svg&gt;
&lt;/p&gt;</pre>

   <p>The innermost element, <code title="">cdr:license</code>, is
   actually in the SVG namespace, as the "<code title="">xmlns:cdr</code>" attribute has no effect (unlike in
   XML). In fact, as the comment in the fragment above says, the
   fragment is actually non-conforming. This is because the SVG
   specification does not define any elements called "<code title="">cdr:license</code>" in the SVG namespace.</p>

  </div>

  <p><a href="#normal-elements">Normal elements</a> can have <a href="#syntax-text" title="syntax-text">text</a>, <a href="#syntax-charref" title="syntax-charref">character references</a>, other <a href="#syntax-elements" title="syntax-elements">elements</a>, and <a href="#syntax-comments" title="syntax-comments">comments</a>, but the text must not
  contain the character U+003C LESS-THAN SIGN (&lt;) or an <a href="#syntax-ambiguous-ampersand" title="syntax-ambiguous-ampersand">ambiguous ampersand</a>. Some
  <a href="#normal-elements">normal elements</a> also have <a href="#element-restrictions">yet more restrictions</a> on what
  content they are allowed to hold, beyond the restrictions imposed by
  the content model and those described in this paragraph. Those
  restrictions are described below.</p>

  <p>Tags contain a <dfn id="syntax-tag-name" title="syntax-tag-name">tag name</dfn>,
  giving the element's name. HTML elements all have names that only
  use characters in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, <a href="common-microsyntaxes.html#lowercase-ascii-letters">lowercase ASCII letters</a>, and <a href="common-microsyntaxes.html#uppercase-ascii-letters">uppercase ASCII letters</a>. In the HTML syntax, tag names, even those for <a href="#foreign-elements">foreign
  elements</a>, may be written with any mix of lower- and uppercase
  letters that, when converted to all-lowercase, matches the element's
  tag name; tag names are case-insensitive.</p>


  <h5 id="start-tags"><span class="secno">8.1.2.1 </span>Start tags</h5>

  <p><dfn id="syntax-start-tag" title="syntax-start-tag">Start tags</dfn> must have the
  following format:</p>

  <ol><li>The first character of a start tag must be a U+003C LESS-THAN
   SIGN character (&lt;).</li>

   <li>The next few characters of a start tag must be the element's
   <a href="#syntax-tag-name" title="syntax-tag-name">tag name</a>.</li>

   <li>If there are to be any attributes in the next step, there must
   first be one or more <a href="common-microsyntaxes.html#space-character" title="space character">space
   characters</a>.</li>

   <li>Then, the start tag may have a number of attributes, the <a href="#syntax-attributes" title="syntax-attributes">syntax for which</a> is described
   below. Attributes must be separated from each other by one or more
   <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>.</li>

   <li>After the attributes, or after the <a href="#syntax-tag-name" title="syntax-tag-name">tag name</a> if there are no attributes,
   there may be one or more <a href="common-microsyntaxes.html#space-character" title="space character">space
   characters</a>. (Some attributes are required to be followed by
   a space. See the <a href="#syntax-attributes" title="syntax-attributes">attributes
   section</a> below.)</li>

   <li>Then, if the element is one of the <a href="#void-elements">void elements</a>,
   or if the element is a <a href="#foreign-elements" title="foreign elements">foreign
   element</a>, then there may be a single U+002F SOLIDUS character
   (/). This character has no effect on <a href="#void-elements">void elements</a>,
   but on <a href="#foreign-elements">foreign elements</a> it marks the start tag as
   self-closing.</li>

   <li>Finally, start tags must be closed by a U+003E GREATER-THAN
   SIGN character (&gt;).</li>

  </ol><h5 id="end-tags"><span class="secno">8.1.2.2 </span>End tags</h5>

  <p><dfn id="syntax-end-tag" title="syntax-end-tag">End tags</dfn> must have the
  following format:</p>

  <ol><li>The first character of an end tag must be a U+003C LESS-THAN
   SIGN character (&lt;).</li>

   <li>The second character of an end tag must be a "/" (U+002F) character.</li>

   <li>The next few characters of an end tag must be the element's
   <a href="#syntax-tag-name" title="syntax-tag-name">tag name</a>.</li>

   <li>After the tag name, there may be one or more <a href="common-microsyntaxes.html#space-character" title="space
   character">space characters</a>.</li>

   <li>Finally, end tags must be closed by a U+003E GREATER-THAN SIGN
   character (&gt;).</li>

  </ol><h5 id="attributes-0"><span class="secno">8.1.2.3 </span>Attributes</h5>

  <p><dfn id="syntax-attributes" title="syntax-attributes">Attributes</dfn> for an element
  are expressed inside the element's start tag.</p>

  <p>Attributes have a name and a value. <dfn id="syntax-attribute-name" title="syntax-attribute-name">Attribute names</dfn> must consist of
  one or more characters other than the <a href="common-microsyntaxes.html#space-character" title="space
  character">space characters</a>, U+0000 NULL, U+0022 QUOTATION
  MARK ("), U+0027 APOSTROPHE ('), U+003E GREATER-THAN SIGN
  (&gt;), "/" (U+002F), and "=" (U+003D) characters,
  the control characters, and any characters that are not defined by
  Unicode. In the HTML syntax, attribute names, even those for
  <a href="#foreign-elements">foreign elements</a>, may be written with any mix of lower-
  and uppercase letters that are an <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> match for the attribute's name.</p>

  <p><dfn id="syntax-attribute-value" title="syntax-attribute-value">Attribute values</dfn> are a
  mixture of <a href="#syntax-text" title="syntax-text">text</a> and <a href="#syntax-charref" title="syntax-charref">character references</a>, except with the
  additional restriction that the text cannot contain an <a href="#syntax-ambiguous-ampersand" title="syntax-ambiguous-ampersand">ambiguous ampersand</a>.</p>

  <p>Attributes can be specified in four different ways:</p>

  <dl><dt>Empty attribute syntax</dt>

   <dd>

    <p>Just the <a href="#syntax-attribute-name" title="syntax-attribute-name">attribute
    name</a>. The value is implicitly the empty string.</p>

    <div class="example">

     <p>In the following example, the <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">disabled</a></code> attribute is given with
     the empty attribute syntax:</p>

     <pre>&lt;input <em>disabled</em>&gt;</pre>

    </div>

    <p>If an attribute using the empty attribute syntax is to be
    followed by another attribute, then there must be a <a href="common-microsyntaxes.html#space-character">space
    character</a> separating the two.</p>

   </dd>

   <dt id="unquoted">Unquoted attribute value syntax</dt>

   <dd>

    <p>The <a href="#syntax-attribute-name" title="syntax-attribute-name">attribute name</a>,
    followed by zero or more <a href="common-microsyntaxes.html#space-character" title="space character">space
    characters</a>, followed by a single U+003D EQUALS SIGN
    character, followed by zero or more <a href="common-microsyntaxes.html#space-character" title="space
    character">space characters</a>, followed by the <a href="#syntax-attribute-value" title="syntax-attribute-value">attribute value</a>, which, in
    addition to the requirements given above for attribute values,
    must not contain any literal <a href="common-microsyntaxes.html#space-character" title="space character">space
    characters</a>, any U+0022 QUOTATION MARK characters ("),
    U+0027 APOSTROPHE characters ('), "=" (U+003D) characters, U+003C LESS-THAN SIGN characters (&lt;), U+003E
    GREATER-THAN SIGN characters (&gt;), or "`" (U+0060) characters, and must not be the empty string.</p>

    <!-- The ` character is in this list on a temporary basis, waiting
         for IE to fix its parsing bug whereby it treats ` as an
         attribute value delimiter. Otherwise, escaping software that
         tries to be clever and not use quotes when it doesn't need to
         could be tricked by an attacker.

         Posit a site that allows the user to input text that is used
         verbatim in two attributes, such that the user can set the
         first attribute's value to:

            `

         ...and the second to:

            ` onload='...payload...' end=x

         ...with the assumption that the site is going to not quote
         the first one, and quote the second one with double quotes:

            <body title=` class="` onload='...payload...' end=x">

         In IE, this is treated as:

            <body title=' class="'
                  onload='...payload...'
                  end='x"'>

    -->


    <div class="example">

     <p>In the following example, the <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">value</a></code> attribute is given
     with the unquoted attribute value syntax:</p>

     <pre>&lt;input <em>value=yes</em>&gt;</pre>

    </div>

    <p>If an attribute using the unquoted attribute syntax is to be
    followed by another attribute or by the optional "/" (U+002F) character allowed in step 6 of the <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> syntax above, then there
    must be a <a href="common-microsyntaxes.html#space-character">space character</a> separating the two.</p>

   </dd>

   <dt>Single-quoted attribute value syntax</dt>

   <dd>

    <p>The <a href="#syntax-attribute-name" title="syntax-attribute-name">attribute name</a>,
    followed by zero or more <a href="common-microsyntaxes.html#space-character" title="space character">space
    characters</a>, followed by a single U+003D EQUALS SIGN
    character, followed by zero or more <a href="common-microsyntaxes.html#space-character" title="space
    character">space characters</a>, followed by a single "'" (U+0027) character, followed by the <a href="#syntax-attribute-value" title="syntax-attribute-value">attribute value</a>, which, in
    addition to the requirements given above for attribute values,
    must not contain any literal "'" (U+0027) characters, and
    finally followed by a second single U+0027 APOSTROPHE character
    (').</p>

    <div class="example">

     <p>In the following example, the <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is given with the
     single-quoted attribute value syntax:</p>

     <pre>&lt;input <em>type='checkbox'</em>&gt;</pre>

    </div>

    <p>If an attribute using the single-quoted attribute syntax is to
    be followed by another attribute, then there must be a <a href="common-microsyntaxes.html#space-character">space
    character</a> separating the two.</p>

   </dd>

   <dt>Double-quoted attribute value syntax</dt>

   <dd>

    <p>The <a href="#syntax-attribute-name" title="syntax-attribute-name">attribute name</a>,
    followed by zero or more <a href="common-microsyntaxes.html#space-character" title="space character">space
    characters</a>, followed by a single U+003D EQUALS SIGN
    character, followed by zero or more <a href="common-microsyntaxes.html#space-character" title="space
    character">space characters</a>, followed by a single """ (U+0022) character, followed by the <a href="#syntax-attribute-value" title="syntax-attribute-value">attribute value</a>, which, in
    addition to the requirements given above for attribute values,
    must not contain any literal """ (U+0022) characters,
    and finally followed by a second single """ (U+0022) character.</p>

    <div class="example">

     <p>In the following example, the <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute is given with the
     double-quoted attribute value syntax:</p>

     <pre>&lt;input <em>name="be evil"</em>&gt;</pre>

    </div>

    <p>If an attribute using the double-quoted attribute syntax is to
    be followed by another attribute, then there must be a <a href="common-microsyntaxes.html#space-character">space
    character</a> separating the two.</p>

   </dd>

  </dl><p>There must never be two or more attributes on the same start tag
  whose names are an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for
  each other.</p>

  <hr><p>When a <a href="#foreign-elements" title="foreign elements">foreign element</a> has
  one of the namespaced attributes given by the local name and
  namespace of the first and second cells of a row from the following
  table, it must be written using the name given by the third cell
  from the same row.</p>

  <table><thead><tr><th> Local name </th><th> Namespace </th><th> Attribute name
   </th></tr></thead><tbody><tr><td> <code title="">actuate</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a> </td><td> <code title="">xlink:actuate</code>
    </td></tr><tr><td> <code title="">arcrole</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a> </td><td> <code title="">xlink:arcrole</code>
    </td></tr><tr><td> <code title="">href</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a> </td><td> <code title="">xlink:href</code>
    </td></tr><tr><td> <code title="">role</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a> </td><td> <code title="">xlink:role</code>
    </td></tr><tr><td> <code title="">show</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a> </td><td> <code title="">xlink:show</code>
    </td></tr><tr><td> <code title="">title</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a> </td><td> <code title="">xlink:title</code>
    </td></tr><tr><td> <code title="">type</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a> </td><td> <code title="">xlink:type</code>
    </td></tr><tr><td> <code title="">base</code> </td><td> <a href="namespaces.html#xml-namespace">XML namespace</a> <!-- attr-xml-base --> </td><td> <code title="">xml:base</code>
    </td></tr><tr><td> <code title="">lang</code> </td><td> <a href="namespaces.html#xml-namespace">XML namespace</a> </td><td> <code title="">xml:lang</code>
    </td></tr><tr><td> <code title="">space</code> </td><td> <a href="namespaces.html#xml-namespace">XML namespace</a> </td><td> <code title="">xml:space</code>
    </td></tr><tr><td> <code title="">xmlns</code> </td><td> <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a> </td><td> <code title="">xmlns</code>
    </td></tr><tr><td> <code title="">xlink</code> </td><td> <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a> </td><td> <code title="">xmlns:xlink</code>
  </td></tr></tbody></table><p>No other namespaced attribute can be expressed in <a href="#syntax">the
  HTML syntax</a>.</p>

  <p class="note">Whether the attributes in the table above are
  conforming or not is defined by other specifications (e.g. the SVG
  and MathML specifications); this section only describes the syntax
  rules if the attributes are serialised using the HTML syntax.</p>


  <h5 id="optional-tags"><span class="secno">8.1.2.4 </span>Optional tags</h5>

  <p>Certain tags can be <dfn id="syntax-tag-omission" title="syntax-tag-omission">omitted</dfn>.</p>

  <p class="note">Omitting an element's <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> in the situations
  described below does not mean the element is not present; it is
  implied, but it is still there. For example, an HTML document always
  has a root <code><a href="the-html-element.html#the-html-element">html</a></code> element, even if the string <code title="">&lt;html&gt;</code> doesn't appear anywhere in the markup.</p>

  <!-- <html> -->
  <p>An <code><a href="the-html-element.html#the-html-element">html</a></code> element's <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> may be omitted if the
  first thing inside the <code><a href="the-html-element.html#the-html-element">html</a></code> element is not a <a href="#syntax-comments" title="syntax-comments">comment</a>.</p>

  <!-- </html> -->
  <p>An <code><a href="the-html-element.html#the-html-element">html</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-html-element.html#the-html-element">html</a></code> element is not
  immediately followed by a <a href="#syntax-comments" title="syntax-comments">comment</a>.</p>

  <!-- <head> -->
  <p>A <code><a href="the-head-element.html#the-head-element">head</a></code> element's <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> may be omitted if the
  element is empty, or if the first thing inside the
  <code><a href="the-head-element.html#the-head-element">head</a></code> element is an element.</p>

  <!-- </head> -->
  <p>A <code><a href="the-head-element.html#the-head-element">head</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-head-element.html#the-head-element">head</a></code> element is not
  immediately followed by a <a href="common-microsyntaxes.html#space-character">space character</a> or a <a href="#syntax-comments" title="syntax-comments">comment</a>.</p>

  <!-- <body> -->
  <p>A <code><a href="the-body-element.html#the-body-element">body</a></code> element's <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> may be omitted if the
  element is empty, or if the first thing inside the <code><a href="the-body-element.html#the-body-element">body</a></code>
  element is not a <a href="common-microsyntaxes.html#space-character">space character</a> or a <a href="#syntax-comments" title="syntax-comments">comment</a>, except if the first thing
  inside the <code><a href="the-body-element.html#the-body-element">body</a></code> element is a <code><a href="the-script-element.html#the-script-element">script</a></code> or
  <code><a href="the-style-element.html#the-style-element">style</a></code> element. <!-- Note that even if the </head> end
  tag is present, the parser makes <style> and <script> elements
  between </head> and <body> end up in the <head> instead of implying
  the <body> --></p>

  <!-- </body> -->
  <p>A <code><a href="the-body-element.html#the-body-element">body</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-body-element.html#the-body-element">body</a></code> element is not
  immediately followed by a <a href="#syntax-comments" title="syntax-comments">comment</a>.</p>

  <!-- </li> -->
  <p>An <code><a href="the-li-element.html#the-li-element">li</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-li-element.html#the-li-element">li</a></code> element is
  immediately followed by another <code><a href="the-li-element.html#the-li-element">li</a></code> element or if there
  is no more content in the parent element.</p>

  <!-- </dt> -->
  <p>A <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element is
  immediately followed by another <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element or a
  <code><a href="the-dd-element.html#the-dd-element">dd</a></code> element.</p>

  <!-- </dd> -->
  <p>A <code><a href="the-dd-element.html#the-dd-element">dd</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-dd-element.html#the-dd-element">dd</a></code> element is
  immediately followed by another <code><a href="the-dd-element.html#the-dd-element">dd</a></code> element or a
  <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element, or if there is no more content in the
  parent element.</p>

  <!-- </p> -->
  <p>A <code><a href="the-p-element.html#the-p-element">p</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-p-element.html#the-p-element">p</a></code> element is
  immediately followed by an <code><a href="the-address-element.html#the-address-element">address</a></code>,
  <code><a href="the-article-element.html#the-article-element">article</a></code>, <code><a href="the-aside-element.html#the-aside-element">aside</a></code>, <code><a href="the-blockquote-element.html#the-blockquote-element">blockquote</a></code>,
  <code><a href="#dir">dir</a></code>, <code><a href="the-div-element.html#the-div-element">div</a></code>, <code><a href="the-dl-element.html#the-dl-element">dl</a></code>,
  <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>, <code><a href="the-footer-element.html#the-footer-element">footer</a></code>, <code><a href="the-form-element.html#the-form-element">form</a></code>,
  <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h3</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h4</a></code>,
  <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h5</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code>, <code><a href="the-header-element.html#the-header-element">header</a></code>,
  <code><a href="the-hgroup-element.html#the-hgroup-element">hgroup</a></code>, <code><a href="the-hr-element.html#the-hr-element">hr</a></code>, <code><a href="#the-menu-element">menu</a></code>,
  <code><a href="the-nav-element.html#the-nav-element">nav</a></code>, <code><a href="the-ol-element.html#the-ol-element">ol</a></code>, <code><a href="the-p-element.html#the-p-element">p</a></code>, <code><a href="the-pre-element.html#the-pre-element">pre</a></code>,
  <code><a href="the-section-element.html#the-section-element">section</a></code>, <code><a href="the-table-element.html#the-table-element">table</a></code>, or <code><a href="the-ul-element.html#the-ul-element">ul</a></code>,
  element, or if there is no more content in the parent element and
  the parent element is not an <code><a href="the-a-element.html#the-a-element">a</a></code> element.</p>

  <!-- </rt> -->
  <p>An <code><a href="the-rt-element.html#the-rt-element">rt</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-rt-element.html#the-rt-element">rt</a></code> element is
  immediately followed by an <code><a href="the-rt-element.html#the-rt-element">rt</a></code> or <code><a href="the-rp-element.html#the-rp-element">rp</a></code>
  element, or if there is no more content in the parent element.</p>

  <!-- </rp> -->
  <p>An <code><a href="the-rp-element.html#the-rp-element">rp</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-rp-element.html#the-rp-element">rp</a></code> element is
  immediately followed by an <code><a href="the-rt-element.html#the-rt-element">rt</a></code> or <code><a href="the-rp-element.html#the-rp-element">rp</a></code>
  element, or if there is no more content in the parent element.</p>

  <!-- </optgroup> (the text assumes <optgroup> can only be inside a
  <select>; commented out text below can handle the non-<select> case
  if we ever allow it) -->
  <p>An <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end tag</a> may be omitted if the
  <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element <!--has an ancestor
  <code>select</code> element and--> is immediately followed by
  another <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element, or if <!--all of the elements
  that are ancestors of the <code>optgroup</code> element, up to and
  including the first ancestor element that is not an
  <code>optgroup</code> element, have no more content--> there is no
  more content in the parent element.</p>
  <!-- so e.g. the max number of </optgroup>s are omitted here:
   <select><optgroup></select>
   <p id=x><optgroup></optgroup>x</p>
   <p id=x><optgroup><optgroup></optgroup></optgroup>x</p>
   <p><optgroup id=x><optgroup></optgroup>x</p>
   <p><optgroup><optgroup id=x>x</p>
  -->

  <!-- </option> -->
  <p>An <code><a href="the-option-element.html#the-option-element">option</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-option-element.html#the-option-element">option</a></code> element is
  immediately followed by another <code><a href="the-option-element.html#the-option-element">option</a></code> element, or if
  it is immediately followed by an <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element, or
  if there is no more content in the parent element.</p>

  <!-- <colgroup> -->
  <p>A <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code> element's <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> may be omitted if the
  first thing inside the <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code> element is a
  <code><a href="the-col-element.html#the-col-element">col</a></code> element, and if the element is not immediately
  preceded by another <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code> element whose <a href="#syntax-end-tag" title="syntax-end-tag">end tag</a> has been omitted. (It can't be
  omitted if the element is empty.)</p>

  <!-- </colgroup> -->
  <p>A <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end tag</a> may be omitted if the
  <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code> element is not immediately followed by a
  <a href="common-microsyntaxes.html#space-character">space character</a> or a <a href="#syntax-comments" title="syntax-comments">comment</a>.</p>

  <!-- </thead> -->
  <p>A <code><a href="the-thead-element.html#the-thead-element">thead</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-thead-element.html#the-thead-element">thead</a></code> element is
  immediately followed by a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> or <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>
  element.</p>

  <!-- <tbody> -->
  <p>A <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> element's <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> may be omitted if the
  first thing inside the <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> element is a
  <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element, and if the element is not immediately
  preceded by a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, or
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> element whose <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> has been omitted. (It can't be omitted if the element is
  empty.)</p>

  <!-- </tbody> -->
  <p>A <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> element is
  immediately followed by a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> or <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>
  element, or if there is no more content in the parent element.</p>

  <!-- </tfoot> -->
  <p>A <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> element is
  immediately followed by a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> element, or if there is
  no more content in the parent element.</p>

  <!-- </tr> -->
  <p>A <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element is
  immediately followed by another <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element, or if there
  is no more content in the parent element.</p>

  <!-- </td> -->
  <p>A <code><a href="the-td-element.html#the-td-element">td</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-td-element.html#the-td-element">td</a></code> element is
  immediately followed by a <code><a href="the-td-element.html#the-td-element">td</a></code> or <code><a href="the-th-element.html#the-th-element">th</a></code>
  element, or if there is no more content in the parent element.</p>

  <!-- </th> -->
  <p>A <code><a href="the-th-element.html#the-th-element">th</a></code> element's <a href="#syntax-end-tag" title="syntax-end-tag">end
  tag</a> may be omitted if the <code><a href="the-th-element.html#the-th-element">th</a></code> element is
  immediately followed by a <code><a href="the-td-element.html#the-td-element">td</a></code> or <code><a href="the-th-element.html#the-th-element">th</a></code>
  element, or if there is no more content in the parent element.</p>

  <p><strong>However</strong>, a <a href="#syntax-start-tag" title="syntax-start-tag">start
  tag</a> must never be omitted if it has any attributes.</p>


  <h5 id="element-restrictions"><span class="secno">8.1.2.5 </span>Restrictions on content models</h5>

  <p>For historical reasons, certain elements have extra restrictions
  beyond even the restrictions given by their content model.</p>

  <p>A <code><a href="the-table-element.html#the-table-element">table</a></code> element must not contain <code><a href="the-tr-element.html#the-tr-element">tr</a></code>
  elements, even though these elements are technically allowed inside
  <code><a href="the-table-element.html#the-table-element">table</a></code> elements according to the content models
  described in this specification. (If a <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element is
  put inside a <code><a href="the-table-element.html#the-table-element">table</a></code> in the markup, it will in fact imply
  a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> start tag before it.)</p>

  <p>A single <a href="#syntax-newlines" title="syntax-newlines">newline</a> may be
  placed immediately after the <a href="#syntax-start-tag" title="syntax-start-tag">start
  tag</a> of <code><a href="the-pre-element.html#the-pre-element">pre</a></code> and <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
  elements. This does not affect the processing of the element. The
  otherwise optional <a href="#syntax-newlines" title="syntax-newlines">newline</a>
  <em>must</em> be included if the element's contents themselves start
  with a <a href="#syntax-newlines" title="syntax-newlines">newline</a> (because
  otherwise the leading newline in the contents would be treated like
  the optional newline, and ignored).</p>

  <div class="example">
   <p>The following two <code><a href="the-pre-element.html#the-pre-element">pre</a></code> blocks are equivalent:</p>
   <pre>&lt;pre&gt;Hello&lt;/pre&gt;</pre>
   <pre>&lt;pre&gt;<br>Hello&lt;/pre&gt;</pre>
  </div>


  <h5 id="cdata-rcdata-restrictions"><span class="secno">8.1.2.6 </span>Restrictions on the contents of raw text and RCDATA elements</h5>

  <p>The text in <a href="#raw-text-elements" title="raw text elements">raw text</a> and
  <a href="#rcdata-elements">RCDATA elements</a> must not contain any occurrences of the
  string "<code title="">&lt;/</code>" (U+003C LESS-THAN SIGN, U+002F
  SOLIDUS) followed by characters that case-insensitively match the
  tag name of the element followed by one of "tab" (U+0009), "LF" (U+000A), "FF" (U+000C), "CR" (U+000D), U+0020 SPACE, "&gt;" (U+003E), or
  "/" (U+002F).</p>


  <h4 id="text"><span class="secno">8.1.3 </span>Text</h4>

  <p><dfn id="syntax-text" title="syntax-text">Text</dfn> is allowed inside elements,
  attribute values, and comments. Extra constraints are placed on what
  is and what is not allowed in text based on where the text is to be
  put, as described in the other sections.</p>


  <h5 id="newlines"><span class="secno">8.1.3.1 </span>Newlines</h5>

  <p><dfn id="syntax-newlines" title="syntax-newlines">Newlines</dfn> in HTML may be
  represented either as "CR" (U+000D) characters, "LF" (U+000A) characters, or pairs of "CR" (U+000D),
  "LF" (U+000A) characters in that order.</p>

  <p>Where <a href="#syntax-charref" title="syntax-charref">character references</a>
  are allowed, a character reference of a "LF" (U+000A)
  character (but not a "CR" (U+000D) character) also
  represents a <a href="#syntax-newlines" title="syntax-newlines">newline</a>.</p>


  <h4 id="character-references"><span class="secno">8.1.4 </span>Character references</h4>

  <p>In certain cases described in other sections, <a href="#syntax-text" title="syntax-text">text</a> may be mixed with <dfn id="syntax-charref" title="syntax-charref">character references</dfn>. These can be used
  to escape characters that couldn't otherwise legally be included in
  <a href="#syntax-text" title="syntax-text">text</a>.</p>

  <p>Character references must start with a U+0026 AMPERSAND character
  (&amp;). Following this, there are three possible kinds of character
  references:</p>

  <dl><dt>Named character references</dt>

   <dd>The ampersand must be followed by one of the names given in the
   <a href="#named-character-references">named character references</a> section, using the same
   case. <span class="impl">The name must be one that is terminated by
   a ";" (U+003B) character.</span></dd>


   <dt>Decimal numeric character reference</dt>

   <dd>The ampersand must be followed by a "#" (U+0023) character, followed by one or more digits in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, representing a base-ten
   integer that corresponds to a Unicode code point that is allowed
   according to the definition below. The digits must then be followed
   by a ";" (U+003B) character.</dd>


   <dt>Hexadecimal numeric character reference</dt>

   <dd>The ampersand must be followed by a "#" (U+0023) character, which must be followed by either a "x" (U+0078) character or a "X" (U+0058) character, which must then be followed by one or more digits in
   the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, U+0061
   LATIN SMALL LETTER A to U+0066 LATIN SMALL LETTER F, and U+0041
   LATIN CAPITAL LETTER A to U+0046 LATIN CAPITAL LETTER F,
   representing a base-sixteen integer that corresponds to a Unicode
   code point that is allowed according to the definition below. The
   digits must then be followed by a U+003B SEMICOLON character
   (;).</dd>

  </dl><p>The numeric character reference forms described above are allowed
  to reference any Unicode code point other than U+0000, U+000D,
  permanently undefined Unicode characters (noncharacters), and
  control characters other than <a href="common-microsyntaxes.html#space-character" title="space character">space
  characters</a>.</p>

  <p>An <dfn id="syntax-ambiguous-ampersand" title="syntax-ambiguous-ampersand">ambiguous
  ampersand</dfn> is a U+0026 AMPERSAND character (&amp;) that is
  followed by one or more characters in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, <a href="common-microsyntaxes.html#lowercase-ascii-letters">lowercase ASCII letters</a>, and <a href="common-microsyntaxes.html#uppercase-ascii-letters">uppercase ASCII letters</a>, followed by a U+003B SEMICOLON character
  (;), where these characters do not match any of the names given in
  the <a href="#named-character-references">named character references</a> section.</p>


  <h4 id="cdata-sections"><span class="secno">8.1.5 </span>CDATA sections</h4>

  <p><dfn id="syntax-cdata" title="syntax-cdata">CDATA sections</dfn> must consist of
  the following components, in this order:</p>

  <ol><li>The string "<code title="">&lt;![CDATA[</code>".</li>

   <li>Optionally, <a href="#syntax-text" title="syntax-text">text</a>, with the
   additional restriction that the text must not contain the string
   "<code title="">]]&gt;</code>".</li>

   <li>The string "<code title="">]]&gt;</code>".</li>

  </ol><div class="example">

   <p>CDATA sections can only be used in foreign content (MathML or
   SVG). In this example, a CDATA section is used to escape the
   contents of an <code>ms</code> element:</p>

   <pre>&lt;p&gt;You can add a string to a number, but this stringifies the number:&lt;/p&gt;
&lt;math&gt;
 &lt;ms&gt;&lt;![CDATA[x&lt;y]]&gt;&lt;/ms&gt;
 &lt;mo&gt;+&lt;/mo&gt;
 &lt;mn&gt;3&lt;/mn&gt;
 &lt;mo&gt;=&lt;/mo&gt;
 &lt;ms&gt;&lt;![CDATA[x&lt;y3]]&gt;&lt;/ms&gt;
&lt;/math&gt;</pre>

  </div>


  <h4 id="comments"><span class="secno">8.1.6 </span>Comments</h4>

  <p><dfn id="syntax-comments" title="syntax-comments">Comments</dfn> must start with the
  four character sequence U+003C LESS-THAN SIGN, U+0021 EXCLAMATION
  MARK, U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS (<code title="">&lt;!--</code>). Following this sequence, the comment may
  have <a href="#syntax-text" title="syntax-text">text</a>, with the additional
  restriction that the text must not start with a single U+003E
  GREATER-THAN SIGN character (&gt;), nor start with a "-" (U+002D) character followed by a U+003E GREATER-THAN SIGN
  (&gt;) character, nor contain two consecutive U+002D HYPHEN-MINUS
  characters (<code title="">--</code>), nor end with a "-" (U+002D) character. Finally, the comment must be ended by
  the three character sequence U+002D HYPHEN-MINUS, U+002D
  HYPHEN-MINUS, U+003E GREATER-THAN SIGN (<code title="">--&gt;</code>).</p>


  <div class="impl">

  <h3 id="parsing"><span class="secno">8.2 </span>Parsing HTML documents</h3>

  <p><i>This section only applies to user agents, data mining tools,
  and conformance checkers.</i></p>

  <p class="note">The rules for parsing XML documents into DOM trees
  are covered by the next section, entitled "<a href="#the-xhtml-syntax">The XHTML
  syntax</a>".</p>

  <p>User agents must use the parsing rules described in this section
  to generate the DOM trees from <code><a href="#text/html">text/html</a></code> resources.
  Together, these rules define what is referred to as the <dfn id="html-parser">HTML
  parser</dfn>.</p>

  <div class="note">

   <p>While the HTML syntax described in this specification bears a
   close resemblance to SGML and XML, it is a separate language with
   its own parsing rules.</p>

   <p>Some earlier versions of HTML (in particular from HTML2 to
   HTML4) were based on SGML and used SGML parsing rules. However, few
   (if any) web browsers ever implemented true SGML parsing for HTML
   documents; the only user agents to strictly handle HTML as an SGML
   application have historically been validators. The resulting
   confusion &#8212; with validators claiming documents to have one
   representation while widely deployed Web browsers interoperably
   implemented a different representation &#8212; has wasted decades
   of productivity. This version of HTML thus returns to a non-SGML
   basis.</p>

   <p>Authors interested in using SGML tools in their authoring
   pipeline are encouraged to use XML tools and the XML serialization
   of HTML.</p>

  </div>

  <p>This specification defines the parsing rules for HTML documents,
  whether they are syntactically correct or not. Certain points in the
  parsing algorithm are said to be <dfn id="parse-error" title="parse error">parse
  errors</dfn>. The error handling for parse errors is well-defined:
  user agents must either act as described below when encountering
  such problems, or must abort processing at the first error that they
  encounter for which they do not wish to apply the rules described
  below.</p>

  <p>Conformance checkers must report at least one parse error
  condition to the user if one or more parse error conditions exist in
  the document and must not report parse error conditions if none
  exist in the document. Conformance checkers may report more than one
  parse error condition if more than one parse error condition exists
  in the document. Conformance checkers are not required to recover
  from parse errors.</p>

  <p class="note">Parse errors are only errors with the
  <em>syntax</em> of HTML. In addition to checking for parse errors,
  conformance checkers will also verify that the document obeys all
  the other conformance requirements described in this
  specification.</p>

  <p>For the purposes of conformance checkers, if a resource is
  determined to be in <a href="#syntax">the HTML syntax</a>, then it is an
  <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>.</p>

  </div>


  <div class="impl">

  <h4 id="overview-of-the-parsing-model"><span class="secno">8.2.1 </span>Overview of the parsing model</h4>

  <p class="overview"><object data="images/parsing-model-overview.svg" height="535" width="345"><img alt="" height="450" src="images/parsing-model-overview.png" width="345"></object></p>

  <p>The input to the HTML parsing process consists of a stream of
  <a href="infrastructure.html#unicode-code-point" title="Unicode code point">Unicode code points</a>, which
  is passed through a <a href="#tokenization">tokenization</a> stage followed by a
  <a href="#tree-construction">tree construction</a> stage. The output is a
  <code><a href="dom.html#document">Document</a></code> object.</p>

  <p class="note">Implementations that <a href="infrastructure.html#non-scripted">do not
  support scripting</a> do not have to actually create a DOM
  <code><a href="dom.html#document">Document</a></code> object, but the DOM tree in such cases is
  still used as the model for the rest of the specification.</p>

  <p>In the common case, the data handled by the tokenization stage
  comes from the network, but <a href="dynamic-markup-insertion.html#dynamic-markup-insertion" title="dynamic markup
  insertion">it can also come from script</a> running in the user
  agent, e.g. using the <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code> API.</p>

  <p id="nestedParsing">There is only one set of states for the
  tokenizer stage and the tree construction stage, but the tree
  construction stage is reentrant, meaning that while the tree
  construction stage is handling one token, the tokenizer might be
  resumed, causing further tokens to be emitted and processed before
  the first token's processing is complete.</p>

  <div class="example">

   <p>In the following example, the tree construction stage will be
   called upon to handle a "p" start tag token while handling the
   "script" end tag token:</p>

   <pre>...
&lt;script&gt;
 document.write('&lt;p&gt;');
&lt;/script&gt;
...</pre>

  </div>

  <p>To handle these cases, parsers have a <dfn id="script-nesting-level">script nesting
  level</dfn>, which must be initially set to zero, and a <dfn id="parser-pause-flag">parser
  pause flag</dfn>, which must be initially set to false.</p>

  </div>



  <div class="impl">

  <h4 id="the-input-byte-stream"><span class="secno">8.2.2 </span>The <dfn>input byte stream</dfn></h4>

  <p>The stream of Unicode code points that comprises the input to the
  tokenization stage will be initially seen by the user agent as a
  stream of bytes (typically coming over the network or from the local
  file system). The bytes encode the actual characters according to a
  particular <i>character encoding</i>, which the user agent must use
  to decode the bytes into characters.</p>

  <p class="note">For XML documents, the algorithm user agents must
  use to determine the character encoding is given by the XML
  specification. This section does not apply to XML documents. <a href="#refsXML">[XML]</a></p>

  <p>The <a href="#encoding-sniffing-algorithm">encoding sniffing algorithm</a> defined below is
  used to determine the character encoding.</p>

  <p>Given an encoding, the bytes in the <a href="#the-input-byte-stream">input byte
  stream</a> must be converted to Unicode code points for the
  tokenizer's <a href="#input-stream">input stream</a>, as described by the rules for
  that encoding, except that the leading U+FEFF BYTE ORDER MARK
  character, if any, must not be stripped by the encoding layer (it is
  stripped by the rule below).</p> <!-- this is to prevent two leading
  BOMs from being both stripped, once by the decoder, and once by the
  parser -->

  <p>Bytes or sequences of bytes in the original byte stream that
  could not be converted to Unicode code points must be converted to
  U+FFFD REPLACEMENT CHARACTERs. Specifically, if the encoding is
  UTF-8, the bytes must be <a href="infrastructure.html#decoded-as-utf-8,-with-error-handling" title="decoded as UTF-8, with error
  handling">decoded with the error handling</a> defined in this
  specification.</p>

  <p class="note">Bytes or sequences of bytes in the original byte
  stream that did not conform to the encoding specification (e.g.
  invalid UTF-8 byte sequences in a UTF-8 input byte stream) are
  errors that conformance checkers are expected to report.</p>

  <p>Any byte or sequence of bytes in the original byte stream that is
  <a href="#misinterpreted-for-compatibility">misinterpreted for compatibility</a> is a <a href="#parse-error">parse
  error</a>.</p>


  <h5 id="determining-the-character-encoding"><span class="secno">8.2.2.1 </span>Determining the character encoding</h5>

  <p>In some cases, it might be impractical to unambiguously determine
  the encoding before parsing the document. Because of this, this
  specification provides for a two-pass mechanism with an optional
  pre-scan. Implementations are allowed, as described below, to apply
  a simplified parsing algorithm to whatever bytes they have available
  before beginning to parse the document. Then, the real parser is
  started, using a tentative encoding derived from this pre-parse and
  other out-of-band metadata. If, while the document is being loaded,
  the user agent discovers an encoding declaration that conflicts with
  this information, then the parser can get reinvoked to perform a
  parse of the document with the real encoding.</p>

  <p id="documentEncoding">User agents must use the following
  algorithm, called the <dfn id="encoding-sniffing-algorithm">encoding sniffing algorithm</dfn>, to
  determine the character encoding to use when decoding a document in
  the first pass. This algorithm takes as input any out-of-band
  metadata available to the user agent (e.g. the <a href="urls.html#content-type" title="Content-Type">Content-Type metadata</a> of the document)
  and all the bytes available so far, and returns an encoding and a
  <dfn id="concept-encoding-confidence" title="concept-encoding-confidence">confidence</dfn>. The
  confidence is either <i>tentative</i>, <i>certain</i>, or
  <i>irrelevant</i>. The encoding used, and whether the confidence in
  that encoding is <i>tentative</i> or <i>certain</i>, is <a href="#meta-charset-during-parse">used during the parsing</a> to
  determine whether to <a href="#change-the-encoding">change the encoding</a>. If no
  encoding is necessary, e.g. because the parser is operating on a
  Unicode stream and doesn't have to use an encoding at all, then the
  <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> is
  <i>irrelevant</i>.</p>

  <ol><li>

    <p>If the user has explicitly instructed the user agent to
    override the document's character encoding with a specific
    encoding, optionally return that encoding with the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a>
    <i>certain</i> and abort these steps.</p>

    <p class="note">Typically, user agents remember such user requests
    across sessions, and in some cases apply them to documents in
    <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>s as well.</p>

   </li>

   <li>

    <p>The user agent may wait for more bytes of the resource to be
    available, either in this step or at any later step in this
    algorithm. For instance, a user agent might wait 500ms or 1024
    bytes, whichever came first. In general preparsing the source to
    find the encoding improves performance, as it reduces the need to
    throw away the data structures used when parsing upon finding the
    encoding information. However, if the user agent delays too long
    to obtain data to determine the encoding, then the cost of the
    delay could outweigh any performance improvements from the
    preparse.</p>

    <p class="note">The authoring conformance requirements for
    character encoding declarations limit them to only appearing <a href="the-meta-element.html#charset1024">in the first 1024 bytes</a>. User agents are
    therefore encouraged to use the prescan algorithm below (as
    invoked by these steps) on the first 1024 bytes, but not to stall
    beyond that.</p>

   </li>

   <li>

    <!-- Doing this step before honouring HTTP is important for supporting
            http://kb.dsqq.cn/html/2012-09/16/node_193.htm
         which is encoded as UTF-8 but is incorrectly labeled as
            Content-Type: text/html; charset=GB2312
    -->

    <p>For each of the rows in the following table, starting with the
    first one and going down, if there are as many or more bytes
    available than the number of bytes in the first column, and the
    first bytes of the file match the bytes given in the first column,
    then return the encoding given in the cell in the second column of
    that row, with the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a>
    <i>certain</i>, and abort these steps:</p>

    <!-- this table is present in several forms in this file; keep them in sync -->
    <table><thead><tr><th>Bytes in Hexadecimal
       </th><th>Encoding
     </th></tr></thead><tbody><!-- nobody uses this
      <tr>
       <td>00 00 FE FF
       <td>UTF-32BE
      <tr>
       <td>FF FE 00 00
       <td>UTF-32LE
--><tr><td>FE FF
       </td><td>Big-endian UTF-16
      </td></tr><tr><td>FF FE
       </td><td>Little-endian UTF-16
      </td></tr><tr><td>EF BB BF
       </td><td>UTF-8
<!-- nobody uses this
      <tr>
       <td>DD 73 66 73
       <td>UTF-EBCDIC
-->
    </td></tr></tbody></table><p class="note">This step looks for Unicode Byte Order Marks
    (BOMs).</p>

    <p class="note">That this step happens before the next one
    honoring the HTTP <code><a href="urls.html#content-type">Content-Type</a></code> header is a
    <a href="introduction.html#willful-violation">willful violation</a> of the HTTP specification,
    motivated by a desire to be maximally compatible with legacy
    content. <a href="#refsHTTP">[HTTP]</a></p>

   </li>

   <li><p>If the transport layer specifies an encoding, and it is
   supported, return that encoding with the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a>
   <i>certain</i>, and abort these steps.</p></li>

   <li>

    <p>Optionally <a href="#prescan-a-byte-stream-to-determine-its-encoding" title="prescan a byte stream to determine its
    encoding">prescan the byte stream to determine its
    encoding</a>. The <var title="">end condition</var> is that the
    user agent decides that scanning further bytes would not be
    efficient. User agents are encouraged to only prescan the first
    1024 bytes. User agents may decide that scanning <em>any</em>
    bytes is not efficient, in which case these substeps are entirely
    skipped.</p>

    <p>The aforementioned algorithm either aborts unsuccessfully or
    returns a character encoding. If it returns a character encoding,
    then this algorithm must be aborted, returning the same encoding,
    with <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a>
    <i>tentative</i>.</p>

   </li>

   <li><p>Otherwise, if the <code><a href="dom.html#document">Document</a></code> is in a <a href="#nested-browsing-context">nested
   browsing context</a>, return the encoding of the <a href="#browsing-context-container">browsing
   context container</a>'s <code><a href="dom.html#document">Document</a></code>'s <a href="infrastructure.html#document's-character-encoding" title="document's character encoding">character encoding</a>,
   with the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a>
   <i>tentative</i>, and abort these steps.</p></li> <!-- not
   carefully tested -->

   <li><p>Otherwise, if the user agent has information on the likely
   encoding for this page, e.g. based on the encoding of the page when
   it was last visited, then return that encoding, with the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a>
   <i>tentative</i>, and abort these steps.</p></li>

   <li>

    <p>The user agent may attempt to autodetect the character encoding
    from applying frequency analysis or other algorithms to the data
    stream. Such algorithms may use information about the resource
    other than the resource's contents, including the address of the
    resource. If autodetection succeeds in determining a character
    encoding, and that encoding is a supported encoding, then return
    that encoding, with the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a>
    <i>tentative</i>, and abort these steps. <a href="#refsUNIVCHARDET">[UNIVCHARDET]</a></p>

    <p class="note">The UTF-8 encoding has a highly detectable bit
    pattern. Documents that contain bytes with values greater than
    0x7F which match the UTF-8 pattern are very likely to be UTF-8,
    while documents with byte sequences that do not match it are very
    likely not. User-agents are therefore encouraged to search for
    this common encoding. <a href="#refsPPUTF8">[PPUTF8]</a> <a href="#refsUTF8DET">[UTF8DET]</a></p>

   </li>

   <li>

    <p>Otherwise, return an implementation-defined or user-specified
    default character encoding, with the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a>
    <i>tentative</i>.</p>

    <p>In controlled environments or in environments where the
    encoding of documents can be prescribed (for example, for user
    agents intended for dedicated use in new networks), the
    comprehensive <code title="">UTF-8</code> encoding is
    suggested.</p>

    <p>In other environments, the default encoding is typically
    dependent on the user's locale (an approximation of the languages,
    and thus often encodings, of the pages that the user is likely to
    frequent). The following table gives suggested defaults based on
    the user's locale, for compatibility with legacy content. Locales
    are identified by BCP 47 language tags. <a href="#refsBCP47">[BCP47]</a></p>

    <!-- based on mozilla 1.9.1 localizations:
         http://mxr.mozilla.org/l10n-mozilla1.9.1/find?string=global%2Fintl.properties&tree=l10n-mozilla1.9.1&hint= -->

    <table><thead><tr><th>Locale language
       </th><th>Suggested default encoding
     </th></tr></thead><tbody><tr><td>ar
       </td><td>UTF-8

      </td></tr><tr><td>be
       </td><td>ISO-8859-5

      </td></tr><tr><td>bg
       </td><td>windows-1251

      </td></tr><tr><td>cs<!-- -CZ -->
       </td><td>ISO-8859-2

      </td></tr><tr><td>cy
       </td><td>UTF-8

      </td></tr><tr><td>fa<!-- -IR -->
       </td><td>UTF-8

      </td></tr><tr><td>he<!-- -IL -->
       </td><td>windows-1255

      </td></tr><tr><td>hr
       </td><td>UTF-8

      </td></tr><tr><td>hu<!-- -HU -->
       </td><td>ISO-8859-2

      </td></tr><tr><td>ja <!-- and ja-JP-mac -->
       </td><td>Windows-31J <!-- Shift_JIS -->

      </td></tr><tr><td>kk
       </td><td>UTF-8

      </td></tr><tr><td>ko<!-- -KR -->
       </td><td>windows-949 <!-- EUC-KR -->

      </td></tr><tr><td>ku
       </td><td>windows-1254 <!-- ISO-8859-9 -->

      </td></tr><tr><td>lt
       </td><td>windows-1257

      </td></tr><tr><td>lv<!-- -LV -->
       </td><td>ISO-8859-13

      </td></tr><tr><td>mk<!-- -MK -->
       </td><td>UTF-8

      </td></tr><tr><td>or
       </td><td>UTF-8

      </td></tr><tr><td>pl<!-- -PL -->
       </td><td>ISO-8859-2

      </td></tr><tr><td>ro
       </td><td>UTF-8

      </td></tr><tr><td>ru
       </td><td>windows-1251

      </td></tr><tr><td>sk
       </td><td>windows-1250

      </td></tr><tr><td>sl
       </td><td>ISO-8859-2

      </td></tr><tr><td>sr
       </td><td>UTF-8

      </td></tr><tr><td>th
       </td><td>windows-874 <!-- TIS-620 -->

      </td></tr><tr><td>tr<!-- -TR -->
       </td><td>windows-1254 <!-- ISO-8859-9 -->

      </td></tr><tr><td>uk
       </td><td>windows-1251

      </td></tr><tr><td>vi
       </td><td>UTF-8

      </td></tr><tr><td>zh-CN
       </td><td>GB18030

      </td></tr><tr><td>zh-TW
       </td><td>Big5

      </td></tr><tr><td>All other locales
       </td><td>windows-1252

    </td></tr></tbody></table></li>

  </ol><p>The <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> must immediately
  be set to the value returned from this algorithm, at the same time
  as the user agent uses the returned value to select the decoder to
  use for the input byte stream.</p>

  <hr><p>When an algorithm requires a user agent to <dfn id="prescan-a-byte-stream-to-determine-its-encoding">prescan a byte
  stream to determine its encoding</dfn>, given some defined <var title="">end condition</var>, then it must run the following steps.
  These steps either abort unsuccessfully or return a character
  encoding.</p>

  <ol><li>

    <p>Let <var title="">position</var> be a pointer to a byte in the
    input byte stream, initially pointing at the first byte. If at any
    point during these steps the user agent either runs out of bytes
    or reaches its <var title="">end condition</var>, then abort the
    <a href="#prescan-a-byte-stream-to-determine-its-encoding">prescan a byte stream to determine its encoding</a>
    algorithm unsuccessfully.</p>

   </li>

   <li>

    <p><i>Loop</i>: If <var title="">position</var> points to:</p>

    <dl class="switch"><dt>A sequence of bytes starting with: 0x3C 0x21 0x2D 0x2D (ASCII '&lt;!--')</dt>
     <dd>

      <p>Advance the <var title="">position</var> pointer so that it
      points at the first 0x3E byte which is preceded by two 0x2D
      bytes (i.e. at the end of an ASCII '--&gt;' sequence) and comes
      after the 0x3C byte that was found. (The two 0x2D bytes can be
      the same as the those in the '&lt;!--' sequence.)</p>

     </dd>

     <dt>A sequence of bytes starting with: 0x3C, 0x4D or 0x6D, 0x45 or 0x65, 0x54 or 0x74, 0x41 or 0x61, and one of 0x09, 0x0A, 0x0C, 0x0D, 0x20, 0x2F (case-insensitive ASCII '&lt;meta' followed by a space or slash)</dt>
     <dd>

      <ol><li><p>Advance the <var title="">position</var> pointer so
       that it points at the next 0x09, 0x0A, 0x0C, 0x0D, 0x20, or
       0x2F byte (the one in sequence of characters matched
       above).</p></li>

       <li><p>Let <var title="">attribute list</var> be an empty
       list of strings.</p></li> <!-- so long as we only care about
       http-equiv, content, and charset, this can be a 3-bit
       bitfield -->

       <li><p>Let <var title="">got pragma</var> be false.</p></li>

       <li><p>Let <var title="">need pragma</var> be null.</p></li>

       <li><p>Let <var title="">charset</var> be the null value
       (which, for the purposes of this algorithm, is distinct from
       an unrecognised encoding or the empty string).</p></li>

       <li><p><i>Attributes</i>: <a href="#concept-get-attributes-when-sniffing" title="concept-get-attributes-when-sniffing">Get an
       attribute</a> and its value. If no attribute was sniffed,
       then jump to the <i>processing</i> step below.</p></li>

       <li><p>If the attribute's name is already in <var title="">attribute list</var>, then return to the step
       labeled <i>attributes</i>.</p>

       </li><li><p>Add the attribute's name to <var title="">attribute
       list</var>.</p>

       </li><li>

        <p>Run the appropriate step from the following list, if one
        applies:</p>

        <dl class="switch"><dt>If the attribute's name is "<code title="">http-equiv</code>"</dt>

         <dd><p>If the attribute's value is "<code title="">content-type</code>", then set <var title="">got
         pragma</var> to true.</p></dd>

         <dt>If the attribute's name is "<code title="">content</code>"</dt>

         <dd><p>Apply the <a href="urls.html#algorithm-for-extracting-an-encoding-from-a-meta-element">algorithm for extracting an encoding
         from a <code>meta</code> element</a>, giving the
         attribute's value as the string to parse. If an encoding is
         returned, and if <var title="">charset</var> is still set
         to null, let <var title="">charset</var> be the encoding
         returned, and set <var title="">need pragma</var> to
         true.</p></dd>

         <dt>If the attribute's name is "<code title="">charset</code>"</dt>

         <dd><p>Let <var title="">charset</var> be the encoding
         corresponding to the attribute's value, and set <var title="">need pragma</var> to false.</p></dd>

        </dl></li>

       <li><p>Return to the step labeled <i>attributes</i>.</p></li>

       <li><p><i>Processing</i>: If <var title="">need pragma</var> is
       null, then jump to the step below labeled <i>next
       byte</i>.</p></li>

       <li><p>If <var title="">need pragma</var> is true but <var title="">got pragma</var> is false, then jump to the step below
       labeled <i>next byte</i>.</p></li>

       <li><p>If <var title="">charset</var> is <a href="infrastructure.html#a-utf-16-encoding">a UTF-16
       encoding</a>, change the value of <var title="">charset</var> to UTF-8.</p></li>

       <li><p>If <var title="">charset</var> is not a supported
       character encoding, then jump to the step below labeled <i>next
       byte</i>.</p></li>

       <li><p>Abort the <a href="#prescan-a-byte-stream-to-determine-its-encoding">prescan a byte stream to determine its
       encoding</a> algorithm, returning the encoding given by <var title="">charset</var>.</p></li>

      </ol></dd>

     <dt>A sequence of bytes starting with a 0x3C byte (ASCII &lt;), optionally a 0x2F byte (ASCII /), and finally a byte in the range 0x41-0x5A or 0x61-0x7A (an ASCII letter)</dt>
     <dd>

      <ol><li><p>Advance the <var title="">position</var> pointer so
       that it points at the next 0x09 (ASCII TAB), 0x0A (ASCII LF),
       0x0C (ASCII FF), 0x0D (ASCII CR), 0x20 (ASCII space), or 0x3E
       (ASCII &gt;) byte.</p></li>

       <li><p>Repeatedly <a href="#concept-get-attributes-when-sniffing" title="concept-get-attributes-when-sniffing">get an
       attribute</a> until no further attributes can be found, then
       jump to the step below labeled <i>next byte</i>.</p></li>

      </ol></dd>

     <dt>A sequence of bytes starting with: 0x3C 0x21 (ASCII '&lt;!')</dt>
     <dt>A sequence of bytes starting with: 0x3C 0x2F (ASCII '&lt;/')</dt>
     <dt>A sequence of bytes starting with: 0x3C 0x3F (ASCII '&lt;?')</dt>
     <dd>

      <p>Advance the <var title="">position</var> pointer so that it
      points at the first 0x3E byte (ASCII &gt;) that comes after the
      0x3C byte that was found.</p>

     </dd>

     <dt>Any other byte</dt>
     <dd>

      <p>Do nothing with that byte.</p>

     </dd>

    </dl></li>

   <li><i>Next byte</i>: Move <var title="">position</var> so it
   points at the next byte in the input byte stream, and return to the
   step above labeled <i>loop</i>.</li>

  </ol><p>When the <a href="#prescan-a-byte-stream-to-determine-its-encoding">prescan a byte stream to determine its
  encoding</a> algorithm says to <dfn id="concept-get-attributes-when-sniffing" title="concept-get-attributes-when-sniffing">get an attribute</dfn>,
  it means doing this:</p>

  <ol><li><p>If the byte at <var title="">position</var> is one of 0x09
   (ASCII TAB), 0x0A (ASCII LF), 0x0C (ASCII FF), 0x0D (ASCII CR),
   0x20 (ASCII space), or 0x2F (ASCII /) then advance <var title="">position</var> to the next byte and redo this
   step.</p></li>

   <li><p>If the byte at <var title="">position</var> is 0x3E (ASCII
   &gt;), then abort the <a href="#concept-get-attributes-when-sniffing" title="concept-get-attributes-when-sniffing">get an
   attribute</a> algorithm. There isn't one.</p></li>

   <li><p>Otherwise, the byte at <var title="">position</var> is the
   start of the attribute name. Let <var title="">attribute name</var>
   and <var title="">attribute value</var> be the empty
   string.</p></li>

   <li><p><i>Attribute name</i>: Process the byte at <var title="">position</var> as follows:</p>

    <dl class="switch"><dt>If it is 0x3D (ASCII =), and the <var title="">attribute
     name</var> is longer than the empty string</dt>

     <dd>Advance <var title="">position</var> to the next byte and
     jump to the step below labeled <i>value</i>.</dd>

     <dt>If it is 0x09 (ASCII TAB), 0x0A (ASCII LF), 0x0C (ASCII
     FF), 0x0D (ASCII CR), or 0x20 (ASCII space)</dt>

     <dd>Jump to the step below labeled <i>spaces</i>.</dd>

     <dt>If it is 0x2F (ASCII /) or 0x3E (ASCII &gt;)</dt>

     <dd>Abort the <a href="#concept-get-attributes-when-sniffing" title="concept-get-attributes-when-sniffing">get an
     attribute</a> algorithm. The attribute's name is the value of
     <var title="">attribute name</var>, its value is the empty
     string.</dd>

     <dt>If it is in the range 0x41 (ASCII A) to 0x5A (ASCII
     Z)</dt>

     <dd>Append the Unicode character with code point <span title=""><var title="">b</var>+0x20</span> to <var title="">attribute name</var> (where <var title="">b</var> is
     the value of the byte at <var title="">position</var>). (This
     converts the input to lowercase.)</dd>

     <dt>Anything else</dt>

     <dd>Append the Unicode character with the same code point as the
     value of the byte at <var title="">position</var>) to <var title="">attribute name</var>. (It doesn't actually matter how
     bytes outside the ASCII range are handled here, since only
     ASCII characters can contribute to the detection of a character
     encoding.)</dd>

    </dl></li>

   <li><p>Advance <var title="">position</var> to the next byte and
   return to the previous step.</p></li>

   <li><p><i>Spaces</i>: If the byte at <var title="">position</var> is one of 0x09 (ASCII TAB), 0x0A (ASCII
   LF), 0x0C (ASCII FF), 0x0D (ASCII CR), or 0x20 (ASCII space) then
   advance <var title="">position</var> to the next byte, then,
   repeat this step.</p></li>

   <li><p>If the byte at <var title="">position</var> is <em>not</em>
   0x3D (ASCII =), abort the <a href="#concept-get-attributes-when-sniffing" title="concept-get-attributes-when-sniffing">get an
   attribute</a> algorithm. The attribute's name is the value of
   <var title="">attribute name</var>, its value is the empty
   string.</p></li>

   <li><p>Advance <var title="">position</var> past the 0x3D (ASCII
   =) byte.</p></li>

   <li><p><i>Value</i>: If the byte at <var title="">position</var> is one of 0x09 (ASCII TAB), 0x0A (ASCII
   LF), 0x0C (ASCII FF), 0x0D (ASCII CR), or 0x20 (ASCII space) then
   advance <var title="">position</var> to the next byte, then,
   repeat this step.</p></li>

   <li><p>Process the byte at <var title="">position</var> as
   follows:</p>

    <dl class="switch"><dt>If it is 0x22 (ASCII ") or 0x27 (ASCII ')</dt>

     <dd>

      <ol><li>Let <var title="">b</var> be the value of the byte at
       <var title="">position</var>.</li>

       <li><i>Quote loop</i>: Advance <var title="">position</var> to
       the next byte.</li>

       <li>If the value of the byte at <var title="">position</var> is
       the value of <var title="">b</var>, then advance <var title="">position</var> to the next byte and abort the "get an
       attribute" algorithm. The attribute's name is the value of <var title="">attribute name</var>, and its value is the value of
       <var title="">attribute value</var>.</li>

       <li>Otherwise, if the value of the byte at <var title="">position</var> is in the range 0x41 (ASCII A) to 0x5A
       (ASCII Z), then append a Unicode character to <var title="">attribute value</var> whose code point is 0x20 more
       than the value of the byte at <var title="">position</var>.</li>

       <li>Otherwise, append a Unicode character to <var title="">attribute value</var> whose code point is the same as
       the value of the byte at <var title="">position</var>.</li>

       <li>Return to the step above labeled <i>quote loop</i>.</li>

      </ol></dd>

     <dt>If it is 0x3E (ASCII &gt;)</dt>

     <dd>Abort the <a href="#concept-get-attributes-when-sniffing" title="concept-get-attributes-when-sniffing">get an
     attribute</a> algorithm. The attribute's name is the value of
     <var title="">attribute name</var>, its value is the empty
     string.</dd>


     <dt>If it is in the range 0x41 (ASCII A) to 0x5A (ASCII
     Z)</dt>

     <dd>Append the Unicode character with code point <span title=""><var title="">b</var>+0x20</span> to <var title="">attribute value</var> (where <var title="">b</var> is
     the value of the byte at <var title="">position</var>). Advance
     <var title="">position</var> to the next byte.</dd>

     <dt>Anything else</dt>

     <dd>Append the Unicode character with the same code point as the
     value of the byte at <var title="">position</var>) to <var title="">attribute value</var>. Advance <var title="">position</var> to the next byte.</dd>

    </dl></li>

   <li><p>Process the byte at <var title="">position</var> as
   follows:</p>

    <dl class="switch"><dt>If it is 0x09 (ASCII TAB), 0x0A (ASCII LF), 0x0C (ASCII
     FF), 0x0D (ASCII CR), 0x20 (ASCII space), or 0x3E (ASCII
     &gt;)</dt>

     <dd>Abort the <a href="#concept-get-attributes-when-sniffing" title="concept-get-attributes-when-sniffing">get an
     attribute</a> algorithm. The attribute's name is the value of
     <var title="">attribute name</var> and its value is the value of
     <var title="">attribute value</var>.</dd>

     <dt>If it is in the range 0x41 (ASCII A) to 0x5A (ASCII Z)</dt>

     <dd>Append the Unicode character with code point <span title=""><var title="">b</var>+0x20</span> to <var title="">attribute value</var> (where <var title="">b</var> is
     the value of the byte at <var title="">position</var>).</dd>

     <dt>Anything else</dt>

     <dd>Append the Unicode character with the same code point as the
     value of the byte at <var title="">position</var>) to <var title="">attribute value</var>.</dd>

    </dl></li>

   <li><p>Advance <var title="">position</var> to the next byte and
   return to the previous step.</p></li>

  </ol><p>For the sake of interoperability, user agents should not use a
  pre-scan algorithm that returns different results than the one
  described above. (But, if you do, please at least let us know, so
  that we can improve this algorithm and benefit everyone...)</p>

<!--(removed this since the specs are being changed)
  <p class="note">These algorithms are a <span>willful
  violation</span> of the HTTP specification, which requires that the
  encoding be assumed to be ISO-8859-1 in the absence of a
  <span>character encoding declaration</span> to the contrary, and of
  RFC 2046, which requires that the encoding be assumed to be US-ASCII
  in the absence of a <span>character encoding declaration</span> to
  the contrary. This specification's third approach is motivated by a
  desire to be maximally compatible with legacy content. <a
  href="#refsHTTP">[HTTP]</a> <a href="#refsRFC2046">[RFC2046]</a></p>
-->



  <h5 id="character-encodings-0"><span class="secno">8.2.2.2 </span>Character encodings</h5>

  <p>User agents must at a minimum support the UTF-8 and Windows-1252
  encodings, but may support more. <a href="#refsRFC3629">[RFC3629]</a> <a href="#refsWIN1252">[WIN1252]</a></p>

  <p class="note">It is not unusual for Web browsers to support dozens
  if not upwards of a hundred distinct character encodings.</p>

  <p>User agents must support the <a href="infrastructure.html#preferred-mime-name">preferred MIME name</a> of
  every character encoding they support, and should support all the
  IANA-registered names and aliases of every character encoding they
  support. <a href="#refsIANACHARSET">[IANACHARSET]</a></p>

  <p>When comparing a string specifying a character encoding with the
  name or alias of a character encoding to determine if they are
  equal, user agents must remove any leading or trailing <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a> in both names, and
  then perform the comparison in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> manner.</p>

  <hr><p>When a user agent would otherwise use an encoding given in the
  first column of the following table to either convert content to
  Unicode characters or convert Unicode characters to bytes, it must
  instead use the encoding given in the cell in the second column of
  the same row. When a byte or sequence of bytes is treated
  differently due to this encoding aliasing, it is said to have been
  <dfn id="misinterpreted-for-compatibility">misinterpreted for compatibility</dfn>.</p>

  <table id="table-encoding-overrides"><caption>Character encoding overrides</caption>
   <thead><tr><th> Input encoding </th><th> Replacement encoding </th><th> References
   </th></tr></thead><tbody><tr><td> EUC-KR </td><td> windows-949 </td><td>
         <a href="#refsEUCKR">[EUCKR]</a>
         <a href="#refsWIN949">[WIN949]</a>
    </td></tr><tr><td> EUC-JP </td><td> CP51932 </td><td>
         <a href="#refsEUCJP">[EUCJP]</a>
         <a href="#refsCP51932">[CP51932]</a>
    </td></tr><tr><td> GB2312 </td><td> GBK </td><td>
         <a href="#refsRFC1345">[RFC1345]</a>
         <a href="#refsGBK">[GBK]</a>
    </td></tr><tr><td> GB_2312-80 </td><td> GBK </td><td>
         <a href="#refsRFC1345">[RFC1345]</a>
         <a href="#refsGBK">[GBK]</a>
    </td></tr><tr><td> ISO-2022-JP </td><td> CP50220 </td><td>
         <a href="#refsRFC1468">[RFC1468]</a><!-- ISO-2022-JP -->
         <a href="#refsRFC2237">[RFC2237]</a><!-- ISO-2022-JP-1 -->
         <a href="#refsRFC1554">[RFC1554]</a><!-- ISO-2022-JP-2 -->
         <a href="#refsCP50220">[CP50220]</a><!-- CP50220, the compatibility replacement for ISO-2022-JP -->
    </td></tr><tr><td> ISO-8859-1 </td><td> windows-1252 </td><td>
         <a href="#refsRFC1345">[RFC1345]</a>
         <a href="#refsWIN1252">[WIN1252]</a>
    </td></tr><tr><td> ISO-8859-9 </td><td> windows-1254 </td><td>
         <a href="#refsRFC1345">[RFC1345]</a>
         <a href="#refsWIN1254">[WIN1254]</a>
    </td></tr><tr><td> ISO-8859-11 </td><td> windows-874 </td><td>
         <a href="#refsISO885911">[ISO885911]</a>
         <a href="#refsWIN874">[WIN874]</a>
    </td></tr><tr><td> KS_C_5601-1987 </td><td> windows-949 </td><td>
         <a href="#refsRFC1345">[RFC1345]</a>
         <a href="#refsWIN949">[WIN949]</a>
    </td></tr><tr><td> Shift_JIS </td><td> Windows-31J </td><td>
         <a href="#refsSHIFTJIS">[SHIFTJIS]</a>
         <a href="#refsWIN31J">[WIN31J]</a>
    </td></tr><tr><td> TIS-620 </td><td> windows-874 </td><td>
         <a href="#refsTIS620">[TIS620]</a>
         <a href="#refsWIN874">[WIN874]</a>
    </td></tr><tr><td> US-ASCII </td><td> windows-1252 </td><td>
         <a href="#refsRFC1345">[RFC1345]</a>
         <a href="#refsWIN1252">[WIN1252]</a>
   </td></tr></tbody></table><p class="note">The requirement to treat certain encodings as other
  encodings according to the table above is a <a href="introduction.html#willful-violation">willful
  violation</a> of the W3C Character Model specification, motivated
  by a desire for compatibility with legacy content. <a href="#refsCHARMOD">[CHARMOD]</a></p>

  <p>When a user agent is to use the self-describing UTF-16 encoding
  but no BOM has been found, user agents must default to little-endian
  UTF-16.</p>

  <p class="note">The requirement to default UTF-16 to little-endian
  rather than big-endian is a <a href="introduction.html#willful-violation">willful violation</a> of RFC
  2781, motivated by a desire for compatibility with legacy content.
  <a href="#refsRFC2781">[RFC2781]</a></p>

  <hr><p>User agents must not support the CESU-8, UTF-7, BOCU-1 and SCSU
  encodings. <a href="#refsCESU8">[CESU8]</a> <a href="#refsUTF7">[UTF7]</a> <a href="#refsBOCU1">[BOCU1]</a> <a href="#refsSCSU">[SCSU]</a></p>

  <p>Support for encodings based on EBCDIC is not recommended. This
  encoding is rarely used for publicly-facing Web content.</p>

  <p>Support for UTF-32 is not recommended. This encoding is rarely
  used, and frequently implemented incorrectly.</p>

  <p class="note">This specification does not make any attempt to
  support EBCDIC-based encodings and UTF-32 in its algorithms; support
  and use of these encodings can thus lead to unexpected behavior in
  implementations of this specification.</p>



  <h5 id="changing-the-encoding-while-parsing"><span class="secno">8.2.2.3 </span>Changing the encoding while parsing</h5>

  <p>When the parser requires the user agent to <dfn id="change-the-encoding">change the
  encoding</dfn>, it must run the following steps. This might happen
  if the <a href="#encoding-sniffing-algorithm">encoding sniffing algorithm</a> described above
  failed to find an encoding, or if it found an encoding that was not
  the actual encoding of the file.</p>

  <ol><li>If the encoding that is already being used to interpret the
   input stream is <a href="infrastructure.html#a-utf-16-encoding">a UTF-16 encoding</a>, then set the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> to
   <i>certain</i> and abort these steps. The new encoding is ignored;
   if it was anything but the same encoding, then it would be clearly
   incorrect.</li>

   <li>If the new encoding is <a href="infrastructure.html#a-utf-16-encoding">a UTF-16 encoding</a>, change
   it to UTF-8.</li>

   <li>If the new encoding is identical or equivalent to the encoding
   that is already being used to interpret the input stream, then set
   the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> to
   <i>certain</i> and abort these steps. This happens when the
   encoding information found in the file matches what the
   <a href="#encoding-sniffing-algorithm">encoding sniffing algorithm</a> determined to be the
   encoding, and in the second pass through the parser if the first
   pass found that the encoding sniffing algorithm described in the
   earlier section failed to find the right encoding.</li>

   <li>If all the bytes up to the last byte converted by the current
   decoder have the same Unicode interpretations in both the current
   encoding and the new encoding, and if the user agent supports
   changing the converter on the fly, then the user agent may change
   to the new converter for the encoding on the fly. Set the
   <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> and the encoding used to
   convert the input stream to the new encoding, set the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> to
   <i>certain</i>, and abort these steps.</li>

   <li>Otherwise, <a href="#navigate">navigate</a><!--DONAV reparse--> to the
   document again, with <a href="#replacement-enabled">replacement enabled</a>, and using
   the same <a href="#source-browsing-context">source browsing context</a>, but this time skip
   the <a href="#encoding-sniffing-algorithm">encoding sniffing algorithm</a> and instead just set
   the encoding to the new encoding and the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> to
   <i>certain</i>. Whenever possible, this should be done without
   actually contacting the network layer (the bytes should be
   re-parsed from memory), even if, e.g., the document is marked as
   not being cacheable. If this is not possible and contacting the
   network layer would involve repeating a request that uses a method
   other than HTTP GET (<a href="urls.html#concept-http-equivalent-get" title="concept-http-equivalent-get">or
   equivalent</a> for non-HTTP URLs), then instead set the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> to
   <i>certain</i> and ignore the new encoding. The resource will be
   misinterpreted. User agents may notify the user of the situation,
   to aid in application development.</li>

  </ol><h5 id="preprocessing-the-input-stream"><span class="secno">8.2.2.4 </span>Preprocessing the input stream</h5>

  <p>The <dfn id="input-stream">input stream</dfn> consists of the characters pushed
  into it as the <a href="#the-input-byte-stream">input byte stream</a> is decoded or from the
  various APIs that directly manipulate the input stream.</p>

  <p>One leading U+FEFF BYTE ORDER MARK character must be ignored if
  any are present in the <a href="#input-stream">input stream</a>.</p>

  <p class="note">The requirement to strip a U+FEFF BYTE ORDER MARK
  character regardless of whether that character was used to determine
  the byte order is a <a href="introduction.html#willful-violation">willful violation</a> of Unicode,
  motivated by a desire to increase the resilience of user agents in
  the face of na&#239;ve transcoders.</p>

  <p>Any occurrences of any characters in the ranges U+0001 to U+0008,
  <!-- HT, LF allowed --> <!-- U+000B is in the next list --> <!-- FF,
  CR allowed --> U+000E to U+001F, <!-- ASCII allowed --> U+007F
  <!--to U+0084, (U+0085 NEL not allowed), U+0086--> to U+009F, U+FDD0
  to U+FDEF, and characters U+000B, U+FFFE, U+FFFF, U+1FFFE, U+1FFFF,
  U+2FFFE, U+2FFFF, U+3FFFE, U+3FFFF, U+4FFFE, U+4FFFF, U+5FFFE,
  U+5FFFF, U+6FFFE, U+6FFFF, U+7FFFE, U+7FFFF, U+8FFFE, U+8FFFF,
  U+9FFFE, U+9FFFF, U+AFFFE, U+AFFFF, U+BFFFE, U+BFFFF, U+CFFFE,
  U+CFFFF, U+DFFFE, U+DFFFF, U+EFFFE, U+EFFFF, U+FFFFE, U+FFFFF,
  U+10FFFE, and U+10FFFF are <a href="#parse-error" title="parse error">parse
  errors</a>. These are all control characters or permanently
  undefined Unicode characters (noncharacters).</p>

  <p>"CR" (U+000D) characters and "LF" (U+000A)
  characters are treated specially. All CR characters must be
  converted to LF characters, and any LF characters that immediately
  follow a CR character must be ignored. Thus, newlines in HTML DOMs
  are represented by LF characters, and there are never any CR
  characters in the input to the <a href="#tokenization">tokenization</a> stage.</p>

  <p>The <dfn id="next-input-character">next input character</dfn> is the first character in the
  <a href="#input-stream">input stream</a> that has not yet been <dfn id="consumed">consumed</dfn>
  or explicitly ignored by the requirements in this section.
  Initially, the <i><a href="#next-input-character">next input character</a></i> is the first character in
  the input. The <dfn id="current-input-character">current input character</dfn> is the last
  character to have been <i><a href="#consumed">consumed</a></i>.</p>

  <p>The <dfn id="insertion-point">insertion point</dfn> is the position (just before a
  character or just before the end of the input stream) where content
  inserted using <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code> is actually
  inserted. The insertion point is relative to the position of the
  character immediately after it, it is not an absolute offset into
  the input stream. Initially, the insertion point is
  undefined.</p>

  <p>The "EOF" character in the tables below is a conceptual character
  representing the end of the <a href="#input-stream">input stream</a>. If the parser
  is a <a href="dynamic-markup-insertion.html#script-created-parser">script-created parser</a>, then the end of the
  <a href="#input-stream">input stream</a> is reached when an <dfn id="explicit-eof-character">explicit "EOF"
  character</dfn> (inserted by the <code title="dom-document-close"><a href="dynamic-markup-insertion.html#dom-document-close">document.close()</a></code> method) is
  consumed. Otherwise, the "EOF" character is not a real character in
  the stream, but rather the lack of any further characters.</p>

  </div>


  <div class="impl">

  <h4 id="parse-state"><span class="secno">8.2.3 </span>Parse state</h4>

  <h5 id="the-insertion-mode"><span class="secno">8.2.3.1 </span>The insertion mode</h5>

  <p>The <dfn id="insertion-mode">insertion mode</dfn> is a state variable that controls
  the primary operation of the tree construction stage.</p>

  <p>Initially, the <a href="#insertion-mode">insertion mode</a> is "<a href="#the-initial-insertion-mode" title="insertion mode: initial">initial</a>". It can change to
  "<a href="#the-before-html-insertion-mode" title="insertion mode: before html">before html</a>",
  "<a href="#the-before-head-insertion-mode" title="insertion mode: before head">before head</a>",
  "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>", "<a href="#parsing-main-inheadnoscript" title="insertion mode: in head noscript">in head noscript</a>",
  "<a href="#the-after-head-insertion-mode" title="insertion mode: after head">after head</a>", "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>", "<a href="#parsing-main-incdata" title="insertion mode: text">text</a>", "<a href="#parsing-main-intable" title="insertion
  mode: in table">in table</a>", "<a href="#parsing-main-intabletext" title="insertion mode: in
  table text">in table text</a>", "<a href="#parsing-main-incaption" title="insertion mode: in
  caption">in caption</a>", "<a href="#parsing-main-incolgroup" title="insertion mode: in column
  group">in column group</a>", "<a href="#parsing-main-intbody" title="insertion mode: in
  table body">in table body</a>", "<a href="#parsing-main-intr" title="insertion mode: in
  row">in row</a>", "<a href="#parsing-main-intd" title="insertion mode: in cell">in
  cell</a>", "<a href="#parsing-main-inselect" title="insertion mode: in select">in
  select</a>", "<a href="#parsing-main-inselectintable" title="insertion mode: in select in table">in
  select in table</a>", "<a href="#parsing-main-afterbody" title="insertion mode: after
  body">after body</a>", "<a href="#parsing-main-inframeset" title="insertion mode: in
  frameset">in frameset</a>", "<a href="#parsing-main-afterframeset" title="insertion mode: after
  frameset">after frameset</a>", "<a href="#the-after-after-body-insertion-mode" title="insertion mode:
  after after body">after after body</a>", and "<a href="#the-after-after-frameset-insertion-mode" title="insertion mode: after after frameset">after after
  frameset</a>" during the course of the parsing, as described in
  the <a href="#tree-construction">tree construction</a> stage. The insertion mode affects
  how tokens are processed and whether CDATA sections are
  supported.</p>

  <p>Several of these modes, namely "<a href="#parsing-main-inhead" title="insertion mode: in
  head">in head</a>", "<a href="#parsing-main-inbody" title="insertion mode: in body">in
  body</a>", "<a href="#parsing-main-intable" title="insertion mode: in table">in
  table</a>", and "<a href="#parsing-main-inselect" title="insertion mode: in select">in
  select</a>", are special, in that the other modes defer to them
  at various times. When the algorithm below says that the user agent
  is to do something "<dfn id="using-the-rules-for">using the rules for</dfn> the <var title="">m</var> insertion mode", where <var title="">m</var> is one
  of these modes, the user agent must use the rules described under
  the <var title="">m</var> <a href="#insertion-mode">insertion mode</a>'s section, but
  must leave the <a href="#insertion-mode">insertion mode</a> unchanged unless the
  rules in <var title="">m</var> themselves switch the <a href="#insertion-mode">insertion
  mode</a> to a new value.</p>

  <p>When the insertion mode is switched to "<a href="#parsing-main-incdata" title="insertion
  mode: text">text</a>" or "<a href="#parsing-main-intabletext" title="insertion mode: in table
  text">in table text</a>", the <dfn id="original-insertion-mode">original insertion mode</dfn>
  is also set. This is the insertion mode to which the tree
  construction stage will return.</p>

  <hr><p>When the steps below require the UA to <dfn id="reset-the-insertion-mode-appropriately">reset the insertion
  mode appropriately</dfn>, it means the UA must follow these
  steps:</p>

  <ol><li>Let <var title="">last</var> be false.</li>

   <li>Let <var title="">node</var> be the last node in the
   <a href="#stack-of-open-elements">stack of open elements</a>.</li>

   <li><i>Loop</i>: If <var title="">node</var> is the first node in
   the stack of open elements, then set <var title="">last</var> to
   true and set <var title="">node</var> to the <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element.
   (<a href="#fragment-case">fragment case</a>)</li>

   <li>If <var title="">node</var> is a <code><a href="the-select-element.html#the-select-element">select</a></code> element,
   then switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inselect" title="insertion mode: in select">in select</a>" and abort these
   steps. (<a href="#fragment-case">fragment case</a>)</li>

   <li>If <var title="">node</var> is a <code><a href="the-td-element.html#the-td-element">td</a></code> or
   <code><a href="the-th-element.html#the-th-element">th</a></code> element and <var title="">last</var> is false, then
   switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intd" title="insertion
   mode: in cell">in cell</a>" and abort these steps.</li>

   <li>If <var title="">node</var> is a <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element, then
   switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intr" title="insertion
   mode: in row">in row</a>" and abort these steps.</li>

   <li>If <var title="">node</var> is a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>,
   <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, or <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> element, then switch the
   <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intbody" title="insertion mode: in
   table body">in table body</a>" and abort these steps.</li>

   <li>If <var title="">node</var> is a <code><a href="the-caption-element.html#the-caption-element">caption</a></code> element,
   then switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-incaption" title="insertion mode: in caption">in caption</a>" and abort
   these steps.</li>

   <li>If <var title="">node</var> is a <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code> element,
   then switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-incolgroup" title="insertion mode: in column group">in column group</a>" and
   abort these steps. (<a href="#fragment-case">fragment case</a>)</li>

   <li>If <var title="">node</var> is a <code><a href="the-table-element.html#the-table-element">table</a></code> element,
   then switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>" and abort these
   steps.</li>

   <li>If <var title="">node</var> is a <code><a href="the-head-element.html#the-head-element">head</a></code> element,
   then switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" ("<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>"! <em> not "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>"</em>!) and abort
   these steps. (<a href="#fragment-case">fragment case</a>)</li> <!-- This is only
   here for now in case people think that the spec accidentally
   omitted it and try to "fix" it. Note that noscript-in-head is also
   handled this way. This is all intentional. The only thing it
   doesn't handle is the scripting-disabled fragment parsing case for
   a <head> element containing a <noscript> which itself contains
   something other than a <link> or a <style> element; you'd expect
   that to break out of the <noscript> but it doesn't. This is an edge
   case that doesn't affect the spec, since the algorithm for fragment
   parsing is only used for innerHTML/outerHTML/insertAdjacentHTML(),
   where we know scripting is enabled. -->

   <li>If <var title="">node</var> is a <code><a href="the-body-element.html#the-body-element">body</a></code> element,
   then switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" and abort these
   steps.</li>

   <li>If <var title="">node</var> is a <code><a href="#frameset">frameset</a></code> element,
   then switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inframeset" title="insertion mode: in frameset">in frameset</a>" and abort
   these steps. (<a href="#fragment-case">fragment case</a>)</li>

   <li>If <var title="">node</var> is an <code><a href="the-html-element.html#the-html-element">html</a></code> element,
   then <!--: if the <span><code title="">head</code> element
   pointer</span> is null,--> switch the <a href="#insertion-mode">insertion mode</a>
   to "<a href="#the-before-head-insertion-mode" title="insertion mode: before head">before
   head</a>"<!--, otherwise, switch the <span>insertion mode</span>
   to "<span title="insertion mode: after head">after head</span>".-->
   Then, <!-- in either case, --> abort these steps. (<a href="#fragment-case">fragment
   case</a>)</li> <!-- if the head element pointer can ever be
   non-null when we're going through these steps, we'll need to
   uncomment out the commented-out bits -->

   <li>If <var title="">last</var> is true, then switch the
   <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inbody" title="insertion mode: in
   body">in body</a>" and abort these steps. (<a href="#fragment-case">fragment
   case</a>)</li>

   <li>Let <var title="">node</var> now be the node before <var title="">node</var> in the <a href="#stack-of-open-elements">stack of open
   elements</a>.</li>

   <li>Return to the step labeled <i>loop</i>.</li>

  </ol><h5 id="the-stack-of-open-elements"><span class="secno">8.2.3.2 </span>The stack of open elements</h5>

  <p>Initially, the <dfn id="stack-of-open-elements">stack of open elements</dfn> is empty. The
  stack grows downwards; the topmost node on the stack is the first
  one added to the stack, and the bottommost node of the stack is the
  most recently added node in the stack (notwithstanding when the
  stack is manipulated in a random access fashion as part of <a href="#adoptionAgency">the handling for misnested tags</a>).</p>

  <p>The "<a href="#the-before-html-insertion-mode" title="insertion mode: before html">before
  html</a>" <a href="#insertion-mode">insertion mode</a> creates the
  <code><a href="the-html-element.html#the-html-element">html</a></code> root element node, which is then added to the
  stack.</p>

  <p>In the <a href="#fragment-case">fragment case</a>, the <a href="#stack-of-open-elements">stack of open
  elements</a> is initialized to contain an <code><a href="the-html-element.html#the-html-element">html</a></code>
  element that is created as part of <a href="#html-fragment-parsing-algorithm" title="html fragment
  parsing algorithm">that algorithm</a>. (The <a href="#fragment-case">fragment
  case</a> skips the "<a href="#the-before-html-insertion-mode" title="insertion mode: before
  html">before html</a>" <a href="#insertion-mode">insertion mode</a>.)</p>

  <p>The <code><a href="the-html-element.html#the-html-element">html</a></code> node, however it is created, is the topmost
  node of the stack. It only gets popped off the stack when the parser
  <a href="#stop-parsing" title="stop parsing">finishes</a>.</p>

  <p>The <dfn id="current-node">current node</dfn> is the bottommost node in this
  stack.</p>

  <p>The <dfn id="current-table">current table</dfn> is the last <code><a href="the-table-element.html#the-table-element">table</a></code>
  element in the <a href="#stack-of-open-elements">stack of open elements</a>, if there is
  one. If there is no <code><a href="the-table-element.html#the-table-element">table</a></code> element in the <a href="#stack-of-open-elements">stack of
  open elements</a> (<a href="#fragment-case">fragment case</a>), then the
  <a href="#current-table">current table</a> is the first element in the <a href="#stack-of-open-elements">stack
  of open elements</a> (the <code><a href="the-html-element.html#the-html-element">html</a></code> element).</p>

  <p>Elements in the stack fall into the following categories:</p>

  <dl><dt><dfn id="special">Special</dfn></dt>
   <dd><p>The following elements have varying levels of special
   parsing rules: HTML's <code><a href="the-address-element.html#the-address-element">address</a></code>, <code><a href="#the-applet-element">applet</a></code>,
   <code><a href="the-area-element.html#the-area-element">area</a></code>, <code><a href="the-article-element.html#the-article-element">article</a></code>, <code><a href="the-aside-element.html#the-aside-element">aside</a></code>,
   <code><a href="the-base-element.html#the-base-element">base</a></code>, <code><a href="#basefont">basefont</a></code>, <code><a href="#bgsound">bgsound</a></code>,
   <code><a href="the-blockquote-element.html#the-blockquote-element">blockquote</a></code>, <code><a href="the-body-element.html#the-body-element">body</a></code>, <code><a href="the-br-element.html#the-br-element">br</a></code>,
   <code><a href="the-button-element.html#the-button-element">button</a></code>, <code><a href="the-caption-element.html#the-caption-element">caption</a></code>, <code><a href="#center">center</a></code>,
   <code><a href="the-col-element.html#the-col-element">col</a></code>, <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code>, <code><a href="#the-command-element">command</a></code>,
   <code><a href="the-dd-element.html#the-dd-element">dd</a></code>, <code><a href="#the-details-element">details</a></code>, <code><a href="#dir">dir</a></code>,
   <code><a href="the-div-element.html#the-div-element">div</a></code>, <code><a href="the-dl-element.html#the-dl-element">dl</a></code>, <code><a href="the-dt-element.html#the-dt-element">dt</a></code>,
   <code><a href="the-embed-element.html#the-embed-element">embed</a></code>, <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>, <code><a href="the-figcaption-element.html#the-figcaption-element">figcaption</a></code>,
   <code><a href="the-figure-element.html#the-figure-element">figure</a></code>, <code><a href="the-footer-element.html#the-footer-element">footer</a></code>, <code><a href="the-form-element.html#the-form-element">form</a></code>,
   <code><a href="#frame">frame</a></code>, <code><a href="#frameset">frameset</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>,
   <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h3</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h4</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h5</a></code>,
   <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code>, <code><a href="the-head-element.html#the-head-element">head</a></code>, <code><a href="the-header-element.html#the-header-element">header</a></code>,
   <code><a href="the-hgroup-element.html#the-hgroup-element">hgroup</a></code>, <code><a href="the-hr-element.html#the-hr-element">hr</a></code>, <code><a href="the-html-element.html#the-html-element">html</a></code>,
   <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, <!-- <code>image</code>, (commented out
   because this isn't an element that can end up on the stack, so it
   doesn't matter) --> <code><a href="the-img-element.html#the-img-element">img</a></code>, <code><a href="the-input-element.html#the-input-element">input</a></code>,
   <code><a href="#isindex-0">isindex</a></code>, <code><a href="the-li-element.html#the-li-element">li</a></code>, <code><a href="the-link-element.html#the-link-element">link</a></code>,
   <code><a href="#listing">listing</a></code>, <code><a href="#the-marquee-element-0">marquee</a></code>, <code><a href="#the-menu-element">menu</a></code>,
   <code><a href="the-meta-element.html#the-meta-element">meta</a></code>, <code><a href="the-nav-element.html#the-nav-element">nav</a></code>, <code><a href="#noembed">noembed</a></code>,
   <code><a href="#noframes">noframes</a></code>, <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code>, <code><a href="the-object-element.html#the-object-element">object</a></code>,
   <code><a href="the-ol-element.html#the-ol-element">ol</a></code>, <code><a href="the-p-element.html#the-p-element">p</a></code>, <code><a href="the-param-element.html#the-param-element">param</a></code>,
   <code><a href="#plaintext">plaintext</a></code>, <code><a href="the-pre-element.html#the-pre-element">pre</a></code>, <code><a href="the-script-element.html#the-script-element">script</a></code>,
   <code><a href="the-section-element.html#the-section-element">section</a></code>, <code><a href="the-select-element.html#the-select-element">select</a></code>, <code><a href="the-source-element.html#the-source-element">source</a></code>,
   <code><a href="the-style-element.html#the-style-element">style</a></code>, <code><a href="#the-summary-element">summary</a></code>, <code><a href="the-table-element.html#the-table-element">table</a></code>,
   <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-td-element.html#the-td-element">td</a></code>, <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>,
   <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-th-element.html#the-th-element">th</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>,
   <code><a href="the-title-element.html#the-title-element">title</a></code>, <code><a href="the-tr-element.html#the-tr-element">tr</a></code>, <code><a href="the-track-element.html#the-track-element">track</a></code>,
   <code><a href="the-ul-element.html#the-ul-element">ul</a></code>, <code><a href="the-wbr-element.html#the-wbr-element">wbr</a></code>, and <code><a href="#xmp">xmp</a></code>; MathML's
   <code title="">mi</code>, <code title="">mo</code>, <code title="">mn</code>, <code title="">ms</code>, <code title="">mtext</code>, and <code title="">annotation-xml</code>;
   and SVG's <code title="">foreignObject</code>, <code title="">desc</code>, and <code title="">title</code>.</p></dd>
   <!-- we could actually put all non-HTML elements in this list, I
   think -->

   <dt><dfn id="formatting">Formatting</dfn></dt>
   <dd><p>The following HTML elements are those that end up in the
   <a href="#list-of-active-formatting-elements">list of active formatting elements</a>: <code><a href="the-a-element.html#the-a-element">a</a></code>,
   <code><a href="the-b-element.html#the-b-element">b</a></code>, <code><a href="#big">big</a></code>, <code><a href="the-code-element.html#the-code-element">code</a></code>,
   <code><a href="the-em-element.html#the-em-element">em</a></code>, <code><a href="#font">font</a></code>, <code><a href="the-i-element.html#the-i-element">i</a></code>,
   <code><a href="#nobr">nobr</a></code>, <code><a href="the-s-element.html#the-s-element">s</a></code>, <code><a href="the-small-element.html#the-small-element">small</a></code>,
   <code><a href="#strike">strike</a></code>, <code><a href="the-strong-element.html#the-strong-element">strong</a></code>, <code><a href="#tt">tt</a></code>, and
   <code><a href="the-u-element.html#the-u-element">u</a></code>.</p></dd>

   <dt><dfn id="ordinary">Ordinary</dfn></dt>
   <dd><p>All other elements found while parsing an HTML
   document.</p></dd>

  </dl><p>The <a href="#stack-of-open-elements">stack of open elements</a> is said to <dfn id="has-an-element-in-the-specific-scope" title="has an element in the specific scope">have an element in a
  specific scope</dfn> consisting of a list of element types <var title="">list</var> when the following algorithm terminates in a
  match state:</p>

  <ol><li><p>Initialize <var title="">node</var> to be the <a href="#current-node">current
   node</a> (the bottommost node of the stack).</p></li>

   <li><p>If <var title="">node</var> is the target node, terminate in
   a match state.</p></li>

   <li><p>Otherwise, if <var title="">node</var> is one of the element
   types in <var title="">list</var>, terminate in a failure
   state.</p></li>

   <li><p>Otherwise, set <var title="">node</var> to the previous
   entry in the <a href="#stack-of-open-elements">stack of open elements</a> and return to step
   2. (This will never fail, since the loop will always terminate in
   the previous step if the top of the stack &#8212; an
   <code><a href="the-html-element.html#the-html-element">html</a></code> element &#8212; is reached.)</p></li>

  </ol><p>The <a href="#stack-of-open-elements">stack of open elements</a> is said to <dfn id="has-an-element-in-scope" title="has an element in scope">have an element in scope</dfn> when
  it <a href="#has-an-element-in-the-specific-scope">has an element in the specific scope</a> consisting
  of the following element types:</p>

  <ul class="brief"><li><code><a href="#the-applet-element">applet</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code><a href="the-caption-element.html#the-caption-element">caption</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code><a href="the-html-element.html#the-html-element">html</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li> <!-- (This can only happen if the <var title="">node</var> is the topmost node of the <span>stack of open elements</span>, and prevents the next step from being invoked if there are no more elements in the stack.) -->
   <li><code><a href="the-table-element.html#the-table-element">table</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code><a href="the-td-element.html#the-td-element">td</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code><a href="the-th-element.html#the-th-element">th</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code><a href="#the-marquee-element-0">marquee</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code><a href="the-object-element.html#the-object-element">object</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code title="">mi</code> in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li><code title="">mo</code> in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li><code title="">mn</code> in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li><code title="">ms</code> in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li><code title="">mtext</code> in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li><code title="">annotation-xml</code> in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li><code title="">foreignObject</code> in the <a href="namespaces.html#svg-namespace">SVG namespace</a></li>
   <li><code title="">desc</code> in the <a href="namespaces.html#svg-namespace">SVG namespace</a></li>
   <li><code title="">title</code> in the <a href="namespaces.html#svg-namespace">SVG namespace</a></li>
  </ul><p>The <a href="#stack-of-open-elements">stack of open elements</a> is said to <dfn id="has-an-element-in-list-item-scope" title="has an element in list item scope">have an element in list
  item scope</dfn> when it <a href="#has-an-element-in-the-specific-scope">has an element in the specific
  scope</a> consisting of the following element types:</p>

  <ul class="brief"><li>All the element types listed above for the <i><a href="#has-an-element-in-scope">has an element
   in scope</a></i> algorithm.</li>
   <li><code><a href="the-ol-element.html#the-ol-element">ol</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code><a href="the-ul-element.html#the-ul-element">ul</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
  </ul><p>The <a href="#stack-of-open-elements">stack of open elements</a> is said to <dfn id="has-an-element-in-button-scope" title="has an element in button scope">have an element in button
  scope</dfn> when it <a href="#has-an-element-in-the-specific-scope">has an element in the specific
  scope</a> consisting of the following element types:</p>

  <ul class="brief"><li>All the element types listed above for the <i><a href="#has-an-element-in-scope">has an element
   in scope</a></i> algorithm.</li>
   <li><code><a href="the-button-element.html#the-button-element">button</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
  </ul><p>The <a href="#stack-of-open-elements">stack of open elements</a> is said to <dfn id="has-an-element-in-table-scope" title="has an element in table scope">have an element in table
  scope</dfn> when it <a href="#has-an-element-in-the-specific-scope">has an element in the specific
  scope</a> consisting of the following element types:</p>

  <ul class="brief"><li><code><a href="the-html-element.html#the-html-element">html</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li> <!-- (This can only happen if the <var title="">node</var> is the topmost node of the <span>stack of open elements</span>, and prevents the next step from being invoked if there are no more elements in the stack.) -->
   <li><code><a href="the-table-element.html#the-table-element">table</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
  </ul><p>The <a href="#stack-of-open-elements">stack of open elements</a> is said to <dfn id="has-an-element-in-select-scope" title="has an element in select scope">have an element in select
  scope</dfn> when it <a href="#has-an-element-in-the-specific-scope">has an element in the specific
  scope</a> consisting of all element types <em>except</em> the
  following:</p>

  <ul class="brief"><!--<li><code>select</code> in the <span>HTML namespace</span></li>--><li><code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
   <li><code><a href="the-option-element.html#the-option-element">option</a></code> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></li>
  </ul><p>Nothing happens if at any time any of the elements in the
  <a href="#stack-of-open-elements">stack of open elements</a> are moved to a new location in,
  or removed from, the <code><a href="dom.html#document">Document</a></code> tree. In particular, the
  stack is not changed in this situation. This can cause, amongst
  other strange effects, content to be appended to nodes that are no
  longer in the DOM.</p>

  <p class="note">In some cases (namely, when <a href="#adoptionAgency">closing misnested formatting elements</a>),
  the stack is manipulated in a random-access fashion.</p>


  <h5 id="the-list-of-active-formatting-elements"><span class="secno">8.2.3.3 </span>The list of active formatting elements</h5>

  <p>Initially, the <dfn id="list-of-active-formatting-elements">list of active formatting elements</dfn> is
  empty. It is used to handle mis-nested <a href="#formatting" title="formatting">formatting element tags</a>.</p>

  <p>The list contains elements in the <a href="#formatting">formatting</a>
  category, and scope markers. The scope markers are inserted when
  entering <code><a href="#the-applet-element">applet</a></code> elements, buttons, <code><a href="the-object-element.html#the-object-element">object</a></code>
  elements, marquees, table cells, and table captions, and are used to
  prevent formatting from "leaking" <em>into</em> <code><a href="#the-applet-element">applet</a></code>
  elements, buttons, <code><a href="the-object-element.html#the-object-element">object</a></code> elements, marquees, and
  tables.</p>

  <p class="note">The scope markers are unrelated to the concept of an
  element being <a href="#has-an-element-in-scope" title="has an element in scope">in
  scope</a>.</p>

  <p>In addition, each element in the <a href="#list-of-active-formatting-elements">list of active formatting
  elements</a> is associated with the token for which it was
  created, so that further elements can be created for that token if
  necessary.</p>

  <p>When the steps below require the UA to <dfn id="push-onto-the-list-of-active-formatting-elements">push onto the list of
  active formatting elements</dfn> an element <var title="">element</var>, the UA must perform the following steps:</p>

  <ol><li><p>If there are already three elements in the <a href="#list-of-active-formatting-elements">list of
   active formatting elements</a> after the last list marker, if
   any, or anywhere in the list if there are no list markers, that
   have the same tag name, namespace, and attributes as <var title="">element</var>, then remove the earliest such element from
   the <a href="#list-of-active-formatting-elements">list of active formatting elements</a>. For these
   purposes, the attributes must be compared as they were when the
   elements were created by the parser; two elements have the same
   attributes if all their parsed attributes can be paired such that
   the two attributes in each pair have identical names, namespaces,
   and values (the order of the attributes does not matter).</p>

   <p class="note">This is the Noah's Ark clause. But with three per
   family instead of two.</p></li> <!-- A sort of polyamorous Noah's
   Ark, if you will. -->

   <li><p>Add <var title="">element</var> to the <a href="#list-of-active-formatting-elements">list of active
   formatting elements</a>.</p></li>

  </ol><p>When the steps below require the UA to <dfn id="reconstruct-the-active-formatting-elements">reconstruct the
  active formatting elements</dfn>, the UA must perform the following
  steps:</p>

  <ol><li>If there are no entries in the <a href="#list-of-active-formatting-elements">list of active formatting
   elements</a>, then there is nothing to reconstruct; stop this
   algorithm.</li>

   <li>If the last (most recently added) entry in the <a href="#list-of-active-formatting-elements">list of
   active formatting elements</a> is a marker, or if it is an
   element that is in the <a href="#stack-of-open-elements">stack of open elements</a>, then
   there is nothing to reconstruct; stop this algorithm.</li>

   <li>Let <var title="">entry</var> be the last (most recently added)
   element in the <a href="#list-of-active-formatting-elements">list of active formatting
   elements</a>.</li>

   <li>If there are no entries before <var title="">entry</var> in the
   <a href="#list-of-active-formatting-elements">list of active formatting elements</a>, then jump to step
   8.</li>

   <li>Let <var title="">entry</var> be the entry one earlier than
   <var title="">entry</var> in the <a href="#list-of-active-formatting-elements">list of active formatting
   elements</a>.</li>

   <li>If <var title="">entry</var> is neither a marker nor an element
   that is also in the <a href="#stack-of-open-elements">stack of open elements</a>, go to step
   4.</li>

   <li>Let <var title="">entry</var> be the element one later than
   <var title="">entry</var> in the <a href="#list-of-active-formatting-elements">list of active formatting
   elements</a>.</li>

   <li><a href="#create-an-element-for-the-token">Create an element for the token</a> for which the
   element <var title="">entry</var> was created, to obtain <var title="">new element</var>.</li>

   <li>Append <var title="">new element</var> to the <a href="#current-node">current
   node</a> and push it onto the <a href="#stack-of-open-elements">stack of open
   elements</a> so that it is the new <a href="#current-node">current
   node</a>.</li>

   <li>Replace the entry for <var title="">entry</var> in the list
   with an entry for <var title="">new element</var>.</li>

   <li>If the entry for <var title="">new element</var> in the
   <a href="#list-of-active-formatting-elements">list of active formatting elements</a> is not the last
   entry in the list, return to step 7.</li>

  </ol><p>This has the effect of reopening all the formatting elements that
  were opened in the current body, cell, or caption (whichever is
  youngest) that haven't been explicitly closed.</p>

  <p class="note">The way this specification is written, the
  <a href="#list-of-active-formatting-elements">list of active formatting elements</a> always consists of
  elements in chronological order with the least recently added
  element first and the most recently added element last (except for
  while steps 8 to 11 of the above algorithm are being executed, of
  course).</p>

  <p>When the steps below require the UA to <dfn id="clear-the-list-of-active-formatting-elements-up-to-the-last-marker">clear the list of
  active formatting elements up to the last marker</dfn>, the UA must
  perform the following steps:</p>

  <ol><li>Let <var title="">entry</var> be the last (most recently added)
   entry in the <a href="#list-of-active-formatting-elements">list of active formatting elements</a>.</li>

   <li>Remove <var title="">entry</var> from the <a href="#list-of-active-formatting-elements">list of active
   formatting elements</a>.</li>

   <li>If <var title="">entry</var> was a marker, then stop the
   algorithm at this point. The list has been cleared up to the last
   marker.</li>

   <li>Go to step 1.</li>

  </ol><h5 id="the-element-pointers"><span class="secno">8.2.3.4 </span>The element pointers</h5>

  <p>Initially, the <dfn id="head-element-pointer"><code title="">head</code> element
  pointer</dfn> and the <dfn id="form-element-pointer"><code title="">form</code> element
  pointer</dfn> are both null.</p>

  <p>Once a <code><a href="the-head-element.html#the-head-element">head</a></code> element has been parsed (whether
  implicitly or explicitly) the <a href="#head-element-pointer"><code title="">head</code>
  element pointer</a> gets set to point to this node.</p>

  <p>The <a href="#form-element-pointer"><code title="">form</code> element pointer</a>
  points to the last <code><a href="the-form-element.html#the-form-element">form</a></code> element that was opened and
  whose end tag has not yet been seen. It is used to make form
  controls associate with forms in the face of dramatically bad
  markup, for historical reasons.</p>


  <h5 id="other-parsing-state-flags"><span class="secno">8.2.3.5 </span>Other parsing state flags</h5>

  <p>The <dfn id="scripting-flag">scripting flag</dfn> is set to "enabled" if <a href="#concept-n-script" title="concept-n-script">scripting was enabled</a> for the
  <code><a href="dom.html#document">Document</a></code> with which the parser is associated when the
  parser was created, and "disabled" otherwise.</p>

  <p class="note">The <a href="#scripting-flag">scripting flag</a> can be enabled even
  when the parser was originally created for the <a href="#html-fragment-parsing-algorithm">HTML fragment
  parsing algorithm</a>, even though <code><a href="the-script-element.html#the-script-element">script</a></code> elements
  don't execute in that case.</p>

  <p>The <dfn id="frameset-ok-flag">frameset-ok flag</dfn> is set to "ok" when the parser is
  created. It is set to "not ok" after certain tokens are seen.</p>

  </div>


  <div class="impl">

  <h4 id="tokenization"><span class="secno">8.2.4 </span><dfn>Tokenization</dfn></h4>

  <p>Implementations must act as if they used the following state
  machine to tokenize HTML. The state machine must start in the
  <a href="#data-state">data state</a>. Most states consume a single character,
  which may have various side-effects, and either switches the state
  machine to a new state to <i>reconsume</i> the same character, or
  switches it to a new state to consume the next character, or stays
  in the same state to consume the next character. Some states have
  more complicated behavior and can consume several characters before
  switching to another state. In some cases, the tokenizer state is
  also changed by the tree construction stage.</p>

  <p>The exact behavior of certain states depends on the
  <a href="#insertion-mode">insertion mode</a> and the <a href="#stack-of-open-elements">stack of open
  elements</a>. Certain states also use a <dfn id="temporary-buffer"><var>temporary
  buffer</var></dfn> to track progress.</p>

  <p>The output of the tokenization step is a series of zero or more
  of the following tokens: DOCTYPE, start tag, end tag, comment,
  character, end-of-file. DOCTYPE tokens have a name, a public
  identifier, a system identifier, and a <i>force-quirks
  flag</i>. When a DOCTYPE token is created, its name, public
  identifier, and system identifier must be marked as missing (which
  is a distinct state from the empty string), and the <i>force-quirks
  flag</i> must be set to <i>off</i> (its other state is
  <i>on</i>). Start and end tag tokens have a tag name, a
  <i>self-closing flag</i>, and a list of attributes, each of which
  has a name and a value. When a start or end tag token is created,
  its <i>self-closing flag</i> must be unset (its other state is that
  it be set), and its attributes list must be empty. Comment and
  character tokens have data.</p>

  <p>When a token is emitted, it must immediately be handled by the
  <a href="#tree-construction">tree construction</a> stage. The tree construction stage
  can affect the state of the tokenization stage, and can insert
  additional characters into the stream. (For example, the
  <code><a href="the-script-element.html#the-script-element">script</a></code> element can result in scripts executing and
  using the <a href="dynamic-markup-insertion.html#dynamic-markup-insertion">dynamic markup insertion</a> APIs to insert
  characters into the stream being tokenized.)</p>

  <p>When a start tag token is emitted with its <i>self-closing
  flag</i> set, if the flag is not <dfn id="acknowledge-self-closing-flag" title="acknowledge
  self-closing flag">acknowledged</dfn> when it is processed by the
  tree construction stage, that is a <a href="#parse-error">parse error</a>.</p>

  <p>When an end tag token is emitted with attributes, that is a
  <a href="#parse-error">parse error</a>.</p>

  <p>When an end tag token is emitted with its <i>self-closing
  flag</i> set, that is a <a href="#parse-error">parse error</a>.</p>

  <p>An <dfn id="appropriate-end-tag-token">appropriate end tag token</dfn> is an end tag token whose
  tag name matches the tag name of the last start tag to have been
  emitted from this tokenizer, if any. If no start tag has been
  emitted from this tokenizer, then no end tag token is
  appropriate.</p>

  <p>Before each step of the tokenizer, the user agent must first
  check the <a href="#parser-pause-flag">parser pause flag</a>. If it is true, then the
  tokenizer must abort the processing of any nested invocations of the
  tokenizer, yielding control back to the caller.</p>

  <p>The tokenizer state machine consists of the states defined in the
  following subsections.</p>


  <!-- Order of the lists below is supposed to be non-error then
  error, by unicode, then EOF, ending with "anything else" -->


  <h5 id="data-state"><span class="secno">8.2.4.1 </span><dfn>Data state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0026 AMPERSAND (&amp;)</dt>
   <dd>Switch to the <a href="#character-reference-in-data-state">character reference in data
   state</a>.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#tag-open-state">tag open state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Emit the <a href="#current-input-character">current input
   character</a> as a character token.</dd>

   <dt>EOF</dt>
   <dd>Emit an end-of-file token.</dd>

   <dt>Anything else</dt>
   <dd>Emit the <a href="#current-input-character">current input character</a> as a character
   token.</dd>

  </dl><h5 id="character-reference-in-data-state"><span class="secno">8.2.4.2 </span><dfn>Character reference in data state</dfn></h5>

  <p>Switch to the <a href="#data-state">data state</a>.</p>

  <p>Attempt to <a href="#consume-a-character-reference">consume a character reference</a>, with no
  <a href="#additional-allowed-character">additional allowed character</a>.</p>

  <p>If nothing is returned, emit a U+0026 AMPERSAND character (&amp;)
  token.</p>

  <p>Otherwise, emit the character tokens that were returned.</p>


  <h5 id="rcdata-state"><span class="secno">8.2.4.3 </span><dfn>RCDATA state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0026 AMPERSAND (&amp;)</dt>
   <dd>Switch to the <a href="#character-reference-in-rcdata-state">character reference in RCDATA
   state</a>.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#rcdata-less-than-sign-state">RCDATA less-than sign state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Emit a U+FFFD REPLACEMENT CHARACTER
   character token.</dd>

   <dt>EOF</dt>
   <dd>Emit an end-of-file token.</dd>

   <dt>Anything else</dt>
   <dd>Emit the <a href="#current-input-character">current input character</a> as a character
   token.</dd>

  </dl><h5 id="character-reference-in-rcdata-state"><span class="secno">8.2.4.4 </span><dfn>Character reference in RCDATA state</dfn></h5>

  <p>Switch to the <a href="#rcdata-state">RCDATA state</a>.</p>

  <p>Attempt to <a href="#consume-a-character-reference">consume a character reference</a>, with no
  <a href="#additional-allowed-character">additional allowed character</a>.</p>

  <p>If nothing is returned, emit a U+0026 AMPERSAND character (&amp;)
  token.</p>

  <p>Otherwise, emit the character tokens that were returned.</p>


  <h5 id="rawtext-state"><span class="secno">8.2.4.5 </span><dfn>RAWTEXT state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#rawtext-less-than-sign-state">RAWTEXT less-than sign state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Emit a U+FFFD REPLACEMENT CHARACTER
   character token.</dd>

   <dt>EOF</dt>
   <dd>Emit an end-of-file token.</dd>

   <dt>Anything else</dt>
   <dd>Emit the <a href="#current-input-character">current input character</a> as a character
   token.</dd>

  </dl><h5 id="script-data-state"><span class="secno">8.2.4.6 </span><dfn>Script data state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#script-data-less-than-sign-state">script data less-than sign state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Emit a U+FFFD REPLACEMENT CHARACTER
   character token.</dd>

   <dt>EOF</dt>
   <dd>Emit an end-of-file token.</dd>

   <dt>Anything else</dt>
   <dd>Emit the <a href="#current-input-character">current input character</a> as a character
   token.</dd>

  </dl><h5 id="plaintext-state"><span class="secno">8.2.4.7 </span><dfn>PLAINTEXT state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Emit a U+FFFD REPLACEMENT CHARACTER
   character token.</dd>

   <dt>EOF</dt>
   <dd>Emit an end-of-file token.</dd>

   <dt>Anything else</dt>
   <dd>Emit the <a href="#current-input-character">current input character</a> as a character
   token.</dd>

  </dl><h5 id="tag-open-state"><span class="secno">8.2.4.8 </span><dfn>Tag open state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"!" (U+0021)</dt>
   <dd>Switch to the <a href="#markup-declaration-open-state">markup declaration open state</a>.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>Switch to the <a href="#end-tag-open-state">end tag open state</a>.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Create a new start tag token, set its tag name to the
   lowercase version of the <a href="#current-input-character">current input character</a> (add 0x0020 to the
   character's code point), then switch to the <a href="#tag-name-state">tag name
   state</a>. (Don't emit the token yet; further details will
   be filled in before it is emitted.)</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Create a new start tag token, set its tag name to the
   <a href="#current-input-character">current input character</a>, then switch to the <a href="#tag-name-state">tag
   name state</a>. (Don't emit the token yet; further details will
   be filled in before it is emitted.)</dd>

   <dt>"?" (U+003F)</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#bogus-comment-state">bogus
   comment state</a>.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit a U+003C LESS-THAN SIGN character token.
   Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="end-tag-open-state"><span class="secno">8.2.4.9 </span><dfn>End tag open state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Create a new end tag token, set its tag name to the lowercase
   version of the <a href="#current-input-character">current input character</a> (add 0x0020 to
   the character's code point), then switch to the <a href="#tag-name-state">tag name
   state</a>. (Don't emit the token yet; further details will be
   filled in before it is emitted.)</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Create a new end tag token, set its tag name to the
   <a href="#current-input-character">current input character</a>, then switch to the <a href="#tag-name-state">tag
   name state</a>. (Don't emit the token yet; further details will
   be filled in before it is emitted.)</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit a U+003C LESS-THAN SIGN character token and a
   U+002F SOLIDUS character token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#bogus-comment-state">bogus
   comment state</a>.</dd>

  </dl><h5 id="tag-name-state"><span class="secno">8.2.4.10 </span><dfn>Tag name state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#before-attribute-name-state">before attribute name state</a>.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>Switch to the <a href="#self-closing-start-tag-state">self-closing start tag state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current tag
   token.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   current tag token's tag name.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current tag token's tag name.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   tag token's tag name.</dd>

  </dl><h5 id="rcdata-less-than-sign-state"><span class="secno">8.2.4.11 </span><dfn>RCDATA less-than sign state</dfn></h5>
  <!-- identical to the RAWTEXT less-than sign state, except s/RAWTEXT/RCDATA/g -->

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"/" (U+002F)</dt>
   <dd>Set the <var><a href="#temporary-buffer">temporary buffer</a></var> to the empty string. Switch
   to the <a href="#rcdata-end-tag-open-state">RCDATA end tag open state</a>.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#rcdata-state">RCDATA state</a>. Emit a U+003C
   LESS-THAN SIGN character token. Reconsume the <a href="#current-input-character">current
   input character</a>.</dd>

  </dl><h5 id="rcdata-end-tag-open-state"><span class="secno">8.2.4.12 </span><dfn>RCDATA end tag open state</dfn></h5>
  <!-- identical to the RAWTEXT (and Script data) end tag open state, except s/RAWTEXT/RCDATA/g -->

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Create a new end tag token, and set its tag name to the
   lowercase version of the <a href="#current-input-character">current input character</a> (add
   0x0020 to the character's code point). Append the <a href="#current-input-character">current
   input character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>. Finally,
   switch to the <a href="#rcdata-end-tag-name-state">RCDATA end tag name state</a>. (Don't emit
   the token yet; further details will be filled in before it is
   emitted.)</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Create a new end tag token, and set its tag name to the
   <a href="#current-input-character">current input character</a>. Append the <a href="#current-input-character">current
   input character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>. Finally,
   switch to the <a href="#rcdata-end-tag-name-state">RCDATA end tag name state</a>. (Don't emit
   the token yet; further details will be filled in before it is
   emitted.)</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#rcdata-state">RCDATA state</a>. Emit a U+003C
   LESS-THAN SIGN character token and a U+002F SOLIDUS character token.
   Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="rcdata-end-tag-name-state"><span class="secno">8.2.4.13 </span><dfn>RCDATA end tag name state</dfn></h5>
  <!-- identical to the RAWTEXT (and Script data) end tag name state, except s/RAWTEXT/RCDATA/g -->

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#before-attribute-name-state">before attribute name
   state</a>. Otherwise, treat it as per the "anything else" entry
   below.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#self-closing-start-tag-state">self-closing start tag
   state</a>. Otherwise, treat it as per the "anything else" entry
   below.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#data-state">data state</a> and emit
   the current tag token. Otherwise, treat it as per the "anything
   else" entry below.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   current tag token's tag name. Append the <a href="#current-input-character">current input
   character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>.</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   tag token's tag name. Append the <a href="#current-input-character">current input
   character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#rcdata-state">RCDATA state</a>. Emit a U+003C
   LESS-THAN SIGN character token, a U+002F SOLIDUS character token,
   and a character token for each of the characters in the
   <var><a href="#temporary-buffer">temporary buffer</a></var> (in the order they were added to the
   buffer). Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="rawtext-less-than-sign-state"><span class="secno">8.2.4.14 </span><dfn>RAWTEXT less-than sign state</dfn></h5>
  <!-- identical to the RCDATA less-than sign state, except s/RCDATA/RAWTEXT/g -->

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"/" (U+002F)</dt>
   <dd>Set the <var><a href="#temporary-buffer">temporary buffer</a></var> to the empty string. Switch
   to the <a href="#rawtext-end-tag-open-state">RAWTEXT end tag open state</a>.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#rawtext-state">RAWTEXT state</a>. Emit a U+003C
   LESS-THAN SIGN character token. Reconsume the <a href="#current-input-character">current
   input character</a>.</dd>

  </dl><h5 id="rawtext-end-tag-open-state"><span class="secno">8.2.4.15 </span><dfn>RAWTEXT end tag open state</dfn></h5>
  <!-- identical to the RCDATA (and Script data) end tag open state, except s/RCDATA/RAWTEXT/g -->

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Create a new end tag token, and set its tag name to the
   lowercase version of the <a href="#current-input-character">current input character</a> (add
   0x0020 to the character's code point). Append the <a href="#current-input-character">current
   input character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>. Finally,
   switch to the <a href="#rawtext-end-tag-name-state">RAWTEXT end tag name state</a>. (Don't emit
   the token yet; further details will be filled in before it is
   emitted.)</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Create a new end tag token, and set its tag name to the
   <a href="#current-input-character">current input character</a>. Append the <a href="#current-input-character">current
   input character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>. Finally,
   switch to the <a href="#rawtext-end-tag-name-state">RAWTEXT end tag name state</a>. (Don't emit
   the token yet; further details will be filled in before it is
   emitted.)</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#rawtext-state">RAWTEXT state</a>. Emit a U+003C
   LESS-THAN SIGN character token and a U+002F SOLIDUS character
   token. Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="rawtext-end-tag-name-state"><span class="secno">8.2.4.16 </span><dfn>RAWTEXT end tag name state</dfn></h5>
  <!-- identical to the RCDATA (and Script data) end tag name state, except s/RCDATA/RAWTEXT/g -->

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#before-attribute-name-state">before attribute name
   state</a>. Otherwise, treat it as per the "anything else" entry
   below.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#self-closing-start-tag-state">self-closing start tag
   state</a>. Otherwise, treat it as per the "anything else" entry
   below.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#data-state">data state</a> and emit
   the current tag token. Otherwise, treat it as per the "anything
   else" entry below.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   current tag token's tag name. Append the <a href="#current-input-character">current input
   character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>.</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   tag token's tag name. Append the <a href="#current-input-character">current input
   character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#rawtext-state">RAWTEXT state</a>. Emit a U+003C
   LESS-THAN SIGN character token, a U+002F SOLIDUS character token,
   and a character token for each of the characters in the
   <var><a href="#temporary-buffer">temporary buffer</a></var> (in the order they were added to the
   buffer). Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="script-data-less-than-sign-state"><span class="secno">8.2.4.17 </span><dfn>Script data less-than sign state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"/" (U+002F)</dt>
   <dd>Set the <var><a href="#temporary-buffer">temporary buffer</a></var> to the empty string. Switch
   to the <a href="#script-data-end-tag-open-state">script data end tag open state</a>.</dd>

   <dt>"!" (U+0021)</dt>
   <dd>Switch to the <a href="#script-data-escape-start-state">script data escape start state</a>. Emit
   a U+003C LESS-THAN SIGN character token and a U+0021 EXCLAMATION
   MARK character token.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-state">script data state</a>. Emit a U+003C
   LESS-THAN SIGN character token. Reconsume the <a href="#current-input-character">current
   input character</a>.</dd>

  </dl><h5 id="script-data-end-tag-open-state"><span class="secno">8.2.4.18 </span><dfn>Script data end tag open state</dfn></h5>
  <!-- identical to the RCDATA (and RAWTEXT) end tag open state, except s/RCDATA/Script data/g -->

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Create a new end tag token, and set its tag name to the
   lowercase version of the <a href="#current-input-character">current input character</a> (add
   0x0020 to the character's code point). Append the <a href="#current-input-character">current
   input character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>. Finally,
   switch to the <a href="#script-data-end-tag-name-state">script data end tag name state</a>. (Don't emit
   the token yet; further details will be filled in before it is
   emitted.)</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Create a new end tag token, and set its tag name to the
   <a href="#current-input-character">current input character</a>. Append the <a href="#current-input-character">current
   input character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>. Finally,
   switch to the <a href="#script-data-end-tag-name-state">script data end tag name state</a>. (Don't emit
   the token yet; further details will be filled in before it is
   emitted.)</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-state">script data state</a>. Emit a U+003C
   LESS-THAN SIGN character token and a U+002F SOLIDUS character token.
   Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="script-data-end-tag-name-state"><span class="secno">8.2.4.19 </span><dfn>Script data end tag name state</dfn></h5>
  <!-- identical to the RCDATA (and RAWTEXT) end tag name state, except s/RCDATA/Script data/g -->

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#before-attribute-name-state">before attribute name
   state</a>. Otherwise, treat it as per the "anything else" entry
   below.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#self-closing-start-tag-state">self-closing start tag
   state</a>. Otherwise, treat it as per the "anything else" entry
   below.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#data-state">data state</a> and emit
   the current tag token. Otherwise, treat it as per the "anything
   else" entry below.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   current tag token's tag name. Append the <a href="#current-input-character">current input
   character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>.</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   tag token's tag name. Append the <a href="#current-input-character">current input
   character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-state">script data state</a>. Emit a U+003C
   LESS-THAN SIGN character token, a U+002F SOLIDUS character token,
   and a character token for each of the characters in the
   <var><a href="#temporary-buffer">temporary buffer</a></var> (in the order they were added to the
   buffer). Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="script-data-escape-start-state"><span class="secno">8.2.4.20 </span><dfn>Script data escape start state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#script-data-escape-start-dash-state">script data escape start dash
   state</a>. Emit a U+002D HYPHEN-MINUS character token.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-state">script data state</a>. Reconsume the
   <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="script-data-escape-start-dash-state"><span class="secno">8.2.4.21 </span><dfn>Script data escape start dash state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#script-data-escaped-dash-dash-state">script data escaped dash dash
   state</a>. Emit a U+002D HYPHEN-MINUS character token.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-state">script data state</a>. Reconsume the
   <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="script-data-escaped-state"><span class="secno">8.2.4.22 </span><dfn>Script data escaped state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#script-data-escaped-dash-state">script data escaped dash state</a>. Emit
   a U+002D HYPHEN-MINUS character token.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#script-data-escaped-less-than-sign-state">script data escaped less-than sign
   state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Emit a U+FFFD REPLACEMENT CHARACTER
   character token.</dd>

   <dt>EOF</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. <a href="#parse-error">Parse
   error</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Emit the <a href="#current-input-character">current input character</a> as a character
   token.</dd>

  </dl><h5 id="script-data-escaped-dash-state"><span class="secno">8.2.4.23 </span><dfn>Script data escaped dash state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#script-data-escaped-dash-dash-state">script data escaped dash dash
   state</a>. Emit a U+002D HYPHEN-MINUS character token.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#script-data-escaped-less-than-sign-state">script data escaped less-than sign
   state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#script-data-escaped-state">script data
   escaped state</a>. Emit a U+FFFD REPLACEMENT CHARACTER character
   token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-escaped-state">script data escaped state</a>. Emit the
   <a href="#current-input-character">current input character</a> as a character token.</dd>

  </dl><h5 id="script-data-escaped-dash-dash-state"><span class="secno">8.2.4.24 </span><dfn>Script data escaped dash dash state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Emit a U+002D HYPHEN-MINUS character token.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#script-data-escaped-less-than-sign-state">script data escaped less-than sign
   state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#script-data-state">script data state</a>. Emit a U+003E
   GREATER-THAN SIGN character token.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#script-data-escaped-state">script data
   escaped state</a>. Emit a U+FFFD REPLACEMENT CHARACTER character
   token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-escaped-state">script data escaped state</a>. Emit the
   <a href="#current-input-character">current input character</a> as a character token.</dd>

  </dl><h5 id="script-data-escaped-less-than-sign-state"><span class="secno">8.2.4.25 </span><dfn>Script data escaped less-than sign state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"/" (U+002F)</dt>
   <dd>Set the <var><a href="#temporary-buffer">temporary buffer</a></var> to the empty string. Switch
   to the <a href="#script-data-escaped-end-tag-open-state">script data escaped end tag open state</a>.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Set the <var><a href="#temporary-buffer">temporary buffer</a></var> to the empty string. Append
   the lowercase version of the <a href="#current-input-character">current input character</a>
   (add 0x0020 to the character's code point) to the <var><a href="#temporary-buffer">temporary
   buffer</a></var>. Switch to the <a href="#script-data-double-escape-start-state">script data double escape start
   state</a>. Emit a U+003C LESS-THAN SIGN character token and the
   <a href="#current-input-character">current input character</a> as a character token.</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Set the <var><a href="#temporary-buffer">temporary buffer</a></var> to the empty string. Append
   the <a href="#current-input-character">current input character</a> to the <var><a href="#temporary-buffer">temporary
   buffer</a></var>. Switch to the <a href="#script-data-double-escape-start-state">script data double escape start
   state</a>. Emit a U+003C LESS-THAN SIGN character token and the
   <a href="#current-input-character">current input character</a> as a character token.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-state">script data state</a>. Emit a U+003C
   LESS-THAN SIGN character token. Reconsume the <a href="#current-input-character">current
   input character</a>.</dd>

  </dl><h5 id="script-data-escaped-end-tag-open-state"><span class="secno">8.2.4.26 </span><dfn>Script data escaped end tag open state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Create a new end tag token, and set its tag name to the
   lowercase version of the <a href="#current-input-character">current input character</a> (add
   0x0020 to the character's code point). Append the <a href="#current-input-character">current
   input character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>. Finally,
   switch to the <a href="#script-data-escaped-end-tag-name-state">script data escaped end tag name
   state</a>. (Don't emit the token yet; further details will be
   filled in before it is emitted.)</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Create a new end tag token, and set its tag name to the
   <a href="#current-input-character">current input character</a>. Append the <a href="#current-input-character">current
   input character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>. Finally,
   switch to the <a href="#script-data-escaped-end-tag-name-state">script data escaped end tag name
   state</a>. (Don't emit the token yet; further details will be
   filled in before it is emitted.)</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-escaped-state">script data escaped state</a>. Emit a
   U+003C LESS-THAN SIGN character token and a U+002F SOLIDUS
   character token. Reconsume the <a href="#current-input-character">current input
   character</a>.</dd>

  </dl><h5 id="script-data-escaped-end-tag-name-state"><span class="secno">8.2.4.27 </span><dfn>Script data escaped end tag name state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#before-attribute-name-state">before attribute name
   state</a>. Otherwise, treat it as per the "anything else" entry
   below.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#self-closing-start-tag-state">self-closing start tag
   state</a>. Otherwise, treat it as per the "anything else" entry
   below.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>If the current end tag token is an <a href="#appropriate-end-tag-token">appropriate end tag
   token</a>, then switch to the <a href="#data-state">data state</a> and emit
   the current tag token. Otherwise, treat it as per the "anything
   else" entry below.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   current tag token's tag name. Append the <a href="#current-input-character">current input
   character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>.</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   tag token's tag name. Append the <a href="#current-input-character">current input
   character</a> to the <var><a href="#temporary-buffer">temporary buffer</a></var>.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-escaped-state">script data escaped state</a>. Emit a
   U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS character
   token, and a character token for each of the characters in the
   <var><a href="#temporary-buffer">temporary buffer</a></var> (in the order they were added to the
   buffer). Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="script-data-double-escape-start-state"><span class="secno">8.2.4.28 </span><dfn>Script data double escape start state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dt>"/" (U+002F)</dt>
   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>If the <var><a href="#temporary-buffer">temporary buffer</a></var> is the string "<code title="">script</code>", then switch to the <a href="#script-data-double-escaped-state">script data
   double escaped state</a>. Otherwise, switch to the <a href="#script-data-escaped-state">script
   data escaped state</a>. Emit the <a href="#current-input-character">current input
   character</a> as a character token.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   <var><a href="#temporary-buffer">temporary buffer</a></var>. Emit the <a href="#current-input-character">current input
   character</a> as a character token.</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the
   <var><a href="#temporary-buffer">temporary buffer</a></var>. Emit the <a href="#current-input-character">current input
   character</a> as a character token.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-escaped-state">script data escaped state</a>. Reconsume
   the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="script-data-double-escaped-state"><span class="secno">8.2.4.29 </span><dfn>Script data double escaped state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-dash-state">script data double escaped dash
   state</a>. Emit a U+002D HYPHEN-MINUS character token.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-less-than-sign-state">script data double escaped less-than
   sign state</a>. Emit a U+003C LESS-THAN SIGN character
   token.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Emit a U+FFFD REPLACEMENT CHARACTER
   character token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Emit the <a href="#current-input-character">current input character</a> as a character
   token.</dd>

  </dl><h5 id="script-data-double-escaped-dash-state"><span class="secno">8.2.4.30 </span><dfn>Script data double escaped dash state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-dash-dash-state">script data double escaped dash dash
   state</a>. Emit a U+002D HYPHEN-MINUS character token.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-less-than-sign-state">script data double escaped less-than
   sign state</a>. Emit a U+003C LESS-THAN SIGN character
   token.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#script-data-double-escaped-state">script data
   double escaped state</a>. Emit a U+FFFD REPLACEMENT CHARACTER
   character token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-state">script data double escaped
   state</a>. Emit the <a href="#current-input-character">current input character</a> as a
   character token.</dd>

  </dl><h5 id="script-data-double-escaped-dash-dash-state"><span class="secno">8.2.4.31 </span><dfn>Script data double escaped dash dash state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Emit a U+002D HYPHEN-MINUS character token.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-less-than-sign-state">script data double escaped less-than
   sign state</a>. Emit a U+003C LESS-THAN SIGN character
   token.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#script-data-state">script data state</a>. Emit a U+003E
   GREATER-THAN SIGN character token.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#script-data-double-escaped-state">script data
   double escaped state</a>. Emit a U+FFFD REPLACEMENT CHARACTER
   character token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-state">script data double escaped
   state</a>. Emit the <a href="#current-input-character">current input character</a> as a
   character token.</dd>

  </dl><h5 id="script-data-double-escaped-less-than-sign-state"><span class="secno">8.2.4.32 </span><dfn>Script data double escaped less-than sign state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"/" (U+002F)</dt>
   <dd>Set the <var><a href="#temporary-buffer">temporary buffer</a></var> to the empty string. Switch
   to the <a href="#script-data-double-escape-end-state">script data double escape end state</a>. Emit a
   U+002F SOLIDUS character token.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-state">script data double escaped state</a>.
   Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="script-data-double-escape-end-state"><span class="secno">8.2.4.33 </span><dfn>Script data double escape end state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dt>"/" (U+002F)</dt>
   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>If the <var><a href="#temporary-buffer">temporary buffer</a></var> is the string "<code title="">script</code>", then switch to the <a href="#script-data-escaped-state">script data
   escaped state</a>. Otherwise, switch to the <a href="#script-data-double-escaped-state">script data
   double escaped state</a>. Emit the <a href="#current-input-character">current input
   character</a> as a character token.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   <var><a href="#temporary-buffer">temporary buffer</a></var>. Emit the <a href="#current-input-character">current input
   character</a> as a character token.</dd>

   <dt>U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the
   <var><a href="#temporary-buffer">temporary buffer</a></var>. Emit the <a href="#current-input-character">current input
   character</a> as a character token.</dd>

   <dt>Anything else</dt>
   <dd>Switch to the <a href="#script-data-double-escaped-state">script data double escaped state</a>.
   Reconsume the <a href="#current-input-character">current input character</a>.</dd>

  </dl><h5 id="before-attribute-name-state"><span class="secno">8.2.4.34 </span><dfn>Before attribute name state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>Switch to the <a href="#self-closing-start-tag-state">self-closing start tag state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current tag
   token.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Start a new attribute in the current tag token. Set that
   attribute's name to the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point), and its
   value to the empty string. Switch to the <a href="#attribute-name-state">attribute name
   state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Start a new attribute in the current
   tag token. Set that attribute's name to a U+FFFD REPLACEMENT
   CHARACTER character, and its value to the empty string. Switch to
   the <a href="#attribute-name-state">attribute name state</a>.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dt>"'" (U+0027)</dt>
   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dt>"=" (U+003D)</dt>
   <dd><a href="#parse-error">Parse error</a>. Treat it as per the "anything else"
   entry below.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Start a new attribute in the current tag token. Set that
   attribute's name to the <a href="#current-input-character">current input character</a>, and
   its value to the empty string. Switch to the <a href="#attribute-name-state">attribute name
   state</a>.</dd>

  </dl><h5 id="attribute-name-state"><span class="secno">8.2.4.35 </span><dfn>Attribute name state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#after-attribute-name-state">after attribute name state</a>.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>Switch to the <a href="#self-closing-start-tag-state">self-closing start tag state</a>.</dd>

   <dt>"=" (U+003D)</dt>
   <dd>Switch to the <a href="#before-attribute-value-state">before attribute value state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current tag
   token.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   current attribute's name.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current attribute's name.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dt>"'" (U+0027)</dt>
   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Treat it as per the "anything else"
   entry below.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   attribute's name.</dd>

  </dl><p>When the user agent leaves the attribute name state (and before
  emitting the tag token, if appropriate), the complete attribute's
  name must be compared to the other attributes on the same token;
  if there is already an attribute on the token with the exact same
  name, then this is a <a href="#parse-error">parse error</a> and the new
  attribute must be dropped, along with the value that gets
  associated with it (if any).</p>


  <h5 id="after-attribute-name-state"><span class="secno">8.2.4.36 </span><dfn>After attribute name state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>Switch to the <a href="#self-closing-start-tag-state">self-closing start tag state</a>.</dd>

   <dt>"=" (U+003D)</dt>
   <dd>Switch to the <a href="#before-attribute-value-state">before attribute value state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current tag
   token.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Start a new attribute in the current tag token. Set that
   attribute's name to the lowercase version of the <a href="#current-input-character">current
   input character</a> (add 0x0020 to the character's code point),
   and its value to the empty string. Switch to the <a href="#attribute-name-state">attribute
   name state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Start a new attribute in the current
   tag token. Set that attribute's name to a U+FFFD REPLACEMENT
   CHARACTER character, and its value to the empty string. Switch to
   the <a href="#attribute-name-state">attribute name state</a>.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dt>"'" (U+0027)</dt>
   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Treat it as per the "anything else"
   entry below.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Start a new attribute in the current tag token. Set that
   attribute's name to the <a href="#current-input-character">current input character</a>, and
   its value to the empty string. Switch to the <a href="#attribute-name-state">attribute name
   state</a>.</dd>

  </dl><h5 id="before-attribute-value-state"><span class="secno">8.2.4.37 </span><dfn>Before attribute value state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dd>Switch to the <a href="#attribute-value-(double-quoted)-state">attribute value (double-quoted) state</a>.</dd>

   <dt>U+0026 AMPERSAND (&amp;)</dt>
   <dd>Switch to the <a href="#attribute-value-(unquoted)-state">attribute value (unquoted) state</a>.
   Reconsume the <a href="#current-input-character">current input character</a>.</dd>

   <dt>"'" (U+0027)</dt>
   <dd>Switch to the <a href="#attribute-value-(single-quoted)-state">attribute value (single-quoted) state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current attribute's value. Switch to the
   <a href="#attribute-value-(unquoted)-state">attribute value (unquoted) state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the current tag token.</dd>

   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dt>"=" (U+003D)</dt>
   <dt>"`" (U+0060)</dt>
   <dd><a href="#parse-error">Parse error</a>. Treat it as per the "anything else"
   entry below.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   attribute's value. Switch to the <a href="#attribute-value-(unquoted)-state">attribute value (unquoted)
   state</a>.</dd>

  </dl><h5 id="attribute-value-(double-quoted)-state"><span class="secno">8.2.4.38 </span><dfn>Attribute value (double-quoted) state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0022 QUOTATION MARK (")</dt>
   <dd>Switch to the <a href="#after-attribute-value-(quoted)-state">after attribute value (quoted)
   state</a>.</dd>

   <dt>U+0026 AMPERSAND (&amp;)</dt>
   <dd>Switch to the <a href="#character-reference-in-attribute-value-state">character reference in attribute value
   state</a>, with the <a href="#additional-allowed-character">additional allowed character</a>
   being U+0022 QUOTATION MARK (").</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current attribute's value.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   attribute's value.</dd>

  </dl><h5 id="attribute-value-(single-quoted)-state"><span class="secno">8.2.4.39 </span><dfn>Attribute value (single-quoted) state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"'" (U+0027)</dt>
   <dd>Switch to the <a href="#after-attribute-value-(quoted)-state">after attribute value (quoted)
   state</a>.</dd>

   <dt>U+0026 AMPERSAND (&amp;)</dt>
   <dd>Switch to the <a href="#character-reference-in-attribute-value-state">character reference in attribute value
   state</a>, with the <a href="#additional-allowed-character">additional allowed character</a>
   being "'" (U+0027).</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current attribute's value.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   attribute's value.</dd>

  </dl><h5 id="attribute-value-(unquoted)-state"><span class="secno">8.2.4.40 </span><dfn>Attribute value (unquoted) state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#before-attribute-name-state">before attribute name state</a>.</dd>

   <dt>U+0026 AMPERSAND (&amp;)</dt>
   <dd>Switch to the <a href="#character-reference-in-attribute-value-state">character reference in attribute value
   state</a>, with the <a href="#additional-allowed-character">additional allowed character</a>
   being U+003E GREATER-THAN SIGN (&gt;).</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current tag
   token.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current attribute's value.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dt>"'" (U+0027)</dt>
   <dt>U+003C LESS-THAN SIGN (&lt;)</dt>
   <dt>"=" (U+003D)</dt>
   <dt>"`" (U+0060)</dt>
   <dd><a href="#parse-error">Parse error</a>. Treat it as per the "anything else"
   entry below.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   attribute's value.</dd>

  </dl><h5 id="character-reference-in-attribute-value-state"><span class="secno">8.2.4.41 </span><dfn>Character reference in attribute value state</dfn></h5>

  <p>Attempt to <a href="#consume-a-character-reference">consume a character reference</a>.</p>

  <p>If nothing is returned, append a U+0026 AMPERSAND character
  (&amp;) to the current attribute's value.</p>

  <p>Otherwise, append the returned character tokens to the current
  attribute's value.</p>

  <p>Finally, switch back to the attribute value state that switched
  into this state.</p>


  <h5 id="after-attribute-value-(quoted)-state"><span class="secno">8.2.4.42 </span><dfn>After attribute value (quoted) state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#before-attribute-name-state">before attribute name state</a>.</dd>

   <dt>"/" (U+002F)</dt>
   <dd>Switch to the <a href="#self-closing-start-tag-state">self-closing start tag state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current tag
   token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#before-attribute-name-state">before attribute
   name state</a>. Reconsume the character.</dd>

  </dl><h5 id="self-closing-start-tag-state"><span class="secno">8.2.4.43 </span><dfn>Self-closing start tag state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Set the <i>self-closing flag</i> of the current tag
   token. Switch to the <a href="#data-state">data state</a>. Emit the current tag
   token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#before-attribute-name-state">before attribute
   name state</a>. Reconsume the character.</dd>

  </dl><h5 id="bogus-comment-state"><span class="secno">8.2.4.44 </span><dfn>Bogus comment state</dfn></h5>

  <p>Consume every character up to and including the first U+003E
  GREATER-THAN SIGN character (&gt;) or the end of the file (EOF),
  whichever comes first. Emit a comment token whose data is the
  concatenation of all the characters starting from and including the
  character that caused the state machine to switch into the bogus
  comment state, up to and including the character immediately before
  the last consumed character (i.e. up to the character just before
  the U+003E or EOF character), but with any U+0000 NULL characters
  replaced by U+FFFD REPLACEMENT CHARACTER characters. (If the comment
  was started by the end of the file (EOF), the token is empty.
  Similarly, the token is empty if it was generated by the string
  "<code title="">&lt;!&gt;</code>".)</p>

  <p>Switch to the <a href="#data-state">data state</a>.</p>

  <p>If the end of the file was reached, reconsume the EOF
  character.</p>


  <h5 id="markup-declaration-open-state"><span class="secno">8.2.4.45 </span><dfn>Markup declaration open state</dfn></h5>

  <p>If the next two characters are both "-" (U+002D) characters, consume those two characters, create a comment token
  whose data is the empty string, and switch to the <a href="#comment-start-state">comment
  start state</a>.</p>

  <p>Otherwise, if the next seven characters are an <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> match for the word "DOCTYPE", then consume
  those characters and switch to the <a href="#doctype-state">DOCTYPE state</a>.</p>

  <p>Otherwise, if there is a <a href="#current-node">current node</a> and it is not
  an element in the <a href="namespaces.html#html-namespace-0">HTML namespace</a> and the next seven
  characters are a <a href="infrastructure.html#case-sensitive">case-sensitive</a> match for the string
  "[CDATA[" (the five uppercase letters "CDATA" with a U+005B LEFT
  SQUARE BRACKET character before and after), then consume those
  characters and switch to the <a href="#cdata-section-state">CDATA section state</a>.</p>

  <p>Otherwise, this is a <a href="#parse-error">parse error</a>. Switch to the
  <a href="#bogus-comment-state">bogus comment state</a>. The next character that is
  consumed, if any, is the first character that will be in the
  comment.</p>


  <h5 id="comment-start-state"><span class="secno">8.2.4.46 </span><dfn>Comment start state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#comment-start-dash-state">comment start dash state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the comment token's data. Switch to the <a href="#comment-state">comment
   state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the comment token.</dd> <!-- see comment in
   comment end state -->

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the comment token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the comment
   token's data. Switch to the <a href="#comment-state">comment state</a>.</dd>

  </dl><h5 id="comment-start-dash-state"><span class="secno">8.2.4.47 </span><dfn>Comment start dash state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#comment-end-state">comment end state</a></dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a "-" (U+002D) character and a U+FFFD REPLACEMENT CHARACTER character to the
   comment token's data. Switch to the <a href="#comment-state">comment
   state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the comment token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the comment token. Reconsume the EOF
   character.</dd> <!-- see comment in comment end state -->

   <dt>Anything else</dt>
   <dd>Append a "-" (U+002D) character and the
   <a href="#current-input-character">current input character</a> to the comment token's
   data. Switch to the <a href="#comment-state">comment state</a>.</dd>

  </dl><h5 id="comment-state"><span class="secno">8.2.4.48 </span><dfn id="comment">Comment state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#comment-end-dash-state">comment end dash state</a></dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the comment token's data.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the comment token. Reconsume the EOF
   character.</dd> <!-- see comment in comment end state -->

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the comment
   token's data.</dd>

  </dl><h5 id="comment-end-dash-state"><span class="secno">8.2.4.49 </span><dfn>Comment end dash state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Switch to the <a href="#comment-end-state">comment end state</a></dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a "-" (U+002D) character and a U+FFFD REPLACEMENT CHARACTER character to the
   comment token's data. Switch to the <a href="#comment-state">comment
   state</a>.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the comment token. Reconsume the EOF
   character.</dd> <!-- see comment in comment end state -->

   <dt>Anything else</dt>
   <dd>Append a "-" (U+002D) character and the
   <a href="#current-input-character">current input character</a> to the comment token's
   data. Switch to the <a href="#comment-state">comment state</a>.</dd>

  </dl><h5 id="comment-end-state"><span class="secno">8.2.4.50 </span><dfn>Comment end state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the comment
   token.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append two "-" (U+002D) characters and a U+FFFD REPLACEMENT CHARACTER character to the
   comment token's data. Switch to the <a href="#comment-state">comment
   state</a>.</dd>

   <dt>"!" (U+0021)</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#comment-end-bang-state">comment end bang
   state</a>.</dd>

   <dt>"-" (U+002D)</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a "-" (U+002D) character to the comment token's data.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the comment token. Reconsume the EOF
   character.</dd> <!-- For security reasons: otherwise, hostile user
   could put a <script> in a comment e.g. in a blog comment and then
   DOS the server so that the end tag isn't read, and then the
   commented <script> tag would be treated as live code -->

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Append two "-" (U+002D) characters and the <a href="#current-input-character">current input character</a> to the
   comment token's data. Switch to the <a href="#comment-state">comment
   state</a>.</dd>

  </dl><h5 id="comment-end-bang-state"><span class="secno">8.2.4.51 </span><dfn>Comment end bang state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"-" (U+002D)</dt>
   <dd>Append two "-" (U+002D) characters and a "!" (U+0021) character to the comment token's data. Switch
   to the <a href="#comment-end-dash-state">comment end dash state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the comment
   token.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append two "-" (U+002D) characters, a "!" (U+0021) character, and a
   U+FFFD REPLACEMENT CHARACTER character to the comment token's data.
   Switch to the <a href="#comment-state">comment state</a>.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Emit the comment token. Reconsume the EOF
   character.</dd> <!-- see comment in comment end state -->

   <dt>Anything else</dt>
   <dd>Append two "-" (U+002D) characters, a "!" (U+0021) character, and the <a href="#current-input-character">current input
   character</a> to the comment token's data. Switch to the
   <a href="#comment-state">comment state</a>.</dd>

  </dl><h5 id="doctype-state"><span class="secno">8.2.4.52 </span><dfn>DOCTYPE state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#before-doctype-name-state">before DOCTYPE name state</a>.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Create a new DOCTYPE token. Set its <i>force-quirks
   flag</i> to <i>on</i>. Emit the token. Reconsume the EOF
   character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#before-doctype-name-state">before DOCTYPE
   name state</a>. Reconsume the character.</dd>

  </dl><h5 id="before-doctype-name-state"><span class="secno">8.2.4.53 </span><dfn>Before DOCTYPE name state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Create a new DOCTYPE token. Set the token's name to the
   lowercase version of the <a href="#current-input-character">current input character</a> (add 0x0020 to the
   character's code point). Switch to the <a href="#doctype-name-state">DOCTYPE name
   state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Create a new DOCTYPE token. Set the
   token's name to a U+FFFD REPLACEMENT CHARACTER character. Switch to
   the <a href="#doctype-name-state">DOCTYPE name state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Create a new DOCTYPE token. Set its
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit the token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Create a new DOCTYPE token. Set its <i>force-quirks
   flag</i> to <i>on</i>. Emit the token. Reconsume the EOF
   character.</dd>

   <dt>Anything else</dt>
   <dd>Create a new DOCTYPE token. Set the token's name to the
   <a href="#current-input-character">current input character</a>. Switch to the <a href="#doctype-name-state">DOCTYPE name
   state</a>.</dd>

  </dl><h5 id="doctype-name-state"><span class="secno">8.2.4.54 </span><dfn>DOCTYPE name state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#after-doctype-name-state">after DOCTYPE name state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current DOCTYPE
   token.</dd>

   <dt>U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z</dt>
   <dd>Append the lowercase version of the <a href="#current-input-character">current input
   character</a> (add 0x0020 to the character's code point) to the
   current DOCTYPE token's name.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current DOCTYPE token's name.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   DOCTYPE token's name.</dd>

  </dl><h5 id="after-doctype-name-state"><span class="secno">8.2.4.55 </span><dfn>After DOCTYPE name state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current DOCTYPE
   token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>

    <p>If the six characters starting from the <a href="#current-input-character">current input
    character</a> are an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match
    for the word "PUBLIC", then consume those characters and switch to
    the <a href="#after-doctype-public-keyword-state">after DOCTYPE public keyword state</a>.</p>

    <p>Otherwise, if the six characters starting from the
    <a href="#current-input-character">current input character</a> are an <a href="infrastructure.html#ascii-case-insensitive">ASCII
    case-insensitive</a> match for the word "SYSTEM", then consume
    those characters and switch to the <a href="#after-doctype-system-keyword-state">after DOCTYPE system
    keyword state</a>.</p>

    <p>Otherwise, this is a <a href="#parse-error">parse error</a>. Set the
    DOCTYPE token's <i>force-quirks flag</i> to <i>on</i>. Switch to
    the <a href="#bogus-doctype-state">bogus DOCTYPE state</a>.</p>

   </dd>

  </dl><h5 id="after-doctype-public-keyword-state"><span class="secno">8.2.4.56 </span><dfn>After DOCTYPE public keyword state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#before-doctype-public-identifier-state">before DOCTYPE public identifier
   state</a>.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's public
   identifier to the empty string (not missing), then switch to the
   <a href="#doctype-public-identifier-(double-quoted)-state">DOCTYPE public identifier (double-quoted) state</a>.</dd>

   <dt>"'" (U+0027)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's public
   identifier to the empty string (not missing), then switch to the
   <a href="#doctype-public-identifier-(single-quoted)-state">DOCTYPE public identifier (single-quoted) state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit that DOCTYPE token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#bogus-doctype-state">bogus
   DOCTYPE state</a>.</dd>

  </dl><h5 id="before-doctype-public-identifier-state"><span class="secno">8.2.4.57 </span><dfn>Before DOCTYPE public identifier state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dd>Set the DOCTYPE token's public identifier to the empty string
   (not missing), then switch to the <a href="#doctype-public-identifier-(double-quoted)-state">DOCTYPE public identifier
   (double-quoted) state</a>.</dd>

   <dt>"'" (U+0027)</dt>
   <dd>Set the DOCTYPE token's public identifier to the empty string
   (not missing), then switch to the <a href="#doctype-public-identifier-(single-quoted)-state">DOCTYPE public identifier
   (single-quoted) state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit that DOCTYPE token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#bogus-doctype-state">bogus
   DOCTYPE state</a>.</dd>

  </dl><h5 id="doctype-public-identifier-(double-quoted)-state"><span class="secno">8.2.4.58 </span><dfn>DOCTYPE public identifier (double-quoted) state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0022 QUOTATION MARK (")</dt>
   <dd>Switch to the <a href="#after-doctype-public-identifier-state">after DOCTYPE public identifier state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current DOCTYPE token's public identifier.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit that DOCTYPE token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   DOCTYPE token's public identifier.</dd>

  </dl><h5 id="doctype-public-identifier-(single-quoted)-state"><span class="secno">8.2.4.59 </span><dfn>DOCTYPE public identifier (single-quoted) state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"'" (U+0027)</dt>
   <dd>Switch to the <a href="#after-doctype-public-identifier-state">after DOCTYPE public identifier state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current DOCTYPE token's public identifier.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit that DOCTYPE token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   DOCTYPE token's public identifier.</dd>

  </dl><h5 id="after-doctype-public-identifier-state"><span class="secno">8.2.4.60 </span><dfn>After DOCTYPE public identifier state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#between-doctype-public-and-system-identifiers-state">between DOCTYPE public and system
   identifiers state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current DOCTYPE
   token.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's system
   identifier to the empty string (not missing), then switch to the
   <a href="#doctype-system-identifier-(double-quoted)-state">DOCTYPE system identifier (double-quoted) state</a>.</dd>

   <dt>"'" (U+0027)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's system
   identifier to the empty string (not missing), then switch to the
   <a href="#doctype-system-identifier-(single-quoted)-state">DOCTYPE system identifier (single-quoted) state</a>.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#bogus-doctype-state">bogus
   DOCTYPE state</a>.</dd>

  </dl><h5 id="between-doctype-public-and-system-identifiers-state"><span class="secno">8.2.4.61 </span><dfn>Between DOCTYPE public and system identifiers state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current DOCTYPE
   token.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dd>Set the DOCTYPE token's system identifier to the empty string
   (not missing), then switch to the <a href="#doctype-system-identifier-(double-quoted)-state">DOCTYPE system identifier
   (double-quoted) state</a>.</dd>

   <dt>"'" (U+0027)</dt>
   <dd>Set the DOCTYPE token's system identifier to the empty string
   (not missing), then switch to the <a href="#doctype-system-identifier-(single-quoted)-state">DOCTYPE system identifier
   (single-quoted) state</a>.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#bogus-doctype-state">bogus
   DOCTYPE state</a>.</dd>

  </dl><h5 id="after-doctype-system-keyword-state"><span class="secno">8.2.4.62 </span><dfn>After DOCTYPE system keyword state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Switch to the <a href="#before-doctype-system-identifier-state">before DOCTYPE system identifier
   state</a>.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's system
   identifier to the empty string (not missing), then switch to the
   <a href="#doctype-system-identifier-(double-quoted)-state">DOCTYPE system identifier (double-quoted) state</a>.</dd>

   <dt>"'" (U+0027)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's system
   identifier to the empty string (not missing), then switch to the
   <a href="#doctype-system-identifier-(single-quoted)-state">DOCTYPE system identifier (single-quoted) state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit that DOCTYPE token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#bogus-doctype-state">bogus
   DOCTYPE state</a>.</dd>

  </dl><h5 id="before-doctype-system-identifier-state"><span class="secno">8.2.4.63 </span><dfn>Before DOCTYPE system identifier state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>U+0022 QUOTATION MARK (")</dt>
   <dd>Set the DOCTYPE token's system identifier to the empty string
   (not missing), then switch to the <a href="#doctype-system-identifier-(double-quoted)-state">DOCTYPE system identifier
   (double-quoted) state</a>.</dd>

   <dt>"'" (U+0027)</dt>
   <dd>Set the DOCTYPE token's system identifier to the empty string
   (not missing), then switch to the <a href="#doctype-system-identifier-(single-quoted)-state">DOCTYPE system identifier
   (single-quoted) state</a>.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit that DOCTYPE token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#bogus-doctype-state">bogus
   DOCTYPE state</a>.</dd>

  </dl><h5 id="doctype-system-identifier-(double-quoted)-state"><span class="secno">8.2.4.64 </span><dfn>DOCTYPE system identifier (double-quoted) state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+0022 QUOTATION MARK (")</dt>
   <dd>Switch to the <a href="#after-doctype-system-identifier-state">after DOCTYPE system identifier
   state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current DOCTYPE token's system identifier.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit that DOCTYPE token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   DOCTYPE token's system identifier.</dd>

  </dl><h5 id="doctype-system-identifier-(single-quoted)-state"><span class="secno">8.2.4.65 </span><dfn>DOCTYPE system identifier (single-quoted) state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"'" (U+0027)</dt>
   <dd>Switch to the <a href="#after-doctype-system-identifier-state">after DOCTYPE system identifier
   state</a>.</dd>

   <dt>U+0000 NULL</dt>
   <dd><a href="#parse-error">Parse error</a>. Append a U+FFFD REPLACEMENT CHARACTER
   character to the current DOCTYPE token's system identifier.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd><a href="#parse-error">Parse error</a>. Set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>. Switch to the <a href="#data-state">data
   state</a>. Emit that DOCTYPE token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Append the <a href="#current-input-character">current input character</a> to the current
   DOCTYPE token's system identifier.</dd>

  </dl><h5 id="after-doctype-system-identifier-state"><span class="secno">8.2.4.66 </span><dfn>After DOCTYPE system identifier state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dd>Ignore the character.</dd>

   <dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the current DOCTYPE
   token.</dd>

   <dt>EOF</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#data-state">data
   state</a>. Set the DOCTYPE token's <i>force-quirks flag</i> to
   <i>on</i>. Emit that DOCTYPE token. Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd><a href="#parse-error">Parse error</a>. Switch to the <a href="#bogus-doctype-state">bogus DOCTYPE
   state</a>. (This does <em>not</em> set the DOCTYPE token's
   <i>force-quirks flag</i> to <i>on</i>.)</dd>

  </dl><h5 id="bogus-doctype-state"><span class="secno">8.2.4.67 </span><dfn>Bogus DOCTYPE state</dfn></h5>

  <p>Consume the <a href="#next-input-character">next input character</a>:</p>

  <dl class="switch"><dt>U+003E GREATER-THAN SIGN (&gt;)</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the DOCTYPE
   token.</dd>

   <dt>EOF</dt>
   <dd>Switch to the <a href="#data-state">data state</a>. Emit the DOCTYPE token.
   Reconsume the EOF character.</dd>

   <dt>Anything else</dt>
   <dd>Ignore the character.</dd>

  </dl><h5 id="cdata-section-state"><span class="secno">8.2.4.68 </span><dfn>CDATA section state</dfn></h5>

  <p>Switch to the <a href="#data-state">data state</a>.</p>

  <p>Consume every character up to the next occurrence of the three
  character sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE
  BRACKET U+003E GREATER-THAN SIGN (<code title="">]]&gt;</code>), or the
  end of the file (EOF), whichever comes first. Emit a series of
  character tokens consisting of all the characters consumed except
  the matching three character sequence at the end (if one was found
  before the end of the file)<!--(not needed; taken care of by the
  tree constructor), but with any U+0000 NULL characters replaced by
  U+FFFD REPLACEMENT CHARACTER characters-->.</p>

  <p>If the end of the file was reached, reconsume the EOF
  character.</p>



  <h5 id="tokenizing-character-references"><span class="secno">8.2.4.69 </span>Tokenizing character references</h5>

  <p>This section defines how to <dfn id="consume-a-character-reference">consume a character
  reference</dfn>. This definition is used when parsing character
  references <a href="#character-reference-in-data-state" title="character reference in data state">in
  text</a> and <a href="#character-reference-in-attribute-value-state" title="character reference in attribute value
  state">in attributes</a>.</p>

  <p>The behavior depends on the identity of the next character (the
  one immediately after the U+0026 AMPERSAND character):</p>

  <dl class="switch"><dt>"tab" (U+0009)</dt>
   <dt>"LF" (U+000A)</dt>
   <dt>"FF" (U+000C)</dt>
   <!--<dt>"CR" (U+000D)</dt>-->
   <dt>U+0020 SPACE</dt>
   <dt>U+003C LESS-THAN SIGN</dt>
   <dt>U+0026 AMPERSAND</dt>
   <dt>EOF</dt>
   <dt>The <dfn id="additional-allowed-character">additional allowed character</dfn>, if there is one</dt>

   <dd>Not a character reference. No characters are consumed, and
   nothing is returned. (This is not an error, either.)</dd>


   <dt>"#" (U+0023)</dt>

   <dd>

    <p>Consume the U+0023 NUMBER SIGN.</p>

    <p>The behavior further depends on the character after the U+0023
    NUMBER SIGN:</p>

    <dl class="switch"><dt>U+0078 LATIN SMALL LETTER X</dt>
     <dt>U+0058 LATIN CAPITAL LETTER X</dt>

     <dd>

      <p>Consume the X.</p>

      <p>Follow the steps below, but using the range of characters
      <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, U+0061 LATIN
      SMALL LETTER A to U+0066 LATIN SMALL LETTER F, and U+0041 LATIN
      CAPITAL LETTER A to U+0046 LATIN CAPITAL LETTER F (in other
      words, 0-9, A-F, a-f).</p>

      <p>When it comes to interpreting the number, interpret it as a
      hexadecimal number.</p>

     </dd>


     <dt>Anything else</dt>

     <dd>

      <p>Follow the steps below, but using the range of characters
      <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>.</p>

      <p>When it comes to interpreting the number, interpret it as a
      decimal number.</p>

     </dd>

    </dl><p>Consume as many characters as match the range of characters
    given above.</p>

    <p>If no characters match the range, then don't consume any
    characters (and unconsume the U+0023 NUMBER SIGN character and, if
    appropriate, the X character). This is a <a href="#parse-error">parse
    error</a>; nothing is returned.</p>

    <p>Otherwise, if the next character is a U+003B SEMICOLON, consume
    that too. If it isn't, there is a <a href="#parse-error">parse
    error</a>.</p>

    <p>If one or more characters match the range, then take them all
    and interpret the string of characters as a number (either
    hexadecimal or decimal as appropriate).</p>

    <p>If that number is one of the numbers in the first column of the
    following table, then this is a <a href="#parse-error">parse error</a>. Find the
    row with that number in the first column, and return a character
    token for the Unicode character given in the second column of that
    row.</p>

    <table id="table-charref-overrides"><thead><tr><th>Number </th><th colspan="2">Unicode character
     </th></tr></thead><tbody><tr><td>0x00 </td><td>U+FFFD </td><td>REPLACEMENT CHARACTER
      </td></tr><tr><td>0x0D </td><td>U+000D </td><td>CARRIAGE RETURN (CR)
      </td></tr><tr><td>0x80 </td><td>U+20AC </td><td>EURO SIGN (&#8364;)
      </td></tr><tr><td>0x81 </td><td>U+0081 </td><td>&lt;control&gt;
      </td></tr><tr><td>0x82 </td><td>U+201A </td><td>SINGLE LOW-9 QUOTATION MARK (&#8218;)
      </td></tr><tr><td>0x83 </td><td>U+0192 </td><td>LATIN SMALL LETTER F WITH HOOK (&#402;)
      </td></tr><tr><td>0x84 </td><td>U+201E </td><td>DOUBLE LOW-9 QUOTATION MARK (&#8222;)
      </td></tr><tr><td>0x85 </td><td>U+2026 </td><td>HORIZONTAL ELLIPSIS (&#8230;)
      </td></tr><tr><td>0x86 </td><td>U+2020 </td><td>DAGGER (&#8224;)
      </td></tr><tr><td>0x87 </td><td>U+2021 </td><td>DOUBLE DAGGER (&#8225;)
      </td></tr><tr><td>0x88 </td><td>U+02C6 </td><td>MODIFIER LETTER CIRCUMFLEX ACCENT (&#710;)
      </td></tr><tr><td>0x89 </td><td>U+2030 </td><td>PER MILLE SIGN (&#8240;)
      </td></tr><tr><td>0x8A </td><td>U+0160 </td><td>LATIN CAPITAL LETTER S WITH CARON (&#352;)
      </td></tr><tr><td>0x8B </td><td>U+2039 </td><td>SINGLE LEFT-POINTING ANGLE QUOTATION MARK (&#8249;)
      </td></tr><tr><td>0x8C </td><td>U+0152 </td><td>LATIN CAPITAL LIGATURE OE (&#338;)
      </td></tr><tr><td>0x8D </td><td>U+008D </td><td>&lt;control&gt;
      </td></tr><tr><td>0x8E </td><td>U+017D </td><td>LATIN CAPITAL LETTER Z WITH CARON (&#381;)
      </td></tr><tr><td>0x8F </td><td>U+008F </td><td>&lt;control&gt;
      </td></tr><tr><td>0x90 </td><td>U+0090 </td><td>&lt;control&gt;
      </td></tr><tr><td>0x91 </td><td>U+2018 </td><td>LEFT SINGLE QUOTATION MARK (&#8216;)
      </td></tr><tr><td>0x92 </td><td>U+2019 </td><td>RIGHT SINGLE QUOTATION MARK (&#8217;)
      </td></tr><tr><td>0x93 </td><td>U+201C </td><td>LEFT DOUBLE QUOTATION MARK (&#8220;)
      </td></tr><tr><td>0x94 </td><td>U+201D </td><td>RIGHT DOUBLE QUOTATION MARK (&#8221;)
      </td></tr><tr><td>0x95 </td><td>U+2022 </td><td>BULLET (&#8226;)
      </td></tr><tr><td>0x96 </td><td>U+2013 </td><td>EN DASH (&#8211;)
      </td></tr><tr><td>0x97 </td><td>U+2014 </td><td>EM DASH (&#8212;)
      </td></tr><tr><td>0x98 </td><td>U+02DC </td><td>SMALL TILDE (&#732;)
      </td></tr><tr><td>0x99 </td><td>U+2122 </td><td>TRADE MARK SIGN (&#8482;)
      </td></tr><tr><td>0x9A </td><td>U+0161 </td><td>LATIN SMALL LETTER S WITH CARON (&#353;)
      </td></tr><tr><td>0x9B </td><td>U+203A </td><td>SINGLE RIGHT-POINTING ANGLE QUOTATION MARK (&#8250;)
      </td></tr><tr><td>0x9C </td><td>U+0153 </td><td>LATIN SMALL LIGATURE OE (&#339;)
      </td></tr><tr><td>0x9D </td><td>U+009D </td><td>&lt;control&gt;
      </td></tr><tr><td>0x9E </td><td>U+017E </td><td>LATIN SMALL LETTER Z WITH CARON (&#382;)
      </td></tr><tr><td>0x9F </td><td>U+0178 </td><td>LATIN CAPITAL LETTER Y WITH DIAERESIS (&#376;)
    </td></tr></tbody></table><p>Otherwise, if the number is in the range 0xD800 to 0xDFFF<!--
    surrogates --> or is greater than 0x10FFFF, then this is a
    <a href="#parse-error">parse error</a>. Return a U+FFFD REPLACEMENT
    CHARACTER.</p>

    <p>Otherwise, return a character token for the Unicode character
    whose code point is that number.

    <!-- this is the same as the equivalent list in the input stream
    section -->
    Additionally, if the number is in the range 0x0001 to 0x0008, <!--
    HT, LF allowed --> <!-- U+000B is in the next list --> <!-- FF, CR
    allowed --> 0x000E to 0x001F, <!-- ASCII allowed --> 0x007F <!--to
    0x0084, (0x0085 NEL not allowed), 0x0086--> to 0x009F, 0xFDD0 to
    0xFDEF, or is one of 0x000B, 0xFFFE, 0xFFFF, 0x1FFFE, 0x1FFFF,
    0x2FFFE, 0x2FFFF, 0x3FFFE, 0x3FFFF, 0x4FFFE, 0x4FFFF, 0x5FFFE,
    0x5FFFF, 0x6FFFE, 0x6FFFF, 0x7FFFE, 0x7FFFF, 0x8FFFE, 0x8FFFF,
    0x9FFFE, 0x9FFFF, 0xAFFFE, 0xAFFFF, 0xBFFFE, 0xBFFFF, 0xCFFFE,
    0xCFFFF, 0xDFFFE, 0xDFFFF, 0xEFFFE, 0xEFFFF, 0xFFFFE, 0xFFFFF,
    0x10FFFE, or 0x10FFFF, then this is a <a href="#parse-error">parse
    error</a>.</p>

   </dd>


   <dt>Anything else</dt>

   <dd>

    <p>Consume the maximum number of characters possible, with the
    consumed characters matching one of the identifiers in the first
    column of the <a href="#named-character-references">named character references</a> table (in a
    <a href="infrastructure.html#case-sensitive">case-sensitive</a> manner).</p>

    <p>If no match can be made, then no characters are consumed, and
    nothing is returned. In this case, if the characters after the
    U+0026 AMPERSAND character (&amp;) consist of a sequence of one or
    more characters in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, <a href="common-microsyntaxes.html#lowercase-ascii-letters">lowercase ASCII letters</a>, and <a href="common-microsyntaxes.html#uppercase-ascii-letters">uppercase ASCII letters</a>, followed by a ";" (U+003B) character, then this
    is a <a href="#parse-error">parse error</a>.</p>

    <p>If the character reference is being consumed <a href="#character-reference-in-attribute-value-state" title="character reference in attribute value state">as part of an
    attribute</a>, and the last character matched is not a ";" (U+003B) character, and the next character is either a "=" (U+003D) character or in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, <a href="common-microsyntaxes.html#uppercase-ascii-letters">uppercase ASCII letters</a>, or <a href="common-microsyntaxes.html#lowercase-ascii-letters">lowercase ASCII letters</a>, then, for historical reasons, all the
    characters that were matched after the U+0026 AMPERSAND character
    (&amp;) must be unconsumed, and nothing is returned.</p>
    <!-- "=" added because of http://www.w3.org/Bugs/Public/show_bug.cgi?id=9207#c5 -->

    <p>Otherwise, a character reference is parsed. If the last
    character matched is not a ";" (U+003B) character, there
    is a <a href="#parse-error">parse error</a>.</p>

    <p>Return one or two character tokens for the character(s)
    corresponding to the character reference name (as given by the
    second column of the <a href="#named-character-references">named character references</a>
    table).</p>

    <div class="example">

     <p>If the markup contains (not in an attribute) the string <code title="">I'm &amp;notit; I tell you</code>, the character
     reference is parsed as "not", as in, <code title="">I'm &#172;it;
     I tell you</code> (and this is a parse error). But if the markup
     was <code title="">I'm &amp;notin; I tell you</code>, the
     character reference would be parsed as "notin;", resulting in
     <code title="">I'm &#8713; I tell you</code> (and no parse
     error).</p>

    </div>

   </dd>

  </dl></div>


  <div class="impl">

  <!-- v2: One thing that this doesn't define is handling deeply
  nested documents. There are compatibility requirements around that:
  you can't throw away the elements altogether, consider Tux made only
  with opening <font> elements, one per character. Seems that the best
  thing to do is to close some formatting elements from the middle of
  the stack when you hit a limit, or something. -->

  <h4 id="tree-construction"><span class="secno">8.2.5 </span><dfn>Tree construction</dfn></h4>

  <p>The input to the tree construction stage is a sequence of tokens
  from the <a href="#tokenization">tokenization</a> stage. The tree construction
  stage is associated with a DOM <code><a href="dom.html#document">Document</a></code> object when a
  parser is created. The "output" of this stage consists of
  dynamically modifying or extending that document's DOM tree.</p>

  <p>This specification does not define when an interactive user agent
  has to render the <code><a href="dom.html#document">Document</a></code> so that it is available to
  the user, or when it has to begin accepting user input.</p>

  <hr><p>As each token is emitted from the tokenizer, the user agent must
  follow the appropriate steps from the following list:</p>

  <dl class="switch"><dt>If there is no <a href="#current-node">current node</a></dt>
   <dt>If the <a href="#current-node">current node</a> is an element in the <a href="namespaces.html#html-namespace-0">HTML namespace</a></dt>
   <dt>If the <a href="#current-node">current node</a> is a <a href="#mathml-text-integration-point">MathML text integration point</a> and the token is a start tag whose tag name is neither "mglyph" nor "malignmark"</dt>
   <dt>If the <a href="#current-node">current node</a> is a <a href="#mathml-text-integration-point">MathML text integration point</a> and the token is a character token</dt>
   <dt>If the <a href="#current-node">current node</a> is an <code title="">annotation-xml</code> element in the <a href="namespaces.html#mathml-namespace">MathML namespace</a> and the token is a start tag whose tag name is "svg"</dt>
   <dt>If the <a href="#current-node">current node</a> is an <a href="#html-integration-point">HTML integration point</a> and the token is a start tag</dt>
   <dt>If the <a href="#current-node">current node</a> is an <a href="#html-integration-point">HTML integration point</a> and the token is a character token</dt>
   <dt>If the token is an end-of-file token</dt>

   <dd>Process the token according to the rules given in the section
   corresponding to the current <a href="#insertion-mode">insertion mode</a> in HTML
   content.</dd>

   <dt>Otherwise</dt>

   <dd>Process the token according to the rules given in the section
   for parsing tokens <a href="#parsing-main-inforeign" title="insertion mode: in foreign
   content">in foreign content</a>.</dd>

  </dl><p>When the specification says that a user agent is to <dfn id="act-as-if-a-token-had-been-seen">act as
  if a token had been seen</dfn>, it means that the user agent is to
  follow the appropriate steps from the above list.</p>

  <p>The <a href="#current-node">current node</a> is a <dfn id="mathml-text-integration-point">MathML text
  integration point</dfn> if it is one of the following elements:</p>

  <ul class="brief"><li>An <code title="">mi</code> element in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li>An <code title="">mo</code> element in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li>An <code title="">mn</code> element in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li>An <code title="">ms</code> element in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
   <li>An <code title="">mtext</code> element in the <a href="namespaces.html#mathml-namespace">MathML namespace</a></li>
  </ul><p>The <a href="#current-node">current node</a> is an <dfn id="html-integration-point">HTML
  integration point</dfn> if it is one of the following elements:</p>

  <ul class="brief"><li>An <code title="">annotation-xml</code> element in the <a href="namespaces.html#mathml-namespace">MathML namespace</a> whose start tag token had an attribute with the name "encoding" whose value was an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">text/html</code>"</li>
   <li>An <code title="">annotation-xml</code> element in the <a href="namespaces.html#mathml-namespace">MathML namespace</a> whose start tag token had an attribute with the name "encoding" whose value was an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">application/xhtml+xml</code>"</li>
   <li>A <code title="">foreignObject</code> element in the <a href="namespaces.html#svg-namespace">SVG namespace</a></li>
   <li>A <code title="">desc</code> element in the <a href="namespaces.html#svg-namespace">SVG namespace</a></li>
   <li>A <code title="">title</code> element in the <a href="namespaces.html#svg-namespace">SVG namespace</a></li>
  </ul><hr><p>When the steps below require the UA to <dfn id="insert-a-character">insert a
  character</dfn> into a node, if that node has a child immediately
  before where the character is to be inserted, and that child is a
  <code><a href="infrastructure.html#text-0">Text</a></code> node, then the character must be appended to that
  <code><a href="infrastructure.html#text-0">Text</a></code> node; otherwise, a new <code><a href="infrastructure.html#text-0">Text</a></code> node
  whose data is just that character must be inserted in the
  appropriate place.</p>

  <div class="example">

   <p>Here are some sample inputs to the parser and the corresponding
   number of <code><a href="infrastructure.html#text-0">Text</a></code> nodes that they result in, assuming a user agent
   that executes scripts.</p>

   <table><thead><tr><th>Input </th><th>Number of <code><a href="infrastructure.html#text-0">Text</a></code> nodes
    </th></tr></thead><tbody><tr><td><pre>A&lt;script&gt;
var&#160;script&#160;=&#160;document.getElementsByTagName('script')[0];
document.body.removeChild(script);
&lt;/script&gt;B</pre>
      </td><td>One <code><a href="infrastructure.html#text-0">Text</a></code> node in the document, containing "AB".
     </td></tr><tr><td><pre>A&lt;script&gt;
var&#160;text&#160;=&#160;document.createTextNode('B');
document.body.appendChild(text);
&lt;/script&gt;C</pre>
      </td><td>Three <code><a href="infrastructure.html#text-0">Text</a></code> nodes; "A" before the script, the script's contents, and "BC" after the script (the parser appends to the <code><a href="infrastructure.html#text-0">Text</a></code> node created by the script).
     </td></tr><tr><td><pre>A&lt;script&gt;
var&#160;text&#160;=&#160;document.getElementsByTagName('script')[0].firstChild;
text.data&#160;=&#160;'B';
document.body.appendChild(text);
&lt;/script&gt;C</pre>
      </td><td>Two adjacent <code><a href="infrastructure.html#text-0">Text</a></code> nodes in the document, containing "A" and "BC".
     </td></tr><tr><td><pre>A&lt;table&gt;B&lt;tr&gt;C&lt;/tr&gt;D&lt;/table&gt;</pre>
      </td><td>One <code><a href="infrastructure.html#text-0">Text</a></code> node before the table, containing "ABCD". (This is caused by <a href="#foster-parent" title="foster parent">foster parenting</a>.)
     </td></tr><tr><td><pre>A&lt;table&gt;&lt;tr&gt;&#160;B&lt;/tr&gt;&#160;C&lt;/table&gt;</pre>
      </td><td>One <code><a href="infrastructure.html#text-0">Text</a></code> node before the table, containing "A&#160;B&#160;C" (A-space-B-space-C). (This is caused by <a href="#foster-parent" title="foster parent">foster parenting</a>.)
     </td></tr><tr><td><pre>A&lt;table&gt;&lt;tr&gt;&#160;B&lt;/tr&gt;&#160;&lt;/em&gt;C&lt;/table&gt;</pre>
      </td><td>One <code><a href="infrastructure.html#text-0">Text</a></code> node before the table, containing "A&#160;BC" (A-space-B-C), and one <code><a href="infrastructure.html#text-0">Text</a></code> node inside the table (as a child of a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>) with a single space character. (Space characters separated from non-space characters by non-character tokens are not affected by <a href="#foster-parent" title="foster parent">foster parenting</a>, even if those other tokens then get ignored.)
   </td></tr></tbody></table></div>

  <p id="mutation-during-parsing">DOM mutation events and mutation
  observers must not fire for changes caused by the UA parsing the
  document. (Conceptually, the parser is not mutating the DOM, it is
  constructing it.) This includes the parsing of any content inserted
  using <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code> and
  <code title="dom-document-writeln"><a href="dynamic-markup-insertion.html#dom-document-writeln">document.writeln()</a></code> calls.
  <a href="#refsDOMEVENTS">[DOMEVENTS]</a></p>

  <p class="note">Not all of the tag names mentioned below are
  conformant tag names in this specification; many are included to
  handle legacy content. They still form part of the algorithm that
  implementations are required to implement to claim conformance.</p>

  <p class="note">The algorithm described below places no limit on the
  depth of the DOM tree generated, or on the length of tag names,
  attribute names, attribute values, <code><a href="infrastructure.html#text-0">Text</a></code> nodes, etc. While
  implementors are encouraged to avoid arbitrary limits, it is
  recognized that <a href="infrastructure.html#hardwareLimitations">practical
  concerns</a> will likely force user agents to impose nesting depth
  constraints.</p>


  <h5 id="creating-and-inserting-elements"><span class="secno">8.2.5.1 </span>Creating and inserting elements</h5>

  <p>When the steps below require the UA to <dfn id="create-an-element-for-the-token" title="create an
  element for the token">create an element for a token</dfn> in a
  particular namespace, the UA must create a node implementing the
  interface appropriate for the element type corresponding to the tag
  name of the token in the given namespace (as given in the
  specification that defines that element, e.g. for an <code><a href="the-a-element.html#the-a-element">a</a></code>
  element in the <a href="namespaces.html#html-namespace-0">HTML namespace</a>, this specification
  defines it to be the <code><a href="the-a-element.html#htmlanchorelement">HTMLAnchorElement</a></code> interface), with
  the tag name being the name of that element, with the node being in
  the given namespace, and with the attributes on the node being those
  given in the given token.</p>

  <p>The interface appropriate for an element in the <a href="namespaces.html#html-namespace-0">HTML
  namespace</a> that is not defined in this specification (or
  <a href="infrastructure.html#other-applicable-specifications">other applicable specifications</a>) is
  <code><a href="elements.html#htmlunknownelement">HTMLUnknownElement</a></code>. Elements in other namespaces whose
  interface is not defined by that namespace's specification must use
  the interface <code><a href="infrastructure.html#element">Element</a></code>.</p>

  <p>When a <a href="forms.html#category-reset" title="category-reset">resettable element</a> is
  created in this manner, its <a href="#concept-form-reset-control" title="concept-form-reset-control">reset algorithm</a> must be
  invoked once the attributes are set. (This initializes the element's
  <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> and <a href="attributes-common-to-form-controls.html#concept-fe-checked" title="concept-fe-checked">checkedness</a> based on the element's
  attributes.)</p>

  <hr><p>When the steps below require the UA to <dfn id="insert-an-html-element">insert an HTML
  element</dfn> for a token, the UA must first <a href="#create-an-element-for-the-token">create an element
  for the token</a> in the <a href="namespaces.html#html-namespace-0">HTML namespace</a>, and then
  append this node to the <a href="#current-node">current node</a>, and push it onto
  the <a href="#stack-of-open-elements">stack of open elements</a> so that it is the new
  <a href="#current-node">current node</a>.</p>

  <p>The steps below may also require that the UA insert an HTML
  element in a particular place, in which case the UA must follow the
  same steps except that it must insert or append the new node in the
  location specified instead of appending it to the <a href="#current-node">current
  node</a>. (This happens in particular during the parsing of
  tables with invalid content.)</p>

  <p>If an element created by the <a href="#insert-an-html-element">insert an HTML element</a>
  algorithm is a <a href="forms.html#form-associated-element">form-associated element</a>, and the
  <a href="#form-element-pointer"><code title="">form</code> element pointer</a> is not null,
  and the newly created element doesn't have a <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code> attribute, the user agent must
  <a href="association-of-controls-and-forms.html#concept-form-association" title="concept-form-association">associate</a> the newly
  created element with the <code><a href="the-form-element.html#the-form-element">form</a></code> element pointed to by the
  <a href="#form-element-pointer"><code title="">form</code> element pointer</a> when the
  element is inserted, instead of running the <a href="association-of-controls-and-forms.html#reset-the-form-owner">reset the form
  owner</a> algorithm.</p>

  <hr><p>When the steps below require the UA to <dfn id="insert-a-foreign-element">insert a foreign
  element</dfn> for a token, the UA must first <a href="#create-an-element-for-the-token">create an element
  for the token</a> in the given namespace, and then append this
  node to the <a href="#current-node">current node</a>, and push it onto the
  <a href="#stack-of-open-elements">stack of open elements</a> so that it is the new
  <a href="#current-node">current node</a>. If the newly created element has an <code title="">xmlns</code> attribute in the <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a>
  whose value is not exactly the same as the element's namespace, that
  is a <a href="#parse-error">parse error</a>. Similarly, if the newly created
  element has an <code title="">xmlns:xlink</code> attribute in the
  <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a> whose value is not the <a href="namespaces.html#xlink-namespace">XLink
  Namespace</a>, that is a <a href="#parse-error">parse error</a>.</p>

  <p>When the steps below require the user agent to <dfn id="adjust-mathml-attributes">adjust MathML
  attributes</dfn> for a token, then, if the token has an attribute
  named <code title="">definitionurl</code>, change its name to <code title="">definitionURL</code> (note the case difference).</p>

  <p>When the steps below require the user agent to <dfn id="adjust-svg-attributes">adjust SVG
  attributes</dfn> for a token, then, for each attribute on the token
  whose attribute name is one of the ones in the first column of the
  following table, change the attribute's name to the name given in
  the corresponding cell in the second column. (This fixes the case of
  SVG attributes that are not all lowercase.)</p>

  <table><thead><tr><th> Attribute name on token </th><th> Attribute name on element
   </th></tr></thead><tbody><tr><td> <code title="">attributename</code> </td><td> <code title="">attributeName</code>
    </td></tr><tr><td> <code title="">attributetype</code> </td><td> <code title="">attributeType</code>
    </td></tr><tr><td> <code title="">basefrequency</code> </td><td> <code title="">baseFrequency</code>
    </td></tr><tr><td> <code title="">baseprofile</code> </td><td> <code title="">baseProfile</code>
    </td></tr><tr><td> <code title="">calcmode</code> </td><td> <code title="">calcMode</code>
    </td></tr><tr><td> <code title="">clippathunits</code> </td><td> <code title="">clipPathUnits</code>
    </td></tr><tr><td> <code title="">contentscripttype</code> </td><td> <code title="">contentScriptType</code>
    </td></tr><tr><td> <code title="">contentstyletype</code> </td><td> <code title="">contentStyleType</code>
    </td></tr><tr><td> <code title="">diffuseconstant</code> </td><td> <code title="">diffuseConstant</code>
    </td></tr><tr><td> <code title="">edgemode</code> </td><td> <code title="">edgeMode</code>
    </td></tr><tr><td> <code title="">externalresourcesrequired</code> </td><td> <code title="">externalResourcesRequired</code>
    </td></tr><tr><td> <code title="">filterres</code> </td><td> <code title="">filterRes</code>
    </td></tr><tr><td> <code title="">filterunits</code> </td><td> <code title="">filterUnits</code>
    </td></tr><tr><td> <code title="">glyphref</code> </td><td> <code title="">glyphRef</code>
    </td></tr><tr><td> <code title="">gradienttransform</code> </td><td> <code title="">gradientTransform</code>
    </td></tr><tr><td> <code title="">gradientunits</code> </td><td> <code title="">gradientUnits</code>
    </td></tr><tr><td> <code title="">kernelmatrix</code> </td><td> <code title="">kernelMatrix</code>
    </td></tr><tr><td> <code title="">kernelunitlength</code> </td><td> <code title="">kernelUnitLength</code>
    </td></tr><tr><td> <code title="">keypoints</code> </td><td> <code title="">keyPoints</code>
    </td></tr><tr><td> <code title="">keysplines</code> </td><td> <code title="">keySplines</code>
    </td></tr><tr><td> <code title="">keytimes</code> </td><td> <code title="">keyTimes</code>
    </td></tr><tr><td> <code title="">lengthadjust</code> </td><td> <code title="">lengthAdjust</code>
    </td></tr><tr><td> <code title="">limitingconeangle</code> </td><td> <code title="">limitingConeAngle</code>
    </td></tr><tr><td> <code title="">markerheight</code> </td><td> <code title="">markerHeight</code>
    </td></tr><tr><td> <code title="">markerunits</code> </td><td> <code title="">markerUnits</code>
    </td></tr><tr><td> <code title="">markerwidth</code> </td><td> <code title="">markerWidth</code>
    </td></tr><tr><td> <code title="">maskcontentunits</code> </td><td> <code title="">maskContentUnits</code>
    </td></tr><tr><td> <code title="">maskunits</code> </td><td> <code title="">maskUnits</code>
    </td></tr><tr><td> <code title="">numoctaves</code> </td><td> <code title="">numOctaves</code>
    </td></tr><tr><td> <code title="">pathlength</code> </td><td> <code title="">pathLength</code>
    </td></tr><tr><td> <code title="">patterncontentunits</code> </td><td> <code title="">patternContentUnits</code>
    </td></tr><tr><td> <code title="">patterntransform</code> </td><td> <code title="">patternTransform</code>
    </td></tr><tr><td> <code title="">patternunits</code> </td><td> <code title="">patternUnits</code>
    </td></tr><tr><td> <code title="">pointsatx</code> </td><td> <code title="">pointsAtX</code>
    </td></tr><tr><td> <code title="">pointsaty</code> </td><td> <code title="">pointsAtY</code>
    </td></tr><tr><td> <code title="">pointsatz</code> </td><td> <code title="">pointsAtZ</code>
    </td></tr><tr><td> <code title="">preservealpha</code> </td><td> <code title="">preserveAlpha</code>
    </td></tr><tr><td> <code title="">preserveaspectratio</code> </td><td> <code title="">preserveAspectRatio</code>
    </td></tr><tr><td> <code title="">primitiveunits</code> </td><td> <code title="">primitiveUnits</code>
    </td></tr><tr><td> <code title="">refx</code> </td><td> <code title="">refX</code>
    </td></tr><tr><td> <code title="">refy</code> </td><td> <code title="">refY</code>
    </td></tr><tr><td> <code title="">repeatcount</code> </td><td> <code title="">repeatCount</code>
    </td></tr><tr><td> <code title="">repeatdur</code> </td><td> <code title="">repeatDur</code>
    </td></tr><tr><td> <code title="">requiredextensions</code> </td><td> <code title="">requiredExtensions</code>
    </td></tr><tr><td> <code title="">requiredfeatures</code> </td><td> <code title="">requiredFeatures</code>
    </td></tr><tr><td> <code title="">specularconstant</code> </td><td> <code title="">specularConstant</code>
    </td></tr><tr><td> <code title="">specularexponent</code> </td><td> <code title="">specularExponent</code>
    </td></tr><tr><td> <code title="">spreadmethod</code> </td><td> <code title="">spreadMethod</code>
    </td></tr><tr><td> <code title="">startoffset</code> </td><td> <code title="">startOffset</code>
    </td></tr><tr><td> <code title="">stddeviation</code> </td><td> <code title="">stdDeviation</code>
    </td></tr><tr><td> <code title="">stitchtiles</code> </td><td> <code title="">stitchTiles</code>
    </td></tr><tr><td> <code title="">surfacescale</code> </td><td> <code title="">surfaceScale</code>
    </td></tr><tr><td> <code title="">systemlanguage</code> </td><td> <code title="">systemLanguage</code>
    </td></tr><tr><td> <code title="">tablevalues</code> </td><td> <code title="">tableValues</code>
    </td></tr><tr><td> <code title="">targetx</code> </td><td> <code title="">targetX</code>
    </td></tr><tr><td> <code title="">targety</code> </td><td> <code title="">targetY</code>
    </td></tr><tr><td> <code title="">textlength</code> </td><td> <code title="">textLength</code>
    </td></tr><tr><td> <code title="">viewbox</code> </td><td> <code title="">viewBox</code>
    </td></tr><tr><td> <code title="">viewtarget</code> </td><td> <code title="">viewTarget</code>
    </td></tr><tr><td> <code title="">xchannelselector</code> </td><td> <code title="">xChannelSelector</code>
    </td></tr><tr><td> <code title="">ychannelselector</code> </td><td> <code title="">yChannelSelector</code>
    </td></tr><tr><td> <code title="">zoomandpan</code> </td><td> <code title="">zoomAndPan</code>
  </td></tr></tbody></table><p>When the steps below require the user agent to <dfn id="adjust-foreign-attributes">adjust
  foreign attributes</dfn> for a token, then, if any of the attributes
  on the token match the strings given in the first column of the
  following table, let the attribute be a namespaced attribute, with
  the prefix being the string given in the corresponding cell in the
  second column, the local name being the string given in the
  corresponding cell in the third column, and the namespace being the
  namespace given in the corresponding cell in the fourth
  column. (This fixes the use of namespaced attributes, in particular
  <a href="global-attributes.html#attr-xml-lang" title="attr-xml-lang"><code title="">lang</code> attributes in
  the <span>XML namespace</span></a>.)</p>

  <table><thead><tr><th> Attribute name </th><th> Prefix </th><th> Local name </th><th> Namespace
   </th></tr></thead><tbody><tr><td> <code title="">xlink:actuate</code> </td><td> <code title="">xlink</code> </td><td> <code title="">actuate</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a>
    </td></tr><tr><td> <code title="">xlink:arcrole</code> </td><td> <code title="">xlink</code> </td><td> <code title="">arcrole</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a>
    </td></tr><tr><td> <code title="">xlink:href</code> </td><td> <code title="">xlink</code> </td><td> <code title="">href</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a>
    </td></tr><tr><td> <code title="">xlink:role</code> </td><td> <code title="">xlink</code> </td><td> <code title="">role</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a>
    </td></tr><tr><td> <code title="">xlink:show</code> </td><td> <code title="">xlink</code> </td><td> <code title="">show</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a>
    </td></tr><tr><td> <code title="">xlink:title</code> </td><td> <code title="">xlink</code> </td><td> <code title="">title</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a>
    </td></tr><tr><td> <code title="">xlink:type</code> </td><td> <code title="">xlink</code> </td><td> <code title="">type</code> </td><td> <a href="namespaces.html#xlink-namespace">XLink namespace</a>
    </td></tr><tr><td> <code title="">xml:base</code> </td><td> <code title="">xml</code> </td><td> <code title="">base</code> </td><td> <a href="namespaces.html#xml-namespace">XML namespace</a> <!-- attr-xml-base -->
    </td></tr><tr><td> <code title="">xml:lang</code> </td><td> <code title="">xml</code> </td><td> <code title="">lang</code> </td><td> <a href="namespaces.html#xml-namespace">XML namespace</a>
    </td></tr><tr><td> <code title="">xml:space</code> </td><td> <code title="">xml</code> </td><td> <code title="">space</code> </td><td> <a href="namespaces.html#xml-namespace">XML namespace</a>
    </td></tr><tr><td> <code title="">xmlns</code> </td><td> (none) </td><td> <code title="">xmlns</code> </td><td> <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a>
    </td></tr><tr><td> <code title="">xmlns:xlink</code> </td><td> <code title="">xmlns</code> </td><td> <code title="">xlink</code> </td><td> <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a>
  </td></tr></tbody></table><hr><p>The <dfn id="generic-raw-text-element-parsing-algorithm">generic raw text element parsing algorithm</dfn> and the
  <dfn id="generic-rcdata-element-parsing-algorithm">generic RCDATA element parsing algorithm</dfn> consist of the
  following steps. These algorithms are always invoked in response to
  a start tag token.</p>

  <ol><li><p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p></li>

   <li><p>If the algorithm that was invoked is the <a href="#generic-raw-text-element-parsing-algorithm">generic raw
   text element parsing algorithm</a>, switch the tokenizer to the
   <a href="#rawtext-state">RAWTEXT state</a>; otherwise the algorithm invoked
   was the <a href="#generic-rcdata-element-parsing-algorithm">generic RCDATA element parsing algorithm</a>,
   switch the tokenizer to the <a href="#rcdata-state">RCDATA state</a>.</p></li>

   <li><p>Let the <a href="#original-insertion-mode">original insertion mode</a> be the current
   <a href="#insertion-mode">insertion mode</a>.</p>

   </li><li><p>Then, switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-incdata" title="insertion mode: text">text</a>".</p></li>

  </ol><h5 id="closing-elements-that-have-implied-end-tags"><span class="secno">8.2.5.2 </span>Closing elements that have implied end tags</h5>

  <p>When the steps below require the UA to <dfn id="generate-implied-end-tags">generate implied end
  tags</dfn>, then, while the <a href="#current-node">current node</a> is a
  <code><a href="the-dd-element.html#the-dd-element">dd</a></code> element, a <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element, an
  <code><a href="the-li-element.html#the-li-element">li</a></code> element, an <code><a href="the-option-element.html#the-option-element">option</a></code> element, an
  <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element, a <code><a href="the-p-element.html#the-p-element">p</a></code> element, an
  <code><a href="the-rp-element.html#the-rp-element">rp</a></code> element, or an <code><a href="the-rt-element.html#the-rt-element">rt</a></code> element, the UA must
  pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
  elements</a>.</p>

  <p>If a step requires the UA to generate implied end tags but lists
  an element to exclude from the process, then the UA must perform the
  above steps as if that element was not in the above list.</p>


  <h5 id="foster-parenting"><span class="secno">8.2.5.3 </span>Foster parenting</h5>

  <p>Foster parenting happens when content is misnested in tables.</p>

  <p>When a node <var title="">node</var> is to be <dfn id="foster-parent" title="foster
  parent">foster parented</dfn>, the node <var title="">node</var>
  must be inserted into the <i><a href="#foster-parent-element">foster parent element</a></i>.</p>

  <p>The <dfn id="foster-parent-element">foster parent element</dfn> is the parent element of the
  last <code><a href="the-table-element.html#the-table-element">table</a></code> element in the <a href="#stack-of-open-elements">stack of open
  elements</a>, if there is a <code><a href="the-table-element.html#the-table-element">table</a></code> element and it has
  such a parent element.</p>

  <p class="note">It might have no parent or some other kind parent if
  a script manipulated the DOM after the element was inserted by the
  parser.</p>

  <p>If there is no <code><a href="the-table-element.html#the-table-element">table</a></code> element in the <a href="#stack-of-open-elements">stack of
  open elements</a> (<a href="#fragment-case">fragment case</a>), then the
  <i><a href="#foster-parent-element">foster parent element</a></i> is the first element in the <a href="#stack-of-open-elements">stack
  of open elements</a> (the <code><a href="the-html-element.html#the-html-element">html</a></code> element). Otherwise,
  if there is a <code><a href="the-table-element.html#the-table-element">table</a></code> element in the <a href="#stack-of-open-elements">stack of open
  elements</a>, but the last <code><a href="the-table-element.html#the-table-element">table</a></code> element in the
  <a href="#stack-of-open-elements">stack of open elements</a> has no parent, or its parent
  node is not an element, then the <i><a href="#foster-parent-element">foster parent element</a></i> is the
  element before the last <code><a href="the-table-element.html#the-table-element">table</a></code> element in the
  <a href="#stack-of-open-elements">stack of open elements</a>.</p>

  <p>If the <i><a href="#foster-parent-element">foster parent element</a></i> is the parent element of the
  last <code><a href="the-table-element.html#the-table-element">table</a></code> element in the <a href="#stack-of-open-elements">stack of open
  elements</a>, then <var title="">node</var> must be inserted into
  the <i><a href="#foster-parent-element">foster parent element</a></i>, immediately <em>before</em> the
  last <code><a href="the-table-element.html#the-table-element">table</a></code> element in the <a href="#stack-of-open-elements">stack of open
  elements</a>; otherwise, <var title="">node</var> must be
  <em>appended</em> to the <i><a href="#foster-parent-element">foster parent element</a></i>.</p>



  <h5 id="parsing-main-inhtml"><span class="secno">8.2.5.4 </span>The rules for parsing tokens in HTML content</h5>


  <h6 id="the-initial-insertion-mode"><span class="secno">8.2.5.4.1 </span>The "<dfn title="insertion mode: initial">initial</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#the-initial-insertion-mode" title="insertion mode: initial">initial</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p>Ignore the token.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <code><a href="dom.html#document">Document</a></code>
    object with the <code title="">data</code> attribute set to the
    data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>

    <p>If the DOCTYPE token's name is not a
    <a href="infrastructure.html#case-sensitive">case-sensitive</a> match for the string "<code title="">html</code>", or the token's public identifier is not
    missing, or the token's system identifier is neither missing nor a
    <a href="infrastructure.html#case-sensitive">case-sensitive</a> match for the string
    "<code><a href="urls.html#about:legacy-compat">about:legacy-compat</a></code>", and none of the sets of
    conditions in the following list are matched, then there is a
    <a href="#parse-error">parse error</a>.</p>

    <ul><!-- only things that trigger no-quirks mode and were valid in
     some other spec are allowed in this list --><li>The DOCTYPE token's name is a <a href="infrastructure.html#case-sensitive">case-sensitive</a>
     match for the string "<code title="">html</code>", the token's
     public identifier is the <a href="infrastructure.html#case-sensitive">case-sensitive</a> string
     "<code title="">-//W3C//DTD&#160;HTML&#160;4.0//EN</code>", and
     the token's system identifier is either missing or the
     <a href="infrastructure.html#case-sensitive">case-sensitive</a> string "<code title="">http://www.w3.org/TR/REC-html40/strict.dtd</code>".</li>

     <li>The DOCTYPE token's name is a <a href="infrastructure.html#case-sensitive">case-sensitive</a>
     match for the string "<code title="">html</code>", the token's
     public identifier is the <a href="infrastructure.html#case-sensitive">case-sensitive</a> string
     "<code title="">-//W3C//DTD&#160;HTML&#160;4.01//EN</code>", and
     the token's system identifier is either missing or the
     <a href="infrastructure.html#case-sensitive">case-sensitive</a> string "<code title="">http://www.w3.org/TR/html4/strict.dtd</code>".</li>

     <li>The DOCTYPE token's name is a <a href="infrastructure.html#case-sensitive">case-sensitive</a>
     match for the string "<code title="">html</code>", the token's
     public identifier is the <a href="infrastructure.html#case-sensitive">case-sensitive</a> string
     "<code title="">-//W3C//DTD&#160;XHTML&#160;1.0&#160;Strict//EN</code>",
     and the token's system identifier is the
     <a href="infrastructure.html#case-sensitive">case-sensitive</a> string "<code title="">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</code>".</li>

     <li>The DOCTYPE token's name is a <a href="infrastructure.html#case-sensitive">case-sensitive</a>
     match for the string "<code title="">html</code>", the token's
     public identifier is the <a href="infrastructure.html#case-sensitive">case-sensitive</a> string
     "<code title="">-//W3C//DTD&#160;XHTML&#160;1.1//EN</code>", and
     the token's system identifier is the <a href="infrastructure.html#case-sensitive">case-sensitive</a>
     string "<code title="">http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd</code>".</li>

    </ul><p>Conformance checkers may, based on the values (including
    presence or lack thereof) of the DOCTYPE token's name, public
    identifier, or system identifier, switch to a conformance checking
    mode for another language (e.g. based on the DOCTYPE token a
    conformance checker could recognize that the document is an
    HTML4-era document, and defer to an HTML4 conformance
    checker.)</p>

    <p>Append a <code><a href="infrastructure.html#documenttype">DocumentType</a></code> node to the
    <code><a href="dom.html#document">Document</a></code> node, with the <code title="">name</code>
    attribute set to the name given in the DOCTYPE token, or the empty
    string if the name was missing; the <code title="">publicId</code>
    attribute set to the public identifier given in the DOCTYPE token,
    or the empty string if the public identifier was missing; the
    <code title="">systemId</code> attribute set to the system
    identifier given in the DOCTYPE token, or the empty string if the
    system identifier was missing; and the other attributes specific
    to <code><a href="infrastructure.html#documenttype">DocumentType</a></code> objects set to null and empty lists
    as appropriate. Associate the <code><a href="infrastructure.html#documenttype">DocumentType</a></code> node with
    the <code><a href="dom.html#document">Document</a></code> object so that it is returned as the
    value of the <code title="">doctype</code> attribute of the
    <code><a href="dom.html#document">Document</a></code> object.</p>

    <p id="quirks-mode-doctypes">Then, if the DOCTYPE token matches
    one of the conditions in the following list, then set the
    <code><a href="dom.html#document">Document</a></code> to <a href="infrastructure.html#quirks-mode">quirks mode</a>:</p>

    <ul class="brief"><li> The <i>force-quirks flag</i> is set to <i>on</i>. </li>
     <li> The name is set to anything other than "<code title="">html</code>" (compared <a href="infrastructure.html#case-sensitive" title="case-sensitive">case-sensitively</a>). </li>
     <li> The public identifier starts with: "<code title="">+//Silmaril//dtd html Pro v0r11 19970101//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//AdvaSoft Ltd//DTD HTML 3.0 asWedit + extensions//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//AS//DTD HTML 3.0 asWedit + extensions//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 2.0 Level 1//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 2.0 Level 2//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 2.0 Strict Level 1//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 2.0 Strict Level 2//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 2.0 Strict//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 2.0//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 2.1E//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 3.0//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML 3.0//EN//</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 3.2 Final//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 3.2//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML 3//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Level 0//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Level 0//EN//2.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Level 1//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Level 1//EN//2.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Level 2//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Level 2//EN//2.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Level 3//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Level 3//EN//3.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Strict Level 0//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Strict Level 0//EN//2.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Strict Level 1//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Strict Level 1//EN//2.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Strict Level 2//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Strict Level 2//EN//2.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Strict Level 3//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Strict Level 3//EN//3.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML Strict//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Strict//EN//2.0</code>" </li>-->
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML Strict//EN//3.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//IETF//DTD HTML//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML//EN//2.0</code>" </li>-->
   <!--<li> The public identifier is set to: "<code title="">-//IETF//DTD HTML//EN//3.0</code>" </li>-->
     <li> The public identifier starts with: "<code title="">-//Metrius//DTD Metrius Presentational//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Microsoft//DTD Internet Explorer 2.0 HTML Strict//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Microsoft//DTD Internet Explorer 2.0 HTML//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Microsoft//DTD Internet Explorer 2.0 Tables//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Microsoft//DTD Internet Explorer 3.0 HTML Strict//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Microsoft//DTD Internet Explorer 3.0 HTML//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Microsoft//DTD Internet Explorer 3.0 Tables//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Netscape Comm. Corp.//DTD HTML//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Netscape Comm. Corp.//DTD Strict HTML//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//O'Reilly and Associates//DTD HTML 2.0//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//O'Reilly and Associates//DTD HTML Extended 1.0//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//O'Reilly and Associates//DTD HTML Extended Relaxed 1.0//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//SoftQuad Software//DTD HoTMetaL PRO 6.0::19990601::extensions to HTML 4.0//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//SoftQuad//DTD HoTMetaL PRO 4.0::19971010::extensions to HTML 4.0//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Spyglass//DTD HTML 2.0 Extended//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//SQ//DTD HTML 2.0 HoTMetaL + extensions//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Sun Microsystems Corp.//DTD HotJava HTML//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//Sun Microsystems Corp.//DTD HotJava Strict HTML//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML 3 1995-03-24//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML 3.2 Draft//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML 3.2 Final//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML 3.2//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML 3.2S Draft//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML 4.0 Frameset//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML 4.0 Transitional//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML Experimental 19960712//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD HTML Experimental 970421//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD W3 HTML//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3O//DTD W3 HTML 3.0//<!--EN--></code>" </li>
   <!--<li> The public identifier is set to: "<code title="">-//W3O//DTD W3 HTML 3.0//EN//</code>" </li>-->
     <li> The public identifier is set to: "<code title="">-//W3O//DTD W3 HTML Strict 3.0//EN//</code>" </li>
     <li> The public identifier starts with: "<code title="">-//WebTechs//DTD Mozilla HTML 2.0//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//WebTechs//DTD Mozilla HTML//<!--EN--></code>" </li>
     <li> The public identifier is set to: "<code title="">-/W3C/DTD HTML 4.0 Transitional/EN</code>" </li>
     <li> The public identifier is set to: "<code title="">HTML</code>" </li>
     <li> The system identifier is set to: "<code title="">http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd</code>" </li>
     <li> The system identifier is missing and the public identifier starts with: "<code title="">-//W3C//DTD HTML 4.01 Frameset//<!--EN--></code>" </li>
     <li> The system identifier is missing and the public identifier starts with: "<code title="">-//W3C//DTD HTML 4.01 Transitional//<!--EN--></code>" </li>
    </ul><p>Otherwise, if the DOCTYPE token matches one of the conditions
    in the following list, then set the <code><a href="dom.html#document">Document</a></code> to
    <a href="infrastructure.html#limited-quirks-mode">limited-quirks mode</a>:</p>

    <ul class="brief"><li> The public identifier starts with: "<code title="">-//W3C//DTD XHTML 1.0 Frameset//<!--EN--></code>" </li>
     <li> The public identifier starts with: "<code title="">-//W3C//DTD XHTML 1.0 Transitional//<!--EN--></code>" </li>
     <li> The system identifier is not missing and the public identifier starts with: "<code title="">-//W3C//DTD HTML 4.01 Frameset//<!--EN--></code>" </li>
     <li> The system identifier is not missing and the public identifier starts with: "<code title="">-//W3C//DTD HTML 4.01 Transitional//<!--EN--></code>" </li>
    </ul><p>The system identifier and public identifier strings must be
    compared to the values given in the lists above in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
    case-insensitive</a> manner. A system identifier whose value is
    the empty string is not considered missing for the purposes of the
    conditions above.</p>

    <p>Then, switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#the-before-html-insertion-mode" title="insertion mode: before html">before html</a>".</p>

   </dd>

   <dt>Anything else</dt>
   <dd>

    <p>If the document is <em>not</em> <a href="the-iframe-element.html#an-iframe-srcdoc-document">an <code>iframe</code>
    <code title="attr-iframe-srcdoc">srcdoc</code> document</a>,
    then this is a <a href="#parse-error">parse error</a>; set the
    <code><a href="dom.html#document">Document</a></code> to <a href="infrastructure.html#quirks-mode">quirks mode</a>.</p>

    <p>In any case, switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#the-before-html-insertion-mode" title="insertion mode: before html">before html</a>", then
    reprocess the current token.</p>

   </dd>

  </dl><h6 id="the-before-html-insertion-mode"><span class="secno">8.2.5.4.2 </span>The "<dfn title="insertion mode: before html">before html</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#the-before-html-insertion-mode" title="insertion mode: before html">before html</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <code><a href="dom.html#document">Document</a></code>
    object with the <code title="">data</code> attribute set to the
    data given in the comment token.</p>
   </dd>

   <dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p>Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>

    <p><a href="#create-an-element-for-the-token">Create an element for the token</a> in the <a href="namespaces.html#html-namespace-0">HTML
    namespace</a>. Append it to the <code><a href="dom.html#document">Document</a></code>
    object. Put this element in the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p id="parser-appcache">If the <code><a href="dom.html#document">Document</a></code> is being
    loaded as part of <a href="#navigate" title="navigate">navigation</a> of a
    <a href="#browsing-context">browsing context</a>, then: if the newly created element
    has a <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code> attribute
    whose value is not the empty string, then <a href="urls.html#resolve-a-url" title="resolve a
    url">resolve</a> the value of that attribute to an
    <a href="urls.html#absolute-url">absolute URL</a>, relative to the newly created element,
    and if that is successful, run the <a href="#concept-appcache-init" title="concept-appcache-init">application cache selection
    algorithm</a> with the resulting <a href="urls.html#absolute-url">absolute URL</a> with
    any <a href="urls.html#url-fragment" title="url-fragment">&lt;fragment&gt;</a> component
    removed; otherwise, if there is no such attribute, or its value is
    the empty string, or resolving its value fails, run the <a href="#concept-appcache-init" title="concept-appcache-init">application cache selection
    algorithm</a> with no manifest. The algorithm must be passed
    the <code><a href="dom.html#document">Document</a></code> object.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#the-before-head-insertion-mode" title="insertion mode: before head">before head</a>".</p>

   </dd>

   <dt>An end tag whose tag name is one of: "head", "body", "html", "br"</dt>
   <dd>
    <p>Act as described in the "anything else" entry below.</p>
   </dd>

   <dt>Any other end tag</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>

    <p>Create an <code><a href="the-html-element.html#the-html-element">html</a></code> element. Append it to the
    <code><a href="dom.html#document">Document</a></code> object. Put this element in the <a href="#stack-of-open-elements">stack
    of open elements</a>.</p>

    <p>If the <code><a href="dom.html#document">Document</a></code> is being loaded as part of <a href="#navigate" title="navigate">navigation</a> of a <a href="#browsing-context">browsing
    context</a>, then: run the <a href="#concept-appcache-init" title="concept-appcache-init">application cache selection
    algorithm</a> with no manifest, passing it the
    <code><a href="dom.html#document">Document</a></code> object.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#the-before-head-insertion-mode" title="insertion mode: before head">before head</a>", then
    reprocess the current token.</p>

   </dd>

  </dl><p>The root element can end up being removed from the
  <code><a href="dom.html#document">Document</a></code> object, e.g. by scripts; nothing in particular
  happens in such cases, content continues being appended to the nodes
  as described in the next section.</p>


  <h6 id="the-before-head-insertion-mode"><span class="secno">8.2.5.4.3 </span>The "<dfn title="insertion mode: before head">before head</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#the-before-head-insertion-mode" title="insertion mode: before head">before head</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p>Ignore the token.</p> <!-- :-( -->
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "head"</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Set the <a href="#head-element-pointer"><code title="">head</code> element pointer</a>
    to the newly created <code><a href="the-head-element.html#the-head-element">head</a></code> element.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>".</p>

   </dd>

   <dt>An end tag whose tag name is one of: "head", "body", "html", "br"</dt>
   <dd>

    <p>Act as if a start tag token with the tag name "head" and no
    attributes had been seen, then reprocess the current token.</p>

   </dd>

   <dt>Any other end tag</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>

   </dd>

   <dt>Anything else</dt>
   <dd>

    <p>Act as if a start tag token with the tag name "head" and no
    attributes had been seen, then reprocess the current
    token.</p>

   </dd>

  </dl><h6 id="parsing-main-inhead"><span class="secno">8.2.5.4.4 </span>The "<dfn title="insertion mode: in head">in head</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p><a href="#insert-a-character" title="insert a character">Insert the character</a> into
    the <a href="#current-node">current node</a>.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>A start tag whose tag name is one of: "base", "basefont",
   "bgsound", "command", "link"</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. Immediately
    pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p>

   </dd>

   <dt>A start tag whose tag name is "meta"</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. Immediately
    pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p>

    <p id="meta-charset-during-parse">If the element has a <code title="attr-meta-charset"><a href="the-meta-element.html#attr-meta-charset">charset</a></code> attribute, and its value
    is either a supported <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character
    encoding</a> or <a href="infrastructure.html#a-utf-16-encoding">a UTF-16 encoding</a>, and the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> is currently
    <i>tentative</i>, then <a href="#change-the-encoding">change the encoding</a> to the
    encoding given by the value of the <code title="attr-meta-charset"><a href="the-meta-element.html#attr-meta-charset">charset</a></code> attribute.</p>

    <p>Otherwise, if the element has an <code title="attr-meta-http-equiv"><a href="the-meta-element.html#attr-meta-http-equiv">http-equiv</a></code> attribute whose
    value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the
    string "<code title="">Content-Type</code>", and the element has a
    <code title="attr-meta-content"><a href="the-meta-element.html#attr-meta-content">content</a></code> attribute, and
    applying the <a href="urls.html#algorithm-for-extracting-an-encoding-from-a-meta-element">algorithm for extracting an encoding from a
    <code>meta</code> element</a> to that attribute's value returns
    a supported <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a> or
    <a href="infrastructure.html#a-utf-16-encoding">a UTF-16 encoding</a>, and the <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> is currently
    <i>tentative</i>, then <a href="#change-the-encoding">change the encoding</a> to the
    extracted encoding.</p>

   </dd>

   <dt>A start tag whose tag name is "title"</dt>
   <dd>
    <p>Follow the <a href="#generic-rcdata-element-parsing-algorithm">generic RCDATA element parsing algorithm</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "noscript", if the <a href="#scripting-flag">scripting flag</a> is enabled</dt>
   <dt>A start tag whose tag name is one of: "noframes", "style"</dt>
   <dd>
    <p>Follow the <a href="#generic-raw-text-element-parsing-algorithm">generic raw text element parsing algorithm</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "noscript", if the <a href="#scripting-flag">scripting flag</a> is disabled</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inheadnoscript" title="insertion mode: in head noscript">in head
    noscript</a>".</p>

   </dd>

   <dt id="scriptTag">A start tag whose tag name is "script"</dt>
   <dd>

    <p>Run these steps:</p>

    <ol><li><p><a href="#create-an-element-for-the-token">Create an element for the token</a> in the
     <a href="namespaces.html#html-namespace-0">HTML namespace</a>.</p></li>

     <li>

      <p>Mark the element as being <a href="the-script-element.html#parser-inserted">"parser-inserted"</a> and
      unset the element's <a href="the-script-element.html#force-async">"force-async"</a> flag.</p>

      <p class="note">This ensures that, if the script is external,
      any <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code>
      calls in the script will execute in-line, instead of blowing the
      document away, as would happen in most other cases. It also
      prevents the script from executing until the end tag is
      seen.</p>

     </li>

     <li><p>If the parser was originally created for the <a href="#html-fragment-parsing-algorithm">HTML
     fragment parsing algorithm</a>, then mark the
     <code><a href="the-script-element.html#the-script-element">script</a></code> element as <a href="the-script-element.html#already-started">"already
     started"</a>. (<a href="#fragment-case">fragment case</a>)</p></li>

     <li><p>Append the new element to the <a href="#current-node">current node</a>
     and push it onto the <a href="#stack-of-open-elements">stack of open
     elements</a>.</p></li>

     <li><p>Switch the tokenizer to the <a href="#script-data-state">script data
     state</a>.</p></li>

     <li><p>Let the <a href="#original-insertion-mode">original insertion mode</a> be the current
     <a href="#insertion-mode">insertion mode</a>.</p>

     </li><li><p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-incdata" title="insertion mode: text">text</a>".</p></li>

    </ol></dd>

   <dt>An end tag whose tag name is "head"</dt>
   <dd>

    <p>Pop the <a href="#current-node">current node</a> (which will be the
    <code><a href="the-head-element.html#the-head-element">head</a></code> element) off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#the-after-head-insertion-mode" title="insertion mode: after head">after head</a>".</p>

   </dd>

   <dt>An end tag whose tag name is one of: "body", "html", "br"</dt>
   <dd>
    <p>Act as described in the "anything else" entry below.</p>
   </dd>

   <dt>A start tag whose tag name is "head"</dt>
   <dt>Any other end tag</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>

    <!-- can't get here with an EOF and a fragment case -->

    <p>Act as if an end tag token with the tag name "head" had
    been seen, and reprocess the current token.</p>

   </dd>

  </dl><h6 id="parsing-main-inheadnoscript"><span class="secno">8.2.5.4.5 </span>The "<dfn title="insertion mode: in head noscript">in head noscript</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-inheadnoscript" title="insertion mode: in head noscript">in head noscript</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end tag whose tag name is "noscript"</dt>
   <dd>

    <p>Pop the <a href="#current-node">current node</a> (which will be a
    <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code> element) from the <a href="#stack-of-open-elements">stack of open
    elements</a>; the new <a href="#current-node">current node</a> will be a
    <code><a href="the-head-element.html#the-head-element">head</a></code> element.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>".</p>

   </dd>

   <dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dt>A comment token</dt>
   <dt>A start tag whose tag name is one of: "basefont", "bgsound",
   "link", "meta", "noframes", "style"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end tag whose tag name is "br"</dt>
   <dd>
    <p>Act as described in the "anything else" entry below.</p>
   </dd>

   <dt>A start tag whose tag name is one of: "head", "noscript"</dt>
   <dt>Any other end tag</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>

    <!-- can't get here with an EOF and a fragment case -->

    <p><a href="#parse-error">Parse error</a>. Act as if an end tag with the tag
    name "noscript" had been seen and reprocess the current
    token.</p>

   </dd>

  </dl><h6 id="the-after-head-insertion-mode"><span class="secno">8.2.5.4.6 </span>The "<dfn title="insertion mode: after head">after head</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#the-after-head-insertion-mode" title="insertion mode: after head">after head</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p><a href="#insert-a-character" title="insert a character">Insert the character</a> into
    the <a href="#current-node">current node</a>.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "body"</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>".</p>

   </dd>

   <dt>A start tag whose tag name is "frameset"</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inframeset" title="insertion mode: in frameset">in frameset</a>".</p>

   </dd>

   <dt>A start tag token whose tag name is one of: "base", "basefont",
   "bgsound", "link", "meta", "noframes", "script", "style",
   "title"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p>Push the node pointed to by the <a href="#head-element-pointer"><code title="">head</code> element pointer</a> onto the
    <a href="#stack-of-open-elements">stack of open elements</a>.</p>

    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>

    <p>Remove the node pointed to by the <a href="#head-element-pointer"><code title="">head</code> element pointer</a> from the <a href="#stack-of-open-elements">stack
    of open elements</a>.</p>

    <p class="note">The <a href="#head-element-pointer"><code title="">head</code> element
    pointer</a> cannot be null at this point.</p>

   </dd>

   <dt>An end tag whose tag name is one of: "body", "html", "br"</dt>
   <dd>
    <p>Act as described in the "anything else" entry below.</p>
   </dd>

   <dt>A start tag whose tag name is "head"</dt>
   <dt>Any other end tag</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>
    <p>Act as if a start tag token with the tag name "body" and no
    attributes had been seen, then set the <a href="#frameset-ok-flag">frameset-ok
    flag</a> back to "ok", and then reprocess the current
    token.</p>
   </dd>

  </dl><h6 id="parsing-main-inbody"><span class="secno">8.2.5.4.7 </span>The "<dfn title="insertion mode: in body">in body</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is U+0000 NULL</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>

    <!-- The D-Link DSL-G604T ADSL router has a zero byte in its
         configuration UI before a <frameset>, which is why U+0000 is
         special-cased here.
         refs: https://bugzilla.mozilla.org/show_bug.cgi?id=563526
               http://www.w3.org/Bugs/Public/show_bug.cgi?id=9659
    -->

   </dd>

   <dt>A character token that is one of U+0009 CHARACTER TABULATION,
   "LF" (U+000A), "FF" (U+000C), "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-a-character" title="insert a character">Insert the token's
    character</a> into the <a href="#current-node">current node</a>.</p>

   </dd>

   <dt>Any other character token</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-a-character" title="insert a character">Insert the token's
    character</a> into the <a href="#current-node">current node</a>.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. For each attribute on the token,
    check to see if the attribute is already present on the top
    element of the <a href="#stack-of-open-elements">stack of open elements</a>. If it is not,
    add the attribute and its corresponding value to that element.</p>
   </dd>

   <dt>A start tag token whose tag name is one of: "base", "basefont",
   "bgsound", "command", "link", "meta", "noframes", "script",
   "style", "title"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "body"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p>If the second element on the <a href="#stack-of-open-elements">stack of open
    elements</a> is not a <code><a href="the-body-element.html#the-body-element">body</a></code> element, or, if the
    <a href="#stack-of-open-elements">stack of open elements</a> has only one node on it,
    then ignore the token. (<a href="#fragment-case">fragment case</a>)</p>

    <p>Otherwise, set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok";
    then, for each attribute on the token, check to see if the
    attribute is already present on the <code><a href="the-body-element.html#the-body-element">body</a></code> element (the
    second element) on the <a href="#stack-of-open-elements">stack of open elements</a>, and if
    it is not, add the attribute and its corresponding value to that
    element.</p>

   </dd>

   <dt>A start tag whose tag name is "frameset"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p>If the second element on the <a href="#stack-of-open-elements">stack of open
    elements</a> is not a <code><a href="the-body-element.html#the-body-element">body</a></code> element, or, if the
    <a href="#stack-of-open-elements">stack of open elements</a> has only one node on it,
    then ignore the token. (<a href="#fragment-case">fragment case</a>)</p>

    <p>If the <a href="#frameset-ok-flag">frameset-ok flag</a> is set to "not ok", ignore
    the token.</p>

    <p>Otherwise, run the following steps:</p>

    <ol><li><p>Remove the second element on the <a href="#stack-of-open-elements">stack of open
     elements</a> from its parent node, if it has one.</p></li>

     <li><p>Pop all the nodes from the bottom of the <a href="#stack-of-open-elements">stack of
     open elements</a>, from the <a href="#current-node">current node</a> up to,
     but not including, the root <code><a href="the-html-element.html#the-html-element">html</a></code> element.</p>

     </li><li><p><a href="#insert-an-html-element">Insert an HTML element</a> for the
     token.</p></li>

     <li><p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inframeset" title="insertion mode: in frameset">in frameset</a>".</p>

    </li></ol></dd>

   <dt>An end-of-file token</dt>
   <dd>

    <p>If there is a node in the <a href="#stack-of-open-elements">stack of open elements</a>
    that is not either a <code><a href="the-dd-element.html#the-dd-element">dd</a></code> element, a <code><a href="the-dt-element.html#the-dt-element">dt</a></code>
    element, an <code><a href="the-li-element.html#the-li-element">li</a></code> element, a <code><a href="the-p-element.html#the-p-element">p</a></code> element, a
    <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> element, a <code><a href="the-td-element.html#the-td-element">td</a></code> element, a
    <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> element, a <code><a href="the-th-element.html#the-th-element">th</a></code> element, a
    <code><a href="the-thead-element.html#the-thead-element">thead</a></code> element, a <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element, the
    <code><a href="the-body-element.html#the-body-element">body</a></code> element, or the <code><a href="the-html-element.html#the-html-element">html</a></code> element, then
    this is a <a href="#parse-error">parse error</a>.</p> <!-- (some of those are
    fragment cases) -->

    <p><a href="#stop-parsing">Stop parsing</a>.</p>

   </dd>

   <dt>An end tag whose tag name is "body"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-scope" title="has an element in scope">have a <code>body</code> element
    in scope</a>, this is a <a href="#parse-error">parse error</a>; ignore the
    token.</p>

    <!-- if we get here, the insertion mode here is forcibly "in
    body". -->

    <p>Otherwise, if there is a node in the <a href="#stack-of-open-elements">stack of open
    elements</a> that is not either a <code><a href="the-dd-element.html#the-dd-element">dd</a></code> element, a
    <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element, an <code><a href="the-li-element.html#the-li-element">li</a></code> element, an
    <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element, an <code><a href="the-option-element.html#the-option-element">option</a></code> element, a
    <code><a href="the-p-element.html#the-p-element">p</a></code> element, an <code><a href="the-rp-element.html#the-rp-element">rp</a></code> element, an
    <code><a href="the-rt-element.html#the-rt-element">rt</a></code> element, a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> element, a
    <code><a href="the-td-element.html#the-td-element">td</a></code> element, a <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> element, a
    <code><a href="the-th-element.html#the-th-element">th</a></code> element, a <code><a href="the-thead-element.html#the-thead-element">thead</a></code> element, a
    <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element, the <code><a href="the-body-element.html#the-body-element">body</a></code> element, or the
    <code><a href="the-html-element.html#the-html-element">html</a></code> element, then this is a <a href="#parse-error">parse
    error</a>.</p> <!-- (some of those are fragment cases, e.g. for
    <tbody> you'd have hit the first paragraph since the <body>
    wouldn't be in scope, unless it was a fragment case) -->

    <!-- If we ever change the frameset-ok flag to an insertion mode,
    then we'd have to somehow keep track of its state when we switch
    to after-body. -->

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-afterbody" title="insertion mode: after body">after body</a>".</p>

   </dd>

   <dt>An end tag whose tag name is "html"</dt>
   <dd>

    <p>Act as if an end tag with tag name "body" had been seen,
    then, if that token wasn't ignored, reprocess the current
    token.</p>

   </dd>

   <!-- start tags for non-phrasing flow content elements -->

   <!-- the normal ones -->
   <dt>A start tag whose tag name is one of: "address", "article",
   "aside", "blockquote", "center", "details", "dialog", "dir", "div",
   "dl", "fieldset", "figcaption", "figure", "footer", "header",
   "hgroup", "menu", "nav", "ol", "p", "section", "summary", "ul"</dt>
   <dd>

    <!-- As of May 2008 this doesn't match any browser exactly, but is
    as close to what IE does as I can get without doing the non-tree
    DOM nonsense, and thus should actually afford better compatibility
    when implemented by the other browsers. -->

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has an
    element in button scope">has a <code>p</code> element in button
    scope</a>, then act as if an end tag with the tag name "p" had
    been seen.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

   </dd>

   <!-- as normal, but close h1-h6 if it's the current node -->
   <dt>A start tag whose tag name is one of: "h1", "h2", "h3", "h4",
   "h5", "h6"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has
    an element in button scope">has a <code>p</code> element in button
    scope</a>, then act as if an end tag with the tag name
    "p" had been seen.</p>

    <p>If the <a href="#current-node">current node</a> is an element whose tag name
    is one of "h1", "h2", "h3", "h4", "h5", or "h6", then this is a
    <a href="#parse-error">parse error</a>; pop the <a href="#current-node">current node</a> off
    the <a href="#stack-of-open-elements">stack of open elements</a>.</p>
    <!-- See https://bugs.webkit.org/show_bug.cgi?id=12646 -->

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

   </dd>

   <!-- as normal, but drops leading newline -->
   <dt>A start tag whose tag name is one of: "pre", "listing"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has
    an element in button scope">has a <code>p</code> element in button
    scope</a>, then act as if an end tag with the tag name
    "p" had been seen.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>If the next token is a "LF" (U+000A) character
    token, then ignore that token and move on to the next
    one. (Newlines at the start of <code><a href="the-pre-element.html#the-pre-element">pre</a></code> blocks are
    ignored as an authoring convenience.)</p>

    <!-- <pre>[CR]X will eat the [CR], <pre>&#x10;X will eat the
    &#x10;, but <pre>&#x13;X will not eat the &#x13;. -->

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

   </dd>

   <!-- as normal, but interacts with the form element pointer -->
   <dt>A start tag whose tag name is "form"</dt>
   <dd>

    <p>If the <a href="#form-element-pointer"><code title="form">form</code> element
    pointer</a> is not null, then this is a <a href="#parse-error">parse
    error</a>; ignore the token.</p>

    <p>Otherwise:</p>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has
    an element in button scope">has a <code>p</code> element in button
    scope</a>, then act as if an end tag with the tag name
    "p" had been seen.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token, and set the
    <a href="#form-element-pointer"><code title="form">form</code> element pointer</a> to
    point to the element created.</p>

   </dd>

   <!-- as normal, but imply </li> when there's another <li> open in weird cases -->
   <dt>A start tag whose tag name is "li"</dt>
   <dd>

    <p>Run these steps:</p>

    <ol><li><p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p></li>

     <li><p>Initialize <var title="">node</var> to be the <a href="#current-node">current
     node</a> (the bottommost node of the stack).</p></li>

     <li><p><i>Loop</i>: If <var title="">node</var> is an
     <code><a href="the-li-element.html#the-li-element">li</a></code> element, then act as if an end tag with the tag
     name "li" had been seen, then jump to the last step.</p></li>

     <li><p>If <var title="">node</var> is in the <a href="#special">special</a>
     category, but is not an <code><a href="the-address-element.html#the-address-element">address</a></code>, <code><a href="the-div-element.html#the-div-element">div</a></code>,
     or <code><a href="the-p-element.html#the-p-element">p</a></code> element, then jump to the last step.</p></li>
     <!-- an element <foo> is in this list if the following markup:

         <!DOCTYPE html><body><ol><li><foo><li>

     ...results in the second <li> not being (in any way) a descendant
     of the first <li>, or if <foo> is a formatting element that gets
     reopened later. -->

     <li><p>Otherwise, set <var title="">node</var> to the previous
     entry in the <a href="#stack-of-open-elements">stack of open elements</a> and return to
     the step labeled <i>loop</i>.</p></li>

     <li>

      <p>This is the last step.</p>

      <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has
      an element in button scope">has a <code>p</code> element in button
      scope</a>, then act as if an end tag with the tag name
      "p" had been seen.</p>

      <p>Finally, <a href="#insert-an-html-element">insert an HTML element</a> for the
      token.</p>

     </li>

    </ol></dd>

   <!-- as normal, but imply </dt> or </dd> when there's another <dt> or <dd> open in weird cases  -->
   <dt>A start tag whose tag name is one of: "dd", "dt"</dt>
   <dd>

    <p>Run these steps:</p>

    <ol><li><p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p></li>

     <li><p>Initialize <var title="">node</var> to be the <a href="#current-node">current
     node</a> (the bottommost node of the stack).</p></li>

     <li><p><i>Loop</i>: If <var title="">node</var> is a
     <code><a href="the-dd-element.html#the-dd-element">dd</a></code> or <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element, then act as if an end
     tag with the same tag name as <var title="">node</var> had been
     seen, then jump to the last step.</p></li>

     <li><p>If <var title="">node</var> is in the <a href="#special">special</a>
     category, but is not an <code><a href="the-address-element.html#the-address-element">address</a></code>, <code><a href="the-div-element.html#the-div-element">div</a></code>,
     or <code><a href="the-p-element.html#the-p-element">p</a></code> element, then jump to the last step.</p></li>
     <!-- an element <foo> is in this list if the following markup:

         <!DOCTYPE html><body><dl><dt><foo><dt>

     ...results in the second <dt> not being (in any way) a descendant
     of the first <dt>, or if <foo> is a formatting element that gets
     reopened later. -->

     <li><p>Otherwise, set <var title="">node</var> to the previous
     entry in the <a href="#stack-of-open-elements">stack of open elements</a> and return to
     the step labeled <i>loop</i>.</p></li>

     <li>

      <p>This is the last step.</p>

      <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has
      an element in button scope">has a <code>p</code> element in button
      scope</a>, then act as if an end tag with the tag name
      "p" had been seen.</p>

      <p>Finally, <a href="#insert-an-html-element">insert an HTML element</a> for the
      token.</p>

     </li>

    </ol></dd>

   <!-- same as normal, but effectively ends parsing -->
   <dt>A start tag whose tag name is "plaintext"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has
    an element in button scope">has a <code>p</code> element in button
    scope</a>, then act as if an end tag with the tag name
    "p" had been seen.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Switch the tokenizer to the <a href="#plaintext-state">PLAINTEXT state</a>.</p>

    <p class="note">Once a start tag with the tag name "plaintext" has
    been seen, that will be the last token ever seen other than
    character tokens (and the end-of-file token), because there is no
    way to switch out of the <a href="#plaintext-state">PLAINTEXT state</a>.</p>

   </dd>

   <!-- button is a hybrid -->
   <dt>A start tag whose tag name is "button"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-scope" title="has
    an element in scope">has a <code>button</code> element in
    scope</a>, then this is a <a href="#parse-error">parse error</a>;
    act as if an end tag with the tag name "button" had been seen,
    then reprocess the token.</p>

    <p>Otherwise:</p>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

   </dd>

   <!-- end tags for non-phrasing flow content elements (and button) -->

   <!-- the normal ones -->
   <dt>An end tag whose tag name is one of: "address", "article",
   "aside", "blockquote", "button", "center", "details", "dialog",
   "dir", "div", "dl", "fieldset", "figcaption", "figure", "footer",
   "header", "hgroup", "listing", "menu", "nav", "ol", "pre",
   "section", "summary", "ul"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-scope" title="has an element in scope">have an element in scope</a>
    with the same tag name as that of the token, then this is a
    <a href="#parse-error">parse error</a>; ignore the token.</p>

    <p>Otherwise, run these steps:</p>

    <ol><li><p><a href="#generate-implied-end-tags">Generate implied end tags</a>.</p></li>

     <li><p>If the <a href="#current-node">current node</a> is not an element with
     the same tag name as that of the token, then this is a
     <a href="#parse-error">parse error</a>.</p></li>

     <li><p>Pop elements from the <a href="#stack-of-open-elements">stack of open elements</a>
     until an element with the same tag name as the token has been
     popped from the stack.</p></li>

    </ol></dd>

   <!-- removes the form element pointer instead of the matching node -->
   <dt>An end tag whose tag name is "form"</dt>
   <dd>

    <p>Let <var title="">node</var> be the element that the
    <a href="#form-element-pointer"><code title="">form</code> element pointer</a> is set
    to.</p>

    <p>Set the <a href="#form-element-pointer"><code title="">form</code> element pointer</a>
    to null.</p>

    <p>If <var title="">node</var> is null or the <a href="#stack-of-open-elements">stack of open
    elements</a> does not <a href="#has-an-element-in-scope" title="has an element in
    scope">have <var title="">node</var> in scope</a>, then this is
    a <a href="#parse-error">parse error</a>; ignore the token.</p>

    <p>Otherwise, run these steps:</p>

    <ol><li><p><a href="#generate-implied-end-tags">Generate implied end tags</a>.</p></li>

     <li><p>If the <a href="#current-node">current node</a> is not <var title="">node</var>, then this is a <a href="#parse-error">parse
     error</a>.</p></li>

     <li><p>Remove <var title="">node</var> from the <a href="#stack-of-open-elements">stack of
     open elements</a>.</p></li>

    </ol></dd>

   <!-- as normal, except </p> implies <p> if there's no <p> in scope, and needs care as the elements have optional tags -->
   <dt>An end tag whose tag name is "p"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-button-scope" title="has an element in button scope">have an element in button
    scope</a> with the same tag name as that of the token, then this
    is a <a href="#parse-error">parse error</a>; act as if a start tag with the tag
    name "p" had been seen, then reprocess the current token.</p>

    <p>Otherwise, run these steps:</p>

    <ol><li><p><a href="#generate-implied-end-tags">Generate implied end tags</a>, except
     for elements with the same tag name as the token.</p></li>

     <li><p>If the <a href="#current-node">current node</a> is not an element with
     the same tag name as that of the token, then this is a
     <a href="#parse-error">parse error</a>.</p></li>

     <li><p>Pop elements from the <a href="#stack-of-open-elements">stack of open elements</a>
     until an element with the same tag name as the token has been
     popped from the stack.</p></li>

    </ol></dd>

   <!-- as normal, but needs care as the elements have optional tags, and are further scoped by <ol>/<ul> -->
   <dt>An end tag whose tag name is "li"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-list-item-scope" title="has an element in list item scope">have an element in list
    item scope</a> with the same tag name as that of the token,
    then this is a <a href="#parse-error">parse error</a>; ignore the token.</p>

    <p>Otherwise, run these steps:</p>

    <ol><li><p><a href="#generate-implied-end-tags">Generate implied end tags</a>, except
     for elements with the same tag name as the token.</p></li>

     <li><p>If the <a href="#current-node">current node</a> is not an element with
     the same tag name as that of the token, then this is a
     <a href="#parse-error">parse error</a>.</p></li>

     <li><p>Pop elements from the <a href="#stack-of-open-elements">stack of open elements</a>
     until an element with the same tag name as the token has been
     popped from the stack.</p></li>

    </ol></dd>

   <!-- as normal, but needs care as the elements have optional tags -->
   <dt>An end tag whose tag name is one of: "dd", "dt"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-scope" title="has an element in scope">have an element in scope</a>
    with the same tag name as that of the token, then this is a
    <a href="#parse-error">parse error</a>; ignore the token.</p>

    <p>Otherwise, run these steps:</p>

    <ol><li><p><a href="#generate-implied-end-tags">Generate implied end tags</a>, except
     for elements with the same tag name as the token.</p></li>

     <li><p>If the <a href="#current-node">current node</a> is not an element with
     the same tag name as that of the token, then this is a
     <a href="#parse-error">parse error</a>.</p></li>

     <li><p>Pop elements from the <a href="#stack-of-open-elements">stack of open elements</a>
     until an element with the same tag name as the token has been
     popped from the stack.</p></li>

    </ol></dd>

   <!-- as normal, except acts as a closer for any of the h1-h6 elements -->
   <dt>An end tag whose tag name is one of: "h1", "h2", "h3", "h4", "h5", "h6"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-scope" title="has an element in scope">have an element in scope</a>
    whose tag name is one of "h1", "h2", "h3", "h4", "h5", or "h6",
    then this is a <a href="#parse-error">parse error</a>; ignore the token.</p>

    <p>Otherwise, run these steps:</p>

    <ol><li><p><a href="#generate-implied-end-tags">Generate implied end tags</a>.</p></li>

     <li><p>If the <a href="#current-node">current node</a> is not an element with
     the same tag name as that of the token, then this is a
     <a href="#parse-error">parse error</a>.</p></li>

     <li><p>Pop elements from the <a href="#stack-of-open-elements">stack of open elements</a>
     until an element whose tag name is one of "h1", "h2", "h3", "h4",
     "h5", or "h6" has been popped from the stack.</p></li>

    </ol></dd>

   <!-- see also applet/marquee/object lower down -->

   <dt>An end tag whose tag name is "sarcasm"</dt>
   <dd>
    <p>Take a deep breath, then act as described in the "any other end
    tag" entry below.</p>
   </dd>

   <!-- ADOPTION AGENCY ELEMENTS
        Mozilla-only: bdo blink del ins sub sup q
        Safari-only: code dfn kbd nobr samp var wbr
        Both: a b big em font i s small strike strong tt u -->

   <dt>A start tag whose tag name is "a"</dt>
   <dd>

    <p>If the <a href="#list-of-active-formatting-elements">list of active formatting elements</a>
    contains an element whose tag name is "a" between the end of
    the list and the last marker on the list (or the start of the
    list if there is no marker on the list), then this is a
    <a href="#parse-error">parse error</a>; act as if an end tag with the tag
    name "a" had been seen, then remove that element from the
    <a href="#list-of-active-formatting-elements">list of active formatting elements</a> and the
    <a href="#stack-of-open-elements">stack of open elements</a> if the end tag didn't
    already remove it (it might not have if the element is not
    <a href="#has-an-element-in-table-scope" title="has an element in table scope">in table
    scope</a>).</p>

    <p class="example">In the non-conforming stream
    <code>&lt;a&#160;href="a"&gt;a&lt;table&gt;&lt;a&#160;href="b"&gt;b&lt;/table&gt;x</code>,
    the first <code><a href="the-a-element.html#the-a-element">a</a></code> element would be closed upon seeing the
    second one, and the "x" character would be inside a link to "b",
    not to "a". This is despite the fact that the outer <code><a href="the-a-element.html#the-a-element">a</a></code>
    element is not in table scope (meaning that a regular
    <code><a href="the-a-element.html#the-a-element">&lt;/a&gt;</a></code> end tag at the start of the table wouldn't
    close the outer <code><a href="the-a-element.html#the-a-element">a</a></code> element). The result is that the
    two <code><a href="the-a-element.html#the-a-element">a</a></code> elements are indirectly nested inside each
    other &#8212; non-conforming markup will often result in
    non-conforming DOMs when parsed.</p>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. <a href="#push-onto-the-list-of-active-formatting-elements">Push
    onto the list of active formatting elements</a> that
    element.</p>

   </dd>

   <dt>A start tag whose tag name is one of: "b", "big", "code", "em",
   "font", "i", "s", "small", "strike", "strong", "tt", "u"</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. <a href="#push-onto-the-list-of-active-formatting-elements">Push
    onto the list of active formatting elements</a> that
    element.</p>

   </dd>

   <dt>A start tag whose tag name is "nobr"</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-scope" title="has an
    element in scope">has a <code>nobr</code> element in scope</a>,
    then this is a <a href="#parse-error">parse error</a>; act as if an end tag with
    the tag name "nobr" had been seen, then once again
    <a href="#reconstruct-the-active-formatting-elements">reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. <a href="#push-onto-the-list-of-active-formatting-elements">Push
    onto the list of active formatting elements</a> that
    element.</p>

   </dd>

   <dt id="adoptionAgency">An end tag whose tag name is one of: "a",
   "b", "big", "code", "em", "font", "i", "nobr", "s", "small",
   "strike", "strong", "tt", "u"</dt>
   <dd>

    <p>Run these steps:</p>

    <ol><li><p>Let <var title="">outer loop counter</var> be
     zero.</p></li>

     <li><p><i>Outer loop</i>: If <var title="">outer loop
     counter</var> is greater than or equal to eight, then abort these
     steps.</p></li>

     <li><p>Increment <var title="">outer loop counter</var> by
     one.</p></li>

     <li>

      <p>Let the <var title="">formatting element</var> be the last
      element in the <a href="#list-of-active-formatting-elements">list of active formatting elements</a>
      that:</p>

      <ul><li>is between the end of the list and the last scope
       marker in the list, if any, or the start of the list
       otherwise, and</li>

       <li>has the same tag name as the token.</li>

      </ul><p>If there is no such node, then abort these steps and instead
      act as described in the "any other end tag" entry below.</p>

      <p>Otherwise, if there is such a node, but that node is not
      in the <a href="#stack-of-open-elements">stack of open elements</a>, then this is a
      <a href="#parse-error">parse error</a>; remove the element from the list,
      and abort these steps.</p>

      <p>Otherwise, if there is such a node, and that node is also in
      the <a href="#stack-of-open-elements">stack of open elements</a>, but the element is not
      <a href="#has-an-element-in-scope" title="has an element in scope">in scope</a>, then this
      is a <a href="#parse-error">parse error</a>; ignore the token, and abort these
      steps.</p>

      <p>Otherwise, there is a <var title="">formatting
      element</var> and that element is in <a href="#stack-of-open-elements" title="stack of
      open elements">the stack</a> and is <a href="#has-an-element-in-scope" title="has an
      element in scope">in scope</a>. If the element is not the
      <a href="#current-node">current node</a>, this is a <a href="#parse-error">parse
      error</a>. In any case, proceed with the algorithm as
      written in the following steps.</p>

     </li>

     <li><p>Let the <var title="">furthest block</var> be the topmost
     node in the <a href="#stack-of-open-elements">stack of open elements</a> that is lower in
     the stack than the <var title="">formatting element</var>, and is
     an element in the <a href="#special">special</a> category. There might not
     be one.</p></li>

     <li><p>If there is no <var title="">furthest block</var>, then
     the UA must first pop all the nodes from the bottom of the
     <a href="#stack-of-open-elements">stack of open elements</a>, from the <a href="#current-node">current
     node</a> up to and including the <var title="">formatting
     element</var>, then remove the <var title="">formatting
     element</var> from the <a href="#list-of-active-formatting-elements">list of active formatting
     elements</a>, and finally abort these steps.</p></li>

     <li><p>Let the <var title="">common ancestor</var> be the element
     immediately above the <var title="">formatting element</var> in the
     <a href="#stack-of-open-elements">stack of open elements</a>.</p></li>

     <li><p>Let a bookmark note the position of the <var title="">formatting element</var> in the <a href="#list-of-active-formatting-elements">list of active
     formatting elements</a> relative to the elements on either
     side of it in the list.</p></li>

     <li>

      <p>Let <var title="">node</var> and <var title="">last node</var> be the
      <var title="">furthest block</var>. Follow these steps:</p>

      <ol><li><p>Let <var title="">inner loop counter</var> be
       zero.</p></li>

       <li><p><i>Inner loop</i>: If <var title="">inner loop
       counter</var> is greater than or equal to three, then abort these
       steps.</p></li>

       <li><p>Increment <var title="">inner loop counter</var> by
       one.</p></li>

       <li>Let <var title="">node</var> be the element immediately
       above <var title="">node</var> in the <a href="#stack-of-open-elements">stack of open
       elements</a>, or if <var title="">node</var> is no longer in
       the <a href="#stack-of-open-elements">stack of open elements</a> (e.g. because it got
       removed by the next step), the element that was immediately
       above <var title="">node</var> in the <a href="#stack-of-open-elements">stack of open
       elements</a> before <var title="">node</var> was
       removed.</li>

       <li>If <var title="">node</var> is not in the <a href="#list-of-active-formatting-elements">list of
       active formatting elements</a>, then remove <var title="">node</var> from the <a href="#stack-of-open-elements">stack of open
       elements</a> and then go back to the step labeled <i>inner
       loop</i>.</li>

       <li>Otherwise, if <var title="">node</var> is the <var title="">formatting element</var>, then go to the next step
       in the overall algorithm.</li>

       <li><a href="#create-an-element-for-the-token">Create an element for the token</a> for which the
       element <var title="">node</var> was created, replace the entry
       for <var title="">node</var> in the <a href="#list-of-active-formatting-elements">list of active
       formatting elements</a> with an entry for the new element,
       replace the entry for <var title="">node</var> in the
       <a href="#stack-of-open-elements">stack of open elements</a> with an entry for the new
       element, and let <var title="">node</var> be the new
       element.</li>

       <li>If <var title="">last node</var> is the <var title="">furthest block</var>, then move the aforementioned
       bookmark to be immediately after the new <var title="">node</var> in the <a href="#list-of-active-formatting-elements">list of active formatting
       elements</a>.</li>

       <li>Insert <var title="">last node</var> into <var title="">node</var>, first removing it from its previous
       parent node if any.</li>

       <li>Let <var title="">last node</var> be <var title="">node</var>.</li>

       <li>Return to the step labeled <i>inner loop</i>.</li>

      </ol></li>

     <li>

      <p>If the <var title="">common ancestor</var> node is a
      <code><a href="the-table-element.html#the-table-element">table</a></code>, <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>,
      <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, or <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element, then,
      <a href="#foster-parent">foster parent</a> whatever <var title="">last
      node</var> ended up being in the previous step, first removing
      it from its previous parent node if any.</p>

      <p>Otherwise, append whatever <var title="">last node</var>
      ended up being in the previous step to the <var title="">common
      ancestor</var> node, first removing it from its previous parent
      node if any.</p>

     </li>

     <li><p><a href="#create-an-element-for-the-token">Create an element for the token</a> for which the
     <var title="">formatting element</var> was created.</p></li>

     <li><p>Take all of the child nodes of the <var title="">furthest
     block</var> and append them to the element created in the last
     step.</p></li>

     <li><p>Append that new element to the <var title="">furthest
     block</var>.</p></li>

     <li><p>Remove the <var title="">formatting element</var> from the
     <a href="#list-of-active-formatting-elements">list of active formatting elements</a>, and insert the
     new element into the <a href="#list-of-active-formatting-elements">list of active formatting
     elements</a> at the position of the aforementioned
     bookmark.</p></li>

     <li><p>Remove the <var title="">formatting element</var> from the
     <a href="#stack-of-open-elements">stack of open elements</a>, and insert the new element
     into the <a href="#stack-of-open-elements">stack of open elements</a> immediately below
     the position of the <var title="">furthest block</var> in that
     stack.</p></li>

     <li><p>Jump back to the step labeled <i>outer loop</i>.</p></li>

    </ol><p class="note">Because of the way this algorithm causes elements
    to change parents, it has been dubbed the "adoption agency
    algorithm" (in contrast with other possible algorithms for dealing
    with misnested content, which included the "incest algorithm", the
    "secret affair algorithm", and the "Heisenberg algorithm").</p>

   </dd>

   <dt>A start tag token whose tag name is one of: "applet",
   "marquee", "object"</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Insert a marker at the end of the <a href="#list-of-active-formatting-elements">list of active
    formatting elements</a>.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

   </dd>

   <dt>An end tag token whose tag name is one of: "applet",
   "marquee", "object"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-scope" title="has an element in scope">have an element in scope</a>
    with the same tag name as that of the token, then this is a
    <a href="#parse-error">parse error</a>; ignore the token.</p>

    <p>Otherwise, run these steps:</p>

    <ol><li><p><a href="#generate-implied-end-tags">Generate implied end tags</a>.</p></li>

     <li><p>If the <a href="#current-node">current node</a> is not an element with
     the same tag name as that of the token, then this is a
     <a href="#parse-error">parse error</a>.</p></li>

     <li><p>Pop elements from the <a href="#stack-of-open-elements">stack of open elements</a>
     until an element with the same tag name as the token has been
     popped from the stack.</p></li>

     <li><a href="#clear-the-list-of-active-formatting-elements-up-to-the-last-marker">Clear the list of active formatting elements up to the
     last marker</a>.</li>

    </ol></dd>

   <dt>A start tag whose tag name is "table"</dt>
   <dd>

    <p>If the <code><a href="dom.html#document">Document</a></code> is <em>not</em> set to
    <a href="infrastructure.html#quirks-mode">quirks mode</a>, and the <a href="#stack-of-open-elements">stack of open
    elements</a> <a href="#has-an-element-in-button-scope" title="has an element in button scope">has a
    <code>p</code> element in button scope</a>, then act as if an
    end tag with the tag name "p" had been seen.</p> <!-- i hate
    myself (this quirk was basically caused by acid2; if i'd realised
    we could change the specs when i wrote acid2, we could have
    avoided having any parsing-mode quirks) -Hixie -->

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>".</p>

   </dd>

   <dt>A start tag whose tag name is one of: "area", "br", "embed",
   "img", "keygen", "wbr"</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. Immediately
    pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>
    <!-- shouldn't really do this for <area> -->

   </dd>

   <dt>A start tag whose tag name is "input"</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. Immediately
    pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p>

    <p>If the token does not have an attribute with the name "type",
    or if it does, but that attribute's value is not an <a href="infrastructure.html#ascii-case-insensitive">ASCII
    case-insensitive</a> match for the string "<code title="">hidden</code>", then: set the <a href="#frameset-ok-flag">frameset-ok
    flag</a> to "not ok".</p>

   </dd>

   <dt>A start tag whose tag name is one of: "param", "source", "track"</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. Immediately
    pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p>

   </dd>

   <dt>A start tag whose tag name is "hr"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has
    an element in button scope">has a <code>p</code> element in button
    scope</a>, then act as if an end tag with the tag name
    "p" had been seen.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. Immediately
    pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

   </dd>

   <dt>A start tag whose tag name is "image"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Change the token's tag name
    to "img" and reprocess it. (Don't ask.)</p> <!-- As of
    2005-12, studies showed that around 0.2% of pages used the
    <image> element. -->
   </dd>

   <dt id="isindex">A start tag whose tag name is "isindex"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p>If the <a href="#form-element-pointer"><code title="">form</code> element
    pointer</a> is not null, then ignore the token.</p>

    <p>Otherwise:</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p> <!--
    purely to reduce the number of errors (we don't care if they
    included the /, they're not supposed to be including the tag at
    all! -->

    <p>Act as if a start tag token with the tag name "form" had been seen.</p>

    <p>If the token has an attribute called "action", set the
    <code title="attr-fs-action"><a href="form-submission.html#attr-fs-action">action</a></code> attribute on the
    resulting <code><a href="the-form-element.html#the-form-element">form</a></code> element to the value of the
    "action" attribute of the token.</p>

    <p>Act as if a start tag token with the tag name "hr" had been
    seen.</p>

    <p>Act as if a start tag token with the tag name "label" had been
    seen.</p>

    <p>Act as if a stream of character tokens had been seen (see below
    for what they should say).</p>

    <p>Act as if a start tag token with the tag name "input" had been
    seen, with all the attributes from the "isindex" token except
    "name", "action", and "prompt". Set the <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute of the resulting
    <code><a href="the-input-element.html#the-input-element">input</a></code> element to the value "<code title="attr-fe-name-isindex"><a href="attributes-common-to-form-controls.html#attr-fe-name-isindex">isindex</a></code>".</p>

    <p>Act as if a stream of character tokens had been seen (see
    below for what they should say).</p>

    <p>Act as if an end tag token with the tag name "label" had been
    seen.</p>

    <p>Act as if a start tag token with the tag name "hr" had been
    seen.</p>

    <p>Act as if an end tag token with the tag name "form" had been
    seen.</p>

    <p>If the token has an attribute with the name "prompt", then the
    first stream of characters must be the same string as given in
    that attribute, and the second stream of characters must be
    empty. Otherwise, the two streams of character tokens together
    should, together with the <code><a href="the-input-element.html#the-input-element">input</a></code> element, express the
    equivalent of "This is a searchable index. Enter search keywords:
    (input field)" in the user's preferred language.</p>

   </dd>

   <dt>A start tag whose tag name is "textarea"</dt>
   <dd>

    <p>Run these steps:</p>

    <ol><li><p><a href="#insert-an-html-element">Insert an HTML element</a> for the
     token.</p></li>

     <li><p>If the next token is a "LF" (U+000A) character
     token, then ignore that token and move on to the next
     one. (Newlines at the start of <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements are
     ignored as an authoring convenience.)</p></li>

     <!-- see comment in <pre> start tag bit -->

     <li><p>Switch the tokenizer to the <a href="#rcdata-state">RCDATA
     state</a>.</p></li>

     <li><p>Let the <a href="#original-insertion-mode">original insertion mode</a> be the
     current <a href="#insertion-mode">insertion mode</a>.</p>

     </li><li><p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not
     ok".</p></li>

     <li><p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-incdata" title="insertion mode: text">text</a>".</p></li>

    </ol></dd>

   <dt>A start tag whose tag name is "xmp"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-button-scope" title="has
    an element in button scope">has a <code>p</code> element in button
    scope</a>, then act as if an end tag with the tag name
    "p" had been seen.</p>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

    <p>Follow the <a href="#generic-raw-text-element-parsing-algorithm">generic raw text element parsing algorithm</a>.</p>

   </dd>

   <dt>A start tag whose tag name is "iframe"</dt>
   <dd>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

    <p>Follow the <a href="#generic-raw-text-element-parsing-algorithm">generic raw text element parsing algorithm</a>.</p>

   </dd>

   <dt>A start tag whose tag name is "noembed"</dt>
   <dt>A start tag whose tag name is "noscript", if the <a href="#scripting-flag">scripting flag</a> is enabled</dt>
   <dd>

    <p>Follow the <a href="#generic-raw-text-element-parsing-algorithm">generic raw text element parsing algorithm</a>.</p>

   </dd>

   <dt>A start tag whose tag name is "select"</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

    <p>If the <a href="#insertion-mode">insertion mode</a> is one of "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>", "<a href="#parsing-main-incaption" title="insertion mode: in caption">in caption</a>", "<a href="#parsing-main-intbody" title="insertion mode: in table body">in table body</a>",
    "<a href="#parsing-main-intr" title="insertion mode: in row">in row</a>", or "<a href="#parsing-main-intd" title="insertion mode: in cell">in cell</a>", then switch the
    <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inselectintable" title="insertion mode: in
    select in table">in select in table</a>". Otherwise, switch the
    <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-inselect" title="insertion mode: in
    select">in select</a>".</p>

   </dd>

   <dt>A start tag whose tag name is one of: "optgroup", "option"</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is an <code><a href="the-option-element.html#the-option-element">option</a></code>
    element, then act as if an end tag with the tag name "option" had
    been seen.</p>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

   </dd>

   <dt>A start tag whose tag name is one of: "rp", "rt"</dt>
   <dd>

    <!-- the parsing rules for ruby really don't match IE much at all,
         but in practice the markup used is very simple and so strict
         compatibility with IE isn't required. For example, as defined
         here we get very, very different behaviour than IE for
         pathological cases like:

           <ruby><ol><li><p>a<rt>b
           <ruby>a<rt>b<p>c

         But in practice most ruby markup falls into these cases:

           <ruby>a<rt>b</ruby>
           <ruby>a<rp>b<rt>c<rp>d</ruby>
           <ruby>a<rt>b</rt></ruby>
           <ruby>a<rp>b</rp><rt>c</rt><rp>d</rp></ruby>

         (Note: the comment above was written when this section did
         something slightly more radical for handling <rp> and <rt>
         elements, so it might be out of date now.)

    -->

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-scope" title="has an
    element in scope">has a <code>ruby</code> element in scope</a>,
    then <a href="#generate-implied-end-tags">generate implied end tags</a>. If the <a href="#current-node">current
    node</a> is not then a <code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code> element, this is a
    <a href="#parse-error">parse error</a>.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

   </dd>

   <dt>An end tag whose tag name is "br"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Act as if a start tag token with
    the tag name "br" had been seen. Ignore the end tag token.</p>
   </dd>

   <dt>A start tag whose tag name is "math"</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#adjust-mathml-attributes">Adjust MathML attributes</a> for the token. (This
    fixes the case of MathML attributes that are not all
    lowercase.)</p>

    <p><a href="#adjust-foreign-attributes">Adjust foreign attributes</a> for the token. (This
    fixes the use of namespaced attributes, in particular XLink.)</p>

    <p><a href="#insert-a-foreign-element">Insert a foreign element</a> for the token, in the
    <a href="namespaces.html#mathml-namespace">MathML namespace</a>.</p>

    <!-- If we ever change the frameset-ok flag to an insertion mode,
    the following change would be implied, except we'd have to do it
    even in the face of a self-closed tag:
    <p>Set the <span>frameset-ok flag</span> to "not ok".</p>
    -->

    <p>If the token has its <i>self-closing flag</i> set, pop the
    <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a> and <a href="#acknowledge-self-closing-flag" title="acknowledge self-closing
    flag">acknowledge the token's <i>self-closing flag</i></a>.</p>

   </dd>

   <dt>A start tag whose tag name is "svg"</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#adjust-svg-attributes">Adjust SVG attributes</a> for the token. (This fixes
    the case of SVG attributes that are not all lowercase.)</p>

    <p><a href="#adjust-foreign-attributes">Adjust foreign attributes</a> for the token. (This
    fixes the use of namespaced attributes, in particular XLink in
    SVG.)</p>

    <p><a href="#insert-a-foreign-element">Insert a foreign element</a> for the token, in the
    <a href="namespaces.html#svg-namespace">SVG namespace</a>.</p>

    <!-- If we ever change the frameset-ok flag to an insertion mode,
    the following change would be implied, except we'd have to do it
    even in the face of a self-closed tag:
    <p>Set the <span>frameset-ok flag</span> to "not ok".</p>
    -->

    <p>If the token has its <i>self-closing flag</i> set, pop the
    <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a> and <a href="#acknowledge-self-closing-flag" title="acknowledge self-closing
    flag">acknowledge the token's <i>self-closing flag</i></a>.</p>

   </dd>

   <dt>A start <!--or end--> tag whose tag name is one of: "caption",
   "col", "colgroup", "frame", "head", "tbody", "td", "tfoot", "th",
   "thead", "tr"</dt>
   <!--<dt>An end tag whose tag name is one of: "area", "base",
   "basefont", "bgsound", "command", "embed", "hr", "iframe", "image",
   "img", "input", "isindex", "keygen", "link", "meta", "noembed",
   "noframes", "param", "script", "select", "source", "style",
   "table", "textarea", "title", "track", "wbr"</dt>-->
   <!--<dt>An end tag whose tag name is "noscript", if the
   <span>scripting flag</span> is enabled</dt>-->
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
    <!-- end tags are commented out because since they can never end
    up on the stack anyway, the default end tag clause will
    automatically handle them. we don't want to have text in the spec
    that is just an optimisation, as that detracts from the spec
    itself -->
   </dd>

   <dt>Any other start tag</dt>
   <dd>

    <p><a href="#reconstruct-the-active-formatting-elements">Reconstruct the active formatting elements</a>, if
    any.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p class="note">This element will be an <a href="#ordinary">ordinary</a>
    element.</p>

   </dd>

   <dt>Any other end tag</dt>
   <dd>

    <p>Run these steps:</p>

    <ol><li><p>Initialize <var title="">node</var> to be the <a href="#current-node">current
     node</a> (the bottommost node of the stack).</p></li>

     <li><p><i>Loop</i>: If <var title="">node</var> has the same tag
     name as the token, then:</p>

      <ol><li><p><a href="#generate-implied-end-tags">Generate implied end tags</a>, except
       for elements with the same tag name as the token.</p></li>

       <li><p>If the tag name of the end tag token does not match
       the tag name of the <a href="#current-node">current node</a>, this is a
       <a href="#parse-error">parse error</a>.</p></li>

       <li><p>Pop all the nodes from the <a href="#current-node">current node</a> up
       to <var title="">node</var>, including <var title="">node</var>, then stop these steps.</p></li>

      </ol></li>

     <li><p>Otherwise, if <var title="">node</var> is in the
     <a href="#special">special</a> category, then this is a <a href="#parse-error">parse
     error</a>; ignore the token, and abort these steps.</p></li>

     <li><p>Set <var title="">node</var> to the previous entry in the
     <a href="#stack-of-open-elements">stack of open elements</a>.</p></li>

     <li><p>Return to the step labeled <i>loop</i>.</p></li>

    </ol></dd>

  </dl><h6 id="parsing-main-incdata"><span class="secno">8.2.5.4.8 </span>The "<dfn title="insertion mode: text">text</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-incdata" title="insertion mode: text">text</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token</dt>
   <dd>

    <p><a href="#insert-a-character" title="insert a character">Insert the token's
    character</a> into the <a href="#current-node">current node</a>.</p>

    <p class="note">This can never be a U+0000 NULL character; the
    tokenizer converts those to U+FFFD REPLACEMENT CHARACTER
    characters.</p>

   </dd>

   <dt>An end-of-file token</dt>
   <dd>

    <!-- can't be the fragment case -->
    <p><a href="#parse-error">Parse error</a>.</p>

    <p>If the <a href="#current-node">current node</a> is a <code><a href="the-script-element.html#the-script-element">script</a></code>
    element, mark the <code><a href="the-script-element.html#the-script-element">script</a></code> element as <a href="the-script-element.html#already-started">"already
    started"</a>.</p>

    <p>Pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to the <a href="#original-insertion-mode">original
    insertion mode</a> and reprocess the current token.</p>

   </dd>

   <dt id="scriptEndTag">An end tag whose tag name is "script"</dt>
   <dd>

    <p><a href="#provide-a-stable-state">Provide a stable state</a>.</p>

    <p>Let <var title="">script</var> be the <a href="#current-node">current node</a>
    (which will be a <code><a href="the-script-element.html#the-script-element">script</a></code> element).</p>

    <p>Pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to the <a href="#original-insertion-mode">original
    insertion mode</a>.</p>

    <p>Let the <var title="">old insertion point</var> have the
    same value as the current <a href="#insertion-point">insertion point</a>. Let
    the <a href="#insertion-point">insertion point</a> be just before the <a href="#next-input-character">next
    input character</a>.</p>

    <p>Increment the parser's <a href="#script-nesting-level">script nesting level</a> by
    one.</p>

    <p><a href="the-script-element.html#prepare-a-script" title="prepare a script">Prepare</a> the <var title="">script</var>. This might cause some script to execute,
    which might cause <a href="dynamic-markup-insertion.html#dom-document-write" title="dom-document-write">new characters
    to be inserted into the tokenizer</a>, and might cause the
    tokenizer to output more tokens, resulting in a <a href="#nestedParsing">reentrant invocation of the parser</a>.</p>

    <p>Decrement the parser's <a href="#script-nesting-level">script nesting level</a> by
    one. If the parser's <a href="#script-nesting-level">script nesting level</a> is zero,
    then set the <a href="#parser-pause-flag">parser pause flag</a> to false.</p>

    <p>Let the <a href="#insertion-point">insertion point</a> have the value of the <var title="">old insertion point</var>. (In other words, restore the
    <a href="#insertion-point">insertion point</a> to its previous value. This value
    might be the "undefined" value.)</p>

    <p id="scriptTagParserResumes">At this stage, if there is a
    <a href="the-script-element.html#pending-parsing-blocking-script">pending parsing-blocking script</a>, then:</p>

    <dl class="switch"><dt>If the <a href="#script-nesting-level">script nesting level</a> is not zero:</dt>

     <dd>

      <p>Set the <a href="#parser-pause-flag">parser pause flag</a> to true, and abort the
      processing of any nested invocations of the tokenizer, yielding
      control back to the caller. (Tokenization will resume when the
      caller returns to the "outer" tree construction stage.)</p>

      <p class="note">The tree construction stage of this particular
      parser is <a href="#nestedParsing">being called reentrantly</a>,
      say from a call to <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code>.</p>

     </dd>


     <dt>Otherwise:</dt>

     <dd>

      <p>Run these steps:</p>

      <ol><li><p>Let <var title="">the script</var> be the <a href="the-script-element.html#pending-parsing-blocking-script">pending
       parsing-blocking script</a>. There is no longer a <a href="the-script-element.html#pending-parsing-blocking-script">pending
       parsing-blocking script</a>.</p></li>

       <li><p>Block the <a href="#tokenization" title="tokenization">tokenizer</a>
       for this instance of the <a href="#html-parser">HTML parser</a>, such that
       the <a href="#event-loop">event loop</a> will not run <a href="#concept-task" title="concept-task">tasks</a> that invoke the <a href="#tokenization" title="tokenization">tokenizer</a>.</p></li>

       <li><p>If the parser's <code><a href="dom.html#document">Document</a></code> <a href="styling.html#has-a-style-sheet-that-is-blocking-scripts">has a style
       sheet that is blocking scripts</a> or <var title="">the
       script</var>'s <a href="the-script-element.html#ready-to-be-parser-executed">"ready to be parser-executed"</a> flag
       is not set: <a href="#spin-the-event-loop">spin the event loop</a> until the parser's
       <code><a href="dom.html#document">Document</a></code> <a href="styling.html#has-no-style-sheet-that-is-blocking-scripts">has no style sheet that is blocking
       scripts</a> and <var title="">the script</var>'s
       <a href="the-script-element.html#ready-to-be-parser-executed">"ready to be parser-executed"</a> flag is
       set.</p></li>

       <li><p>Unblock the <a href="#tokenization" title="tokenization">tokenizer</a>
       for this instance of the <a href="#html-parser">HTML parser</a>, such that
       <a href="#concept-task" title="concept-task">tasks</a> that invoke the <a href="#tokenization" title="tokenization">tokenizer</a> can again be
       run.</p></li>

       <li><p>Let the <a href="#insertion-point">insertion point</a> be just before the
       <a href="#next-input-character">next input character</a>.</p></li>

       <li><p>Increment the parser's <a href="#script-nesting-level">script nesting level</a>
       by one (it should be zero before this step, so this sets it to
       one).</p></li>

       <li><p><a href="the-script-element.html#execute-the-script-block" title="execute the script block">Execute</a>
       <var title="">the script</var>.</p></li>

       <li><p>Decrement the parser's <a href="#script-nesting-level">script nesting level</a>
       by one. If the parser's <a href="#script-nesting-level">script nesting level</a> is
       zero (which it always should be at this point), then set the
       <a href="#parser-pause-flag">parser pause flag</a> to false.</p>

       </li><li><p>Let the <a href="#insertion-point">insertion point</a> be undefined
       again.</p></li>

       <li><p>If there is once again a <a href="the-script-element.html#pending-parsing-blocking-script">pending parsing-blocking
       script</a>, then repeat these steps from step 1.</p></li>

      </ol></dd>

    </dl></dd>

   <dt>Any other end tag</dt>
   <dd>

    <p>Pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to the <a href="#original-insertion-mode">original
    insertion mode</a>.</p>

   </dd>

  </dl><h6 id="parsing-main-intable"><span class="secno">8.2.5.4.9 </span>The "<dfn title="insertion mode: in table">in table</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token, if the <a href="#current-node">current node</a> is <code><a href="the-table-element.html#the-table-element">table</a></code>, <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, or <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element</dt>
   <dd>

     <p>Let the <dfn id="pending-table-character-tokens"><var>pending table character tokens</var></dfn>
     be an empty list of tokens.</p>

     <p>Let the <a href="#original-insertion-mode">original insertion mode</a> be the current
     <a href="#insertion-mode">insertion mode</a>.</p>

     <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intabletext" title="insertion mode: in table text">in table text</a>" and
     reprocess the token.</p>

   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "caption"</dt>
   <dd>

    <p><a href="#clear-the-stack-back-to-a-table-context">Clear the stack back to a table context</a>. (See
    below.)</p>

    <p>Insert a marker at the end of the <a href="#list-of-active-formatting-elements">list of active
    formatting elements</a>.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token, then
    switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-incaption" title="insertion mode: in caption">in caption</a>".</p>

   </dd>

   <dt>A start tag whose tag name is "colgroup"</dt>
   <dd>

    <p><a href="#clear-the-stack-back-to-a-table-context">Clear the stack back to a table context</a>. (See
    below.)</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token, then
    switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-incolgroup" title="insertion mode: in column group">in column
    group</a>".</p>

   </dd>

   <dt>A start tag whose tag name is "col"</dt>
   <dd>
    <p>Act as if a start tag token with the tag name "colgroup"
    had been seen, then reprocess the current token.</p>
   </dd>

   <dt>A start tag whose tag name is one of: "tbody", "tfoot", "thead"</dt>
   <dd>

    <p><a href="#clear-the-stack-back-to-a-table-context">Clear the stack back to a table context</a>. (See
    below.)</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token, then
    switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intbody" title="insertion mode: in table body">in table
    body</a>".</p>

   </dd>

   <dt>A start tag whose tag name is one of: "td", "th", "tr"</dt>
   <dd>
    <p>Act as if a start tag token with the tag name "tbody" had
    been seen, then reprocess the current token.</p>
   </dd>

   <dt>A start tag whose tag name is "table"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. Act as if an end tag token with
    the tag name "table" had been seen, then, if that token wasn't
    ignored, reprocess the current token.</p>

    <p class="note">The fake end tag token here can only be
    ignored in the <a href="#fragment-case">fragment case</a>.</p>

   </dd>

   <dt>An end tag whose tag name is "table"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-table-scope" title="has an element in table scope">have an element in table
    scope</a> with the same tag name as the token, this is a
    <a href="#parse-error">parse error</a>. Ignore the token. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise:</p>

    <p>Pop elements from this stack until a <code><a href="the-table-element.html#the-table-element">table</a></code>
    element has been popped from the stack.</p>

    <p><a href="#reset-the-insertion-mode-appropriately">Reset the insertion mode appropriately</a>.</p>

   </dd>

   <dt>An end tag whose tag name is one of: "body", "caption",
   "col", "colgroup", "html", "tbody", "td", "tfoot", "th",
   "thead", "tr"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is one of: "style", "script"</dt>
   <dd>

    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>

   </dd>

   <dt>A start tag whose tag name is "input"</dt>
   <dd>

    <p>If the token does not have an attribute with the name "type",
    or if it does, but that attribute's value is not an <a href="infrastructure.html#ascii-case-insensitive">ASCII
    case-insensitive</a> match for the string "<code title="">hidden</code>", then: act as described in the "anything
    else" entry below.</p>

    <p>Otherwise:</p>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

    <p>Pop that <code><a href="the-input-element.html#the-input-element">input</a></code> element off the <a href="#stack-of-open-elements">stack of
    open elements</a>.</p>

   </dd>

   <dt>A start tag whose tag name is "form"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p>If the <a href="#form-element-pointer"><code title="form">form</code> element
    pointer</a> is not null, ignore the token.</p>

    <p>Otherwise:</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token, and set the
    <a href="#form-element-pointer"><code title="form">form</code> element pointer</a> to
    point to the element created.</p>

    <p>Pop that <code><a href="the-form-element.html#the-form-element">form</a></code> element off the <a href="#stack-of-open-elements">stack of
    open elements</a>.</p>

   </dd>

   <!-- "form" end tag falls through to in-body, which does the right thing -->

   <dt>An end-of-file token</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is not the root
    <code><a href="the-html-element.html#the-html-element">html</a></code> element, then this is a <a href="#parse-error">parse
    error</a>.</p>

    <p class="note">The <a href="#current-node">current node</a> can only be the root
    <code><a href="the-html-element.html#the-html-element">html</a></code> element in the <a href="#fragment-case">fragment case</a>.</p>

    <p><a href="#stop-parsing">Stop parsing</a>.</p>

   </dd>

   <dt>Anything else</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. Process the token <a href="#using-the-rules-for">using the
    rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in
    body</a>" <a href="#insertion-mode">insertion mode</a>, except that whenever a
    node would be inserted into the <a href="#current-node">current node</a> when the
    <a href="#current-node">current node</a> is a <code><a href="the-table-element.html#the-table-element">table</a></code>,
    <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, or
    <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element, then it must instead be <a href="#foster-parent" title="foster parent">foster parented</a>.</p>

   </dd>

  </dl><p>When the steps above require the UA to <dfn id="clear-the-stack-back-to-a-table-context">clear the stack
  back to a table context</dfn>, it means that the UA must, while
  the <a href="#current-node">current node</a> is not a <code><a href="the-table-element.html#the-table-element">table</a></code>
  element or an <code><a href="the-html-element.html#the-html-element">html</a></code> element, pop elements from the
  <a href="#stack-of-open-elements">stack of open elements</a>.</p>

  <p class="note">The <a href="#current-node">current node</a> being an
  <code><a href="the-html-element.html#the-html-element">html</a></code> element after this process is a <a href="#fragment-case">fragment
  case</a>.</p>



  <h6 id="parsing-main-intabletext"><span class="secno">8.2.5.4.10 </span>The "<dfn title="insertion mode: in table text">in table text</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-intabletext" title="insertion mode: in table text">in table text</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is U+0000 NULL</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>

   </dd>


   <dt>Any other character token</dt>
   <dd>

    <p>Append the character token to the <var><a href="#pending-table-character-tokens">pending table character
    tokens</a></var> list.</p>

   </dd>


   <dt>Anything else</dt>
   <dd>

    <!-- this can only be called if the current node is one of the
    table model elements -->

    <p>If any of the tokens in the <var><a href="#pending-table-character-tokens">pending table character
    tokens</a></var> list are character tokens that are not <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a>, then reprocess
    the character tokens in the <var><a href="#pending-table-character-tokens">pending table character
    tokens</a></var> list using the rules given in the "anything else"
    entry in the "<a href="#parsing-main-intable" title="insertion mode: in table">in
    table</a>" insertion mode.</p>

    <!-- if there's active formatting elements, it'll recreate those
    and foster parent the top one and then put the text nodes in the
    formatting elements; otherwise, it'll foster parent the character
    tokens. -->

    <p>Otherwise, <a href="#insert-a-character" title="insert a character">insert the
    characters</a> given by the <var><a href="#pending-table-character-tokens">pending table character
    tokens</a></var> list into the <a href="#current-node">current node</a>.</p> <!--
    i.e. inter-element whitespace in the table model isn't foster
    parented -->

    <!-- no need to empty the list, we're leaving the insertion mode
    and the list is always emptied before we reenter the mode -->

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to the <a href="#original-insertion-mode">original
    insertion mode</a> and reprocess the token.</p>

   </dd>

  </dl><h6 id="parsing-main-incaption"><span class="secno">8.2.5.4.11 </span>The "<dfn title="insertion mode: in caption">in caption</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-incaption" title="insertion mode: in caption">in caption</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>An end tag whose tag name is "caption"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-table-scope" title="has an element in table scope">have an element in table
    scope</a> with the same tag name as the token, this is a
    <a href="#parse-error">parse error</a>. Ignore the token. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise:</p>

    <p><a href="#generate-implied-end-tags">Generate implied end tags</a>.</p>

    <p>Now, if the <a href="#current-node">current node</a> is not a
    <code><a href="the-caption-element.html#the-caption-element">caption</a></code> element, then this is a <a href="#parse-error">parse
    error</a>.</p>

    <p>Pop elements from this stack until a <code><a href="the-caption-element.html#the-caption-element">caption</a></code>
    element has been popped from the stack.</p>

    <p><a href="#clear-the-list-of-active-formatting-elements-up-to-the-last-marker">Clear the list of active formatting elements up to
    the last marker</a>.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>".</p>

   </dd>

   <dt>A start tag whose tag name is one of: "caption", "col",
   "colgroup", "tbody", "td", "tfoot", "th", "thead", "tr"</dt>
   <dt>An end tag whose tag name is "table"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. Act as if an end tag with the tag
    name "caption" had been seen, then, if that token wasn't
    ignored, reprocess the current token.</p>

    <p class="note">The fake end tag token here can only be
    ignored in the <a href="#fragment-case">fragment case</a>.</p>

   </dd>

   <dt>An end tag whose tag name is one of: "body", "col",
   "colgroup", "html", "tbody", "td", "tfoot", "th", "thead",
   "tr"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

  </dl><h6 id="parsing-main-incolgroup"><span class="secno">8.2.5.4.12 </span>The "<dfn title="insertion mode: in column group">in column group</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-incolgroup" title="insertion mode: in column group">in column group</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p><a href="#insert-a-character" title="insert a character">Insert the character</a> into
    the <a href="#current-node">current node</a>.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "col"</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token. Immediately
    pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p>

   </dd>

   <dt>An end tag whose tag name is "colgroup"</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is the root
    <code><a href="the-html-element.html#the-html-element">html</a></code> element, then this is a <a href="#parse-error">parse
    error</a>; ignore the token. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise, pop the <a href="#current-node">current node</a> (which will be
    a <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code> element) from the <a href="#stack-of-open-elements">stack of open
    elements</a>. Switch the <a href="#insertion-mode">insertion mode</a> to
    "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>".</p>

   </dd>

   <dt>An end tag whose tag name is "col"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>An end-of-file token</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is the root <code><a href="the-html-element.html#the-html-element">html</a></code>
    element, then <a href="#stop-parsing">stop parsing</a>. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise, act as described in the "anything else" entry
    below.</p>

   </dd>

   <dt>Anything else</dt>
   <dd>

    <p>Act as if an end tag with the tag name "colgroup" had been
    seen, and then, if that token wasn't ignored, reprocess the
    current token.</p>

    <p class="note">The fake end tag token here can only be
    ignored in the <a href="#fragment-case">fragment case</a>.</p>

   </dd>

  </dl><h6 id="parsing-main-intbody"><span class="secno">8.2.5.4.13 </span>The "<dfn title="insertion mode: in table body">in table body</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-intbody" title="insertion mode: in table body">in table body</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A start tag whose tag name is "tr"</dt>
   <dd>

    <p><a href="#clear-the-stack-back-to-a-table-body-context">Clear the stack back to a table body
    context</a>. (See below.)</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token, then switch
    the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intr" title="insertion mode:
    in row">in row</a>".</p>

   </dd>

   <dt>A start tag whose tag name is one of: "th", "td"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Act as if a start tag with
    the tag name "tr" had been seen, then reprocess the current
    token.</p>
   </dd>

   <dt>An end tag whose tag name is one of: "tbody", "tfoot",
   "thead"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-table-scope" title="has an element in table scope">have an element in table
    scope</a> with the same tag name as the token, this is a
    <a href="#parse-error">parse error</a>. Ignore the token.</p>

    <p>Otherwise:</p>

    <p><a href="#clear-the-stack-back-to-a-table-body-context">Clear the stack back to a table body
    context</a>. (See below.)</p>

    <p>Pop the <a href="#current-node">current node</a> from the <a href="#stack-of-open-elements">stack of
    open elements</a>. Switch the <a href="#insertion-mode">insertion mode</a>
    to "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>".</p>

   </dd>

   <dt>A start tag whose tag name is one of: "caption", "col",
   "colgroup", "tbody", "tfoot", "thead"</dt>
   <dt>An end tag whose tag name is "table"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-table-scope" title="has an element in table scope">have a
    <code>tbody</code>, <code>thead</code>, or <code>tfoot</code>
    element in table scope</a>, this is a <a href="#parse-error">parse
    error</a>. Ignore the token. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise:</p>

    <p><a href="#clear-the-stack-back-to-a-table-body-context">Clear the stack back to a table body
    context</a>. (See below.)</p>

    <p>Act as if an end tag with the same tag name as the
    <a href="#current-node">current node</a> ("tbody", "tfoot", or "thead") had
    been seen, then reprocess the current token.</p>

   </dd>

   <dt>An end tag whose tag name is one of: "body", "caption",
   "col", "colgroup", "html", "td", "th", "tr"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

  </dl><p>When the steps above require the UA to <dfn id="clear-the-stack-back-to-a-table-body-context">clear the stack
  back to a table body context</dfn>, it means that the UA must,
  while the <a href="#current-node">current node</a> is not a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>,
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, or <code><a href="the-html-element.html#the-html-element">html</a></code>
  element, pop elements from the <a href="#stack-of-open-elements">stack of open
  elements</a>.</p>

  <p class="note">The <a href="#current-node">current node</a> being an
  <code><a href="the-html-element.html#the-html-element">html</a></code> element after this process is a <a href="#fragment-case">fragment
  case</a>.</p>


  <h6 id="parsing-main-intr"><span class="secno">8.2.5.4.14 </span>The "<dfn title="insertion mode: in row">in row</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-intr" title="insertion mode: in row">in row</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A start tag whose tag name is one of: "th", "td"</dt>
   <dd>

    <p><a href="#clear-the-stack-back-to-a-table-row-context">Clear the stack back to a table row
    context</a>. (See below.)</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token, then switch
    the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intd" title="insertion mode:
    in cell">in cell</a>".</p>

    <p>Insert a marker at the end of the <a href="#list-of-active-formatting-elements">list of active
    formatting elements</a>.</p>

   </dd>

   <dt>An end tag whose tag name is "tr"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-table-scope" title="has an element in table scope">have an element in table
    scope</a> with the same tag name as the token, this is a
    <a href="#parse-error">parse error</a>. Ignore the token. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise:</p>

    <p><a href="#clear-the-stack-back-to-a-table-row-context">Clear the stack back to a table row
    context</a>. (See below.)</p>

    <p>Pop the <a href="#current-node">current node</a> (which will be a
    <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element) from the <a href="#stack-of-open-elements">stack of open
    elements</a>. Switch the <a href="#insertion-mode">insertion mode</a> to
    "<a href="#parsing-main-intbody" title="insertion mode: in table body">in table
    body</a>".</p>

   </dd>

   <dt>A start tag whose tag name is one of: "caption", "col",
   "colgroup", "tbody", "tfoot", "thead", "tr"</dt>
   <dt>An end tag whose tag name is "table"</dt>
   <dd>

    <p>Act as if an end tag with the tag name "tr" had been seen,
    then, if that token wasn't ignored, reprocess the current
    token.</p>

    <p class="note">The fake end tag token here can only be
    ignored in the <a href="#fragment-case">fragment case</a>.</p>

   </dd>

   <dt>An end tag whose tag name is one of: "tbody", "tfoot",
   "thead"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-table-scope" title="has an element in table scope">have an element in table
    scope</a> with the same tag name as the token, this is a
    <a href="#parse-error">parse error</a>. Ignore the token.</p>

    <p>Otherwise, act as if an end tag with the tag name "tr" had
    been seen, then reprocess the current token.</p>

   </dd>

   <dt>An end tag whose tag name is one of: "body", "caption",
   "col", "colgroup", "html", "td", "th"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

  </dl><p>When the steps above require the UA to <dfn id="clear-the-stack-back-to-a-table-row-context">clear the stack
  back to a table row context</dfn>, it means that the UA must,
  while the <a href="#current-node">current node</a> is not a <code><a href="the-tr-element.html#the-tr-element">tr</a></code>
  element or an <code><a href="the-html-element.html#the-html-element">html</a></code> element, pop elements from the
  <a href="#stack-of-open-elements">stack of open elements</a>.</p>

  <p class="note">The <a href="#current-node">current node</a> being an
  <code><a href="the-html-element.html#the-html-element">html</a></code> element after this process is a <a href="#fragment-case">fragment
  case</a>.</p>


  <h6 id="parsing-main-intd"><span class="secno">8.2.5.4.15 </span>The "<dfn title="insertion mode: in cell">in cell</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-intd" title="insertion mode: in cell">in cell</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>An end tag whose tag name is one of: "td", "th"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-table-scope" title="has an element in table scope">have an element in table
    scope</a> with the same tag name as that of the token, then
    this is a <a href="#parse-error">parse error</a> and the token must be
    ignored.</p>

    <p>Otherwise:</p>

    <p><a href="#generate-implied-end-tags">Generate implied end tags</a>.</p>

    <p>Now, if the <a href="#current-node">current node</a> is not an element
    with the same tag name as the token, then this is a
    <a href="#parse-error">parse error</a>.</p>

    <p>Pop elements from the <a href="#stack-of-open-elements">stack of open elements</a> stack
    until an element with the same tag name as the token has been
    popped from the stack.</p>

    <p><a href="#clear-the-list-of-active-formatting-elements-up-to-the-last-marker">Clear the list of active formatting elements up to
    the last marker</a>.</p>

    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-intr" title="insertion mode: in row">in row</a>".</p> <!-- current
    node here will be a <tr> normally; but could be <html> in the
    fragment case -->

   </dd>

   <dt>A start tag whose tag name is one of: "caption", "col",
   "colgroup", "tbody", "td", "tfoot", "th", "thead", "tr"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does
    <em>not</em> <a href="#has-an-element-in-table-scope" title="has an element in table scope">have
    a <code>td</code> or <code>th</code> element in table
    scope</a>, then this is a <a href="#parse-error">parse error</a>; ignore
    the token. (<a href="#fragment-case">fragment case</a>)</p>

    <p>Otherwise, <a href="#close-the-cell">close the cell</a> (see below) and
    reprocess the current token.</p>

   </dd>

   <dt>An end tag whose tag name is one of: "body", "caption",
   "col", "colgroup", "html"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>An end tag whose tag name is one of: "table", "tbody",
   "tfoot", "thead", "tr"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-table-scope" title="has an element in table scope">have an element in table
    scope</a> with the same tag name as that of the token (which
    can only happen for "tbody", "tfoot" and "thead", or in the
    <a href="#fragment-case">fragment case</a>), then this is a <a href="#parse-error">parse
    error</a> and the token must be ignored.</p>

    <p>Otherwise, <a href="#close-the-cell">close the cell</a> (see below) and
    reprocess the current token.</p>

   </dd>

   <dt>Anything else</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

  </dl><p>Where the steps above say to <dfn id="close-the-cell">close the cell</dfn>, they
  mean to run the following algorithm:</p>

  <ol><li><p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-table-scope" title="has an element in table scope">has a <code>td</code>
   element in table scope</a>, then act as if an end tag token
   with the tag name "td" had been seen.</p></li>

   <li><p>Otherwise, the <a href="#stack-of-open-elements">stack of open elements</a> will
   <a href="#has-an-element-in-table-scope" title="has an element in table scope">have a
   <code>th</code> element in table scope</a>; act as if an end
   tag token with the tag name "th" had been seen.</p></li>

  </ol><p class="note">The <a href="#stack-of-open-elements">stack of open elements</a> cannot have
  both a <code><a href="the-td-element.html#the-td-element">td</a></code> and a <code><a href="the-th-element.html#the-th-element">th</a></code> element <a href="#has-an-element-in-table-scope" title="has an element in table scope">in table scope</a> at the
  same time, nor can it have neither when the <a href="#close-the-cell">close the
  cell</a> algorithm is invoked.</p>


  <h6 id="parsing-main-inselect"><span class="secno">8.2.5.4.16 </span>The "<dfn title="insertion mode: in select">in select</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-inselect" title="insertion mode: in select">in select</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is U+0000 NULL</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>Any other character token</dt>
   <dd>
    <p><a href="#insert-a-character" title="insert a character">Insert the token's
    character</a> into the <a href="#current-node">current node</a>.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "option"</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is an <code><a href="the-option-element.html#the-option-element">option</a></code>
    element, act as if an end tag with the tag name "option" had
    been seen.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

   </dd>

   <dt>A start tag whose tag name is "optgroup"</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is an <code><a href="the-option-element.html#the-option-element">option</a></code>
    element, act as if an end tag with the tag name "option" had
    been seen.</p>

    <p>If the <a href="#current-node">current node</a> is an
    <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element, act as if an end tag with the
    tag name "optgroup" had been seen.</p>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>

   </dd>

   <dt>An end tag whose tag name is "optgroup"</dt>
   <dd>

    <p>First, if the <a href="#current-node">current node</a> is an
    <code><a href="the-option-element.html#the-option-element">option</a></code> element, and the node immediately before
    it in the <a href="#stack-of-open-elements">stack of open elements</a> is an
    <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element, then act as if an end tag with
    the tag name "option" had been seen.</p>

    <p>If the <a href="#current-node">current node</a> is an
    <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element, then pop that node from the
    <a href="#stack-of-open-elements">stack of open elements</a>. Otherwise, this is a
    <a href="#parse-error">parse error</a>; ignore the token.</p>

   </dd>

   <dt>An end tag whose tag name is "option"</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is an <code><a href="the-option-element.html#the-option-element">option</a></code>
    element, then pop that node from the <a href="#stack-of-open-elements">stack of open
    elements</a>. Otherwise, this is a <a href="#parse-error">parse
    error</a>; ignore the token.</p>

   </dd>

   <dt>An end tag whose tag name is "select"</dt>
   <dd>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-select-scope" title="has an element in select scope">have an element in select
    scope</a> with the same tag name as the token, this is a
    <a href="#parse-error">parse error</a>. Ignore the token. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise:</p>

    <p>Pop elements from the <a href="#stack-of-open-elements">stack of open elements</a>
    until a <code><a href="the-select-element.html#the-select-element">select</a></code> element has been popped from the
    stack.</p>

    <p><a href="#reset-the-insertion-mode-appropriately">Reset the insertion mode appropriately</a>.</p>

   </dd>

   <dt>A start tag whose tag name is "select"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. Act as if the token had been
    an end tag with the tag name "select" instead.</p>

   </dd>

   <dt>A start tag whose tag name is one of: "input", "keygen", "textarea"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> does not <a href="#has-an-element-in-select-scope" title="has an element in select scope">have a <code>select</code>
    element in select scope</a>, ignore the token. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise, act as if an end tag with the tag name "select" had
    been seen, and reprocess the token.</p>

   </dd>

   <dt>A start tag token whose tag name is "script"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end-of-file token</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is not the root
    <code><a href="the-html-element.html#the-html-element">html</a></code> element, then this is a <a href="#parse-error">parse
    error</a>.</p>

    <p class="note">The <a href="#current-node">current node</a> can only be the root
    <code><a href="the-html-element.html#the-html-element">html</a></code> element in the <a href="#fragment-case">fragment case</a>.</p>

    <p><a href="#stop-parsing">Stop parsing</a>.</p>

   </dd>

   <dt>Anything else</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

  </dl><h6 id="parsing-main-inselectintable"><span class="secno">8.2.5.4.17 </span>The "<dfn title="insertion mode: in select in table">in select in table</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-inselectintable" title="insertion mode: in select in table">in select in table</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A start tag whose tag name is one of: "caption", "table",
   "tbody", "tfoot", "thead", "tr", "td", "th"</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Act as if an end tag with the tag
    name "select" had been seen, and reprocess the token.</p>
   </dd>

   <dt>An end tag whose tag name is one of: "caption", "table",
   "tbody", "tfoot", "thead", "tr", "td", "th"</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p>If the <a href="#stack-of-open-elements">stack of open elements</a> <a href="#has-an-element-in-table-scope">has an
    element in table scope</a> with the same tag name as that
    of the token, then act as if an end tag with the tag name
    "select" had been seen, and reprocess the token. Otherwise,
    ignore the token.</p>

   </dd>

   <dt>Anything else</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inselect" title="insertion mode: in select">in select</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

  </dl><h6 id="parsing-main-afterbody"><span class="secno">8.2.5.4.18 </span>The "<dfn title="insertion mode: after body">after body</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-afterbody" title="insertion mode: after body">after body</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the first element in
    the <a href="#stack-of-open-elements">stack of open elements</a> (the <code><a href="the-html-element.html#the-html-element">html</a></code>
    element), with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end tag whose tag name is "html"</dt>
   <dd>

    <p>If the parser was originally created as part of the <a href="#html-fragment-parsing-algorithm">HTML
    fragment parsing algorithm</a>, this is a <a href="#parse-error">parse
    error</a>; ignore the token. (<a href="#fragment-case">fragment case</a>)</p>

    <p>Otherwise, switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#the-after-after-body-insertion-mode" title="insertion mode: after after body">after after
    body</a>".</p>

   </dd>

   <dt>An end-of-file token</dt>
   <dd>
    <p><a href="#stop-parsing">Stop parsing</a>.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. Switch the <a href="#insertion-mode">insertion
    mode</a> to "<a href="#parsing-main-inbody" title="insertion mode: in body">in
    body</a>" and reprocess the token.</p>

   </dd>

  </dl><h6 id="parsing-main-inframeset"><span class="secno">8.2.5.4.19 </span>The "<dfn title="insertion mode: in frameset">in frameset</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-inframeset" title="insertion mode: in frameset">in frameset</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p><a href="#insert-a-character" title="insert a character">Insert the character</a> into
    the <a href="#current-node">current node</a>.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "frameset"</dt>
   <dd>
    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.</p>
   </dd>

   <dt>An end tag whose tag name is "frameset"</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is the root
    <code><a href="the-html-element.html#the-html-element">html</a></code> element, then this is a <a href="#parse-error">parse
    error</a>; ignore the token. (<a href="#fragment-case">fragment
    case</a>)</p>

    <p>Otherwise, pop the <a href="#current-node">current node</a> from the
    <a href="#stack-of-open-elements">stack of open elements</a>.</p>

    <p>If the parser was <em>not</em> originally created as part
    of the <a href="#html-fragment-parsing-algorithm">HTML fragment parsing algorithm</a>
    (<a href="#fragment-case">fragment case</a>), and the <a href="#current-node">current
    node</a> is no longer a <code><a href="#frameset">frameset</a></code> element, then
    switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#parsing-main-afterframeset" title="insertion mode: after frameset">after
    frameset</a>".</p>

   </dd>

   <dt>A start tag whose tag name is "frame"</dt>
   <dd>

    <p><a href="#insert-an-html-element">Insert an HTML element</a> for the token.
    Immediately pop the <a href="#current-node">current node</a> off the
    <a href="#stack-of-open-elements">stack of open elements</a>.</p>

    <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
    token's <i>self-closing flag</i></a>, if it is set.</p>

   </dd>

   <dt>A start tag whose tag name is "noframes"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end-of-file token</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is not the root
    <code><a href="the-html-element.html#the-html-element">html</a></code> element, then this is a <a href="#parse-error">parse
    error</a>.</p>

    <p class="note">The <a href="#current-node">current node</a> can only be the root
    <code><a href="the-html-element.html#the-html-element">html</a></code> element in the <a href="#fragment-case">fragment case</a>.</p>

    <p><a href="#stop-parsing">Stop parsing</a>.</p>

   </dd>

   <dt>Anything else</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

  </dl><h6 id="parsing-main-afterframeset"><span class="secno">8.2.5.4.20 </span>The "<dfn title="insertion mode: after frameset">after frameset</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#parsing-main-afterframeset" title="insertion mode: after frameset">after frameset</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <!-- due to rules in the "in frameset" mode, this can't be entered in the fragment case -->
  <dl class="switch"><dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>
    <p><a href="#insert-a-character" title="insert a character">Insert the character</a> into
    the <a href="#current-node">current node</a>.</p>
   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end tag whose tag name is "html"</dt>
   <dd>
    <p>Switch the <a href="#insertion-mode">insertion mode</a> to "<a href="#the-after-after-frameset-insertion-mode" title="insertion mode: after after frameset">after after
    frameset</a>".</p>
   </dd>

   <dt>A start tag whose tag name is "noframes"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end-of-file token</dt>
   <dd>
    <p><a href="#stop-parsing">Stop parsing</a>.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

  </dl><h6 id="the-after-after-body-insertion-mode"><span class="secno">8.2.5.4.21 </span>The "<dfn title="insertion mode: after after body">after after body</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#the-after-after-body-insertion-mode" title="insertion mode: after after body">after after body</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <code><a href="dom.html#document">Document</a></code>
    object with the <code title="">data</code> attribute set to the
    data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end-of-file token</dt>
   <dd>
    <p><a href="#stop-parsing">Stop parsing</a>.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Switch the <a href="#insertion-mode">insertion mode</a>
    to "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" and
    reprocess the token.</p>
   </dd>

  </dl><h6 id="the-after-after-frameset-insertion-mode"><span class="secno">8.2.5.4.22 </span>The "<dfn title="insertion mode: after after frameset">after after frameset</dfn>" insertion mode</h6>

  <p>When the user agent is to apply the rules for the "<a href="#the-after-after-frameset-insertion-mode" title="insertion mode: after after frameset">after after frameset</a>" <a href="#insertion-mode">insertion mode</a>, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <code><a href="dom.html#document">Document</a></code>
    object with the <code title="">data</code> attribute set to the
    data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dt>A character token that is one of U+0009 CHARACTER
   TABULATION, "LF" (U+000A), "FF" (U+000C),
   "CR" (U+000D), or U+0020 SPACE</dt>
   <dt>A start tag whose tag name is "html"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>An end-of-file token</dt>
   <dd>
    <p><a href="#stop-parsing">Stop parsing</a>.</p>
   </dd>

   <dt>A start tag whose tag name is "noframes"</dt>
   <dd>
    <p>Process the token <a href="#using-the-rules-for">using the rules for</a> the "<a href="#parsing-main-inhead" title="insertion mode: in head">in head</a>" <a href="#insertion-mode">insertion
    mode</a>.</p>
   </dd>

   <dt>Anything else</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

  </dl><h5 id="parsing-main-inforeign"><span class="secno">8.2.5.5 </span>The rules for parsing tokens <dfn title="insertion mode: in foreign content">in foreign content</dfn></h5>

  <p>When the user agent is to apply the rules for parsing tokens in foreign content, the user agent must handle the token as follows:</p>

  <dl class="switch"><dt>A character token that is U+0000 NULL</dt>
   <dd>

    <p><a href="#parse-error">Parse error</a>. <a href="#insert-a-character" title="insert a
    character">Insert a U+FFFD REPLACEMENT CHARACTER character</a>
    into the <a href="#current-node">current node</a>.</p>

   </dd>

   <dt>A character token that is one of U+0009 CHARACTER TABULATION,
   "LF" (U+000A), "FF" (U+000C), "CR" (U+000D), or U+0020 SPACE</dt>
   <dd>

    <p><a href="#insert-a-character" title="insert a character">Insert the token's
    character</a> into the <a href="#current-node">current node</a>.</p>

   </dd>

   <dt>Any other character token</dt>
   <dd>

    <p><a href="#insert-a-character" title="insert a character">Insert the token's
    character</a> into the <a href="#current-node">current node</a>.</p>

    <p>Set the <a href="#frameset-ok-flag">frameset-ok flag</a> to "not ok".</p>

   </dd>

   <dt>A comment token</dt>
   <dd>
    <p>Append a <code><a href="infrastructure.html#comment-0">Comment</a></code> node to the <a href="#current-node">current
    node</a> with the <code title="">data</code> attribute set to
    the data given in the comment token.</p>
   </dd>

   <dt>A DOCTYPE token</dt>
   <dd>
    <p><a href="#parse-error">Parse error</a>. Ignore the token.</p>
   </dd>

   <dt>A start tag whose tag name is one of: <!--"a",--> "b", "big",
   "blockquote", "body"<!--by inspection-->, "br", "center", "code",
   "dd", "div", "dl", "dt"<!-- so that dd and dt can be handled
   uniformly throughout the parser -->, "em", "embed", "h1", "h2",
   "h3", "h4"<!--for completeness-->, "h5", "h6"<!--for
   completeness-->, "head"<!--by inspection-->, "hr", "i", "img",
   "li", "listing"<!-- so that pre and listing can be handled
   uniformly throughout the parser -->, "menu", "meta", "nobr",
   "ol"<!-- so that dl, ul, and ol can be handled uniformly throughout
   the parser -->, "p", "pre", "ruby", "s", <!--"script",--> "small",
   "span", "strong", "strike"<!-- so that s and strike can be handled
   uniformly throughout the parser -->, <!--"style",--> "sub", "sup",
   "table"<!--by inspection-->, "tt", "u", "ul", "var"</dt> <!-- this
   list was determined empirically by studying over 6,000,000,000
   pages that were specifically not XML pages -->
   <dt>A start tag whose tag name is "font", if the token has any
   attributes named "color", "face", or "size"</dt> <!-- the
   attributes here are required so that SVG <font> will go through as
   SVG but legacy <font>s won't -->

   <dd>

    <p><a href="#parse-error">Parse error</a>.</p>

    <p>Pop an element from the <a href="#stack-of-open-elements">stack of open elements</a>,
    and then keep popping more elements from the <a href="#stack-of-open-elements">stack of open
    elements</a> until the <a href="#current-node">current node</a> is a
    <a href="#mathml-text-integration-point">MathML text integration point</a>, an <a href="#html-integration-point">HTML
    integration point</a>, or an element in the <a href="namespaces.html#html-namespace-0">HTML
    namespace</a>.</p>

    <p>Then, reprocess the token.</p>

   </dd>

   <dt>Any other start tag</dt>
   <dd>

    <p>If the <a href="#current-node">current node</a> is an element in the
    <a href="namespaces.html#mathml-namespace">MathML namespace</a>, <a href="#adjust-mathml-attributes">adjust MathML
    attributes</a> for the token. (This fixes the case of MathML
    attributes that are not all lowercase.)</p>

    <p>If the <a href="#current-node">current node</a> is an element in the <a href="namespaces.html#svg-namespace">SVG
    namespace</a>, and the token's tag name is one of the ones in
    the first column of the following table, change the tag name to
    the name given in the corresponding cell in the second
    column. (This fixes the case of SVG elements that are not all
    lowercase.)</p>

    <table><thead><tr><th> Tag name </th><th> Element name
     </th></tr></thead><tbody><tr><td> <code title="">altglyph</code> </td><td> <code title="">altGlyph</code>
      </td></tr><tr><td> <code title="">altglyphdef</code> </td><td> <code title="">altGlyphDef</code>
      </td></tr><tr><td> <code title="">altglyphitem</code> </td><td> <code title="">altGlyphItem</code>
      </td></tr><tr><td> <code title="">animatecolor</code> </td><td> <code title="">animateColor</code>
      </td></tr><tr><td> <code title="">animatemotion</code> </td><td> <code title="">animateMotion</code>
      </td></tr><tr><td> <code title="">animatetransform</code> </td><td> <code title="">animateTransform</code>
      </td></tr><tr><td> <code title="">clippath</code> </td><td> <code title="">clipPath</code>
      </td></tr><tr><td> <code title="">feblend</code> </td><td> <code title="">feBlend</code>
      </td></tr><tr><td> <code title="">fecolormatrix</code> </td><td> <code title="">feColorMatrix</code>
      </td></tr><tr><td> <code title="">fecomponenttransfer</code> </td><td> <code title="">feComponentTransfer</code>
      </td></tr><tr><td> <code title="">fecomposite</code> </td><td> <code title="">feComposite</code>
      </td></tr><tr><td> <code title="">feconvolvematrix</code> </td><td> <code title="">feConvolveMatrix</code>
      </td></tr><tr><td> <code title="">fediffuselighting</code> </td><td> <code title="">feDiffuseLighting</code>
      </td></tr><tr><td> <code title="">fedisplacementmap</code> </td><td> <code title="">feDisplacementMap</code>
      </td></tr><tr><td> <code title="">fedistantlight</code> </td><td> <code title="">feDistantLight</code>
      </td></tr><tr><td> <code title="">feflood</code> </td><td> <code title="">feFlood</code>
      </td></tr><tr><td> <code title="">fefunca</code> </td><td> <code title="">feFuncA</code>
      </td></tr><tr><td> <code title="">fefuncb</code> </td><td> <code title="">feFuncB</code>
      </td></tr><tr><td> <code title="">fefuncg</code> </td><td> <code title="">feFuncG</code>
      </td></tr><tr><td> <code title="">fefuncr</code> </td><td> <code title="">feFuncR</code>
      </td></tr><tr><td> <code title="">fegaussianblur</code> </td><td> <code title="">feGaussianBlur</code>
      </td></tr><tr><td> <code title="">feimage</code> </td><td> <code title="">feImage</code>
      </td></tr><tr><td> <code title="">femerge</code> </td><td> <code title="">feMerge</code>
      </td></tr><tr><td> <code title="">femergenode</code> </td><td> <code title="">feMergeNode</code>
      </td></tr><tr><td> <code title="">femorphology</code> </td><td> <code title="">feMorphology</code>
      </td></tr><tr><td> <code title="">feoffset</code> </td><td> <code title="">feOffset</code>
      </td></tr><tr><td> <code title="">fepointlight</code> </td><td> <code title="">fePointLight</code>
      </td></tr><tr><td> <code title="">fespecularlighting</code> </td><td> <code title="">feSpecularLighting</code>
      </td></tr><tr><td> <code title="">fespotlight</code> </td><td> <code title="">feSpotLight</code>
      </td></tr><tr><td> <code title="">fetile</code> </td><td> <code title="">feTile</code>
      </td></tr><tr><td> <code title="">feturbulence</code> </td><td> <code title="">feTurbulence</code>
      </td></tr><tr><td> <code title="">foreignobject</code> </td><td> <code title="">foreignObject</code>
      </td></tr><tr><td> <code title="">glyphref</code> </td><td> <code title="">glyphRef</code>
      </td></tr><tr><td> <code title="">lineargradient</code> </td><td> <code title="">linearGradient</code>
      </td></tr><tr><td> <code title="">radialgradient</code> </td><td> <code title="">radialGradient</code>
      <!--<tr> <td> <code title="">solidcolor</code> <td> <code title="">solidColor</code> (SVG 1.2)-->
      </td></tr><tr><td> <code title="">textpath</code> </td><td> <code title="">textPath</code>
    </td></tr></tbody></table><p>If the <a href="#current-node">current node</a> is an element in the <a href="namespaces.html#svg-namespace">SVG
    namespace</a>, <a href="#adjust-svg-attributes">adjust SVG attributes</a> for the
    token. (This fixes the case of SVG attributes that are not all
    lowercase.)</p>

    <p><a href="#adjust-foreign-attributes">Adjust foreign attributes</a> for the token. (This
    fixes the use of namespaced attributes, in particular XLink in
    SVG.)</p>

    <p><a href="#insert-a-foreign-element">Insert a foreign element</a> for the token, in the
    same namespace as the <a href="#current-node">current node</a>.</p>

    <p>If the token has its <i>self-closing flag</i> set, then run the
    appropriate steps from the following list:</p>

    <dl class="switch"><dt>If the token's tag name is "script"</dt>

     <dd>

      <p><a href="#acknowledge-self-closing-flag" title="acknowledge self-closing flag">Acknowledge the
      token's <i>self-closing flag</i></a>, and then act as if an
      end tag with the tag name "script" had been seen.</p>

     </dd>

     <dt>Otherwise</dt>

     <dd>

      <p>Pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
      elements</a> and <a href="#acknowledge-self-closing-flag" title="acknowledge self-closing
      flag">acknowledge the token's <i>self-closing
      flag</i></a>.</p>

     </dd>

    </dl></dd>

   <dt id="scriptForeignEndTag">An end tag whose tag name is "script", if the <a href="#current-node">current node</a> is a <code title="">script</code> element in the <a href="namespaces.html#svg-namespace">SVG namespace</a></dt>
   <dd>

    <p>Pop the <a href="#current-node">current node</a> off the <a href="#stack-of-open-elements">stack of open
    elements</a>.</p>

    <p>Let the <var title="">old insertion point</var> have the
    same value as the current <a href="#insertion-point">insertion point</a>. Let
    the <a href="#insertion-point">insertion point</a> be just before the <a href="#next-input-character">next
    input character</a>.</p>

    <p>Increment the parser's <a href="#script-nesting-level">script nesting level</a> by
    one. Set the <a href="#parser-pause-flag">parser pause flag</a> to true.</p>

    <p><a href="http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing">Process
    the <code title="">script</code> element</a> according to the SVG
    rules, if the user agent supports SVG. <a href="#refsSVG">[SVG]</a></p>

    <p class="note">Even if this causes <a href="dynamic-markup-insertion.html#dom-document-write" title="dom-document-write">new characters to be inserted into the
    tokenizer</a>, the parser will not be executed reentrantly,
    since the <a href="#parser-pause-flag">parser pause flag</a> is true.</p>

    <p>Decrement the parser's <a href="#script-nesting-level">script nesting level</a> by
    one. If the parser's <a href="#script-nesting-level">script nesting level</a> is zero,
    then set the <a href="#parser-pause-flag">parser pause flag</a> to false.</p>

    <p>Let the <a href="#insertion-point">insertion point</a> have the value of the <var title="">old insertion point</var>. (In other words, restore the
    <a href="#insertion-point">insertion point</a> to its previous value. This value
    might be the "undefined" value.)</p>

   </dd>

   <dt>Any other end tag</dt>

   <dd>

    <p>Run these steps:</p>

    <ol><li><p>Initialize <var title="">node</var> to be the <a href="#current-node">current
     node</a> (the bottommost node of the stack).</p></li>

     <li><p>If <var title="">node</var> is not an element with the
     same tag name as the token, then this is a <a href="#parse-error">parse
     error</a>.</p></li>

     <li><p><i>Loop</i>: If <var title="">node</var>'s tag name,
     <a href="infrastructure.html#converted-to-ascii-lowercase">converted to ASCII lowercase</a>, is the same as the tag
     name of the token, pop elements from the <a href="#stack-of-open-elements">stack of open
     elements</a> until <var title="">node</var> has been popped
     from the stack, and then abort these steps.</p></li>

     <li><p>Set <var title="">node</var> to the previous entry in the
     <a href="#stack-of-open-elements">stack of open elements</a>.</p></li>

     <li><p>If <var title="">node</var> is not an element in the
     <a href="namespaces.html#html-namespace-0">HTML namespace</a>, return to the step labeled
     <i>loop</i>.</p></li>

     <li><p>Otherwise, process the token according to the rules given
     in the section corresponding to the current <a href="#insertion-mode">insertion
     mode</a> in HTML content.</p></li>

    </ol></dd>

  </dl></div>


  <div class="impl">

  <h4 id="the-end"><span class="secno">8.2.6 </span>The end</h4>

  <p>Once the user agent <dfn id="stop-parsing" title="stop parsing">stops parsing</dfn>
  the document, the user agent must run the following steps:</p>

  <ol><!-- this happens as part of one of the tasks that runs the parser --><li><p>Set the <a href="dom.html#current-document-readiness">current document readiness</a> to "<code title="">interactive</code>" <!-- this also synchronously fires an
   event --> and the <a href="#insertion-point">insertion point</a> to
   undefined.</p></li>

   <li><p>Pop <em>all</em> the nodes off the <a href="#stack-of-open-elements">stack of open
   elements</a>.</p></li>

   <li><p>If the <a href="the-script-element.html#list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">list of scripts that will execute when the
   document has finished parsing</a> is not empty, run these
   substeps:</p>

    <ol><li><p><a href="#spin-the-event-loop">Spin the event loop</a> until the first
     <code><a href="the-script-element.html#the-script-element">script</a></code> in the <a href="the-script-element.html#list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">list of scripts that will
     execute when the document has finished parsing</a> has its
     <a href="the-script-element.html#ready-to-be-parser-executed">"ready to be parser-executed"</a> flag set <em>and</em>
     the parser's <code><a href="dom.html#document">Document</a></code> <a href="styling.html#has-no-style-sheet-that-is-blocking-scripts">has no style sheet that
     is blocking scripts</a>.</p></li>

     <li><p><a href="the-script-element.html#execute-the-script-block" title="execute the script block">Execute</a> the
     first <code><a href="the-script-element.html#the-script-element">script</a></code> in the <a href="the-script-element.html#list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">list of scripts that will
     execute when the document has finished parsing</a>.</p></li>

     <li><p>Remove the first <code><a href="the-script-element.html#the-script-element">script</a></code> element from the
     <a href="the-script-element.html#list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">list of scripts that will execute when the document has
     finished parsing</a> (i.e. shift out the first entry in the
     list).</p></li>

     <li><p>If the <a href="the-script-element.html#list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">list of scripts that will execute when the
     document has finished parsing</a> is still not empty, repeat
     these substeps again from substep 1.</p>

    </li></ol></li>

   <li><p><a href="#queue-a-task">Queue a task</a> to <a href="#fire-a-simple-event">fire a simple
   event</a> that bubbles named <code title="event-DOMContentLoaded">DOMContentLoaded</code> at the
   <code><a href="dom.html#document">Document</a></code>.</p></li>

   <li><p><a href="#spin-the-event-loop">Spin the event loop</a> until the <a href="the-script-element.html#set-of-scripts-that-will-execute-as-soon-as-possible">set of
   scripts that will execute as soon as possible</a> and the
   <a href="the-script-element.html#list-of-scripts-that-will-execute-in-order-as-soon-as-possible">list of scripts that will execute in order as soon as
   possible</a> are empty.</p></li> <!-- this step is not redundant
   with the next one, since <script> nodes delay the load event of the
   document they are in, but they might change document between being
   added to one document's set/list and executing those scripts, so
   they might be delaying another document but still be in this
   document's set/list. -->

   <li><p><a href="#spin-the-event-loop">Spin the event loop</a> until there is nothing that
   <dfn id="delay-the-load-event" title="delay the load event">delays the load event</dfn> in
   the <code><a href="dom.html#document">Document</a></code>.</p></li>

   <li><p><a href="#queue-a-task">Queue a task</a> to set the <a href="dom.html#current-document-readiness">current document
   readiness</a> to "<code title="">complete</code>"<!-- this also
   fires an event synchronously during the task -->, and then, if the
   <code><a href="dom.html#document">Document</a></code> is in a <a href="#browsing-context">browsing context</a>, to
   <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-load">load</code> at the <code><a href="dom.html#document">Document</a></code>'s
   <code><a href="#window">Window</a></code> object, but with its <code title="dom-event-target"><a href="infrastructure.html#dom-event-target">target</a></code> set to the
   <code><a href="dom.html#document">Document</a></code> object (and the <code title="dom-event-currentTarget">currentTarget</code> set to the
   <code><a href="#window">Window</a></code> object).</p></li>

   <li>

    <p>If the <code><a href="dom.html#document">Document</a></code> is in a <a href="#browsing-context">browsing
    context</a>, then <a href="#queue-a-task">queue a task</a> to run the
    following substeps:</p>

    <ol><li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="#page-showing">page showing</a>
     flag is true, then abort this task (i.e. don't fire the event
     below).</p></li> <!-- i don't see how this could be, but just to
     be sure... -->

     <li><p>Set the <code><a href="dom.html#document">Document</a></code>'s <a href="#page-showing">page showing</a>
     flag to true.</p></li>

     <li><p>Fire a <code title="event-pageshow"><a href="#event-pageshow">pageshow</a></code> event
     at the <code><a href="#window">Window</a></code> object of the <code><a href="dom.html#document">Document</a></code>,
     but with its <code title="dom-event-target"><a href="infrastructure.html#dom-event-target">target</a></code> set to
     the <code><a href="dom.html#document">Document</a></code> object (and the <code title="dom-event-currentTarget">currentTarget</code> set to the
     <code><a href="#window">Window</a></code> object), using the
     <code><a href="#pagetransitionevent">PageTransitionEvent</a></code> interface, with the <code title="dom-PageTransitionEvent-persisted"><a href="#dom-pagetransitionevent-persisted">persisted</a></code>
     attribute initialized to false. This event must not bubble, must
     not be cancelable, and has no default action.</p></li>

    </ol></li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code> has any <a href="#pending-application-cache-download-process-tasks">pending
   application cache download process tasks</a>, then <a href="#queue-a-task" title="queue a task">queue</a> each such <a href="#concept-task" title="concept-task">task</a> in the order they were added to
   the list of <a href="#pending-application-cache-download-process-tasks">pending application cache download process
   tasks</a>, and then empty the list of <a href="#pending-application-cache-download-process-tasks">pending application
   cache download process tasks</a>. The <a href="#task-source">task source</a>
   for these <a href="#concept-task" title="concept-task">tasks</a> is the
   <a href="#networking-task-source">networking task source</a>.</p></li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="#print-when-loaded">print when
   loaded</a> flag is set, then run the <a href="#printing-steps">printing
   steps</a>.</p></li>

   <li><p>The <code><a href="dom.html#document">Document</a></code> is now <dfn id="ready-for-post-load-tasks">ready for post-load
   tasks</dfn>.</p></li>

   <li><p><a href="#queue-a-task">Queue a task</a> to mark the <code><a href="dom.html#document">Document</a></code>
   as <dfn id="completely-loaded">completely loaded</dfn>.</p></li>

  </ol><p>When the user agent is to <dfn id="abort-a-parser">abort a parser</dfn>, it must run
  the following steps:</p>

  <ol><li><p>Throw away any pending content in the <a href="#input-stream">input
   stream</a>, and discard any future content that would have been
   added to it.</p></li>

   <li><p>Set the <a href="dom.html#current-document-readiness">current document readiness</a> to "<code title="">interactive</code>"<!-- this synchronously fires an event
   -->.</p></li>

   <li><p>Pop <em>all</em> the nodes off the <a href="#stack-of-open-elements">stack of open
   elements</a>.</p></li>

   <li><p>Set the <a href="dom.html#current-document-readiness">current document readiness</a> to "<code title="">complete</code>"<!-- this also synchronously fires an
   event -->.</p></li>

   <!-- anything else? this is things that happen when you call
   document.open() on a document that's still being parsed, or when
   you navigate a document that's still parsing, or navigate the
   parent of a frame with a document that's still parsing, or the user
   hits "stop". Should the pending scripts be blown away or anything?
   -->

  </ol><p>Except where otherwise specified, the <a href="#task-source">task source</a>
  for the <a href="#concept-task" title="concept-task">tasks</a> mentioned in this
  section is the <a href="#dom-manipulation-task-source">DOM manipulation task source</a>.</p>

  </div>


  <div class="impl">

  <h4 id="coercing-an-html-dom-into-an-infoset"><span class="secno">8.2.7 </span>Coercing an HTML DOM into an infoset</h4>

  <p>When an application uses an <a href="#html-parser">HTML parser</a> in
  conjunction with an XML pipeline, it is possible that the
  constructed DOM is not compatible with the XML tool chain in certain
  subtle ways. For example, an XML toolchain might not be able to
  represent attributes with the name <code title="">xmlns</code>,
  since they conflict with the Namespaces in XML syntax. There is also
  some data that the <a href="#html-parser">HTML parser</a> generates that isn't
  included in the DOM itself. This section specifies some rules for
  handling these issues.</p>

  <p>If the XML API being used doesn't support DOCTYPEs, the tool may
  drop DOCTYPEs altogether.</p>

  <p>If the XML API doesn't support attributes in no namespace that
  are named "<code title="">xmlns</code>", attributes whose names
  start with "<code title="">xmlns:</code>", or attributes in the
  <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a>, then the tool may drop such
  attributes.</p>

  <p>The tool may annotate the output with any namespace declarations
  required for proper operation.</p>

  <p>If the XML API being used restricts the allowable characters in
  the local names of elements and attributes, then the tool may map
  all element and attribute local names that the API wouldn't support
  to a set of names that <em>are</em> allowed, by replacing any
  character that isn't supported with the uppercase letter U and the
  six digits of the character's Unicode code point when expressed in
  hexadecimal, using digits 0-9 and capital letters A-F as the
  symbols, in increasing numeric order.</p>

  <p class="example">For example, the element name <code title="">foo&lt;bar</code>, which can be output by the <a href="#html-parser">HTML
  parser</a>, though it is neither a legal HTML element name nor a
  well-formed XML element name, would be converted into <code title="">fooU00003Cbar</code>, which <em>is</em> a well-formed XML
  element name (though it's still not legal in HTML by any means).</p>

  <p class="example">As another example, consider the attribute
  <code>xlink:href</code>. Used on a MathML element, it becomes, after
  being <a href="#adjust-foreign-attributes" title="adjust foreign attributes">adjusted</a>, an
  attribute with a prefix "<code title="">xlink</code>" and a local
  name "<code title="">href</code>". However, used on an HTML element,
  it becomes an attribute with no prefix and the local name "<code title="">xlink:href</code>", which is not a valid NCName, and thus
  might not be accepted by an XML API. It could thus get converted,
  becoming "<code title="">xlinkU00003Ahref</code>".</p>

  <p class="note">The resulting names from this conversion
  conveniently can't clash with any attribute generated by the
  <a href="#html-parser">HTML parser</a>, since those are all either lowercase or
  those listed in the <a href="#adjust-foreign-attributes">adjust foreign attributes</a>
  algorithm's table.</p>

  <p>If the XML API restricts comments from having two consecutive
  "--" (U+002D) characters, the tool may insert a single
  U+0020 SPACE character between any such offending characters.</p>

  <p>If the XML API restricts comments from ending in a
  "-" (U+002D) character, the tool may insert a single
  U+0020 SPACE character at the end of such comments.</p>

  <p>If the XML API restricts allowed characters in character data,
  attribute values, or comments, the tool may replace any "FF" (U+000C) character with a U+0020 SPACE character, and any other
  literal non-XML character with a U+FFFD REPLACEMENT CHARACTER.</p>

  <p>If the tool has no way to convey out-of-band information, then
  the tool may drop the following information:</p>

  <ul><li>Whether the document is set to <i><a href="infrastructure.html#no-quirks-mode">no-quirks mode</a></i>,
   <i><a href="infrastructure.html#limited-quirks-mode">limited-quirks mode</a></i>, or <i><a href="infrastructure.html#quirks-mode">quirks mode</a></i></li>

   <li>The association between form controls and forms that aren't
   their nearest <code><a href="the-form-element.html#the-form-element">form</a></code> element ancestor (use of the
   <a href="#form-element-pointer"><code>form</code> element pointer</a> in the parser)</li>

  </ul><p class="note">The mutations allowed by this section apply
  <em>after</em> the <a href="#html-parser">HTML parser</a>'s rules have been
  applied. For example, a <code title="">&lt;a::&gt;</code> start tag
  will be closed by a <code title="">&lt;/a::&gt;</code> end tag, and
  never by a <code title="">&lt;/aU00003AU00003A&gt;</code> end tag, even
  if the user agent is using the rules above to then generate an
  actual element in the DOM with the name <code title="">aU00003AU00003A</code> for that start tag.</p>

  </div>


  <div class="impl">

  <h4 id="an-introduction-to-error-handling-and-strange-cases-in-the-parser"><span class="secno">8.2.8 </span>An introduction to error handling and strange cases in the parser</h4>

  <p><i>This section is non-normative.</i></p>
  <p>This section examines some erroneous markup and discusses how
  the <a href="#html-parser">HTML parser</a> handles these cases.</p>


  <h5 id="misnested-tags:-b-i-/b-/i"><span class="secno">8.2.8.1 </span>Misnested tags: &lt;b&gt;&lt;i&gt;&lt;/b&gt;&lt;/i&gt;</h5>

  <p><i>This section is non-normative.</i></p>
  <p>The most-often discussed example of erroneous markup is as
  follows:</p>

  <pre>&lt;p&gt;1&lt;b&gt;2&lt;i&gt;3&lt;/b&gt;4&lt;/i&gt;5&lt;/p&gt;</pre>

  <p>The parsing of this markup is straightforward up to the "3". At
  this point, the DOM looks like this:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">1</span></li><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">2</span></li><li class="t1"><code><a href="the-i-element.html#the-i-element">i</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">3</span></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><p>Here, the <a href="#stack-of-open-elements">stack of open elements</a> has five elements
  on it: <code><a href="the-html-element.html#the-html-element">html</a></code>, <code><a href="the-body-element.html#the-body-element">body</a></code>, <code><a href="the-p-element.html#the-p-element">p</a></code>,
  <code><a href="the-b-element.html#the-b-element">b</a></code>, and <code><a href="the-i-element.html#the-i-element">i</a></code>. The <a href="#list-of-active-formatting-elements">list of active
  formatting elements</a> just has two: <code><a href="the-b-element.html#the-b-element">b</a></code> and
  <code><a href="the-i-element.html#the-i-element">i</a></code>. The <a href="#insertion-mode">insertion mode</a> is "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>".</p>

  <p>Upon receiving the end tag token with the tag name "b", the "<a href="#adoptionAgency">adoption agency algorithm</a>" is
  invoked. This is a simple case, in that the <var title="">formatting
  element</var> is the <code><a href="the-b-element.html#the-b-element">b</a></code> element, and there is no
  <var title="">furthest block</var>. Thus, the <a href="#stack-of-open-elements">stack of open
  elements</a> ends up with just three elements: <code><a href="the-html-element.html#the-html-element">html</a></code>,
  <code><a href="the-body-element.html#the-body-element">body</a></code>, and <code><a href="the-p-element.html#the-p-element">p</a></code>, while the <a href="#list-of-active-formatting-elements">list of
  active formatting elements</a> has just one: <code><a href="the-i-element.html#the-i-element">i</a></code>. The
  DOM tree is unmodified at this point.</p>

  <p>The next token is a character ("4"), triggers the <a href="#reconstruct-the-active-formatting-elements" title="reconstruct the active formatting elements">reconstruction of
  the active formatting elements</a>, in this case just the
  <code><a href="the-i-element.html#the-i-element">i</a></code> element. A new <code><a href="the-i-element.html#the-i-element">i</a></code> element is thus created
  for the "4" <code><a href="infrastructure.html#text-0">Text</a></code> node. After the end tag token for the
  "i" is also received, and the "5" <code><a href="infrastructure.html#text-0">Text</a></code> node is
  inserted, the DOM looks as follows:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">1</span></li><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">2</span></li><li class="t1"><code><a href="the-i-element.html#the-i-element">i</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">3</span></li></ul></li></ul></li><li class="t1"><code><a href="the-i-element.html#the-i-element">i</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">4</span></li></ul></li><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">5</span></li></ul></li></ul></li></ul></li></ul><h5 id="misnested-tags:-b-p-/b-/p"><span class="secno">8.2.8.2 </span>Misnested tags: &lt;b&gt;&lt;p&gt;&lt;/b&gt;&lt;/p&gt;</h5>

  <p><i>This section is non-normative.</i></p>
  <p>A case similar to the previous one is the following:</p>

  <pre>&lt;b&gt;1&lt;p&gt;2&lt;/b&gt;3&lt;/p&gt;</pre>

  <p>Up to the "2" the parsing here is straightforward:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">1</span></li><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">2</span></li></ul></li></ul></li></ul></li></ul></li></ul><p>The interesting part is when the end tag token with the tag name
  "b" is parsed.</p>

  <p>Before that token is seen, the <a href="#stack-of-open-elements">stack of open
  elements</a> has four elements on it: <code><a href="the-html-element.html#the-html-element">html</a></code>,
  <code><a href="the-body-element.html#the-body-element">body</a></code>, <code><a href="the-b-element.html#the-b-element">b</a></code>, and <code><a href="the-p-element.html#the-p-element">p</a></code>. The
  <a href="#list-of-active-formatting-elements">list of active formatting elements</a> just has the one:
  <code><a href="the-b-element.html#the-b-element">b</a></code>. The <a href="#insertion-mode">insertion mode</a> is "<a href="#parsing-main-inbody" title="insertion mode: in body">in body</a>".</p>

  <p>Upon receiving the end tag token with the tag name "b", the "<a href="#adoptionAgency">adoption agency algorithm</a>" is invoked, as
  in the previous example. However, in this case, there <em>is</em> a
  <var title="">furthest block</var>, namely the <code><a href="the-p-element.html#the-p-element">p</a></code> element. Thus,
  this time the adoption agency algorithm isn't skipped over.</p>

  <p>The <var title="">common ancestor</var> is the <code><a href="the-body-element.html#the-body-element">body</a></code>
  element. A conceptual "bookmark" marks the position of the
  <code><a href="the-b-element.html#the-b-element">b</a></code> in the <a href="#list-of-active-formatting-elements">list of active formatting
  elements</a>, but since that list has only one element in it,
  the bookmark won't have much effect.</p>

  <p>As the algorithm progresses, <var title="">node</var> ends up set
  to the formatting element (<code><a href="the-b-element.html#the-b-element">b</a></code>), and <var title="">last
  node</var> ends up set to the <var title="">furthest block</var>
  (<code><a href="the-p-element.html#the-p-element">p</a></code>).</p>

  <p>The <var title="">last node</var> gets appended (moved) to the
  <var title="">common ancestor</var>, so that the DOM looks like:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">1</span></li></ul></li><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">2</span></li></ul></li></ul></li></ul></li></ul><p>A new <code><a href="the-b-element.html#the-b-element">b</a></code> element is created, and the children of the
  <code><a href="the-p-element.html#the-p-element">p</a></code> element are moved to it:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">1</span></li></ul></li><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code></li></ul></li></ul></li></ul><ul class="domTree"><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">2</span></li></ul></li></ul><p>Finally, the new <code><a href="the-b-element.html#the-b-element">b</a></code> element is appended to the
  <code><a href="the-p-element.html#the-p-element">p</a></code> element, so that the DOM looks like:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">1</span></li></ul></li><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">2</span></li></ul></li></ul></li></ul></li></ul></li></ul><p>The <code><a href="the-b-element.html#the-b-element">b</a></code> element is removed from the <a href="#list-of-active-formatting-elements">list of
  active formatting elements</a> and the <a href="#stack-of-open-elements">stack of open
  elements</a>, so that when the "3" is parsed, it is appended to
  the <code><a href="the-p-element.html#the-p-element">p</a></code> element:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">1</span></li></ul></li><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">2</span></li></ul></li><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">3</span></li></ul></li></ul></li></ul></li></ul><h5 id="unexpected-markup-in-tables"><span class="secno">8.2.8.3 </span>Unexpected markup in tables</h5>

  <p><i>This section is non-normative.</i></p>
  <p>Error handling in tables is, for historical reasons, especially
  strange. For example, consider the following markup:</p>

  <pre>&lt;table&gt;<strong><a href="the-b-element.html#the-b-element">&lt;b&gt;</a></strong>&lt;tr&gt;&lt;td&gt;aaa&lt;/td&gt;&lt;/tr&gt;<strong>bbb</strong>&lt;/table&gt;ccc</pre>

  <p>The highlighted <code><a href="the-b-element.html#the-b-element">b</a></code> element start tag is not allowed
  directly inside a table like that, and the parser handles this case
  by placing the element <em>before</em> the table. (This is called <i title="foster parent"><a href="#foster-parent">foster parenting</a></i>.) This can be seen by
  examining the DOM tree as it stands just after the
  <code><a href="the-table-element.html#the-table-element">table</a></code> element's start tag has been seen:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-table-element.html#the-table-element">table</a></code></li></ul></li></ul></li></ul><p>...and then immediately after the <code><a href="the-b-element.html#the-b-element">b</a></code> element start
  tag has been seen:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code></li><li class="t1"><code><a href="the-table-element.html#the-table-element">table</a></code></li></ul></li></ul></li></ul><p>At this point, the <a href="#stack-of-open-elements">stack of open elements</a> has on it
  the elements <code><a href="the-html-element.html#the-html-element">html</a></code>, <code><a href="the-body-element.html#the-body-element">body</a></code>,
  <code><a href="the-table-element.html#the-table-element">table</a></code>, and <code><a href="the-b-element.html#the-b-element">b</a></code> (in that order, despite the
  resulting DOM tree); the <a href="#list-of-active-formatting-elements">list of active formatting
  elements</a> just has the <code><a href="the-b-element.html#the-b-element">b</a></code> element in it; and the
  <a href="#insertion-mode">insertion mode</a> is "<a href="#parsing-main-intable" title="insertion mode: in
  table">in table</a>".</p>

  <p>The <code><a href="the-tr-element.html#the-tr-element">tr</a></code> start tag causes the <code><a href="the-b-element.html#the-b-element">b</a></code> element
  to be popped off the stack and a <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> start tag to be
  implied; the <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> and <code><a href="the-tr-element.html#the-tr-element">tr</a></code> elements are
  then handled in a rather straight-forward manner, taking the parser
  through the "<a href="#parsing-main-intbody" title="insertion mode: in table body">in table
  body</a>" and "<a href="#parsing-main-intr" title="insertion mode: in row">in
  row</a>" insertion modes, after which the DOM looks as
  follows:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code></li><li class="t1"><code><a href="the-table-element.html#the-table-element">table</a></code><ul><li class="t1"><code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code><ul><li class="t1"><code><a href="the-tr-element.html#the-tr-element">tr</a></code></li></ul></li></ul></li></ul></li></ul></li></ul><p>Here, the <a href="#stack-of-open-elements">stack of open elements</a> has on it the
  elements <code><a href="the-html-element.html#the-html-element">html</a></code>, <code><a href="the-body-element.html#the-body-element">body</a></code>, <code><a href="the-table-element.html#the-table-element">table</a></code>,
  <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, and <code><a href="the-tr-element.html#the-tr-element">tr</a></code>; the <a href="#list-of-active-formatting-elements">list of active
  formatting elements</a> still has the <code><a href="the-b-element.html#the-b-element">b</a></code> element in
  it; and the <a href="#insertion-mode">insertion mode</a> is "<a href="#parsing-main-intr" title="insertion
  mode: in row">in row</a>".</p>

  <p>The <code><a href="the-td-element.html#the-td-element">td</a></code> element start tag token, after putting a
  <code><a href="the-td-element.html#the-td-element">td</a></code> element on the tree, puts a marker on the <a href="#list-of-active-formatting-elements">list
  of active formatting elements</a> (it also switches to the "<a href="#parsing-main-intd" title="insertion mode: in cell">in cell</a>" <a href="#insertion-mode">insertion
  mode</a>).</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code></li><li class="t1"><code><a href="the-table-element.html#the-table-element">table</a></code><ul><li class="t1"><code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code><ul><li class="t1"><code><a href="the-tr-element.html#the-tr-element">tr</a></code><ul><li class="t1"><code><a href="the-td-element.html#the-td-element">td</a></code></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><p>The marker means that when the "aaa" character tokens are seen,
  no <code><a href="the-b-element.html#the-b-element">b</a></code> element is created to hold the resulting <code><a href="infrastructure.html#text-0">Text</a></code> node:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code></li><li class="t1"><code><a href="the-table-element.html#the-table-element">table</a></code><ul><li class="t1"><code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code><ul><li class="t1"><code><a href="the-tr-element.html#the-tr-element">tr</a></code><ul><li class="t1"><code><a href="the-td-element.html#the-td-element">td</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">aaa</span></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><p>The end tags are handled in a straight-forward manner; after
  handling them, the <a href="#stack-of-open-elements">stack of open elements</a> has on it the
  elements <code><a href="the-html-element.html#the-html-element">html</a></code>, <code><a href="the-body-element.html#the-body-element">body</a></code>, <code><a href="the-table-element.html#the-table-element">table</a></code>,
  and <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>; the <a href="#list-of-active-formatting-elements">list of active formatting
  elements</a> still has the <code><a href="the-b-element.html#the-b-element">b</a></code> element in it (the
  marker having been removed by the "td" end tag token); and the
  <a href="#insertion-mode">insertion mode</a> is "<a href="#parsing-main-intbody" title="insertion mode: in
  table body">in table body</a>".</p>

  <p>Thus it is that the "bbb" character tokens are found. These
  trigger the "<a href="#parsing-main-intabletext" title="insertion mode: in table text">in table
  text</a>" insertion mode to be used (with the <a href="#original-insertion-mode">original
  insertion mode</a> set to "<a href="#parsing-main-intbody" title="insertion mode: in table
  body">in table body</a>"). The character tokens are collected,
  and when the next token (the <code><a href="the-table-element.html#the-table-element">table</a></code> element end tag) is
  seen, they are processed as a group. Since they are not all spaces,
  they are handled as per the "anything else" rules in the "<a href="#parsing-main-intable" title="insertion mode: in table">in table</a>" insertion mode,
  which defer to the "<a href="#parsing-main-inbody" title="insertion mode: in body">in
  body</a>" insertion mode but with <a href="#foster-parent" title="foster
  parent">foster parenting</a>.</p>

  <p>When <a href="#reconstruct-the-active-formatting-elements" title="reconstruct the active formatting elements">the
  active formatting elements are reconstructed</a>, a
  <code><a href="the-b-element.html#the-b-element">b</a></code> element is created and <a href="#foster-parent" title="foster
  parent">foster parented</a>, and then the "bbb" <code><a href="infrastructure.html#text-0">Text</a></code>
  node is appended to it:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code></li><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">bbb</span></li></ul></li><li class="t1"><code><a href="the-table-element.html#the-table-element">table</a></code><ul><li class="t1"><code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code><ul><li class="t1"><code><a href="the-tr-element.html#the-tr-element">tr</a></code><ul><li class="t1"><code><a href="the-td-element.html#the-td-element">td</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">aaa</span></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><p>The <a href="#stack-of-open-elements">stack of open elements</a> has on it the elements
  <code><a href="the-html-element.html#the-html-element">html</a></code>, <code><a href="the-body-element.html#the-body-element">body</a></code>, <code><a href="the-table-element.html#the-table-element">table</a></code>,
  <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, and the new <code><a href="the-b-element.html#the-b-element">b</a></code> (again, note that
  this doesn't match the resulting tree!); the <a href="#list-of-active-formatting-elements">list of active
  formatting elements</a> has the new <code><a href="the-b-element.html#the-b-element">b</a></code> element in it;
  and the <a href="#insertion-mode">insertion mode</a> is still "<a href="#parsing-main-intbody" title="insertion
  mode: in table body">in table body</a>".</p>

  <p>Had the character tokens been only <a href="common-microsyntaxes.html#space-character" title="space
  character">space characters</a> instead of "bbb", then those
  <a href="common-microsyntaxes.html#space-character" title="space character">space characters</a> would just be
  appended to the <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code> element.</p>

  <p>Finally, the <code><a href="the-table-element.html#the-table-element">table</a></code> is closed by a "table" end
  tag. This pops all the nodes from the <a href="#stack-of-open-elements">stack of open
  elements</a> up to and including the <code><a href="the-table-element.html#the-table-element">table</a></code> element,
  but it doesn't affect the <a href="#list-of-active-formatting-elements">list of active formatting
  elements</a>, so the "ccc" character tokens after the table
  result in yet another <code><a href="the-b-element.html#the-b-element">b</a></code> element being created, this
  time after the table:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code></li><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">bbb</span></li></ul></li><li class="t1"><code><a href="the-table-element.html#the-table-element">table</a></code><ul><li class="t1"><code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code><ul><li class="t1"><code><a href="the-tr-element.html#the-tr-element">tr</a></code><ul><li class="t1"><code><a href="the-td-element.html#the-td-element">td</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">aaa</span></li></ul></li></ul></li></ul></li></ul></li><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">ccc</span></li></ul></li></ul></li></ul></li></ul><h5 id="scripts-that-modify-the-page-as-it-is-being-parsed"><span class="secno">8.2.8.4 </span>Scripts that modify the page as it is being parsed</h5>

  <p><i>This section is non-normative.</i></p>
  <p>Consider the following markup, which for this example we will
  assume is the document with <a href="urls.html#url">URL</a> <code title="">http://example.com/inner</code>, being rendered as the
  content of an <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> in another document with the
  <a href="urls.html#url">URL</a> <code title="">http://example.com/outer</code>:</p>

  <pre>&lt;div id=a&gt;
 &lt;script&gt;
  var div = document.getElementById('a');
  parent.document.body.appendChild(div);
 &lt;/script&gt;
 &lt;script&gt;
  alert(document.URL);
 &lt;/script&gt;
&lt;/div&gt;
&lt;script&gt;
 alert(document.URL);
&lt;/script&gt;</pre>

  <p>Up to the first "script" end tag, before the script is parsed,
  the result is relatively straightforward:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-div-element.html#the-div-element">div</a></code> <span class="t2" title=""><code class="attribute name">id</code>="<code class="attribute value"><a href="the-a-element.html#the-a-element">a</a></code>"</span><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">
 </span></li><li class="t1"><code><a href="the-script-element.html#the-script-element">script</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">var div = document.getElementById('a'); &#9166; parent.document.body.appendChild(div);</span></li></ul></li></ul></li></ul></li></ul></li></ul><p>After the script is parsed, though, the <code><a href="the-div-element.html#the-div-element">div</a></code> element
  and its child <code><a href="the-script-element.html#the-script-element">script</a></code> element are gone:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code></li></ul></li></ul><p>They are, at this point, in the <code><a href="dom.html#document">Document</a></code> of the
  aforementioned outer <a href="#browsing-context">browsing context</a>. However, the
  <a href="#stack-of-open-elements">stack of open elements</a> <em>still contains the
  <code><a href="the-div-element.html#the-div-element">div</a></code> element</em>.</p>

  <p>Thus, when the second <code><a href="the-script-element.html#the-script-element">script</a></code> element is parsed, it
  is inserted <em>into the outer <code><a href="dom.html#document">Document</a></code>
  object</em>.</p>

  <p>Those parsed into different <code><a href="dom.html#document">Document</a></code>s than the one
  the parser was created for do not execute, so the first alert does
  not show.</p>

  <p>Once the <code><a href="the-div-element.html#the-div-element">div</a></code> element's end tag is parsed, the
  <code><a href="the-div-element.html#the-div-element">div</a></code> element is popped off the stack, and so the next
  <code><a href="the-script-element.html#the-script-element">script</a></code> element is in the inner <code><a href="dom.html#document">Document</a></code>:</p>

  <ul class="domTree"><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-script-element.html#the-script-element">script</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">alert(document.URL);</span></li></ul></li></ul></li></ul></li></ul><p>This script does execute, resulting in an alert that says "http://example.com/inner".</p>


  <h5 id="the-execution-of-scripts-that-are-moving-across-multiple-documents"><span class="secno">8.2.8.5 </span>The execution of scripts that are moving across multiple documents</h5>

  <p><i>This section is non-normative.</i></p>
  <p>Elaborating on the example in the previous section, consider the
  case where the second <code><a href="the-script-element.html#the-script-element">script</a></code> element is an external
  script (i.e. one with a <code title="attr-script-src"><a href="the-script-element.html#attr-script-src">src</a></code>
  attribute). Since the element was not in the parser's
  <code><a href="dom.html#document">Document</a></code> when it was created, that external script is
  not even downloaded.</p>

  <p>In a case where a <code><a href="the-script-element.html#the-script-element">script</a></code> element with a <code title="attr-script-src"><a href="the-script-element.html#attr-script-src">src</a></code> attribute is parsed normally into
  its parser's <code><a href="dom.html#document">Document</a></code>, but while the external script is
  being downloaded, the element is moved to another document, the
  script continues to download, but does not execute.</p>

  <p class="note">In general, moving <code><a href="the-script-element.html#the-script-element">script</a></code> elements
  between <code><a href="dom.html#document">Document</a></code>s is considered a bad practice.</p>



  <h5 id="unclosed-formatting-elements"><span class="secno">8.2.8.6 </span>Unclosed formatting elements</h5>

  <p><i>This section is non-normative.</i></p>
  <p>The following markup shows how nested formatting elements (such
  as <code><a href="the-b-element.html#the-b-element">b</a></code>) get collected and continue to be applied even as
  the elements they are contained in are closed, but that excessive
  duplicates are thrown away.</p>

  <pre>&lt;!DOCTYPE html&gt;
&lt;p&gt;&lt;b class=x&gt;&lt;b class=x&gt;&lt;b&gt;&lt;b class=x&gt;&lt;b class=x&gt;&lt;b&gt;X
&lt;p&gt;X
&lt;p&gt;&lt;b&gt;&lt;b class=x&gt;&lt;b&gt;X
&lt;p&gt;&lt;/b&gt;&lt;/b&gt;&lt;/b&gt;&lt;/b&gt;&lt;/b&gt;&lt;/b&gt;X</pre>

  <p>The resulting DOM tree is as follows:</p>

  <ul class="domTree"><li class="t10">DOCTYPE: <code><a href="the-html-element.html#the-html-element">html</a></code></li><li class="t1"><code><a href="the-html-element.html#the-html-element">html</a></code><ul><li class="t1"><code><a href="the-head-element.html#the-head-element">head</a></code></li><li class="t1"><code><a href="the-body-element.html#the-body-element">body</a></code><ul><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">X&#9166;</span></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">X&#9166;</span></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code> <span class="t2" title=""><code class="attribute name">class</code>="<code class="attribute value">x</code>"</span><ul><li class="t1"><code><a href="the-b-element.html#the-b-element">b</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">X&#9166;</span></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="t1"><code><a href="the-p-element.html#the-p-element">p</a></code><ul><li class="t3"><code><a href="infrastructure.html#text-0">#text</a></code>: <span title="">X&#9166;</span></li></ul></li></ul></li></ul></li></ul><p>Note how the second <code><a href="the-p-element.html#the-p-element">p</a></code> element in the markup has no
  explicit <code><a href="the-b-element.html#the-b-element">b</a></code> elements, but in the resulting DOM, up to
  three of each kind of formatting element (in this case three
  <code><a href="the-b-element.html#the-b-element">b</a></code> elements with the class attribute, and two unadorned
  <code><a href="the-b-element.html#the-b-element">b</a></code> elements) get reconstructed before the element's
  "X".</p>

  <p>Also note how this means that in the final paragraph only six
  <code><a href="the-b-element.html#the-b-element">b</a></code> end tags are needed to completely clear the list of
  formatting elements, even though nine <code><a href="the-b-element.html#the-b-element">b</a></code> start tags have
  been seen up to this point.</p>




  <h3 id="serializing-html-fragments"><span class="secno">8.3 </span>Serializing HTML fragments</h3>

  <p>The following steps form the <dfn id="html-fragment-serialization-algorithm">HTML fragment serialization
  algorithm</dfn>. The algorithm takes as input a DOM
  <code><a href="infrastructure.html#element">Element</a></code>, <code><a href="dom.html#document">Document</a></code>, or
  <code><a href="infrastructure.html#documentfragment">DocumentFragment</a></code> referred to as <var title="">the
  node</var>, and either returns a string or throws an exception.</p>

  <p class="note">This algorithm serializes the <em>children</em> of
  the node being serialized, not the node itself.</p>

  <ol><li><p>Let <var title="">s</var> be a string, and initialize it to
   the empty string.</p></li>

   <li>

    <p>For each child node of <var title="">the node</var>, in
    <a href="infrastructure.html#tree-order">tree order</a>, run the following steps:

    </p><ol><li><p>Let <var title="">current node</var> be the child node
     being processed.</p></li>

     <li>

      <p>Append the appropriate string from the following list to
      <var title="">s</var>:</p>

      <dl class="switch"><dt>If <var title="">current node</var> is an <code title="">Element</code></dt>

       <dd>

        <p>If <var title="">current node</var> is an element in the
        <a href="namespaces.html#html-namespace-0">HTML namespace</a>, the <a href="namespaces.html#mathml-namespace">MathML
        namespace</a>, or the <a href="namespaces.html#svg-namespace">SVG namespace</a>, then let
        <var title="">tagname</var> be <var title="">current
        node</var>'s local name. Otherwise, let <var title="">tagname</var> be <var title="">current node</var>'s
        qualified name.</p>

        <p>Append a U+003C LESS-THAN SIGN character (&lt;), followed
        by <var title="">tagname</var>.</p>

        <p class="note">For <a href="infrastructure.html#html-elements">HTML elements</a> created by the
        <a href="#html-parser">HTML parser</a> or <code title="">Document.createElement()</code>, <var title="">tagname</var> will be lowercase.</p>

        <p>For each attribute that the element has, append a U+0020
        SPACE character, the <a href="#attribute's-serialized-name" title="attribute's serialized
        name">attribute's serialized name as described below</a>, a
        "=" (U+003D) character, a U+0022 QUOTATION MARK
        character ("), the attribute's value, <a href="#escapingString" title="escaping a string">escaped as described below</a> in
        <i>attribute mode</i>, and a second U+0022 QUOTATION MARK
        character (").</p>

        <p>An <dfn id="attribute's-serialized-name">attribute's serialized name</dfn> for the purposes
        of the previous paragraph must be determined as follows:</p>

        <dl class="switch"><dt>If the attribute has no namespace</dt>

         <dd>

          <p>The attribute's serialized name is the attribute's local
          name.</p>

          <p class="note">For attributes on <a href="infrastructure.html#html-elements">HTML elements</a>
          set by the <a href="#html-parser">HTML parser</a> or by <code title="">Element.setAttributeNode()</code> or <code title="">Element.setAttribute()</code>, the local name will
          be lowercase.</p>

         </dd>


         <dt>If the attribute is in the <a href="namespaces.html#xml-namespace">XML namespace</a></dt>

         <dd><p>The attribute's serialized name is the string "<code title="">xml:</code>" followed by the attribute's local
         name.</p></dd>


         <dt>If the attribute is in the <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a> and the attribute's local name is <code title="">xmlns</code></dt>

         <dd><p>The attribute's serialized name is the string "<code title="">xmlns</code>".</p></dd>


         <dt>If the attribute is in the <a href="namespaces.html#xmlns-namespace">XMLNS namespace</a> and the attribute's local name is not <code title="">xmlns</code></dt>

         <dd><p>The attribute's serialized name is the string "<code title="">xmlns:</code>" followed by the attribute's local
         name.</p></dd>


         <dt>If the attribute is in the <a href="namespaces.html#xlink-namespace">XLink namespace</a></dt>

         <dd><p>The attribute's serialized name is the string "<code title="">xlink:</code>" followed by the attribute's local
         name.</p></dd>


         <dt>If the attribute is in some other namespace</dt>

         <dd><p>The attribute's serialized name is the attribute's
         qualified name.</p></dd>

        </dl><p>While the exact order of attributes is UA-defined, and may
        depend on factors such as the order that the attributes were
        given in the original markup, the sort order must be stable,
        such that consecutive invocations of this algorithm serialize an
        element's attributes in the same order.</p>

        <p>Append a U+003E GREATER-THAN SIGN character (&gt;).</p>

        <p>If <var title="">current node</var> is an
        <code><a href="the-area-element.html#the-area-element">area</a></code>, <code><a href="the-base-element.html#the-base-element">base</a></code>, <code><a href="#basefont">basefont</a></code>,
        <code><a href="#bgsound">bgsound</a></code>, <code><a href="the-br-element.html#the-br-element">br</a></code>, <code><a href="the-col-element.html#the-col-element">col</a></code>,
        <code><a href="#the-command-element">command</a></code>, <code><a href="the-embed-element.html#the-embed-element">embed</a></code>, <code><a href="#frame">frame</a></code>,
        <code><a href="the-hr-element.html#the-hr-element">hr</a></code>, <code><a href="the-img-element.html#the-img-element">img</a></code>, <code><a href="the-input-element.html#the-input-element">input</a></code>,
        <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>, <code><a href="the-link-element.html#the-link-element">link</a></code>, <code><a href="the-meta-element.html#the-meta-element">meta</a></code>,
        <code><a href="the-param-element.html#the-param-element">param</a></code>, <code><a href="the-source-element.html#the-source-element">source</a></code>, <code><a href="the-track-element.html#the-track-element">track</a></code> or
        <code><a href="the-wbr-element.html#the-wbr-element">wbr</a></code> element, then continue on to the next child
        node at this point.</p> <!-- VOIDLIST superset -->
        <!-- also, i guess: image and isindex, but we don't list those
        because we don't consider those "elements", more "macros", and
        thus we should never serialize them -->

        <p>If <var title="">current node</var> is a <code><a href="the-pre-element.html#the-pre-element">pre</a></code>,
        <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>, or <code><a href="#listing">listing</a></code> element, and
        the first child node of the element, if any, is a
        <code><a href="infrastructure.html#text-0">Text</a></code> node whose character data has as its first
        character a "LF" (U+000A) character, then append a
        "LF" (U+000A) character.</p>

        <p>Append the value of running the <a href="#html-fragment-serialization-algorithm">HTML fragment
        serialization algorithm</a> on the <var title="">current
        node</var> element (thus recursing into this algorithm for
        that element), followed by a U+003C LESS-THAN SIGN character
        (&lt;), a "/" (U+002F) character, <var title="">tagname</var> again, and finally a U+003E
        GREATER-THAN SIGN character (&gt;).</p>

       </dd>


       <dt>If <var title="">current node</var> is a <code title="">Text</code> node</dt>

       <dd>

        <p>If the parent of <var title="">current node</var> is a
        <code><a href="the-style-element.html#the-style-element">style</a></code>, <code><a href="the-script-element.html#the-script-element">script</a></code>, <code><a href="#xmp">xmp</a></code>,
        <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, <code><a href="#noembed">noembed</a></code>,
        <code><a href="#noframes">noframes</a></code>, or <code><a href="#plaintext">plaintext</a></code> element, or
        if the parent of <var title="">current node</var> is
        <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code> element and <a href="#concept-n-script" title="concept-n-script">scripting is enabled</a> for the
        node, then append the value of <var title="">current
        node</var>'s <code title="">data</code> IDL attribute
        literally.</p>

        <p>Otherwise, append the value of <var title="">current
        node</var>'s <code title="">data</code> IDL attribute, <a href="#escapingString" title="escaping a string">escaped as described
        below</a>.</p>

       </dd>


       <dt>If <var title="">current node</var> is a <code title="">Comment</code></dt>

       <dd>

        <p>Append the literal string <code>&lt;!--</code> (U+003C
        LESS-THAN SIGN, U+0021 EXCLAMATION MARK, U+002D HYPHEN-MINUS,
        U+002D HYPHEN-MINUS), followed by the value of <var title="">current node</var>'s <code title="">data</code> IDL
        attribute, followed by the literal string <code>--&gt;</code>
        (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN
        SIGN).</p>

       </dd>


       <dt>If <var title="">current node</var> is a <code title="">ProcessingInstruction</code></dt>

       <dd>

        <p>Append the literal string <code>&lt;?</code> (U+003C
        LESS-THAN SIGN, U+003F QUESTION MARK), followed by the value
        of <var title="">current node</var>'s <code title="">target</code> IDL attribute, followed by a single
        U+0020 SPACE character, followed by the value of <var title="">current node</var>'s <code title="">data</code> IDL
        attribute, followed by a single "&gt;" (U+003E) character.</p>

       </dd>


       <dt>If <var title="">current node</var> is a <code title="">DocumentType</code></dt>

       <dd>

        <p>Append the literal string <code>&lt;!DOCTYPE</code> (U+003C
        LESS-THAN SIGN, U+0021 EXCLAMATION MARK, U+0044 LATIN CAPITAL
        LETTER D, U+004F LATIN CAPITAL LETTER O, U+0043 LATIN CAPITAL
        LETTER C, U+0054 LATIN CAPITAL LETTER T, U+0059 LATIN CAPITAL
        LETTER Y, U+0050 LATIN CAPITAL LETTER P, U+0045 LATIN CAPITAL
        LETTER E), followed by a space (U+0020 SPACE), followed by the
        value of <var title="">current node</var>'s <code title="">name</code> IDL attribute, followed by the literal
        string <code>&gt;</code> (U+003E GREATER-THAN SIGN).</p>

       </dd>


      </dl><!--
      <p>Other node types (e.g. <code title="">Attr</code>) cannot
      occur as children of elements. If, despite this, they somehow do
      occur, this algorithm must throw an
      <code>InvalidStateError</code> exception.</p>
      --></li>

    </ol></li>

   <li><p>The result of the algorithm is the string <var title="">s</var>.</p></li>

  </ol><p class="warning">It is possible that the output of this algorithm, if
  parsed with an <a href="#html-parser">HTML parser</a>, will not return the
  original tree structure.</p>

  <div class="example">

   <p>For instance, if a <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element to which a
   <code title="">Comment</code> node has been appended is serialized
   and the output is then reparsed, the comment will end up being
   displayed in the text field. Similarly, if, as a result of DOM
   manipulation, an element contains a comment that contains the
   literal string "<code title="">--&gt;</code>", then when the result
   of serializing the element is parsed, the comment will be truncated
   at that point and the rest of the comment will be interpreted as
   markup. More examples would be making a <code><a href="the-script-element.html#the-script-element">script</a></code> element
   contain a <code><a href="infrastructure.html#text-0">Text</a></code> node with the text string
   "<code><a href="the-script-element.html#the-script-element">&lt;/script&gt;</a></code>", or having a <code><a href="the-p-element.html#the-p-element">p</a></code> element
   that contains a <code><a href="the-ul-element.html#the-ul-element">ul</a></code> element (as the <code><a href="the-ul-element.html#the-ul-element">ul</a></code>
   element's <a href="#syntax-start-tag" title="syntax-start-tag">start tag</a> would
   imply the end tag for the <code><a href="the-p-element.html#the-p-element">p</a></code>).</p>

   <p>This can enable cross-site scripting attacks. An example of this
   would be a page that lets the user enter some font names that are
   then inserted into a CSS <code><a href="the-style-element.html#the-style-element">style</a></code> block via the DOM and
   which then uses the <code title="dom-innerHTML"><a href="infrastructure.html#dom-innerhtml">innerHTML</a></code>
   IDL attribute to get the HTML serialization of that
   <code><a href="the-style-element.html#the-style-element">style</a></code> element: if the user enters
   "<code>&lt;/style&gt;&lt;script&gt;attack&lt;/script&gt;</code>" as a font
   name, <code title="dom-innerHTML"><a href="infrastructure.html#dom-innerhtml">innerHTML</a></code> will return
   markup that, if parsed in a different context, would contain a
   <code><a href="the-script-element.html#the-script-element">script</a></code> node, even though no <code><a href="the-script-element.html#the-script-element">script</a></code> node
   existed in the original DOM.</p>

  </div>

  <p><dfn id="escapingString">Escaping a string</dfn> (for the
  purposes of the algorithm above) consists of running the following
  steps:</p>

  <ol><li><p>Replace any occurrence of the "<code title="">&amp;</code>"
   character by the string "<code title="">&amp;amp;</code>".</p></li>

   <li><p>Replace any occurrences of the U+00A0 NO-BREAK SPACE
   character by the string "<code title="">&amp;nbsp;</code>".</p></li>

   <li><p>If the algorithm was invoked in the <i>attribute mode</i>,
   replace any occurrences of the "<code title="">"</code>"
   character by the string "<code title="">&amp;quot;</code>".</p></li>

   <li><p>If the algorithm was <em>not</em> invoked in the
   <i>attribute mode</i>, replace any occurrences of the "<code title="">&lt;</code>" character by the string "<code title="">&amp;lt;</code>", and any occurrences of the "<code title="">&gt;</code>" character by the string "<code title="">&amp;gt;</code>".</p></li>

  </ol><h3 id="parsing-html-fragments"><span class="secno">8.4 </span>Parsing HTML fragments</h3>

  <p>The following steps form the <dfn id="html-fragment-parsing-algorithm">HTML fragment parsing
  algorithm</dfn>. The algorithm optionally takes as input an
  <code><a href="infrastructure.html#element">Element</a></code> node, referred to as the <dfn id="concept-frag-parse-context" title="concept-frag-parse-context"><var>context</var></dfn> element,
  which gives the context for the parser, as well as <var title="">input</var>, a string to parse, and returns a list of zero
  or more nodes.</p>

  <p class="note">Parts marked <dfn id="fragment-case">fragment case</dfn> in algorithms
  in the parser section are parts that only occur if the parser was
  created for the purposes of this algorithm (and with a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element). The
  algorithms have been annotated with such markings for informational
  purposes only; such markings have no normative weight. If it is
  possible for a condition described as a <a href="#fragment-case">fragment case</a>
  to occur even when the parser wasn't created for the purposes of
  handling this algorithm, then that is an error in the
  specification.</p>

  <ol><li>

    <p>Create a new <code><a href="dom.html#document">Document</a></code> node, and mark it as being
    an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>.</p>

   </li>

   <li>

    <p>If there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element, and the
    <code><a href="dom.html#document">Document</a></code> of the <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element is in
    <a href="infrastructure.html#quirks-mode">quirks mode</a>, then let the <code><a href="dom.html#document">Document</a></code> be in
    <a href="infrastructure.html#quirks-mode">quirks mode</a>. Otherwise, if there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element, and the
    <code><a href="dom.html#document">Document</a></code> of the <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element is in
    <a href="infrastructure.html#limited-quirks-mode">limited-quirks mode</a>, then let the
    <code><a href="dom.html#document">Document</a></code> be in <a href="infrastructure.html#limited-quirks-mode">limited-quirks mode</a>.
    Otherwise, leave the <code><a href="dom.html#document">Document</a></code> in <a href="infrastructure.html#no-quirks-mode">no-quirks
    mode</a>.</p>

   </li>

   <li>

    <p>Create a new <a href="#html-parser">HTML parser</a>, and associate it with
    the just created <code><a href="dom.html#document">Document</a></code> node.</p>

   </li>

   <li>

    <p>If there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element, run
    these substeps:</p>

    <ol><li>

      <p>Set the state of the <a href="#html-parser">HTML parser</a>'s
      <a href="#tokenization">tokenization</a> stage as follows:</p>

      <dl class="switch"><dt>If it is a <code><a href="the-title-element.html#the-title-element">title</a></code> or <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
       element</dt>

       <dd>Switch the tokenizer to the <a href="#rcdata-state">RCDATA state</a>.</dd>


       <dt>If it is a <code><a href="the-style-element.html#the-style-element">style</a></code>, <code><a href="#xmp">xmp</a></code>,
       <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, <code><a href="#noembed">noembed</a></code>, or
       <code><a href="#noframes">noframes</a></code> element</dt>

       <dd>Switch the tokenizer to the <a href="#rawtext-state">RAWTEXT state</a>.</dd>


       <dt>If it is a <code><a href="the-script-element.html#the-script-element">script</a></code> element</dt>

       <dd>Switch the tokenizer to the <a href="#script-data-state">script data state</a>.</dd>


       <dt>If it is a <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code> element</dt>

       <dd>If the <a href="#scripting-flag">scripting flag</a> is enabled, switch the
       tokenizer to the <a href="#rawtext-state">RAWTEXT state</a>.  Otherwise,
       leave the tokenizer in the <a href="#data-state">data state</a>.</dd>


       <dt>If it is a <code><a href="#plaintext">plaintext</a></code> element</dt>

       <dd>Switch the tokenizer to the <a href="#plaintext-state">PLAINTEXT
       state</a>.</dd>


       <dt>Otherwise</dt>

       <dd>Leave the tokenizer in the <a href="#data-state">data state</a>.</dd>

      </dl><p class="note">For performance reasons, an implementation that
      does not report errors and that uses the actual state machine
      described in this specification directly could use the PLAINTEXT
      state instead of the RAWTEXT and script data states where those
      are mentioned in the list above. Except for rules regarding
      parse errors, they are equivalent, since there is no
      <a href="#appropriate-end-tag-token">appropriate end tag token</a> in the fragment case, yet
      they involve far fewer state transitions.</p>

     </li>

     <li>

      <p>Let <var title="">root</var> be a new <code><a href="the-html-element.html#the-html-element">html</a></code> element
      with no attributes.</p>

     </li>

     <li>

      <p>Append the element <var title="">root</var> to the
      <code><a href="dom.html#document">Document</a></code> node created above.</p>

     </li>

     <li>

      <p>Set up the parser's <a href="#stack-of-open-elements">stack of open elements</a> so that
      it contains just the single element <var title="">root</var>.</p>

     </li>

     <li>

      <p><a href="#reset-the-insertion-mode-appropriately" title="reset the insertion mode appropriately">Reset the
      parser's insertion mode appropriately</a>.</p>

      <p class="note">The parser will reference the <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element as part
      of that algorithm.</p>

     </li>

     <li>

      <p>Set the parser's <a href="#form-element-pointer"><code>form</code> element
      pointer</a> to the nearest node to the <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element that is
      a <code><a href="the-form-element.html#the-form-element">form</a></code> element (going straight up the ancestor
      chain, and including the element itself, if it is a
      <code><a href="the-form-element.html#the-form-element">form</a></code> element), or, if there is no such
      <code><a href="the-form-element.html#the-form-element">form</a></code> element, to null.</p>

     </li>

    </ol></li>

   <li>

    <p>Place into the <a href="#input-stream">input stream</a> for the <a href="#html-parser">HTML
    parser</a> just created the <var title="">input</var>. The
    encoding <a href="#concept-encoding-confidence" title="concept-encoding-confidence">confidence</a> is
    <i>irrelevant</i>.</p>

   </li>

   <li>

    <p>Start the parser and let it run until it has consumed all the
    characters just inserted into the input stream.</p>

   </li>

   <li>

    <p>If there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element, return
    the child nodes of <var title="">root</var>, in <a href="infrastructure.html#tree-order">tree
    order</a>.</p>

    <p>Otherwise, return the children of the <code><a href="dom.html#document">Document</a></code>
    object, in <a href="infrastructure.html#tree-order">tree order</a>.</p>

   </li>

  </ol><p class="note">This algorithm is invoked without a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element in the case
  of <code title="dom-Document-innerHTML">Document.innerHTML</code>.</p>

  </div>



  <h3 id="named-character-references"><span class="secno">8.5 </span><dfn>Named character references</dfn></h3>

  <p>This table lists the character reference names that are supported
  by HTML, and the code points to which they refer. It is referenced
  by the previous sections.</p>

  <div id="named-character-references-table">
   <table><thead><tr><th> Name </th> <th> Character(s) </th> <th> Glyph </th> </tr></thead><!--BOILERPLATE entities.inc--></table><!--
   If we want to add character references, Almorca suggests:
   > I would add &sub1; (character U+2081), &sub2;
   > (character U+2082) and &sub3; (character U+2083). They
   > would are the equivalent to &sup1;, &sup2;, and &sup3;.
   See also: http://www.w3.org/2003/entities/
  --></div>

  <p>This data is also available <a href="entities.json">as a JSON
  file</a>.</p>

  <p><i>The glyphs displayed above are non-normative. Refer to the
  Unicode specifications for formal definitions of the characters
  listed above.</i></p>



  <h2 id="the-xhtml-syntax"><span class="secno">9 </span><dfn id="xhtml">The XHTML syntax</dfn></h2>

  <p class="note">This section only describes the rules for XML
  resources. Rules for <code><a href="#text/html">text/html</a></code> resources are discussed
  in the section above entitled "<a href="#syntax">The HTML syntax</a>".</p>


  <div class="impl">

  <h3 id="writing-xhtml-documents"><span class="secno">9.1 </span>Writing XHTML documents</h3>

  </div>

  <p>The syntax for using HTML with XML, whether in XHTML documents or
  embedded in other XML documents, is defined in the XML and
  Namespaces in XML specifications. <a href="#refsXML">[XML]</a> <a href="#refsXMLNS">[XMLNS]</a></p>

  <p>This specification does not define any syntax-level requirements
  beyond those defined for XML proper.</p>

  <p>XML documents may contain a <code>DOCTYPE</code> if desired, but
  this is not required to conform to this specification. This
  specification does not define a public or system identifier, nor
  provide a format DTD.</p>

  <p class="note">According to the XML specification, XML processors
  are not guaranteed to process the external DTD subset referenced in
  the DOCTYPE. This means, for example, that using entity references
  for characters in XHTML documents is unsafe if they are defined in
  an external file (except for <code title="">&amp;lt;</code>, <code title="">&amp;gt;</code>, <code title="">&amp;amp;</code>, <code title="">&amp;quot;</code> and <code title="">&amp;apos;</code>).</p>


  <div class="impl">

  <h3 id="parsing-xhtml-documents"><span class="secno">9.2 </span>Parsing XHTML documents</h3>

  <p>This section describes the relationship between XML and the DOM,
  with a particular emphasis on how this interacts with HTML.</p>

  <p>An <dfn id="xml-parser">XML parser</dfn>, for the purposes of this specification,
  is a construct that follows the rules given in the XML specification
  to map a string of bytes or characters into a <code><a href="dom.html#document">Document</a></code>
  object.</p>

  <p>An <a href="#xml-parser">XML parser</a> is either associated with a
  <code><a href="dom.html#document">Document</a></code> object when it is created, or creates one
  implicitly.</p>

  <p>This <code><a href="dom.html#document">Document</a></code> must then be populated with DOM nodes
  that represent the tree structure of the input passed to the parser,
  as defined by the XML specification, the Namespaces in XML
  specification, and the DOM Core specification. DOM mutation events
  must not fire for the operations that the <a href="#xml-parser">XML parser</a>
  performs on the <code><a href="dom.html#document">Document</a></code>'s tree, but the user agent
  must act as if elements and attributes were individually appended
  and set respectively so as to trigger rules in this specification
  regarding what happens when an element is inserted into a document
  or has its attributes set. <a href="#refsXML">[XML]</a> <a href="#refsXMLNS">[XMLNS]</a> <a href="#refsDOMCORE">[DOMCORE]</a>
  <a href="#refsDOMEVENTS">[DOMEVENTS]</a></p>

  <p>Between the time an element's start tag is parsed and the time
  either the element's end tag is parsed or the parser detects a
  well-formedness error, the user agent must act as if the element was
  in a <a href="#stack-of-open-elements">stack of open elements</a>.</p>

  <p class="note">This is used by the <code><a href="the-object-element.html#the-object-element">object</a></code> element to
  avoid instantiating plugins before the <code><a href="the-param-element.html#the-param-element">param</a></code> element
  children have been parsed.</p>

  <p>This specification provides the following additional information
  that user agents should use when retrieving an external entity: the
  public identifiers given in the following list all correspond to <a href="data:application/xml-dtd;base64,PCFFTlRJVFkgVGFiICImI3g5OyI%2BPCFFTlRJVFkgTmV3TGluZSAiJiN4QTsiPjwhRU5USVRZIGV4Y2wgIiYjeDIxOyI%2BPCFFTlRJVFkgcXVvdCAiJiN4MjI7Ij48IUVOVElUWSBRVU9UICImI3gyMjsiPjwhRU5USVRZIG51bSAiJiN4MjM7Ij48IUVOVElUWSBkb2xsYXIgIiYjeDI0OyI%2BPCFFTlRJVFkgcGVyY250ICImI3gyNTsiPjwhRU5USVRZIGFtcCAiJiN4MjY7Ij48IUVOVElUWSBBTVAgIiYjeDI2OyI%2BPCFFTlRJVFkgYXBvcyAiJiN4Mjc7Ij48IUVOVElUWSBscGFyICImI3gyODsiPjwhRU5USVRZIHJwYXIgIiYjeDI5OyI%2BPCFFTlRJVFkgYXN0ICImI3gyQTsiPjwhRU5USVRZIG1pZGFzdCAiJiN4MkE7Ij48IUVOVElUWSBwbHVzICImI3gyQjsiPjwhRU5USVRZIGNvbW1hICImI3gyQzsiPjwhRU5USVRZIHBlcmlvZCAiJiN4MkU7Ij48IUVOVElUWSBzb2wgIiYjeDJGOyI%2BPCFFTlRJVFkgY29sb24gIiYjeDNBOyI%2BPCFFTlRJVFkgc2VtaSAiJiN4M0I7Ij48IUVOVElUWSBsdCAiJiN4M0M7Ij48IUVOVElUWSBMVCAiJiN4M0M7Ij48IUVOVElUWSBudmx0ICImI3gzQzsmI3gyMEQyOyI%2BPCFFTlRJVFkgZXF1YWxzICImI3gzRDsiPjwhRU5USVRZIGJuZSAiJiN4M0Q7JiN4MjBFNTsiPjwhRU5USVRZIGd0ICImI3gzRTsiPjwhRU5USVRZIEdUICImI3gzRTsiPjwhRU5USVRZIG52Z3QgIiYjeDNFOyYjeDIwRDI7Ij48IUVOVElUWSBxdWVzdCAiJiN4M0Y7Ij48IUVOVElUWSBjb21tYXQgIiYjeDQwOyI%2BPCFFTlRJVFkgbHNxYiAiJiN4NUI7Ij48IUVOVElUWSBsYnJhY2sgIiYjeDVCOyI%2BPCFFTlRJVFkgYnNvbCAiJiN4NUM7Ij48IUVOVElUWSByc3FiICImI3g1RDsiPjwhRU5USVRZIHJicmFjayAiJiN4NUQ7Ij48IUVOVElUWSBIYXQgIiYjeDVFOyI%2BPCFFTlRJVFkgbG93YmFyICImI3g1RjsiPjwhRU5USVRZIFVuZGVyQmFyICImI3g1RjsiPjwhRU5USVRZIGdyYXZlICImI3g2MDsiPjwhRU5USVRZIERpYWNyaXRpY2FsR3JhdmUgIiYjeDYwOyI%2BPCFFTlRJVFkgZmpsaWcgIiYjeDY2OyYjeDZBOyI%2BPCFFTlRJVFkgbGN1YiAiJiN4N0I7Ij48IUVOVElUWSBsYnJhY2UgIiYjeDdCOyI%2BPCFFTlRJVFkgdmVyYmFyICImI3g3QzsiPjwhRU5USVRZIHZlcnQgIiYjeDdDOyI%2BPCFFTlRJVFkgVmVydGljYWxMaW5lICImI3g3QzsiPjwhRU5USVRZIHJjdWIgIiYjeDdEOyI%2BPCFFTlRJVFkgcmJyYWNlICImI3g3RDsiPjwhRU5USVRZIG5ic3AgIiYjeEEwOyI%2BPCFFTlRJVFkgTm9uQnJlYWtpbmdTcGFjZSAiJiN4QTA7Ij48IUVOVElUWSBpZXhjbCAiJiN4QTE7Ij48IUVOVElUWSBjZW50ICImI3hBMjsiPjwhRU5USVRZIHBvdW5kICImI3hBMzsiPjwhRU5USVRZIGN1cnJlbiAiJiN4QTQ7Ij48IUVOVElUWSB5ZW4gIiYjeEE1OyI%2BPCFFTlRJVFkgYnJ2YmFyICImI3hBNjsiPjwhRU5USVRZIHNlY3QgIiYjeEE3OyI%2BPCFFTlRJVFkgRG90ICImI3hBODsiPjwhRU5USVRZIGRpZSAiJiN4QTg7Ij48IUVOVElUWSBEb3VibGVEb3QgIiYjeEE4OyI%2BPCFFTlRJVFkgdW1sICImI3hBODsiPjwhRU5USVRZIGNvcHkgIiYjeEE5OyI%2BPCFFTlRJVFkgQ09QWSAiJiN4QTk7Ij48IUVOVElUWSBvcmRmICImI3hBQTsiPjwhRU5USVRZIGxhcXVvICImI3hBQjsiPjwhRU5USVRZIG5vdCAiJiN4QUM7Ij48IUVOVElUWSBzaHkgIiYjeEFEOyI%2BPCFFTlRJVFkgcmVnICImI3hBRTsiPjwhRU5USVRZIGNpcmNsZWRSICImI3hBRTsiPjwhRU5USVRZIFJFRyAiJiN4QUU7Ij48IUVOVElUWSBtYWNyICImI3hBRjsiPjwhRU5USVRZIHN0cm5zICImI3hBRjsiPjwhRU5USVRZIGRlZyAiJiN4QjA7Ij48IUVOVElUWSBwbHVzbW4gIiYjeEIxOyI%2BPCFFTlRJVFkgcG0gIiYjeEIxOyI%2BPCFFTlRJVFkgUGx1c01pbnVzICImI3hCMTsiPjwhRU5USVRZIHN1cDIgIiYjeEIyOyI%2BPCFFTlRJVFkgc3VwMyAiJiN4QjM7Ij48IUVOVElUWSBhY3V0ZSAiJiN4QjQ7Ij48IUVOVElUWSBEaWFjcml0aWNhbEFjdXRlICImI3hCNDsiPjwhRU5USVRZIG1pY3JvICImI3hCNTsiPjwhRU5USVRZIHBhcmEgIiYjeEI2OyI%2BPCFFTlRJVFkgbWlkZG90ICImI3hCNzsiPjwhRU5USVRZIGNlbnRlcmRvdCAiJiN4Qjc7Ij48IUVOVElUWSBDZW50ZXJEb3QgIiYjeEI3OyI%2BPCFFTlRJVFkgY2VkaWwgIiYjeEI4OyI%2BPCFFTlRJVFkgQ2VkaWxsYSAiJiN4Qjg7Ij48IUVOVElUWSBzdXAxICImI3hCOTsiPjwhRU5USVRZIG9yZG0gIiYjeEJBOyI%2BPCFFTlRJVFkgcmFxdW8gIiYjeEJCOyI%2BPCFFTlRJVFkgZnJhYzE0ICImI3hCQzsiPjwhRU5USVRZIGZyYWMxMiAiJiN4QkQ7Ij48IUVOVElUWSBoYWxmICImI3hCRDsiPjwhRU5USVRZIGZyYWMzNCAiJiN4QkU7Ij48IUVOVElUWSBpcXVlc3QgIiYjeEJGOyI%2BPCFFTlRJVFkgQWdyYXZlICImI3hDMDsiPjwhRU5USVRZIEFhY3V0ZSAiJiN4QzE7Ij48IUVOVElUWSBBY2lyYyAiJiN4QzI7Ij48IUVOVElUWSBBdGlsZGUgIiYjeEMzOyI%2BPCFFTlRJVFkgQXVtbCAiJiN4QzQ7Ij48IUVOVElUWSBBcmluZyAiJiN4QzU7Ij48IUVOVElUWSBhbmdzdCAiJiN4QzU7Ij48IUVOVElUWSBBRWxpZyAiJiN4QzY7Ij48IUVOVElUWSBDY2VkaWwgIiYjeEM3OyI%2BPCFFTlRJVFkgRWdyYXZlICImI3hDODsiPjwhRU5USVRZIEVhY3V0ZSAiJiN4Qzk7Ij48IUVOVElUWSBFY2lyYyAiJiN4Q0E7Ij48IUVOVElUWSBFdW1sICImI3hDQjsiPjwhRU5USVRZIElncmF2ZSAiJiN4Q0M7Ij48IUVOVElUWSBJYWN1dGUgIiYjeENEOyI%2BPCFFTlRJVFkgSWNpcmMgIiYjeENFOyI%2BPCFFTlRJVFkgSXVtbCAiJiN4Q0Y7Ij48IUVOVElUWSBFVEggIiYjeEQwOyI%2BPCFFTlRJVFkgTnRpbGRlICImI3hEMTsiPjwhRU5USVRZIE9ncmF2ZSAiJiN4RDI7Ij48IUVOVElUWSBPYWN1dGUgIiYjeEQzOyI%2BPCFFTlRJVFkgT2NpcmMgIiYjeEQ0OyI%2BPCFFTlRJVFkgT3RpbGRlICImI3hENTsiPjwhRU5USVRZIE91bWwgIiYjeEQ2OyI%2BPCFFTlRJVFkgdGltZXMgIiYjeEQ3OyI%2BPCFFTlRJVFkgT3NsYXNoICImI3hEODsiPjwhRU5USVRZIFVncmF2ZSAiJiN4RDk7Ij48IUVOVElUWSBVYWN1dGUgIiYjeERBOyI%2BPCFFTlRJVFkgVWNpcmMgIiYjeERCOyI%2BPCFFTlRJVFkgVXVtbCAiJiN4REM7Ij48IUVOVElUWSBZYWN1dGUgIiYjeEREOyI%2BPCFFTlRJVFkgVEhPUk4gIiYjeERFOyI%2BPCFFTlRJVFkgc3psaWcgIiYjeERGOyI%2BPCFFTlRJVFkgYWdyYXZlICImI3hFMDsiPjwhRU5USVRZIGFhY3V0ZSAiJiN4RTE7Ij48IUVOVElUWSBhY2lyYyAiJiN4RTI7Ij48IUVOVElUWSBhdGlsZGUgIiYjeEUzOyI%2BPCFFTlRJVFkgYXVtbCAiJiN4RTQ7Ij48IUVOVElUWSBhcmluZyAiJiN4RTU7Ij48IUVOVElUWSBhZWxpZyAiJiN4RTY7Ij48IUVOVElUWSBjY2VkaWwgIiYjeEU3OyI%2BPCFFTlRJVFkgZWdyYXZlICImI3hFODsiPjwhRU5USVRZIGVhY3V0ZSAiJiN4RTk7Ij48IUVOVElUWSBlY2lyYyAiJiN4RUE7Ij48IUVOVElUWSBldW1sICImI3hFQjsiPjwhRU5USVRZIGlncmF2ZSAiJiN4RUM7Ij48IUVOVElUWSBpYWN1dGUgIiYjeEVEOyI%2BPCFFTlRJVFkgaWNpcmMgIiYjeEVFOyI%2BPCFFTlRJVFkgaXVtbCAiJiN4RUY7Ij48IUVOVElUWSBldGggIiYjeEYwOyI%2BPCFFTlRJVFkgbnRpbGRlICImI3hGMTsiPjwhRU5USVRZIG9ncmF2ZSAiJiN4RjI7Ij48IUVOVElUWSBvYWN1dGUgIiYjeEYzOyI%2BPCFFTlRJVFkgb2NpcmMgIiYjeEY0OyI%2BPCFFTlRJVFkgb3RpbGRlICImI3hGNTsiPjwhRU5USVRZIG91bWwgIiYjeEY2OyI%2BPCFFTlRJVFkgZGl2aWRlICImI3hGNzsiPjwhRU5USVRZIGRpdiAiJiN4Rjc7Ij48IUVOVElUWSBvc2xhc2ggIiYjeEY4OyI%2BPCFFTlRJVFkgdWdyYXZlICImI3hGOTsiPjwhRU5USVRZIHVhY3V0ZSAiJiN4RkE7Ij48IUVOVElUWSB1Y2lyYyAiJiN4RkI7Ij48IUVOVElUWSB1dW1sICImI3hGQzsiPjwhRU5USVRZIHlhY3V0ZSAiJiN4RkQ7Ij48IUVOVElUWSB0aG9ybiAiJiN4RkU7Ij48IUVOVElUWSB5dW1sICImI3hGRjsiPjwhRU5USVRZIEFtYWNyICImI3gxMDA7Ij48IUVOVElUWSBhbWFjciAiJiN4MTAxOyI%2BPCFFTlRJVFkgQWJyZXZlICImI3gxMDI7Ij48IUVOVElUWSBhYnJldmUgIiYjeDEwMzsiPjwhRU5USVRZIEFvZ29uICImI3gxMDQ7Ij48IUVOVElUWSBhb2dvbiAiJiN4MTA1OyI%2BPCFFTlRJVFkgQ2FjdXRlICImI3gxMDY7Ij48IUVOVElUWSBjYWN1dGUgIiYjeDEwNzsiPjwhRU5USVRZIENjaXJjICImI3gxMDg7Ij48IUVOVElUWSBjY2lyYyAiJiN4MTA5OyI%2BPCFFTlRJVFkgQ2RvdCAiJiN4MTBBOyI%2BPCFFTlRJVFkgY2RvdCAiJiN4MTBCOyI%2BPCFFTlRJVFkgQ2Nhcm9uICImI3gxMEM7Ij48IUVOVElUWSBjY2Fyb24gIiYjeDEwRDsiPjwhRU5USVRZIERjYXJvbiAiJiN4MTBFOyI%2BPCFFTlRJVFkgZGNhcm9uICImI3gxMEY7Ij48IUVOVElUWSBEc3Ryb2sgIiYjeDExMDsiPjwhRU5USVRZIGRzdHJvayAiJiN4MTExOyI%2BPCFFTlRJVFkgRW1hY3IgIiYjeDExMjsiPjwhRU5USVRZIGVtYWNyICImI3gxMTM7Ij48IUVOVElUWSBFZG90ICImI3gxMTY7Ij48IUVOVElUWSBlZG90ICImI3gxMTc7Ij48IUVOVElUWSBFb2dvbiAiJiN4MTE4OyI%2BPCFFTlRJVFkgZW9nb24gIiYjeDExOTsiPjwhRU5USVRZIEVjYXJvbiAiJiN4MTFBOyI%2BPCFFTlRJVFkgZWNhcm9uICImI3gxMUI7Ij48IUVOVElUWSBHY2lyYyAiJiN4MTFDOyI%2BPCFFTlRJVFkgZ2NpcmMgIiYjeDExRDsiPjwhRU5USVRZIEdicmV2ZSAiJiN4MTFFOyI%2BPCFFTlRJVFkgZ2JyZXZlICImI3gxMUY7Ij48IUVOVElUWSBHZG90ICImI3gxMjA7Ij48IUVOVElUWSBnZG90ICImI3gxMjE7Ij48IUVOVElUWSBHY2VkaWwgIiYjeDEyMjsiPjwhRU5USVRZIEhjaXJjICImI3gxMjQ7Ij48IUVOVElUWSBoY2lyYyAiJiN4MTI1OyI%2BPCFFTlRJVFkgSHN0cm9rICImI3gxMjY7Ij48IUVOVElUWSBoc3Ryb2sgIiYjeDEyNzsiPjwhRU5USVRZIEl0aWxkZSAiJiN4MTI4OyI%2BPCFFTlRJVFkgaXRpbGRlICImI3gxMjk7Ij48IUVOVElUWSBJbWFjciAiJiN4MTJBOyI%2BPCFFTlRJVFkgaW1hY3IgIiYjeDEyQjsiPjwhRU5USVRZIElvZ29uICImI3gxMkU7Ij48IUVOVElUWSBpb2dvbiAiJiN4MTJGOyI%2BPCFFTlRJVFkgSWRvdCAiJiN4MTMwOyI%2BPCFFTlRJVFkgaW1hdGggIiYjeDEzMTsiPjwhRU5USVRZIGlub2RvdCAiJiN4MTMxOyI%2BPCFFTlRJVFkgSUpsaWcgIiYjeDEzMjsiPjwhRU5USVRZIGlqbGlnICImI3gxMzM7Ij48IUVOVElUWSBKY2lyYyAiJiN4MTM0OyI%2BPCFFTlRJVFkgamNpcmMgIiYjeDEzNTsiPjwhRU5USVRZIEtjZWRpbCAiJiN4MTM2OyI%2BPCFFTlRJVFkga2NlZGlsICImI3gxMzc7Ij48IUVOVElUWSBrZ3JlZW4gIiYjeDEzODsiPjwhRU5USVRZIExhY3V0ZSAiJiN4MTM5OyI%2BPCFFTlRJVFkgbGFjdXRlICImI3gxM0E7Ij48IUVOVElUWSBMY2VkaWwgIiYjeDEzQjsiPjwhRU5USVRZIGxjZWRpbCAiJiN4MTNDOyI%2BPCFFTlRJVFkgTGNhcm9uICImI3gxM0Q7Ij48IUVOVElUWSBsY2Fyb24gIiYjeDEzRTsiPjwhRU5USVRZIExtaWRvdCAiJiN4MTNGOyI%2BPCFFTlRJVFkgbG1pZG90ICImI3gxNDA7Ij48IUVOVElUWSBMc3Ryb2sgIiYjeDE0MTsiPjwhRU5USVRZIGxzdHJvayAiJiN4MTQyOyI%2BPCFFTlRJVFkgTmFjdXRlICImI3gxNDM7Ij48IUVOVElUWSBuYWN1dGUgIiYjeDE0NDsiPjwhRU5USVRZIE5jZWRpbCAiJiN4MTQ1OyI%2BPCFFTlRJVFkgbmNlZGlsICImI3gxNDY7Ij48IUVOVElUWSBOY2Fyb24gIiYjeDE0NzsiPjwhRU5USVRZIG5jYXJvbiAiJiN4MTQ4OyI%2BPCFFTlRJVFkgbmFwb3MgIiYjeDE0OTsiPjwhRU5USVRZIEVORyAiJiN4MTRBOyI%2BPCFFTlRJVFkgZW5nICImI3gxNEI7Ij48IUVOVElUWSBPbWFjciAiJiN4MTRDOyI%2BPCFFTlRJVFkgb21hY3IgIiYjeDE0RDsiPjwhRU5USVRZIE9kYmxhYyAiJiN4MTUwOyI%2BPCFFTlRJVFkgb2RibGFjICImI3gxNTE7Ij48IUVOVElUWSBPRWxpZyAiJiN4MTUyOyI%2BPCFFTlRJVFkgb2VsaWcgIiYjeDE1MzsiPjwhRU5USVRZIFJhY3V0ZSAiJiN4MTU0OyI%2BPCFFTlRJVFkgcmFjdXRlICImI3gxNTU7Ij48IUVOVElUWSBSY2VkaWwgIiYjeDE1NjsiPjwhRU5USVRZIHJjZWRpbCAiJiN4MTU3OyI%2BPCFFTlRJVFkgUmNhcm9uICImI3gxNTg7Ij48IUVOVElUWSByY2Fyb24gIiYjeDE1OTsiPjwhRU5USVRZIFNhY3V0ZSAiJiN4MTVBOyI%2BPCFFTlRJVFkgc2FjdXRlICImI3gxNUI7Ij48IUVOVElUWSBTY2lyYyAiJiN4MTVDOyI%2BPCFFTlRJVFkgc2NpcmMgIiYjeDE1RDsiPjwhRU5USVRZIFNjZWRpbCAiJiN4MTVFOyI%2BPCFFTlRJVFkgc2NlZGlsICImI3gxNUY7Ij48IUVOVElUWSBTY2Fyb24gIiYjeDE2MDsiPjwhRU5USVRZIHNjYXJvbiAiJiN4MTYxOyI%2BPCFFTlRJVFkgVGNlZGlsICImI3gxNjI7Ij48IUVOVElUWSB0Y2VkaWwgIiYjeDE2MzsiPjwhRU5USVRZIFRjYXJvbiAiJiN4MTY0OyI%2BPCFFTlRJVFkgdGNhcm9uICImI3gxNjU7Ij48IUVOVElUWSBUc3Ryb2sgIiYjeDE2NjsiPjwhRU5USVRZIHRzdHJvayAiJiN4MTY3OyI%2BPCFFTlRJVFkgVXRpbGRlICImI3gxNjg7Ij48IUVOVElUWSB1dGlsZGUgIiYjeDE2OTsiPjwhRU5USVRZIFVtYWNyICImI3gxNkE7Ij48IUVOVElUWSB1bWFjciAiJiN4MTZCOyI%2BPCFFTlRJVFkgVWJyZXZlICImI3gxNkM7Ij48IUVOVElUWSB1YnJldmUgIiYjeDE2RDsiPjwhRU5USVRZIFVyaW5nICImI3gxNkU7Ij48IUVOVElUWSB1cmluZyAiJiN4MTZGOyI%2BPCFFTlRJVFkgVWRibGFjICImI3gxNzA7Ij48IUVOVElUWSB1ZGJsYWMgIiYjeDE3MTsiPjwhRU5USVRZIFVvZ29uICImI3gxNzI7Ij48IUVOVElUWSB1b2dvbiAiJiN4MTczOyI%2BPCFFTlRJVFkgV2NpcmMgIiYjeDE3NDsiPjwhRU5USVRZIHdjaXJjICImI3gxNzU7Ij48IUVOVElUWSBZY2lyYyAiJiN4MTc2OyI%2BPCFFTlRJVFkgeWNpcmMgIiYjeDE3NzsiPjwhRU5USVRZIFl1bWwgIiYjeDE3ODsiPjwhRU5USVRZIFphY3V0ZSAiJiN4MTc5OyI%2BPCFFTlRJVFkgemFjdXRlICImI3gxN0E7Ij48IUVOVElUWSBaZG90ICImI3gxN0I7Ij48IUVOVElUWSB6ZG90ICImI3gxN0M7Ij48IUVOVElUWSBaY2Fyb24gIiYjeDE3RDsiPjwhRU5USVRZIHpjYXJvbiAiJiN4MTdFOyI%2BPCFFTlRJVFkgZm5vZiAiJiN4MTkyOyI%2BPCFFTlRJVFkgaW1wZWQgIiYjeDFCNTsiPjwhRU5USVRZIGdhY3V0ZSAiJiN4MUY1OyI%2BPCFFTlRJVFkgam1hdGggIiYjeDIzNzsiPjwhRU5USVRZIGNpcmMgIiYjeDJDNjsiPjwhRU5USVRZIGNhcm9uICImI3gyQzc7Ij48IUVOVElUWSBIYWNlayAiJiN4MkM3OyI%2BPCFFTlRJVFkgYnJldmUgIiYjeDJEODsiPjwhRU5USVRZIEJyZXZlICImI3gyRDg7Ij48IUVOVElUWSBkb3QgIiYjeDJEOTsiPjwhRU5USVRZIERpYWNyaXRpY2FsRG90ICImI3gyRDk7Ij48IUVOVElUWSByaW5nICImI3gyREE7Ij48IUVOVElUWSBvZ29uICImI3gyREI7Ij48IUVOVElUWSB0aWxkZSAiJiN4MkRDOyI%2BPCFFTlRJVFkgRGlhY3JpdGljYWxUaWxkZSAiJiN4MkRDOyI%2BPCFFTlRJVFkgZGJsYWMgIiYjeDJERDsiPjwhRU5USVRZIERpYWNyaXRpY2FsRG91YmxlQWN1dGUgIiYjeDJERDsiPjwhRU5USVRZIERvd25CcmV2ZSAiJiN4MzExOyI%2BPCFFTlRJVFkgQWxwaGEgIiYjeDM5MTsiPjwhRU5USVRZIEJldGEgIiYjeDM5MjsiPjwhRU5USVRZIEdhbW1hICImI3gzOTM7Ij48IUVOVElUWSBEZWx0YSAiJiN4Mzk0OyI%2BPCFFTlRJVFkgRXBzaWxvbiAiJiN4Mzk1OyI%2BPCFFTlRJVFkgWmV0YSAiJiN4Mzk2OyI%2BPCFFTlRJVFkgRXRhICImI3gzOTc7Ij48IUVOVElUWSBUaGV0YSAiJiN4Mzk4OyI%2BPCFFTlRJVFkgSW90YSAiJiN4Mzk5OyI%2BPCFFTlRJVFkgS2FwcGEgIiYjeDM5QTsiPjwhRU5USVRZIExhbWJkYSAiJiN4MzlCOyI%2BPCFFTlRJVFkgTXUgIiYjeDM5QzsiPjwhRU5USVRZIE51ICImI3gzOUQ7Ij48IUVOVElUWSBYaSAiJiN4MzlFOyI%2BPCFFTlRJVFkgT21pY3JvbiAiJiN4MzlGOyI%2BPCFFTlRJVFkgUGkgIiYjeDNBMDsiPjwhRU5USVRZIFJobyAiJiN4M0ExOyI%2BPCFFTlRJVFkgU2lnbWEgIiYjeDNBMzsiPjwhRU5USVRZIFRhdSAiJiN4M0E0OyI%2BPCFFTlRJVFkgVXBzaWxvbiAiJiN4M0E1OyI%2BPCFFTlRJVFkgUGhpICImI3gzQTY7Ij48IUVOVElUWSBDaGkgIiYjeDNBNzsiPjwhRU5USVRZIFBzaSAiJiN4M0E4OyI%2BPCFFTlRJVFkgT21lZ2EgIiYjeDNBOTsiPjwhRU5USVRZIG9obSAiJiN4M0E5OyI%2BPCFFTlRJVFkgYWxwaGEgIiYjeDNCMTsiPjwhRU5USVRZIGJldGEgIiYjeDNCMjsiPjwhRU5USVRZIGdhbW1hICImI3gzQjM7Ij48IUVOVElUWSBkZWx0YSAiJiN4M0I0OyI%2BPCFFTlRJVFkgZXBzaSAiJiN4M0I1OyI%2BPCFFTlRJVFkgZXBzaWxvbiAiJiN4M0I1OyI%2BPCFFTlRJVFkgemV0YSAiJiN4M0I2OyI%2BPCFFTlRJVFkgZXRhICImI3gzQjc7Ij48IUVOVElUWSB0aGV0YSAiJiN4M0I4OyI%2BPCFFTlRJVFkgaW90YSAiJiN4M0I5OyI%2BPCFFTlRJVFkga2FwcGEgIiYjeDNCQTsiPjwhRU5USVRZIGxhbWJkYSAiJiN4M0JCOyI%2BPCFFTlRJVFkgbXUgIiYjeDNCQzsiPjwhRU5USVRZIG51ICImI3gzQkQ7Ij48IUVOVElUWSB4aSAiJiN4M0JFOyI%2BPCFFTlRJVFkgb21pY3JvbiAiJiN4M0JGOyI%2BPCFFTlRJVFkgcGkgIiYjeDNDMDsiPjwhRU5USVRZIHJobyAiJiN4M0MxOyI%2BPCFFTlRJVFkgc2lnbWF2ICImI3gzQzI7Ij48IUVOVElUWSB2YXJzaWdtYSAiJiN4M0MyOyI%2BPCFFTlRJVFkgc2lnbWFmICImI3gzQzI7Ij48IUVOVElUWSBzaWdtYSAiJiN4M0MzOyI%2BPCFFTlRJVFkgdGF1ICImI3gzQzQ7Ij48IUVOVElUWSB1cHNpICImI3gzQzU7Ij48IUVOVElUWSB1cHNpbG9uICImI3gzQzU7Ij48IUVOVElUWSBwaGkgIiYjeDNDNjsiPjwhRU5USVRZIGNoaSAiJiN4M0M3OyI%2BPCFFTlRJVFkgcHNpICImI3gzQzg7Ij48IUVOVElUWSBvbWVnYSAiJiN4M0M5OyI%2BPCFFTlRJVFkgdGhldGF2ICImI3gzRDE7Ij48IUVOVElUWSB2YXJ0aGV0YSAiJiN4M0QxOyI%2BPCFFTlRJVFkgdGhldGFzeW0gIiYjeDNEMTsiPjwhRU5USVRZIFVwc2kgIiYjeDNEMjsiPjwhRU5USVRZIHVwc2loICImI3gzRDI7Ij48IUVOVElUWSBzdHJhaWdodHBoaSAiJiN4M0Q1OyI%2BPCFFTlRJVFkgcGhpdiAiJiN4M0Q1OyI%2BPCFFTlRJVFkgdmFycGhpICImI3gzRDU7Ij48IUVOVElUWSBwaXYgIiYjeDNENjsiPjwhRU5USVRZIHZhcnBpICImI3gzRDY7Ij48IUVOVElUWSBHYW1tYWQgIiYjeDNEQzsiPjwhRU5USVRZIGdhbW1hZCAiJiN4M0REOyI%2BPCFFTlRJVFkgZGlnYW1tYSAiJiN4M0REOyI%2BPCFFTlRJVFkga2FwcGF2ICImI3gzRjA7Ij48IUVOVElUWSB2YXJrYXBwYSAiJiN4M0YwOyI%2BPCFFTlRJVFkgcmhvdiAiJiN4M0YxOyI%2BPCFFTlRJVFkgdmFycmhvICImI3gzRjE7Ij48IUVOVElUWSBlcHNpdiAiJiN4M0Y1OyI%2BPCFFTlRJVFkgc3RyYWlnaHRlcHNpbG9uICImI3gzRjU7Ij48IUVOVElUWSB2YXJlcHNpbG9uICImI3gzRjU7Ij48IUVOVElUWSBiZXBzaSAiJiN4M0Y2OyI%2BPCFFTlRJVFkgYmFja2Vwc2lsb24gIiYjeDNGNjsiPjwhRU5USVRZIElPY3kgIiYjeDQwMTsiPjwhRU5USVRZIERKY3kgIiYjeDQwMjsiPjwhRU5USVRZIEdKY3kgIiYjeDQwMzsiPjwhRU5USVRZIEp1a2N5ICImI3g0MDQ7Ij48IUVOVElUWSBEU2N5ICImI3g0MDU7Ij48IUVOVElUWSBJdWtjeSAiJiN4NDA2OyI%2BPCFFTlRJVFkgWUljeSAiJiN4NDA3OyI%2BPCFFTlRJVFkgSnNlcmN5ICImI3g0MDg7Ij48IUVOVElUWSBMSmN5ICImI3g0MDk7Ij48IUVOVElUWSBOSmN5ICImI3g0MEE7Ij48IUVOVElUWSBUU0hjeSAiJiN4NDBCOyI%2BPCFFTlRJVFkgS0pjeSAiJiN4NDBDOyI%2BPCFFTlRJVFkgVWJyY3kgIiYjeDQwRTsiPjwhRU5USVRZIERaY3kgIiYjeDQwRjsiPjwhRU5USVRZIEFjeSAiJiN4NDEwOyI%2BPCFFTlRJVFkgQmN5ICImI3g0MTE7Ij48IUVOVElUWSBWY3kgIiYjeDQxMjsiPjwhRU5USVRZIEdjeSAiJiN4NDEzOyI%2BPCFFTlRJVFkgRGN5ICImI3g0MTQ7Ij48IUVOVElUWSBJRWN5ICImI3g0MTU7Ij48IUVOVElUWSBaSGN5ICImI3g0MTY7Ij48IUVOVElUWSBaY3kgIiYjeDQxNzsiPjwhRU5USVRZIEljeSAiJiN4NDE4OyI%2BPCFFTlRJVFkgSmN5ICImI3g0MTk7Ij48IUVOVElUWSBLY3kgIiYjeDQxQTsiPjwhRU5USVRZIExjeSAiJiN4NDFCOyI%2BPCFFTlRJVFkgTWN5ICImI3g0MUM7Ij48IUVOVElUWSBOY3kgIiYjeDQxRDsiPjwhRU5USVRZIE9jeSAiJiN4NDFFOyI%2BPCFFTlRJVFkgUGN5ICImI3g0MUY7Ij48IUVOVElUWSBSY3kgIiYjeDQyMDsiPjwhRU5USVRZIFNjeSAiJiN4NDIxOyI%2BPCFFTlRJVFkgVGN5ICImI3g0MjI7Ij48IUVOVElUWSBVY3kgIiYjeDQyMzsiPjwhRU5USVRZIEZjeSAiJiN4NDI0OyI%2BPCFFTlRJVFkgS0hjeSAiJiN4NDI1OyI%2BPCFFTlRJVFkgVFNjeSAiJiN4NDI2OyI%2BPCFFTlRJVFkgQ0hjeSAiJiN4NDI3OyI%2BPCFFTlRJVFkgU0hjeSAiJiN4NDI4OyI%2BPCFFTlRJVFkgU0hDSGN5ICImI3g0Mjk7Ij48IUVOVElUWSBIQVJEY3kgIiYjeDQyQTsiPjwhRU5USVRZIFljeSAiJiN4NDJCOyI%2BPCFFTlRJVFkgU09GVGN5ICImI3g0MkM7Ij48IUVOVElUWSBFY3kgIiYjeDQyRDsiPjwhRU5USVRZIFlVY3kgIiYjeDQyRTsiPjwhRU5USVRZIFlBY3kgIiYjeDQyRjsiPjwhRU5USVRZIGFjeSAiJiN4NDMwOyI%2BPCFFTlRJVFkgYmN5ICImI3g0MzE7Ij48IUVOVElUWSB2Y3kgIiYjeDQzMjsiPjwhRU5USVRZIGdjeSAiJiN4NDMzOyI%2BPCFFTlRJVFkgZGN5ICImI3g0MzQ7Ij48IUVOVElUWSBpZWN5ICImI3g0MzU7Ij48IUVOVElUWSB6aGN5ICImI3g0MzY7Ij48IUVOVElUWSB6Y3kgIiYjeDQzNzsiPjwhRU5USVRZIGljeSAiJiN4NDM4OyI%2BPCFFTlRJVFkgamN5ICImI3g0Mzk7Ij48IUVOVElUWSBrY3kgIiYjeDQzQTsiPjwhRU5USVRZIGxjeSAiJiN4NDNCOyI%2BPCFFTlRJVFkgbWN5ICImI3g0M0M7Ij48IUVOVElUWSBuY3kgIiYjeDQzRDsiPjwhRU5USVRZIG9jeSAiJiN4NDNFOyI%2BPCFFTlRJVFkgcGN5ICImI3g0M0Y7Ij48IUVOVElUWSByY3kgIiYjeDQ0MDsiPjwhRU5USVRZIHNjeSAiJiN4NDQxOyI%2BPCFFTlRJVFkgdGN5ICImI3g0NDI7Ij48IUVOVElUWSB1Y3kgIiYjeDQ0MzsiPjwhRU5USVRZIGZjeSAiJiN4NDQ0OyI%2BPCFFTlRJVFkga2hjeSAiJiN4NDQ1OyI%2BPCFFTlRJVFkgdHNjeSAiJiN4NDQ2OyI%2BPCFFTlRJVFkgY2hjeSAiJiN4NDQ3OyI%2BPCFFTlRJVFkgc2hjeSAiJiN4NDQ4OyI%2BPCFFTlRJVFkgc2hjaGN5ICImI3g0NDk7Ij48IUVOVElUWSBoYXJkY3kgIiYjeDQ0QTsiPjwhRU5USVRZIHljeSAiJiN4NDRCOyI%2BPCFFTlRJVFkgc29mdGN5ICImI3g0NEM7Ij48IUVOVElUWSBlY3kgIiYjeDQ0RDsiPjwhRU5USVRZIHl1Y3kgIiYjeDQ0RTsiPjwhRU5USVRZIHlhY3kgIiYjeDQ0RjsiPjwhRU5USVRZIGlvY3kgIiYjeDQ1MTsiPjwhRU5USVRZIGRqY3kgIiYjeDQ1MjsiPjwhRU5USVRZIGdqY3kgIiYjeDQ1MzsiPjwhRU5USVRZIGp1a2N5ICImI3g0NTQ7Ij48IUVOVElUWSBkc2N5ICImI3g0NTU7Ij48IUVOVElUWSBpdWtjeSAiJiN4NDU2OyI%2BPCFFTlRJVFkgeWljeSAiJiN4NDU3OyI%2BPCFFTlRJVFkganNlcmN5ICImI3g0NTg7Ij48IUVOVElUWSBsamN5ICImI3g0NTk7Ij48IUVOVElUWSBuamN5ICImI3g0NUE7Ij48IUVOVElUWSB0c2hjeSAiJiN4NDVCOyI%2BPCFFTlRJVFkga2pjeSAiJiN4NDVDOyI%2BPCFFTlRJVFkgdWJyY3kgIiYjeDQ1RTsiPjwhRU5USVRZIGR6Y3kgIiYjeDQ1RjsiPjwhRU5USVRZIGVuc3AgIiYjeDIwMDI7Ij48IUVOVElUWSBlbXNwICImI3gyMDAzOyI%2BPCFFTlRJVFkgZW1zcDEzICImI3gyMDA0OyI%2BPCFFTlRJVFkgZW1zcDE0ICImI3gyMDA1OyI%2BPCFFTlRJVFkgbnVtc3AgIiYjeDIwMDc7Ij48IUVOVElUWSBwdW5jc3AgIiYjeDIwMDg7Ij48IUVOVElUWSB0aGluc3AgIiYjeDIwMDk7Ij48IUVOVElUWSBUaGluU3BhY2UgIiYjeDIwMDk7Ij48IUVOVElUWSBoYWlyc3AgIiYjeDIwMEE7Ij48IUVOVElUWSBWZXJ5VGhpblNwYWNlICImI3gyMDBBOyI%2BPCFFTlRJVFkgWmVyb1dpZHRoU3BhY2UgIiYjeDIwMEI7Ij48IUVOVElUWSBOZWdhdGl2ZVZlcnlUaGluU3BhY2UgIiYjeDIwMEI7Ij48IUVOVElUWSBOZWdhdGl2ZVRoaW5TcGFjZSAiJiN4MjAwQjsiPjwhRU5USVRZIE5lZ2F0aXZlTWVkaXVtU3BhY2UgIiYjeDIwMEI7Ij48IUVOVElUWSBOZWdhdGl2ZVRoaWNrU3BhY2UgIiYjeDIwMEI7Ij48IUVOVElUWSB6d25qICImI3gyMDBDOyI%2BPCFFTlRJVFkgendqICImI3gyMDBEOyI%2BPCFFTlRJVFkgbHJtICImI3gyMDBFOyI%2BPCFFTlRJVFkgcmxtICImI3gyMDBGOyI%2BPCFFTlRJVFkgaHlwaGVuICImI3gyMDEwOyI%2BPCFFTlRJVFkgZGFzaCAiJiN4MjAxMDsiPjwhRU5USVRZIG5kYXNoICImI3gyMDEzOyI%2BPCFFTlRJVFkgbWRhc2ggIiYjeDIwMTQ7Ij48IUVOVElUWSBob3JiYXIgIiYjeDIwMTU7Ij48IUVOVElUWSBWZXJiYXIgIiYjeDIwMTY7Ij48IUVOVElUWSBWZXJ0ICImI3gyMDE2OyI%2BPCFFTlRJVFkgbHNxdW8gIiYjeDIwMTg7Ij48IUVOVElUWSBPcGVuQ3VybHlRdW90ZSAiJiN4MjAxODsiPjwhRU5USVRZIHJzcXVvICImI3gyMDE5OyI%2BPCFFTlRJVFkgcnNxdW9yICImI3gyMDE5OyI%2BPCFFTlRJVFkgQ2xvc2VDdXJseVF1b3RlICImI3gyMDE5OyI%2BPCFFTlRJVFkgbHNxdW9yICImI3gyMDFBOyI%2BPCFFTlRJVFkgc2JxdW8gIiYjeDIwMUE7Ij48IUVOVElUWSBsZHF1byAiJiN4MjAxQzsiPjwhRU5USVRZIE9wZW5DdXJseURvdWJsZVF1b3RlICImI3gyMDFDOyI%2BPCFFTlRJVFkgcmRxdW8gIiYjeDIwMUQ7Ij48IUVOVElUWSByZHF1b3IgIiYjeDIwMUQ7Ij48IUVOVElUWSBDbG9zZUN1cmx5RG91YmxlUXVvdGUgIiYjeDIwMUQ7Ij48IUVOVElUWSBsZHF1b3IgIiYjeDIwMUU7Ij48IUVOVElUWSBiZHF1byAiJiN4MjAxRTsiPjwhRU5USVRZIGRhZ2dlciAiJiN4MjAyMDsiPjwhRU5USVRZIERhZ2dlciAiJiN4MjAyMTsiPjwhRU5USVRZIGRkYWdnZXIgIiYjeDIwMjE7Ij48IUVOVElUWSBidWxsICImI3gyMDIyOyI%2BPCFFTlRJVFkgYnVsbGV0ICImI3gyMDIyOyI%2BPCFFTlRJVFkgbmxkciAiJiN4MjAyNTsiPjwhRU5USVRZIGhlbGxpcCAiJiN4MjAyNjsiPjwhRU5USVRZIG1sZHIgIiYjeDIwMjY7Ij48IUVOVElUWSBwZXJtaWwgIiYjeDIwMzA7Ij48IUVOVElUWSBwZXJ0ZW5rICImI3gyMDMxOyI%2BPCFFTlRJVFkgcHJpbWUgIiYjeDIwMzI7Ij48IUVOVElUWSBQcmltZSAiJiN4MjAzMzsiPjwhRU5USVRZIHRwcmltZSAiJiN4MjAzNDsiPjwhRU5USVRZIGJwcmltZSAiJiN4MjAzNTsiPjwhRU5USVRZIGJhY2twcmltZSAiJiN4MjAzNTsiPjwhRU5USVRZIGxzYXF1byAiJiN4MjAzOTsiPjwhRU5USVRZIHJzYXF1byAiJiN4MjAzQTsiPjwhRU5USVRZIG9saW5lICImI3gyMDNFOyI%2BPCFFTlRJVFkgT3ZlckJhciAiJiN4MjAzRTsiPjwhRU5USVRZIGNhcmV0ICImI3gyMDQxOyI%2BPCFFTlRJVFkgaHlidWxsICImI3gyMDQzOyI%2BPCFFTlRJVFkgZnJhc2wgIiYjeDIwNDQ7Ij48IUVOVElUWSBic2VtaSAiJiN4MjA0RjsiPjwhRU5USVRZIHFwcmltZSAiJiN4MjA1NzsiPjwhRU5USVRZIE1lZGl1bVNwYWNlICImI3gyMDVGOyI%2BPCFFTlRJVFkgVGhpY2tTcGFjZSAiJiN4MjA1RjsmI3gyMDBBOyI%2BPCFFTlRJVFkgTm9CcmVhayAiJiN4MjA2MDsiPjwhRU5USVRZIEFwcGx5RnVuY3Rpb24gIiYjeDIwNjE7Ij48IUVOVElUWSBhZiAiJiN4MjA2MTsiPjwhRU5USVRZIEludmlzaWJsZVRpbWVzICImI3gyMDYyOyI%2BPCFFTlRJVFkgaXQgIiYjeDIwNjI7Ij48IUVOVElUWSBJbnZpc2libGVDb21tYSAiJiN4MjA2MzsiPjwhRU5USVRZIGljICImI3gyMDYzOyI%2BPCFFTlRJVFkgZXVybyAiJiN4MjBBQzsiPjwhRU5USVRZIHRkb3QgIiYjeDIwREI7Ij48IUVOVElUWSBUcmlwbGVEb3QgIiYjeDIwREI7Ij48IUVOVElUWSBEb3REb3QgIiYjeDIwREM7Ij48IUVOVElUWSBDb3BmICImI3gyMTAyOyI%2BPCFFTlRJVFkgY29tcGxleGVzICImI3gyMTAyOyI%2BPCFFTlRJVFkgaW5jYXJlICImI3gyMTA1OyI%2BPCFFTlRJVFkgZ3NjciAiJiN4MjEwQTsiPjwhRU5USVRZIGhhbWlsdCAiJiN4MjEwQjsiPjwhRU5USVRZIEhpbGJlcnRTcGFjZSAiJiN4MjEwQjsiPjwhRU5USVRZIEhzY3IgIiYjeDIxMEI7Ij48IUVOVElUWSBIZnIgIiYjeDIxMEM7Ij48IUVOVElUWSBQb2luY2FyZXBsYW5lICImI3gyMTBDOyI%2BPCFFTlRJVFkgcXVhdGVybmlvbnMgIiYjeDIxMEQ7Ij48IUVOVElUWSBIb3BmICImI3gyMTBEOyI%2BPCFFTlRJVFkgcGxhbmNraCAiJiN4MjEwRTsiPjwhRU5USVRZIHBsYW5jayAiJiN4MjEwRjsiPjwhRU5USVRZIGhiYXIgIiYjeDIxMEY7Ij48IUVOVElUWSBwbGFua3YgIiYjeDIxMEY7Ij48IUVOVElUWSBoc2xhc2ggIiYjeDIxMEY7Ij48IUVOVElUWSBJc2NyICImI3gyMTEwOyI%2BPCFFTlRJVFkgaW1hZ2xpbmUgIiYjeDIxMTA7Ij48IUVOVElUWSBpbWFnZSAiJiN4MjExMTsiPjwhRU5USVRZIEltICImI3gyMTExOyI%2BPCFFTlRJVFkgaW1hZ3BhcnQgIiYjeDIxMTE7Ij48IUVOVElUWSBJZnIgIiYjeDIxMTE7Ij48IUVOVElUWSBMc2NyICImI3gyMTEyOyI%2BPCFFTlRJVFkgbGFncmFuICImI3gyMTEyOyI%2BPCFFTlRJVFkgTGFwbGFjZXRyZiAiJiN4MjExMjsiPjwhRU5USVRZIGVsbCAiJiN4MjExMzsiPjwhRU5USVRZIE5vcGYgIiYjeDIxMTU7Ij48IUVOVElUWSBuYXR1cmFscyAiJiN4MjExNTsiPjwhRU5USVRZIG51bWVybyAiJiN4MjExNjsiPjwhRU5USVRZIGNvcHlzciAiJiN4MjExNzsiPjwhRU5USVRZIHdlaWVycCAiJiN4MjExODsiPjwhRU5USVRZIHdwICImI3gyMTE4OyI%2BPCFFTlRJVFkgUG9wZiAiJiN4MjExOTsiPjwhRU5USVRZIHByaW1lcyAiJiN4MjExOTsiPjwhRU5USVRZIHJhdGlvbmFscyAiJiN4MjExQTsiPjwhRU5USVRZIFFvcGYgIiYjeDIxMUE7Ij48IUVOVElUWSBSc2NyICImI3gyMTFCOyI%2BPCFFTlRJVFkgcmVhbGluZSAiJiN4MjExQjsiPjwhRU5USVRZIHJlYWwgIiYjeDIxMUM7Ij48IUVOVElUWSBSZSAiJiN4MjExQzsiPjwhRU5USVRZIHJlYWxwYXJ0ICImI3gyMTFDOyI%2BPCFFTlRJVFkgUmZyICImI3gyMTFDOyI%2BPCFFTlRJVFkgcmVhbHMgIiYjeDIxMUQ7Ij48IUVOVElUWSBSb3BmICImI3gyMTFEOyI%2BPCFFTlRJVFkgcnggIiYjeDIxMUU7Ij48IUVOVElUWSB0cmFkZSAiJiN4MjEyMjsiPjwhRU5USVRZIFRSQURFICImI3gyMTIyOyI%2BPCFFTlRJVFkgaW50ZWdlcnMgIiYjeDIxMjQ7Ij48IUVOVElUWSBab3BmICImI3gyMTI0OyI%2BPCFFTlRJVFkgbWhvICImI3gyMTI3OyI%2BPCFFTlRJVFkgWmZyICImI3gyMTI4OyI%2BPCFFTlRJVFkgemVldHJmICImI3gyMTI4OyI%2BPCFFTlRJVFkgaWlvdGEgIiYjeDIxMjk7Ij48IUVOVElUWSBiZXJub3UgIiYjeDIxMkM7Ij48IUVOVElUWSBCZXJub3VsbGlzICImI3gyMTJDOyI%2BPCFFTlRJVFkgQnNjciAiJiN4MjEyQzsiPjwhRU5USVRZIENmciAiJiN4MjEyRDsiPjwhRU5USVRZIENheWxleXMgIiYjeDIxMkQ7Ij48IUVOVElUWSBlc2NyICImI3gyMTJGOyI%2BPCFFTlRJVFkgRXNjciAiJiN4MjEzMDsiPjwhRU5USVRZIGV4cGVjdGF0aW9uICImI3gyMTMwOyI%2BPCFFTlRJVFkgRnNjciAiJiN4MjEzMTsiPjwhRU5USVRZIEZvdXJpZXJ0cmYgIiYjeDIxMzE7Ij48IUVOVElUWSBwaG1tYXQgIiYjeDIxMzM7Ij48IUVOVElUWSBNZWxsaW50cmYgIiYjeDIxMzM7Ij48IUVOVElUWSBNc2NyICImI3gyMTMzOyI%2BPCFFTlRJVFkgb3JkZXIgIiYjeDIxMzQ7Ij48IUVOVElUWSBvcmRlcm9mICImI3gyMTM0OyI%2BPCFFTlRJVFkgb3NjciAiJiN4MjEzNDsiPjwhRU5USVRZIGFsZWZzeW0gIiYjeDIxMzU7Ij48IUVOVElUWSBhbGVwaCAiJiN4MjEzNTsiPjwhRU5USVRZIGJldGggIiYjeDIxMzY7Ij48IUVOVElUWSBnaW1lbCAiJiN4MjEzNzsiPjwhRU5USVRZIGRhbGV0aCAiJiN4MjEzODsiPjwhRU5USVRZIENhcGl0YWxEaWZmZXJlbnRpYWxEICImI3gyMTQ1OyI%2BPCFFTlRJVFkgREQgIiYjeDIxNDU7Ij48IUVOVElUWSBEaWZmZXJlbnRpYWxEICImI3gyMTQ2OyI%2BPCFFTlRJVFkgZGQgIiYjeDIxNDY7Ij48IUVOVElUWSBFeHBvbmVudGlhbEUgIiYjeDIxNDc7Ij48IUVOVElUWSBleHBvbmVudGlhbGUgIiYjeDIxNDc7Ij48IUVOVElUWSBlZSAiJiN4MjE0NzsiPjwhRU5USVRZIEltYWdpbmFyeUkgIiYjeDIxNDg7Ij48IUVOVElUWSBpaSAiJiN4MjE0ODsiPjwhRU5USVRZIGZyYWMxMyAiJiN4MjE1MzsiPjwhRU5USVRZIGZyYWMyMyAiJiN4MjE1NDsiPjwhRU5USVRZIGZyYWMxNSAiJiN4MjE1NTsiPjwhRU5USVRZIGZyYWMyNSAiJiN4MjE1NjsiPjwhRU5USVRZIGZyYWMzNSAiJiN4MjE1NzsiPjwhRU5USVRZIGZyYWM0NSAiJiN4MjE1ODsiPjwhRU5USVRZIGZyYWMxNiAiJiN4MjE1OTsiPjwhRU5USVRZIGZyYWM1NiAiJiN4MjE1QTsiPjwhRU5USVRZIGZyYWMxOCAiJiN4MjE1QjsiPjwhRU5USVRZIGZyYWMzOCAiJiN4MjE1QzsiPjwhRU5USVRZIGZyYWM1OCAiJiN4MjE1RDsiPjwhRU5USVRZIGZyYWM3OCAiJiN4MjE1RTsiPjwhRU5USVRZIGxhcnIgIiYjeDIxOTA7Ij48IUVOVElUWSBsZWZ0YXJyb3cgIiYjeDIxOTA7Ij48IUVOVElUWSBMZWZ0QXJyb3cgIiYjeDIxOTA7Ij48IUVOVElUWSBzbGFyciAiJiN4MjE5MDsiPjwhRU5USVRZIFNob3J0TGVmdEFycm93ICImI3gyMTkwOyI%2BPCFFTlRJVFkgdWFyciAiJiN4MjE5MTsiPjwhRU5USVRZIHVwYXJyb3cgIiYjeDIxOTE7Ij48IUVOVElUWSBVcEFycm93ICImI3gyMTkxOyI%2BPCFFTlRJVFkgU2hvcnRVcEFycm93ICImI3gyMTkxOyI%2BPCFFTlRJVFkgcmFyciAiJiN4MjE5MjsiPjwhRU5USVRZIHJpZ2h0YXJyb3cgIiYjeDIxOTI7Ij48IUVOVElUWSBSaWdodEFycm93ICImI3gyMTkyOyI%2BPCFFTlRJVFkgc3JhcnIgIiYjeDIxOTI7Ij48IUVOVElUWSBTaG9ydFJpZ2h0QXJyb3cgIiYjeDIxOTI7Ij48IUVOVElUWSBkYXJyICImI3gyMTkzOyI%2BPCFFTlRJVFkgZG93bmFycm93ICImI3gyMTkzOyI%2BPCFFTlRJVFkgRG93bkFycm93ICImI3gyMTkzOyI%2BPCFFTlRJVFkgU2hvcnREb3duQXJyb3cgIiYjeDIxOTM7Ij48IUVOVElUWSBoYXJyICImI3gyMTk0OyI%2BPCFFTlRJVFkgbGVmdHJpZ2h0YXJyb3cgIiYjeDIxOTQ7Ij48IUVOVElUWSBMZWZ0UmlnaHRBcnJvdyAiJiN4MjE5NDsiPjwhRU5USVRZIHZhcnIgIiYjeDIxOTU7Ij48IUVOVElUWSB1cGRvd25hcnJvdyAiJiN4MjE5NTsiPjwhRU5USVRZIFVwRG93bkFycm93ICImI3gyMTk1OyI%2BPCFFTlRJVFkgbndhcnIgIiYjeDIxOTY7Ij48IUVOVElUWSBVcHBlckxlZnRBcnJvdyAiJiN4MjE5NjsiPjwhRU5USVRZIG53YXJyb3cgIiYjeDIxOTY7Ij48IUVOVElUWSBuZWFyciAiJiN4MjE5NzsiPjwhRU5USVRZIFVwcGVyUmlnaHRBcnJvdyAiJiN4MjE5NzsiPjwhRU5USVRZIG5lYXJyb3cgIiYjeDIxOTc7Ij48IUVOVElUWSBzZWFyciAiJiN4MjE5ODsiPjwhRU5USVRZIHNlYXJyb3cgIiYjeDIxOTg7Ij48IUVOVElUWSBMb3dlclJpZ2h0QXJyb3cgIiYjeDIxOTg7Ij48IUVOVElUWSBzd2FyciAiJiN4MjE5OTsiPjwhRU5USVRZIHN3YXJyb3cgIiYjeDIxOTk7Ij48IUVOVElUWSBMb3dlckxlZnRBcnJvdyAiJiN4MjE5OTsiPjwhRU5USVRZIG5sYXJyICImI3gyMTlBOyI%2BPCFFTlRJVFkgbmxlZnRhcnJvdyAiJiN4MjE5QTsiPjwhRU5USVRZIG5yYXJyICImI3gyMTlCOyI%2BPCFFTlRJVFkgbnJpZ2h0YXJyb3cgIiYjeDIxOUI7Ij48IUVOVElUWSByYXJydyAiJiN4MjE5RDsiPjwhRU5USVRZIHJpZ2h0c3F1aWdhcnJvdyAiJiN4MjE5RDsiPjwhRU5USVRZIG5yYXJydyAiJiN4MjE5RDsmI3gzMzg7Ij48IUVOVElUWSBMYXJyICImI3gyMTlFOyI%2BPCFFTlRJVFkgdHdvaGVhZGxlZnRhcnJvdyAiJiN4MjE5RTsiPjwhRU5USVRZIFVhcnIgIiYjeDIxOUY7Ij48IUVOVElUWSBSYXJyICImI3gyMUEwOyI%2BPCFFTlRJVFkgdHdvaGVhZHJpZ2h0YXJyb3cgIiYjeDIxQTA7Ij48IUVOVElUWSBEYXJyICImI3gyMUExOyI%2BPCFFTlRJVFkgbGFycnRsICImI3gyMUEyOyI%2BPCFFTlRJVFkgbGVmdGFycm93dGFpbCAiJiN4MjFBMjsiPjwhRU5USVRZIHJhcnJ0bCAiJiN4MjFBMzsiPjwhRU5USVRZIHJpZ2h0YXJyb3d0YWlsICImI3gyMUEzOyI%2BPCFFTlRJVFkgTGVmdFRlZUFycm93ICImI3gyMUE0OyI%2BPCFFTlRJVFkgbWFwc3RvbGVmdCAiJiN4MjFBNDsiPjwhRU5USVRZIFVwVGVlQXJyb3cgIiYjeDIxQTU7Ij48IUVOVElUWSBtYXBzdG91cCAiJiN4MjFBNTsiPjwhRU5USVRZIG1hcCAiJiN4MjFBNjsiPjwhRU5USVRZIFJpZ2h0VGVlQXJyb3cgIiYjeDIxQTY7Ij48IUVOVElUWSBtYXBzdG8gIiYjeDIxQTY7Ij48IUVOVElUWSBEb3duVGVlQXJyb3cgIiYjeDIxQTc7Ij48IUVOVElUWSBtYXBzdG9kb3duICImI3gyMUE3OyI%2BPCFFTlRJVFkgbGFycmhrICImI3gyMUE5OyI%2BPCFFTlRJVFkgaG9va2xlZnRhcnJvdyAiJiN4MjFBOTsiPjwhRU5USVRZIHJhcnJoayAiJiN4MjFBQTsiPjwhRU5USVRZIGhvb2tyaWdodGFycm93ICImI3gyMUFBOyI%2BPCFFTlRJVFkgbGFycmxwICImI3gyMUFCOyI%2BPCFFTlRJVFkgbG9vcGFycm93bGVmdCAiJiN4MjFBQjsiPjwhRU5USVRZIHJhcnJscCAiJiN4MjFBQzsiPjwhRU5USVRZIGxvb3BhcnJvd3JpZ2h0ICImI3gyMUFDOyI%2BPCFFTlRJVFkgaGFycncgIiYjeDIxQUQ7Ij48IUVOVElUWSBsZWZ0cmlnaHRzcXVpZ2Fycm93ICImI3gyMUFEOyI%2BPCFFTlRJVFkgbmhhcnIgIiYjeDIxQUU7Ij48IUVOVElUWSBubGVmdHJpZ2h0YXJyb3cgIiYjeDIxQUU7Ij48IUVOVElUWSBsc2ggIiYjeDIxQjA7Ij48IUVOVElUWSBMc2ggIiYjeDIxQjA7Ij48IUVOVElUWSByc2ggIiYjeDIxQjE7Ij48IUVOVElUWSBSc2ggIiYjeDIxQjE7Ij48IUVOVElUWSBsZHNoICImI3gyMUIyOyI%2BPCFFTlRJVFkgcmRzaCAiJiN4MjFCMzsiPjwhRU5USVRZIGNyYXJyICImI3gyMUI1OyI%2BPCFFTlRJVFkgY3VsYXJyICImI3gyMUI2OyI%2BPCFFTlRJVFkgY3VydmVhcnJvd2xlZnQgIiYjeDIxQjY7Ij48IUVOVElUWSBjdXJhcnIgIiYjeDIxQjc7Ij48IUVOVElUWSBjdXJ2ZWFycm93cmlnaHQgIiYjeDIxQjc7Ij48IUVOVElUWSBvbGFyciAiJiN4MjFCQTsiPjwhRU5USVRZIGNpcmNsZWFycm93bGVmdCAiJiN4MjFCQTsiPjwhRU5USVRZIG9yYXJyICImI3gyMUJCOyI%2BPCFFTlRJVFkgY2lyY2xlYXJyb3dyaWdodCAiJiN4MjFCQjsiPjwhRU5USVRZIGxoYXJ1ICImI3gyMUJDOyI%2BPCFFTlRJVFkgTGVmdFZlY3RvciAiJiN4MjFCQzsiPjwhRU5USVRZIGxlZnRoYXJwb29udXAgIiYjeDIxQkM7Ij48IUVOVElUWSBsaGFyZCAiJiN4MjFCRDsiPjwhRU5USVRZIGxlZnRoYXJwb29uZG93biAiJiN4MjFCRDsiPjwhRU5USVRZIERvd25MZWZ0VmVjdG9yICImI3gyMUJEOyI%2BPCFFTlRJVFkgdWhhcnIgIiYjeDIxQkU7Ij48IUVOVElUWSB1cGhhcnBvb25yaWdodCAiJiN4MjFCRTsiPjwhRU5USVRZIFJpZ2h0VXBWZWN0b3IgIiYjeDIxQkU7Ij48IUVOVElUWSB1aGFybCAiJiN4MjFCRjsiPjwhRU5USVRZIHVwaGFycG9vbmxlZnQgIiYjeDIxQkY7Ij48IUVOVElUWSBMZWZ0VXBWZWN0b3IgIiYjeDIxQkY7Ij48IUVOVElUWSByaGFydSAiJiN4MjFDMDsiPjwhRU5USVRZIFJpZ2h0VmVjdG9yICImI3gyMUMwOyI%2BPCFFTlRJVFkgcmlnaHRoYXJwb29udXAgIiYjeDIxQzA7Ij48IUVOVElUWSByaGFyZCAiJiN4MjFDMTsiPjwhRU5USVRZIHJpZ2h0aGFycG9vbmRvd24gIiYjeDIxQzE7Ij48IUVOVElUWSBEb3duUmlnaHRWZWN0b3IgIiYjeDIxQzE7Ij48IUVOVElUWSBkaGFyciAiJiN4MjFDMjsiPjwhRU5USVRZIFJpZ2h0RG93blZlY3RvciAiJiN4MjFDMjsiPjwhRU5USVRZIGRvd25oYXJwb29ucmlnaHQgIiYjeDIxQzI7Ij48IUVOVElUWSBkaGFybCAiJiN4MjFDMzsiPjwhRU5USVRZIExlZnREb3duVmVjdG9yICImI3gyMUMzOyI%2BPCFFTlRJVFkgZG93bmhhcnBvb25sZWZ0ICImI3gyMUMzOyI%2BPCFFTlRJVFkgcmxhcnIgIiYjeDIxQzQ7Ij48IUVOVElUWSByaWdodGxlZnRhcnJvd3MgIiYjeDIxQzQ7Ij48IUVOVElUWSBSaWdodEFycm93TGVmdEFycm93ICImI3gyMUM0OyI%2BPCFFTlRJVFkgdWRhcnIgIiYjeDIxQzU7Ij48IUVOVElUWSBVcEFycm93RG93bkFycm93ICImI3gyMUM1OyI%2BPCFFTlRJVFkgbHJhcnIgIiYjeDIxQzY7Ij48IUVOVElUWSBsZWZ0cmlnaHRhcnJvd3MgIiYjeDIxQzY7Ij48IUVOVElUWSBMZWZ0QXJyb3dSaWdodEFycm93ICImI3gyMUM2OyI%2BPCFFTlRJVFkgbGxhcnIgIiYjeDIxQzc7Ij48IUVOVElUWSBsZWZ0bGVmdGFycm93cyAiJiN4MjFDNzsiPjwhRU5USVRZIHV1YXJyICImI3gyMUM4OyI%2BPCFFTlRJVFkgdXB1cGFycm93cyAiJiN4MjFDODsiPjwhRU5USVRZIHJyYXJyICImI3gyMUM5OyI%2BPCFFTlRJVFkgcmlnaHRyaWdodGFycm93cyAiJiN4MjFDOTsiPjwhRU5USVRZIGRkYXJyICImI3gyMUNBOyI%2BPCFFTlRJVFkgZG93bmRvd25hcnJvd3MgIiYjeDIxQ0E7Ij48IUVOVElUWSBscmhhciAiJiN4MjFDQjsiPjwhRU5USVRZIFJldmVyc2VFcXVpbGlicml1bSAiJiN4MjFDQjsiPjwhRU5USVRZIGxlZnRyaWdodGhhcnBvb25zICImI3gyMUNCOyI%2BPCFFTlRJVFkgcmxoYXIgIiYjeDIxQ0M7Ij48IUVOVElUWSByaWdodGxlZnRoYXJwb29ucyAiJiN4MjFDQzsiPjwhRU5USVRZIEVxdWlsaWJyaXVtICImI3gyMUNDOyI%2BPCFFTlRJVFkgbmxBcnIgIiYjeDIxQ0Q7Ij48IUVOVElUWSBuTGVmdGFycm93ICImI3gyMUNEOyI%2BPCFFTlRJVFkgbmhBcnIgIiYjeDIxQ0U7Ij48IUVOVElUWSBuTGVmdHJpZ2h0YXJyb3cgIiYjeDIxQ0U7Ij48IUVOVElUWSBuckFyciAiJiN4MjFDRjsiPjwhRU5USVRZIG5SaWdodGFycm93ICImI3gyMUNGOyI%2BPCFFTlRJVFkgbEFyciAiJiN4MjFEMDsiPjwhRU5USVRZIExlZnRhcnJvdyAiJiN4MjFEMDsiPjwhRU5USVRZIERvdWJsZUxlZnRBcnJvdyAiJiN4MjFEMDsiPjwhRU5USVRZIHVBcnIgIiYjeDIxRDE7Ij48IUVOVElUWSBVcGFycm93ICImI3gyMUQxOyI%2BPCFFTlRJVFkgRG91YmxlVXBBcnJvdyAiJiN4MjFEMTsiPjwhRU5USVRZIHJBcnIgIiYjeDIxRDI7Ij48IUVOVElUWSBSaWdodGFycm93ICImI3gyMUQyOyI%2BPCFFTlRJVFkgSW1wbGllcyAiJiN4MjFEMjsiPjwhRU5USVRZIERvdWJsZVJpZ2h0QXJyb3cgIiYjeDIxRDI7Ij48IUVOVElUWSBkQXJyICImI3gyMUQzOyI%2BPCFFTlRJVFkgRG93bmFycm93ICImI3gyMUQzOyI%2BPCFFTlRJVFkgRG91YmxlRG93bkFycm93ICImI3gyMUQzOyI%2BPCFFTlRJVFkgaEFyciAiJiN4MjFENDsiPjwhRU5USVRZIExlZnRyaWdodGFycm93ICImI3gyMUQ0OyI%2BPCFFTlRJVFkgRG91YmxlTGVmdFJpZ2h0QXJyb3cgIiYjeDIxRDQ7Ij48IUVOVElUWSBpZmYgIiYjeDIxRDQ7Ij48IUVOVElUWSB2QXJyICImI3gyMUQ1OyI%2BPCFFTlRJVFkgVXBkb3duYXJyb3cgIiYjeDIxRDU7Ij48IUVOVElUWSBEb3VibGVVcERvd25BcnJvdyAiJiN4MjFENTsiPjwhRU5USVRZIG53QXJyICImI3gyMUQ2OyI%2BPCFFTlRJVFkgbmVBcnIgIiYjeDIxRDc7Ij48IUVOVElUWSBzZUFyciAiJiN4MjFEODsiPjwhRU5USVRZIHN3QXJyICImI3gyMUQ5OyI%2BPCFFTlRJVFkgbEFhcnIgIiYjeDIxREE7Ij48IUVOVElUWSBMbGVmdGFycm93ICImI3gyMURBOyI%2BPCFFTlRJVFkgckFhcnIgIiYjeDIxREI7Ij48IUVOVElUWSBScmlnaHRhcnJvdyAiJiN4MjFEQjsiPjwhRU5USVRZIHppZ3JhcnIgIiYjeDIxREQ7Ij48IUVOVElUWSBsYXJyYiAiJiN4MjFFNDsiPjwhRU5USVRZIExlZnRBcnJvd0JhciAiJiN4MjFFNDsiPjwhRU5USVRZIHJhcnJiICImI3gyMUU1OyI%2BPCFFTlRJVFkgUmlnaHRBcnJvd0JhciAiJiN4MjFFNTsiPjwhRU5USVRZIGR1YXJyICImI3gyMUY1OyI%2BPCFFTlRJVFkgRG93bkFycm93VXBBcnJvdyAiJiN4MjFGNTsiPjwhRU5USVRZIGxvYXJyICImI3gyMUZEOyI%2BPCFFTlRJVFkgcm9hcnIgIiYjeDIxRkU7Ij48IUVOVElUWSBob2FyciAiJiN4MjFGRjsiPjwhRU5USVRZIGZvcmFsbCAiJiN4MjIwMDsiPjwhRU5USVRZIEZvckFsbCAiJiN4MjIwMDsiPjwhRU5USVRZIGNvbXAgIiYjeDIyMDE7Ij48IUVOVElUWSBjb21wbGVtZW50ICImI3gyMjAxOyI%2BPCFFTlRJVFkgcGFydCAiJiN4MjIwMjsiPjwhRU5USVRZIFBhcnRpYWxEICImI3gyMjAyOyI%2BPCFFTlRJVFkgbnBhcnQgIiYjeDIyMDI7JiN4MzM4OyI%2BPCFFTlRJVFkgZXhpc3QgIiYjeDIyMDM7Ij48IUVOVElUWSBFeGlzdHMgIiYjeDIyMDM7Ij48IUVOVElUWSBuZXhpc3QgIiYjeDIyMDQ7Ij48IUVOVElUWSBOb3RFeGlzdHMgIiYjeDIyMDQ7Ij48IUVOVElUWSBuZXhpc3RzICImI3gyMjA0OyI%2BPCFFTlRJVFkgZW1wdHkgIiYjeDIyMDU7Ij48IUVOVElUWSBlbXB0eXNldCAiJiN4MjIwNTsiPjwhRU5USVRZIGVtcHR5diAiJiN4MjIwNTsiPjwhRU5USVRZIHZhcm5vdGhpbmcgIiYjeDIyMDU7Ij48IUVOVElUWSBuYWJsYSAiJiN4MjIwNzsiPjwhRU5USVRZIERlbCAiJiN4MjIwNzsiPjwhRU5USVRZIGlzaW4gIiYjeDIyMDg7Ij48IUVOVElUWSBpc2ludiAiJiN4MjIwODsiPjwhRU5USVRZIEVsZW1lbnQgIiYjeDIyMDg7Ij48IUVOVElUWSBpbiAiJiN4MjIwODsiPjwhRU5USVRZIG5vdGluICImI3gyMjA5OyI%2BPCFFTlRJVFkgTm90RWxlbWVudCAiJiN4MjIwOTsiPjwhRU5USVRZIG5vdGludmEgIiYjeDIyMDk7Ij48IUVOVElUWSBuaXYgIiYjeDIyMEI7Ij48IUVOVElUWSBSZXZlcnNlRWxlbWVudCAiJiN4MjIwQjsiPjwhRU5USVRZIG5pICImI3gyMjBCOyI%2BPCFFTlRJVFkgU3VjaFRoYXQgIiYjeDIyMEI7Ij48IUVOVElUWSBub3RuaSAiJiN4MjIwQzsiPjwhRU5USVRZIG5vdG5pdmEgIiYjeDIyMEM7Ij48IUVOVElUWSBOb3RSZXZlcnNlRWxlbWVudCAiJiN4MjIwQzsiPjwhRU5USVRZIHByb2QgIiYjeDIyMEY7Ij48IUVOVElUWSBQcm9kdWN0ICImI3gyMjBGOyI%2BPCFFTlRJVFkgY29wcm9kICImI3gyMjEwOyI%2BPCFFTlRJVFkgQ29wcm9kdWN0ICImI3gyMjEwOyI%2BPCFFTlRJVFkgc3VtICImI3gyMjExOyI%2BPCFFTlRJVFkgU3VtICImI3gyMjExOyI%2BPCFFTlRJVFkgbWludXMgIiYjeDIyMTI7Ij48IUVOVElUWSBtbnBsdXMgIiYjeDIyMTM7Ij48IUVOVElUWSBtcCAiJiN4MjIxMzsiPjwhRU5USVRZIE1pbnVzUGx1cyAiJiN4MjIxMzsiPjwhRU5USVRZIHBsdXNkbyAiJiN4MjIxNDsiPjwhRU5USVRZIGRvdHBsdXMgIiYjeDIyMTQ7Ij48IUVOVElUWSBzZXRtbiAiJiN4MjIxNjsiPjwhRU5USVRZIHNldG1pbnVzICImI3gyMjE2OyI%2BPCFFTlRJVFkgQmFja3NsYXNoICImI3gyMjE2OyI%2BPCFFTlRJVFkgc3NldG1uICImI3gyMjE2OyI%2BPCFFTlRJVFkgc21hbGxzZXRtaW51cyAiJiN4MjIxNjsiPjwhRU5USVRZIGxvd2FzdCAiJiN4MjIxNzsiPjwhRU5USVRZIGNvbXBmbiAiJiN4MjIxODsiPjwhRU5USVRZIFNtYWxsQ2lyY2xlICImI3gyMjE4OyI%2BPCFFTlRJVFkgcmFkaWMgIiYjeDIyMUE7Ij48IUVOVElUWSBTcXJ0ICImI3gyMjFBOyI%2BPCFFTlRJVFkgcHJvcCAiJiN4MjIxRDsiPjwhRU5USVRZIHByb3B0byAiJiN4MjIxRDsiPjwhRU5USVRZIFByb3BvcnRpb25hbCAiJiN4MjIxRDsiPjwhRU5USVRZIHZwcm9wICImI3gyMjFEOyI%2BPCFFTlRJVFkgdmFycHJvcHRvICImI3gyMjFEOyI%2BPCFFTlRJVFkgaW5maW4gIiYjeDIyMUU7Ij48IUVOVElUWSBhbmdydCAiJiN4MjIxRjsiPjwhRU5USVRZIGFuZyAiJiN4MjIyMDsiPjwhRU5USVRZIGFuZ2xlICImI3gyMjIwOyI%2BPCFFTlRJVFkgbmFuZyAiJiN4MjIyMDsmI3gyMEQyOyI%2BPCFFTlRJVFkgYW5nbXNkICImI3gyMjIxOyI%2BPCFFTlRJVFkgbWVhc3VyZWRhbmdsZSAiJiN4MjIyMTsiPjwhRU5USVRZIGFuZ3NwaCAiJiN4MjIyMjsiPjwhRU5USVRZIG1pZCAiJiN4MjIyMzsiPjwhRU5USVRZIFZlcnRpY2FsQmFyICImI3gyMjIzOyI%2BPCFFTlRJVFkgc21pZCAiJiN4MjIyMzsiPjwhRU5USVRZIHNob3J0bWlkICImI3gyMjIzOyI%2BPCFFTlRJVFkgbm1pZCAiJiN4MjIyNDsiPjwhRU5USVRZIE5vdFZlcnRpY2FsQmFyICImI3gyMjI0OyI%2BPCFFTlRJVFkgbnNtaWQgIiYjeDIyMjQ7Ij48IUVOVElUWSBuc2hvcnRtaWQgIiYjeDIyMjQ7Ij48IUVOVElUWSBwYXIgIiYjeDIyMjU7Ij48IUVOVElUWSBwYXJhbGxlbCAiJiN4MjIyNTsiPjwhRU5USVRZIERvdWJsZVZlcnRpY2FsQmFyICImI3gyMjI1OyI%2BPCFFTlRJVFkgc3BhciAiJiN4MjIyNTsiPjwhRU5USVRZIHNob3J0cGFyYWxsZWwgIiYjeDIyMjU7Ij48IUVOVElUWSBucGFyICImI3gyMjI2OyI%2BPCFFTlRJVFkgbnBhcmFsbGVsICImI3gyMjI2OyI%2BPCFFTlRJVFkgTm90RG91YmxlVmVydGljYWxCYXIgIiYjeDIyMjY7Ij48IUVOVElUWSBuc3BhciAiJiN4MjIyNjsiPjwhRU5USVRZIG5zaG9ydHBhcmFsbGVsICImI3gyMjI2OyI%2BPCFFTlRJVFkgYW5kICImI3gyMjI3OyI%2BPCFFTlRJVFkgd2VkZ2UgIiYjeDIyMjc7Ij48IUVOVElUWSBvciAiJiN4MjIyODsiPjwhRU5USVRZIHZlZSAiJiN4MjIyODsiPjwhRU5USVRZIGNhcCAiJiN4MjIyOTsiPjwhRU5USVRZIGNhcHMgIiYjeDIyMjk7JiN4RkUwMDsiPjwhRU5USVRZIGN1cCAiJiN4MjIyQTsiPjwhRU5USVRZIGN1cHMgIiYjeDIyMkE7JiN4RkUwMDsiPjwhRU5USVRZIGludCAiJiN4MjIyQjsiPjwhRU5USVRZIEludGVncmFsICImI3gyMjJCOyI%2BPCFFTlRJVFkgSW50ICImI3gyMjJDOyI%2BPCFFTlRJVFkgdGludCAiJiN4MjIyRDsiPjwhRU5USVRZIGlpaW50ICImI3gyMjJEOyI%2BPCFFTlRJVFkgY29uaW50ICImI3gyMjJFOyI%2BPCFFTlRJVFkgb2ludCAiJiN4MjIyRTsiPjwhRU5USVRZIENvbnRvdXJJbnRlZ3JhbCAiJiN4MjIyRTsiPjwhRU5USVRZIENvbmludCAiJiN4MjIyRjsiPjwhRU5USVRZIERvdWJsZUNvbnRvdXJJbnRlZ3JhbCAiJiN4MjIyRjsiPjwhRU5USVRZIENjb25pbnQgIiYjeDIyMzA7Ij48IUVOVElUWSBjd2ludCAiJiN4MjIzMTsiPjwhRU5USVRZIGN3Y29uaW50ICImI3gyMjMyOyI%2BPCFFTlRJVFkgQ2xvY2t3aXNlQ29udG91ckludGVncmFsICImI3gyMjMyOyI%2BPCFFTlRJVFkgYXdjb25pbnQgIiYjeDIyMzM7Ij48IUVOVElUWSBDb3VudGVyQ2xvY2t3aXNlQ29udG91ckludGVncmFsICImI3gyMjMzOyI%2BPCFFTlRJVFkgdGhlcmU0ICImI3gyMjM0OyI%2BPCFFTlRJVFkgdGhlcmVmb3JlICImI3gyMjM0OyI%2BPCFFTlRJVFkgVGhlcmVmb3JlICImI3gyMjM0OyI%2BPCFFTlRJVFkgYmVjYXVzICImI3gyMjM1OyI%2BPCFFTlRJVFkgYmVjYXVzZSAiJiN4MjIzNTsiPjwhRU5USVRZIEJlY2F1c2UgIiYjeDIyMzU7Ij48IUVOVElUWSByYXRpbyAiJiN4MjIzNjsiPjwhRU5USVRZIENvbG9uICImI3gyMjM3OyI%2BPCFFTlRJVFkgUHJvcG9ydGlvbiAiJiN4MjIzNzsiPjwhRU5USVRZIG1pbnVzZCAiJiN4MjIzODsiPjwhRU5USVRZIGRvdG1pbnVzICImI3gyMjM4OyI%2BPCFFTlRJVFkgbUREb3QgIiYjeDIyM0E7Ij48IUVOVElUWSBob210aHQgIiYjeDIyM0I7Ij48IUVOVElUWSBzaW0gIiYjeDIyM0M7Ij48IUVOVElUWSBUaWxkZSAiJiN4MjIzQzsiPjwhRU5USVRZIHRoa3NpbSAiJiN4MjIzQzsiPjwhRU5USVRZIHRoaWNrc2ltICImI3gyMjNDOyI%2BPCFFTlRJVFkgbnZzaW0gIiYjeDIyM0M7JiN4MjBEMjsiPjwhRU5USVRZIGJzaW0gIiYjeDIyM0Q7Ij48IUVOVElUWSBiYWNrc2ltICImI3gyMjNEOyI%2BPCFFTlRJVFkgcmFjZSAiJiN4MjIzRDsmI3gzMzE7Ij48IUVOVElUWSBhYyAiJiN4MjIzRTsiPjwhRU5USVRZIG1zdHBvcyAiJiN4MjIzRTsiPjwhRU5USVRZIGFjRSAiJiN4MjIzRTsmI3gzMzM7Ij48IUVOVElUWSBhY2QgIiYjeDIyM0Y7Ij48IUVOVElUWSB3cmVhdGggIiYjeDIyNDA7Ij48IUVOVElUWSBWZXJ0aWNhbFRpbGRlICImI3gyMjQwOyI%2BPCFFTlRJVFkgd3IgIiYjeDIyNDA7Ij48IUVOVElUWSBuc2ltICImI3gyMjQxOyI%2BPCFFTlRJVFkgTm90VGlsZGUgIiYjeDIyNDE7Ij48IUVOVElUWSBlc2ltICImI3gyMjQyOyI%2BPCFFTlRJVFkgRXF1YWxUaWxkZSAiJiN4MjI0MjsiPjwhRU5USVRZIGVxc2ltICImI3gyMjQyOyI%2BPCFFTlRJVFkgTm90RXF1YWxUaWxkZSAiJiN4MjI0MjsmI3gzMzg7Ij48IUVOVElUWSBuZXNpbSAiJiN4MjI0MjsmI3gzMzg7Ij48IUVOVElUWSBzaW1lICImI3gyMjQzOyI%2BPCFFTlRJVFkgVGlsZGVFcXVhbCAiJiN4MjI0MzsiPjwhRU5USVRZIHNpbWVxICImI3gyMjQzOyI%2BPCFFTlRJVFkgbnNpbWUgIiYjeDIyNDQ7Ij48IUVOVElUWSBuc2ltZXEgIiYjeDIyNDQ7Ij48IUVOVElUWSBOb3RUaWxkZUVxdWFsICImI3gyMjQ0OyI%2BPCFFTlRJVFkgY29uZyAiJiN4MjI0NTsiPjwhRU5USVRZIFRpbGRlRnVsbEVxdWFsICImI3gyMjQ1OyI%2BPCFFTlRJVFkgc2ltbmUgIiYjeDIyNDY7Ij48IUVOVElUWSBuY29uZyAiJiN4MjI0NzsiPjwhRU5USVRZIE5vdFRpbGRlRnVsbEVxdWFsICImI3gyMjQ3OyI%2BPCFFTlRJVFkgYXN5bXAgIiYjeDIyNDg7Ij48IUVOVElUWSBhcCAiJiN4MjI0ODsiPjwhRU5USVRZIFRpbGRlVGlsZGUgIiYjeDIyNDg7Ij48IUVOVElUWSBhcHByb3ggIiYjeDIyNDg7Ij48IUVOVElUWSB0aGthcCAiJiN4MjI0ODsiPjwhRU5USVRZIHRoaWNrYXBwcm94ICImI3gyMjQ4OyI%2BPCFFTlRJVFkgbmFwICImI3gyMjQ5OyI%2BPCFFTlRJVFkgTm90VGlsZGVUaWxkZSAiJiN4MjI0OTsiPjwhRU5USVRZIG5hcHByb3ggIiYjeDIyNDk7Ij48IUVOVElUWSBhcGUgIiYjeDIyNEE7Ij48IUVOVElUWSBhcHByb3hlcSAiJiN4MjI0QTsiPjwhRU5USVRZIGFwaWQgIiYjeDIyNEI7Ij48IUVOVElUWSBuYXBpZCAiJiN4MjI0QjsmI3gzMzg7Ij48IUVOVElUWSBiY29uZyAiJiN4MjI0QzsiPjwhRU5USVRZIGJhY2tjb25nICImI3gyMjRDOyI%2BPCFFTlRJVFkgYXN5bXBlcSAiJiN4MjI0RDsiPjwhRU5USVRZIEN1cENhcCAiJiN4MjI0RDsiPjwhRU5USVRZIG52YXAgIiYjeDIyNEQ7JiN4MjBEMjsiPjwhRU5USVRZIGJ1bXAgIiYjeDIyNEU7Ij48IUVOVElUWSBIdW1wRG93bkh1bXAgIiYjeDIyNEU7Ij48IUVOVElUWSBCdW1wZXEgIiYjeDIyNEU7Ij48IUVOVElUWSBOb3RIdW1wRG93bkh1bXAgIiYjeDIyNEU7JiN4MzM4OyI%2BPCFFTlRJVFkgbmJ1bXAgIiYjeDIyNEU7JiN4MzM4OyI%2BPCFFTlRJVFkgYnVtcGUgIiYjeDIyNEY7Ij48IUVOVElUWSBIdW1wRXF1YWwgIiYjeDIyNEY7Ij48IUVOVElUWSBidW1wZXEgIiYjeDIyNEY7Ij48IUVOVElUWSBuYnVtcGUgIiYjeDIyNEY7JiN4MzM4OyI%2BPCFFTlRJVFkgTm90SHVtcEVxdWFsICImI3gyMjRGOyYjeDMzODsiPjwhRU5USVRZIGVzZG90ICImI3gyMjUwOyI%2BPCFFTlRJVFkgRG90RXF1YWwgIiYjeDIyNTA7Ij48IUVOVElUWSBkb3RlcSAiJiN4MjI1MDsiPjwhRU5USVRZIG5lZG90ICImI3gyMjUwOyYjeDMzODsiPjwhRU5USVRZIGVEb3QgIiYjeDIyNTE7Ij48IUVOVElUWSBkb3RlcWRvdCAiJiN4MjI1MTsiPjwhRU5USVRZIGVmRG90ICImI3gyMjUyOyI%2BPCFFTlRJVFkgZmFsbGluZ2RvdHNlcSAiJiN4MjI1MjsiPjwhRU5USVRZIGVyRG90ICImI3gyMjUzOyI%2BPCFFTlRJVFkgcmlzaW5nZG90c2VxICImI3gyMjUzOyI%2BPCFFTlRJVFkgY29sb25lICImI3gyMjU0OyI%2BPCFFTlRJVFkgY29sb25lcSAiJiN4MjI1NDsiPjwhRU5USVRZIEFzc2lnbiAiJiN4MjI1NDsiPjwhRU5USVRZIGVjb2xvbiAiJiN4MjI1NTsiPjwhRU5USVRZIGVxY29sb24gIiYjeDIyNTU7Ij48IUVOVElUWSBlY2lyICImI3gyMjU2OyI%2BPCFFTlRJVFkgZXFjaXJjICImI3gyMjU2OyI%2BPCFFTlRJVFkgY2lyZSAiJiN4MjI1NzsiPjwhRU5USVRZIGNpcmNlcSAiJiN4MjI1NzsiPjwhRU5USVRZIHdlZGdlcSAiJiN4MjI1OTsiPjwhRU5USVRZIHZlZWVxICImI3gyMjVBOyI%2BPCFFTlRJVFkgdHJpZSAiJiN4MjI1QzsiPjwhRU5USVRZIHRyaWFuZ2xlcSAiJiN4MjI1QzsiPjwhRU5USVRZIGVxdWVzdCAiJiN4MjI1RjsiPjwhRU5USVRZIHF1ZXN0ZXEgIiYjeDIyNUY7Ij48IUVOVElUWSBuZSAiJiN4MjI2MDsiPjwhRU5USVRZIE5vdEVxdWFsICImI3gyMjYwOyI%2BPCFFTlRJVFkgZXF1aXYgIiYjeDIyNjE7Ij48IUVOVElUWSBDb25ncnVlbnQgIiYjeDIyNjE7Ij48IUVOVElUWSBibmVxdWl2ICImI3gyMjYxOyYjeDIwRTU7Ij48IUVOVElUWSBuZXF1aXYgIiYjeDIyNjI7Ij48IUVOVElUWSBOb3RDb25ncnVlbnQgIiYjeDIyNjI7Ij48IUVOVElUWSBsZSAiJiN4MjI2NDsiPjwhRU5USVRZIGxlcSAiJiN4MjI2NDsiPjwhRU5USVRZIG52bGUgIiYjeDIyNjQ7JiN4MjBEMjsiPjwhRU5USVRZIGdlICImI3gyMjY1OyI%2BPCFFTlRJVFkgR3JlYXRlckVxdWFsICImI3gyMjY1OyI%2BPCFFTlRJVFkgZ2VxICImI3gyMjY1OyI%2BPCFFTlRJVFkgbnZnZSAiJiN4MjI2NTsmI3gyMEQyOyI%2BPCFFTlRJVFkgbEUgIiYjeDIyNjY7Ij48IUVOVElUWSBMZXNzRnVsbEVxdWFsICImI3gyMjY2OyI%2BPCFFTlRJVFkgbGVxcSAiJiN4MjI2NjsiPjwhRU5USVRZIG5sRSAiJiN4MjI2NjsmI3gzMzg7Ij48IUVOVElUWSBubGVxcSAiJiN4MjI2NjsmI3gzMzg7Ij48IUVOVElUWSBnRSAiJiN4MjI2NzsiPjwhRU5USVRZIEdyZWF0ZXJGdWxsRXF1YWwgIiYjeDIyNjc7Ij48IUVOVElUWSBnZXFxICImI3gyMjY3OyI%2BPCFFTlRJVFkgbmdFICImI3gyMjY3OyYjeDMzODsiPjwhRU5USVRZIG5nZXFxICImI3gyMjY3OyYjeDMzODsiPjwhRU5USVRZIE5vdEdyZWF0ZXJGdWxsRXF1YWwgIiYjeDIyNjc7JiN4MzM4OyI%2BPCFFTlRJVFkgbG5FICImI3gyMjY4OyI%2BPCFFTlRJVFkgbG5lcXEgIiYjeDIyNjg7Ij48IUVOVElUWSBsdm5FICImI3gyMjY4OyYjeEZFMDA7Ij48IUVOVElUWSBsdmVydG5lcXEgIiYjeDIyNjg7JiN4RkUwMDsiPjwhRU5USVRZIGduRSAiJiN4MjI2OTsiPjwhRU5USVRZIGduZXFxICImI3gyMjY5OyI%2BPCFFTlRJVFkgZ3ZuRSAiJiN4MjI2OTsmI3hGRTAwOyI%2BPCFFTlRJVFkgZ3ZlcnRuZXFxICImI3gyMjY5OyYjeEZFMDA7Ij48IUVOVElUWSBMdCAiJiN4MjI2QTsiPjwhRU5USVRZIE5lc3RlZExlc3NMZXNzICImI3gyMjZBOyI%2BPCFFTlRJVFkgbGwgIiYjeDIyNkE7Ij48IUVOVElUWSBuTHR2ICImI3gyMjZBOyYjeDMzODsiPjwhRU5USVRZIE5vdExlc3NMZXNzICImI3gyMjZBOyYjeDMzODsiPjwhRU5USVRZIG5MdCAiJiN4MjI2QTsmI3gyMEQyOyI%2BPCFFTlRJVFkgR3QgIiYjeDIyNkI7Ij48IUVOVElUWSBOZXN0ZWRHcmVhdGVyR3JlYXRlciAiJiN4MjI2QjsiPjwhRU5USVRZIGdnICImI3gyMjZCOyI%2BPCFFTlRJVFkgbkd0diAiJiN4MjI2QjsmI3gzMzg7Ij48IUVOVElUWSBOb3RHcmVhdGVyR3JlYXRlciAiJiN4MjI2QjsmI3gzMzg7Ij48IUVOVElUWSBuR3QgIiYjeDIyNkI7JiN4MjBEMjsiPjwhRU5USVRZIHR3aXh0ICImI3gyMjZDOyI%2BPCFFTlRJVFkgYmV0d2VlbiAiJiN4MjI2QzsiPjwhRU5USVRZIE5vdEN1cENhcCAiJiN4MjI2RDsiPjwhRU5USVRZIG5sdCAiJiN4MjI2RTsiPjwhRU5USVRZIE5vdExlc3MgIiYjeDIyNkU7Ij48IUVOVElUWSBubGVzcyAiJiN4MjI2RTsiPjwhRU5USVRZIG5ndCAiJiN4MjI2RjsiPjwhRU5USVRZIE5vdEdyZWF0ZXIgIiYjeDIyNkY7Ij48IUVOVElUWSBuZ3RyICImI3gyMjZGOyI%2BPCFFTlRJVFkgbmxlICImI3gyMjcwOyI%2BPCFFTlRJVFkgTm90TGVzc0VxdWFsICImI3gyMjcwOyI%2BPCFFTlRJVFkgbmxlcSAiJiN4MjI3MDsiPjwhRU5USVRZIG5nZSAiJiN4MjI3MTsiPjwhRU5USVRZIE5vdEdyZWF0ZXJFcXVhbCAiJiN4MjI3MTsiPjwhRU5USVRZIG5nZXEgIiYjeDIyNzE7Ij48IUVOVElUWSBsc2ltICImI3gyMjcyOyI%2BPCFFTlRJVFkgTGVzc1RpbGRlICImI3gyMjcyOyI%2BPCFFTlRJVFkgbGVzc3NpbSAiJiN4MjI3MjsiPjwhRU5USVRZIGdzaW0gIiYjeDIyNzM7Ij48IUVOVElUWSBndHJzaW0gIiYjeDIyNzM7Ij48IUVOVElUWSBHcmVhdGVyVGlsZGUgIiYjeDIyNzM7Ij48IUVOVElUWSBubHNpbSAiJiN4MjI3NDsiPjwhRU5USVRZIE5vdExlc3NUaWxkZSAiJiN4MjI3NDsiPjwhRU5USVRZIG5nc2ltICImI3gyMjc1OyI%2BPCFFTlRJVFkgTm90R3JlYXRlclRpbGRlICImI3gyMjc1OyI%2BPCFFTlRJVFkgbGcgIiYjeDIyNzY7Ij48IUVOVElUWSBsZXNzZ3RyICImI3gyMjc2OyI%2BPCFFTlRJVFkgTGVzc0dyZWF0ZXIgIiYjeDIyNzY7Ij48IUVOVElUWSBnbCAiJiN4MjI3NzsiPjwhRU5USVRZIGd0cmxlc3MgIiYjeDIyNzc7Ij48IUVOVElUWSBHcmVhdGVyTGVzcyAiJiN4MjI3NzsiPjwhRU5USVRZIG50bGcgIiYjeDIyNzg7Ij48IUVOVElUWSBOb3RMZXNzR3JlYXRlciAiJiN4MjI3ODsiPjwhRU5USVRZIG50Z2wgIiYjeDIyNzk7Ij48IUVOVElUWSBOb3RHcmVhdGVyTGVzcyAiJiN4MjI3OTsiPjwhRU5USVRZIHByICImI3gyMjdBOyI%2BPCFFTlRJVFkgUHJlY2VkZXMgIiYjeDIyN0E7Ij48IUVOVElUWSBwcmVjICImI3gyMjdBOyI%2BPCFFTlRJVFkgc2MgIiYjeDIyN0I7Ij48IUVOVElUWSBTdWNjZWVkcyAiJiN4MjI3QjsiPjwhRU5USVRZIHN1Y2MgIiYjeDIyN0I7Ij48IUVOVElUWSBwcmN1ZSAiJiN4MjI3QzsiPjwhRU5USVRZIFByZWNlZGVzU2xhbnRFcXVhbCAiJiN4MjI3QzsiPjwhRU5USVRZIHByZWNjdXJseWVxICImI3gyMjdDOyI%2BPCFFTlRJVFkgc2NjdWUgIiYjeDIyN0Q7Ij48IUVOVElUWSBTdWNjZWVkc1NsYW50RXF1YWwgIiYjeDIyN0Q7Ij48IUVOVElUWSBzdWNjY3VybHllcSAiJiN4MjI3RDsiPjwhRU5USVRZIHByc2ltICImI3gyMjdFOyI%2BPCFFTlRJVFkgcHJlY3NpbSAiJiN4MjI3RTsiPjwhRU5USVRZIFByZWNlZGVzVGlsZGUgIiYjeDIyN0U7Ij48IUVOVElUWSBzY3NpbSAiJiN4MjI3RjsiPjwhRU5USVRZIHN1Y2NzaW0gIiYjeDIyN0Y7Ij48IUVOVElUWSBTdWNjZWVkc1RpbGRlICImI3gyMjdGOyI%2BPCFFTlRJVFkgTm90U3VjY2VlZHNUaWxkZSAiJiN4MjI3RjsmI3gzMzg7Ij48IUVOVElUWSBucHIgIiYjeDIyODA7Ij48IUVOVElUWSBucHJlYyAiJiN4MjI4MDsiPjwhRU5USVRZIE5vdFByZWNlZGVzICImI3gyMjgwOyI%2BPCFFTlRJVFkgbnNjICImI3gyMjgxOyI%2BPCFFTlRJVFkgbnN1Y2MgIiYjeDIyODE7Ij48IUVOVElUWSBOb3RTdWNjZWVkcyAiJiN4MjI4MTsiPjwhRU5USVRZIHN1YiAiJiN4MjI4MjsiPjwhRU5USVRZIHN1YnNldCAiJiN4MjI4MjsiPjwhRU5USVRZIHZuc3ViICImI3gyMjgyOyYjeDIwRDI7Ij48IUVOVElUWSBuc3Vic2V0ICImI3gyMjgyOyYjeDIwRDI7Ij48IUVOVElUWSBOb3RTdWJzZXQgIiYjeDIyODI7JiN4MjBEMjsiPjwhRU5USVRZIHN1cCAiJiN4MjI4MzsiPjwhRU5USVRZIHN1cHNldCAiJiN4MjI4MzsiPjwhRU5USVRZIFN1cGVyc2V0ICImI3gyMjgzOyI%2BPCFFTlRJVFkgdm5zdXAgIiYjeDIyODM7JiN4MjBEMjsiPjwhRU5USVRZIG5zdXBzZXQgIiYjeDIyODM7JiN4MjBEMjsiPjwhRU5USVRZIE5vdFN1cGVyc2V0ICImI3gyMjgzOyYjeDIwRDI7Ij48IUVOVElUWSBuc3ViICImI3gyMjg0OyI%2BPCFFTlRJVFkgbnN1cCAiJiN4MjI4NTsiPjwhRU5USVRZIHN1YmUgIiYjeDIyODY7Ij48IUVOVElUWSBTdWJzZXRFcXVhbCAiJiN4MjI4NjsiPjwhRU5USVRZIHN1YnNldGVxICImI3gyMjg2OyI%2BPCFFTlRJVFkgc3VwZSAiJiN4MjI4NzsiPjwhRU5USVRZIHN1cHNldGVxICImI3gyMjg3OyI%2BPCFFTlRJVFkgU3VwZXJzZXRFcXVhbCAiJiN4MjI4NzsiPjwhRU5USVRZIG5zdWJlICImI3gyMjg4OyI%2BPCFFTlRJVFkgbnN1YnNldGVxICImI3gyMjg4OyI%2BPCFFTlRJVFkgTm90U3Vic2V0RXF1YWwgIiYjeDIyODg7Ij48IUVOVElUWSBuc3VwZSAiJiN4MjI4OTsiPjwhRU5USVRZIG5zdXBzZXRlcSAiJiN4MjI4OTsiPjwhRU5USVRZIE5vdFN1cGVyc2V0RXF1YWwgIiYjeDIyODk7Ij48IUVOVElUWSBzdWJuZSAiJiN4MjI4QTsiPjwhRU5USVRZIHN1YnNldG5lcSAiJiN4MjI4QTsiPjwhRU5USVRZIHZzdWJuZSAiJiN4MjI4QTsmI3hGRTAwOyI%2BPCFFTlRJVFkgdmFyc3Vic2V0bmVxICImI3gyMjhBOyYjeEZFMDA7Ij48IUVOVElUWSBzdXBuZSAiJiN4MjI4QjsiPjwhRU5USVRZIHN1cHNldG5lcSAiJiN4MjI4QjsiPjwhRU5USVRZIHZzdXBuZSAiJiN4MjI4QjsmI3hGRTAwOyI%2BPCFFTlRJVFkgdmFyc3Vwc2V0bmVxICImI3gyMjhCOyYjeEZFMDA7Ij48IUVOVElUWSBjdXBkb3QgIiYjeDIyOEQ7Ij48IUVOVElUWSB1cGx1cyAiJiN4MjI4RTsiPjwhRU5USVRZIFVuaW9uUGx1cyAiJiN4MjI4RTsiPjwhRU5USVRZIHNxc3ViICImI3gyMjhGOyI%2BPCFFTlRJVFkgU3F1YXJlU3Vic2V0ICImI3gyMjhGOyI%2BPCFFTlRJVFkgc3FzdWJzZXQgIiYjeDIyOEY7Ij48IUVOVElUWSBOb3RTcXVhcmVTdWJzZXQgIiYjeDIyOEY7JiN4MzM4OyI%2BPCFFTlRJVFkgc3FzdXAgIiYjeDIyOTA7Ij48IUVOVElUWSBTcXVhcmVTdXBlcnNldCAiJiN4MjI5MDsiPjwhRU5USVRZIHNxc3Vwc2V0ICImI3gyMjkwOyI%2BPCFFTlRJVFkgTm90U3F1YXJlU3VwZXJzZXQgIiYjeDIyOTA7JiN4MzM4OyI%2BPCFFTlRJVFkgc3FzdWJlICImI3gyMjkxOyI%2BPCFFTlRJVFkgU3F1YXJlU3Vic2V0RXF1YWwgIiYjeDIyOTE7Ij48IUVOVElUWSBzcXN1YnNldGVxICImI3gyMjkxOyI%2BPCFFTlRJVFkgc3FzdXBlICImI3gyMjkyOyI%2BPCFFTlRJVFkgU3F1YXJlU3VwZXJzZXRFcXVhbCAiJiN4MjI5MjsiPjwhRU5USVRZIHNxc3Vwc2V0ZXEgIiYjeDIyOTI7Ij48IUVOVElUWSBzcWNhcCAiJiN4MjI5MzsiPjwhRU5USVRZIFNxdWFyZUludGVyc2VjdGlvbiAiJiN4MjI5MzsiPjwhRU5USVRZIHNxY2FwcyAiJiN4MjI5MzsmI3hGRTAwOyI%2BPCFFTlRJVFkgc3FjdXAgIiYjeDIyOTQ7Ij48IUVOVElUWSBTcXVhcmVVbmlvbiAiJiN4MjI5NDsiPjwhRU5USVRZIHNxY3VwcyAiJiN4MjI5NDsmI3hGRTAwOyI%2BPCFFTlRJVFkgb3BsdXMgIiYjeDIyOTU7Ij48IUVOVElUWSBDaXJjbGVQbHVzICImI3gyMjk1OyI%2BPCFFTlRJVFkgb21pbnVzICImI3gyMjk2OyI%2BPCFFTlRJVFkgQ2lyY2xlTWludXMgIiYjeDIyOTY7Ij48IUVOVElUWSBvdGltZXMgIiYjeDIyOTc7Ij48IUVOVElUWSBDaXJjbGVUaW1lcyAiJiN4MjI5NzsiPjwhRU5USVRZIG9zb2wgIiYjeDIyOTg7Ij48IUVOVElUWSBvZG90ICImI3gyMjk5OyI%2BPCFFTlRJVFkgQ2lyY2xlRG90ICImI3gyMjk5OyI%2BPCFFTlRJVFkgb2NpciAiJiN4MjI5QTsiPjwhRU5USVRZIGNpcmNsZWRjaXJjICImI3gyMjlBOyI%2BPCFFTlRJVFkgb2FzdCAiJiN4MjI5QjsiPjwhRU5USVRZIGNpcmNsZWRhc3QgIiYjeDIyOUI7Ij48IUVOVElUWSBvZGFzaCAiJiN4MjI5RDsiPjwhRU5USVRZIGNpcmNsZWRkYXNoICImI3gyMjlEOyI%2BPCFFTlRJVFkgcGx1c2IgIiYjeDIyOUU7Ij48IUVOVElUWSBib3hwbHVzICImI3gyMjlFOyI%2BPCFFTlRJVFkgbWludXNiICImI3gyMjlGOyI%2BPCFFTlRJVFkgYm94bWludXMgIiYjeDIyOUY7Ij48IUVOVElUWSB0aW1lc2IgIiYjeDIyQTA7Ij48IUVOVElUWSBib3h0aW1lcyAiJiN4MjJBMDsiPjwhRU5USVRZIHNkb3RiICImI3gyMkExOyI%2BPCFFTlRJVFkgZG90c3F1YXJlICImI3gyMkExOyI%2BPCFFTlRJVFkgdmRhc2ggIiYjeDIyQTI7Ij48IUVOVElUWSBSaWdodFRlZSAiJiN4MjJBMjsiPjwhRU5USVRZIGRhc2h2ICImI3gyMkEzOyI%2BPCFFTlRJVFkgTGVmdFRlZSAiJiN4MjJBMzsiPjwhRU5USVRZIHRvcCAiJiN4MjJBNDsiPjwhRU5USVRZIERvd25UZWUgIiYjeDIyQTQ7Ij48IUVOVElUWSBib3R0b20gIiYjeDIyQTU7Ij48IUVOVElUWSBib3QgIiYjeDIyQTU7Ij48IUVOVElUWSBwZXJwICImI3gyMkE1OyI%2BPCFFTlRJVFkgVXBUZWUgIiYjeDIyQTU7Ij48IUVOVElUWSBtb2RlbHMgIiYjeDIyQTc7Ij48IUVOVElUWSB2RGFzaCAiJiN4MjJBODsiPjwhRU5USVRZIERvdWJsZVJpZ2h0VGVlICImI3gyMkE4OyI%2BPCFFTlRJVFkgVmRhc2ggIiYjeDIyQTk7Ij48IUVOVElUWSBWdmRhc2ggIiYjeDIyQUE7Ij48IUVOVElUWSBWRGFzaCAiJiN4MjJBQjsiPjwhRU5USVRZIG52ZGFzaCAiJiN4MjJBQzsiPjwhRU5USVRZIG52RGFzaCAiJiN4MjJBRDsiPjwhRU5USVRZIG5WZGFzaCAiJiN4MjJBRTsiPjwhRU5USVRZIG5WRGFzaCAiJiN4MjJBRjsiPjwhRU5USVRZIHBydXJlbCAiJiN4MjJCMDsiPjwhRU5USVRZIHZsdHJpICImI3gyMkIyOyI%2BPCFFTlRJVFkgdmFydHJpYW5nbGVsZWZ0ICImI3gyMkIyOyI%2BPCFFTlRJVFkgTGVmdFRyaWFuZ2xlICImI3gyMkIyOyI%2BPCFFTlRJVFkgdnJ0cmkgIiYjeDIyQjM7Ij48IUVOVElUWSB2YXJ0cmlhbmdsZXJpZ2h0ICImI3gyMkIzOyI%2BPCFFTlRJVFkgUmlnaHRUcmlhbmdsZSAiJiN4MjJCMzsiPjwhRU5USVRZIGx0cmllICImI3gyMkI0OyI%2BPCFFTlRJVFkgdHJpYW5nbGVsZWZ0ZXEgIiYjeDIyQjQ7Ij48IUVOVElUWSBMZWZ0VHJpYW5nbGVFcXVhbCAiJiN4MjJCNDsiPjwhRU5USVRZIG52bHRyaWUgIiYjeDIyQjQ7JiN4MjBEMjsiPjwhRU5USVRZIHJ0cmllICImI3gyMkI1OyI%2BPCFFTlRJVFkgdHJpYW5nbGVyaWdodGVxICImI3gyMkI1OyI%2BPCFFTlRJVFkgUmlnaHRUcmlhbmdsZUVxdWFsICImI3gyMkI1OyI%2BPCFFTlRJVFkgbnZydHJpZSAiJiN4MjJCNTsmI3gyMEQyOyI%2BPCFFTlRJVFkgb3JpZ29mICImI3gyMkI2OyI%2BPCFFTlRJVFkgaW1vZiAiJiN4MjJCNzsiPjwhRU5USVRZIG11bWFwICImI3gyMkI4OyI%2BPCFFTlRJVFkgbXVsdGltYXAgIiYjeDIyQjg7Ij48IUVOVElUWSBoZXJjb24gIiYjeDIyQjk7Ij48IUVOVElUWSBpbnRjYWwgIiYjeDIyQkE7Ij48IUVOVElUWSBpbnRlcmNhbCAiJiN4MjJCQTsiPjwhRU5USVRZIHZlZWJhciAiJiN4MjJCQjsiPjwhRU5USVRZIGJhcnZlZSAiJiN4MjJCRDsiPjwhRU5USVRZIGFuZ3J0dmIgIiYjeDIyQkU7Ij48IUVOVElUWSBscnRyaSAiJiN4MjJCRjsiPjwhRU5USVRZIHh3ZWRnZSAiJiN4MjJDMDsiPjwhRU5USVRZIFdlZGdlICImI3gyMkMwOyI%2BPCFFTlRJVFkgYmlnd2VkZ2UgIiYjeDIyQzA7Ij48IUVOVElUWSB4dmVlICImI3gyMkMxOyI%2BPCFFTlRJVFkgVmVlICImI3gyMkMxOyI%2BPCFFTlRJVFkgYmlndmVlICImI3gyMkMxOyI%2BPCFFTlRJVFkgeGNhcCAiJiN4MjJDMjsiPjwhRU5USVRZIEludGVyc2VjdGlvbiAiJiN4MjJDMjsiPjwhRU5USVRZIGJpZ2NhcCAiJiN4MjJDMjsiPjwhRU5USVRZIHhjdXAgIiYjeDIyQzM7Ij48IUVOVElUWSBVbmlvbiAiJiN4MjJDMzsiPjwhRU5USVRZIGJpZ2N1cCAiJiN4MjJDMzsiPjwhRU5USVRZIGRpYW0gIiYjeDIyQzQ7Ij48IUVOVElUWSBkaWFtb25kICImI3gyMkM0OyI%2BPCFFTlRJVFkgRGlhbW9uZCAiJiN4MjJDNDsiPjwhRU5USVRZIHNkb3QgIiYjeDIyQzU7Ij48IUVOVElUWSBzc3RhcmYgIiYjeDIyQzY7Ij48IUVOVElUWSBTdGFyICImI3gyMkM2OyI%2BPCFFTlRJVFkgZGl2b254ICImI3gyMkM3OyI%2BPCFFTlRJVFkgZGl2aWRlb250aW1lcyAiJiN4MjJDNzsiPjwhRU5USVRZIGJvd3RpZSAiJiN4MjJDODsiPjwhRU5USVRZIGx0aW1lcyAiJiN4MjJDOTsiPjwhRU5USVRZIHJ0aW1lcyAiJiN4MjJDQTsiPjwhRU5USVRZIGx0aHJlZSAiJiN4MjJDQjsiPjwhRU5USVRZIGxlZnR0aHJlZXRpbWVzICImI3gyMkNCOyI%2BPCFFTlRJVFkgcnRocmVlICImI3gyMkNDOyI%2BPCFFTlRJVFkgcmlnaHR0aHJlZXRpbWVzICImI3gyMkNDOyI%2BPCFFTlRJVFkgYnNpbWUgIiYjeDIyQ0Q7Ij48IUVOVElUWSBiYWNrc2ltZXEgIiYjeDIyQ0Q7Ij48IUVOVElUWSBjdXZlZSAiJiN4MjJDRTsiPjwhRU5USVRZIGN1cmx5dmVlICImI3gyMkNFOyI%2BPCFFTlRJVFkgY3V3ZWQgIiYjeDIyQ0Y7Ij48IUVOVElUWSBjdXJseXdlZGdlICImI3gyMkNGOyI%2BPCFFTlRJVFkgU3ViICImI3gyMkQwOyI%2BPCFFTlRJVFkgU3Vic2V0ICImI3gyMkQwOyI%2BPCFFTlRJVFkgU3VwICImI3gyMkQxOyI%2BPCFFTlRJVFkgU3Vwc2V0ICImI3gyMkQxOyI%2BPCFFTlRJVFkgQ2FwICImI3gyMkQyOyI%2BPCFFTlRJVFkgQ3VwICImI3gyMkQzOyI%2BPCFFTlRJVFkgZm9yayAiJiN4MjJENDsiPjwhRU5USVRZIHBpdGNoZm9yayAiJiN4MjJENDsiPjwhRU5USVRZIGVwYXIgIiYjeDIyRDU7Ij48IUVOVElUWSBsdGRvdCAiJiN4MjJENjsiPjwhRU5USVRZIGxlc3Nkb3QgIiYjeDIyRDY7Ij48IUVOVElUWSBndGRvdCAiJiN4MjJENzsiPjwhRU5USVRZIGd0cmRvdCAiJiN4MjJENzsiPjwhRU5USVRZIExsICImI3gyMkQ4OyI%2BPCFFTlRJVFkgbkxsICImI3gyMkQ4OyYjeDMzODsiPjwhRU5USVRZIEdnICImI3gyMkQ5OyI%2BPCFFTlRJVFkgZ2dnICImI3gyMkQ5OyI%2BPCFFTlRJVFkgbkdnICImI3gyMkQ5OyYjeDMzODsiPjwhRU5USVRZIGxlZyAiJiN4MjJEQTsiPjwhRU5USVRZIExlc3NFcXVhbEdyZWF0ZXIgIiYjeDIyREE7Ij48IUVOVElUWSBsZXNzZXFndHIgIiYjeDIyREE7Ij48IUVOVElUWSBsZXNnICImI3gyMkRBOyYjeEZFMDA7Ij48IUVOVElUWSBnZWwgIiYjeDIyREI7Ij48IUVOVElUWSBndHJlcWxlc3MgIiYjeDIyREI7Ij48IUVOVElUWSBHcmVhdGVyRXF1YWxMZXNzICImI3gyMkRCOyI%2BPCFFTlRJVFkgZ2VzbCAiJiN4MjJEQjsmI3hGRTAwOyI%2BPCFFTlRJVFkgY3VlcHIgIiYjeDIyREU7Ij48IUVOVElUWSBjdXJseWVxcHJlYyAiJiN4MjJERTsiPjwhRU5USVRZIGN1ZXNjICImI3gyMkRGOyI%2BPCFFTlRJVFkgY3VybHllcXN1Y2MgIiYjeDIyREY7Ij48IUVOVElUWSBucHJjdWUgIiYjeDIyRTA7Ij48IUVOVElUWSBOb3RQcmVjZWRlc1NsYW50RXF1YWwgIiYjeDIyRTA7Ij48IUVOVElUWSBuc2NjdWUgIiYjeDIyRTE7Ij48IUVOVElUWSBOb3RTdWNjZWVkc1NsYW50RXF1YWwgIiYjeDIyRTE7Ij48IUVOVElUWSBuc3FzdWJlICImI3gyMkUyOyI%2BPCFFTlRJVFkgTm90U3F1YXJlU3Vic2V0RXF1YWwgIiYjeDIyRTI7Ij48IUVOVElUWSBuc3FzdXBlICImI3gyMkUzOyI%2BPCFFTlRJVFkgTm90U3F1YXJlU3VwZXJzZXRFcXVhbCAiJiN4MjJFMzsiPjwhRU5USVRZIGxuc2ltICImI3gyMkU2OyI%2BPCFFTlRJVFkgZ25zaW0gIiYjeDIyRTc7Ij48IUVOVElUWSBwcm5zaW0gIiYjeDIyRTg7Ij48IUVOVElUWSBwcmVjbnNpbSAiJiN4MjJFODsiPjwhRU5USVRZIHNjbnNpbSAiJiN4MjJFOTsiPjwhRU5USVRZIHN1Y2Nuc2ltICImI3gyMkU5OyI%2BPCFFTlRJVFkgbmx0cmkgIiYjeDIyRUE7Ij48IUVOVElUWSBudHJpYW5nbGVsZWZ0ICImI3gyMkVBOyI%2BPCFFTlRJVFkgTm90TGVmdFRyaWFuZ2xlICImI3gyMkVBOyI%2BPCFFTlRJVFkgbnJ0cmkgIiYjeDIyRUI7Ij48IUVOVElUWSBudHJpYW5nbGVyaWdodCAiJiN4MjJFQjsiPjwhRU5USVRZIE5vdFJpZ2h0VHJpYW5nbGUgIiYjeDIyRUI7Ij48IUVOVElUWSBubHRyaWUgIiYjeDIyRUM7Ij48IUVOVElUWSBudHJpYW5nbGVsZWZ0ZXEgIiYjeDIyRUM7Ij48IUVOVElUWSBOb3RMZWZ0VHJpYW5nbGVFcXVhbCAiJiN4MjJFQzsiPjwhRU5USVRZIG5ydHJpZSAiJiN4MjJFRDsiPjwhRU5USVRZIG50cmlhbmdsZXJpZ2h0ZXEgIiYjeDIyRUQ7Ij48IUVOVElUWSBOb3RSaWdodFRyaWFuZ2xlRXF1YWwgIiYjeDIyRUQ7Ij48IUVOVElUWSB2ZWxsaXAgIiYjeDIyRUU7Ij48IUVOVElUWSBjdGRvdCAiJiN4MjJFRjsiPjwhRU5USVRZIHV0ZG90ICImI3gyMkYwOyI%2BPCFFTlRJVFkgZHRkb3QgIiYjeDIyRjE7Ij48IUVOVElUWSBkaXNpbiAiJiN4MjJGMjsiPjwhRU5USVRZIGlzaW5zdiAiJiN4MjJGMzsiPjwhRU5USVRZIGlzaW5zICImI3gyMkY0OyI%2BPCFFTlRJVFkgaXNpbmRvdCAiJiN4MjJGNTsiPjwhRU5USVRZIG5vdGluZG90ICImI3gyMkY1OyYjeDMzODsiPjwhRU5USVRZIG5vdGludmMgIiYjeDIyRjY7Ij48IUVOVElUWSBub3RpbnZiICImI3gyMkY3OyI%2BPCFFTlRJVFkgaXNpbkUgIiYjeDIyRjk7Ij48IUVOVElUWSBub3RpbkUgIiYjeDIyRjk7JiN4MzM4OyI%2BPCFFTlRJVFkgbmlzZCAiJiN4MjJGQTsiPjwhRU5USVRZIHhuaXMgIiYjeDIyRkI7Ij48IUVOVElUWSBuaXMgIiYjeDIyRkM7Ij48IUVOVElUWSBub3RuaXZjICImI3gyMkZEOyI%2BPCFFTlRJVFkgbm90bml2YiAiJiN4MjJGRTsiPjwhRU5USVRZIGJhcndlZCAiJiN4MjMwNTsiPjwhRU5USVRZIGJhcndlZGdlICImI3gyMzA1OyI%2BPCFFTlRJVFkgQmFyd2VkICImI3gyMzA2OyI%2BPCFFTlRJVFkgZG91YmxlYmFyd2VkZ2UgIiYjeDIzMDY7Ij48IUVOVElUWSBsY2VpbCAiJiN4MjMwODsiPjwhRU5USVRZIExlZnRDZWlsaW5nICImI3gyMzA4OyI%2BPCFFTlRJVFkgcmNlaWwgIiYjeDIzMDk7Ij48IUVOVElUWSBSaWdodENlaWxpbmcgIiYjeDIzMDk7Ij48IUVOVElUWSBsZmxvb3IgIiYjeDIzMEE7Ij48IUVOVElUWSBMZWZ0Rmxvb3IgIiYjeDIzMEE7Ij48IUVOVElUWSByZmxvb3IgIiYjeDIzMEI7Ij48IUVOVElUWSBSaWdodEZsb29yICImI3gyMzBCOyI%2BPCFFTlRJVFkgZHJjcm9wICImI3gyMzBDOyI%2BPCFFTlRJVFkgZGxjcm9wICImI3gyMzBEOyI%2BPCFFTlRJVFkgdXJjcm9wICImI3gyMzBFOyI%2BPCFFTlRJVFkgdWxjcm9wICImI3gyMzBGOyI%2BPCFFTlRJVFkgYm5vdCAiJiN4MjMxMDsiPjwhRU5USVRZIHByb2ZsaW5lICImI3gyMzEyOyI%2BPCFFTlRJVFkgcHJvZnN1cmYgIiYjeDIzMTM7Ij48IUVOVElUWSB0ZWxyZWMgIiYjeDIzMTU7Ij48IUVOVElUWSB0YXJnZXQgIiYjeDIzMTY7Ij48IUVOVElUWSB1bGNvcm4gIiYjeDIzMUM7Ij48IUVOVElUWSB1bGNvcm5lciAiJiN4MjMxQzsiPjwhRU5USVRZIHVyY29ybiAiJiN4MjMxRDsiPjwhRU5USVRZIHVyY29ybmVyICImI3gyMzFEOyI%2BPCFFTlRJVFkgZGxjb3JuICImI3gyMzFFOyI%2BPCFFTlRJVFkgbGxjb3JuZXIgIiYjeDIzMUU7Ij48IUVOVElUWSBkcmNvcm4gIiYjeDIzMUY7Ij48IUVOVElUWSBscmNvcm5lciAiJiN4MjMxRjsiPjwhRU5USVRZIGZyb3duICImI3gyMzIyOyI%2BPCFFTlRJVFkgc2Zyb3duICImI3gyMzIyOyI%2BPCFFTlRJVFkgc21pbGUgIiYjeDIzMjM7Ij48IUVOVElUWSBzc21pbGUgIiYjeDIzMjM7Ij48IUVOVElUWSBjeWxjdHkgIiYjeDIzMkQ7Ij48IUVOVElUWSBwcm9mYWxhciAiJiN4MjMyRTsiPjwhRU5USVRZIHRvcGJvdCAiJiN4MjMzNjsiPjwhRU5USVRZIG92YmFyICImI3gyMzNEOyI%2BPCFFTlRJVFkgc29sYmFyICImI3gyMzNGOyI%2BPCFFTlRJVFkgYW5nemFyciAiJiN4MjM3QzsiPjwhRU5USVRZIGxtb3VzdCAiJiN4MjNCMDsiPjwhRU5USVRZIGxtb3VzdGFjaGUgIiYjeDIzQjA7Ij48IUVOVElUWSBybW91c3QgIiYjeDIzQjE7Ij48IUVOVElUWSBybW91c3RhY2hlICImI3gyM0IxOyI%2BPCFFTlRJVFkgdGJyayAiJiN4MjNCNDsiPjwhRU5USVRZIE92ZXJCcmFja2V0ICImI3gyM0I0OyI%2BPCFFTlRJVFkgYmJyayAiJiN4MjNCNTsiPjwhRU5USVRZIFVuZGVyQnJhY2tldCAiJiN4MjNCNTsiPjwhRU5USVRZIGJicmt0YnJrICImI3gyM0I2OyI%2BPCFFTlRJVFkgT3ZlclBhcmVudGhlc2lzICImI3gyM0RDOyI%2BPCFFTlRJVFkgVW5kZXJQYXJlbnRoZXNpcyAiJiN4MjNERDsiPjwhRU5USVRZIE92ZXJCcmFjZSAiJiN4MjNERTsiPjwhRU5USVRZIFVuZGVyQnJhY2UgIiYjeDIzREY7Ij48IUVOVElUWSB0cnBleml1bSAiJiN4MjNFMjsiPjwhRU5USVRZIGVsaW50ZXJzICImI3gyM0U3OyI%2BPCFFTlRJVFkgYmxhbmsgIiYjeDI0MjM7Ij48IUVOVElUWSBvUyAiJiN4MjRDODsiPjwhRU5USVRZIGNpcmNsZWRTICImI3gyNEM4OyI%2BPCFFTlRJVFkgYm94aCAiJiN4MjUwMDsiPjwhRU5USVRZIEhvcml6b250YWxMaW5lICImI3gyNTAwOyI%2BPCFFTlRJVFkgYm94diAiJiN4MjUwMjsiPjwhRU5USVRZIGJveGRyICImI3gyNTBDOyI%2BPCFFTlRJVFkgYm94ZGwgIiYjeDI1MTA7Ij48IUVOVElUWSBib3h1ciAiJiN4MjUxNDsiPjwhRU5USVRZIGJveHVsICImI3gyNTE4OyI%2BPCFFTlRJVFkgYm94dnIgIiYjeDI1MUM7Ij48IUVOVElUWSBib3h2bCAiJiN4MjUyNDsiPjwhRU5USVRZIGJveGhkICImI3gyNTJDOyI%2BPCFFTlRJVFkgYm94aHUgIiYjeDI1MzQ7Ij48IUVOVElUWSBib3h2aCAiJiN4MjUzQzsiPjwhRU5USVRZIGJveEggIiYjeDI1NTA7Ij48IUVOVElUWSBib3hWICImI3gyNTUxOyI%2BPCFFTlRJVFkgYm94ZFIgIiYjeDI1NTI7Ij48IUVOVElUWSBib3hEciAiJiN4MjU1MzsiPjwhRU5USVRZIGJveERSICImI3gyNTU0OyI%2BPCFFTlRJVFkgYm94ZEwgIiYjeDI1NTU7Ij48IUVOVElUWSBib3hEbCAiJiN4MjU1NjsiPjwhRU5USVRZIGJveERMICImI3gyNTU3OyI%2BPCFFTlRJVFkgYm94dVIgIiYjeDI1NTg7Ij48IUVOVElUWSBib3hVciAiJiN4MjU1OTsiPjwhRU5USVRZIGJveFVSICImI3gyNTVBOyI%2BPCFFTlRJVFkgYm94dUwgIiYjeDI1NUI7Ij48IUVOVElUWSBib3hVbCAiJiN4MjU1QzsiPjwhRU5USVRZIGJveFVMICImI3gyNTVEOyI%2BPCFFTlRJVFkgYm94dlIgIiYjeDI1NUU7Ij48IUVOVElUWSBib3hWciAiJiN4MjU1RjsiPjwhRU5USVRZIGJveFZSICImI3gyNTYwOyI%2BPCFFTlRJVFkgYm94dkwgIiYjeDI1NjE7Ij48IUVOVElUWSBib3hWbCAiJiN4MjU2MjsiPjwhRU5USVRZIGJveFZMICImI3gyNTYzOyI%2BPCFFTlRJVFkgYm94SGQgIiYjeDI1NjQ7Ij48IUVOVElUWSBib3hoRCAiJiN4MjU2NTsiPjwhRU5USVRZIGJveEhEICImI3gyNTY2OyI%2BPCFFTlRJVFkgYm94SHUgIiYjeDI1Njc7Ij48IUVOVElUWSBib3hoVSAiJiN4MjU2ODsiPjwhRU5USVRZIGJveEhVICImI3gyNTY5OyI%2BPCFFTlRJVFkgYm94dkggIiYjeDI1NkE7Ij48IUVOVElUWSBib3hWaCAiJiN4MjU2QjsiPjwhRU5USVRZIGJveFZIICImI3gyNTZDOyI%2BPCFFTlRJVFkgdWhibGsgIiYjeDI1ODA7Ij48IUVOVElUWSBsaGJsayAiJiN4MjU4NDsiPjwhRU5USVRZIGJsb2NrICImI3gyNTg4OyI%2BPCFFTlRJVFkgYmxrMTQgIiYjeDI1OTE7Ij48IUVOVElUWSBibGsxMiAiJiN4MjU5MjsiPjwhRU5USVRZIGJsazM0ICImI3gyNTkzOyI%2BPCFFTlRJVFkgc3F1ICImI3gyNUExOyI%2BPCFFTlRJVFkgc3F1YXJlICImI3gyNUExOyI%2BPCFFTlRJVFkgU3F1YXJlICImI3gyNUExOyI%2BPCFFTlRJVFkgc3F1ZiAiJiN4MjVBQTsiPjwhRU5USVRZIHNxdWFyZiAiJiN4MjVBQTsiPjwhRU5USVRZIGJsYWNrc3F1YXJlICImI3gyNUFBOyI%2BPCFFTlRJVFkgRmlsbGVkVmVyeVNtYWxsU3F1YXJlICImI3gyNUFBOyI%2BPCFFTlRJVFkgRW1wdHlWZXJ5U21hbGxTcXVhcmUgIiYjeDI1QUI7Ij48IUVOVElUWSByZWN0ICImI3gyNUFEOyI%2BPCFFTlRJVFkgbWFya2VyICImI3gyNUFFOyI%2BPCFFTlRJVFkgZmx0bnMgIiYjeDI1QjE7Ij48IUVOVElUWSB4dXRyaSAiJiN4MjVCMzsiPjwhRU5USVRZIGJpZ3RyaWFuZ2xldXAgIiYjeDI1QjM7Ij48IUVOVElUWSB1dHJpZiAiJiN4MjVCNDsiPjwhRU5USVRZIGJsYWNrdHJpYW5nbGUgIiYjeDI1QjQ7Ij48IUVOVElUWSB1dHJpICImI3gyNUI1OyI%2BPCFFTlRJVFkgdHJpYW5nbGUgIiYjeDI1QjU7Ij48IUVOVElUWSBydHJpZiAiJiN4MjVCODsiPjwhRU5USVRZIGJsYWNrdHJpYW5nbGVyaWdodCAiJiN4MjVCODsiPjwhRU5USVRZIHJ0cmkgIiYjeDI1Qjk7Ij48IUVOVElUWSB0cmlhbmdsZXJpZ2h0ICImI3gyNUI5OyI%2BPCFFTlRJVFkgeGR0cmkgIiYjeDI1QkQ7Ij48IUVOVElUWSBiaWd0cmlhbmdsZWRvd24gIiYjeDI1QkQ7Ij48IUVOVElUWSBkdHJpZiAiJiN4MjVCRTsiPjwhRU5USVRZIGJsYWNrdHJpYW5nbGVkb3duICImI3gyNUJFOyI%2BPCFFTlRJVFkgZHRyaSAiJiN4MjVCRjsiPjwhRU5USVRZIHRyaWFuZ2xlZG93biAiJiN4MjVCRjsiPjwhRU5USVRZIGx0cmlmICImI3gyNUMyOyI%2BPCFFTlRJVFkgYmxhY2t0cmlhbmdsZWxlZnQgIiYjeDI1QzI7Ij48IUVOVElUWSBsdHJpICImI3gyNUMzOyI%2BPCFFTlRJVFkgdHJpYW5nbGVsZWZ0ICImI3gyNUMzOyI%2BPCFFTlRJVFkgbG96ICImI3gyNUNBOyI%2BPCFFTlRJVFkgbG96ZW5nZSAiJiN4MjVDQTsiPjwhRU5USVRZIGNpciAiJiN4MjVDQjsiPjwhRU5USVRZIHRyaWRvdCAiJiN4MjVFQzsiPjwhRU5USVRZIHhjaXJjICImI3gyNUVGOyI%2BPCFFTlRJVFkgYmlnY2lyYyAiJiN4MjVFRjsiPjwhRU5USVRZIHVsdHJpICImI3gyNUY4OyI%2BPCFFTlRJVFkgdXJ0cmkgIiYjeDI1Rjk7Ij48IUVOVElUWSBsbHRyaSAiJiN4MjVGQTsiPjwhRU5USVRZIEVtcHR5U21hbGxTcXVhcmUgIiYjeDI1RkI7Ij48IUVOVElUWSBGaWxsZWRTbWFsbFNxdWFyZSAiJiN4MjVGQzsiPjwhRU5USVRZIHN0YXJmICImI3gyNjA1OyI%2BPCFFTlRJVFkgYmlnc3RhciAiJiN4MjYwNTsiPjwhRU5USVRZIHN0YXIgIiYjeDI2MDY7Ij48IUVOVElUWSBwaG9uZSAiJiN4MjYwRTsiPjwhRU5USVRZIGZlbWFsZSAiJiN4MjY0MDsiPjwhRU5USVRZIG1hbGUgIiYjeDI2NDI7Ij48IUVOVElUWSBzcGFkZXMgIiYjeDI2NjA7Ij48IUVOVElUWSBzcGFkZXN1aXQgIiYjeDI2NjA7Ij48IUVOVElUWSBjbHVicyAiJiN4MjY2MzsiPjwhRU5USVRZIGNsdWJzdWl0ICImI3gyNjYzOyI%2BPCFFTlRJVFkgaGVhcnRzICImI3gyNjY1OyI%2BPCFFTlRJVFkgaGVhcnRzdWl0ICImI3gyNjY1OyI%2BPCFFTlRJVFkgZGlhbXMgIiYjeDI2NjY7Ij48IUVOVElUWSBkaWFtb25kc3VpdCAiJiN4MjY2NjsiPjwhRU5USVRZIHN1bmcgIiYjeDI2NkE7Ij48IUVOVElUWSBmbGF0ICImI3gyNjZEOyI%2BPCFFTlRJVFkgbmF0dXIgIiYjeDI2NkU7Ij48IUVOVElUWSBuYXR1cmFsICImI3gyNjZFOyI%2BPCFFTlRJVFkgc2hhcnAgIiYjeDI2NkY7Ij48IUVOVElUWSBjaGVjayAiJiN4MjcxMzsiPjwhRU5USVRZIGNoZWNrbWFyayAiJiN4MjcxMzsiPjwhRU5USVRZIGNyb3NzICImI3gyNzE3OyI%2BPCFFTlRJVFkgbWFsdCAiJiN4MjcyMDsiPjwhRU5USVRZIG1hbHRlc2UgIiYjeDI3MjA7Ij48IUVOVElUWSBzZXh0ICImI3gyNzM2OyI%2BPCFFTlRJVFkgVmVydGljYWxTZXBhcmF0b3IgIiYjeDI3NTg7Ij48IUVOVElUWSBsYmJyayAiJiN4Mjc3MjsiPjwhRU5USVRZIHJiYnJrICImI3gyNzczOyI%2BPCFFTlRJVFkgYnNvbGhzdWIgIiYjeDI3Qzg7Ij48IUVOVElUWSBzdXBoc29sICImI3gyN0M5OyI%2BPCFFTlRJVFkgbG9icmsgIiYjeDI3RTY7Ij48IUVOVElUWSBMZWZ0RG91YmxlQnJhY2tldCAiJiN4MjdFNjsiPjwhRU5USVRZIHJvYnJrICImI3gyN0U3OyI%2BPCFFTlRJVFkgUmlnaHREb3VibGVCcmFja2V0ICImI3gyN0U3OyI%2BPCFFTlRJVFkgbGFuZyAiJiN4MjdFODsiPjwhRU5USVRZIExlZnRBbmdsZUJyYWNrZXQgIiYjeDI3RTg7Ij48IUVOVElUWSBsYW5nbGUgIiYjeDI3RTg7Ij48IUVOVElUWSByYW5nICImI3gyN0U5OyI%2BPCFFTlRJVFkgUmlnaHRBbmdsZUJyYWNrZXQgIiYjeDI3RTk7Ij48IUVOVElUWSByYW5nbGUgIiYjeDI3RTk7Ij48IUVOVElUWSBMYW5nICImI3gyN0VBOyI%2BPCFFTlRJVFkgUmFuZyAiJiN4MjdFQjsiPjwhRU5USVRZIGxvYW5nICImI3gyN0VDOyI%2BPCFFTlRJVFkgcm9hbmcgIiYjeDI3RUQ7Ij48IUVOVElUWSB4bGFyciAiJiN4MjdGNTsiPjwhRU5USVRZIGxvbmdsZWZ0YXJyb3cgIiYjeDI3RjU7Ij48IUVOVElUWSBMb25nTGVmdEFycm93ICImI3gyN0Y1OyI%2BPCFFTlRJVFkgeHJhcnIgIiYjeDI3RjY7Ij48IUVOVElUWSBsb25ncmlnaHRhcnJvdyAiJiN4MjdGNjsiPjwhRU5USVRZIExvbmdSaWdodEFycm93ICImI3gyN0Y2OyI%2BPCFFTlRJVFkgeGhhcnIgIiYjeDI3Rjc7Ij48IUVOVElUWSBsb25nbGVmdHJpZ2h0YXJyb3cgIiYjeDI3Rjc7Ij48IUVOVElUWSBMb25nTGVmdFJpZ2h0QXJyb3cgIiYjeDI3Rjc7Ij48IUVOVElUWSB4bEFyciAiJiN4MjdGODsiPjwhRU5USVRZIExvbmdsZWZ0YXJyb3cgIiYjeDI3Rjg7Ij48IUVOVElUWSBEb3VibGVMb25nTGVmdEFycm93ICImI3gyN0Y4OyI%2BPCFFTlRJVFkgeHJBcnIgIiYjeDI3Rjk7Ij48IUVOVElUWSBMb25ncmlnaHRhcnJvdyAiJiN4MjdGOTsiPjwhRU5USVRZIERvdWJsZUxvbmdSaWdodEFycm93ICImI3gyN0Y5OyI%2BPCFFTlRJVFkgeGhBcnIgIiYjeDI3RkE7Ij48IUVOVElUWSBMb25nbGVmdHJpZ2h0YXJyb3cgIiYjeDI3RkE7Ij48IUVOVElUWSBEb3VibGVMb25nTGVmdFJpZ2h0QXJyb3cgIiYjeDI3RkE7Ij48IUVOVElUWSB4bWFwICImI3gyN0ZDOyI%2BPCFFTlRJVFkgbG9uZ21hcHN0byAiJiN4MjdGQzsiPjwhRU5USVRZIGR6aWdyYXJyICImI3gyN0ZGOyI%2BPCFFTlRJVFkgbnZsQXJyICImI3gyOTAyOyI%2BPCFFTlRJVFkgbnZyQXJyICImI3gyOTAzOyI%2BPCFFTlRJVFkgbnZIYXJyICImI3gyOTA0OyI%2BPCFFTlRJVFkgTWFwICImI3gyOTA1OyI%2BPCFFTlRJVFkgbGJhcnIgIiYjeDI5MEM7Ij48IUVOVElUWSByYmFyciAiJiN4MjkwRDsiPjwhRU5USVRZIGJrYXJvdyAiJiN4MjkwRDsiPjwhRU5USVRZIGxCYXJyICImI3gyOTBFOyI%2BPCFFTlRJVFkgckJhcnIgIiYjeDI5MEY7Ij48IUVOVElUWSBkYmthcm93ICImI3gyOTBGOyI%2BPCFFTlRJVFkgUkJhcnIgIiYjeDI5MTA7Ij48IUVOVElUWSBkcmJrYXJvdyAiJiN4MjkxMDsiPjwhRU5USVRZIEREb3RyYWhkICImI3gyOTExOyI%2BPCFFTlRJVFkgVXBBcnJvd0JhciAiJiN4MjkxMjsiPjwhRU5USVRZIERvd25BcnJvd0JhciAiJiN4MjkxMzsiPjwhRU5USVRZIFJhcnJ0bCAiJiN4MjkxNjsiPjwhRU5USVRZIGxhdGFpbCAiJiN4MjkxOTsiPjwhRU5USVRZIHJhdGFpbCAiJiN4MjkxQTsiPjwhRU5USVRZIGxBdGFpbCAiJiN4MjkxQjsiPjwhRU5USVRZIHJBdGFpbCAiJiN4MjkxQzsiPjwhRU5USVRZIGxhcnJmcyAiJiN4MjkxRDsiPjwhRU5USVRZIHJhcnJmcyAiJiN4MjkxRTsiPjwhRU5USVRZIGxhcnJiZnMgIiYjeDI5MUY7Ij48IUVOVElUWSByYXJyYmZzICImI3gyOTIwOyI%2BPCFFTlRJVFkgbndhcmhrICImI3gyOTIzOyI%2BPCFFTlRJVFkgbmVhcmhrICImI3gyOTI0OyI%2BPCFFTlRJVFkgc2VhcmhrICImI3gyOTI1OyI%2BPCFFTlRJVFkgaGtzZWFyb3cgIiYjeDI5MjU7Ij48IUVOVElUWSBzd2FyaGsgIiYjeDI5MjY7Ij48IUVOVElUWSBoa3N3YXJvdyAiJiN4MjkyNjsiPjwhRU5USVRZIG53bmVhciAiJiN4MjkyNzsiPjwhRU5USVRZIG5lc2VhciAiJiN4MjkyODsiPjwhRU5USVRZIHRvZWEgIiYjeDI5Mjg7Ij48IUVOVElUWSBzZXN3YXIgIiYjeDI5Mjk7Ij48IUVOVElUWSB0b3NhICImI3gyOTI5OyI%2BPCFFTlRJVFkgc3dud2FyICImI3gyOTJBOyI%2BPCFFTlRJVFkgcmFycmMgIiYjeDI5MzM7Ij48IUVOVElUWSBucmFycmMgIiYjeDI5MzM7JiN4MzM4OyI%2BPCFFTlRJVFkgY3VkYXJyciAiJiN4MjkzNTsiPjwhRU5USVRZIGxkY2EgIiYjeDI5MzY7Ij48IUVOVElUWSByZGNhICImI3gyOTM3OyI%2BPCFFTlRJVFkgY3VkYXJybCAiJiN4MjkzODsiPjwhRU5USVRZIGxhcnJwbCAiJiN4MjkzOTsiPjwhRU5USVRZIGN1cmFycm0gIiYjeDI5M0M7Ij48IUVOVElUWSBjdWxhcnJwICImI3gyOTNEOyI%2BPCFFTlRJVFkgcmFycnBsICImI3gyOTQ1OyI%2BPCFFTlRJVFkgaGFycmNpciAiJiN4Mjk0ODsiPjwhRU5USVRZIFVhcnJvY2lyICImI3gyOTQ5OyI%2BPCFFTlRJVFkgbHVyZHNoYXIgIiYjeDI5NEE7Ij48IUVOVElUWSBsZHJ1c2hhciAiJiN4Mjk0QjsiPjwhRU5USVRZIExlZnRSaWdodFZlY3RvciAiJiN4Mjk0RTsiPjwhRU5USVRZIFJpZ2h0VXBEb3duVmVjdG9yICImI3gyOTRGOyI%2BPCFFTlRJVFkgRG93bkxlZnRSaWdodFZlY3RvciAiJiN4Mjk1MDsiPjwhRU5USVRZIExlZnRVcERvd25WZWN0b3IgIiYjeDI5NTE7Ij48IUVOVElUWSBMZWZ0VmVjdG9yQmFyICImI3gyOTUyOyI%2BPCFFTlRJVFkgUmlnaHRWZWN0b3JCYXIgIiYjeDI5NTM7Ij48IUVOVElUWSBSaWdodFVwVmVjdG9yQmFyICImI3gyOTU0OyI%2BPCFFTlRJVFkgUmlnaHREb3duVmVjdG9yQmFyICImI3gyOTU1OyI%2BPCFFTlRJVFkgRG93bkxlZnRWZWN0b3JCYXIgIiYjeDI5NTY7Ij48IUVOVElUWSBEb3duUmlnaHRWZWN0b3JCYXIgIiYjeDI5NTc7Ij48IUVOVElUWSBMZWZ0VXBWZWN0b3JCYXIgIiYjeDI5NTg7Ij48IUVOVElUWSBMZWZ0RG93blZlY3RvckJhciAiJiN4Mjk1OTsiPjwhRU5USVRZIExlZnRUZWVWZWN0b3IgIiYjeDI5NUE7Ij48IUVOVElUWSBSaWdodFRlZVZlY3RvciAiJiN4Mjk1QjsiPjwhRU5USVRZIFJpZ2h0VXBUZWVWZWN0b3IgIiYjeDI5NUM7Ij48IUVOVElUWSBSaWdodERvd25UZWVWZWN0b3IgIiYjeDI5NUQ7Ij48IUVOVElUWSBEb3duTGVmdFRlZVZlY3RvciAiJiN4Mjk1RTsiPjwhRU5USVRZIERvd25SaWdodFRlZVZlY3RvciAiJiN4Mjk1RjsiPjwhRU5USVRZIExlZnRVcFRlZVZlY3RvciAiJiN4Mjk2MDsiPjwhRU5USVRZIExlZnREb3duVGVlVmVjdG9yICImI3gyOTYxOyI%2BPCFFTlRJVFkgbEhhciAiJiN4Mjk2MjsiPjwhRU5USVRZIHVIYXIgIiYjeDI5NjM7Ij48IUVOVElUWSBySGFyICImI3gyOTY0OyI%2BPCFFTlRJVFkgZEhhciAiJiN4Mjk2NTsiPjwhRU5USVRZIGx1cnVoYXIgIiYjeDI5NjY7Ij48IUVOVElUWSBsZHJkaGFyICImI3gyOTY3OyI%2BPCFFTlRJVFkgcnVsdWhhciAiJiN4Mjk2ODsiPjwhRU5USVRZIHJkbGRoYXIgIiYjeDI5Njk7Ij48IUVOVElUWSBsaGFydWwgIiYjeDI5NkE7Ij48IUVOVElUWSBsbGhhcmQgIiYjeDI5NkI7Ij48IUVOVElUWSByaGFydWwgIiYjeDI5NkM7Ij48IUVOVElUWSBscmhhcmQgIiYjeDI5NkQ7Ij48IUVOVElUWSB1ZGhhciAiJiN4Mjk2RTsiPjwhRU5USVRZIFVwRXF1aWxpYnJpdW0gIiYjeDI5NkU7Ij48IUVOVElUWSBkdWhhciAiJiN4Mjk2RjsiPjwhRU5USVRZIFJldmVyc2VVcEVxdWlsaWJyaXVtICImI3gyOTZGOyI%2BPCFFTlRJVFkgUm91bmRJbXBsaWVzICImI3gyOTcwOyI%2BPCFFTlRJVFkgZXJhcnIgIiYjeDI5NzE7Ij48IUVOVElUWSBzaW1yYXJyICImI3gyOTcyOyI%2BPCFFTlRJVFkgbGFycnNpbSAiJiN4Mjk3MzsiPjwhRU5USVRZIHJhcnJzaW0gIiYjeDI5NzQ7Ij48IUVOVElUWSByYXJyYXAgIiYjeDI5NzU7Ij48IUVOVElUWSBsdGxhcnIgIiYjeDI5NzY7Ij48IUVOVElUWSBndHJhcnIgIiYjeDI5Nzg7Ij48IUVOVElUWSBzdWJyYXJyICImI3gyOTc5OyI%2BPCFFTlRJVFkgc3VwbGFyciAiJiN4Mjk3QjsiPjwhRU5USVRZIGxmaXNodCAiJiN4Mjk3QzsiPjwhRU5USVRZIHJmaXNodCAiJiN4Mjk3RDsiPjwhRU5USVRZIHVmaXNodCAiJiN4Mjk3RTsiPjwhRU5USVRZIGRmaXNodCAiJiN4Mjk3RjsiPjwhRU5USVRZIGxvcGFyICImI3gyOTg1OyI%2BPCFFTlRJVFkgcm9wYXIgIiYjeDI5ODY7Ij48IUVOVElUWSBsYnJrZSAiJiN4Mjk4QjsiPjwhRU5USVRZIHJicmtlICImI3gyOThDOyI%2BPCFFTlRJVFkgbGJya3NsdSAiJiN4Mjk4RDsiPjwhRU5USVRZIHJicmtzbGQgIiYjeDI5OEU7Ij48IUVOVElUWSBsYnJrc2xkICImI3gyOThGOyI%2BPCFFTlRJVFkgcmJya3NsdSAiJiN4Mjk5MDsiPjwhRU5USVRZIGxhbmdkICImI3gyOTkxOyI%2BPCFFTlRJVFkgcmFuZ2QgIiYjeDI5OTI7Ij48IUVOVElUWSBscGFybHQgIiYjeDI5OTM7Ij48IUVOVElUWSBycGFyZ3QgIiYjeDI5OTQ7Ij48IUVOVElUWSBndGxQYXIgIiYjeDI5OTU7Ij48IUVOVElUWSBsdHJQYXIgIiYjeDI5OTY7Ij48IUVOVElUWSB2emlnemFnICImI3gyOTlBOyI%2BPCFFTlRJVFkgdmFuZ3J0ICImI3gyOTlDOyI%2BPCFFTlRJVFkgYW5ncnR2YmQgIiYjeDI5OUQ7Ij48IUVOVElUWSBhbmdlICImI3gyOUE0OyI%2BPCFFTlRJVFkgcmFuZ2UgIiYjeDI5QTU7Ij48IUVOVElUWSBkd2FuZ2xlICImI3gyOUE2OyI%2BPCFFTlRJVFkgdXdhbmdsZSAiJiN4MjlBNzsiPjwhRU5USVRZIGFuZ21zZGFhICImI3gyOUE4OyI%2BPCFFTlRJVFkgYW5nbXNkYWIgIiYjeDI5QTk7Ij48IUVOVElUWSBhbmdtc2RhYyAiJiN4MjlBQTsiPjwhRU5USVRZIGFuZ21zZGFkICImI3gyOUFCOyI%2BPCFFTlRJVFkgYW5nbXNkYWUgIiYjeDI5QUM7Ij48IUVOVElUWSBhbmdtc2RhZiAiJiN4MjlBRDsiPjwhRU5USVRZIGFuZ21zZGFnICImI3gyOUFFOyI%2BPCFFTlRJVFkgYW5nbXNkYWggIiYjeDI5QUY7Ij48IUVOVElUWSBiZW1wdHl2ICImI3gyOUIwOyI%2BPCFFTlRJVFkgZGVtcHR5diAiJiN4MjlCMTsiPjwhRU5USVRZIGNlbXB0eXYgIiYjeDI5QjI7Ij48IUVOVElUWSByYWVtcHR5diAiJiN4MjlCMzsiPjwhRU5USVRZIGxhZW1wdHl2ICImI3gyOUI0OyI%2BPCFFTlRJVFkgb2hiYXIgIiYjeDI5QjU7Ij48IUVOVElUWSBvbWlkICImI3gyOUI2OyI%2BPCFFTlRJVFkgb3BhciAiJiN4MjlCNzsiPjwhRU5USVRZIG9wZXJwICImI3gyOUI5OyI%2BPCFFTlRJVFkgb2xjcm9zcyAiJiN4MjlCQjsiPjwhRU5USVRZIG9kc29sZCAiJiN4MjlCQzsiPjwhRU5USVRZIG9sY2lyICImI3gyOUJFOyI%2BPCFFTlRJVFkgb2ZjaXIgIiYjeDI5QkY7Ij48IUVOVElUWSBvbHQgIiYjeDI5QzA7Ij48IUVOVElUWSBvZ3QgIiYjeDI5QzE7Ij48IUVOVElUWSBjaXJzY2lyICImI3gyOUMyOyI%2BPCFFTlRJVFkgY2lyRSAiJiN4MjlDMzsiPjwhRU5USVRZIHNvbGIgIiYjeDI5QzQ7Ij48IUVOVElUWSBic29sYiAiJiN4MjlDNTsiPjwhRU5USVRZIGJveGJveCAiJiN4MjlDOTsiPjwhRU5USVRZIHRyaXNiICImI3gyOUNEOyI%2BPCFFTlRJVFkgcnRyaWx0cmkgIiYjeDI5Q0U7Ij48IUVOVElUWSBMZWZ0VHJpYW5nbGVCYXIgIiYjeDI5Q0Y7Ij48IUVOVElUWSBOb3RMZWZ0VHJpYW5nbGVCYXIgIiYjeDI5Q0Y7JiN4MzM4OyI%2BPCFFTlRJVFkgUmlnaHRUcmlhbmdsZUJhciAiJiN4MjlEMDsiPjwhRU5USVRZIE5vdFJpZ2h0VHJpYW5nbGVCYXIgIiYjeDI5RDA7JiN4MzM4OyI%2BPCFFTlRJVFkgaWluZmluICImI3gyOURDOyI%2BPCFFTlRJVFkgaW5maW50aWUgIiYjeDI5REQ7Ij48IUVOVElUWSBudmluZmluICImI3gyOURFOyI%2BPCFFTlRJVFkgZXBhcnNsICImI3gyOUUzOyI%2BPCFFTlRJVFkgc21lcGFyc2wgIiYjeDI5RTQ7Ij48IUVOVElUWSBlcXZwYXJzbCAiJiN4MjlFNTsiPjwhRU5USVRZIGxvemYgIiYjeDI5RUI7Ij48IUVOVElUWSBibGFja2xvemVuZ2UgIiYjeDI5RUI7Ij48IUVOVElUWSBSdWxlRGVsYXllZCAiJiN4MjlGNDsiPjwhRU5USVRZIGRzb2wgIiYjeDI5RjY7Ij48IUVOVElUWSB4b2RvdCAiJiN4MkEwMDsiPjwhRU5USVRZIGJpZ29kb3QgIiYjeDJBMDA7Ij48IUVOVElUWSB4b3BsdXMgIiYjeDJBMDE7Ij48IUVOVElUWSBiaWdvcGx1cyAiJiN4MkEwMTsiPjwhRU5USVRZIHhvdGltZSAiJiN4MkEwMjsiPjwhRU5USVRZIGJpZ290aW1lcyAiJiN4MkEwMjsiPjwhRU5USVRZIHh1cGx1cyAiJiN4MkEwNDsiPjwhRU5USVRZIGJpZ3VwbHVzICImI3gyQTA0OyI%2BPCFFTlRJVFkgeHNxY3VwICImI3gyQTA2OyI%2BPCFFTlRJVFkgYmlnc3FjdXAgIiYjeDJBMDY7Ij48IUVOVElUWSBxaW50ICImI3gyQTBDOyI%2BPCFFTlRJVFkgaWlpaW50ICImI3gyQTBDOyI%2BPCFFTlRJVFkgZnBhcnRpbnQgIiYjeDJBMEQ7Ij48IUVOVElUWSBjaXJmbmludCAiJiN4MkExMDsiPjwhRU5USVRZIGF3aW50ICImI3gyQTExOyI%2BPCFFTlRJVFkgcnBwb2xpbnQgIiYjeDJBMTI7Ij48IUVOVElUWSBzY3BvbGludCAiJiN4MkExMzsiPjwhRU5USVRZIG5wb2xpbnQgIiYjeDJBMTQ7Ij48IUVOVElUWSBwb2ludGludCAiJiN4MkExNTsiPjwhRU5USVRZIHF1YXRpbnQgIiYjeDJBMTY7Ij48IUVOVElUWSBpbnRsYXJoayAiJiN4MkExNzsiPjwhRU5USVRZIHBsdXNjaXIgIiYjeDJBMjI7Ij48IUVOVElUWSBwbHVzYWNpciAiJiN4MkEyMzsiPjwhRU5USVRZIHNpbXBsdXMgIiYjeDJBMjQ7Ij48IUVOVElUWSBwbHVzZHUgIiYjeDJBMjU7Ij48IUVOVElUWSBwbHVzc2ltICImI3gyQTI2OyI%2BPCFFTlRJVFkgcGx1c3R3byAiJiN4MkEyNzsiPjwhRU5USVRZIG1jb21tYSAiJiN4MkEyOTsiPjwhRU5USVRZIG1pbnVzZHUgIiYjeDJBMkE7Ij48IUVOVElUWSBsb3BsdXMgIiYjeDJBMkQ7Ij48IUVOVElUWSByb3BsdXMgIiYjeDJBMkU7Ij48IUVOVElUWSBDcm9zcyAiJiN4MkEyRjsiPjwhRU5USVRZIHRpbWVzZCAiJiN4MkEzMDsiPjwhRU5USVRZIHRpbWVzYmFyICImI3gyQTMxOyI%2BPCFFTlRJVFkgc21hc2hwICImI3gyQTMzOyI%2BPCFFTlRJVFkgbG90aW1lcyAiJiN4MkEzNDsiPjwhRU5USVRZIHJvdGltZXMgIiYjeDJBMzU7Ij48IUVOVElUWSBvdGltZXNhcyAiJiN4MkEzNjsiPjwhRU5USVRZIE90aW1lcyAiJiN4MkEzNzsiPjwhRU5USVRZIG9kaXYgIiYjeDJBMzg7Ij48IUVOVElUWSB0cmlwbHVzICImI3gyQTM5OyI%2BPCFFTlRJVFkgdHJpbWludXMgIiYjeDJBM0E7Ij48IUVOVElUWSB0cml0aW1lICImI3gyQTNCOyI%2BPCFFTlRJVFkgaXByb2QgIiYjeDJBM0M7Ij48IUVOVElUWSBpbnRwcm9kICImI3gyQTNDOyI%2BPCFFTlRJVFkgYW1hbGcgIiYjeDJBM0Y7Ij48IUVOVElUWSBjYXBkb3QgIiYjeDJBNDA7Ij48IUVOVElUWSBuY3VwICImI3gyQTQyOyI%2BPCFFTlRJVFkgbmNhcCAiJiN4MkE0MzsiPjwhRU5USVRZIGNhcGFuZCAiJiN4MkE0NDsiPjwhRU5USVRZIGN1cG9yICImI3gyQTQ1OyI%2BPCFFTlRJVFkgY3VwY2FwICImI3gyQTQ2OyI%2BPCFFTlRJVFkgY2FwY3VwICImI3gyQTQ3OyI%2BPCFFTlRJVFkgY3VwYnJjYXAgIiYjeDJBNDg7Ij48IUVOVElUWSBjYXBicmN1cCAiJiN4MkE0OTsiPjwhRU5USVRZIGN1cGN1cCAiJiN4MkE0QTsiPjwhRU5USVRZIGNhcGNhcCAiJiN4MkE0QjsiPjwhRU5USVRZIGNjdXBzICImI3gyQTRDOyI%2BPCFFTlRJVFkgY2NhcHMgIiYjeDJBNEQ7Ij48IUVOVElUWSBjY3Vwc3NtICImI3gyQTUwOyI%2BPCFFTlRJVFkgQW5kICImI3gyQTUzOyI%2BPCFFTlRJVFkgT3IgIiYjeDJBNTQ7Ij48IUVOVElUWSBhbmRhbmQgIiYjeDJBNTU7Ij48IUVOVElUWSBvcm9yICImI3gyQTU2OyI%2BPCFFTlRJVFkgb3JzbG9wZSAiJiN4MkE1NzsiPjwhRU5USVRZIGFuZHNsb3BlICImI3gyQTU4OyI%2BPCFFTlRJVFkgYW5kdiAiJiN4MkE1QTsiPjwhRU5USVRZIG9ydiAiJiN4MkE1QjsiPjwhRU5USVRZIGFuZGQgIiYjeDJBNUM7Ij48IUVOVElUWSBvcmQgIiYjeDJBNUQ7Ij48IUVOVElUWSB3ZWRiYXIgIiYjeDJBNUY7Ij48IUVOVElUWSBzZG90ZSAiJiN4MkE2NjsiPjwhRU5USVRZIHNpbWRvdCAiJiN4MkE2QTsiPjwhRU5USVRZIGNvbmdkb3QgIiYjeDJBNkQ7Ij48IUVOVElUWSBuY29uZ2RvdCAiJiN4MkE2RDsmI3gzMzg7Ij48IUVOVElUWSBlYXN0ZXIgIiYjeDJBNkU7Ij48IUVOVElUWSBhcGFjaXIgIiYjeDJBNkY7Ij48IUVOVElUWSBhcEUgIiYjeDJBNzA7Ij48IUVOVElUWSBuYXBFICImI3gyQTcwOyYjeDMzODsiPjwhRU5USVRZIGVwbHVzICImI3gyQTcxOyI%2BPCFFTlRJVFkgcGx1c2UgIiYjeDJBNzI7Ij48IUVOVElUWSBFc2ltICImI3gyQTczOyI%2BPCFFTlRJVFkgQ29sb25lICImI3gyQTc0OyI%2BPCFFTlRJVFkgRXF1YWwgIiYjeDJBNzU7Ij48IUVOVElUWSBlRERvdCAiJiN4MkE3NzsiPjwhRU5USVRZIGRkb3RzZXEgIiYjeDJBNzc7Ij48IUVOVElUWSBlcXVpdkREICImI3gyQTc4OyI%2BPCFFTlRJVFkgbHRjaXIgIiYjeDJBNzk7Ij48IUVOVElUWSBndGNpciAiJiN4MkE3QTsiPjwhRU5USVRZIGx0cXVlc3QgIiYjeDJBN0I7Ij48IUVOVElUWSBndHF1ZXN0ICImI3gyQTdDOyI%2BPCFFTlRJVFkgbGVzICImI3gyQTdEOyI%2BPCFFTlRJVFkgTGVzc1NsYW50RXF1YWwgIiYjeDJBN0Q7Ij48IUVOVElUWSBsZXFzbGFudCAiJiN4MkE3RDsiPjwhRU5USVRZIG5sZXMgIiYjeDJBN0Q7JiN4MzM4OyI%2BPCFFTlRJVFkgTm90TGVzc1NsYW50RXF1YWwgIiYjeDJBN0Q7JiN4MzM4OyI%2BPCFFTlRJVFkgbmxlcXNsYW50ICImI3gyQTdEOyYjeDMzODsiPjwhRU5USVRZIGdlcyAiJiN4MkE3RTsiPjwhRU5USVRZIEdyZWF0ZXJTbGFudEVxdWFsICImI3gyQTdFOyI%2BPCFFTlRJVFkgZ2Vxc2xhbnQgIiYjeDJBN0U7Ij48IUVOVElUWSBuZ2VzICImI3gyQTdFOyYjeDMzODsiPjwhRU5USVRZIE5vdEdyZWF0ZXJTbGFudEVxdWFsICImI3gyQTdFOyYjeDMzODsiPjwhRU5USVRZIG5nZXFzbGFudCAiJiN4MkE3RTsmI3gzMzg7Ij48IUVOVElUWSBsZXNkb3QgIiYjeDJBN0Y7Ij48IUVOVElUWSBnZXNkb3QgIiYjeDJBODA7Ij48IUVOVElUWSBsZXNkb3RvICImI3gyQTgxOyI%2BPCFFTlRJVFkgZ2VzZG90byAiJiN4MkE4MjsiPjwhRU5USVRZIGxlc2RvdG9yICImI3gyQTgzOyI%2BPCFFTlRJVFkgZ2VzZG90b2wgIiYjeDJBODQ7Ij48IUVOVElUWSBsYXAgIiYjeDJBODU7Ij48IUVOVElUWSBsZXNzYXBwcm94ICImI3gyQTg1OyI%2BPCFFTlRJVFkgZ2FwICImI3gyQTg2OyI%2BPCFFTlRJVFkgZ3RyYXBwcm94ICImI3gyQTg2OyI%2BPCFFTlRJVFkgbG5lICImI3gyQTg3OyI%2BPCFFTlRJVFkgbG5lcSAiJiN4MkE4NzsiPjwhRU5USVRZIGduZSAiJiN4MkE4ODsiPjwhRU5USVRZIGduZXEgIiYjeDJBODg7Ij48IUVOVElUWSBsbmFwICImI3gyQTg5OyI%2BPCFFTlRJVFkgbG5hcHByb3ggIiYjeDJBODk7Ij48IUVOVElUWSBnbmFwICImI3gyQThBOyI%2BPCFFTlRJVFkgZ25hcHByb3ggIiYjeDJBOEE7Ij48IUVOVElUWSBsRWcgIiYjeDJBOEI7Ij48IUVOVElUWSBsZXNzZXFxZ3RyICImI3gyQThCOyI%2BPCFFTlRJVFkgZ0VsICImI3gyQThDOyI%2BPCFFTlRJVFkgZ3RyZXFxbGVzcyAiJiN4MkE4QzsiPjwhRU5USVRZIGxzaW1lICImI3gyQThEOyI%2BPCFFTlRJVFkgZ3NpbWUgIiYjeDJBOEU7Ij48IUVOVElUWSBsc2ltZyAiJiN4MkE4RjsiPjwhRU5USVRZIGdzaW1sICImI3gyQTkwOyI%2BPCFFTlRJVFkgbGdFICImI3gyQTkxOyI%2BPCFFTlRJVFkgZ2xFICImI3gyQTkyOyI%2BPCFFTlRJVFkgbGVzZ2VzICImI3gyQTkzOyI%2BPCFFTlRJVFkgZ2VzbGVzICImI3gyQTk0OyI%2BPCFFTlRJVFkgZWxzICImI3gyQTk1OyI%2BPCFFTlRJVFkgZXFzbGFudGxlc3MgIiYjeDJBOTU7Ij48IUVOVElUWSBlZ3MgIiYjeDJBOTY7Ij48IUVOVElUWSBlcXNsYW50Z3RyICImI3gyQTk2OyI%2BPCFFTlRJVFkgZWxzZG90ICImI3gyQTk3OyI%2BPCFFTlRJVFkgZWdzZG90ICImI3gyQTk4OyI%2BPCFFTlRJVFkgZWwgIiYjeDJBOTk7Ij48IUVOVElUWSBlZyAiJiN4MkE5QTsiPjwhRU5USVRZIHNpbWwgIiYjeDJBOUQ7Ij48IUVOVElUWSBzaW1nICImI3gyQTlFOyI%2BPCFFTlRJVFkgc2ltbEUgIiYjeDJBOUY7Ij48IUVOVElUWSBzaW1nRSAiJiN4MkFBMDsiPjwhRU5USVRZIExlc3NMZXNzICImI3gyQUExOyI%2BPCFFTlRJVFkgTm90TmVzdGVkTGVzc0xlc3MgIiYjeDJBQTE7JiN4MzM4OyI%2BPCFFTlRJVFkgR3JlYXRlckdyZWF0ZXIgIiYjeDJBQTI7Ij48IUVOVElUWSBOb3ROZXN0ZWRHcmVhdGVyR3JlYXRlciAiJiN4MkFBMjsmI3gzMzg7Ij48IUVOVElUWSBnbGogIiYjeDJBQTQ7Ij48IUVOVElUWSBnbGEgIiYjeDJBQTU7Ij48IUVOVElUWSBsdGNjICImI3gyQUE2OyI%2BPCFFTlRJVFkgZ3RjYyAiJiN4MkFBNzsiPjwhRU5USVRZIGxlc2NjICImI3gyQUE4OyI%2BPCFFTlRJVFkgZ2VzY2MgIiYjeDJBQTk7Ij48IUVOVElUWSBzbXQgIiYjeDJBQUE7Ij48IUVOVElUWSBsYXQgIiYjeDJBQUI7Ij48IUVOVElUWSBzbXRlICImI3gyQUFDOyI%2BPCFFTlRJVFkgc210ZXMgIiYjeDJBQUM7JiN4RkUwMDsiPjwhRU5USVRZIGxhdGUgIiYjeDJBQUQ7Ij48IUVOVElUWSBsYXRlcyAiJiN4MkFBRDsmI3hGRTAwOyI%2BPCFFTlRJVFkgYnVtcEUgIiYjeDJBQUU7Ij48IUVOVElUWSBwcmUgIiYjeDJBQUY7Ij48IUVOVElUWSBwcmVjZXEgIiYjeDJBQUY7Ij48IUVOVElUWSBQcmVjZWRlc0VxdWFsICImI3gyQUFGOyI%2BPCFFTlRJVFkgbnByZSAiJiN4MkFBRjsmI3gzMzg7Ij48IUVOVElUWSBucHJlY2VxICImI3gyQUFGOyYjeDMzODsiPjwhRU5USVRZIE5vdFByZWNlZGVzRXF1YWwgIiYjeDJBQUY7JiN4MzM4OyI%2BPCFFTlRJVFkgc2NlICImI3gyQUIwOyI%2BPCFFTlRJVFkgc3VjY2VxICImI3gyQUIwOyI%2BPCFFTlRJVFkgU3VjY2VlZHNFcXVhbCAiJiN4MkFCMDsiPjwhRU5USVRZIG5zY2UgIiYjeDJBQjA7JiN4MzM4OyI%2BPCFFTlRJVFkgbnN1Y2NlcSAiJiN4MkFCMDsmI3gzMzg7Ij48IUVOVElUWSBOb3RTdWNjZWVkc0VxdWFsICImI3gyQUIwOyYjeDMzODsiPjwhRU5USVRZIHByRSAiJiN4MkFCMzsiPjwhRU5USVRZIHNjRSAiJiN4MkFCNDsiPjwhRU5USVRZIHBybkUgIiYjeDJBQjU7Ij48IUVOVElUWSBwcmVjbmVxcSAiJiN4MkFCNTsiPjwhRU5USVRZIHNjbkUgIiYjeDJBQjY7Ij48IUVOVElUWSBzdWNjbmVxcSAiJiN4MkFCNjsiPjwhRU5USVRZIHByYXAgIiYjeDJBQjc7Ij48IUVOVElUWSBwcmVjYXBwcm94ICImI3gyQUI3OyI%2BPCFFTlRJVFkgc2NhcCAiJiN4MkFCODsiPjwhRU5USVRZIHN1Y2NhcHByb3ggIiYjeDJBQjg7Ij48IUVOVElUWSBwcm5hcCAiJiN4MkFCOTsiPjwhRU5USVRZIHByZWNuYXBwcm94ICImI3gyQUI5OyI%2BPCFFTlRJVFkgc2NuYXAgIiYjeDJBQkE7Ij48IUVOVElUWSBzdWNjbmFwcHJveCAiJiN4MkFCQTsiPjwhRU5USVRZIFByICImI3gyQUJCOyI%2BPCFFTlRJVFkgU2MgIiYjeDJBQkM7Ij48IUVOVElUWSBzdWJkb3QgIiYjeDJBQkQ7Ij48IUVOVElUWSBzdXBkb3QgIiYjeDJBQkU7Ij48IUVOVElUWSBzdWJwbHVzICImI3gyQUJGOyI%2BPCFFTlRJVFkgc3VwcGx1cyAiJiN4MkFDMDsiPjwhRU5USVRZIHN1Ym11bHQgIiYjeDJBQzE7Ij48IUVOVElUWSBzdXBtdWx0ICImI3gyQUMyOyI%2BPCFFTlRJVFkgc3ViZWRvdCAiJiN4MkFDMzsiPjwhRU5USVRZIHN1cGVkb3QgIiYjeDJBQzQ7Ij48IUVOVElUWSBzdWJFICImI3gyQUM1OyI%2BPCFFTlRJVFkgc3Vic2V0ZXFxICImI3gyQUM1OyI%2BPCFFTlRJVFkgbnN1YkUgIiYjeDJBQzU7JiN4MzM4OyI%2BPCFFTlRJVFkgbnN1YnNldGVxcSAiJiN4MkFDNTsmI3gzMzg7Ij48IUVOVElUWSBzdXBFICImI3gyQUM2OyI%2BPCFFTlRJVFkgc3Vwc2V0ZXFxICImI3gyQUM2OyI%2BPCFFTlRJVFkgbnN1cEUgIiYjeDJBQzY7JiN4MzM4OyI%2BPCFFTlRJVFkgbnN1cHNldGVxcSAiJiN4MkFDNjsmI3gzMzg7Ij48IUVOVElUWSBzdWJzaW0gIiYjeDJBQzc7Ij48IUVOVElUWSBzdXBzaW0gIiYjeDJBQzg7Ij48IUVOVElUWSBzdWJuRSAiJiN4MkFDQjsiPjwhRU5USVRZIHN1YnNldG5lcXEgIiYjeDJBQ0I7Ij48IUVOVElUWSB2c3VibkUgIiYjeDJBQ0I7JiN4RkUwMDsiPjwhRU5USVRZIHZhcnN1YnNldG5lcXEgIiYjeDJBQ0I7JiN4RkUwMDsiPjwhRU5USVRZIHN1cG5FICImI3gyQUNDOyI%2BPCFFTlRJVFkgc3Vwc2V0bmVxcSAiJiN4MkFDQzsiPjwhRU5USVRZIHZzdXBuRSAiJiN4MkFDQzsmI3hGRTAwOyI%2BPCFFTlRJVFkgdmFyc3Vwc2V0bmVxcSAiJiN4MkFDQzsmI3hGRTAwOyI%2BPCFFTlRJVFkgY3N1YiAiJiN4MkFDRjsiPjwhRU5USVRZIGNzdXAgIiYjeDJBRDA7Ij48IUVOVElUWSBjc3ViZSAiJiN4MkFEMTsiPjwhRU5USVRZIGNzdXBlICImI3gyQUQyOyI%2BPCFFTlRJVFkgc3Vic3VwICImI3gyQUQzOyI%2BPCFFTlRJVFkgc3Vwc3ViICImI3gyQUQ0OyI%2BPCFFTlRJVFkgc3Vic3ViICImI3gyQUQ1OyI%2BPCFFTlRJVFkgc3Vwc3VwICImI3gyQUQ2OyI%2BPCFFTlRJVFkgc3VwaHN1YiAiJiN4MkFENzsiPjwhRU5USVRZIHN1cGRzdWIgIiYjeDJBRDg7Ij48IUVOVElUWSBmb3JrdiAiJiN4MkFEOTsiPjwhRU5USVRZIHRvcGZvcmsgIiYjeDJBREE7Ij48IUVOVElUWSBtbGNwICImI3gyQURCOyI%2BPCFFTlRJVFkgRGFzaHYgIiYjeDJBRTQ7Ij48IUVOVElUWSBEb3VibGVMZWZ0VGVlICImI3gyQUU0OyI%2BPCFFTlRJVFkgVmRhc2hsICImI3gyQUU2OyI%2BPCFFTlRJVFkgQmFydiAiJiN4MkFFNzsiPjwhRU5USVRZIHZCYXIgIiYjeDJBRTg7Ij48IUVOVElUWSB2QmFydiAiJiN4MkFFOTsiPjwhRU5USVRZIFZiYXIgIiYjeDJBRUI7Ij48IUVOVElUWSBOb3QgIiYjeDJBRUM7Ij48IUVOVElUWSBiTm90ICImI3gyQUVEOyI%2BPCFFTlRJVFkgcm5taWQgIiYjeDJBRUU7Ij48IUVOVElUWSBjaXJtaWQgIiYjeDJBRUY7Ij48IUVOVElUWSBtaWRjaXIgIiYjeDJBRjA7Ij48IUVOVElUWSB0b3BjaXIgIiYjeDJBRjE7Ij48IUVOVElUWSBuaHBhciAiJiN4MkFGMjsiPjwhRU5USVRZIHBhcnNpbSAiJiN4MkFGMzsiPjwhRU5USVRZIHBhcnNsICImI3gyQUZEOyI%2BPCFFTlRJVFkgbnBhcnNsICImI3gyQUZEOyYjeDIwRTU7Ij48IUVOVElUWSBmZmxpZyAiJiN4RkIwMDsiPjwhRU5USVRZIGZpbGlnICImI3hGQjAxOyI%2BPCFFTlRJVFkgZmxsaWcgIiYjeEZCMDI7Ij48IUVOVElUWSBmZmlsaWcgIiYjeEZCMDM7Ij48IUVOVElUWSBmZmxsaWcgIiYjeEZCMDQ7Ij48IUVOVElUWSBBc2NyICImI3gxRDQ5QzsiPjwhRU5USVRZIENzY3IgIiYjeDFENDlFOyI%2BPCFFTlRJVFkgRHNjciAiJiN4MUQ0OUY7Ij48IUVOVElUWSBHc2NyICImI3gxRDRBMjsiPjwhRU5USVRZIEpzY3IgIiYjeDFENEE1OyI%2BPCFFTlRJVFkgS3NjciAiJiN4MUQ0QTY7Ij48IUVOVElUWSBOc2NyICImI3gxRDRBOTsiPjwhRU5USVRZIE9zY3IgIiYjeDFENEFBOyI%2BPCFFTlRJVFkgUHNjciAiJiN4MUQ0QUI7Ij48IUVOVElUWSBRc2NyICImI3gxRDRBQzsiPjwhRU5USVRZIFNzY3IgIiYjeDFENEFFOyI%2BPCFFTlRJVFkgVHNjciAiJiN4MUQ0QUY7Ij48IUVOVElUWSBVc2NyICImI3gxRDRCMDsiPjwhRU5USVRZIFZzY3IgIiYjeDFENEIxOyI%2BPCFFTlRJVFkgV3NjciAiJiN4MUQ0QjI7Ij48IUVOVElUWSBYc2NyICImI3gxRDRCMzsiPjwhRU5USVRZIFlzY3IgIiYjeDFENEI0OyI%2BPCFFTlRJVFkgWnNjciAiJiN4MUQ0QjU7Ij48IUVOVElUWSBhc2NyICImI3gxRDRCNjsiPjwhRU5USVRZIGJzY3IgIiYjeDFENEI3OyI%2BPCFFTlRJVFkgY3NjciAiJiN4MUQ0Qjg7Ij48IUVOVElUWSBkc2NyICImI3gxRDRCOTsiPjwhRU5USVRZIGZzY3IgIiYjeDFENEJCOyI%2BPCFFTlRJVFkgaHNjciAiJiN4MUQ0QkQ7Ij48IUVOVElUWSBpc2NyICImI3gxRDRCRTsiPjwhRU5USVRZIGpzY3IgIiYjeDFENEJGOyI%2BPCFFTlRJVFkga3NjciAiJiN4MUQ0QzA7Ij48IUVOVElUWSBsc2NyICImI3gxRDRDMTsiPjwhRU5USVRZIG1zY3IgIiYjeDFENEMyOyI%2BPCFFTlRJVFkgbnNjciAiJiN4MUQ0QzM7Ij48IUVOVElUWSBwc2NyICImI3gxRDRDNTsiPjwhRU5USVRZIHFzY3IgIiYjeDFENEM2OyI%2BPCFFTlRJVFkgcnNjciAiJiN4MUQ0Qzc7Ij48IUVOVElUWSBzc2NyICImI3gxRDRDODsiPjwhRU5USVRZIHRzY3IgIiYjeDFENEM5OyI%2BPCFFTlRJVFkgdXNjciAiJiN4MUQ0Q0E7Ij48IUVOVElUWSB2c2NyICImI3gxRDRDQjsiPjwhRU5USVRZIHdzY3IgIiYjeDFENENDOyI%2BPCFFTlRJVFkgeHNjciAiJiN4MUQ0Q0Q7Ij48IUVOVElUWSB5c2NyICImI3gxRDRDRTsiPjwhRU5USVRZIHpzY3IgIiYjeDFENENGOyI%2BPCFFTlRJVFkgQWZyICImI3gxRDUwNDsiPjwhRU5USVRZIEJmciAiJiN4MUQ1MDU7Ij48IUVOVElUWSBEZnIgIiYjeDFENTA3OyI%2BPCFFTlRJVFkgRWZyICImI3gxRDUwODsiPjwhRU5USVRZIEZmciAiJiN4MUQ1MDk7Ij48IUVOVElUWSBHZnIgIiYjeDFENTBBOyI%2BPCFFTlRJVFkgSmZyICImI3gxRDUwRDsiPjwhRU5USVRZIEtmciAiJiN4MUQ1MEU7Ij48IUVOVElUWSBMZnIgIiYjeDFENTBGOyI%2BPCFFTlRJVFkgTWZyICImI3gxRDUxMDsiPjwhRU5USVRZIE5mciAiJiN4MUQ1MTE7Ij48IUVOVElUWSBPZnIgIiYjeDFENTEyOyI%2BPCFFTlRJVFkgUGZyICImI3gxRDUxMzsiPjwhRU5USVRZIFFmciAiJiN4MUQ1MTQ7Ij48IUVOVElUWSBTZnIgIiYjeDFENTE2OyI%2BPCFFTlRJVFkgVGZyICImI3gxRDUxNzsiPjwhRU5USVRZIFVmciAiJiN4MUQ1MTg7Ij48IUVOVElUWSBWZnIgIiYjeDFENTE5OyI%2BPCFFTlRJVFkgV2ZyICImI3gxRDUxQTsiPjwhRU5USVRZIFhmciAiJiN4MUQ1MUI7Ij48IUVOVElUWSBZZnIgIiYjeDFENTFDOyI%2BPCFFTlRJVFkgYWZyICImI3gxRDUxRTsiPjwhRU5USVRZIGJmciAiJiN4MUQ1MUY7Ij48IUVOVElUWSBjZnIgIiYjeDFENTIwOyI%2BPCFFTlRJVFkgZGZyICImI3gxRDUyMTsiPjwhRU5USVRZIGVmciAiJiN4MUQ1MjI7Ij48IUVOVElUWSBmZnIgIiYjeDFENTIzOyI%2BPCFFTlRJVFkgZ2ZyICImI3gxRDUyNDsiPjwhRU5USVRZIGhmciAiJiN4MUQ1MjU7Ij48IUVOVElUWSBpZnIgIiYjeDFENTI2OyI%2BPCFFTlRJVFkgamZyICImI3gxRDUyNzsiPjwhRU5USVRZIGtmciAiJiN4MUQ1Mjg7Ij48IUVOVElUWSBsZnIgIiYjeDFENTI5OyI%2BPCFFTlRJVFkgbWZyICImI3gxRDUyQTsiPjwhRU5USVRZIG5mciAiJiN4MUQ1MkI7Ij48IUVOVElUWSBvZnIgIiYjeDFENTJDOyI%2BPCFFTlRJVFkgcGZyICImI3gxRDUyRDsiPjwhRU5USVRZIHFmciAiJiN4MUQ1MkU7Ij48IUVOVElUWSByZnIgIiYjeDFENTJGOyI%2BPCFFTlRJVFkgc2ZyICImI3gxRDUzMDsiPjwhRU5USVRZIHRmciAiJiN4MUQ1MzE7Ij48IUVOVElUWSB1ZnIgIiYjeDFENTMyOyI%2BPCFFTlRJVFkgdmZyICImI3gxRDUzMzsiPjwhRU5USVRZIHdmciAiJiN4MUQ1MzQ7Ij48IUVOVElUWSB4ZnIgIiYjeDFENTM1OyI%2BPCFFTlRJVFkgeWZyICImI3gxRDUzNjsiPjwhRU5USVRZIHpmciAiJiN4MUQ1Mzc7Ij48IUVOVElUWSBBb3BmICImI3gxRDUzODsiPjwhRU5USVRZIEJvcGYgIiYjeDFENTM5OyI%2BPCFFTlRJVFkgRG9wZiAiJiN4MUQ1M0I7Ij48IUVOVElUWSBFb3BmICImI3gxRDUzQzsiPjwhRU5USVRZIEZvcGYgIiYjeDFENTNEOyI%2BPCFFTlRJVFkgR29wZiAiJiN4MUQ1M0U7Ij48IUVOVElUWSBJb3BmICImI3gxRDU0MDsiPjwhRU5USVRZIEpvcGYgIiYjeDFENTQxOyI%2BPCFFTlRJVFkgS29wZiAiJiN4MUQ1NDI7Ij48IUVOVElUWSBMb3BmICImI3gxRDU0MzsiPjwhRU5USVRZIE1vcGYgIiYjeDFENTQ0OyI%2BPCFFTlRJVFkgT29wZiAiJiN4MUQ1NDY7Ij48IUVOVElUWSBTb3BmICImI3gxRDU0QTsiPjwhRU5USVRZIFRvcGYgIiYjeDFENTRCOyI%2BPCFFTlRJVFkgVW9wZiAiJiN4MUQ1NEM7Ij48IUVOVElUWSBWb3BmICImI3gxRDU0RDsiPjwhRU5USVRZIFdvcGYgIiYjeDFENTRFOyI%2BPCFFTlRJVFkgWG9wZiAiJiN4MUQ1NEY7Ij48IUVOVElUWSBZb3BmICImI3gxRDU1MDsiPjwhRU5USVRZIGFvcGYgIiYjeDFENTUyOyI%2BPCFFTlRJVFkgYm9wZiAiJiN4MUQ1NTM7Ij48IUVOVElUWSBjb3BmICImI3gxRDU1NDsiPjwhRU5USVRZIGRvcGYgIiYjeDFENTU1OyI%2BPCFFTlRJVFkgZW9wZiAiJiN4MUQ1NTY7Ij48IUVOVElUWSBmb3BmICImI3gxRDU1NzsiPjwhRU5USVRZIGdvcGYgIiYjeDFENTU4OyI%2BPCFFTlRJVFkgaG9wZiAiJiN4MUQ1NTk7Ij48IUVOVElUWSBpb3BmICImI3gxRDU1QTsiPjwhRU5USVRZIGpvcGYgIiYjeDFENTVCOyI%2BPCFFTlRJVFkga29wZiAiJiN4MUQ1NUM7Ij48IUVOVElUWSBsb3BmICImI3gxRDU1RDsiPjwhRU5USVRZIG1vcGYgIiYjeDFENTVFOyI%2BPCFFTlRJVFkgbm9wZiAiJiN4MUQ1NUY7Ij48IUVOVElUWSBvb3BmICImI3gxRDU2MDsiPjwhRU5USVRZIHBvcGYgIiYjeDFENTYxOyI%2BPCFFTlRJVFkgcW9wZiAiJiN4MUQ1NjI7Ij48IUVOVElUWSByb3BmICImI3gxRDU2MzsiPjwhRU5USVRZIHNvcGYgIiYjeDFENTY0OyI%2BPCFFTlRJVFkgdG9wZiAiJiN4MUQ1NjU7Ij48IUVOVElUWSB1b3BmICImI3gxRDU2NjsiPjwhRU5USVRZIHZvcGYgIiYjeDFENTY3OyI%2BPCFFTlRJVFkgd29wZiAiJiN4MUQ1Njg7Ij48IUVOVElUWSB4b3BmICImI3gxRDU2OTsiPjwhRU5USVRZIHlvcGYgIiYjeDFENTZBOyI%2BPCFFTlRJVFkgem9wZiAiJiN4MUQ1NkI7Ij4%3D">the URL given by this
  link</a>. (This URL is a DTD containing the entity reference
  declarations for the names listed in the <a href="#named-character-references">named character
  references</a> section.)</p>

  <ul class="brief"><li><code title="">-//W3C//DTD&#160;XHTML&#160;1.0&#160;Transitional//EN</code></li>
   <li><code title="">-//W3C//DTD&#160;XHTML&#160;1.1//EN</code></li>
   <li><code title="">-//W3C//DTD&#160;XHTML&#160;1.0&#160;Strict//EN</code></li>
   <li><code title="">-//W3C//DTD&#160;XHTML&#160;1.0&#160;Frameset//EN</code></li>
   <li><code title="">-//W3C//DTD&#160;XHTML&#160;Basic&#160;1.0//EN</code></li>
   <li><code title="">-//W3C//DTD&#160;XHTML&#160;1.1&#160;plus&#160;MathML&#160;2.0//EN</code></li>
   <li><code title="">-//W3C//DTD&#160;XHTML&#160;1.1&#160;plus&#160;MathML&#160;2.0&#160;plus&#160;SVG&#160;1.1//EN</code></li>
   <li><code title="">-//W3C//DTD&#160;MathML&#160;2.0//EN</code></li>
   <li><code title="">-//WAPFORUM//DTD&#160;XHTML&#160;Mobile&#160;1.0//EN</code></li>
  </ul><p>Furthermore, user agents should attempt to retrieve the above
  external entity's content when one of the above public identifiers
  is used, and should not attempt to retrieve any other external
  entity's content.</p>

  <p class="note">This is not strictly a <a href="introduction.html#willful-violation" title="willful
  violation">violation</a> of the XML specification, but it does
  contradict the spirit of the XML specification's requirements. This
  is motivated by a desire for user agents to all handle entities in
  an interoperable fashion without requiring any network access for
  handling external subsets. <a href="#refsXML">[XML]</a></p>

  <p id="scriptTagXML">When an <a href="#xml-parser">XML parser</a> creates a
  <code><a href="the-script-element.html#the-script-element">script</a></code> element, it must be marked as being
  <a href="the-script-element.html#parser-inserted">"parser-inserted"</a> and its <a href="the-script-element.html#force-async">"force-async"</a>
  flag must be unset. If the parser was originally created for the
  <a href="#xml-fragment-parsing-algorithm">XML fragment parsing algorithm</a>, then the element must
  be marked as <a href="the-script-element.html#already-started">"already started"</a> also. When the element's
  end tag is parsed, the user agent must <a href="#provide-a-stable-state">provide a stable
  state</a>, and then <a href="the-script-element.html#prepare-a-script" title="prepare a script">prepare</a>
  the <code><a href="the-script-element.html#the-script-element">script</a></code> element. If this causes there to be a
  <a href="the-script-element.html#pending-parsing-blocking-script">pending parsing-blocking script</a>, then the user agent
  must run the following steps:</p>

  <ol><li><p>Block this instance of the <a href="#xml-parser">XML parser</a>, such
   that the <a href="#event-loop">event loop</a> will not run <a href="#concept-task" title="concept-task">tasks</a> that invoke it.</p></li>

   <li><p><a href="#spin-the-event-loop">Spin the event loop</a> until the parser's
   <code><a href="dom.html#document">Document</a></code> <a href="styling.html#has-no-style-sheet-that-is-blocking-scripts">has no style sheet that is blocking
   scripts</a> and the <a href="the-script-element.html#pending-parsing-blocking-script">pending parsing-blocking
   script</a>'s <a href="the-script-element.html#ready-to-be-parser-executed">"ready to be parser-executed"</a> flag is
   set.</p></li>

   <li><p>Unblock this instance of the <a href="#xml-parser">XML parser</a>, such
   that <a href="#concept-task" title="concept-task">tasks</a> that invoke it can
   again be run.</p></li>

   <li><p><a href="the-script-element.html#execute-the-script-block" title="execute the script block">Execute</a> the
   <a href="the-script-element.html#pending-parsing-blocking-script">pending parsing-blocking script</a>.</p></li>

   <li><p>There is no longer a <a href="the-script-element.html#pending-parsing-blocking-script">pending parsing-blocking
   script</a>.</p></li>

  </ol><p class="note">Since the <code title="dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code> API is not
  available for <a href="infrastructure.html#xml-documents">XML documents</a>, much of the complexity in
  the <a href="#html-parser">HTML parser</a> is not needed in the <a href="#xml-parser">XML
  parser</a>.</p>

  <p>Certain algorithms in this specification <dfn id="feed-the-parser" title="feed the
  parser">spoon-feed the parser</dfn> characters one string at a
  time. In such cases, the <a href="#xml-parser">XML parser</a> must act as it
  would have if faced with a single string consisting of the
  concatenation of all those characters.</p>

  <p>When an <a href="#xml-parser">XML parser</a> reaches the end of its input, it
  must <a href="#stop-parsing">stop parsing</a>, following the same rules as the
  <a href="#html-parser">HTML parser</a>. An <a href="#xml-parser">XML parser</a> can also be
  <a href="#abort-a-parser" title="abort a parser">aborted</a>, which must again by
  done in the same way as for an <a href="#html-parser">HTML parser</a>.</p>

  <p>For the purposes of conformance checkers, if a resource is
  determined to be in <a href="#the-xhtml-syntax">the XHTML syntax</a>, then it is an
  <a href="infrastructure.html#xml-documents" title="XML documents">XML document</a>.</p>



  <h3 id="serializing-xhtml-fragments"><span class="secno">9.3 </span>Serializing XHTML fragments</h3>

  <p>The <dfn id="xml-fragment-serialization-algorithm">XML fragment serialization algorithm</dfn> for a
  <code><a href="dom.html#document">Document</a></code> or <code><a href="infrastructure.html#element">Element</a></code> node either returns a
  fragment of XML that represents that node or throws an
  exception.</p>

  <p>For <code><a href="dom.html#document">Document</a></code>s, the algorithm must return a string in
  the form of a <a href="http://www.w3.org/TR/xml/#sec-well-formed">document
  entity</a>, if none of the error cases below apply.</p>

  <p>For <code><a href="infrastructure.html#element">Element</a></code>s, the algorithm must return a string in
  the form of an <a href="http://www.w3.org/TR/xml/#wf-entities">internal general parsed
  entity</a>, if none of the error cases below apply.</p>

  <p>In both cases, the string returned must be XML
  namespace-well-formed and must be an isomorphic serialization of all
  of that node's child nodes, in <a href="infrastructure.html#tree-order">tree order</a>. User agents
  may adjust prefixes and namespace declarations in the serialization
  (and indeed might be forced to do so in some cases to obtain
  namespace-well-formed XML). User agents may use a combination of
  regular text and character references to represent
  <code><a href="infrastructure.html#text-0">Text</a></code> nodes in the DOM.</p>

  <p>For <code><a href="infrastructure.html#element">Element</a></code>s, if any of the elements in the
  serialization are in no namespace, the default namespace in scope
  for those elements must be explicitly declared as the empty
  string.<!-- because otherwise round-tripping might break since it'll
  pick up the surrounding default ns when setting --> (This doesn't
  apply in the <code><a href="dom.html#document">Document</a></code> case.) <a href="#refsXML">[XML]</a> <a href="#refsXMLNS">[XMLNS]</a></p>

  <p>For the purposes of this section, an internal general parsed
  entity is considered XML namespace-well-formed if a document
  consisting of an element with no namespace declarations whose
  contents are the internal general parsed entity would itself be XML
  namespace-well-formed.</p>

  <p>If any of the following error cases are found in the DOM subtree
  being serialized, then the algorithm must throw an
  <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception instead of returning a
  string:</p>

  <ul><li>A <code><a href="dom.html#document">Document</a></code> node with no child element nodes.</li>

   <li>A <code><a href="infrastructure.html#documenttype">DocumentType</a></code> node that has an external subset
   public identifier that contains characters that are not matched by
   the XML <code title="">PubidChar</code> production. <a href="#refsXML">[XML]</a></li>

   <li>A <code><a href="infrastructure.html#documenttype">DocumentType</a></code> node that has an external subset
   system identifier that contains both a """ (U+0022)
   and a "'" (U+0027) or that contains characters that are
   not matched by the XML <code title="">Char</code> production. <a href="#refsXML">[XML]</a></li>

   <li>A node with a <!--prefix or--> local name containing a ":" (U+003A).</li> <!--(prefixes can get adjusted, so this isn't an
   excuse) -->

   <li>A node with a <!--prefix or--> local name that does not match
   the XML <code title="">Name</code> production. <a href="#refsXML">[XML]</a></li> <!--(again, prefixes can get
   adjusted, so this isn't an excuse) -->

   <li>An <code><a href="infrastructure.html#attr">Attr</a></code> node with no namespace whose local name is
   the lowercase string "<code title="">xmlns</code>". <a href="#refsXMLNS">[XMLNS]</a></li>

   <li>An <code><a href="infrastructure.html#element">Element</a></code> node with two or more attributes with
   the same local name and namespace.</li>

   <li>An <code><a href="infrastructure.html#attr">Attr</a></code> node, <code><a href="infrastructure.html#text-0">Text</a></code> node,
   <code><a href="infrastructure.html#comment-0">Comment</a></code> node, or <code><a href="infrastructure.html#processinginstruction">ProcessingInstruction</a></code>
   node whose data contains characters that are not matched by the XML
   <code title="">Char</code> production. <a href="#refsXML">[XML]</a></li>

   <li>A <code><a href="infrastructure.html#comment-0">Comment</a></code> node whose data contains two adjacent
   "-" (U+002D) characters or ends with such a
   character.</li>

   <li>A <code><a href="infrastructure.html#processinginstruction">ProcessingInstruction</a></code> node whose target name is
   an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">xml</code>".</li>

   <li>A <code><a href="infrastructure.html#processinginstruction">ProcessingInstruction</a></code> node whose target name
   contains a ":" (U+003A).</li>

   <li>A <code><a href="infrastructure.html#processinginstruction">ProcessingInstruction</a></code> node whose data contains
   the string "<code title="">?&gt;</code>".</li>

  </ul><p class="note">These are the only ways to make a DOM
  unserializable. The DOM enforces all the other XML constraints; for
  example, trying to append two elements to a <code><a href="dom.html#document">Document</a></code>
  node will throw a <code><a href="infrastructure.html#hierarchyrequesterror">HierarchyRequestError</a></code> exception.</p>



  <h3 id="parsing-xhtml-fragments"><span class="secno">9.4 </span>Parsing XHTML fragments</h3>

  <p>The <dfn id="xml-fragment-parsing-algorithm">XML fragment parsing algorithm</dfn> either returns a
  <code><a href="dom.html#document">Document</a></code> or throws a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception.
  Given a string <var title="">input</var> and an optional context
  element <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var>, the
  algorithm is as follows:</p>

  <ol><li>

    <p>Create a new <a href="#xml-parser">XML parser</a>.</p>

   </li>

   <li>

    <p>If there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element,
    <a href="#feed-the-parser">feed the parser</a> just created the string corresponding
    to the start tag of that element, declaring all the namespace
    prefixes that are in scope on that element in the DOM, as well as
    declaring the default namespace (if any) that is in scope on that
    element in the DOM.</p>

    <p>A namespace prefix is in scope if the DOM Core <code title="">lookupNamespaceURI()</code> method on the element would
    return a non-null value for that prefix.</p>

    <p>The default namespace is the namespace for which the DOM Core
    <code title="">isDefaultNamespace()</code> method on the element
    would return true.</p>

    <p class="note">If there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element, no <code title="">DOCTYPE</code> is passed to the parser, and therefore no
    external subset is referenced, and therefore no entities will be
    recognized.</p>

   </li>

   <li>

    <p><a href="#feed-the-parser">Feed the parser</a> just created the string <var title="">input</var>.</p>

   </li>

   <li>

    <p>If there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element,
    <a href="#feed-the-parser">feed the parser</a> just created the string corresponding
    to the end tag of that element.</p>

   </li>

   <li>

    <p>If there is an XML well-formedness or XML namespace
    well-formedness error, then throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code>
    exception and abort these steps.</p>

   </li>

   <li>

    <p>If there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element, and the
    root element of the resulting <code><a href="dom.html#document">Document</a></code> has any
    sibling nodes, then throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception and
    abort these steps.</p>

    <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1443 -->

   </li>

   <li>

    <p>If there is a <var title="concept-frag-parse-context"><a href="#concept-frag-parse-context">context</a></var> element, then
    return the child nodes of the root element of the resulting
    <code><a href="dom.html#document">Document</a></code>, in <a href="infrastructure.html#tree-order">tree order</a>.</p>

    <p>Otherwise, return the children of the <code><a href="dom.html#document">Document</a></code>
    object, in <a href="infrastructure.html#tree-order">tree order</a>.</p>

   </li>

  </ol></div>


<!--TOPIC:Rendering-->

  <div class="impl">

  <h2 id="rendering"><span class="secno">10 </span>Rendering</h2>

  <p><i>User agents are not required to present HTML documents in any
  particular way. However, this section provides a set of suggestions
  for rendering HTML documents that, if followed, are likely to lead
  to a user experience that closely resembles the experience intended
  by the documents' authors. So as to avoid confusion regarding the
  normativity of this section, RFC2119 terms have not been used.
  Instead, the term "expected" is used to indicate behavior that will
  lead to this experience. For the purposes of conformance for user
  agents designated as <a href="infrastructure.html#renderingUA">supporting the suggested
  default rendering</a>, the term "expected" in this section has the
  same conformance implications as the RFC2119-defined term
  "must".</i></p>


  <h3 id="introduction-8"><span class="secno">10.1 </span>Introduction</h3>

  <p>In general, user agents are expected to support CSS, and many of
  the suggestions in this section are expressed in CSS terms. User
  agents that use other presentation mechanisms can derive their
  expected behavior by translating from the CSS rules given in this
  section.</p>

  <p>In the absence of style-layer rules to the contrary (e.g. author
  style sheets), user agents are expected to render an element so that
  it conveys to the user the meaning that the element
  <dfn id="represents">represents</dfn>, as described by this specification.</p>

  <p>The suggestions in this section generally assume a visual output
  medium with a resolution of 96dpi or greater, but HTML is intended
  to apply to multiple media (it is a <i>media-independent</i>
  language). User agent implementors are encouraged to adapt the
  suggestions in this section to their target media.</p>

  <hr><p>An element is <dfn id="being-rendered">being rendered</dfn> if it is <a href="infrastructure.html#in-a-document">in a
  <code>Document</code></a>, either its parent node is itself
  <a href="#being-rendered">being rendered</a> or it is the <code><a href="dom.html#document">Document</a></code> node,
  and it is not explicitly excluded from the rendering using either:</p>
  <ul class="brief"><li>the CSS 'display' property's 'none' value, or</li>
   <li>the 'visibility' property's 'collapse' value unless it is being treated as equivalent to the 'hidden' value, or</li>
   <li>some equivalent in other styling languages.</li>
  </ul><p class="note">Just being off-screen does not mean the element is
  not <a href="#being-rendered">being rendered</a>. The presence of the <code title="attr-hidden"><a href="#the-hidden-attribute">hidden</a></code> attribute normally means the
  element is not <a href="#being-rendered">being rendered</a>, though this might be
  overridden by the style sheets.</p>

  <hr><p>User agents that do not honor author-level CSS style sheets are
  nonetheless expected to act as if they applied the CSS rules given
  in these sections in a manner consistent with this specification and
  the relevant CSS and Unicode specifications. <a href="#refsCSS">[CSS]</a> <a href="#refsUNICODE">[UNICODE]</a> <a href="#refsBIDI">[BIDI]</a></p>

  <p class="note">This is especially important for issues relating to
  the 'display', 'unicode-bidi', and 'direction' properties.</p>



  <h3 id="the-css-user-agent-style-sheet-and-presentational-hints"><span class="secno">10.2 </span>The CSS user agent style sheet and presentational hints</h3>

  <p>The CSS rules given in these subsections are, except where
  otherwise specified, expected to be used as part of the user-agent
  level style sheet defaults for all documents that contain <a href="infrastructure.html#html-elements">HTML
  elements</a>.</p>

  <p>Some rules are intended for the author-level zero-specificity
  presentational hints part of the CSS cascade; these are explicitly
  called out as <dfn id="presentational-hints">presentational hints</dfn>.</p>

  <p>Some of the rules regarding left and right margins are given here
  as appropriate for elements whose 'direction' property is 'ltr', and
  are expected to be flipped around on elements whose 'direction'
  property is 'rtl'. These are marked "<dfn id="ltr-specific">LTR-specific</dfn>".</p>

  <p class="note">These markings only affect the handling of attribute
  <em>values</em>, not attribute names or element names.</p>

  <hr><p>When the text below says that an attribute <var title="">attribute</var> on an element <var title="">element</var>
  <dfn id="maps-to-the-pixel-length-property">maps to the pixel length property</dfn> (or properties) <var title="">properties</var>, it means that if <var title="">element</var> has an attribute <var title="">attribute</var> set, and parsing that attribute's value
  using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative integers</a>
  doesn't generate an error, then the user agent is expected to use
  the parsed value as a pixel length for a <a href="#presentational-hints" title="presentational
  hints">presentational hint</a> for <var title="">properties</var>.</p>

  <p>When the text below says that an attribute <var title="">attribute</var> on an element <var title="">element</var>
  <dfn id="maps-to-the-dimension-property">maps to the dimension property</dfn> (or properties) <var title="">properties</var>, it means that if <var title="">element</var> has an attribute <var title="">attribute</var> set, and parsing that attribute's value
  using the <a href="common-microsyntaxes.html#rules-for-parsing-dimension-values">rules for parsing dimension values</a> doesn't
  generate an error, then the user agent is expected to use the parsed
  dimension as the value for a <a href="#presentational-hints" title="presentational
  hints">presentational hint</a> for <var title="">properties</var>, with the value given as a pixel length if
  the dimension was an integer, and with the value given as a
  percentage if the dimension was a percentage.</p>

  <p>When a user agent is to <dfn id="align-descendants">align descendants</dfn> of a node,
  the user agent is expected to align only those descendants that have
  both their 'margin-left' and 'margin-right' properties computing to
  a value other than 'auto', that are over-constrained and that have
  one of those two margins with a used value forced to a greater
  value, and that do not themselves have an applicable <code title="attr-align">align</code> attribute. When multiple elements
  are to <a href="#align-descendants" title="align descendants">align</a> a particular
  descendant, the most deeply nested such element is expected to
  override the others. Aligned elements are expected to be aligned by
  having the used values of their left and right margins be set
  accordingly.</p>



  <h3 id="non-replaced-elements"><span class="secno">10.3 </span>Non-replaced elements</h3>


  <h4 id="hidden-elements"><span class="secno">10.3.1 </span>Hidden elements</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

[hidden], area, base, basefont, command, datalist, head,
input[type=hidden i], link, menu[type=context i], meta, noembed, noframes,
param, rp, script, source, style, track, title {
  display: none;
}</pre>

  <p>The user agent is expected to force the 'display' property of
  <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code> elements for whom <a href="#concept-n-script" title="concept-n-script">scripting is enabled</a> to compute to
  'none', irrespective of CSS rules.</p>


  <h4 id="the-page"><span class="secno">10.3.2 </span>The page</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

html, body { display: block; }</pre>


  <!-- body { margin: 8px; } -->

  <p>For each property in the table below, given a <code><a href="the-body-element.html#the-body-element">body</a></code>
  element, the first attribute that exists <a href="#maps-to-the-pixel-length-property">maps to the pixel
  length property</a> on the <code><a href="the-body-element.html#the-body-element">body</a></code> element. If none of
  the attributes for a property are found, or if the value of the
  attribute that was found cannot be parsed successfully, then, if the
  <code><a href="the-body-element.html#the-body-element">body</a></code> element's <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing
  context</a> does not have its <a href="the-iframe-element.html#seamless-browsing-context-flag">seamless browsing context
  flag</a> set, a default value of 8px is expected to be used for
  that property instead.</p>

  <table><thead><tr><th>Property
     </th><th>Source
   </th></tr></thead><tbody><tr><td rowspan="3">'margin-top'
     </td><td><code><a href="the-body-element.html#the-body-element">body</a></code> element's <code title="attr-body-marginheight"><a href="#attr-body-marginheight">marginheight</a></code> attribute
    </td></tr><tr><td>The <code><a href="the-body-element.html#the-body-element">body</a></code> element's <a href="#container-frame-element">container frame element</a>'s <code title="attr-iframe-marginheight"><a href="#attr-iframe-marginheight">marginheight</a></code> attribute
    </td></tr><tr><td><code><a href="the-body-element.html#the-body-element">body</a></code> element's <code title="attr-body-topmargin">topmargin</code> attribute
   </td></tr></tbody><tbody><tr><td rowspan="3">'margin-right'
     </td><td><code><a href="the-body-element.html#the-body-element">body</a></code> element's <code title="attr-body-marginwidth"><a href="#attr-body-marginwidth">marginwidth</a></code> attribute
    </td></tr><tr><td>The <code><a href="the-body-element.html#the-body-element">body</a></code> element's <a href="#container-frame-element">container frame element</a>'s <code title="attr-iframe-marginwidth"><a href="#attr-iframe-marginwidth">marginwidth</a></code> attribute
    </td></tr><tr><td><code><a href="the-body-element.html#the-body-element">body</a></code> element's <code title="attr-body-rightmargin">rightmargin</code> attribute
   </td></tr></tbody><tbody><tr><td rowspan="3">'margin-bottom'
     </td><td><code><a href="the-body-element.html#the-body-element">body</a></code> element's <code title="attr-body-marginheight"><a href="#attr-body-marginheight">marginheight</a></code> attribute
    </td></tr><tr><td>The <code><a href="the-body-element.html#the-body-element">body</a></code> element's <a href="#container-frame-element">container frame element</a>'s <code title="attr-iframe-marginheight"><a href="#attr-iframe-marginheight">marginheight</a></code> attribute
    </td></tr><tr><td><code><a href="the-body-element.html#the-body-element">body</a></code> element's <code title="attr-body-bottommargin">bottommargin</code> attribute
   </td></tr></tbody><tbody><tr><td rowspan="3">'margin-left'
     </td><td><code><a href="the-body-element.html#the-body-element">body</a></code> element's <code title="attr-body-marginwidth"><a href="#attr-body-marginwidth">marginwidth</a></code> attribute
    </td></tr><tr><td>The <code><a href="the-body-element.html#the-body-element">body</a></code> element's <a href="#container-frame-element">container frame element</a>'s <code title="attr-iframe-marginwidth"><a href="#attr-iframe-marginwidth">marginwidth</a></code> attribute
    </td></tr><tr><td><code><a href="the-body-element.html#the-body-element">body</a></code> element's <code title="attr-body-leftmargin">leftmargin</code> attribute
  </td></tr></tbody></table><p>If the <code><a href="the-body-element.html#the-body-element">body</a></code> element's <code><a href="dom.html#document">Document</a></code>'s
  <a href="#browsing-context">browsing context</a> is a <a href="#nested-browsing-context">nested browsing
  context</a>, and the <a href="#browsing-context-container">browsing context container</a> of
  that <a href="#nested-browsing-context">nested browsing context</a> is a <code><a href="#frame">frame</a></code> or
  <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element, then the <dfn id="container-frame-element">container frame
  element</dfn> of the <code><a href="the-body-element.html#the-body-element">body</a></code> element is that
  <code><a href="#frame">frame</a></code> or <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element. Otherwise, there
  is no <a href="#container-frame-element">container frame element</a>.</p>

  <p class="warning">The above requirements imply that a page can
  change the margins of another page (including one from another
  <a href="#origin-0">origin</a>) using, for example, an
  <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>. This is potentially a security risk, as it
  might in some cases allow an attack to contrive a situation in which
  a page is rendered not as the author intended, possibly for the
  purposes of phishing or otherwise misleading the user.</p>

  <hr><p>If the <code><a href="dom.html#document">Document</a></code> has a <a href="infrastructure.html#root-element">root element</a>, and
  the <code><a href="dom.html#document">Document</a></code>'s <a href="#browsing-context">browsing context</a> is a
  <a href="#nested-browsing-context">nested browsing context</a>, and the <a href="#browsing-context-container">browsing context
  container</a> of that <a href="#nested-browsing-context">nested browsing context</a> is a
  <code><a href="#frame">frame</a></code> or <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element, and that element
  has a <code title="attr-frames-scrolling">scrolling</code>
  attribute, then the user agent is expected to compare the value of
  the attribute in an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> manner to
  the values in the first column of the following table, and if one of
  them matches, then the user agent is expected to treat that
  attribute as a <a href="#presentational-hints" title="presentational hints">presentational
  hint</a> for the aforementioned root element's 'overflow'
  property, setting it to the value given in the corresponding cell on
  the same row in the second column:</p>

  <table><thead><tr><th> Attribute value
     </th><th> 'overflow' value
   </th></tr></thead><tbody><tr><td><code title="">on</code>
     </td><td>'scroll'
    </td></tr><tr><td><code title="">scroll</code>
     </td><td>'scroll'
    </td></tr><tr><td><code title="">yes</code>
     </td><td>'scroll'
    </td></tr><tr><td><code title="">off</code>
     </td><td>'hidden'
    </td></tr><tr><td><code title="">noscroll</code>
     </td><td>'hidden'
    </td></tr><tr><td><code title="">no</code>
     </td><td>'hidden'
    </td></tr><tr><td><code title="">auto</code>
     </td><td>'auto'
  </td></tr></tbody></table><hr><p>When a <code><a href="dom.html#document">Document</a></code> is in <a href="infrastructure.html#quirks-mode">quirks mode</a>,
  vertical margins on <a href="infrastructure.html#html-elements">HTML elements</a> at the top or bottom
  of <code><a href="the-body-element.html#the-body-element">body</a></code> elements are expected to be collapsed to
  zero.</p>

  <hr><p>When a <code><a href="the-body-element.html#the-body-element">body</a></code> element has a <code title="attr-background"><a href="#attr-background">background</a></code> attribute set to a
  non-empty value, the new value is expected to be <a href="urls.html#resolve-a-url" title="resolve a url">resolved</a> relative to the element, and
  if this is successful, the user agent is expected to treat the
  attribute as a <a href="#presentational-hints" title="presentational hints">presentational
  hint</a> setting the element's 'background-image' property to the
  resulting <a href="urls.html#absolute-url">absolute URL</a>.</p>

  <p>When a <code><a href="the-body-element.html#the-body-element">body</a></code> element has a <code title="attr-body-bgcolor"><a href="#attr-body-bgcolor">bgcolor</a></code> attribute set, the new
  value is expected to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a
  legacy color value</a>, and if that does not return an error, the
  user agent is expected to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  element's 'background-color' property to the resulting color.</p>

  <p>When a <code><a href="the-body-element.html#the-body-element">body</a></code> element has a <code title="attr-body-text"><a href="#attr-body-text">text</a></code> attribute, its value is expected
  to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy color
  value</a>, and if that does not return an error, the user
  agent is expected to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  element's 'color' property to the resulting color.</p>

  <p>When a <code><a href="the-body-element.html#the-body-element">body</a></code> element has a <code title="attr-body-link"><a href="#attr-body-link">link</a></code> attribute, its value is expected
  to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy color
  value</a>, and if that does not return an error, the user agent
  is expected to treat the attribute as a <a href="#presentational-hints" title="presentational
  hints">presentational hint</a> setting the 'color' property of
  any element in the <code><a href="dom.html#document">Document</a></code> matching the ':link'
  pseudo-class to the resulting color.</p>

  <p>When a <code><a href="the-body-element.html#the-body-element">body</a></code> element has a <code title="attr-body-vlink"><a href="#attr-body-vlink">vlink</a></code> attribute, its value is
  expected to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy
  color value</a>, and if that does not return an error, the user
  agent is expected to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  'color' property of any element in the <code><a href="dom.html#document">Document</a></code>
  matching the ':visited' pseudo-class to the resulting color.</p>

  <p>When a <code><a href="the-body-element.html#the-body-element">body</a></code> element has a <code title="attr-body-alink"><a href="#attr-body-alink">alink</a></code> attribute, its value is
  expected to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy
  color value</a>, and if that does not return an error, the user
  agent is expected to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  'color' property of any element in the <code><a href="dom.html#document">Document</a></code>
  matching the ':active' pseudo-class and either the ':link'
  pseudo-class or the ':visited' pseudo-class to the resulting
  color.</p>



  <h4 id="flow-content-0"><span class="secno">10.3.3 </span>Flow content</h4>

  <!-- del, ins, and map are inline. -->

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

address, blockquote, center, div, figure, figcaption, footer, form,
header, hr, legend, listing, p, plaintext, pre, summary, xmp {
  display: block;<!-- see also unicode-bidi: isolate rules-->
}

blockquote, figure, listing, p, plaintext, pre, xmp {
  margin-top: 1em; margin-bottom: 1em;
}

blockquote, figure { margin-left: 40px; margin-right: 40px; }

address { font-style: italic; }
listing, plaintext, pre, xmp {
  font-family: monospace; white-space: pre;
}

dialog:not([open]) { display: none; }
dialog {
  position: absolute;
  left: 0; right: 0;
  margin: auto;
  border: solid;
  padding: 1em;
  background: white;
  color: black;
}
dialog::backdrop { background: rgba(0,0,0,0.1); }</pre>

  <p>The following rules are also expected to apply, as
  <a href="#presentational-hints">presentational hints</a>:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

pre[wrap] { white-space: pre-wrap; }</pre>

  <p>In <a href="infrastructure.html#quirks-mode">quirks mode</a>, the following rules are also
  expected to apply:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

form { margin-bottom: 1em; }</pre>

  <hr><p>The <code><a href="#center">center</a></code> element, and the <code><a href="the-div-element.html#the-div-element">div</a></code> element
  when it has an <code title="attr-div-align"><a href="#attr-div-align">align</a></code> attribute
  whose value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for
  either the string "<code title="">center</code>" or the string
  "<code title="">middle</code>", are expected to center text within
  themselves, as if they had their 'text-align' property set to
  'center' in a <a href="#presentational-hints" title="presentational hints">presentational
  hint</a>, and to <a href="#align-descendants">align descendants</a> to the
  center.</p>

  <p>The <code><a href="the-div-element.html#the-div-element">div</a></code> element, when it has an <code title="attr-align">align</code> attribute whose value is an
  <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">left</code>", is expected to left-align text within itself,
  as if it had its 'text-align' property set to 'left' in a <a href="#presentational-hints" title="presentational hints">presentational hint</a>, and to
  <a href="#align-descendants">align descendants</a> to the left.</p>

  <p>The <code><a href="the-div-element.html#the-div-element">div</a></code> element, when it has an <code title="attr-align">align</code> attribute whose value is an
  <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">right</code>", is expected to right-align text within
  itself, as if it had its 'text-align' property set to 'right' in a
  <a href="#presentational-hints" title="presentational hints">presentational hint</a>, and
  to <a href="#align-descendants">align descendants</a> to the right.</p>

  <p>The <code><a href="the-div-element.html#the-div-element">div</a></code> element, when it has an <code title="attr-align">align</code> attribute whose value is an
  <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">justify</code>", is expected to full-justify text within
  itself, as if it had its 'text-align' property set to 'justify' in a
  <a href="#presentational-hints" title="presentational hints">presentational hint</a>, and
  to <a href="#align-descendants">align descendants</a> to the left.</p>



  <h4 id="phrasing-content-0"><span class="secno">10.3.4 </span>Phrasing content</h4>

  <p class="critical">The rule for <code><a href="the-b-element.html#the-b-element">b</a></code> and
  <code><a href="the-strong-element.html#the-strong-element">strong</a></code> elements below might change (to 'bolder' instead
  of 'bold'). See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=12154">W3C bug
  12154</a>. Implementation feedback is desired.</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

cite, dfn, em, i, var { font-style: italic; }
b, strong { font-weight: bold; }
code, kbd, samp, tt { font-family: monospace; }
big { font-size: larger; }
small { font-size: smaller; }

sub { vertical-align: sub; }
sup { vertical-align: super; }
sub, sup { line-height: normal; font-size: smaller; }

ruby { display: ruby; }
rt { display: ruby-text; }

:link { color: #0000EE; }
:visited { color: #551A8B; }
:link, :visited { text-decoration: underline; }
a:link[rel~=help], a:visited[rel~=help],
area:link[rel~=help], area:visited[rel~=help] { cursor: help; }

:focus { outline: auto; }

mark { background: yellow; color: black; } /* this color is just a suggestion and can be changed based on implementation feedback */

abbr[title], acronym[title] { text-decoration: dotted underline; }<!-- CSS3 http://dev.w3.org/csswg/css3-text/#text-decoration-style -->
ins, u { text-decoration: underline; }
del, s, strike { text-decoration: line-through; }
blink { text-decoration: blink; }

q::before { content: open-quote; }
q::after { content: close-quote; }

br { content: '\A'; white-space: pre; }
nobr { white-space: nowrap; }
wbr { content: '\200B'; }
nobr wbr { white-space: normal; }</pre>

  <p>The following rules are also expected to apply, as
  <a href="#presentational-hints">presentational hints</a>:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

br[clear=left i] { clear: left; }
br[clear=right i] { clear: right; }
br[clear=all i], br[clear=both i] { clear: both; }</pre>

  <p>For the purposes of the CSS ruby model, runs of children of
  <code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code> elements that are not <code><a href="the-rt-element.html#the-rt-element">rt</a></code> or
  <code><a href="the-rp-element.html#the-rp-element">rp</a></code> elements are expected to be wrapped in anonymous
  boxes whose 'display' property has the value 'ruby-base'. <a href="#refsCSSRUBY">[CSSRUBY]</a></p>

  <p>When a particular part of a ruby has more than one annotation,
  the annotations should be distributed on both sides of the base text
  so as to minimise the stacking of ruby annotations on one side.</p>

  <p class="note">When it becomes possible to do so, the preceding
  requirement will be updated to be expressed in terms of CSS ruby.
  (Currently, CSS ruby does not handle nested <code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code>
  elements or multiple sequential <code><a href="the-rt-element.html#the-rt-element">rt</a></code> elements, which is
  how this semantic is expressed.)</p>

  <p>User agents that do not support correct ruby rendering are
  expected to render parentheses around the text of <code><a href="the-rt-element.html#the-rt-element">rt</a></code>
  elements in the absence of <code><a href="the-rp-element.html#the-rp-element">rp</a></code> elements.</p>

  <hr><p>User agents are expected to
  support the 'clear' property on inline elements (in order to render
  <code><a href="the-br-element.html#the-br-element">br</a></code> elements with <code title="attr-br-clear"><a href="#attr-br-clear">clear</a></code> attributes) in the manner
  described in the non-normative note to this effect in CSS2.1.</p>
  <!-- section 9.5.2 of CSS2.1 -->

  <p>The initial value for the 'color' property is expected to be
  black. The initial value for the 'background-color' property is
  expected to be 'transparent'. The canvas' background is expected to
  be white.</p>

  <hr><p>When a <code><a href="#font">font</a></code> element has a <code title="attr-font-color">color</code> attribute, its value is
  expected to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy
  color value</a>, and if that does not return an error, the user
  agent is expected to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  element's 'color' property to the resulting color.</p>

  <p>When a <code><a href="#font">font</a></code> element has a <code title="attr-font-face">face</code> attribute, the user agent is
  expected to treat the attribute as a <a href="#presentational-hints" title="presentational
  hints">presentational hint</a> setting the element's
  'font-family' property to the attribute's value.</p>

  <!-- (Apparently only IE supports this?) (Note: if you add this
  back, make sure to define which of 'size' vs 'pointsize' wins.)

  <p>When a <code>font</code> element has a <code
  title="attr-font-pointsize">pointsize</code> attribute, the user
  agent is expected to parse that attribute's value using the
  <span>rules for parsing non-negative integers</span>, and if this
  doesn't generate an error, then the user agent is expected to use
  the parsed value as a <em>point</em> length for a <span
  title="presentational hints">presentational hint</span> for the
  'font-size' property on the element.</p>
  -->

  <p>When a <code><a href="#font">font</a></code> element has a <code title="attr-font-size">size</code> attribute, the user agent is
  expected to use the following steps, known as the <dfn id="rules-for-parsing-a-legacy-font-size">rules for
  parsing a legacy font size</dfn>, to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  element's 'font-size' property:</p>

  <ol><li><p>Let <var title="">input</var> be the attribute's
   value.</p></li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially pointing at the start of the
   string.</p></li>

   <li><p><a href="common-microsyntaxes.html#skip-whitespace">Skip whitespace</a>.</p></li>

   <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, there is no <a href="#presentational-hints" title="presentational
   hints">presentational hint</a>. Abort these steps.</p></li>

   <li><p>If the character at <var title="">position</var> is a "+" (U+002B) character, then let <var title="">mode</var> be
   <i>relative-plus</i>, and advance <var title="">position</var> to
   the next character. Otherwise, if the character at <var title="">position</var> is a "-" (U+002D) character,
   then let <var title="">mode</var> be <i>relative-minus</i>, and
   advance <var title="">position</var> to the next
   character. Otherwise, let <var title="">mode</var> be
   <i>absolute</i>.</p></li>

   <li><p><a href="common-microsyntaxes.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> in the range
   <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, and let the
   resulting sequence be <var title="">digits</var>.</p></li>

   <li><p>If <var title="">digits</var> is the empty string, there is
   no <a href="#presentational-hints" title="presentational hints">presentational
   hint</a>. Abort these steps.</p></li>

   <li><p>Interpret <var title="">digits</var> as a base-ten
   integer. Let <var title="">value</var> be the resulting
   number.</p></li>

   <li>

    <!-- basefont support would go here, but we removed it -->

    <p>If <var title="">mode</var> is <i>relative-plus</i>, then
    increment <var title="">value</var> by 3. If <var title="">mode</var> is <i>relative-minus</i>, then let <var title="">value</var> be the result of subtracting <var title="">value</var> from 3.</p>

   </li>

   <li><p>If <var title="">value</var> is greater than 7, let it be
   7.</p></li>

   <li><p>If <var title="">value</var> is less than 1, let it be
   1.</p></li>

   <li>

    <p>Set 'font-size' to the keyword corresponding to the value of
    <var title="">value</var> according to the following table:</p>

    <table><thead><tr><th><var title="">value</var>
       </th><th>'font-size' keyword
       </th><th>Notes
     </th></tr></thead><tbody><tr><td>1
       </td><td>x-small
       </td><td>
      </td></tr><tr><td>2
       </td><td>small
       </td><td>
      </td></tr><tr><td>3
       </td><td>medium
       </td><td>
      </td></tr><tr><td>4
       </td><td>large
       </td><td>
      </td></tr><tr><td>5
       </td><td>x-large
       </td><td>
      </td></tr><tr><td>6
       </td><td>xx-large
       </td><td>
      </td></tr><tr><td>7
       </td><td>x<!---->xx-large
       </td><td><i>see below</i>
    </td></tr></tbody></table><p>The 'x<!---->xx-large' value is a non-CSS value used here to
    indicate a font size 50% larger than 'xx-large'.</p>

   </li>

  </ol><h4 id="bidirectional-text"><span class="secno">10.3.5 </span>Bidirectional text</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

:dir(ltr) { direction: ltr; }
:dir(rtl) { direction: rtl; }

address, blockquote, center, div, figure, figcaption, footer, form,
header, hr, legend, listing, p, plaintext, pre, summary, xmp, article,
aside, h1, h2, h3, h4, h5, h6, hgroup, nav, section, table, caption,
colgroup, col, thead, tbody, tfoot, tr, td, th, dir, dd, dl, dt, menu,
ol, ul, li {
  unicode-bidi: isolate;<!-- basically anything that is display:block-like -->
}

:matches([dir=ltr i], [dir=rtl i], [dir=auto i]):not(address):not(blockquote
):not(center):not(div):not(figure):not(figcaption):not(footer):not(form
):not(header):not(hr):not(legend):not(listing):not(p):not(plaintext):not(pre
):not(summary):not(xmp):not(article):not(aside):not(h1):not(h2):not(h3):not(h4
):not(h5):not(h6):not(hgroup):not(nav):not(section):not(table):not(caption
):not(colgroup):not(col):not(thead):not(tbody):not(tfoot):not(tr):not(td
):not(th):not(dir):not(dd):not(dl):not(dt):not(menu):not(ol):not(ul):not(li) {
  unicode-bidi: embed;
}

bdi, bdi:matches([dir=ltr i], [dir=rtl i]),
output, output:matches([dir=ltr i], [dir=rtl i]),
[dir=auto i] {
  unicode-bidi: isolate;
}

bdo, bdo:matches([dir=ltr i], [dir=rtl i]) { unicode-bidi: bidi-override; }
bdo[dir=auto i] { unicode-bidi: isolate-override; }

textarea[dir=auto i], pre[dir=auto i] { unicode-bidi: plaintext; }</pre>


  <h4 id="quotes"><span class="secno">10.3.6 </span>Quotes</h4>

  <p>This block is automatically generated from the Unicode Common
  Locale Data Repository. <a href="#refsCLDR">[CLDR]</a></p>

  <p>User agents are expected to use either the block below (which
  will be regularly updated) or to automatically generate their own
  copy directly from the source material. The language codes are
  derived from the CLDR file names. The quotes are derived from the
  <code title="">delimiter</code> blocks, with fallback handled as
  specified in the CLDR documentation.</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

<!--BOILERPLATE cldr.inc--></pre>  


  <h4 id="sections-and-headings"><span class="secno">10.3.7 </span>Sections and headings</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

article, aside, h1, h2, h3, h4, h5, h6, hgroup, nav, section {
  display: block;<!-- see also unicode-bidi: isolate rules-->
}

h1 { margin-top: 0.67em; margin-bottom: 0.67em; font-size: 2.00em; font-weight: bold; }
h2 { margin-top: 0.83em; margin-bottom: 0.83em; font-size: 1.50em; font-weight: bold; }
h3 { margin-top: 1.00em; margin-bottom: 1.00em; font-size: 1.17em; font-weight: bold; }
h4 { margin-top: 1.33em; margin-bottom: 1.33em; font-size: 1.00em; font-weight: bold; }
h5 { margin-top: 1.67em; margin-bottom: 1.67em; font-size: 0.83em; font-weight: bold; }
h6 { margin-top: 2.33em; margin-bottom: 2.33em; font-size: 0.67em; font-weight: bold; }</pre>

  <p>The <code><a href="the-article-element.html#the-article-element">article</a></code>, <code><a href="the-aside-element.html#the-aside-element">aside</a></code>, <code><a href="the-nav-element.html#the-nav-element">nav</a></code>,
  and <code><a href="the-section-element.html#the-section-element">section</a></code> elements are expected to affect the margins
  and font size of <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code> elements, based on the nesting
  depth. If <var title="">x</var> is a selector that matches elements
  that are either <code><a href="the-article-element.html#the-article-element">article</a></code>, <code><a href="the-aside-element.html#the-aside-element">aside</a></code>,
  <code><a href="the-nav-element.html#the-nav-element">nav</a></code>, or <code><a href="the-section-element.html#the-section-element">section</a></code> elements, then the
  following rules capture what is expected:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

<var title="">x</var> h1 { margin-top: 0.83em; margin-bottom: 0.83em; font-size: 1.50em; }
<var title="">x</var> <var title="">x</var> h1 { margin-top: 1.00em; margin-bottom: 1.00em; font-size: 1.17em; }
<var title="">x</var> <var title="">x</var> <var title="">x</var> h1 { margin-top: 1.33em; margin-bottom: 1.33em; font-size: 1.00em; }
<var title="">x</var> <var title="">x</var> <var title="">x</var> <var title="">x</var> h1 { margin-top: 1.67em; margin-bottom: 1.67em; font-size: 0.83em; }
<var title="">x</var> <var title="">x</var> <var title="">x</var> <var title="">x</var> <var title="">x</var> h1 { margin-top: 2.33em; margin-bottom: 2.33em; font-size: 0.67em; }</pre>



  <h4 id="lists"><span class="secno">10.3.8 </span>Lists</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

dir, dd, dl, dt, menu, ol, ul { display: block; }<!-- see also unicode-bidi:isolate rules -->
li { display: list-item; }<!-- see also unicode-bidi:isolate rules -->

dir, dl, menu, ol, ul { margin-top: 1em; margin-bottom: 1em; }

dir dir, dir dl, dir menu, dir ol, dir ul,
dl dir, dl dl, dl menu, dl ol, dl ul,
menu dir, menu dl, menu menu, menu ol, menu ul,
ol dir, ol dl, ol menu, ol ol, ol ul,
ul dir, ul dl, ul menu, ul ol, ul ul {
  margin-top: 0; margin-bottom: 0;
}

dd { margin-left: 40px; } /* <a href="#ltr-specific">LTR-specific</a>: use 'margin-right' for rtl elements */
dir, menu, ol, ul { padding-left: 40px; } /* <a href="#ltr-specific">LTR-specific</a>: use 'padding-right' for rtl elements */

ol { list-style-type: decimal; }

dir, menu, ul { list-style-type: disc; }

dir dl, dir menu, dir ul,
menu dl, menu menu, menu ul,
ol dl, ol menu, ol ul,
ul dl, ul menu, ul ul {
  list-style-type: circle;
}

dir dir dl, dir dir menu, dir dir ul,
dir menu dl, dir menu menu, dir menu ul,
dir ol dl, dir ol menu, dir ol ul,
dir ul dl, dir ul menu, dir ul ul,
menu dir dl, menu dir menu, menu dir ul,
menu menu dl, menu menu menu, menu menu ul,
menu ol dl, menu ol menu, menu ol ul,
menu ul dl, menu ul menu, menu ul ul,
ol dir dl, ol dir menu, ol dir ul,
ol menu dl, ol menu menu, ol menu ul,
ol ol dl, ol ol menu, ol ol ul,
ol ul dl, ol ul menu, ol ul ul,
ul dir dl, ul dir menu, ul dir ul,
ul menu dl, ul menu menu, ul menu ul,
ul ol dl, ul ol menu, ul ol ul,
ul ul dl, ul ul menu, ul ul ul {
  list-style-type: square;
}</pre>

  <p id="decohints">The following rules are also expected to apply, as
  <a href="#presentational-hints">presentational hints</a>:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

ol[type=1], li[type=1] { list-style-type: decimal; }
ol[type=a], li[type=a] { list-style-type: lower-alpha; }
ol[type=A], li[type=A] { list-style-type: upper-alpha; }
ol[type=i], li[type=i] { list-style-type: lower-roman; }
ol[type=I], li[type=I] { list-style-type: upper-roman; }
ul[type=disc i], li[type=disc i] { list-style-type: disc; }
ul[type=circle i], li[type=circle i] { list-style-type: circle; }
ul[type=square i], li[type=square i] { list-style-type: square; }</pre>

  <p>When rendering <code><a href="the-li-element.html#the-li-element">li</a></code> elements, user agents are expected
  to use the <a href="the-li-element.html#ordinal-value">ordinal value</a> of the <code><a href="the-li-element.html#the-li-element">li</a></code> element
  to render the counter in the list item marker.</p>


  <h4 id="tables"><span class="secno">10.3.9 </span>Tables</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

table { display: table; }<!-- see also unicode-bidi:isolate rules -->
caption { display: table-caption; }<!-- see also unicode-bidi:isolate rules -->
colgroup, colgroup[hidden] { display: table-column-group; }<!-- see also unicode-bidi:isolate rules -->
col, col[hidden] { display: table-column; }<!-- see also unicode-bidi:isolate rules -->
thead, thead[hidden] { display: table-header-group; }<!-- see also unicode-bidi:isolate rules -->
tbody, tbody[hidden] { display: table-row-group; }<!-- see also unicode-bidi:isolate rules -->
tfoot, tfoot[hidden] { display: table-footer-group; }<!-- see also unicode-bidi:isolate rules -->
tr, tr[hidden] { display: table-row; }<!-- see also unicode-bidi:isolate rules -->
td, th, td[hidden], th[hidden] { display: table-cell; }<!-- see also unicode-bidi:isolate rules -->

colgroup[hidden], col[hidden], thead[hidden], tbody[hidden],
tfoot[hidden], tr[hidden], td[hidden], th[hidden] {
  visibility: collapse;
}

table {
  border-spacing: 2px;
  border-collapse: separate;
  text-indent: initial;
}
td, th { padding: 1px; }
th { font-weight: bold; }

thead, tbody, tfoot, table &gt; tr { vertical-align: middle; }
tr, td, th { vertical-align: inherit; }

table, td, th { border-color: gray; }
thead, tbody, tfoot, tr { border-color: inherit; }
table[rules=none i], table[rules=groups i], table[rules=rows i],
table[rules=cols i], table[rules=all i], table[frame=void i],
table[frame=above i], table[frame=below i], table[frame=hsides i],
table[frame=lhs i], table[frame=rhs i], table[frame=vsides i],
table[frame=box i], table[frame=border i],
table[rules=none i] &gt; tr &gt; td, table[rules=none i] &gt; tr &gt; th,
table[rules=groups i] &gt; tr &gt; td, table[rules=groups i] &gt; tr &gt; th,
table[rules=rows i] &gt; tr &gt; td, table[rules=rows i] &gt; tr &gt; th,
table[rules=cols i] &gt; tr &gt; td, table[rules=cols i] &gt; tr &gt; th,
table[rules=all i] &gt; tr &gt; td, table[rules=all i] &gt; tr &gt; th,
table[rules=none i] &gt; thead &gt; tr &gt; td, table[rules=none i] &gt; thead &gt; tr &gt; th,
table[rules=groups i] &gt; thead &gt; tr &gt; td, table[rules=groups i] &gt; thead &gt; tr &gt; th,
table[rules=rows i] &gt; thead &gt; tr &gt; td, table[rules=rows i] &gt; thead &gt; tr &gt; th,
table[rules=cols i] &gt; thead &gt; tr &gt; td, table[rules=cols i] &gt; thead &gt; tr &gt; th,
table[rules=all i] &gt; thead &gt; tr &gt; td, table[rules=all i] &gt; thead &gt; tr &gt; th,
table[rules=none i] &gt; tbody &gt; tr &gt; td, table[rules=none i] &gt; tbody &gt; tr &gt; th,
table[rules=groups i] &gt; tbody &gt; tr &gt; td, table[rules=groups i] &gt; tbody &gt; tr &gt; th,
table[rules=rows i] &gt; tbody &gt; tr &gt; td, table[rules=rows i] &gt; tbody &gt; tr &gt; th,
table[rules=cols i] &gt; tbody &gt; tr &gt; td, table[rules=cols i] &gt; tbody &gt; tr &gt; th,
table[rules=all i] &gt; tbody &gt; tr &gt; td, table[rules=all i] &gt; tbody &gt; tr &gt; th,
table[rules=none i] &gt; tfoot &gt; tr &gt; td, table[rules=none i] &gt; tfoot &gt; tr &gt; th,
table[rules=groups i] &gt; tfoot &gt; tr &gt; td, table[rules=groups i] &gt; tfoot &gt; tr &gt; th,
table[rules=rows i] &gt; tfoot &gt; tr &gt; td, table[rules=rows i] &gt; tfoot &gt; tr &gt; th,
table[rules=cols i] &gt; tfoot &gt; tr &gt; td, table[rules=cols i] &gt; tfoot &gt; tr &gt; th,
table[rules=all i] &gt; tfoot &gt; tr &gt; td, table[rules=all i] &gt; tfoot &gt; tr &gt; th {
  border-color: black;
}</pre>

  <p>The following rules are also expected to apply, as
  <a href="#presentational-hints">presentational hints</a>:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

table[align=left i] { float: left; }
table[align=right i] { float: right; }
table[align=center i] { margin-left: auto; margin-right: auto; }
thead[align=absmiddle i], tbody[align=absmiddle i], tfoot[align=absmiddle i],
tr[align=absmiddle i], td[align=absmiddle i], th[align=absmiddle i] {
  text-align: center;
}

caption[align=bottom i] { caption-side: bottom; }
p[align=left i], h1[align=left i], h2[align=left i], h3[align=left i],
h4[align=left i], h5[align=left i], h6[align=left i] {
  text-align: left;
}
p[align=right i], h1[align=right i], h2[align=right i], h3[align=right i],
h4[align=right i], h5[align=right i], h6[align=right i] {
  text-align: right;
}
p[align=center i], h1[align=center i], h2[align=center i], h3[align=center i],
h4[align=center i], h5[align=center i], h6[align=center i] {
  text-align: center;
}
p[align=justify i], h1[align=justify i], h2[align=justify i], h3[align=justify i],
h4[align=justify i], h5[align=justify i], h6[align=justify i] {
  text-align: justify;
}
thead[valign=top i], tbody[valign=top i], tfoot[valign=top i],
tr[valign=top i], td[valign=top i], th[valign=top i] {
  vertical-align: top;
}
thead[valign=middle i], tbody[valign=middle i], tfoot[valign=middle i],
tr[valign=middle i], td[valign=middle i], th[valign=middle i] {
  vertical-align: middle;
}
thead[valign=bottom i], tbody[valign=bottom i], tfoot[valign=bottom i],
tr[valign=bottom i], td[valign=bottom i], th[valign=bottom i] {
  vertical-align: bottom;
}
thead[valign=baseline i], tbody[valign=baseline i], tfoot[valign=baseline i],
tr[valign=baseline i], td[valign=baseline i], th[valign=baseline i] {
  vertical-align: baseline;
}

td[nowrap], th[nowrap] { white-space: nowrap; }

table[rules=none i], table[rules=groups i], table[rules=rows i],
table[rules=cols i], table[rules=all i] {
  border-style: hidden;
  border-collapse: collapse;
}
table[border] { border-style: outset; } /* <a href="#magic-border-selector">only if border is not equivalent to zero</a> */
table[frame=void i] { border-style: hidden; }
table[frame=above i] { border-style: outset hidden hidden hidden; }
table[frame=below i] { border-style: hidden hidden outset hidden; }
table[frame=hsides i] { border-style: outset hidden outset hidden; }
table[frame=lhs i] { border-style: hidden hidden hidden outset; }
table[frame=rhs i] { border-style: hidden outset hidden hidden; }
table[frame=vsides i] { border-style: hidden outset; }
table[frame=box i], table[frame=border i] { border-style: outset; }

table[border] &gt; tr &gt; td, table[border] &gt; tr &gt; th,
table[border] &gt; thead &gt; tr &gt; td, table[border] &gt; thead &gt; tr &gt; th,
table[border] &gt; tbody &gt; tr &gt; td, table[border] &gt; tbody &gt; tr &gt; th,
table[border] &gt; tfoot &gt; tr &gt; td, table[border] &gt; tfoot &gt; tr &gt; th {
  /* <a href="#magic-border-selector">only if border is not equivalent to zero</a> */
  border-width: 1px;
  border-style: inset;
}
table[rules=none i] &gt; tr &gt; td, table[rules=none i] &gt; tr &gt; th,
table[rules=none i] &gt; thead &gt; tr &gt; td, table[rules=none i] &gt; thead &gt; tr &gt; th,
table[rules=none i] &gt; tbody &gt; tr &gt; td, table[rules=none i] &gt; tbody &gt; tr &gt; th,
table[rules=none i] &gt; tfoot &gt; tr &gt; td, table[rules=none i] &gt; tfoot &gt; tr &gt; th,
table[rules=groups i] &gt; tr &gt; td, table[rules=groups i] &gt; tr &gt; th,
table[rules=groups i] &gt; thead &gt; tr &gt; td, table[rules=groups i] &gt; thead &gt; tr &gt; th,
table[rules=groups i] &gt; tbody &gt; tr &gt; td, table[rules=groups i] &gt; tbody &gt; tr &gt; th,
table[rules=groups i] &gt; tfoot &gt; tr &gt; td, table[rules=groups i] &gt; tfoot &gt; tr &gt; th,
table[rules=rows i] &gt; tr &gt; td, table[rules=rows i] &gt; tr &gt; th,
table[rules=rows i] &gt; thead &gt; tr &gt; td, table[rules=rows i] &gt; thead &gt; tr &gt; th,
table[rules=rows i] &gt; tbody &gt; tr &gt; td, table[rules=rows i] &gt; tbody &gt; tr &gt; th,
table[rules=rows i] &gt; tfoot &gt; tr &gt; td, table[rules=rows i] &gt; tfoot &gt; tr &gt; th {
  border-width: 1px;
  border-style: none;
}
table[rules=cols i] &gt; tr &gt; td, table[rules=cols i] &gt; tr &gt; th,
table[rules=cols i] &gt; thead &gt; tr &gt; td, table[rules=cols i] &gt; thead &gt; tr &gt; th,
table[rules=cols i] &gt; tbody &gt; tr &gt; td, table[rules=cols i] &gt; tbody &gt; tr &gt; th,
table[rules=cols i] &gt; tfoot &gt; tr &gt; td, table[rules=cols i] &gt; tfoot &gt; tr &gt; th {
  border-width: 1px;
  border-style: none solid;
}
table[rules=all i] &gt; tr &gt; td, table[rules=all i] &gt; tr &gt; th,
table[rules=all i] &gt; thead &gt; tr &gt; td, table[rules=all i] &gt; thead &gt; tr &gt; th,
table[rules=all i] &gt; tbody &gt; tr &gt; td, table[rules=all i] &gt; tbody &gt; tr &gt; th,
table[rules=all i] &gt; tfoot &gt; tr &gt; td, table[rules=all i] &gt; tfoot &gt; tr &gt; th {
  border-width: 1px;
  border-style: solid;
}

table[rules=groups i] &gt; colgroup {
  border-left-width: 1px;
  border-left-style: solid;
  border-right-width: 1px;
  border-right-style: solid;
}
table[rules=groups i] &gt; thead,
table[rules=groups i] &gt; tbody,
table[rules=groups i] &gt; tfoot {
  border-top-width: 1px;
  border-top-style: solid;
  border-bottom-width: 1px;
  border-bottom-style: solid;
}

table[rules=rows i] &gt; tr, table[rules=rows i] &gt; thead &gt; tr,
table[rules=rows i] &gt; tbody &gt; tr, table[rules=rows i] &gt; tfoot &gt; tr {
  border-top-width: 1px;
  border-top-style: solid;
  border-bottom-width: 1px;
  border-bottom-style: solid;
}</pre>

<!--
 Demos that the above (and prose below) must explain:
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1191
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1194
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1195
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1196
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1197
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1199
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1200
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1201
   http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1209
-->


  <p>In <a href="infrastructure.html#quirks-mode">quirks mode</a>, the following rules are also
  expected to apply:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

table {
  font-weight: initial;
  font-style: initial;
  font-variant: initial;
  font-size: initial;
  line-height: initial;
  white-space: initial;
  text-align: initial;
}</pre>

  <hr><p>For the purposes of the CSS table model, the <code><a href="the-col-element.html#the-col-element">col</a></code>
  element is expected to be treated as if it was present as many times
  as its <code title="attr-col-span"><a href="the-col-element.html#attr-col-span">span</a></code> attribute <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers" title="rules for parsing non-negative
  integers">specifies</a>.</p>

  <p>For the purposes of the CSS table model, the
  <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code> element, if it contains no <code><a href="the-col-element.html#the-col-element">col</a></code>
  element, is expected to be treated as if it had as many such
  children as its <code title="attr-colgroup-span"><a href="the-colgroup-element.html#attr-colgroup-span">span</a></code>
  attribute <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers" title="rules for parsing non-negative
  integers">specifies</a>.</p>

  <p>For the purposes of the CSS table model, the <code title="attr-tdth-colspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-colspan">colspan</a></code> and <code title="attr-tdth-rowspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-rowspan">rowspan</a></code> attributes on
  <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements are expected to <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers" title="rules for parsing non-negative integers">provide</a> the
  <i>special knowledge</i> regarding cells spanning rows and
  columns.</p>

  <p>In <a href="infrastructure.html#html-documents">HTML documents</a>, the user agent is expected to
  force the 'display' property of <code><a href="the-form-element.html#the-form-element">form</a></code> elements that are
  children of <code><a href="the-table-element.html#the-table-element">table</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>,
  <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, or <code><a href="the-tr-element.html#the-tr-element">tr</a></code> elements
  to compute to 'none', irrespective of CSS rules.</p>

  <hr><p>The <code><a href="the-table-element.html#the-table-element">table</a></code> element's <code title="attr-table-cellspacing"><a href="#attr-table-cellspacing">cellspacing</a></code> attribute
  <a href="#maps-to-the-pixel-length-property">maps to the pixel length property</a> 'border-spacing' on the
  element.</p>

  <p>The <code><a href="the-table-element.html#the-table-element">table</a></code> element's <code title="attr-table-cellpadding"><a href="#attr-table-cellpadding">cellpadding</a></code> attribute <a href="#maps-to-the-pixel-length-property" title="maps to the pixel length property">maps to the pixel length
  properties</a> 'padding-top', 'padding-right', 'padding-bottom',
  and 'padding-left' of any <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code>
  elements that have corresponding <a href="attributes-common-to-td-and-th-elements.html#concept-cell" title="concept-cell">cells</a> in the <a href="attributes-common-to-td-and-th-elements.html#concept-table" title="concept-table">table</a> corresponding to the
  <code><a href="the-table-element.html#the-table-element">table</a></code> element.</p>

  <p>The <code><a href="the-table-element.html#the-table-element">table</a></code> element's <code title="attr-table-hspace">hspace</code> attribute <a href="#maps-to-the-dimension-property" title="maps
  to the dimension property">maps to the dimension properties</a>
  'margin-left' and 'margin-right' on the <code><a href="the-table-element.html#the-table-element">table</a></code>
  element.</p>

  <p>The <code><a href="the-table-element.html#the-table-element">table</a></code> element's <code title="attr-table-vspace">vspace</code> attribute <a href="#maps-to-the-dimension-property" title="maps
  to the dimension property">maps to the dimension properties</a>
  'margin-top' and 'margin-bottom' on the <code><a href="the-table-element.html#the-table-element">table</a></code>
  element.</p>

  <p>The <code><a href="the-table-element.html#the-table-element">table</a></code> element's <code title="attr-table-height">height</code> attribute <a href="#maps-to-the-dimension-property">maps to the
  dimension property</a> 'height' on the <code><a href="the-table-element.html#the-table-element">table</a></code>
  element.</p>

  <p>The <code><a href="the-table-element.html#the-table-element">table</a></code> element's <code title="attr-table-width"><a href="#attr-table-width">width</a></code> attribute <a href="#maps-to-the-dimension-property">maps to the
  dimension property</a> 'width' on the <code><a href="the-table-element.html#the-table-element">table</a></code>
  element.</p>

  <p>The <code><a href="the-col-element.html#the-col-element">col</a></code> element's <code title="attr-col-width"><a href="#attr-col-width">width</a></code> attribute <a href="#maps-to-the-dimension-property">maps to the
  dimension property</a> 'width' on the <code><a href="the-col-element.html#the-col-element">col</a></code>
  element.</p>

  <p>The <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element's <code title="attr-tr-height">height</code> attribute <a href="#maps-to-the-dimension-property">maps to the
  dimension property</a> 'height' on the <code><a href="the-tr-element.html#the-tr-element">tr</a></code>
  element.</p>

  <p>The <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements' <code title="attr-tdth-height"><a href="#attr-tdth-height">height</a></code> attributes <a href="#maps-to-the-dimension-property" title="maps
  to the dimension property">map to the dimension property</a> 'height'
  on the element.</p>

  <p>The <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements' <code title="attr-tdth-width"><a href="#attr-tdth-width">width</a></code> attributes <a href="#maps-to-the-dimension-property" title="maps
  to the dimension property">map to the dimension property</a> 'width'
  on the element.</p>

  <p>When a <code><a href="dom.html#document">Document</a></code> is in <a href="infrastructure.html#quirks-mode">quirks mode</a>,
  vertical margins on <a href="infrastructure.html#html-elements">HTML elements</a> at the top or bottom
  of <code><a href="the-td-element.html#the-td-element">td</a></code> or <code><a href="the-th-element.html#the-th-element">th</a></code> elements are expected to be
  collapsed to zero.</p>

  <hr><p>The <code><a href="the-caption-element.html#the-caption-element">caption</a></code> element unless specified otherwise
  below, and the <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>,
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-tr-element.html#the-tr-element">tr</a></code>, <code><a href="the-td-element.html#the-td-element">td</a></code>, and
  <code><a href="the-th-element.html#the-th-element">th</a></code> elements when they have an <code title="attr-div-align"><a href="#attr-div-align">align</a></code> attribute whose value is an
  <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for either the string
  "<code title="">center</code>" or the string "<code title="">middle</code>", are expected to center text within
  themselves, as if they had their 'text-align' property set to
  'center' in a <a href="#presentational-hints" title="presentational hints">presentational
  hint</a>, and to <a href="#align-descendants">align descendants</a> to the
  center.</p>

  <p>The <code><a href="the-caption-element.html#the-caption-element">caption</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>,
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-tr-element.html#the-tr-element">tr</a></code>, <code><a href="the-td-element.html#the-td-element">td</a></code>, and
  <code><a href="the-th-element.html#the-th-element">th</a></code> elements, when they have an <code title="attr-align">align</code> attribute whose value is an
  <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">left</code>", are expected to left-align text within
  themselves, as if they had their 'text-align' property set to 'left'
  in a <a href="#presentational-hints" title="presentational hints">presentational hint</a>,
  and to <a href="#align-descendants">align descendants</a> to the left.</p>

  <p>The <code><a href="the-caption-element.html#the-caption-element">caption</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>,
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-tr-element.html#the-tr-element">tr</a></code>, <code><a href="the-td-element.html#the-td-element">td</a></code>, and
  <code><a href="the-th-element.html#the-th-element">th</a></code> elements, when they have an <code title="attr-align">align</code> attribute whose value is an
  <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">right</code>", are expected to right-align text within
  themselves, as if they had their 'text-align' property set to
  'right' in a <a href="#presentational-hints" title="presentational hints">presentational
  hint</a>, and to <a href="#align-descendants">align descendants</a> to the right.</p>

  <p>The <code><a href="the-caption-element.html#the-caption-element">caption</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>,
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-tr-element.html#the-tr-element">tr</a></code>, <code><a href="the-td-element.html#the-td-element">td</a></code>, and
  <code><a href="the-th-element.html#the-th-element">th</a></code> elements, when they have an <code title="attr-align">align</code> attribute whose value is an
  <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">justify</code>", are expected to full-justify text within
  themselves, as if they had their 'text-align' property set to
  'justify' in a <a href="#presentational-hints" title="presentational hints">presentational
  hint</a>, and to <a href="#align-descendants">align descendants</a> to the left.</p>

  <p>User agents are expected to have a rule in their user agent
  stylesheet that matches <code><a href="the-th-element.html#the-th-element">th</a></code> elements that have a parent
  node whose computed value for the 'text-align' property is its
  initial value, whose declaration block consists of just a single
  declaration that sets the 'text-align' property to the value
  'center'.</p> <!-- q.v. '-moz-center-or-inherit' -->

  <hr><p>When a <code><a href="the-table-element.html#the-table-element">table</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>,
  <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-tr-element.html#the-tr-element">tr</a></code>,
  <code><a href="the-td-element.html#the-td-element">td</a></code>, or <code><a href="the-th-element.html#the-th-element">th</a></code> element has a <code title="attr-background"><a href="#attr-background">background</a></code> attribute set to a
  non-empty value, the new value is expected to be <a href="urls.html#resolve-a-url" title="resolve a url">resolved</a> relative to the element, and
  if this is successful, the user agent is expected to treat the
  attribute as a <a href="#presentational-hints" title="presentational hints">presentational
  hint</a> setting the element's 'background-image' property to the
  resulting <a href="urls.html#absolute-url">absolute URL</a>.</p>

  <p>When a <code><a href="the-table-element.html#the-table-element">table</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>,
  <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-tr-element.html#the-tr-element">tr</a></code>,
  <code><a href="the-td-element.html#the-td-element">td</a></code>, or <code><a href="the-th-element.html#the-th-element">th</a></code> element has a <code title="">bgcolor</code> attribute set, the new value is expected to
  be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy color
  value</a>, and if that does not return an error, the user agent
  is expected to treat the attribute as a <a href="#presentational-hints" title="presentational
  hints">presentational hint</a> setting the element's
  'background-color' property to the resulting color.</p>

  <p>When a <code><a href="the-table-element.html#the-table-element">table</a></code> element has a <code title="attr-table-bordercolor">bordercolor</code> attribute, its
  value is expected to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a
  legacy color value</a>, and if that does not return an error, the
  user agent is expected to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  element's 'border-top-color', 'border-right-color',
  'border-bottom-color', and 'border-right-color' properties to the
  resulting color.</p>

  <hr><p>The <code><a href="the-table-element.html#the-table-element">table</a></code> element's <code title="attr-table-border"><a href="the-table-element.html#attr-table-border">border</a></code> attribute <a href="#maps-to-the-pixel-length-property" title="maps
  to the pixel length property">maps to the pixel length
  properties</a> 'border-top-width', 'border-right-width',
  'border-bottom-width', 'border-left-width' on the element. If the
  attribute is present but parsing the attribute's value using the
  <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative integers</a> generates an
  error, a default value of 1px is expected to be used for that
  property instead.</p>

  <p>Rules marked "<dfn id="magic-border-selector">only if border is
  not equivalent to zero</dfn>" in the CSS block above is expected to
  only be applied if the <code title="attr-table-border"><a href="the-table-element.html#attr-table-border">border</a></code>
  attribute mentioned in the selectors for the rule is not only
  present but, when parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing
  non-negative integers</a>, is also found to have a value other
  than zero or to generate an error.</p>

  <hr><p>In <a href="infrastructure.html#quirks-mode">quirks mode</a>, a <code><a href="the-td-element.html#the-td-element">td</a></code> element or a
  <code><a href="the-th-element.html#the-th-element">th</a></code> element that has a <code title="attr-tdth-nowrap"><a href="#attr-tdth-nowrap">nowrap</a></code> attribute but also has a
  <code title="attr-tdth-width"><a href="#attr-tdth-width">width</a></code> attribute whose value,
  when parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-dimension-values">rules for parsing dimension
  values</a>, is found to be a length (not an error or a number
  classified as a percentage), is expected to have a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  element's 'white-space' property to 'normal', overriding the rule in
  the CSS block above that sets it to 'nowrap'.</p>
  <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1793 -->
  <!-- note that the "rules for parsing dimension values" can't return 0, if the value is "0" they treat it as an error -->


  <h4 id="form-controls"><span class="secno">10.3.10 </span>Form controls</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input, select, option, optgroup, button, textarea, keygen {
  text-indent: initial;
}

textarea { white-space: pre-wrap; }
</pre>

  <p>In <a href="infrastructure.html#quirks-mode">quirks mode</a>, the following rules are also
  expected to apply:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input { box-sizing: border-box; }</pre>

  <p>Each kind of form control is also given a specific default
  binding, as described in subsequent sections, which implements the
  look and feel of the control.</p>



  <h4 id="the-hr-element-0"><span class="secno">10.3.11 </span>The <code><a href="the-hr-element.html#the-hr-element">hr</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

hr { color: gray; border-style: inset; border-width: 1px; margin: 0.5em auto; }</pre>

  <p>The following rules are also expected to apply, as
  <a href="#presentational-hints">presentational hints</a>:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

hr[align=left] { margin-left: 0; margin-right: auto; }
hr[align=right] { margin-left: auto; margin-right: 0; }
hr[align=center] { margin-left: auto; margin-right: auto; }
hr[color], hr[noshade] { border-style: solid; }</pre>

  <p>If an <code><a href="the-hr-element.html#the-hr-element">hr</a></code> element has either a <code title="attr-hr-color"><a href="#attr-hr-color">color</a></code> attribute or a <code title="attr-hr-noshade"><a href="#attr-hr-noshade">noshade</a></code> attribute, and furthermore
  also has a <code title="attr-hr-size"><a href="#attr-hr-size">size</a></code> attribute, and
  parsing that attribute's value using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing
  non-negative integers</a> doesn't generate an error, then the
  user agent is expected to use the parsed value divided by two as a
  pixel length for <a href="#presentational-hints">presentational hints</a> for the properties
  'border-top-width', 'border-right-width', 'border-bottom-width', and
  'border-left-width' on the element.</p>

  <p>Otherwise, if an <code><a href="the-hr-element.html#the-hr-element">hr</a></code> element has neither a <code title="attr-hr-color"><a href="#attr-hr-color">color</a></code> attribute nor a <code title="attr-hr-noshade"><a href="#attr-hr-noshade">noshade</a></code> attribute, but does have a
  <code title="attr-hr-size"><a href="#attr-hr-size">size</a></code> attribute, and parsing that
  attribute's value using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative
  integers</a> doesn't generate an error, then: if the parsed value
  is one, then the user agent is expected to use the attribute as a
  <a href="#presentational-hints" title="presentational hints">presentational hint</a>
  setting the element's 'border-bottom-width' to 0; otherwise, if the
  parsed value is greater than one, then the user agent is expected to
  use the parsed value minus two as a pixel length for
  <a href="#presentational-hints">presentational hints</a> for the 'height' property on the
  element.</p>

  <p>The <code title="attr-hr-width"><a href="#attr-hr-width">width</a></code> attribute on an
  <code><a href="the-hr-element.html#the-hr-element">hr</a></code> element <a href="#maps-to-the-dimension-property">maps to the dimension property</a>
  'width' on the element.</p>

  <p>When an <code><a href="the-hr-element.html#the-hr-element">hr</a></code> element has a <code title="attr-hr-color"><a href="#attr-hr-color">color</a></code> attribute, its value is expected
  to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy color
  value</a>, and if that does not return an error, the user agent
  is expected to treat the attribute as a <a href="#presentational-hints" title="presentational
  hints">presentational hint</a> setting the element's 'color'
  property to the resulting color.</p>



  <h4 id="the-fieldset-element-0"><span class="secno">10.3.12 </span>The <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

fieldset {
  margin-left: 2px; margin-right: 2px;
  border: groove 2px ThreeDFace;
  padding: 0.35em 0.625em 0.75em;
}</pre>

  <p>The <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> element is expected to establish a new
  block formatting context.</p>

  <p>If the <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> element has a child that matches the
  conditions in the list below, then the first such child is the
  <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> element's <dfn id="rendered-legend">rendered legend</dfn>:</p>

  <ul class="brief"><li>The child is a <code><a href="the-legend-element.html#the-legend-element">legend</a></code> element.</li>

   <li>The child is not out-of-flow (e.g. not absolutely positioned or floated).</li>

   <li>The child is generating a box (e.g. it is not 'display:none').</li>

  </ul><p>A <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> element's <a href="#rendered-legend">rendered legend</a>,
  if any, is expected to be rendered over the top border edge of the
  <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code> element as a 'block' box (overriding any
  explicit 'display' value). In the absence of an explicit width, the
  box should shrink-wrap. If the <code><a href="the-legend-element.html#the-legend-element">legend</a></code> element in
  question has an <code title="attr-legend-align"><a href="#attr-legend-align">align</a></code>
  attribute, and its value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>
  match for one of the strings in the first column of the following
  table, then the <code><a href="the-legend-element.html#the-legend-element">legend</a></code> is expected to be rendered
  horizontally aligned over the border edge in the position given in
  the corresponding cell on the same row in the second column. If the
  attribute is absent or has a value that doesn't match any of the
  cases in the table, then the position is expected to be on the right
  if the 'direction' property on this element has a computed value of
  'rtl', and on the left otherwise.</p>

  <table><thead><tr><th>Attribute value
     </th><th>Alignment position
   </th></tr></thead><tbody><tr><td><code title="">left</code>
     </td><td>On the left
    </td></tr><tr><td><code title="">right</code>
     </td><td>On the right
    </td></tr><tr><td><code title="">center</code>
     </td><td>In the middle
  </td></tr></tbody></table><h3 id="replaced-elements"><span class="secno">10.4 </span>Replaced elements</h3>

  <h4 id="embedded-content-1"><span class="secno">10.4.1 </span>Embedded content</h4>

  <p>The <code><a href="the-embed-element.html#the-embed-element">embed</a></code>, <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, and
  <code><a href="the-video-element.html#the-video-element">video</a></code> elements are expected to be treated as replaced
  elements.</p>

  <p>A <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code> element that <a href="#represents">represents</a>
  <a href="content-models.html#embedded-content-2">embedded content</a> is expected to be treated as a
  replaced element. Other <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code> elements are expected to
  be treated as ordinary elements in the rendering model.</p>

  <p>An <code><a href="the-object-element.html#the-object-element">object</a></code> element that <a href="#represents">represents</a> an
  image, plugin, or <a href="#nested-browsing-context">nested browsing context</a> is expected
  to be treated as a replaced element. Other <code><a href="the-object-element.html#the-object-element">object</a></code>
  elements are expected to be treated as ordinary elements in the
  rendering model.</p>

  <p>An <code><a href="#the-applet-element">applet</a></code> element that <a href="#represents">represents</a> a
  <a href="infrastructure.html#plugin">plugin</a> is expected to be treated as a replaced
  element. Other <code><a href="#the-applet-element">applet</a></code> elements are expected to be
  treated as ordinary elements in the rendering model.</p>

  <p>The <code><a href="the-audio-element.html#the-audio-element">audio</a></code> element, when it is <a href="media-elements.html#expose-a-user-interface-to-the-user" title="expose a
  user interface to the user">exposing a user interface</a>, is
  expected to be treated as a replaced element about one line high, as
  wide as is necessary to expose the user agent's user interface
  features. When an <code><a href="the-audio-element.html#the-audio-element">audio</a></code> element is not <a href="media-elements.html#expose-a-user-interface-to-the-user" title="expose a user interface to the user">exposing a user
  interface</a>, the user agent is expected to force its 'display'
  property to compute to 'none', irrespective of CSS rules.</p>

  <p>Whether a <code><a href="the-video-element.html#the-video-element">video</a></code> element is <a href="media-elements.html#expose-a-user-interface-to-the-user" title="expose a
  user interface to the user">exposing a user interface</a> is not
  expected to affect the size of the rendering; controls are expected
  to be overlaid above the page content without causing any layout
  changes, and are expected to disappear when the user does not need
  them.</p>

  <p>When a <code><a href="the-video-element.html#the-video-element">video</a></code> element represents a poster frame or
  frame of video, the poster frame or frame of video is expected to be
  rendered at the largest size that maintains the aspect ratio of that
  poster frame or frame of video without being taller or wider than
  the <code><a href="the-video-element.html#the-video-element">video</a></code> element itself, and is expected to be
  centered in the <code><a href="the-video-element.html#the-video-element">video</a></code> element.</p>

  <p>Any subtitles or captions are expected to be overlayed directly
  on top of their <code><a href="the-video-element.html#the-video-element">video</a></code> element, as defined by the
  relevant rendering rules; for <a href="infrastructure.html#webvtt">WebVTT</a>, those are the
  <a href="infrastructure.html#webvtt-cue-text-rendering-rules">WebVTT cue text rendering rules</a>. <a href="#refsWEBVTT">[WEBVTT]</a></p>

  <p>When the user agent starts <a href="media-elements.html#expose-a-user-interface-to-the-user" title="expose a user interface
  to the user">exposing a user interface</a> for a
  <code><a href="the-video-element.html#the-video-element">video</a></code> element, the user agent should run the
  <a href="media-elements.html#rules-for-updating-the-text-track-rendering">rules for updating the text track rendering</a> of each of
  the <a href="media-elements.html#text-track" title="text track">text tracks</a> in the
  <code><a href="the-video-element.html#the-video-element">video</a></code> element's <a href="media-elements.html#list-of-text-tracks">list of text tracks</a> that
  are <a href="media-elements.html#text-track-showing" title="text track showing">showing</a> (e.g., for <a href="media-elements.html#text-track" title="text track">text tracks</a> based on <a href="infrastructure.html#webvtt">WebVTT</a>,
  the <a href="infrastructure.html#rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text
  tracks</a>). <a href="#refsWEBVTT">[WEBVTT]</a></p>

  <p class="note">Resizing <code><a href="the-video-element.html#the-video-element">video</a></code> and <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code>
  elements does not interrupt video playback or clear the canvas.</p>

  <hr><p>The following CSS rules are expected to apply:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

iframe:not([seamless]) { border: 2px inset; }
iframe[seamless] { display: block; }
<span id="video-object-fit">video { object-fit: contain; }</span></pre>

  </div>




<!--TOPIC:Rendering-->
  <div class="impl">

  <h4 id="images"><span class="secno">10.4.2 </span>Images</h4>

  <p>When an <code><a href="the-img-element.html#the-img-element">img</a></code> element or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
  when its <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
  the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state
  <a href="#represents">represents</a> an image, it is expected to be treated as a
  replaced element.</p>

  <p>When an <code><a href="the-img-element.html#the-img-element">img</a></code> element or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
  when its <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
  the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state
  does not <a href="#represents" title="represents">represent</a> an image, but the
  element already has intrinsic dimensions (e.g. from the
  <a href="dimension-attributes.html#dimension-attributes">dimension attributes</a> or CSS rules), and either the user
  agent has reason to believe that the image will become <i title="img-available"><a href="the-img-element.html#img-available">available</a></i><!--input-img-available also-->
  and be rendered in due course or the <code><a href="dom.html#document">Document</a></code> is in
  <a href="infrastructure.html#quirks-mode">quirks mode</a>, the element is expected to be treated as a
  replaced element whose content is the text that the element
  represents, if any, optionally alongside an icon indicating that the
  image is being obtained. For <code><a href="the-input-element.html#the-input-element">input</a></code> elements, the text
  is expected to appear button-like to indicate that the element is a
  <a href="forms.html#concept-button" title="concept-button">button</a>.</p>

  <p>When an <code><a href="the-img-element.html#the-img-element">img</a></code> element <a href="#represents">represents</a> some
  text and the user agent does not expect this to change, the element
  is expected to be treated as a non-replaced phrasing element whose
  content is the text, optionally with an icon indicating that an
  image is missing.</p>

  <p>When an <code><a href="the-img-element.html#the-img-element">img</a></code> element <a href="#represents">represents</a> nothing
  and the user agent does not expect this to change, the element is
  expected to not be rendered at all.</p>

  <p>When an <code><a href="the-img-element.html#the-img-element">img</a></code> element might be a key part of the
  content, but neither the image nor any kind of alternative text is
  available, and the user agent does not expect this to change, the
  element is expected to be treated as a non-replaced phrasing element
  whose content is an icon indicating that an image is missing.</p>
  <!-- there's also a should requirement for this case in the <img>
  section itself -->

  <p>When an <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state does not
  <a href="#represents" title="represents">represent</a> an image and the user
  agent does not expect this to change, the element is expected to be
  treated as a replaced element consisting of a button whose content
  is the element's alternative text. The intrinsic dimensions of the
  button are expected to be about one line in height and whatever
  width is necessary to render the text on one line.</p>

  <p>The icons mentioned above are expected to be relatively small so
  as not to disrupt most text but be easily clickable. In a visual
  environment, for instance, icons could be 16 pixels by 16 pixels
  square, or 1em by 1em if the images are scalable. In an audio
  environment, the icon could be a short bleep. The icons are intended
  to indicate to the user that they can be used to get to whatever
  options the UA provides for images, and, where appropriate, are
  expected to provide access to the context menu that would have come
  up if the user interacted with the actual image.</p>

  <hr><p>All animated images with the same <a href="urls.html#absolute-url">absolute URL</a> and
  the same image data are expected to be rendered synchronized to the
  same timeline as a group, with the timeline starting at the time of
  the most recent addition to the group.</p>

  <p class="note">In other words, the animation loop of an animated
  image is restarted each time another image with the same
  <a href="urls.html#absolute-url">absolute URL</a> and image data begins to animate, e.g.
  after being inserted into the document.</p>

  <hr><p>The following CSS rules are expected to apply when the
  <code><a href="dom.html#document">Document</a></code> is in <a href="infrastructure.html#quirks-mode">quirks mode</a>:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

img[align=left i] { margin-right: 3px; }
img[align=right i] { margin-left: 3px; }</pre>

  </div>


  <div class="impl">

  <h4 id="attributes-for-embedded-content-and-images"><span class="secno">10.4.3 </span>Attributes for embedded content and images</h4>

  <p>The following CSS rules are expected to apply as
  <a href="#presentational-hints">presentational hints</a>:</p>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

iframe[frameborder=0], iframe[frameborder=no i] { border: none; }

applet[align=left i], embed[align=left i], iframe[align=left i],
img[align=left i], input[type=image i][align=left i], object[align=left i] {
  float: left;
}

applet[align=right i], embed[align=right i], iframe[align=right i],
img[align=right i], input[type=image i][align=right i], object[align=right i] {
  float: right;
}

applet[align=top i], embed[align=top i], iframe[align=top i],
img[align=top i], input[type=image i][align=top i], object[align=top i] {
  vertical-align: top;
}

applet[align=baseline i], embed[align=baseline i], iframe[align=baseline i],
img[align=baseline i], input[type=image i][align=baseline i], object[align=baseline i] {
  vertical-align: baseline;
}

applet[align=texttop i], embed[align=texttop i], iframe[align=texttop i],
img[align=texttop i], input[type=image i][align=texttop i], object[align=texttop i] {
  vertical-align: text-top;
}

applet[align=absmiddle i], embed[align=absmiddle i], iframe[align=absmiddle i],
img[align=absmiddle i], input[type=image i][align=absmiddle i], object[align=absmiddle i],
applet[align=abscenter i], embed[align=abscenter i], iframe[align=abscenter i],
img[align=abscenter i], input[type=image i][align=abscenter i], object[align=abscenter i] {
  vertical-align: middle;
}

applet[align=bottom i], embed[align=bottom i], iframe[align=bottom i],
img[align=bottom i], input[type=image i][align=bottom i],
object[align=bottom i] {
  vertical-align: bottom;
}</pre>

  <p>When an <code><a href="#the-applet-element">applet</a></code>, <code><a href="the-embed-element.html#the-embed-element">embed</a></code>,
  <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, <code><a href="the-img-element.html#the-img-element">img</a></code>, or <code><a href="the-object-element.html#the-object-element">object</a></code>
  element, or an <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state, has an
  <code title="attr-dim-align">align</code> attribute whose value is
  an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code title="">center</code>" or the string "<code title="">middle</code>", the user agent is expected to act as if the
  element's 'vertical-align' property was set to a value that aligns
  the vertical middle of the element with the parent element's
  baseline.</p>

  <p>The <code title="attr-dim-hspace">hspace</code> attribute of
  <code><a href="#the-applet-element">applet</a></code>, <code><a href="the-embed-element.html#the-embed-element">embed</a></code>, <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>,
  <code><a href="the-img-element.html#the-img-element">img</a></code>, or <code><a href="the-object-element.html#the-object-element">object</a></code> elements, and
  <code><a href="the-input-element.html#the-input-element">input</a></code> elements with a <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state, <a href="#maps-to-the-dimension-property" title="maps to the dimension property">maps to the dimension
  properties</a> 'margin-left' and 'margin-right' on the
  element.</p>

  <p>The <code title="attr-dim-vspace">vspace</code> attribute of
  <code><a href="#the-applet-element">applet</a></code>, <code><a href="the-embed-element.html#the-embed-element">embed</a></code>, <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>,
  <code><a href="the-img-element.html#the-img-element">img</a></code>, or <code><a href="the-object-element.html#the-object-element">object</a></code> elements, and
  <code><a href="the-input-element.html#the-input-element">input</a></code> elements with a <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state, <a href="#maps-to-the-dimension-property" title="maps to the dimension property">maps to the dimension
  properties</a> 'margin-top' and 'margin-bottom' on the
  element.</p>

  <p>When an <code><a href="the-img-element.html#the-img-element">img</a></code> element, <code><a href="the-object-element.html#the-object-element">object</a></code> element, or
  <code><a href="the-input-element.html#the-input-element">input</a></code> element with a <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state is contained
  within a <a href="#hyperlink">hyperlink</a> and has a <code title="attr-dim-border">border</code> attribute whose value, when
  parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative
  integers</a>, is found to be a number greater than zero, the user
  agent is expected to use the parsed value for eight
  <a href="#presentational-hints">presentational hints</a>: four setting the parsed value as
  a pixel length for the element's 'border-top-width',
  'border-right-width', 'border-bottom-width', and 'border-left-width'
  properties, and four setting the element's 'border-top-style',
  'border-right-style', 'border-bottom-style', and 'border-left-style'
  properties to the value 'solid'.</p>

  <p id="dimRendering">The <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">width</a></code>
  and <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">height</a></code> attributes on
  <code><a href="#the-applet-element">applet</a></code>, <code><a href="the-embed-element.html#the-embed-element">embed</a></code>, <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>,
  <code><a href="the-img-element.html#the-img-element">img</a></code>, <code><a href="the-object-element.html#the-object-element">object</a></code> or <code><a href="the-video-element.html#the-video-element">video</a></code>
  elements, and <code><a href="the-input-element.html#the-input-element">input</a></code> elements with a <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state, <a href="#maps-to-the-dimension-property" title="maps to the dimension property">map to the dimension
  properties</a> 'width' and 'height' on the element
  respectively.</p>

  </div>


  <div class="impl">

  <h4 id="image-maps-0"><span class="secno">10.4.4 </span>Image maps</h4>

  <p>Shapes on an <a href="image-maps.html#image-map">image map</a> are expected to act, for the
  purpose of the CSS cascade, as elements independent of the original
  <code><a href="the-area-element.html#the-area-element">area</a></code> element that happen to match the same style rules
  but inherit from the <code><a href="the-img-element.html#the-img-element">img</a></code> or <code><a href="the-object-element.html#the-object-element">object</a></code>
  element.</p>

  <p>For the purposes of the rendering, only the 'cursor' property is
  expected to have any effect on the shape.</p>

  <p class="example">Thus, for example, if an <code><a href="the-area-element.html#the-area-element">area</a></code>
  element has a <code title="attr-style"><a href="global-attributes.html#the-style-attribute">style</a></code> attribute that
  sets the 'cursor' property to 'help', then when the user designates
  that shape, the cursor would change to a Help cursor.</p>

  <p class="example">Similarly, if an <code><a href="the-area-element.html#the-area-element">area</a></code> element had a
  CSS rule that set its 'cursor' property to 'inherit' (or if no rule
  setting the 'cursor' property matched the element at all), the
  shape's cursor would be inherited from the <code><a href="the-img-element.html#the-img-element">img</a></code> or
  <code><a href="the-object-element.html#the-object-element">object</a></code> element of the <a href="image-maps.html#image-map">image map</a>, not from
  the parent of the <code><a href="the-area-element.html#the-area-element">area</a></code> element.</p>

  </div>


  <div class="impl">

  <h4 id="toolbars-0"><span class="secno">10.4.5 </span>Toolbars</h4>

  <p>When a <code><a href="#the-menu-element">menu</a></code> element's <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#toolbar-state" title="toolbar state">toolbar</a> state, the element is
  expected to be treated as a replaced element with a height about two
  lines high and a width derived from the contents of the element.</p>

  <p>The element is expected to have, by default, the appearance of a
  toolbar on the user agent's platform. It is expected to contain the
  menu that is <a href="#building-menus-and-toolbars" title="building menus and toolbars">built</a>
  from the element.</p>

  </div>


  <div class="impl">

  <h3 id="bindings"><span class="secno">10.5 </span>Bindings</h3>

  <h4 id="introduction-9"><span class="secno">10.5.1 </span>Introduction</h4>

  <p>A number of elements have their rendering defined in terms of the
  'binding' property. <a href="#refsBECSS">[BECSS]</a></p>

  <p>The CSS snippets below set the 'binding' property to a
  user-agent-defined value, represented below by keywords like <code title=""><i title="">button</i></code>. The rules then described for
  these bindings are only expected to apply if the element's 'binding'
  property has not been overridden (e.g. by the author) to have
  another value.</p>

  <p>Exactly how the bindings are implemented is not specified by this
  specification. User agents are encouraged to make their bindings set
  the 'appearance' CSS property appropriately to achieve
  platform-native appearances for widgets, and are expected to
  implement any relevant animations, etc, that are appropriate for the
  platform. <a href="#refsCSSUI">[CSSUI]</a></p>

  </div>


  <div class="impl">

  <h4 id="the-button-element-0"><span class="secno">10.5.2 </span>The <code><a href="the-button-element.html#the-button-element">button</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

button { binding: <i title="">button</i>; }</pre>

  <p>When the <i title="">button</i> binding applies to a
  <code><a href="the-button-element.html#the-button-element">button</a></code> element, the element is expected to render as an
  'inline-block' box rendered as a button whose contents are the
  contents of the element.</p>

  </div>


  <div class="impl">

  <h4 id="the-details-element-0"><span class="secno">10.5.3 </span>The <code><a href="#the-details-element">details</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

details { binding: <i title="">details</i>; }</pre>

  <p>When the <i title="">details</i> binding applies to a
  <code><a href="#the-details-element">details</a></code> element, the element is expected to render as a
  'block' box with its 'padding-left' property set to '40px' for
  left-to-right elements (<a href="#ltr-specific">LTR-specific</a>) and with its
  'padding-right' property set to '40px' for right-to-left
  elements. The element's shadow tree is expected to take the
  element's first child <code><a href="#the-summary-element">summary</a></code> element, if any, and
  place it in a first 'block' box container, and then take the
  element's remaining descendants, if any, and place them in a second
  'block' box container.</p>

  <p>The first container is expected to contain at least one line box,
  and that line box is expected to contain a disclosure widget
  (typically a triangle), horizontally positioned within the left
  padding of the <code><a href="#the-details-element">details</a></code> element. That widget is expected
  to allow the user to request that the details be shown or
  hidden.</p>

  <p>The second container is expected to have its 'overflow' property
  set to 'hidden'. When the <code><a href="#the-details-element">details</a></code> element does not have
  an <code title="attr-details-open"><a href="#attr-details-open">open</a></code> attribute, this
  second container is expected to be removed from the rendering.</p>

  <!-- http://mail.gnome.org/archives/usability/2006-June/msg00015.html -->

  </div>

  <div class="impl">

  <h4 id="the-input-element-as-a-text-entry-widget"><span class="secno">10.5.4 </span>The <code><a href="the-input-element.html#the-input-element">input</a></code> element as a text entry widget</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input { binding: <i title="">input-textfield</i>; }
input[type=password i] { binding: <i title="">input-password</i>; }
/* later rules override this for other values of type="" */</pre>

  <p>When the <i title="">input-textfield</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a>, <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-search">Search</a>, <a href="states-of-the-type-attribute.html#telephone-state-(type=tel)" title="attr-input-type-tel">Telephone</a>, <a href="states-of-the-type-attribute.html#url-state-(type=url)" title="attr-input-type-url">URL</a>, or <a href="states-of-the-type-attribute.html#e-mail-state-(type=email)" title="attr-input-type-email">E-mail</a> state, the element is
  expected to render as an 'inline-block' box rendered as a text
  field.</p>

  <p>When the <i title="">input-password</i> binding applies, to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#password-state-(type=password)" title="attr-input-type-password">Password</a> state, the element
  is expected to render as an 'inline-block' box rendered as a text
  field whose contents are obscured.</p>

  <p>If an <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in one of the above
  states has a <code title="attr-input-size"><a href="common-input-element-attributes.html#attr-input-size">size</a></code> attribute,
  and parsing that attribute's value using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing
  non-negative integers</a> doesn't generate an error, then the
  user agent is expected to use the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> for the
  'width' property on the element, with the value obtained from
  applying the <a href="#converting-a-character-width-to-pixels">converting a character width to pixels</a>
  algorithm to the value of the attribute.</p>

  <p>If an <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in one of the above
  states does <em>not</em> have a <code title="attr-input-size"><a href="common-input-element-attributes.html#attr-input-size">size</a></code> attribute, then the user agent
  is expected to act as if it had a user-agent-level style sheet rule
  setting the 'width' property on the element to the value obtained
  from applying the <a href="#converting-a-character-width-to-pixels">converting a character width to
  pixels</a> algorithm to the number 20.</p>

  <p>The <dfn id="converting-a-character-width-to-pixels">converting a character width to pixels</dfn> algorithm
  returns <span title="">(<var title="">size</var>-1)&#215;<var title="">avg</var>&#160;+&#160;<var title="">max</var></span>, where
  <var title="">size</var> is the character width to convert, <var title="">avg</var> is the average character width of the primary
  font for the element for which the algorithm is being run, in
  pixels, and <var title="">max</var> is the maximum character width
  of that same font, also in pixels. (The element's 'letter-spacing'
  property does not affect the result.)</p>

  </div>


  <div class="impl">

  <h4 id="the-input-element-as-domain-specific-widgets"><span class="secno">10.5.5 </span>The <code><a href="the-input-element.html#the-input-element">input</a></code> element as domain-specific widgets</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input[type=datetime i] { binding: <i title="">input-datetime</i>; }
input[type=date i] { binding: <i title="">input-date</i>; }
input[type=month i] { binding: <i title="">input-month</i>; }
input[type=week i] { binding: <i title="">input-week</i>; }
input[type=time i] { binding: <i title="">input-time</i>; }
input[type=datetime-local i] { binding: <i title="">input-datetime-local</i>; }
input[type=number i] { binding: <i title="">input-number</i>; }</pre>

  <p>When the <i title="">input-datetime</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#date-and-time-state-(type=datetime)" title="attr-input-type-datetime">Date and Time</a> state, the
  element is expected to render as an 'inline-block' box depicting a
  Date and Time control.</p>

  <p>When the <i title="">input-date</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#date-state-(type=date)" title="attr-input-type-date">Date</a> state, the element is
  expected to render as an 'inline-block' box depicting a Date
  control.</p>

  <p>When the <i title="">input-month</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#month-state-(type=month)" title="attr-input-type-month">Month</a> state, the element is
  expected to render as an 'inline-block' box depicting a Month
  control.</p>

  <p>When the <i title="">input-week</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#week-state-(type=week)" title="attr-input-type-week">Week</a> state, the element is
  expected to render as an 'inline-block' box depicting a Week
  control.</p>

  <p>When the <i title="">input-time</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#time-state-(type=time)" title="attr-input-type-time">Time</a> state, the element is
  expected to render as an 'inline-block' box depicting a Time
  control.</p>

  <p>When the <i title="">input-datetime-local</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#local-date-and-time-state-(type=datetime-local)" title="attr-input-type-datetime-local">Local Date and Time</a>
  state, the element is expected to render as an 'inline-block' box
  depicting a Local Date and Time control.</p>

  <p>When the <i title="">input-number</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#number-state-(type=number)" title="attr-input-type-number">Number</a> state, the element is
  expected to render as an 'inline-block' box depicting a Number
  control.</p>

  <p>These controls are all expected to be about one line high, and
  about as wide as necessary to show the widest possible value.</p>

  </div>


  <div class="impl">

  <h4 id="the-input-element-as-a-range-control"><span class="secno">10.5.6 </span>The <code><a href="the-input-element.html#the-input-element">input</a></code> element as a range control</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input[type=range i] { binding: <i title="">input-range</i>; }</pre>

  <p>When the <i title="">input-range</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#range-state-(type=range)" title="attr-input-type-range">Range</a> state, the element is
  expected to render as an 'inline-block' box depicting a slider
  control.</p>

  <p>When the control is wider than it is tall (or square), the
  control is expected to be a horizontal slider, with the lowest value
  on the right if the 'direction' property on this element has a
  computed value of 'rtl', and on the left otherwise. When the control
  is taller than it is wide, it is expected to be a vertical slider,
  with the lowest value on the bottom.</p>

  <p>Predefined suggested values (provided by the <code title="attr-input-list"><a href="common-input-element-attributes.html#attr-input-list">list</a></code> attribute) are expected to be
  shown as tick marks on the slider, which the slider can snap to.</p>

  <p>User agents are expected to use the used value of the 'direction'
  property on the element to determine the direction in which the
  slider operates. Typically, a left-to-right ('ltr') horizontal
  control would have the lowest value on the left and the highest
  value on the right, and vice versa.</p>

  </div>


  <div class="impl">

  <h4 id="the-input-element-as-a-color-well"><span class="secno">10.5.7 </span>The <code><a href="the-input-element.html#the-input-element">input</a></code> element as a color well</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input[type=color i] { binding: <i title="">input-color</i>; }</pre>

  <p>When the <i title="">input-color</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#color-state-(type=color)" title="attr-input-type-color">Color</a> state, the element is
  expected to render as an 'inline-block' box depicting a color well,
  which, when activated, provides the user with a color picker (e.g. a
  color wheel or color palette) from which the color can be
  changed.</p>

  <p>Predefined suggested values (provided by the <code title="attr-input-list"><a href="common-input-element-attributes.html#attr-input-list">list</a></code> attribute) are expected to be
  shown in the color picker interface, not on the color well
  itself.</p>

  </div>


  <div class="impl">

  <h4 id="the-input-element-as-a-checkbox-and-radio-button-widgets"><span class="secno">10.5.8 </span>The <code><a href="the-input-element.html#the-input-element">input</a></code> element as a checkbox and radio button widgets</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input[type=checkbox i] { binding: <i title="">input-checkbox</i>; }
input[type=radio i] { binding: <i title="">input-radio</i>; }</pre>

  <p>When the <i title="">input-checkbox</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)" title="attr-input-type-checkbox">Checkbox</a> state, the element
  is expected to render as an 'inline-block' box containing a single
  checkbox control, with no label.</p>

  <p>When the <i title="">input-radio</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#radio-button-state-(type=radio)" title="attr-input-type-radio">Radio Button</a> state, the element
  is expected to render as an 'inline-block' box containing a single
  radio button control, with no label.</p>

  </div>


  <div class="impl">

  <h4 id="the-input-element-as-a-file-upload-control"><span class="secno">10.5.9 </span>The <code><a href="the-input-element.html#the-input-element">input</a></code> element as a file upload control</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input[type=file i] { binding: <i title="">input-file</i>; }</pre>

  <p>When the <i title="">input-file</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#file-upload-state-(type=file)" title="attr-input-type-file">File Upload</a> state, the element
  is expected to render as an 'inline-block' box containing a span of
  text giving the filename(s) of the <a href="states-of-the-type-attribute.html#concept-input-type-file-selected" title="concept-input-type-file-selected">selected files</a>, if
  any, followed by a button that, when activated, provides the user
  with a file picker from which the selection can be changed.</p>

  </div>


  <div class="impl">

  <h4 id="the-input-element-as-a-button"><span class="secno">10.5.10 </span>The <code><a href="the-input-element.html#the-input-element">input</a></code> element as a button</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

input[type=submit i], input[type=reset i], input[type=button i] {
  binding: <i title="">input-button</i>;
}</pre>

  <p>When the <i title="">input-button</i> binding applies to an
  <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#submit-button-state-(type=submit)" title="attr-input-type-submit">Submit Button</a>, <a href="states-of-the-type-attribute.html#reset-button-state-(type=reset)" title="attr-input-type-reset">Reset Button</a>, or <a href="states-of-the-type-attribute.html#button-state-(type=button)" title="attr-input-type-button">Button</a> state, the element is
  expected to render as an 'inline-block' box rendered as a button,
  about one line high, containing the contents of the element's <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">value</a></code> attribute, if any, or text
  derived from the element's <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code>
  attribute in a user-agent-defined (and probably locale-specific)
  fashion, if not.</p>

  </div>


  <div class="impl">

  <h4 id="the-marquee-element"><span class="secno">10.5.11 </span>The <code><a href="#the-marquee-element-0">marquee</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

marquee { binding: <i title="">marquee</i>; }</pre>

  <p>When the <i title="">marquee</i> binding applies to a
  <code><a href="#the-marquee-element-0">marquee</a></code> element, while the element is <a href="#concept-marquee-on" title="concept-marquee-on">turned on</a>, the element is expected
  to render in an animated fashion according to its attributes as
  follows:</p>

  <dl><dt>If the element's <code title="attr-marquee-behavior"><a href="#attr-marquee-behavior">behavior</a></code> attribute is in the
   <a href="#attr-marquee-behavior-scroll" title="attr-marquee-behavior-scroll">scroll</a> state</dt>

   <dd>

    <p>Slide the contents of the element in the direction described by
    the <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code>
    attribute as defined below, such that it begins off the start side
    of the <code><a href="#the-marquee-element-0">marquee</a></code>, and ends flush with the inner end
    side.</p>

    <p class="example">For example, if the <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code> attribute is <a href="#attr-marquee-direction-left" title="attr-marquee-direction-left">left</a> (the default),
    then the contents would start such that their left edge are off
    the side of the right edge of the <code><a href="#the-marquee-element-0">marquee</a></code>'s content
    area, and the contents would then slide up to the point where the
    left edge of the contents are flush with the left inner edge of
    the <code><a href="#the-marquee-element-0">marquee</a></code>'s content area.</p>

    <p>Once the animation has ended, the user agent is expected to
    <a href="#increment-the-marquee-current-loop-index">increment the marquee current loop index</a>. If the
    element is still <a href="#concept-marquee-on" title="concept-marquee-on">turned on</a>
    after this, then the user agent is expected to restart the
    animation.</p>

   </dd>

   <dt>If the element's <code title="attr-marquee-behavior"><a href="#attr-marquee-behavior">behavior</a></code> attribute is in the
   <a href="#attr-marquee-behavior-slide" title="attr-marquee-behavior-slide">slide</a> state</dt>

   <dd>

    <p>Slide the contents of the element in the direction described by
    the <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code>
    attribute as defined below, such that it begins off the start side
    of the <code><a href="#the-marquee-element-0">marquee</a></code>, and ends off the end side of the
    <code><a href="#the-marquee-element-0">marquee</a></code>.</p>

    <p class="example">For example, if the <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code> attribute is <a href="#attr-marquee-direction-left" title="attr-marquee-direction-left">left</a> (the default),
    then the contents would start such that their left edge are off
    the side of the right edge of the <code><a href="#the-marquee-element-0">marquee</a></code>'s content
    area, and the contents would then slide up to the point where the
    <em>right</em> edge of the contents are flush with the left inner
    edge of the <code><a href="#the-marquee-element-0">marquee</a></code>'s content area.</p>

    <p>Once the animation has ended, the user agent is expected to
    <a href="#increment-the-marquee-current-loop-index">increment the marquee current loop index</a>. If the
    element is still <a href="#concept-marquee-on" title="concept-marquee-on">turned on</a>
    after this, then the user agent is expected to restart the
    animation.</p>

   </dd>

   <dt>If the element's <code title="attr-marquee-behavior"><a href="#attr-marquee-behavior">behavior</a></code> attribute is in the
   <a href="#attr-marquee-behavior-alternate" title="attr-marquee-behavior-alternate">alternate</a>
   state</dt>

   <dd>

    <p>When the <a href="#marquee-current-loop-index">marquee current loop index</a> is even (or
    zero), slide the contents of the element in the direction
    described by the <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code> attribute as
    defined below, such that it begins flush with the start side of
    the <code><a href="#the-marquee-element-0">marquee</a></code>, and ends flush with the end side of the
    <code><a href="#the-marquee-element-0">marquee</a></code>.</p>

    <p>When the <a href="#marquee-current-loop-index">marquee current loop index</a> is odd, slide
    the contents of the element in the opposite direction than that
    described by the <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code> attribute as
    defined below, such that it begins flush with the end side of the
    <code><a href="#the-marquee-element-0">marquee</a></code>, and ends flush with the start side of the
    <code><a href="#the-marquee-element-0">marquee</a></code>.</p>

    <p class="example">For example, if the <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code> attribute is <a href="#attr-marquee-direction-left" title="attr-marquee-direction-left">left</a> (the default),
    then the contents would with their right edge flush with the right
    inner edge of the <code><a href="#the-marquee-element-0">marquee</a></code>'s content area, and the
    contents would then slide up to the point where the <em>left</em>
    edge of the contents are flush with the left inner edge of the
    <code><a href="#the-marquee-element-0">marquee</a></code>'s content area.</p>

    <p>Once the animation has ended, the user agent is expected to
    <a href="#increment-the-marquee-current-loop-index">increment the marquee current loop index</a>. If the
    element is still <a href="#concept-marquee-on" title="concept-marquee-on">turned on</a>
    after this, then the user agent is expected to continue the
    animation.</p>

   </dd>

  </dl><p>The <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code>
  attribute has the meanings described in the following table:</p>

  <table><thead><tr><th><code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code> attribute state
     </th><th>Direction of animation
     </th><th>Start edge
     </th><th>End edge
     </th><th>Opposite direction
   </th></tr></thead><tbody><tr><td><a href="#attr-marquee-direction-left" title="attr-marquee-direction-left">left</a>
     </td><td>&#8592; Right to left
     </td><td>Right
     </td><td>Left
     </td><td>&#8594; Left to Right
    </td></tr><tr><td><a href="#attr-marquee-direction-right" title="attr-marquee-direction-right">right</a>
     </td><td>&#8594; Left to Right
     </td><td>Left
     </td><td>Right
     </td><td>&#8592; Right to left
    </td></tr><tr><td><a href="#attr-marquee-direction-up" title="attr-marquee-direction-up">up</a>
     </td><td>&#8593; Up (Bottom to Top)
     </td><td>Bottom
     </td><td>Top
     </td><td>&#8595; Down (Top to Bottom)
    </td></tr><tr><td><a href="#attr-marquee-direction-down" title="attr-marquee-direction-down">down</a>
     </td><td>&#8595; Down (Top to Bottom)
     </td><td>Top
     </td><td>Bottom
     </td><td>&#8593; Up (Bottom to Top)
  </td></tr></tbody></table><p>In any case, the animation should proceed such that there is a
  delay given by the <a href="#marquee-scroll-interval">marquee scroll interval</a> between each
  frame, and such that the content moves at most the distance given by
  the <a href="#marquee-scroll-distance">marquee scroll distance</a> with each frame.</p>

  <p>When a <code><a href="#the-marquee-element-0">marquee</a></code> element has a <code title="attr-marquee-bgcolor">bgcolor</code> attribute set, the value
  is expected to be parsed using the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy
  color value</a>, and if that does not return an error, the user
  agent is expected to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  element's 'background-color' property to the resulting color.</p>

  <p>The <code title="attr-marquee-width">width</code> and <code title="attr-marquee-height">height</code> attributes on a
  <code><a href="#the-marquee-element-0">marquee</a></code> element <a href="#maps-to-the-dimension-property" title="maps to the dimension
  property">map to the dimension properties</a> 'width' and
  'height' on the element respectively.</p>

  <p>The intrinsic height of a <code><a href="#the-marquee-element-0">marquee</a></code> element with its
  <code title="attr-marquee-direction"><a href="#attr-marquee-direction">direction</a></code> attribute in
  the <a href="#attr-marquee-direction-up" title="attr-marquee-direction-up">up</a> or <a href="#attr-marquee-direction-down" title="attr-marquee-direction-down">down</a> states is 200 CSS
  pixels.</p>

  <p>The <code title="attr-marquee-vspace">vspace</code> attribute of
  a <code><a href="#the-marquee-element-0">marquee</a></code> element <a href="#maps-to-the-dimension-property" title="maps to the dimension
  property">maps to the dimension properties</a> 'margin-top' and
  'margin-bottom' on the element. The <code title="attr-marquee-hspace">hspace</code> attribute of a
  <code><a href="#the-marquee-element-0">marquee</a></code> element <a href="#maps-to-the-dimension-property" title="maps to the dimension
  property">maps to the dimension properties</a> 'margin-left' and
  'margin-right' on the element.</p>

  <p>The 'overflow' property on the <code><a href="#the-marquee-element-0">marquee</a></code> element is
  expected to be ignored; overflow is expected to always be
  hidden.</p>

  </div>


  <div class="impl">

  <h4 id="the-meter-element-0"><span class="secno">10.5.12 </span>The <code><a href="the-meter-element.html#the-meter-element">meter</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

meter { binding: <i title="">meter</i>; }</pre>

  <p>When the <i title="">meter</i> binding applies to a
  <code><a href="the-meter-element.html#the-meter-element">meter</a></code> element, the element is expected to render as an
  'inline-block' box with a 'height' of '1em' and a 'width' of '5em',
  a 'vertical-align' of '-0.2em', and with its contents depicting a
  gauge.</p>

  <p>When the element is wider than it is tall (or square), the
  depiction is expected to be of a horizontal gauge, with the minimum
  value on the right if the 'direction' property on this element has a
  computed value of 'rtl', and on the left otherwise. When the element
  is taller than it is wide, it is expected to depict a vertical
  gauge, with the minimum value on the bottom.</p>

  <p>User agents are expected to use a presentation consistent with
  platform conventions for gauges, if any.</p>

  <p class="note">Requirements for what must be depicted in the gauge
  are included in the definition of the <code><a href="the-meter-element.html#the-meter-element">meter</a></code>
  element.</p>

  </div>


  <div class="impl">

  <h4 id="the-progress-element-0"><span class="secno">10.5.13 </span>The <code><a href="the-progress-element.html#the-progress-element">progress</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

progress { binding: <i title="">progress</i>; }</pre>

  <p>When the <i title="">progress</i> binding applies to a
  <code><a href="the-progress-element.html#the-progress-element">progress</a></code> element, the element is expected to render as
  an 'inline-block' box with a 'height' of '1em' and a 'width' of
  '10em', and a 'vertical-align' of '-0.2em'.</p>

  <!-- http://software.hixie.ch/utilities/js/canvas/?c.clearRect(0%2C%200%2C%20640%2C%20480)%3B%0Ac.save()%3B%0Atry%20{%0A%20%20c.fillStyle%20%3D%20'black'%3B%0A%20%20c.font%20%3D%20'8px%20sans-serif'%3B%0A%20%20c.fillText('Wide'%2C%2043%2C105)%3B%0A%20%20c.fillText('Tall'%2C%20100%2C105)%3B%0A%20%20c.fillText('Square'%2C%20128%2C105)%3B%0A%20%20c.font%20%3D%20'700%2010px%20sans-serif'%3B%0A%20%20c.fillText('Progress%20Bars'%2C%2013%2C30)%3B%0A%20%20c.font%20%3D%20'100%2010px%20sans-serif'%3B%0A%20%20c.fillText('(80%25)'%2C%2037%2C45)%3B%0A%20%20c.beginPath()%3B%0A%20%20var%20g%20%3D%20c.createLinearGradient(10%2C0%2C80%2C0)%3B%0A%20%20g.addColorStop(0%2C%20'%2300FF00')%3B%0A%20%20g.addColorStop(0.8%2C%20'%2300FF00')%3B%0A%20%20g.addColorStop(0.9%2C%20'%23FFFF00')%3B%0A%20%20c.fillStyle%20%3D%20g%3B%0A%20%20c.rect(10%2C80%2C80%2C15)%3B%0A%20%20c.fill()%3B%0A%20%20c.strokeStyle%20%3D%20'black'%3B%0A%20%20c.stroke()%3B%0A%20%20c.beginPath()%3B%0A%20%20var%20g%20%3D%20c.createLinearGradient(0%2C80%2C0%2C20)%3B%0A%20%20g.addColorStop(0%2C%20'%2300FF00')%3B%0A%20%20g.addColorStop(0.75%2C%20'%2300FF00')%3B%0A%20%20g.addColorStop(0.85%2C%20'%23FFFF00')%3B%0A%20%20c.fillStyle%20%3D%20g%3B%0A%20%20c.rect(100%2C15%2C15%2C80)%3B%0A%20%20c.fill()%3B%0A%20%20c.strokeStyle%20%3D%20'black'%3B%0A%20%20c.stroke()%3B%0A%0A%20%20c.beginPath()%3B%0A%20%20c.fillStyle%20%3D%20'yellow'%3B%0A%20%20c.arc(140%2C80%2C15%2C0%2C2*Math.PI%2C%20true)%3B%0A%20%20c.fill()%3B%0A%20%20c.beginPath()%3B%0A%20%20c.fillStyle%20%3D%20'lime'%3B%0A%20%20c.moveTo(140%2C80)%3B%0A%20%20c.arc(140%2C80%2C15%2C-Math.PI%2F2%2C1.2*Math.PI%2C%20false)%3B%0A%20%20c.fill()%3B%0A%20%20c.beginPath()%3B%0A%20%20c.arc(140%2C80%2C15%2C0%2C2*Math.PI%2C%20true)%3B%0A%20%20c.strokeStyle%20%3D%20'black'%3B%0A%20%20c.stroke()%3B%0A}%20finally%20{%0A%20%20c.restore()%3B%0A}%0A -->

  <p> <img alt="" class="extra" src="images/sample-progress.png">
  When the element is wider than it is tall, the element is
  expected to be depicted as a horizontal progress bar, with the start
  on the right and the end on the left if the 'direction' property on
  this element has a computed value of 'rtl', and with the start on
  the left and the end on the right otherwise. When the element is
  taller than it is wide, it is expected to depicted as a vertical
  progress bar, with the lowest value on the bottom. When the element
  is square, it is expected to be depicted as a direction-independent
  progress widget (e.g. a circular progress ring).</p>

  <p>User agents are expected to use a presentation consistent with
  platform conventions for progress bars. In particular, user agents
  are expected to use different presentations for determinate and
  indeterminate progress bars. User agents are also expected to vary
  the presentation based on the dimensions of the element.</p>

  <p class="example">For example, on some platforms for showing
  indeterminate progress there is an asynchronous progress indicator
  with square dimensions, which could be used when the element is
  square, and an indeterminate progress bar, which could be used when
  the element is wide.</p>

  <p class="note">Requirements for how to determine if the progress
  bar is determinate or indeterminate, and what progress a determinate
  progress bar is to show, are included in the definition of the
  <code><a href="the-progress-element.html#the-progress-element">progress</a></code> element.</p>

  </div>


  <div class="impl">

  <h4 id="the-select-element-0"><span class="secno">10.5.14 </span>The <code><a href="the-select-element.html#the-select-element">select</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

select { binding: <i title="">select</i>; }</pre>

  <p>When the <i title="">select</i> binding applies to a
  <code><a href="the-select-element.html#the-select-element">select</a></code> element whose <code title="attr-select-multiple"><a href="the-select-element.html#attr-select-multiple">multiple</a></code> attribute is present,
  the element is expected to render as a multi-select list box.</p>

  <p>When the <i title="">select</i> binding applies to a
  <code><a href="the-select-element.html#the-select-element">select</a></code> element whose <code title="attr-select-multiple"><a href="the-select-element.html#attr-select-multiple">multiple</a></code> attribute is absent,
  and the element's <a href="the-select-element.html#concept-select-size" title="concept-select-size">display
  size</a> is greater than 1, the element is expected to render as
  a single-select list box.</p>

  <p>When the element renders as a list box, it is expected to render
  as an 'inline-block' box whose 'height' is the height necessary to
  contain as many rows for items as given by the element's <a href="the-select-element.html#concept-select-size" title="concept-select-size">display size</a>, or four rows if the
  attribute is absent, and whose 'width' is the <a href="#width-of-the-select's-labels">width of the
  <code>select</code>'s labels</a> plus the width of a
  scrollbar.</p>

  <p>When the <i title="">select</i> binding applies to a
  <code><a href="the-select-element.html#the-select-element">select</a></code> element whose <code title="attr-select-multiple"><a href="the-select-element.html#attr-select-multiple">multiple</a></code> attribute is absent,
  and the element's <a href="the-select-element.html#concept-select-size" title="concept-select-size">display
  size</a> is 1, the element is expected to render as a one-line
  drop down box whose width is the <a href="#width-of-the-select's-labels">width of the
  <code>select</code>'s labels</a>.</p>

  <p>In either case (list box or drop-down box), the element's items
  are expected to be the element's <a href="the-select-element.html#concept-select-option-list" title="concept-select-option-list">list of options</a>, with the
  element's <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element children providing headers
  for groups of options where applicable.</p>

  <p>An <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element is expected to be rendered by
  displaying the element's <code title="attr-optgroup-label"><a href="the-optgroup-element.html#attr-optgroup-label">label</a></code> attribute.</p>

  <p>An <code><a href="the-option-element.html#the-option-element">option</a></code> element is expected to be rendered by
  displaying the element's <a href="the-option-element.html#concept-option-label" title="concept-option-label">label</a>, indented under its
  <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code> element if it has one.</p>

  <p>The <dfn id="width-of-the-select's-labels">width of the <code>select</code>'s labels</dfn> is the
  wider of the width necessary to render the widest
  <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code>, and the width necessary to render the widest
  <code><a href="the-option-element.html#the-option-element">option</a></code> element in the element's <a href="the-select-element.html#concept-select-option-list" title="concept-select-option-list">list of options</a> (including
  its indent, if any).</p>

  <p>If a <code><a href="the-select-element.html#the-select-element">select</a></code> element contains a <a href="the-select-element.html#placeholder-label-option">placeholder
  label option</a>, the user agent is expected to render that
  <code><a href="the-option-element.html#the-option-element">option</a></code> in a manner that conveys that it is a label,
  rather than a valid option of the control. This can include
  preventing the <a href="the-select-element.html#placeholder-label-option">placeholder label option</a> from being
  explicitly selected by the user. When the <a href="the-select-element.html#placeholder-label-option">placeholder label
  option</a>'s <a href="the-option-element.html#concept-option-selectedness" title="concept-option-selectedness">selectedness</a> is true, the
  control is expected to be displayed in a fashion that indicates that
  no valid option is currently selected.</p>

  <p>User agents are expected to render the labels in a
  <code><a href="the-select-element.html#the-select-element">select</a></code> in such a manner that any alignment remains
  consistent whether the label is being displayed as part of the page
  or in a menu control.</p>

  </div>


  <div class="impl">

  <h4 id="the-textarea-element-0"><span class="secno">10.5.15 </span>The <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

textarea { binding: <i title="">textarea</i>; white-space: pre-wrap; }</pre>

  <p>When the <i title="">textarea</i> binding applies to a
  <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element, the element is expected to render as
  an 'inline-block' box rendered as a multiline text field.</p>

  <p>If the element has a <code title="attr-textarea-cols"><a href="the-textarea-element.html#attr-textarea-cols">cols</a></code>
  attribute, and parsing that attribute's value using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules
  for parsing non-negative integers</a> doesn't generate an error,
  then the user agent is expected to use the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> for the
  'width' property on the element, with the value being the
  <a href="#textarea-effective-width">textarea effective width</a> (as defined below). Otherwise,
  the user agent is expected to act as if it had a user-agent-level
  style sheet rule setting the 'width' property on the element to the
  <a href="#textarea-effective-width">textarea effective width</a>.</p>

  <p>The <dfn id="textarea-effective-width">textarea effective width</dfn> of a
  <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element is <span><var title="">size</var>&#215;<var title="">avg</var>&#160;+&#160;<var title="">sbw</var></span>, where <var title="">size</var> is the
  element's <a href="the-textarea-element.html#attr-textarea-cols-value" title="attr-textarea-cols-value">character
  width</a>, <var title="">avg</var> is the average character width
  of the primary font of the element, in CSS pixels, and <var title="">sbw</var> is the width of a scroll bar, in CSS pixels. (The
  element's 'letter-spacing' property does not affect the result.)</p>

  <p>If the element has a <code title="attr-textarea-rows"><a href="the-textarea-element.html#attr-textarea-rows">rows</a></code>
  attribute, and parsing that attribute's value using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules
  for parsing non-negative integers</a> doesn't generate an error,
  then the user agent is expected to use the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> for the
  'height' property on the element, with the value being the
  <a href="#textarea-effective-height">textarea effective height</a> (as defined
  below). Otherwise, the user agent is expected to act as if it had a
  user-agent-level style sheet rule setting the 'height' property on
  the element to the <a href="#textarea-effective-height">textarea effective height</a>.</p>

  <p>The <dfn id="textarea-effective-height">textarea effective height</dfn> of a
  <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element is the height in CSS pixels of the
  number of lines specified the element's <a href="the-textarea-element.html#attr-textarea-rows-value" title="attr-textarea-rows-value">character height</a>, plus the
  height of a scrollbar in CSS pixels.</p>

  <p>User agents are expected to apply the 'white-space' CSS property
  to <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements. For historical reasons, if the
  element has a <code title="attr-textarea-wrap"><a href="the-textarea-element.html#attr-textarea-wrap">wrap</a></code> attribute
  whose value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the
  string "<code title="attr-textarea-wrap-off">off</code>", then the
  user agent is expected to treat the attribute as a <a href="#presentational-hints" title="presentational hints">presentational hint</a> setting the
  element's 'white-space' property to 'pre'.</p>

  </div>


  <div class="impl">

  <h4 id="the-keygen-element-0"><span class="secno">10.5.16 </span>The <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code> element</h4>

  <pre class="css">@namespace url(http://www.w3.org/1999/xhtml);

keygen { binding: <i title="">keygen</i>; }</pre>

  <p>When the <i title="">keygen</i> binding applies to a
  <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code> element, the element is expected to render as an
  'inline-block' box containing a user interface to configure the key
  pair to be generated.</p>

  </div>



  <div class="impl">

  <h3 id="frames-and-framesets"><span class="secno">10.6 </span>Frames and framesets</h3>

  <p>When an <code><a href="the-html-element.html#the-html-element">html</a></code> element's <a href="dom.html#the-body-element-0" title="the body
  element">body element</a> is actually a <code><a href="#frameset">frameset</a></code>
  element, the user agent is expected to render the
  <code><a href="#frameset">frameset</a></code> element as described below across the surface
  of the viewport, instead of applying the usual CSS rendering
  rules.</p>

  <p>When rendering a <code><a href="#frameset">frameset</a></code> on a surface, the user
  agent is expected to use the following layout algorithm:</p>

  <ol><li>

    <p>The <var title="">cols</var> and <var title="">rows</var>
    variables are lists of zero or more pairs consisting of a number
    and a unit, the unit being one of <i>percentage</i>,
    <i>relative</i>, and <i>absolute</i>.</p>

    <p>Use the <a href="common-microsyntaxes.html#rules-for-parsing-a-list-of-dimensions">rules for parsing a list of dimensions</a> to
    parse the value of the element's <code title="attr-frameset-cols">cols</code> attribute, if there is
    one. Let <var title="">cols</var> be the result, or an empty list
    if there is no such attribute.</p>

    <p>Use the <a href="common-microsyntaxes.html#rules-for-parsing-a-list-of-dimensions">rules for parsing a list of dimensions</a> to
    parse the value of the element's <code title="attr-frameset-rows">rows</code> attribute, if there is
    one. Let <var title="">rows</var> be the result, or an empty list
    if there is no such attribute.</p>

   </li>

   <li>

    <p>For any of the entries in <var title="">cols</var> or <var title="">rows</var> that have the number zero and the unit
    <i>relative</i>, change the entry's number to one.</p>

   </li>

   <li>

    <p>If <var title="">cols</var> has no entries, then add a single
    entry consisting of the value 1 and the unit <i>relative</i> to
    <var title="">cols</var>.</p>

    <p>If <var title="">rows</var> has no entries, then add a single
    entry consisting of the value 1 and the unit <i>relative</i> to
    <var title="">rows</var>.</p>

   </li>

   <li>

    <p>Invoke the algorithm defined below to <a href="#convert-a-list-of-dimensions-to-a-list-of-pixel-values">convert a list of
    dimensions to a list of pixel values</a> using <var title="">cols</var> as the input list, and the width of the
    surface that the <code><a href="#frameset">frameset</a></code> is being rendered into, in
    CSS pixels, as the input dimension. Let <var title="">sized
    cols</var> be the resulting list.</p>

    <p>Invoke the algorithm defined below to <a href="#convert-a-list-of-dimensions-to-a-list-of-pixel-values">convert a list of
    dimensions to a list of pixel values</a> using <var title="">rows</var> as the input list, and the height of the
    surface that the <code><a href="#frameset">frameset</a></code> is being rendered into, in
    CSS pixels, as the input dimension. Let <var title="">sized
    rows</var> be the resulting list.</p>

   </li>

   <li>

    <p>Split the surface into a grid of <span title=""><var title="">w</var>&#215;<var title="">h</var></span> rectangles,
    where <var title="">w</var> is the number of entries in <var title="">sized cols</var> and <var title="">h</var> is the number
    of entries in <var title="">sized rows</var>.</p>

    <p>Size the columns so that each column in the grid is as many CSS
    pixels wide as the corresponding entry in the <var title="">sized
    cols</var> list.</p>

    <p>Size the rows so that each row in the grid is as many CSS
    pixels high as the corresponding entry in the <var title="">sized
    rows</var> list.</p>

   </li>

   <li>

    <p>Let <var title="">children</var> be the list of
    <code><a href="#frame">frame</a></code> and <code><a href="#frameset">frameset</a></code> elements that are
    children of the <code><a href="#frameset">frameset</a></code> element for which the
    algorithm was invoked.</p>

   </li>

   <li>

    <p>For each row of the grid of rectangles created in the previous
    step, from top to bottom, run these substeps:</p>

    <ol><li>

      <p>For each rectangle in the row, from left to right, run these
      substeps:</p>

      <ol><li>

        <p>If there are any elements left in <var title="">children</var>, take the first element in the list,
        and assign it to the rectangle.</p>

        <p>If this is a <code><a href="#frameset">frameset</a></code> element, then recurse
        the entire <code><a href="#frameset">frameset</a></code> layout algorithm for that
        <code><a href="#frameset">frameset</a></code> element, with the rectangle as the
        surface.</p>

        <p>Otherwise, it is a <code><a href="#frame">frame</a></code> element; create a
        <a href="#nested-browsing-context">nested browsing context</a> sized to fit the
        rectangle.</p>

       </li>

       <li>

        <p>If there are any elements left in <var title="">children</var>, remove the first element from <var title="">children</var>.</p>

      </li></ol></li>

    </ol></li>

   <li>

    <p>If the <code><a href="#frameset">frameset</a></code> element <a href="#has-a-border">has a border</a>,
    draw an outer set of borders around the rectangles, using the
    element's <a href="#frame-border-color">frame border color</a>.</p>

    <p>For each rectangle, if there is an element assigned to that
    rectangle, and that element <a href="#has-a-border">has a border</a>, draw an
    inner set of borders around that rectangle, using the
    element's <a href="#frame-border-color">frame border color</a>.</p>

    <p>For each (visible) border that does not abut a rectangle that
    is assigned a <code><a href="#frame">frame</a></code> element with a <code title="attr-frame-noresize">noresize</code> attribute (including
    rectangles in further nested <code><a href="#frameset">frameset</a></code> elements), the
    user agent is expected to allow the user to move the border,
    resizing the rectangles within, keeping the proportions of any
    nested <code><a href="#frameset">frameset</a></code> grids.</p>

    <p>A <code><a href="#frameset">frameset</a></code> or <code><a href="#frame">frame</a></code> element <dfn id="has-a-border">has
    a border</dfn> if the following algorithm returns true:</p>

    <ol><li><p>If the element has a <code title="attr-frames-frameborder">frameborder</code> attribute
     whose value is not the empty string and whose first character is
     either a "1" (U+0031) character, a "y" (U+0079) character, or a "Y" (U+0059) character, then return true.</p></li>

     <li><p>Otherwise, if the element has a <code title="attr-frames-frameborder">frameborder</code> attribute,
     return false.</p></li>

     <li><p>Otherwise, if the element has a parent element that is a
     <code><a href="#frameset">frameset</a></code> element, then return true if <em>that</em>
     element <a href="#has-a-border">has a border</a>, and false if it does
     not.</p></li>

     <li><p>Otherwise, return true.</p></li>

    </ol><p>The <dfn id="frame-border-color">frame border color</dfn> of a <code><a href="#frameset">frameset</a></code> or
    <code><a href="#frame">frame</a></code> element is the color obtained from the
    following algorithm:</p>

    <ol><li><p>If the element has a <code title="attr-frames-bordercolor">bordercolor</code> attribute, and
     applying the <a href="common-microsyntaxes.html#rules-for-parsing-a-legacy-color-value">rules for parsing a legacy color value</a>
     to that attribute's value does not result in an error, then
     return the color so obtained.</p></li>

     <li><p>Otherwise, if the element has a parent element that is a
     <code><a href="#frameset">frameset</a></code> element, then the <a href="#frame-border-color">frame border
     color</a> of that element.</p>

     </li><li><p>Otherwise, return gray.</p></li>

    </ol></li>

  </ol><p>The algorithm to <dfn id="convert-a-list-of-dimensions-to-a-list-of-pixel-values">convert a list of dimensions to a list of
  pixel values</dfn> consists of the following steps:</p>

  <ol><li>

    <p>Let <var title="">input list</var> be the list of numbers and
    units passed to the algorithm.</p>

    <p>Let <var title="">output list</var> be a list of numbers the
    same length as <var title="">input list</var>, all zero.</p>

    <p>Entries in <var title="">output list</var> correspond to the
    entries in <var title="">input list</var> that have the same
    position.</p>

   </li>

   <li><p>Let <var title="">input dimension</var> be the size passed
   to the algorithm.</p>

   </li><li>

    <p>Let <var title="">count percentage</var> be the number of
    entries in <var title="">input list</var> whose unit is
    <i>percentage</i>.</p>

    <p>Let <var title="">total percentage</var> be the sum of all the
    numbers in <var title="">input list</var> whose unit is
    <i>percentage</i>.</p>

    <p>Let <var title="">count relative</var> be the number of
    entries in <var title="">input list</var> whose unit is
    <i>relative</i>.</p>

    <p>Let <var title="">total relative</var> be the sum of all the
    numbers in <var title="">input list</var> whose unit is
    <i>relative</i>.</p>

    <p>Let <var title="">count absolute</var> be the number of
    entries in <var title="">input list</var> whose unit is
    <i>absolute</i>.</p>

    <p>Let <var title="">total absolute</var> be the sum of all the
    numbers in <var title="">input list</var> whose unit is
    <i>absolute</i>.</p>

    <p>Let <var title="">remaining space</var> be the value of <var title="">input dimension</var>.</p>

   </li>

   <li>

    <p>If <var title="">total absolute</var> is greater than <var title="">remaining space</var>, then for each entry in <var title="">input list</var> whose unit is <i>absolute</i>, set the
    corresponding value in <var title="">output list</var> to the
    number of the entry in <var title="">input list</var> multiplied
    by <var title="">remaining space</var> and divided by <var title="">total absolute</var>. Then, set <var title="">remaining
    space</var> to zero.</p>

    <p>Otherwise, for each entry in <var title="">input list</var>
    whose unit is <i>absolute</i>, set the corresponding value in <var title="">output list</var> to the number of the entry in <var title="">input list</var>. Then, decrement <var title="">remaining
    space</var> by <var title="">total absolute</var>.</p>

   </li>

   <li>

    <p>If <var title="">total percentage</var> multiplied by the <var title="">input dimension</var> and divided by 100 is greater than
    <var title="">remaining space</var>, then for each entry in <var title="">input list</var> whose unit is <i>percentage</i>, set the
    corresponding value in <var title="">output list</var> to the
    number of the entry in <var title="">input list</var> multiplied
    by <var title="">remaining space</var> and divided by <var title="">total percentage</var>. Then, set <var title="">remaining
    space</var> to zero.</p>

    <p>Otherwise, for each entry in <var title="">input list</var>
    whose unit is <i>percentage</i>, set the corresponding value in
    <var title="">output list</var> to the number of the entry in <var title="">input list</var> multiplied by the <var title="">input
    dimension</var> and divided by 100. Then, decrement <var title="">remaining space</var> by <var title="">total
    percentage</var> multiplied by the <var title="">input
    dimension</var> and divided by 100.</p>

   </li>

   <li>

    <p>For each entry in <var title="">input list</var> whose unit is
    <i>relative</i>, set the corresponding value in <var title="">output list</var> to the number of the entry in <var title="">input list</var> multiplied by <var title="">remaining
    space</var> and divided by <var title="">total relative</var>.</p>

   </li>

   <li><p>Return <var title="">output list</var>.</p></li>

  </ol><p>User agents working with integer values for frame widths (as
  opposed to user agents that can lay frames out with subpixel
  accuracy) are expected to distribute the remainder first to the last
  entry whose unit is <i>relative</i>, then equally (not
  proportionally) to each entry whose unit is <i>percentage</i>, then
  equally (not proportionally) to each entry whose unit is
  <i>absolute</i>, and finally, failing all else, to the last
  entry.</p>


  </div>


  <div class="impl">

  <h3 id="interactive-media"><span class="secno">10.7 </span>Interactive media</h3>

  <h4 id="links,-forms,-and-navigation"><span class="secno">10.7.1 </span>Links, forms, and navigation</h4>

  <p>User agents are expected to allow the user to control aspects of
  <a href="#hyperlink">hyperlink</a> activation and <a href="#form-submission-0">form submission</a>,
  such as which <a href="#browsing-context">browsing context</a> is to be used for the
  subsequent <a href="#navigate" title="navigate">navigation</a>.</p>

  <p>User agents are expected to allow users to discover the
  destination of <a href="#hyperlink" title="hyperlink">hyperlinks</a> and of
  <a href="the-form-element.html#the-form-element" title="form">forms</a> before triggering their <a href="#navigate" title="navigate">navigation</a>.</p>

<!--PING-->

  <p>User agents are expected to allow users to
  <a href="#navigate">navigate</a><!--DONAV cite=""--> <a href="#browsing-context" title="browsing
  context">browsing contexts</a> to the resources <a href="urls.html#resolve-a-url" title="resolve a url">indicated</a> by the <code title="">cite</code> attributes on <code><a href="the-q-element.html#the-q-element">q</a></code>,
  <code><a href="the-blockquote-element.html#the-blockquote-element">blockquote</a></code>, 
  <code><a href="the-ins-element.html#the-ins-element">ins</a></code>, and <code><a href="the-del-element.html#the-del-element">del</a></code> elements.</p>

  <p>User agents are expected to surface <a href="#hyperlink" title="hyperlink">hyperlinks</a> created by <code><a href="the-link-element.html#the-link-element">link</a></code>
  elements in their user interface.</p>

  <p class="note">While <code><a href="the-link-element.html#the-link-element">link</a></code> elements that create <a href="#hyperlink" title="hyperlink">hyperlinks</a> will match the ':link' or
  ':visited' pseudo-classes, will react to clicks if visible, and so
  forth, this does not extend to any browser interface constructs that
  expose those same links. Activating a link through the browser's
  interface, rather than in the page itself, does not trigger <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> events and the like.</p>




  <h4 id="the-title-attribute-0"><span class="secno">10.7.2 </span>The <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute</h4>

  <p>User agents are expected to expose the <a href="global-attributes.html#advisory-information">advisory
  information</a> of elements upon user request, and to make the
  user aware of the presence of such information.</p>

  <p>On interactive graphical systems where the user can use a
  pointing device, this could take the form of a tooltip. When the
  user is unable to use a pointing device, then the user agent is
  expected to make the content available in some other fashion, e.g.
  by making the element focusable and always displaying the
  <a href="global-attributes.html#advisory-information">advisory information</a> of the currently focused element,
  or by showing the <a href="global-attributes.html#advisory-information">advisory information</a> of the elements
  under the user's finger on a touch device as the user pans around
  the screen.</p>

  <p>"LF" (U+000A) characters are expected to cause line
  breaks in the tooltip; "tab" (U+0009) characters
  are expected to render as a non-zero horizontal shift that lines up
  the next glyph with the next tab stop, with tab stops occurring at
  points that are multiples of 8 times the width of a U+0020 SPACE
  character.</p>

  <div class="example">

   <p>For example, a visual user agent could make elements with a
   <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute focusable, and
   could make any focused element with a <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute show its tooltip under
   the element while the element has focus. This would allow a user to
   tab around the document to find all the advisory text.</p>

  </div>

  <div class="example">

   <p>As another example, a screen reader could provide an audio cue
   when reading an element with a tooltip, with an associated key to
   read the last tooltip for which a cue was played.</p>

  </div>


  <h4 id="editing-hosts"><span class="secno">10.7.3 </span>Editing hosts</h4>

  <p>The current text editing caret (i.e. the <a href="#active-range">active
  range</a>, if it is empty and in an <a href="#editing-host">editing host</a>),
  if any, is expected to act like an inline replaced element with the
  vertical dimensions of the caret and with zero width for the
  purposes of the CSS rendering model.</p>

  <p class="note">This means that even an empty block can have the
  caret inside it, and that when the caret is in such an element, it
  prevents margins from collapsing through the element.</p>



  <h4 id="text-rendered-in-native-user-interfaces"><span class="secno">10.7.4 </span>Text rendered in native user interfaces</h4>

  <p>User agents are expected to honor the Unicode semantics of text
  that is exposed in user interfaces, for example supporting the
  bidirectional algorithm in text shown in dialogs, title bars, pop-up
  menus, and tooltips. Text from elements (either attribute values or
  the contents of elements) is expected to be rendered in a manner
  that honors <a href="global-attributes.html#the-directionality">the directionality</a> of the element from
  which the text was obtained.</p>

  <div class="example">

   <p>Consider the following markup, which has Hebrew text asking for
   a programming language, the languages being text for which a
   left-to-right direction is important given the punctuation in some
   of their names:</p>

   <pre>&lt;p dir="rtl" lang="he"&gt;
 &lt;label&gt;
  <span dir="rtl" lang="he" title="">&#1489;&#1495;&#1512; &#1513;&#1508;&#1514; &#1514;&#1499;&#1504;&#1493;&#1514;:</span>
  &lt;select&gt;
   &lt;option dir="ltr"&gt;C++&lt;/option&gt;
   &lt;option dir="ltr"&gt;C#&lt;/option&gt;
   &lt;option dir="ltr"&gt;FreePascal&lt;/option&gt;
   &lt;option dir="ltr"&gt;F#&lt;/option&gt;
  &lt;/select&gt;
 &lt;/label&gt;
&lt;/p&gt;</pre>

   <p>If the <code><a href="the-select-element.html#the-select-element">select</a></code> element was rendered as a drop down
   box, a correct rendering would ensure that the punctuation was the
   same both in the drop down, and in the box showing the current
   selection.</p>

   <p><img alt="" height="105" src="images/bidiselect.png" width="206"></p> <!-- no need for alt text, the previous paragraph
   describes it completely -->

  </div>

  <p>A string provided by a script (e.g. the argument to <code title="dom-alert"><a href="#dom-alert">window.alert()</a></code>) is expected to be treated
  as an independent set of one or more bidirectional algorithm
  paragraphs when displayed, as defined by the bidirectional
  algorithm, including, for instance, supporting the
  paragraph-breaking behaviour of "LF" (U+000A) characters.
  For the purposes of determining the paragraph level of such text in
  the bidirectional algorithm, this specification does <em>not</em>
  provide a higher-level override of rules P2 and P3. <a href="#refsBIDI">[BIDI]</a></p>

  <p>When necessary, authors can enforce a particular direction for a
  given paragraph by starting it with the Unicode U+200E LEFT-TO-RIGHT
  MARK or U+200F RIGHT-TO-LEFT MARK characters.</p>

  <div class="example">

   <p>Thus, the following script:</p>

   <pre>alert('\u05DC\u05DE\u05D3 HTML \u05D4\u05D9\u05D5\u05DD!')</pre>

   <p>...would always result in a message reading
        "<bdo dir="rtl" lang="" title="">&#1500;&#1502;&#1491;&#160;LMTH&#160;&#1492;&#1497;&#1493;&#1501;!</bdo>"
   (not "<bdo dir="ltr" lang="" title="">&#1491;&#1502;&#1500;&#160;HTML&#160;&#1501;&#1493;&#1497;&#1492;!</bdo>"),
   regardless of the language of the user agent interface or the
   direction of the page or any of its elements.</p>

  </div>

  <div class="example">

   <p>For a more complex example, consider the following script:</p>

   <pre class="bad">/* Warning: this script does not handle right-to-left scripts correctly */
var s;
if (s = prompt('What is your name?')) {
  alert(s + '! Ok, Fred, ' + s + ', and Wilma will get the car.');
}</pre>

   <p>When the user enters "<kbd>Kitty</kbd>", the user agent would
   alert "<samp>Kitty! Ok, Fred, Kitty, and Wilma will get the
   car.</samp>". However, if the user enters "<kbd dir="rtl" lang="ar">&#1604;&#1575;&#160;&#1571;&#1601;&#1607;&#1605;</kbd>",
   then the bidirectional algorithm will determine that the direction
   of the paragraph is right-to-left, and so the output will be the
   following unintended mess: "<samp lang=""><bdo dir="rtl">&#1604;&#1575;&#160;&#1571;&#1601;&#1607;&#1605;!&#160;derF&#160;,kO,&#160;&#1604;&#1575;&#160;&#1571;&#1601;&#1607;&#1605;,&#160;rac&#160;eht&#160;teg&#160;lliw&#160;amliW&#160;dna.</bdo></samp>"</p>

   <p>To force an alert that starts with user-provided text (or other
   text of unknown directionality) to render left-to-right, the string
   can be prefixed with a U+200E LEFT-TO-RIGHT MARK character:</p>

   <pre>var s;
if (s = prompt('What is your name?')) {
  alert('<strong>\u200E</strong>' + s + '! Ok, Fred, ' + s + ', and Wilma will get the car.');
}</pre>

  </div>



  <h3 id="print-media"><span class="secno">10.8 </span>Print media</h3>

  <p>User agents are expected to allow the user to request the
  opportunity to <dfn id="obtain-a-physical-form">obtain a physical form</dfn> (or a
  representation of a physical form) of a <code><a href="dom.html#document">Document</a></code>. For
  example, selecting the option to print a page or convert it to PDF
  format. <a href="#refsPDF">[PDF]</a></p>

  <p>When the user actually <a href="#obtain-a-physical-form" title="obtain a physical
  form">obtains a physical form</a> (or a representation of a
  physical form) of a <code><a href="dom.html#document">Document</a></code>, the user agent is
  expected to create a new rendering of the <code><a href="dom.html#document">Document</a></code> for
  the print media.</p>



  </div>



  <!--TOPIC:HTML-->

  <h2 id="obsolete"><span class="secno">11 </span>Obsolete features</h2>

  <h3 id="obsolete-but-conforming-features"><span class="secno">11.1 </span>Obsolete but conforming features</h3>

  <p>Features listed in this section will trigger warnings in
  conformance checkers.</p>

  <p>Authors should not specify a <code title="attr-img-border"><a href="#attr-img-border">border</a></code> attribute on an
  <code><a href="the-img-element.html#the-img-element">img</a></code> element. If the attribute is present, its value
  must be the string "<code title="">0</code>". CSS should be used
  instead.</p>

  <p>Authors should not specify a <code title="attr-script-language"><a href="#attr-script-language">language</a></code> attribute on a
  <code><a href="the-script-element.html#the-script-element">script</a></code> element. If the attribute is present, its value
  must be an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string
  "<code title="">JavaScript</code>" and either the <code title="attr-script-type"><a href="the-script-element.html#attr-script-type">type</a></code> attribute must be omitted or
  its value must be an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for
  the string "<code title="">text/javascript</code>". The attribute
  should be entirely omitted instead (with the value "<code title="">JavaScript</code>", it has no effect), or replaced with use
  of the <code title="attr-script-type"><a href="the-script-element.html#attr-script-type">type</a></code> attribute.</p>

  <p>Authors should not specify the <code title="attr-a-name"><a href="#attr-a-name">name</a></code> attribute on <code><a href="the-a-element.html#the-a-element">a</a></code>
  elements. If the attribute is present, its value must not be the
  empty string and must neither be equal to the value of any of the
  <a href="infrastructure.html#concept-id" title="concept-id">IDs</a> in the element's <a href="infrastructure.html#home-subtree">home
  subtree</a> other than the element's own <a href="infrastructure.html#concept-id" title="concept-id">ID</a>, if any, nor be equal to the value of
  any of the other <code title="attr-a-name"><a href="#attr-a-name">name</a></code> attributes on
  <code><a href="the-a-element.html#the-a-element">a</a></code> elements in the element's <a href="infrastructure.html#home-subtree">home
  subtree</a>. If this attribute is present and the element has an
  <a href="infrastructure.html#concept-id" title="concept-id">ID</a>, then the attribute's value must
  be equal to the element's <a href="infrastructure.html#concept-id" title="concept-id">ID</a>. In
  earlier versions of the language, this attribute was intended as a
  way to specify possible targets for fragment identifiers in <a href="urls.html#url" title="URL">URLs</a>. The <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code>
  attribute should be used instead.</p>

  <!-- remove this once type=number is widely supported -->
  <p>Authors should not, but may despite requirements to the contrary
  elsewhere in this specification, specify the <code title="attr-input-maxlength"><a href="common-input-element-attributes.html#attr-input-maxlength">maxlength</a></code> and <code title="attr-input-size"><a href="common-input-element-attributes.html#attr-input-size">size</a></code> attributes on <code><a href="the-input-element.html#the-input-element">input</a></code>
  elements whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attributes
  are in the <a href="states-of-the-type-attribute.html#number-state-(type=number)" title="attr-input-type-number">Number</a> state.
  One valid reason for using these attributes regardless is to help
  legacy user agents that do not support <code><a href="the-input-element.html#the-input-element">input</a></code> elements
  with <code title="">type="number"</code> to still render the text
  field with a useful width.</p>

  <p class="note">In <a href="#syntax">the HTML syntax</a>, specifying a <a href="#syntax-doctype" title="syntax-DOCTYPE">DOCTYPE</a> that is an <a href="#obsolete-permitted-doctype">obsolete
  permitted DOCTYPE</a> will also trigger a warning.</p>


  <div class="impl">

  <h4 id="warnings-for-obsolete-but-conforming-features"><span class="secno">11.1.1 </span>Warnings for obsolete but conforming features</h4>

  <p>To ease the transition from HTML4 Transitional documents to the
  language defined in <em>this</em> specification, and to discourage
  certain features that are only allowed in very few circumstances,
  conformance checkers are required to warn the user when the
  following features are used in a document. These are generally old
  obsolete features that have no effect, and are allowed only to
  distinguish between likely mistakes (regular conformance errors) and
  mere vestigial markup or unusual and discouraged practices (these
  warnings).</p>

  <p>The following features must be categorized as described
  above:</p>

  <ul><!-- downplayed list --><li><p>The presence of an <a href="#obsolete-permitted-doctype">obsolete permitted DOCTYPE</a>
   in an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a>.</p></li>

   <li><p>The presence of a <code title="attr-img-border"><a href="#attr-img-border">border</a></code> attribute on an
   <code><a href="the-img-element.html#the-img-element">img</a></code> element if its value is the string "<code title="">0</code>".</p></li>

   <li><p>The presence of a <code title="attr-script-language"><a href="#attr-script-language">language</a></code> attribute on a
   <code><a href="the-script-element.html#the-script-element">script</a></code> element if its value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII
   case-insensitive</a> match for the string "<code title="">JavaScript</code>" and if there is no <code title="attr-script-type"><a href="the-script-element.html#attr-script-type">type</a></code> attribute or there is and its
   value is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the
   string "<code title="">text/javascript</code>".</p></li>

   <li><p>The presence of a <code title="attr-a-name"><a href="#attr-a-name">name</a></code>
   attribute on an <code><a href="the-a-element.html#the-a-element">a</a></code> element, if its value is not the
   empty string.</p></li>

   <li><p>The presence of a <code title="attr-input-maxlength"><a href="common-input-element-attributes.html#attr-input-maxlength">maxlength</a></code> attribute on an
   <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#number-state-(type=number)" title="attr-input-type-number">Number</a> state.</p></li>

   <li><p>The presence of a <code title="attr-input-size"><a href="common-input-element-attributes.html#attr-input-size">size</a></code> attribute on an
   <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#number-state-(type=number)" title="attr-input-type-number">Number</a> state.</p></li>

  </ul><p>Conformance checkers must distinguish between pages that have no
  conformance errors and have none of these obsolete features, and
  pages that have no conformance errors but do have some of these
  obsolete features.</p>

  <p class="example">For example, a validator could report some pages
  as "Valid HTML" and others as "Valid HTML with warnings".</p>

  </div>


  <h3 id="non-conforming-features"><span class="secno">11.2 </span>Non-conforming features</h3>

  <p>Elements in the following list are entirely obsolete, and must
  not be used by authors:</p>

  <dl><!-- alphabetical by first element in the group, except CSS goes last --><dt><code><a href="#the-applet-element">applet</a></code></dt>
   <dd><p>Use <code><a href="the-embed-element.html#the-embed-element">embed</a></code> or <code><a href="the-object-element.html#the-object-element">object</a></code> instead.</p></dd>

   <dt><dfn id="acronym"><code>acronym</code></dfn></dt>
   <dd><p>Use <code><a href="the-abbr-element.html#the-abbr-element">abbr</a></code> instead.</p></dd>

   <dt><dfn id="bgsound"><code>bgsound</code></dfn></dt>
   <dd><p>Use <code><a href="the-audio-element.html#the-audio-element">audio</a></code> instead.</p></dd>

   <dt><dfn id="dir"><code>dir</code></dfn></dt>
   <dd><p>Use <code><a href="the-ul-element.html#the-ul-element">ul</a></code> instead.</p></dd>

   <dt><code><a href="#frame">frame</a></code></dt>
   <dt><code><a href="#frameset">frameset</a></code></dt>
   <dt><dfn id="noframes"><code>noframes</code></dfn></dt>
   <dd><p>Either use <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> and CSS instead, or use server-side includes to generate complete pages with the various invariant parts merged in.</p></dd>

   <dt><dfn id="isindex-0"><code>isindex</code></dfn></dt>
   <dd><p>Use an explicit <code><a href="the-form-element.html#the-form-element">form</a></code> and <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">text field</a> combination instead.</p></dd>

   <dt><dfn id="listing"><code>listing</code></dfn></dt>
   <dd><p>Use <code><a href="the-pre-element.html#the-pre-element">pre</a></code> and <code><a href="the-code-element.html#the-code-element">code</a></code> instead.</p></dd>

   <dt><dfn id="nextid"><code>nextid</code></dfn></dt>
   <dd><p>Use GUIDs instead.</p></dd>

   <dt><dfn id="noembed"><code>noembed</code></dfn></dt>
   <dd><p>Use <code><a href="the-object-element.html#the-object-element">object</a></code> instead of <code><a href="the-embed-element.html#the-embed-element">embed</a></code> when fallback is necessary.</p></dd>

   <dt><dfn id="plaintext"><code>plaintext</code></dfn></dt>
   <dd><p>Use the "<code>text/plain</code>" <a href="infrastructure.html#mime-type">MIME type</a> instead.</p></dd>

   <dt><dfn id="rb"><code>rb</code></dfn></dt>
   <dd><p>Providing the ruby base directly inside the <code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code> element is sufficient; the <code><a href="#rb">rb</a></code> element is unnecessary. Omit it altogether.</p></dd>

   <dt><dfn id="strike"><code>strike</code></dfn></dt>
   <dd><p>Use <code><a href="the-del-element.html#the-del-element">del</a></code> instead if the element is marking an edit, otherwise use <code><a href="the-s-element.html#the-s-element">s</a></code> instead.</p></dd>

   <dt><dfn id="xmp"><code>xmp</code></dfn></dt>
   <dd><p>Use <code><a href="the-pre-element.html#the-pre-element">pre</a></code> and <code><a href="the-code-element.html#the-code-element">code</a></code> instead, and escape "<code title="">&lt;</code>" and "<code title="">&amp;</code>" characters as "<code title="">&amp;lt;</code>" and "<code title="">&amp;amp;</code>" respectively.</p></dd>

   <dt><dfn id="basefont"><code>basefont</code></dfn></dt>
   <dt><dfn id="big"><code>big</code></dfn></dt>
   <dt><dfn id="blink"><code>blink</code></dfn></dt>
   <dt><dfn id="center"><code>center</code></dfn></dt>
   <dt><dfn id="font"><code>font</code></dfn></dt>
   <dt><code><a href="#the-marquee-element-0">marquee</a></code></dt>
   <dt><dfn id="multicol"><code>multicol</code></dfn></dt>
   <dt><dfn id="nobr"><code>nobr</code></dfn></dt>
   <dt><dfn id="spacer"><code>spacer</code></dfn></dt>
   <dt><dfn id="tt"><code>tt</code></dfn></dt>

   <dd>

    <p>Use appropriate elements and/or CSS instead.</p>

    <p>Where the <code><a href="#tt">tt</a></code> element would have been used for
    marking up keyboard input, consider the <code><a href="the-kbd-element.html#the-kbd-element">kbd</a></code> element;
    for variables, consider the <code><a href="the-var-element.html#the-var-element">var</a></code> element; for computer
    code, consider the <code><a href="the-code-element.html#the-code-element">code</a></code> element; and for computer
    output, consider the <code><a href="the-samp-element.html#the-samp-element">samp</a></code> element.</p>

    <p>Similarly, if the <code><a href="#big">big</a></code> element is being used to
    denote a heading, consider using the <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code> element; if
    it is being used for marking up important passages, consider the
    <code><a href="the-strong-element.html#the-strong-element">strong</a></code> element; and if it is being used for
    highlighting text for reference purposes, consider the
    <code><a href="the-mark-element.html#the-mark-element">mark</a></code> element.</p>

    <p>See also the <a href="usage-summary.html#usage-summary">text-level semantics
    usage summary</a> for more suggestions with examples.</p>

   </dd>

  </dl><hr><p>The following attributes are obsolete (though the elements are
  still part of the language), and must not be used by authors:</p>

  <dl><!-- alphabetical by element then attribute of first item in group, except CSS goes last --><dt><dfn id="attr-a-charset" title="attr-a-charset"><code>charset</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code> elements</dt>
   <dt><dfn id="attr-link-charset" title="attr-link-charset"><code>charset</code></dfn> on <code><a href="the-link-element.html#the-link-element">link</a></code> elements</dt>
   <dd><p>Use an HTTP Content-Type header on the linked resource instead.</p></dd>

   <dt><dfn id="attr-a-coords" title="attr-a-coords"><code>coords</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code> elements</dt>
   <dt><dfn id="attr-a-shape" title="attr-a-shape"><code>shape</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code> elements</dt>
   <dd><p>Use <code><a href="the-area-element.html#the-area-element">area</a></code> instead of <code><a href="the-a-element.html#the-a-element">a</a></code> for image maps.</p></dd>

   <dt><dfn id="attr-a-methods" title="attr-a-methods"><code>methods</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code> elements</dt>
   <dt><dfn id="attr-link-methods" title="attr-link-methods"><code>methods</code></dfn> on <code><a href="the-link-element.html#the-link-element">link</a></code> elements</dt>
   <dd><p>Use the HTTP OPTIONS feature instead.</p></dd>

   <dt><dfn id="attr-a-name" title="attr-a-name"><code>name</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code> elements (except as noted in the previous section)</dt>
   <dt><dfn id="attr-embed-name" title="attr-embed-name"><code>name</code></dfn> on <code><a href="the-embed-element.html#the-embed-element">embed</a></code> elements</dt>
   <dt><dfn id="attr-img-name" title="attr-img-name"><code>name</code></dfn> on <code><a href="the-img-element.html#the-img-element">img</a></code> elements</dt>
   <dt><dfn id="attr-option-name" title="attr-option-name"><code>name</code></dfn> on <code><a href="the-option-element.html#the-option-element">option</a></code> elements</dt>
   <dd><p>Use the <code title="attr-id"><a href="global-attributes.html#the-id-attribute">id</a></code> attribute instead.</p></dd>

   <dt><dfn id="attr-a-rev" title="attr-a-rev"><code>rev</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code> elements</dt>
   <dt><dfn id="attr-link-rev" title="attr-link-rev"><code>rev</code></dfn> on <code><a href="the-link-element.html#the-link-element">link</a></code> elements</dt>
   <dd><p>Use the <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code>
   attribute instead, with an opposite term. (For example, instead of
   <code title="">rev="made"</code>, use <code title="">rel="author"</code>.)</p></dd>

   <dt><dfn id="attr-a-urn" title="attr-a-urn"><code>urn</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code> elements</dt>
   <dt><dfn id="attr-link-urn" title="attr-link-urn"><code>urn</code></dfn> on <code><a href="the-link-element.html#the-link-element">link</a></code> elements</dt>
   <dd><p>Specify the preferred persistent identifier using the <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code> attribute instead.</p></dd>

   <dt><dfn id="attr-form-accept" title="attr-form-accept"><code>accept</code></dfn> on <code><a href="the-form-element.html#the-form-element">form</a></code> elements</dt>
   <dd><p>Use the <code title="attr-input-accept"><a href="states-of-the-type-attribute.html#attr-input-accept">accept</a></code> attribute directly on the <code><a href="the-input-element.html#the-input-element">input</a></code> elements instead.</p></dd>

   <dt><dfn id="attr-area-nohref" title="attr-area-nohref"><code>nohref</code></dfn> on <code><a href="the-area-element.html#the-area-element">area</a></code> elements</dt>
   <dd><p>Omitting the <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code>
   attribute is sufficient; the <code title="attr-area-nohref"><a href="#attr-area-nohref">nohref</a></code> attribute is
   unnecessary. Omit it altogether.</p></dd>

   <dt><dfn id="attr-head-profile" title="attr-head-profile"><code>profile</code></dfn> on <code><a href="the-head-element.html#the-head-element">head</a></code> elements</dt>
   <dd><p>When used for declaring which <code><a href="the-meta-element.html#the-meta-element">meta</a></code> terms are
   used in the document, unnecessary; omit it altogether, and <a href="the-meta-element.html#concept-meta-extensions" title="concept-meta-extensions">register the names</a>.</p></dd>
   <dd><p>When used for triggering specific user agent behaviors: use
   a <code><a href="the-link-element.html#the-link-element">link</a></code> element instead.</p></dd>

   <dt><dfn id="attr-html-version" title="attr-html-version"><code>version</code></dfn> on <code><a href="the-html-element.html#the-html-element">html</a></code> elements</dt>
   <dd><p>Unnecessary. Omit it altogether.</p></dd>

   <dt><dfn id="attr-input-usemap" title="attr-input-usemap"><code>usemap</code></dfn> on <code><a href="the-input-element.html#the-input-element">input</a></code> elements</dt>
   <dd><p>Use <code><a href="the-img-element.html#the-img-element">img</a></code> instead of <code><a href="the-input-element.html#the-input-element">input</a></code> for image maps.</p></dd>

   <dt><dfn id="attr-iframe-longdesc" title="attr-iframe-longdesc"><code>longdesc</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-img-longdesc" title="attr-img-longdesc"><code>longdesc</code></dfn> on <code><a href="the-img-element.html#the-img-element">img</a></code> elements</dt>
   <dd><p>Use a regular <code><a href="the-a-element.html#the-a-element">a</a></code> element to link to the
   description, or (in the case of images) use an <a href="image-maps.html#image-map">image
   map</a> to provide a link from the image to the image's
   description.</p></dd>

   <dt><dfn id="attr-img-lowsrc" title="attr-img-lowsrc"><code>lowsrc</code></dfn> on <code><a href="the-img-element.html#the-img-element">img</a></code> elements</dt>
   <dd><p>Use a progressive JPEG image (given in the <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code> attribute),
   instead of using two separate images.</p></dd>

   <dt><dfn id="attr-link-target" title="attr-link-target"><code>target</code></dfn> on <code><a href="the-link-element.html#the-link-element">link</a></code> elements</dt>
   <dd><p>Unnecessary. Omit it altogether.</p></dd>

   <dt><dfn id="attr-meta-scheme" title="attr-meta-scheme"><code>scheme</code></dfn> on <code><a href="the-meta-element.html#the-meta-element">meta</a></code> elements</dt>
   <dd><p>Use only one scheme per field, or make the scheme declaration part of the value.</p></dd>

   <dt><dfn id="attr-object-archive" title="attr-object-archive"><code>archive</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dt><dfn id="attr-object-classid" title="attr-object-classid"><code>classid</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dt><dfn id="attr-object-code" title="attr-object-code"><code>code</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dt><dfn id="attr-object-codebase" title="attr-object-codebase"><code>codebase</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dt><dfn id="attr-object-codetype" title="attr-object-codetype"><code>codetype</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dd><p>Use the <code title="attr-object-data"><a href="the-object-element.html#attr-object-data">data</a></code> and <code title="attr-object-type"><a href="the-object-element.html#attr-object-type">type</a></code> attributes to invoke <a href="infrastructure.html#plugin" title="plugin">plugins</a>. To set parameters with these names
   in particular, the <code><a href="the-param-element.html#the-param-element">param</a></code> element can be used.</p></dd>

   <dt><dfn id="attr-object-declare" title="attr-object-declare"><code>declare</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dd><p>Repeat the <code><a href="the-object-element.html#the-object-element">object</a></code> element completely each time the resource is to be reused.</p></dd>

   <dt><dfn id="attr-object-standby" title="attr-object-standby"><code>standby</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dd><p>Optimize the linked resource so that it loads quickly or, at least, incrementally.</p></dd>

   <dt><dfn id="attr-param-type" title="attr-param-type"><code>type</code></dfn> on <code><a href="the-param-element.html#the-param-element">param</a></code> elements</dt>
   <dt><dfn id="attr-param-valuetype" title="attr-param-valuetype"><code>valuetype</code></dfn> on <code><a href="the-param-element.html#the-param-element">param</a></code> elements</dt>
   <dd><p>Use the <code title="attr-param-name"><a href="the-param-element.html#attr-param-name">name</a></code> and <code title="attr-param-value"><a href="the-param-element.html#attr-param-value">value</a></code> attributes without declaring
   value types.</p></dd>

   <dt><dfn id="attr-script-language" title="attr-script-language"><code>language</code></dfn> on <code><a href="the-script-element.html#the-script-element">script</a></code> elements (except as noted in the previous section)</dt>
   <dd><p>Use the <code title="attr-script-type"><a href="the-script-element.html#attr-script-type">type</a></code> attribute
   instead.</p></dd>

   <dt><dfn id="attr-script-event" title="attr-script-event"><code>event</code></dfn> on <code><a href="the-script-element.html#the-script-element">script</a></code> elements</dt>
   <dt><dfn id="attr-script-for" title="attr-script-for"><code>for</code></dfn> on <code><a href="the-script-element.html#the-script-element">script</a></code> elements</dt>
   <dd><p>Use DOM Events mechanisms to register event listeners. <a href="#refsDOMCORE">[DOMCORE]</a></p></dd>

   <dt><dfn id="attr-table-datapagesize" title="attr-table-datapagesize"><code>datapagesize</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dd><p>Unnecessary. Omit it altogether.</p></dd>

   <dt><dfn id="attr-table-summary" title="attr-table-summary"><code>summary</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt><!-- 2.65% pages -->
   <dd><p>Use one of the <a href="the-table-element.html#table-descriptions-techniques">techniques for describing
   tables</a> given in the <code><a href="the-table-element.html#the-table-element">table</a></code> section
   instead.</p></dd>

   <dt><dfn id="attr-tdth-abbr" title="attr-tdth-abbr"><code>abbr</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dd><p>Use text that begins in an unambiguous and terse manner, and include any more elaborate text after that. The <code title="attr-title"><a href="global-attributes.html#attr-title">title</a></code> attribute can also be useful in including more detailed text, so that the cell's contents can be made terse.</p>

   </dd><dt><dfn id="attr-tdth-axis" title="attr-tdth-axis"><code>axis</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dd><p>Use the <code title="attr-th-scope"><a href="the-th-element.html#attr-th-scope">scope</a></code> attribute on the relevant <code><a href="the-th-element.html#the-th-element">th</a></code>.</p>

   </dd><dt><dfn id="attr-td-scope" title="attr-td-scope"><code>scope</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> elements</dt>
   <dd><p>Use <code><a href="the-th-element.html#the-th-element">th</a></code> elements for heading cells.</p>

   </dd><dt><dfn id="attr-datasrc" title="attr-datasrc"><code>datasrc</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code>, <code><a href="#the-applet-element">applet</a></code>, <code><a href="the-button-element.html#the-button-element">button</a></code>, <code><a href="the-div-element.html#the-div-element">div</a></code>, <code><a href="#frame">frame</a></code>, <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, <code><a href="the-img-element.html#the-img-element">img</a></code>, <code><a href="the-input-element.html#the-input-element">input</a></code>, <code><a href="the-label-element.html#the-label-element">label</a></code>, <code><a href="the-legend-element.html#the-legend-element">legend</a></code>, <code><a href="#the-marquee-element-0">marquee</a></code>, <code><a href="the-object-element.html#the-object-element">object</a></code>, <code><a href="the-option-element.html#the-option-element">option</a></code>, <code><a href="the-select-element.html#the-select-element">select</a></code>, <code><a href="the-span-element.html#the-span-element">span</a></code>, <code><a href="the-table-element.html#the-table-element">table</a></code>, and <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements</dt>
   <dt><dfn id="attr-datafld" title="attr-datafld"><code>datafld</code></dfn> on <code><a href="the-a-element.html#the-a-element">a</a></code>, <code><a href="#the-applet-element">applet</a></code>, <code><a href="the-button-element.html#the-button-element">button</a></code>, <code><a href="the-div-element.html#the-div-element">div</a></code>, <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>, <code><a href="#frame">frame</a></code>, <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>, <code><a href="the-img-element.html#the-img-element">img</a></code>, <code><a href="the-input-element.html#the-input-element">input</a></code>, <code><a href="the-label-element.html#the-label-element">label</a></code>, <code><a href="the-legend-element.html#the-legend-element">legend</a></code>, <code><a href="#the-marquee-element-0">marquee</a></code>, <code><a href="the-object-element.html#the-object-element">object</a></code>, <code><a href="the-param-element.html#the-param-element">param</a></code>, <code><a href="the-select-element.html#the-select-element">select</a></code>, <code><a href="the-span-element.html#the-span-element">span</a></code>, and <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> elements</dt>
   <dt><dfn id="attr-dataformatas" title="attr-dataformatas"><code>dataformatas</code></dfn> on <code><a href="the-button-element.html#the-button-element">button</a></code>, <code><a href="the-div-element.html#the-div-element">div</a></code>, <code><a href="the-input-element.html#the-input-element">input</a></code>, <code><a href="the-label-element.html#the-label-element">label</a></code>, <code><a href="the-legend-element.html#the-legend-element">legend</a></code>, <code><a href="#the-marquee-element-0">marquee</a></code>, <code><a href="the-object-element.html#the-object-element">object</a></code>, <code><a href="the-option-element.html#the-option-element">option</a></code>, <code><a href="the-select-element.html#the-select-element">select</a></code>, <code><a href="the-span-element.html#the-span-element">span</a></code>, and <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dd><p>Use script and a mechanism such as <code>XMLHttpRequest</code> to populate the page dynamically. <a href="#refsXHR">[XHR]</a></p></dd>

   <dt><dfn id="attr-body-alink" title="attr-body-alink"><code>alink</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-bgcolor" title="attr-body-bgcolor"><code>bgcolor</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-link" title="attr-body-link"><code>link</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-marginbottom" title="attr-body-marginbottom"><code>marginbottom</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-marginheight" title="attr-body-marginheight"><code>marginheight</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-marginleft" title="attr-body-marginleft"><code>marginleft</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-marginright" title="attr-body-marginright"><code>marginright</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-margintop" title="attr-body-margintop"><code>margintop</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-marginwidth" title="attr-body-marginwidth"><code>marginwidth</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-text" title="attr-body-text"><code>text</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-body-vlink" title="attr-body-vlink"><code>vlink</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code> elements</dt>
   <dt><dfn id="attr-br-clear" title="attr-br-clear"><code>clear</code></dfn> on <code><a href="the-br-element.html#the-br-element">br</a></code> elements</dt>
   <dt><dfn id="attr-caption-align" title="attr-caption-align"><code>align</code></dfn> on <code><a href="the-caption-element.html#the-caption-element">caption</a></code> elements</dt>
   <dt><dfn id="attr-col-align" title="attr-col-align"><code>align</code></dfn> on <code><a href="the-col-element.html#the-col-element">col</a></code> elements</dt>
   <dt><dfn id="attr-col-char" title="attr-col-char"><code>char</code></dfn> on <code><a href="the-col-element.html#the-col-element">col</a></code> elements</dt>
   <dt><dfn id="attr-col-charoff" title="attr-col-charoff"><code>charoff</code></dfn> on <code><a href="the-col-element.html#the-col-element">col</a></code> elements</dt>
   <dt><dfn id="attr-col-valign" title="attr-col-valign"><code>valign</code></dfn> on <code><a href="the-col-element.html#the-col-element">col</a></code> elements</dt>
   <dt><dfn id="attr-col-width" title="attr-col-width"><code>width</code></dfn> on <code><a href="the-col-element.html#the-col-element">col</a></code> elements</dt>
   <dt><dfn id="attr-div-align" title="attr-div-align"><code>align</code></dfn> on <code><a href="the-div-element.html#the-div-element">div</a></code> elements</dt>
   <dt><dfn id="attr-dl-compact" title="attr-dl-compact"><code>compact</code></dfn> on <code><a href="the-dl-element.html#the-dl-element">dl</a></code> elements</dt>
   <dt><dfn id="attr-embed-align" title="attr-embed-align"><code>align</code></dfn> on <code><a href="the-embed-element.html#the-embed-element">embed</a></code> elements</dt>
   <dt><dfn id="attr-embed-hspace" title="attr-embed-hspace"><code>hspace</code></dfn> on <code><a href="the-embed-element.html#the-embed-element">embed</a></code> elements</dt>
   <dt><dfn id="attr-embed-vspace" title="attr-embed-vspace"><code>vspace</code></dfn> on <code><a href="the-embed-element.html#the-embed-element">embed</a></code> elements</dt>
   <dt><dfn id="attr-hr-align" title="attr-hr-align"><code>align</code></dfn> on <code><a href="the-hr-element.html#the-hr-element">hr</a></code> elements</dt>
   <dt><dfn id="attr-hr-color" title="attr-hr-color"><code>color</code></dfn> on <code><a href="the-hr-element.html#the-hr-element">hr</a></code> elements</dt>
   <dt><dfn id="attr-hr-noshade" title="attr-hr-noshade"><code>noshade</code></dfn> on <code><a href="the-hr-element.html#the-hr-element">hr</a></code> elements</dt>
   <dt><dfn id="attr-hr-size" title="attr-hr-size"><code>size</code></dfn> on <code><a href="the-hr-element.html#the-hr-element">hr</a></code> elements</dt>
   <dt><dfn id="attr-hr-width" title="attr-hr-width"><code>width</code></dfn> on <code><a href="the-hr-element.html#the-hr-element">hr</a></code> elements</dt>
   <dt><dfn id="attr-hx-align" title="attr-hx-align"><code>align</code></dfn> on <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>&#8212;<code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code> elements</dt>
   <dt><dfn id="attr-iframe-align" title="attr-iframe-align"><code>align</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-iframe-allowtransparency" title="attr-iframe-allowtransparency"><code>allowtransparency</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-iframe-frameborder" title="attr-iframe-frameborder"><code>frameborder</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-iframe-hspace" title="attr-iframe-hspace"><code>hspace</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-iframe-marginheight" title="attr-iframe-marginheight"><code>marginheight</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-iframe-marginwidth" title="attr-iframe-marginwidth"><code>marginwidth</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-iframe-scrolling" title="attr-iframe-scrolling"><code>scrolling</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-iframe-vspace" title="attr-iframe-vspace"><code>vspace</code></dfn> on <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> elements</dt>
   <dt><dfn id="attr-input-align" title="attr-input-align"><code>align</code></dfn> on <code><a href="the-input-element.html#the-input-element">input</a></code> elements</dt>
   <dt><dfn id="attr-input-hspace" title="attr-input-hspace"><code>hspace</code></dfn> on <code><a href="the-input-element.html#the-input-element">input</a></code> elements</dt>
   <dt><dfn id="attr-input-vspace" title="attr-input-vspace"><code>vspace</code></dfn> on <code><a href="the-input-element.html#the-input-element">input</a></code> elements</dt>
   <dt><dfn id="attr-img-align" title="attr-img-align"><code>align</code></dfn> on <code><a href="the-img-element.html#the-img-element">img</a></code> elements</dt>
   <dt><dfn id="attr-img-border" title="attr-img-border"><code>border</code></dfn> on <code><a href="the-img-element.html#the-img-element">img</a></code> elements (except as noted in the previous section)</dt>
   <dt><dfn id="attr-img-hspace" title="attr-img-hspace"><code>hspace</code></dfn> on <code><a href="the-img-element.html#the-img-element">img</a></code> elements</dt>
   <dt><dfn id="attr-img-vspace" title="attr-img-vspace"><code>vspace</code></dfn> on <code><a href="the-img-element.html#the-img-element">img</a></code> elements</dt>
   <dt><dfn id="attr-legend-align" title="attr-legend-align"><code>align</code></dfn> on <code><a href="the-legend-element.html#the-legend-element">legend</a></code> elements</dt>
   <dt><dfn id="attr-li-type" title="attr-li-type"><code>type</code></dfn> on <code><a href="the-li-element.html#the-li-element">li</a></code> elements</dt>
   <dt><dfn id="attr-menu-compact" title="attr-menu-compact"><code>compact</code></dfn> on <code><a href="#the-menu-element">menu</a></code> elements</dt>
   <dt><dfn id="attr-object-align" title="attr-object-align"><code>align</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dt><dfn id="attr-object-border" title="attr-object-border"><code>border</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dt><dfn id="attr-object-hspace" title="attr-object-hspace"><code>hspace</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dt><dfn id="attr-object-vspace" title="attr-object-vspace"><code>vspace</code></dfn> on <code><a href="the-object-element.html#the-object-element">object</a></code> elements</dt>
   <dt><dfn id="attr-ol-compact" title="attr-ol-compact"><code>compact</code></dfn> on <code><a href="the-ol-element.html#the-ol-element">ol</a></code> elements</dt>
   <dt><dfn id="attr-p-align" title="attr-p-align"><code>align</code></dfn> on <code><a href="the-p-element.html#the-p-element">p</a></code> elements</dt>
   <dt><dfn id="attr-pre-width" title="attr-pre-width"><code>width</code></dfn> on <code><a href="the-pre-element.html#the-pre-element">pre</a></code> elements</dt>
   <dt><dfn id="attr-table-align" title="attr-table-align"><code>align</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dt><dfn id="attr-table-bgcolor" title="attr-table-bgcolor"><code>bgcolor</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dt><dfn id="attr-table-cellpadding" title="attr-table-cellpadding"><code>cellpadding</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dt><dfn id="attr-table-cellspacing" title="attr-table-cellspacing"><code>cellspacing</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dt><dfn id="attr-table-frame" title="attr-table-frame"><code>frame</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dt><dfn id="attr-table-rules" title="attr-table-rules"><code>rules</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dt><dfn id="attr-table-width" title="attr-table-width"><code>width</code></dfn> on <code><a href="the-table-element.html#the-table-element">table</a></code> elements</dt>
   <dt><dfn id="attr-tbody-align" title="attr-tbody-align"><code>align</code></dfn> on <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, and <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> elements</dt>
   <dt><dfn id="attr-tbody-char" title="attr-tbody-char"><code>char</code></dfn> on <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, and <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> elements</dt>
   <dt><dfn id="attr-tbody-charoff" title="attr-tbody-charoff"><code>charoff</code></dfn> on <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, and <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> elements</dt>
   <dt><dfn id="attr-tbody-valign" title="attr-tbody-vAlign"><code>valign</code></dfn> on <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, and <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> elements</dt>
   <dt><dfn id="attr-tdth-align" title="attr-tdth-align"><code>align</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dt><dfn id="attr-tdth-bgcolor" title="attr-tdth-bgcolor"><code>bgcolor</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dt><dfn id="attr-tdth-char" title="attr-tdth-char"><code>char</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dt><dfn id="attr-tdth-charoff" title="attr-tdth-charoff"><code>charoff</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dt><dfn id="attr-tdth-height" title="attr-tdth-height"><code>height</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dt><dfn id="attr-tdth-nowrap" title="attr-tdth-nowrap"><code>nowrap</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dt><dfn id="attr-tdth-valign" title="attr-tdth-valign"><code>valign</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dt><dfn id="attr-tdth-width" title="attr-tdth-width"><code>width</code></dfn> on <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dt><dfn id="attr-tr-align" title="attr-tr-align"><code>align</code></dfn> on <code><a href="the-tr-element.html#the-tr-element">tr</a></code> elements</dt>
   <dt><dfn id="attr-tr-bgcolor" title="attr-tr-bgcolor"><code>bgcolor</code></dfn> on <code><a href="the-tr-element.html#the-tr-element">tr</a></code> elements</dt>
   <dt><dfn id="attr-tr-char" title="attr-tr-char"><code>char</code></dfn> on <code><a href="the-tr-element.html#the-tr-element">tr</a></code> elements</dt>
   <dt><dfn id="attr-tr-charoff" title="attr-tr-charoff"><code>charoff</code></dfn> on <code><a href="the-tr-element.html#the-tr-element">tr</a></code> elements</dt>
   <dt><dfn id="attr-tr-valign" title="attr-tr-valign"><code>valign</code></dfn> on <code><a href="the-tr-element.html#the-tr-element">tr</a></code> elements</dt>
   <dt><dfn id="attr-ul-compact" title="attr-ul-compact"><code>compact</code></dfn> on <code><a href="the-ul-element.html#the-ul-element">ul</a></code> elements</dt>
   <dt><dfn id="attr-ul-type" title="attr-ul-type"><code>type</code></dfn> on <code><a href="the-ul-element.html#the-ul-element">ul</a></code> elements</dt>
   <dt><dfn id="attr-background" title="attr-background"><code>background</code></dfn> on <code><a href="the-body-element.html#the-body-element">body</a></code>, <code><a href="the-table-element.html#the-table-element">table</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>, <code><a href="the-tr-element.html#the-tr-element">tr</a></code>, <code><a href="the-td-element.html#the-td-element">td</a></code>, and <code><a href="the-th-element.html#the-th-element">th</a></code> elements</dt>
   <dd><p>Use CSS instead.</p></dd>

  </dl><hr><p>The <code title="attr-table-border"><a href="the-table-element.html#attr-table-border">border</a></code> attribute on
  the <code><a href="the-table-element.html#the-table-element">table</a></code> element can be used to provide basic fallback
  styling for the purpose of making tables legible in browsing
  environments where CSS support is limited or absent, such as
  text-based browsers, WYSIWYG editors, and in situations where CSS
  support is disabled or the style sheet is lost. Only the empty
  string and the value "<code title="">1</code>" may be used as <code title="attr-table-border"><a href="the-table-element.html#attr-table-border">border</a></code> values for this purpose.
  Other values are considered obsolete. To regulate the thickness of
  such borders, authors should instead use CSS.</p>


  <div class="impl">

  <h3 id="requirements-for-implementations"><span class="secno">11.3 </span>Requirements for implementations</h3>

  <h4 id="the-applet-element"><span class="secno">11.3.1 </span>The <dfn><code>applet</code></dfn> element</h4>

  <p>The <code><a href="#the-applet-element">applet</a></code> element is a Java-specific variant of the
  <code><a href="the-embed-element.html#the-embed-element">embed</a></code> element. The <code><a href="#the-applet-element">applet</a></code> element is now
  obsoleted so that all extension frameworks (Java, .NET, Flash, etc)
  are handled in a consistent manner.</p>

  <p id="sandboxPluginApplet">When the element is still in the
  <a href="#stack-of-open-elements">stack of open elements</a> of an <a href="#html-parser">HTML parser</a>
  or <a href="#xml-parser">XML parser</a>, and when the element is not <a href="infrastructure.html#in-a-document">in a
  <code>Document</code></a>, and when the element's document is not
  <a href="#fully-active">fully active</a>, and when the element's
  <code><a href="dom.html#document">Document</a></code>'s <a href="#active-sandboxing-flag-set">active sandboxing flag set</a> has
  its <a href="#sandboxed-plugins-browsing-context-flag">sandboxed plugins browsing context flag</a> set, and
  when the element has an ancestor <a href="media-elements.html#media-element">media element</a>, and
  when the element has an ancestor <code><a href="the-object-element.html#the-object-element">object</a></code> element that is
  <em>not</em> showing its <a href="content-models.html#fallback-content">fallback content</a>, and when no
  Java Language runtime <a href="infrastructure.html#plugin">plugin</a> is available, and when one
  <em>is</em> available but it is disabled, the element
  <a href="#represents">represents</a> its contents.</p>

  <!-- we assume here that the Java plugin can't be <span
  title="concept-plugin-secure">secured</span>; if anyone does end up
  securing one we can always change this -->

  <p>Otherwise, the user agent should instantiate a Java Language
  runtime <a href="infrastructure.html#plugin">plugin</a>, and should pass the names and values of
  all the attributes on the element, in the order they were added to
  the element, with the attributes added by the parser being ordered
  in source order, and then a parameter named "PARAM" whose value is
  null, and then all the names and values of <a href="the-param-element.html#concept-param-parameter" title="concept-param-parameter">parameters</a> given by
  <code><a href="the-param-element.html#the-param-element">param</a></code> elements that are children of the
  <code><a href="#the-applet-element">applet</a></code> element, in <a href="infrastructure.html#tree-order">tree order</a>, to the
  <a href="infrastructure.html#plugin">plugin</a> used. If the <a href="infrastructure.html#plugin">plugin</a> supports a
  scriptable interface, the <code><a href="#htmlappletelement">HTMLAppletElement</a></code> object
  representing the element should expose that interface. The
  <code><a href="#the-applet-element">applet</a></code> element <a href="#represents">represents</a> the
  <a href="infrastructure.html#plugin">plugin</a>.</p>

  <!-- If we ever make this fetch anything manually, remember to delay
  the load event, and to include ", from the element's <span>browsing
  context scope origin</span> if it has one" when fetching -->

  <p class="note">The <code><a href="#the-applet-element">applet</a></code> element is unaffected by the
  CSS 'display' property. The Java Language runtime is instantiated
  even if the element is hidden with a 'display:none' CSS style.</p>

  <p>The <code><a href="#the-applet-element">applet</a></code> element must implement the
  <code><a href="#htmlappletelement">HTMLAppletElement</a></code> interface.</p>

  <pre class="idl">interface <dfn id="htmlappletelement">HTMLAppletElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <a href="#dom-applet-align" title="dom-applet-align">align</a>;
           attribute DOMString <a href="#dom-applet-alt" title="dom-applet-alt">alt</a>;
           attribute DOMString <a href="#dom-applet-archive" title="dom-applet-archive">archive</a>;
           attribute DOMString <a href="#dom-applet-code" title="dom-applet-code">code</a>;
           attribute DOMString <a href="#dom-applet-codebase" title="dom-applet-codeBase">codeBase</a>;
           attribute DOMString <a href="#dom-applet-height" title="dom-applet-height">height</a>;
           attribute unsigned long <a href="#dom-applet-hspace" title="dom-applet-hspace">hspace</a>;
           attribute DOMString <a href="#dom-applet-name" title="dom-applet-name">name</a>;
           attribute DOMString _<a href="#dom-applet-object" title="dom-applet-object">object</a>; // the underscore is not part of the identifier <!-- it's a Web IDL escaping mechanism -->
           attribute unsigned long <a href="#dom-applet-vspace" title="dom-applet-vspace">vspace</a>;
           attribute DOMString <a href="#dom-applet-width" title="dom-applet-width">width</a>;
};</pre>

  <p>The <dfn id="dom-applet-align" title="dom-applet-align"><code>align</code></dfn>, <dfn id="dom-applet-alt" title="dom-applet-alt"><code>alt</code></dfn>, <dfn id="dom-applet-archive" title="dom-applet-archive"><code>archive</code></dfn>, <dfn id="dom-applet-code" title="dom-applet-code"><code>code</code></dfn>, <dfn id="dom-applet-height" title="dom-applet-height"><code>height</code></dfn>, <dfn id="dom-applet-hspace" title="dom-applet-hspace"><code>hspace</code></dfn>, <dfn id="dom-applet-name" title="dom-applet-name"><code>name</code></dfn>, <dfn id="dom-applet-object" title="dom-applet-object"><code>object</code></dfn>, <dfn id="dom-applet-vspace" title="dom-applet-vspace"><code>vspace</code></dfn>, and <dfn id="dom-applet-width" title="dom-applet-width"><code>width</code></dfn> IDL attributes
  must <a href="common-dom-interfaces.html#reflect">reflect</a> the respective content attributes of the
  same name. For the purposes of reflection, the <code><a href="#the-applet-element">applet</a></code>
  element's <code title="attr-applet-object">object</code> content
  attribute is defined as containing a <a href="urls.html#url">URL</a>.</p>

  <p>The <dfn id="dom-applet-codebase" title="dom-applet-codeBase"><code>codeBase</code></dfn>
  IDL attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-applet-codebase">codebase</code> content attribute,
  which for the purposes of reflection is defined as containing a
  <a href="urls.html#url">URL</a>.</p>


  <h4 id="the-marquee-element-0"><span class="secno">11.3.2 </span>The <dfn><code>marquee</code></dfn> element</h4>

  <p>The <code><a href="#the-marquee-element-0">marquee</a></code> element is a presentational element that
  animates content. CSS transitions and animations are a more
  appropriate mechanism.</p>

  <p>The <a href="#task-source">task source</a> for tasks mentioned in this section
  is the <a href="#dom-manipulation-task-source">DOM manipulation task source</a>.</p>

  <p>The <code><a href="#the-marquee-element-0">marquee</a></code> element must implement the
  <code><a href="#htmlmarqueeelement">HTMLMarqueeElement</a></code> interface.</p>

  <pre class="idl">interface <dfn id="htmlmarqueeelement">HTMLMarqueeElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <a href="#dom-marquee-behavior" title="dom-marquee-behavior">behavior</a>;
           attribute DOMString <a href="#dom-marquee-bgcolor" title="dom-marquee-bgColor">bgColor</a>;
           attribute DOMString <a href="#dom-marquee-direction" title="dom-marquee-direction">direction</a>;
           attribute DOMString <a href="#dom-marquee-height" title="dom-marquee-height">height</a>;
           attribute unsigned long <a href="#dom-marquee-hspace" title="dom-marquee-hspace">hspace</a>;
           attribute long <a href="#dom-marquee-loop" title="dom-marquee-loop">loop</a>;
           attribute unsigned long <a href="#dom-marquee-scrollamount" title="dom-marquee-scrollamount">scrollAmount</a>;
           attribute unsigned long <a href="#dom-marquee-scrolldelay" title="dom-marquee-scrollDelay">scrollDelay</a>;
           attribute boolean <a href="#dom-marquee-truespeed" title="dom-marquee-trueSpeed">trueSpeed</a>;
           attribute unsigned long <a href="#dom-marquee-vspace" title="dom-marquee-vspace">vspace</a>;
           attribute DOMString <a href="#dom-marquee-width" title="dom-marquee-width">width</a>;

           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-marquee-onbounce" title="handler-marquee-onbounce">onbounce</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-marquee-onfinish" title="handler-marquee-onfinish">onfinish</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-marquee-onstart" title="handler-marquee-onstart">onstart</a>;

  void <a href="#dom-marquee-start" title="dom-marquee-start">start</a>();
  void <a href="#dom-marquee-stop" title="dom-marquee-stop">stop</a>();
};</pre>

  <p>A <code><a href="#the-marquee-element-0">marquee</a></code> element can be <dfn id="concept-marquee-on" title="concept-marquee-on">turned on</dfn> or <dfn id="concept-marquee-off" title="concept-marquee-off">turned off</dfn>. When it is created, it
  is <a href="#concept-marquee-on" title="concept-marquee-on">turned on</a>.</p>

  <p>When the <dfn id="dom-marquee-start" title="dom-marquee-start"><code>start()</code></dfn> method is
  called, the <code><a href="#the-marquee-element-0">marquee</a></code> element must be <a href="#concept-marquee-on" title="concept-marquee-on">turned on</a>.</p>

  <p>When the <dfn id="dom-marquee-stop" title="dom-marquee-stop"><code>stop()</code></dfn>
  method is called, the <code><a href="#the-marquee-element-0">marquee</a></code> element must be <a href="#concept-marquee-off" title="concept-marquee-off">turned off</a>.</p>

  <p>When a <code><a href="#the-marquee-element-0">marquee</a></code> element is created, the user agent
  must <a href="#queue-a-task">queue a task</a> to <a href="#fire-a-simple-event">fire a simple event</a>
  named <code title="event-start">start</code> at the element.</p>

  <hr><p>The <dfn id="attr-marquee-behavior" title="attr-marquee-behavior"><code>behavior</code></dfn> content
  attribute on <code><a href="#the-marquee-element-0">marquee</a></code> elements is an <a href="common-microsyntaxes.html#enumerated-attribute">enumerated
  attribute</a> with the following keywords (all
  non-conforming):</p>

  <table><thead><tr><th>Keyword
     </th><th>State
   </th></tr></thead><tbody><tr><td><code title="">scroll</code>
     </td><td><dfn id="attr-marquee-behavior-scroll" title="attr-marquee-behavior-scroll">scroll</dfn>
    </td></tr><tr><td><code title="">slide</code>
     </td><td><dfn id="attr-marquee-behavior-slide" title="attr-marquee-behavior-slide">slide</dfn>
    </td></tr><tr><td><code title="">alternate</code>
     </td><td><dfn id="attr-marquee-behavior-alternate" title="attr-marquee-behavior-alternate">alternate</dfn>
  </td></tr></tbody></table><p>The <i>missing value default</i> is the <a href="#attr-marquee-behavior-scroll" title="attr-marquee-behavior-scroll">scroll</a> state.</p>

  <hr><p>The <dfn id="attr-marquee-direction" title="attr-marquee-direction"><code>direction</code></dfn> content
  attribute on <code><a href="#the-marquee-element-0">marquee</a></code> elements is an <a href="common-microsyntaxes.html#enumerated-attribute">enumerated
  attribute</a> with the following keywords (all
  non-conforming):</p>

  <table><thead><tr><th>Keyword
     </th><th>State
   </th></tr></thead><tbody><tr><td><code title="">left</code>
     </td><td><dfn id="attr-marquee-direction-left" title="attr-marquee-direction-left">left</dfn>
    </td></tr><tr><td><code title="">right</code>
     </td><td><dfn id="attr-marquee-direction-right" title="attr-marquee-direction-right">right</dfn>
    </td></tr><tr><td><code title="">up</code>
     </td><td><dfn id="attr-marquee-direction-up" title="attr-marquee-direction-up">up</dfn>
    </td></tr><tr><td><code title="">down</code>
     </td><td><dfn id="attr-marquee-direction-down" title="attr-marquee-direction-down">down</dfn>
  </td></tr></tbody></table><p>The <i>missing value default</i> is the <a href="#attr-marquee-direction-left" title="attr-marquee-direction-left">left</a> state.</p>

  <hr><p>The <dfn id="attr-marquee-truespeed" title="attr-marquee-truespeed"><code>truespeed</code></dfn> content
  attribute on <code><a href="#the-marquee-element-0">marquee</a></code> elements is a <a href="common-microsyntaxes.html#boolean-attribute">boolean
  attribute</a>.</p>

  <hr><p>A <code><a href="#the-marquee-element-0">marquee</a></code> element has a <dfn id="marquee-scroll-interval">marquee scroll
  interval</dfn>, which is obtained as follows:</p>

  <ol><li><p>If the element has a <code title="attr-marquee-scrolldelay">scrolldelay</code> attribute, and
   parsing its value using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative
   integers</a> does not return an error, then let <var title="">delay</var> be the parsed value. Otherwise, let <var title="">delay</var> be 85.</p></li>

   <li><p>If the element does not have a <code title="attr-marquee-truespeed"><a href="#attr-marquee-truespeed">truespeed</a></code> attribute, and the
   <var title="">delay</var> value is less than 60, then let <var title="">delay</var> be 60 instead.</p></li>

   <li><p>The <a href="#marquee-scroll-interval">marquee scroll interval</a> is <var title="">delay</var>, interpreted in milliseconds.</p></li>

  </ol><hr><p>A <code><a href="#the-marquee-element-0">marquee</a></code> element has a <dfn id="marquee-scroll-distance">marquee scroll
  distance</dfn>, which, if the element has a <code title="attr-marquee-scrollamount">scrollamount</code> attribute, and
  parsing its value using the <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative
  integers</a> does not return an error, is the parsed value
  interpreted in CSS pixels, and otherwise is 6 CSS pixels.</p>

  <hr><p>A <code><a href="#the-marquee-element-0">marquee</a></code> element has a <dfn id="marquee-loop-count">marquee loop
  count</dfn>, which, if the element has a <code title="attr-marquee-loop">loop</code> attribute, and parsing its
  value using the <a href="common-microsyntaxes.html#rules-for-parsing-integers">rules for parsing integers</a> does not
  return an error or a number less than 1, is the parsed value, and
  otherwise is &#8722;1.</p>

  <p>The <dfn id="dom-marquee-loop" title="dom-marquee-loop"><code>loop</code></dfn> IDL
  attribute, on getting, must return the element's <a href="#marquee-loop-count">marquee loop
  count</a>; and on setting, if the new value is different than the
  element's <a href="#marquee-loop-count">marquee loop count</a> and either greater than
  zero or equal to &#8722;1, must set the element's <code title="attr-marquee-loop">loop</code> content attribute (adding it
  if necessary) to the <a href="common-microsyntaxes.html#valid-integer">valid integer</a> that represents the
  new value. (Other values are ignored.)</p>

  <p>A <code><a href="#the-marquee-element-0">marquee</a></code> element also has a <dfn id="marquee-current-loop-index">marquee current
  loop index</dfn>, which is zero when the element is created.</p>

  <p>The rendering layer will occasionally <dfn id="increment-the-marquee-current-loop-index">increment the marquee
  current loop index</dfn>, which must cause the following steps to be
  run:</p>

  <ol><li><p>If the <a href="#marquee-loop-count">marquee loop count</a> is &#8722;1, then
   abort these steps.</p>

   </li><li><p>Increment the <a href="#marquee-current-loop-index">marquee current loop index</a> by
   one.</p></li>

   <li>

    <p>If the <a href="#marquee-current-loop-index">marquee current loop index</a> is now equal to
    or greater than the element's <a href="#marquee-loop-count">marquee loop count</a>,
    <a href="#concept-marquee-off" title="concept-marquee-off">turn off</a> the
    <code><a href="#the-marquee-element-0">marquee</a></code> element and <a href="#queue-a-task">queue a task</a> to
    <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-finish">finish</code> at the <code><a href="#the-marquee-element-0">marquee</a></code>
    element.</p>

    <p>Otherwise, if the <code title="attr-marquee-behavior"><a href="#attr-marquee-behavior">behavior</a></code> attribute is in the
    <a href="#attr-marquee-behavior-alternate" title="attr-marquee-behavior-alternate">alternate</a>
    state, then <a href="#queue-a-task">queue a task</a> to <a href="#fire-a-simple-event">fire a simple
    event</a> named <code title="event-bounce">bounce</code> at
    the <code><a href="#the-marquee-element-0">marquee</a></code> element.</p>

    <p>Otherwise, <a href="#queue-a-task">queue a task</a> to <a href="#fire-a-simple-event">fire a simple
    event</a> named <code title="event-start">start</code> at the
    <code><a href="#the-marquee-element-0">marquee</a></code> element.</p>

   </li>

  </ol><hr><p>The following are the <a href="#event-handlers">event handlers</a> (and their
  corresponding <a href="#event-handler-event-type" title="event handler event type">event handler
  event types</a>) that must be supported, as content and IDL
  attributes, by <code><a href="#the-marquee-element-0">marquee</a></code> elements:</p>

  <table><thead><tr><th><a href="#event-handlers" title="event handlers">Event handler</a> </th><th><a href="#event-handler-event-type">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-marquee-onbounce" title="handler-marquee-onbounce"><code>onbounce</code></dfn> </td><td> <code title="event-bounce">bounce</code>
    </td></tr><tr><td><dfn id="handler-marquee-onfinish" title="handler-marquee-onfinish"><code>onfinish</code></dfn> </td><td> <code title="event-finish">finish</code>
    </td></tr><tr><td><dfn id="handler-marquee-onstart" title="handler-marquee-onstart"><code>onstart</code></dfn> </td><td> <code title="event-start">start</code>
  </td></tr></tbody></table><hr><p>The <dfn id="dom-marquee-behavior" title="dom-marquee-behavior"><code>behavior</code></dfn>, <dfn id="dom-marquee-direction" title="dom-marquee-direction"><code>direction</code></dfn>, <dfn id="dom-marquee-height" title="dom-marquee-height"><code>height</code></dfn>, <dfn id="dom-marquee-hspace" title="dom-marquee-hspace"><code>hspace</code></dfn>, <dfn id="dom-marquee-vspace" title="dom-marquee-vspace"><code>vspace</code></dfn>, and <dfn id="dom-marquee-width" title="dom-marquee-width"><code>width</code></dfn> IDL attributes
  must <a href="common-dom-interfaces.html#reflect">reflect</a> the respective content attributes of the
  same name.</p>

  <p>The <dfn id="dom-marquee-bgcolor" title="dom-marquee-bgColor"><code>bgColor</code></dfn>
  IDL attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-marquee-bgcolor">bgcolor</code> content attribute.</p>

  <p>The <dfn id="dom-marquee-scrollamount" title="dom-marquee-scrollAmount"><code>scrollAmount</code></dfn>
  IDL attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-marquee-scrollamount">scrollamount</code> content
  attribute. The default value is 6.</p>

  <p>The <dfn id="dom-marquee-scrolldelay" title="dom-marquee-scrollDelay"><code>scrollDelay</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-marquee-scrolldelay">scrolldelay</code> content
  attribute. The default value is 85.</p>

  <p>The <dfn id="dom-marquee-truespeed" title="dom-marquee-trueSpeed"><code>trueSpeed</code></dfn> IDL
  attribute must <a href="common-dom-interfaces.html#reflect">reflect</a> the <code title="attr-marquee-truespeed"><a href="#attr-marquee-truespeed">truespeed</a></code> content
  attribute.</p>


  <h4 id="frames"><span class="secno">11.3.3 </span>Frames</h4>

  <p>The <dfn id="frameset"><code>frameset</code></dfn> element acts as <a href="dom.html#the-body-element-0">the
  body element</a> in documents that use frames.</p>

  <p>The <code><a href="#frameset">frameset</a></code> element must implement the
  <code><a href="#htmlframesetelement">HTMLFrameSetElement</a></code> interface.</p>

  <pre class="idl">interface <dfn id="htmlframesetelement">HTMLFrameSetElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <a href="#dom-frameset-cols" title="dom-frameset-cols">cols</a>;
           attribute DOMString <a href="#dom-frameset-rows" title="dom-frameset-rows">rows</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onafterprint" title="handler-window-onafterprint">onafterprint</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onbeforeprint" title="handler-window-onbeforeprint">onbeforeprint</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onbeforeunload" title="handler-window-onbeforeunload">onbeforeunload</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onblur" title="handler-window-onblur">onblur</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onerror" title="handler-window-onerror">onerror</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onfocus" title="handler-window-onfocus">onfocus</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onhashchange" title="handler-window-onhashchange">onhashchange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onload" title="handler-window-onload">onload</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onmessage" title="handler-window-onmessage">onmessage</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onoffline" title="handler-window-onoffline">onoffline</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-ononline" title="handler-window-ononline">ononline</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onpagehide" title="handler-window-onpagehide">onpagehide</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onpageshow" title="handler-window-onpageshow">onpageshow</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onpopstate" title="handler-window-onpopstate">onpopstate</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onresize" title="handler-window-onresize">onresize</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onscroll" title="handler-window-onscroll">onscroll</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onstorage" title="handler-window-onstorage">onstorage</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a href="#handler-window-onunload" title="handler-window-onunload">onunload</a>;
};</pre>

  <p>The <dfn id="dom-frameset-cols" title="dom-frameset-cols"><code>cols</code></dfn> and
  <dfn id="dom-frameset-rows" title="dom-frameset-rows"><code>rows</code></dfn> IDL
  attributes of the <code><a href="#frameset">frameset</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the respective content attributes of the same
  name.</p>

  <p>The <code><a href="#frameset">frameset</a></code> element must support the following
  <a href="#event-handler-content-attributes">event handler content attributes</a> exposing the
  <a href="#event-handlers">event handlers</a> of the <code><a href="#window">Window</a></code> object:</p>

  <ul class="brief"><li><code title="handler-window-onafterprint"><a href="#handler-window-onafterprint">onafterprint</a></code></li>
   <li><code title="handler-window-onbeforeprint"><a href="#handler-window-onbeforeprint">onbeforeprint</a></code></li>
   <li><code title="handler-window-onbeforeunload"><a href="#handler-window-onbeforeunload">onbeforeunload</a></code></li>
   <li><code title="handler-window-onblur"><a href="#handler-window-onblur">onblur</a></code></li>
   <li><code title="handler-window-onerror"><a href="#handler-window-onerror">onerror</a></code></li>
   <li><code title="handler-window-onfocus"><a href="#handler-window-onfocus">onfocus</a></code></li>
   <li><code title="handler-window-onhashchange"><a href="#handler-window-onhashchange">onhashchange</a></code></li>
   <li><code title="handler-window-onload"><a href="#handler-window-onload">onload</a></code></li>
   <li><code title="handler-window-onmessage"><a href="#handler-window-onmessage">onmessage</a></code></li>
   <li><code title="handler-window-onoffline"><a href="#handler-window-onoffline">onoffline</a></code></li>
   <li><code title="handler-window-ononline"><a href="#handler-window-ononline">ononline</a></code></li>
   <li><code title="handler-window-onpagehide"><a href="#handler-window-onpagehide">onpagehide</a></code></li>
   <li><code title="handler-window-onpageshow"><a href="#handler-window-onpageshow">onpageshow</a></code></li>
   <li><code title="handler-window-onpopstate"><a href="#handler-window-onpopstate">onpopstate</a></code></li>
   <li><code title="handler-window-onresize"><a href="#handler-window-onresize">onresize</a></code></li>
   <li><code title="handler-window-onscroll"><a href="#handler-window-onscroll">onscroll</a></code></li>
   <li><code title="handler-window-onstorage"><a href="#handler-window-onstorage">onstorage</a></code></li>
   <li><code title="handler-window-onunload"><a href="#handler-window-onunload">onunload</a></code></li>
  </ul><p>The DOM interface also exposes <a href="#event-handler-idl-attributes">event handler IDL
  attributes</a> that mirror those on the <code><a href="#window">Window</a></code>
  element.</p>

  <p>The <code title="handler-window-onblur"><a href="#handler-window-onblur">onblur</a></code>, <code title="handler-window-onerror"><a href="#handler-window-onerror">onerror</a></code>, <code title="handler-window-onfocus"><a href="#handler-window-onfocus">onfocus</a></code>, <code title="handler-window-onload"><a href="#handler-window-onload">onload</a></code>, and <code title="handler-window-onscroll"><a href="#handler-window-onscroll">onscroll</a></code> <a href="#event-handler-idl-attributes">event handler
  IDL attributes</a> of the <code><a href="#window">Window</a></code> object, exposed on
  the <code><a href="#frameset">frameset</a></code> element, shadow the generic <a href="#event-handler-idl-attributes">event
  handler IDL attributes</a> with the same names normally supported
  by <a href="infrastructure.html#html-elements">HTML elements</a>.</p>

  <hr><p>The <dfn id="frame"><code>frame</code></dfn> element defines a <a href="#nested-browsing-context">nested
  browsing context</a> similar to the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element,
  but rendered within a <code><a href="#frameset">frameset</a></code> element.</p>

  <!-- START of section that's very similar to <iframe> -->

  <p>A <code><a href="#frame">frame</a></code> element is said to be an <dfn id="active-frame-element">active
  <code>frame</code> element</dfn> when it is <a href="infrastructure.html#in-a-document">in a
  <code>Document</code></a> and its <span>parent element</span>, if
  any, is a <code><a href="#frameset">frameset</a></code> element.</p>

  <p>When a <code><a href="#frame">frame</a></code> element is created as an <a href="#active-frame-element">active
  <code>frame</code> element</a>, or becomes an <a href="#active-frame-element">active
  <code>frame</code> element</a> after not having been one, the
  user agent must create a <a href="#nested-browsing-context">nested browsing context</a>, and
  then <a href="#process-the-frame-attributes">process the <code>frame</code> attributes</a> for the
  first time.</p>

  <p>When a <code><a href="#frame">frame</a></code> element stops being an <a href="#active-frame-element">active
  <code>frame</code> element</a>, the user agent must <a href="#a-browsing-context-is-discarded" title="a browsing context is discarded">discard</a> the
  <a href="#nested-browsing-context">nested browsing context</a>.</p>

  <p>Whenever a <code><a href="#frame">frame</a></code> element with a <a href="#nested-browsing-context">nested
  browsing context</a> has its <code title="attr-frame-src">src</code> attribute set, changed, or
  removed, the user agent must <a href="#process-the-frame-attributes">process the <code>frame</code>
  attributes</a>.</p> <!-- It doesn't happen when the base URL is
  changed, though. -->

  <p>When the user agent is to <dfn id="process-the-frame-attributes">process the <code>frame</code>
  attributes</dfn>, it must run the first appropriate steps from the
  following list:</p>

  <dl class="switch"><dt>If the element has no <code title="attr-frame-src">src</code> attribute specified, and the
   user agent is processing the <code><a href="#frame">frame</a></code>'s attributes for
   the first time</dt>

   <dd>

    <p><a href="#queue-a-task">Queue a task</a> to <a href="#fire-a-simple-event">fire a simple event</a>
    named <code title="event-load">load</code> at the
    <code><a href="#frame">frame</a></code> element.</p>

   </dd>

   <dt>Otherwise</dt>

   <dd>

    <ol><li>

      <p>If the value of the <code title="attr-frame-src">src</code>
      attribute is the empty string, let <var title="">url</var> be
      the string "<code><a href="urls.html#about:blank">about:blank</a></code>".</p>

      <p>Otherwise, <a href="urls.html#resolve-a-url" title="resolve a url">resolve</a> the
      value of the <code title="attr-frame-src">src</code> attribute,
      relative to the <code><a href="#frame">frame</a></code> element.</p>

      <p>If that is not successful, then let <var title="">url</var>
      be the string "<code><a href="urls.html#about:blank">about:blank</a></code>". Otherwise, let <var title="">url</var> be the resulting <a href="urls.html#absolute-url">absolute
      URL</a>.</p>

     </li>

     <li>

      <p><a href="#navigate">Navigate</a><!--DONAV frame--> the element's
      <a href="#child-browsing-context">child browsing context</a> to <var title="">url</var>.</p>
      
     </li>

    </ol></dd>

  </dl><p>Any <a href="#navigate" title="navigate">navigation</a> required of the user
  agent in the <a href="#process-the-frame-attributes">process the <code>frame</code> attributes</a>
  algorithm must be completed as an <a href="#explicit-self-navigation-override">explicit self-navigation
  override</a> and with the <code><a href="#frame">frame</a></code> element's
  document's <a href="#browsing-context">browsing context</a> as the <a href="#source-browsing-context">source
  browsing context</a>.</p>

  <p>Furthermore, if the <a href="#active-document">active document</a> of the element's
  <a href="#child-browsing-context">child browsing context</a> before such a <a href="#navigate" title="navigate">navigation</a> was not <a href="#completely-loaded">completely
  loaded</a> at the time of the new <a href="#navigate" title="navigate">navigation</a>, then the <a href="#navigate" title="navigate">navigation</a> must be completed with
  <a href="#replacement-enabled">replacement enabled</a>.</p>

  <p>Similarly, if the <a href="#child-browsing-context">child browsing context</a>'s
  <a href="#session-history">session history</a> contained only one
  <code><a href="dom.html#document">Document</a></code> when the <a href="#process-the-frame-attributes">process the <code>frame</code>
  attributes</a> algorithm was invoked, and that was the
  <code><a href="urls.html#about:blank">about:blank</a></code> <code><a href="dom.html#document">Document</a></code> created when the
  <a href="#child-browsing-context">child browsing context</a> was created, then any <a href="#navigate" title="navigate">navigation</a> required of the user agent in
  that algorithm must be completed with <a href="#replacement-enabled">replacement
  enabled</a>.</p> <!-- see also the note near similar text for the
  location.assign() method -->

  <!-- END of section that's very similar to <iframe> -->

  <p>When the browsing context is created, if a <code title="attr-frame-name">name</code> attribute is present, the
  <a href="#browsing-context-name">browsing context name</a> must be set to the value of this
  attribute; otherwise, the <a href="#browsing-context-name">browsing context name</a> must be
  set to the empty string.</p>

  <p>Whenever the <code title="attr-frame-name">name</code> attribute
  is set, the nested <a href="#browsing-context">browsing context</a>'s <a href="#browsing-context-name" title="browsing context name">name</a> must be changed to the new
  value. If the attribute is removed, the <a href="#browsing-context-name">browsing context
  name</a> must be set to the empty string.</p>

  <p>When content loads in a <code><a href="#frame">frame</a></code>, after any <code title="event-load">load</code> events are fired within the content
  itself, the user agent must <a href="#queue-a-task">queue a task</a> to <a href="#fire-a-simple-event">fire
  a simple event</a> named <code title="event-load">load</code> at
  the <code><a href="#frame">frame</a></code> element. When content fails to load (e.g. due
  to a network error), then the user agent must <a href="#queue-a-task">queue a
  task</a> to <a href="#fire-a-simple-event">fire a simple event</a> named <code title="event-error">error</code> at the element instead.</p>

  <p>The <a href="#task-source">task source</a> for the <a href="#concept-task" title="concept-task">tasks</a> above is the <a href="#dom-manipulation-task-source">DOM
  manipulation task source</a>.</p>

  <p>When there is an <a href="dom.html#active-parser">active parser</a> in the
  <code><a href="#frame">frame</a></code>, and when anything in the <code><a href="#frame">frame</a></code> is
  <a href="#delay-the-load-event" title="delay the load event">delaying the load event</a> of
  the <code><a href="#frame">frame</a></code>'s <a href="#browsing-context">browsing context</a>'s
  <a href="#active-document">active document</a>, the <code><a href="#frame">frame</a></code> must
  <a href="#delay-the-load-event">delay the load event</a> of its document.</p>

  <p>The <code><a href="#frame">frame</a></code> element must implement the
  <code><a href="#htmlframeelement">HTMLFrameElement</a></code> interface.</p>

  <pre class="idl">interface <dfn id="htmlframeelement">HTMLFrameElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <a href="#dom-frame-name" title="dom-frame-name">name</a>;
           attribute DOMString <a href="#dom-frame-scrolling" title="dom-frame-scrolling">scrolling</a>;
           attribute DOMString <a href="#dom-frame-src" title="dom-frame-src">src</a>;
           attribute DOMString <a href="#dom-frame-frameborder" title="dom-frame-frameBorder">frameBorder</a>;
           attribute DOMString <a href="#dom-frame-longdesc" title="dom-frame-longDesc">longDesc</a>;
           attribute boolean <a href="#dom-frame-noresize" title="dom-frame-noResize">noResize</a>;
  readonly attribute Document? <a href="#dom-frame-contentdocument" title="dom-frame-contentDocument">contentDocument</a>;
  readonly attribute <a href="#windowproxy">WindowProxy</a>? <a href="#dom-frame-contentwindow" title="dom-frame-contentWindow">contentWindow</a>;

  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-frame-marginheight" title="dom-frame-marginHeight">marginHeight</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-frame-marginwidth" title="dom-frame-marginWidth">marginWidth</a>;
};</pre>

  <p>The <dfn id="dom-frame-name" title="dom-frame-name"><code>name</code></dfn>, <dfn id="dom-frame-scrolling" title="dom-frame-scrolling"><code>scrolling</code></dfn>, and <dfn id="dom-frame-src" title="dom-frame-src"><code>src</code></dfn> IDL attributes of the
  <code><a href="#frame">frame</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the respective
  content attributes of the same name.</p>

  <p>The <dfn id="dom-frame-frameborder" title="dom-frame-frameBorder"><code>frameBorder</code></dfn> IDL
  attribute of the <code><a href="#frame">frame</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-frame-frameborder">frameborder</code> content
  attribute.</p>

  <p>The <dfn id="dom-frame-longdesc" title="dom-frame-longDesc"><code>longDesc</code></dfn>
  IDL attribute of the <code><a href="#frame">frame</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-frame-longdesc">longdesc</code> content attribute, which
  for the purposes of reflection is defined as containing a
  <a href="urls.html#url">URL</a>.</p>

  <p>The <dfn id="dom-frame-noresize" title="dom-frame-noResize"><code>noResize</code></dfn>
  IDL attribute of the <code><a href="#frame">frame</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-frame-noresize">noresize</code> content attribute.</p>

  <p>The <dfn id="dom-frame-contentdocument" title="dom-frame-contentDocument"><code>contentDocument</code></dfn>
  IDL attribute of the <code><a href="#frame">frame</a></code> element must return the
  <code><a href="dom.html#document">Document</a></code> object of the <a href="#active-document">active document</a> of
  the <code><a href="#frame">frame</a></code> element's <a href="#nested-browsing-context">nested browsing
  context</a>.</p>

  <p>The <dfn id="dom-frame-contentwindow" title="dom-frame-contentWindow"><code>contentWindow</code></dfn>
  IDL attribute must return the <code><a href="#windowproxy">WindowProxy</a></code> object of the
  <code><a href="#frame">frame</a></code> element's <a href="#nested-browsing-context">nested browsing
  context</a>.</p>

  <p>The <dfn id="dom-frame-marginheight" title="dom-frame-marginHeight"><code>marginHeight</code></dfn> IDL
  attribute of the <code><a href="#frame">frame</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-frame-marginheight">marginheight</code> content
  attribute.</p>

  <p>The <dfn id="dom-frame-marginwidth" title="dom-frame-marginWidth"><code>marginWidth</code></dfn> IDL
  attribute of the <code><a href="#frame">frame</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-frame-marginwidth">marginwidth</code> content
  attribute.</p>



  <h4 id="other-elements,-attributes-and-apis"><span class="secno">11.3.4 </span>Other elements, attributes and APIs</h4> <!-- alphabetical by name and attribute -->

  <p>User agents must treat <code><a href="#acronym">acronym</a></code> elements in a manner
  equivalent to <code><a href="the-abbr-element.html#the-abbr-element">abbr</a></code> elements in terms of semantics and
  for purposes of rendering.</p>

  <hr><pre class="idl">partial interface <a href="the-a-element.html#htmlanchorelement">HTMLAnchorElement</a> {
           attribute DOMString <a href="#dom-a-coords" title="dom-a-coords">coords</a>;
           attribute DOMString <a href="#dom-a-charset" title="dom-a-charset">charset</a>;
           attribute DOMString <a href="#dom-a-name" title="dom-a-name">name</a>;
           attribute DOMString <a href="#dom-a-rev" title="dom-a-rev">rev</a>;
           attribute DOMString <a href="#dom-a-shape" title="dom-a-shape">shape</a>;
};</pre>

  <p>The <dfn id="dom-a-coords" title="dom-a-coords"><code>coords</code></dfn>, <dfn id="dom-a-charset" title="dom-a-charset"><code>charset</code></dfn>, <dfn id="dom-a-name" title="dom-a-name"><code>name</code></dfn>, <dfn id="dom-a-rev" title="dom-a-rev"><code>rev</code></dfn>, and <dfn id="dom-a-shape" title="dom-a-shape"><code>shape</code></dfn> IDL attributes of the
  <code><a href="the-a-element.html#the-a-element">a</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the respective
  content attributes of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-area-element.html#htmlareaelement">HTMLAreaElement</a> {
           attribute boolean <a href="#dom-area-nohref" title="dom-area-noHref">noHref</a>;
};</pre>

  <p>The <dfn id="dom-area-nohref" title="dom-area-noHref"><code>noHref</code></dfn> IDL
  attribute of the <code><a href="the-area-element.html#the-area-element">area</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-area-nohref"><a href="#attr-area-nohref">nohref</a></code> content
  attribute.</p>

  <hr><p>The <code><a href="#basefont">basefont</a></code> element must implement the
  <code><a href="#htmlbasefontelement">HTMLBaseFontElement</a></code> interface.</p>

  <pre class="idl">interface <dfn id="htmlbasefontelement">HTMLBaseFontElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <a href="#dom-basefont-color" title="dom-basefont-color">color</a>;
           attribute DOMString <a href="#dom-basefont-face" title="dom-basefont-face">face</a>;
           attribute long <a href="#dom-basefont-size" title="dom-basefont-size">size</a>; <!-- yes, long, not DOMString (so says DOM2 HTML) -->
};</pre>

  <p>The <dfn id="dom-basefont-color" title="dom-basefont-color"><code>color</code></dfn>,
  <dfn id="dom-basefont-face" title="dom-basefont-face"><code>face</code></dfn>, and <dfn id="dom-basefont-size" title="dom-basefont-size"><code>size</code></dfn> IDL attributes of
  the <code><a href="#basefont">basefont</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  respective content attributes of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-body-element.html#htmlbodyelement">HTMLBodyElement</a> {
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-body-text" title="dom-body-text">text</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-body-link" title="dom-body-link">link</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-body-vlink" title="dom-body-vLink">vLink</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-body-alink" title="dom-body-aLink">aLink</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-body-bgcolor" title="dom-body-bgColor">bgColor</a>;
                            attribute DOMString <a href="#dom-body-background" title="dom-body-background">background</a>;
};</pre>

  <p>The <dfn id="dom-body-text" title="dom-body-text"><code>text</code></dfn> IDL
  attribute of the <code><a href="the-body-element.html#the-body-element">body</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-body-text"><a href="#attr-body-text">text</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-body-link" title="dom-body-link"><code>link</code></dfn> IDL
  attribute of the <code><a href="the-body-element.html#the-body-element">body</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-body-link"><a href="#attr-body-link">link</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-body-alink" title="dom-body-aLink"><code>aLink</code></dfn> IDL
  attribute of the <code><a href="the-body-element.html#the-body-element">body</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-body-alink"><a href="#attr-body-alink">alink</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-body-vlink" title="dom-body-vLink"><code>vLink</code></dfn> IDL
  attribute of the <code><a href="the-body-element.html#the-body-element">body</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-body-vlink"><a href="#attr-body-vlink">vlink</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-body-bgcolor" title="dom-body-bgColor"><code>bgColor</code></dfn> IDL
  attribute of the <code><a href="the-body-element.html#the-body-element">body</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-body-bgcolor"><a href="#attr-body-bgcolor">bgcolor</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-body-background" title="dom-body-background"><code>background</code></dfn> IDL
  attribute of the <code><a href="the-body-element.html#the-body-element">body</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-background"><a href="#attr-background">background</a></code>
  content attribute. (The <code title="attr-background"><a href="#attr-background">background</a></code> content is <em>not</em>
  defined to contain a <a href="urls.html#url">URL</a>, despite rules regarding its
  handling in the rendering section above.)</p>

  <hr><pre class="idl">partial interface <a href="the-br-element.html#htmlbrelement">HTMLBRElement</a> {
           attribute DOMString <a href="#dom-br-clear" title="dom-br-clear">clear</a>;
};</pre>

  <p>The <dfn id="dom-br-clear" title="dom-br-clear"><code>clear</code></dfn> IDL
  attribute of the <code><a href="the-br-element.html#the-br-element">br</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-caption-element.html#htmltablecaptionelement">HTMLTableCaptionElement</a> {
           attribute DOMString <a href="#dom-caption-align" title="dom-caption-align">align</a>;
};</pre>

  <p>The <dfn id="dom-caption-align" title="dom-caption-align"><code>align</code></dfn> IDL
  attribute of the <code><a href="the-caption-element.html#the-caption-element">caption</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-colgroup-element.html#htmltablecolelement">HTMLTableColElement</a> {
           attribute DOMString <a href="#dom-col-align" title="dom-col-align">align</a>;
           attribute DOMString <a href="#dom-col-ch" title="dom-col-ch">ch</a>;
           attribute DOMString <a href="#dom-col-choff" title="dom-col-chOff">chOff</a>;
           attribute DOMString <a href="#dom-col-valign" title="dom-col-vAlign">vAlign</a>;
           attribute DOMString <a href="#dom-col-width" title="dom-col-width">width</a>;
};</pre>

  <p>The <dfn id="dom-col-align" title="dom-col-align"><code>align</code></dfn> and <dfn id="dom-col-width" title="dom-col-width"><code>width</code></dfn> IDL attributes of
  the <code><a href="the-col-element.html#the-col-element">col</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  respective content attributes of the same name.</p>

  <p>The <dfn id="dom-col-ch" title="dom-col-ch"><code>ch</code></dfn> IDL attribute
  of the <code><a href="the-col-element.html#the-col-element">col</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  element's <code title="attr-col-char"><a href="#attr-col-char">char</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-col-choff" title="dom-col-chOff"><code>chOff</code></dfn> IDL
  attribute of the <code><a href="the-col-element.html#the-col-element">col</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-col-charoff"><a href="#attr-col-charoff">charoff</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-col-valign" title="dom-col-vAlign"><code>vAlign</code></dfn> IDL
  attribute of the <code><a href="the-col-element.html#the-col-element">col</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-col-valign"><a href="#attr-col-valign">valign</a></code> content
  attribute.</p>

  <hr><p>User agents must treat <code><a href="#dir">dir</a></code> elements in a manner
  equivalent to <code><a href="the-ul-element.html#the-ul-element">ul</a></code> elements in terms of semantics and for
  purposes of rendering.</p>

  <p>The <code><a href="#dir">dir</a></code> element must implement the
  <code><a href="#htmldirectoryelement">HTMLDirectoryElement</a></code> interface.</p>

  <pre class="idl">interface <dfn id="htmldirectoryelement">HTMLDirectoryElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
           attribute boolean <a href="#dom-dir-compact" title="dom-dir-compact">compact</a>;
};</pre>

  <p>The <dfn id="dom-dir-compact" title="dom-dir-compact"><code>compact</code></dfn> IDL
  attribute of the <code><a href="#dir">dir</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-div-element.html#htmldivelement">HTMLDivElement</a> {
           attribute DOMString <a href="#dom-div-align" title="dom-div-align">align</a>;
};</pre>

  <p>The <dfn id="dom-div-align" title="dom-div-align"><code>align</code></dfn> IDL
  attribute of the <code><a href="the-div-element.html#the-div-element">div</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-dl-element.html#htmldlistelement">HTMLDListElement</a> {
           attribute boolean <a href="#dom-dl-compact" title="dom-dl-compact">compact</a>;
};</pre>

  <p>The <dfn id="dom-dl-compact" title="dom-dl-compact"><code>compact</code></dfn> IDL
  attribute of the <code><a href="the-dl-element.html#the-dl-element">dl</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-embed-element.html#htmlembedelement">HTMLEmbedElement</a> {
           attribute DOMString <a href="#dom-embed-align" title="dom-embed-align">align</a>;
           attribute DOMString <a href="#dom-embed-name" title="dom-embed-name">name</a>;
};</pre>

  <p>The <dfn id="dom-embed-name" title="dom-embed-name"><code>name</code></dfn> and <dfn id="dom-embed-align" title="dom-embed-align"><code>align</code></dfn> IDL attributes of
  the <code><a href="the-embed-element.html#the-embed-element">embed</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  respective content attributes of the same name.</p>

  <hr><p>The <code><a href="#font">font</a></code> element must implement the
  <code><a href="#htmlfontelement">HTMLFontElement</a></code> interface.</p>

  <pre class="idl">interface <dfn id="htmlfontelement">HTMLFontElement</dfn> : <a href="elements.html#htmlelement">HTMLElement</a> {
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-font-color" title="dom-font-color">color</a>;
                            attribute DOMString <a href="#dom-font-face" title="dom-font-face">face</a>;
                            attribute DOMString <a href="#dom-font-size" title="dom-font-size">size</a>; <!-- yes, DOMString, not long (so says DOM2 HTML) -->
};</pre>

  <p>The <dfn id="dom-font-color" title="dom-font-color"><code>color</code></dfn>,
  <dfn id="dom-font-face" title="dom-font-face"><code>face</code></dfn>, and <dfn id="dom-font-size" title="dom-font-size"><code>size</code></dfn> IDL attributes of
  the <code><a href="#font">font</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  respective content attributes of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a> {
           attribute DOMString <a href="#dom-hx-align" title="dom-hx-align">align</a>;
};</pre>

  <p>The <dfn id="dom-hx-align" title="dom-hx-align"><code>align</code></dfn> IDL
  attribute of the <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>&#8211;<code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code> elements must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the content attribute of the same name.</p>

  <hr><p class="note">The <dfn id="dom-head-profile" title="dom-head-profile"><code>profile</code></dfn> IDL attribute on
  <code><a href="the-head-element.html#the-head-element">head</a></code> elements (with the <code><a href="the-head-element.html#htmlheadelement">HTMLHeadElement</a></code>
  interface) is intentionally omitted. Unless so required by <a href="infrastructure.html#other-applicable-specifications" title="other applicable specifications">another applicable
  specification</a>, implementations would therefore not support
  this attribute. (It is mentioned here as it was defined in a
  previous version of the DOM specifications.)</p>

  <hr><pre class="idl">partial interface <a href="the-hr-element.html#htmlhrelement">HTMLHRElement</a> {
           attribute DOMString <a href="#dom-hr-align" title="dom-hr-align">align</a>;
           attribute DOMString <a href="#dom-hr-color" title="dom-hr-color">color</a>;
           attribute boolean <a href="#dom-hr-noshade" title="dom-hr-noShade">noShade</a>;
           attribute DOMString <a href="#dom-hr-size" title="dom-hr-size">size</a>;
           attribute DOMString <a href="#dom-hr-width" title="dom-hr-width">width</a>;
};</pre>

  <p>The <dfn id="dom-hr-align" title="dom-hr-align"><code>align</code></dfn>, <dfn id="dom-hr-color" title="dom-hr-color"><code>color</code></dfn>, <dfn id="dom-hr-size" title="dom-hr-size"><code>size</code></dfn>, and <dfn id="dom-hr-width" title="dom-hr-width"><code>width</code></dfn> IDL attributes of the
  <code><a href="the-hr-element.html#the-hr-element">hr</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the respective
  content attributes of the same name.</p>

  <p>The <dfn id="dom-hr-noshade" title="dom-hr-noShade"><code>noShade</code></dfn> IDL
  attribute of the <code><a href="the-hr-element.html#the-hr-element">hr</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-hr-noshade"><a href="#attr-hr-noshade">noshade</a></code> content
  attribute.</p>

  <hr><pre class="idl">partial interface <a href="the-html-element.html#htmlhtmlelement">HTMLHtmlElement</a> {
           attribute DOMString <a href="#dom-html-version" title="dom-html-version">version</a>;
};</pre>

  <p>The <dfn id="dom-html-version" title="dom-html-version"><code>version</code></dfn> IDL
  attribute of the <code><a href="the-html-element.html#the-html-element">html</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-iframe-element.html#htmliframeelement">HTMLIFrameElement</a> {
           attribute DOMString <a href="#dom-iframe-align" title="dom-iframe-align">align</a>;
           attribute DOMString <a href="#dom-iframe-scrolling" title="dom-iframe-scrolling">scrolling</a>;
           attribute DOMString <a href="#dom-iframe-frameborder" title="dom-iframe-frameBorder">frameBorder</a>;
           attribute DOMString <a href="#dom-iframe-longdesc" title="dom-iframe-longDesc">longDesc</a>;

  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-iframe-marginheight" title="dom-iframe-marginHeight">marginHeight</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-iframe-marginwidth" title="dom-iframe-marginWidth">marginWidth</a>;
};</pre>

  <p>The <dfn id="dom-iframe-align" title="dom-iframe-align"><code>align</code></dfn> and
  <dfn id="dom-iframe-scrolling" title="dom-iframe-scrolling"><code>scrolling</code></dfn> IDL
  attributes of the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the respective content attributes of the same
  name.</p>

  <p>The <dfn id="dom-iframe-frameborder" title="dom-iframe-frameBorder"><code>frameBorder</code></dfn> IDL
  attribute of the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-iframe-frameborder"><a href="#attr-iframe-frameborder">frameborder</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-iframe-longdesc" title="dom-iframe-longDesc"><code>longDesc</code></dfn>
  IDL attribute of the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-iframe-longdesc"><a href="#attr-iframe-longdesc">longdesc</a></code> content attribute,
  which for the purposes of reflection is defined as containing a
  <a href="urls.html#url">URL</a>.</p>

  <p>The <dfn id="dom-iframe-marginheight" title="dom-iframe-marginHeight"><code>marginHeight</code></dfn> IDL
  attribute of the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-iframe-marginheight"><a href="#attr-iframe-marginheight">marginheight</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-iframe-marginwidth" title="dom-iframe-marginWidth"><code>marginWidth</code></dfn> IDL
  attribute of the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-iframe-marginwidth"><a href="#attr-iframe-marginwidth">marginwidth</a></code> content
  attribute.</p>

  <hr><pre class="idl">partial interface <a href="the-img-element.html#htmlimageelement">HTMLImageElement</a> {
           attribute DOMString <a href="#dom-img-name" title="dom-img-name">name</a>;
           attribute DOMString <a href="#dom-img-align" title="dom-img-align">align</a>;
           attribute unsigned long <a href="#dom-img-hspace" title="dom-img-hspace">hspace</a>;
           attribute unsigned long <a href="#dom-img-vspace" title="dom-img-vspace">vspace</a>;
           attribute DOMString <a href="#dom-img-longdesc" title="dom-img-longDesc">longDesc</a>;

  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-img-border" title="dom-img-border">border</a>;
};</pre>

  <p>The <dfn id="dom-img-name" title="dom-img-name"><code>name</code></dfn>, <dfn id="dom-img-align" title="dom-img-align"><code>align</code></dfn>, <dfn id="dom-img-border" title="dom-img-border"><code>border</code></dfn>, <dfn id="dom-img-hspace" title="dom-img-hspace"><code>hspace</code></dfn>, and <dfn id="dom-img-vspace" title="dom-img-vspace"><code>vspace</code></dfn> IDL attributes of
  the <code><a href="the-img-element.html#the-img-element">img</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  respective content attributes of the same name.</p>

  <p>The <dfn id="dom-img-longdesc" title="dom-img-longDesc"><code>longDesc</code></dfn> IDL
  attribute of the <code><a href="the-img-element.html#the-img-element">img</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-img-longdesc"><a href="#attr-img-longdesc">longdesc</a></code>
  content attribute, which for the purposes of reflection is defined
  as containing a <a href="urls.html#url">URL</a>.</p>

  <!-- lowsrc is explicitly not given here, see http://www.w3.org/Bugs/Public/show_bug.cgi?id=10341 -->

  <hr><pre class="idl">partial interface <a href="the-input-element.html#htmlinputelement">HTMLInputElement</a> {
           attribute DOMString <a href="#dom-input-align" title="dom-input-align">align</a>;
           attribute DOMString <a href="#dom-input-usemap" title="dom-input-useMap">useMap</a>;
};</pre>

  <p>The <dfn id="dom-input-align" title="dom-input-align"><code>align</code></dfn> IDL
  attribute of the <code><a href="the-input-element.html#the-input-element">input</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <p>The <dfn id="dom-input-usemap" title="dom-input-useMap"><code>useMap</code></dfn> IDL
  attribute of the <code><a href="the-input-element.html#the-input-element">input</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-input-usemap"><a href="#attr-input-usemap">usemap</a></code> content attribute.</p>

  <hr><pre class="idl">partial interface <a href="the-legend-element.html#htmllegendelement">HTMLLegendElement</a> {
           attribute DOMString <a href="#dom-legend-align" title="dom-legend-align">align</a>;
};</pre>

  <p>The <dfn id="dom-legend-align" title="dom-legend-align"><code>align</code></dfn> IDL
  attribute of the <code><a href="the-legend-element.html#the-legend-element">legend</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-li-element.html#htmllielement">HTMLLIElement</a> {
           attribute DOMString <a href="#dom-li-type" title="dom-li-type">type</a>;
};</pre>

  <p>The <dfn id="dom-li-type" title="dom-li-type"><code>type</code></dfn> IDL
  attribute of the <code><a href="the-li-element.html#the-li-element">li</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-link-element.html#htmllinkelement">HTMLLinkElement</a> {
           attribute DOMString <a href="#dom-link-charset" title="dom-link-charset">charset</a>;
           attribute DOMString <a href="#dom-link-rev" title="dom-link-rev">rev</a>;
           attribute DOMString <a href="#dom-link-target" title="dom-link-target">target</a>;
};</pre>

  <p>The <dfn id="dom-link-charset" title="dom-link-charset"><code>charset</code></dfn>,
  <dfn id="dom-link-rev" title="dom-link-rev"><code>rev</code></dfn>, and <dfn id="dom-link-target" title="dom-link-target"><code>target</code></dfn> IDL attributes of
  the <code><a href="the-link-element.html#the-link-element">link</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  respective content attributes of the same name.</p>

  <hr><p>User agents must treat <code><a href="#listing">listing</a></code> elements in a manner
  equivalent to <code><a href="the-pre-element.html#the-pre-element">pre</a></code> elements in terms of semantics and
  for purposes of rendering.</p>

  <hr><pre class="idl">partial interface <a href="#htmlmenuelement">HTMLMenuElement</a> {
           attribute boolean <a href="#dom-menu-compact" title="dom-menu-compact">compact</a>;
};</pre>

  <p>The <dfn id="dom-menu-compact" title="dom-menu-compact"><code>compact</code></dfn> IDL
  attribute of the <code><a href="#the-menu-element">menu</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-meta-element.html#htmlmetaelement">HTMLMetaElement</a> {
           attribute DOMString <a href="#dom-meta-scheme" title="dom-meta-scheme">scheme</a>;
};</pre>

  <p>User agents may treat the <code title="attr-meta-scheme"><a href="#attr-meta-scheme">scheme</a></code> content attribute on the
  <code><a href="the-meta-element.html#the-meta-element">meta</a></code> element as an extension of the element's <code title="attr-meta-name"><a href="the-meta-element.html#attr-meta-name">name</a></code> content attribute when processing
  a <code><a href="the-meta-element.html#the-meta-element">meta</a></code> element with a <code title="attr-meta-name"><a href="the-meta-element.html#attr-meta-name">name</a></code> attribute whose value is one that
  the user agent recognizes as supporting the <code title="attr-meta-scheme"><a href="#attr-meta-scheme">scheme</a></code> attribute.</p>

  <p>User agents are encouraged to ignore the <code title="attr-meta-scheme"><a href="#attr-meta-scheme">scheme</a></code> attribute and instead process
  the value given to the metadata name as if it had been specified for
  each expected value of the <code title="attr-meta-scheme"><a href="#attr-meta-scheme">scheme</a></code> attribute.</p>

  <div class="example">

   <p>For example, if the user agent acts on <code><a href="the-meta-element.html#the-meta-element">meta</a></code>
   elements with <code title="attr-meta-name"><a href="the-meta-element.html#attr-meta-name">name</a></code> attributes
   having the value "eGMS.subject.keyword", and knows that the <code title="attr-meta-scheme"><a href="#attr-meta-scheme">scheme</a></code> attribute is used with this
   metadata name, then it could take the <code title="attr-meta-scheme"><a href="#attr-meta-scheme">scheme</a></code> attribute into account,
   acting as if it was an extension of the <code title="attr-meta-name"><a href="the-meta-element.html#attr-meta-name">name</a></code> attribute. Thus the following
   two <code><a href="the-meta-element.html#the-meta-element">meta</a></code> elements could be treated as two elements
   giving values for two different metadata names, one consisting of a
   combination of "eGMS.subject.keyword" and "LGCL", and the other
   consisting of a combination of "eGMS.subject.keyword" and
   "ORLY":</p>

   <pre class="bad">&lt;!-- this markup is invalid --&gt;
&lt;meta name="eGMS.subject.keyword" scheme="LGCL" content="Abandoned vehicles"&gt;
&lt;meta name="eGMS.subject.keyword" scheme="ORLY" content="Mah car: kthxbye"&gt;</pre>

   <p>The recommended processing of this markup, however, would be
   equivalent to the following:</p>

   <pre>&lt;meta name="eGMS.subject.keyword" content="Abandoned vehicles"&gt;
&lt;meta name="eGMS.subject.keyword" content="Mah car: kthxbye"&gt;</pre>

  </div>

  <p>The <dfn id="dom-meta-scheme" title="dom-meta-scheme"><code>scheme</code></dfn> IDL
  attribute of the <code><a href="the-meta-element.html#the-meta-element">meta</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-object-element.html#htmlobjectelement">HTMLObjectElement</a> {
           attribute DOMString <a href="#dom-object-align" title="dom-object-align">align</a>;
           attribute DOMString <a href="#dom-object-archive" title="dom-object-archive">archive</a>;
           attribute DOMString <a href="#dom-object-code" title="dom-object-code">code</a>;
           attribute boolean <a href="#dom-object-declare" title="dom-object-declare">declare</a>;
           attribute unsigned long <a href="#dom-object-hspace" title="dom-object-hspace">hspace</a>;
           attribute DOMString <a href="#dom-object-standby" title="dom-object-standby">standby</a>;
           attribute unsigned long <a href="#dom-object-vspace" title="dom-object-vspace">vspace</a>;
           attribute DOMString <a href="#dom-object-codebase" title="dom-object-codeBase">codeBase</a>;
           attribute DOMString <a href="#dom-object-codetype" title="dom-object-codeType">codeType</a>;

  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-object-border" title="dom-object-border">border</a>;
};</pre>

  <p>The <dfn id="dom-object-align" title="dom-object-align"><code>align</code></dfn>, <dfn id="dom-object-archive" title="dom-object-archive"><code>archive</code></dfn>, <dfn id="dom-object-border" title="dom-object-border"><code>border</code></dfn>, <dfn id="dom-object-code" title="dom-object-code"><code>code</code></dfn>, <dfn id="dom-object-declare" title="dom-object-declare"><code>declare</code></dfn>, <dfn id="dom-object-hspace" title="dom-object-hspace"><code>hspace</code></dfn>, <dfn id="dom-object-standby" title="dom-object-standby"><code>standby</code></dfn>, and <dfn id="dom-object-vspace" title="dom-object-vspace"><code>vspace</code></dfn> IDL attributes
  of the <code><a href="the-object-element.html#the-object-element">object</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  respective content attributes of the same name.</p>

  <p>The <dfn id="dom-object-codebase" title="dom-object-codeBase"><code>codeBase</code></dfn>
  IDL attribute of the <code><a href="the-object-element.html#the-object-element">object</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-object-codebase"><a href="#attr-object-codebase">codebase</a></code> content attribute,
  which for the purposes of reflection is defined as containing a
  <a href="urls.html#url">URL</a>.</p>

  <p>The <dfn id="dom-object-codetype" title="dom-object-codeType"><code>codeType</code></dfn> IDL
  attribute of the <code><a href="the-object-element.html#the-object-element">object</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-object-codetype"><a href="#attr-object-codetype">codetype</a></code> content
  attribute.</p>

  <hr><pre class="idl">partial interface <a href="the-ol-element.html#htmlolistelement">HTMLOListElement</a> {
           attribute boolean <a href="#dom-ol-compact" title="dom-ol-compact">compact</a>;
};</pre>

  <p>The <dfn id="dom-ol-compact" title="dom-ol-compact"><code>compact</code></dfn> IDL
  attribute of the <code><a href="the-ol-element.html#the-ol-element">ol</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-p-element.html#htmlparagraphelement">HTMLParagraphElement</a> {
           attribute DOMString <a href="#dom-p-align" title="dom-p-align">align</a>;
};</pre>

  <p>The <dfn id="dom-p-align" title="dom-p-align"><code>align</code></dfn> IDL
  attribute of the <code><a href="the-p-element.html#the-p-element">p</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-param-element.html#htmlparamelement">HTMLParamElement</a> {
           attribute DOMString <a href="#dom-param-type" title="dom-param-type">type</a>;
           attribute DOMString <a href="#dom-param-valuetype" title="dom-param-valueType">valueType</a>;
};</pre>

  <p>The <dfn id="dom-param-type" title="dom-param-type"><code>type</code></dfn> IDL
  attribute of the <code><a href="the-param-element.html#the-param-element">param</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the content attribute of the same name.</p>

  <p>The <dfn id="dom-param-valuetype" title="dom-param-valueType"><code>valueType</code></dfn>
  IDL attribute of the <code><a href="the-param-element.html#the-param-element">param</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the element's <code title="attr-param-valuetype"><a href="#attr-param-valuetype">valuetype</a></code> content attribute.</p>

  <hr><p>User agents must treat <code><a href="#plaintext">plaintext</a></code> elements in a
  manner equivalent to <code><a href="the-pre-element.html#the-pre-element">pre</a></code> elements in terms of semantics
  and for purposes of rendering. (The parser has special behavior for
  this element, though.)</p>

  <hr><pre class="idl">partial interface <a href="the-pre-element.html#htmlpreelement">HTMLPreElement</a> {
           attribute long <a href="#dom-pre-width" title="dom-pre-width">width</a>;
};</pre>

  <p>The <dfn id="dom-pre-width" title="dom-pre-width"><code>width</code></dfn> IDL
  attribute of the <code><a href="the-pre-element.html#the-pre-element">pre</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <hr><pre class="idl">partial interface <a href="the-script-element.html#htmlscriptelement">HTMLScriptElement</a> {
           attribute DOMString <a href="#dom-script-event" title="dom-script-event">event</a>;
           attribute DOMString <a href="#dom-script-htmlfor" title="dom-script-htmlFor">htmlFor</a>;
};</pre>

  <p>The <dfn id="dom-script-event" title="dom-script-event"><code>event</code></dfn> and
  <dfn id="dom-script-htmlfor" title="dom-script-htmlFor"><code>htmlFor</code></dfn> IDL
  attributes of the <code><a href="the-script-element.html#the-script-element">script</a></code> element must return the empty
  string on getting, and do nothing on setting.</p>

  <hr><pre class="idl">partial interface <a href="the-table-element.html#htmltableelement">HTMLTableElement</a> {
           attribute DOMString <a href="#dom-table-align" title="dom-table-align">align</a>;
           attribute DOMString <a href="#dom-table-frame" title="dom-table-frame">frame</a>;
           attribute DOMString <a href="#dom-table-rules" title="dom-table-rules">rules</a>;
           attribute DOMString <a href="#dom-table-summary" title="dom-table-summary">summary</a>;
           attribute DOMString <a href="#dom-table-width" title="dom-table-width">width</a>;

  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-table-bgcolor" title="dom-table-bgColor">bgColor</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-table-cellpadding" title="dom-table-cellPadding">cellPadding</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-table-cellspacing" title="dom-table-cellSpacing">cellSpacing</a>;
};</pre>

  <p>The <dfn id="dom-table-align" title="dom-table-align"><code>align</code></dfn>, <dfn id="dom-table-frame" title="dom-table-frame"><code>frame</code></dfn>, <dfn id="dom-table-summary" title="dom-table-summary"><code>summary</code></dfn>, <dfn id="dom-table-rules" title="dom-table-rules"><code>rules</code></dfn>, and <dfn id="dom-table-width" title="dom-table-width"><code>width</code></dfn>, IDL attributes of
  the <code><a href="the-table-element.html#the-table-element">table</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  respective content attributes of the same name.</p>

  <p>The <dfn id="dom-table-bgcolor" title="dom-table-bgColor"><code>bgColor</code></dfn> IDL
  attribute of the <code><a href="the-table-element.html#the-table-element">table</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-table-bgcolor"><a href="#attr-table-bgcolor">bgcolor</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-table-cellpadding" title="dom-table-cellPadding"><code>cellPadding</code></dfn> IDL
  attribute of the <code><a href="the-table-element.html#the-table-element">table</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-table-cellpadding"><a href="#attr-table-cellpadding">cellpadding</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-table-cellspacing" title="dom-table-cellSpacing"><code>cellSpacing</code></dfn> IDL
  attribute of the <code><a href="the-table-element.html#the-table-element">table</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-table-cellspacing"><a href="#attr-table-cellspacing">cellspacing</a></code> content
  attribute.</p>

  <hr><pre class="idl">partial interface <a href="the-tbody-element.html#htmltablesectionelement">HTMLTableSectionElement</a> {
           attribute DOMString <a href="#dom-tbody-align" title="dom-tbody-align">align</a>;
           attribute DOMString <a href="#dom-tbody-ch" title="dom-tbody-ch">ch</a>;
           attribute DOMString <a href="#dom-tbody-choff" title="dom-tbody-chOff">chOff</a>;
           attribute DOMString <a href="#dom-tbody-valign" title="dom-tbody-vAlign">vAlign</a>;
};</pre>

  <p>The <dfn id="dom-tbody-align" title="dom-tbody-align"><code>align</code></dfn> IDL
  attribute of the <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, and
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> elements must <a href="common-dom-interfaces.html#reflect">reflect</a> the content
  attribute of the same name.</p>

  <p>The <dfn id="dom-tbody-ch" title="dom-tbody-ch"><code>ch</code></dfn> IDL attribute
  of the <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, and
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> elements must <a href="common-dom-interfaces.html#reflect">reflect</a> the elements'
  <code title="attr-tbody-char"><a href="#attr-tbody-char">char</a></code> content attributes.</p>

  <p>The <dfn id="dom-tbody-choff" title="dom-tbody-chOff"><code>chOff</code></dfn> IDL
  attribute of the <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, and
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> elements must <a href="common-dom-interfaces.html#reflect">reflect</a> the elements'
  <code title="attr-tbody-charoff"><a href="#attr-tbody-charoff">charoff</a></code> content attributes.</p>

  <p>The <dfn id="dom-tbody-valign" title="dom-tbody-vAlign"><code>vAlign</code></dfn> IDL
  attribute of the <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>, <code><a href="the-thead-element.html#the-thead-element">thead</a></code>, and
  <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the elements'
  <code title="attr-tbody-valign"><a href="#attr-tbody-valign">valign</a></code> content
  attributes.</p>

  <hr><pre class="idl">partial interface <a href="attributes-common-to-td-and-th-elements.html#htmltablecellelement">HTMLTableCellElement</a> {
           attribute DOMString <a href="#dom-tdth-abbr" title="dom-tdth-abbr">abbr</a>;
           attribute DOMString <a href="#dom-tdth-align" title="dom-tdth-align">align</a>;
           attribute DOMString <a href="#dom-tdth-axis" title="dom-tdth-axis">axis</a>;
           attribute DOMString <a href="#dom-tdth-height" title="dom-tdth-height">height</a>;
           attribute DOMString <a href="#dom-tdth-width" title="dom-tdth-width">width</a>;

           attribute DOMString <a href="#dom-tdth-ch" title="dom-tdth-ch">ch</a>;
           attribute DOMString <a href="#dom-tdth-choff" title="dom-tdth-chOff">chOff</a>;
           attribute boolean <a href="#dom-tdth-nowrap" title="dom-tdth-noWrap">noWrap</a>;
           attribute DOMString <a href="#dom-tdth-valign" title="dom-tdth-vAlign">vAlign</a>;

  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-tdth-bgcolor" title="dom-tdth-bgColor">bgColor</a>;
};</pre>

  <p>The <dfn id="dom-tdth-abbr" title="dom-tdth-abbr"><code>abbr</code></dfn>, <dfn id="dom-tdth-align" title="dom-tdth-align"><code>align</code></dfn>, <dfn id="dom-tdth-axis" title="dom-tdth-axis"><code>axis</code></dfn>, <dfn id="dom-tdth-height" title="dom-tdth-height"><code>height</code></dfn>, and <dfn id="dom-tdth-width" title="dom-tdth-width"><code>width</code></dfn> IDL attributes of
  the <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the respective content attributes of the same
  name.</p>

  <p>The <dfn id="dom-tdth-ch" title="dom-tdth-ch"><code>ch</code></dfn> IDL
  attribute of the <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the elements' <code title="attr-tdth-char"><a href="#attr-tdth-char">char</a></code> content attributes.</p>

  <p>The <dfn id="dom-tdth-choff" title="dom-tdth-chOff"><code>chOff</code></dfn> IDL
  attribute of the <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the elements' <code title="attr-tdth-charoff"><a href="#attr-tdth-charoff">charoff</a></code> content attributes.</p>

  <p>The <dfn id="dom-tdth-nowrap" title="dom-tdth-noWrap"><code>noWrap</code></dfn> IDL
  attribute of the <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the elements' <code title="attr-tdth-nowrap"><a href="#attr-tdth-nowrap">nowrap</a></code> content attributes.</p>

  <p>The <dfn id="dom-tdth-valign" title="dom-tdth-vAlign"><code>vAlign</code></dfn> IDL
  attribute of the <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> element must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the elements' <code title="attr-tdth-valign"><a href="#attr-tdth-valign">valign</a></code> content attributes.</p>

  <p>The <dfn id="dom-tdth-bgcolor" title="dom-tdth-bgColor"><code>bgColor</code></dfn> IDL
  attribute of the <code><a href="the-td-element.html#the-td-element">td</a></code> and <code><a href="the-th-element.html#the-th-element">th</a></code> elements must
  <a href="common-dom-interfaces.html#reflect">reflect</a> the elements' <code title="attr-tdth-bgcolor"><a href="#attr-tdth-bgcolor">bgcolor</a></code> content attributes.</p>

  <hr><pre class="idl">partial interface <a href="the-tr-element.html#htmltablerowelement">HTMLTableRowElement</a> {
           attribute DOMString <a href="#dom-tr-align" title="dom-tr-align">align</a>;
           attribute DOMString <a href="#dom-tr-ch" title="dom-tr-ch">ch</a>;
           attribute DOMString <a href="#dom-tr-choff" title="dom-tr-chOff">chOff</a>;
           attribute DOMString <a href="#dom-tr-valign" title="dom-tr-vAlign">vAlign</a>;

  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-tr-bgcolor" title="dom-tr-bgColor">bgColor</a>;
};</pre>

  <p>The <dfn id="dom-tr-align" title="dom-tr-align"><code>align</code></dfn> IDL
  attribute of the <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the content attribute of the same name.</p>

  <p>The <dfn id="dom-tr-ch" title="dom-tr-ch"><code>ch</code></dfn> IDL attribute of
  the <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the element's
  <code title="attr-tr-char"><a href="#attr-tr-char">char</a></code> content attribute.</p>

  <p>The <dfn id="dom-tr-choff" title="dom-tr-chOff"><code>chOff</code></dfn> IDL
  attribute of the <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-tr-charoff"><a href="#attr-tr-charoff">charoff</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-tr-valign" title="dom-tr-vAlign"><code>vAlign</code></dfn> IDL
  attribute of the <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-tr-valign"><a href="#attr-tr-valign">valign</a></code> content
  attribute.</p>

  <p>The <dfn id="dom-tr-bgcolor" title="dom-tr-bgColor"><code>bgColor</code></dfn> IDL
  attribute of the <code><a href="the-tr-element.html#the-tr-element">tr</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a>
  the element's <code title="attr-tr-bgcolor"><a href="#attr-tr-bgcolor">bgcolor</a></code> content
  attribute.</p>

  <hr><pre class="idl">partial interface <a href="the-ul-element.html#htmlulistelement">HTMLUListElement</a> {
           attribute boolean <a href="#dom-ul-compact" title="dom-ul-compact">compact</a>;
           attribute DOMString <a href="#dom-ul-type" title="dom-ul-type">type</a>;
};</pre>

  <p>The <dfn id="dom-ul-compact" title="dom-ul-compact"><code>compact</code></dfn> and
  <dfn id="dom-ul-type" title="dom-ul-type"><code>type</code></dfn> IDL attributes of
  the <code><a href="the-ul-element.html#the-ul-element">ul</a></code> element must <a href="common-dom-interfaces.html#reflect">reflect</a> the respective
  content attributes of the same name.</p>

  <hr><p>User agents must treat <code><a href="#xmp">xmp</a></code> elements in a manner
  equivalent to <code><a href="the-pre-element.html#the-pre-element">pre</a></code> elements in terms of semantics and
  for purposes of rendering. (The parser has special behavior for this
  element though.)</p>

  <hr><p>The <code><a href="#bgsound">bgsound</a></code>, <code><a href="#isindex-0">isindex</a></code>,
  <code><a href="#multicol">multicol</a></code>, <code><a href="#nextid">nextid</a></code>, <code><a href="#rb">rb</a></code>, and
  <code><a href="#spacer">spacer</a></code> elements must use the
  <code><a href="elements.html#htmlunknownelement">HTMLUnknownElement</a></code> interface.</p> <!-- has to be
  explicitly listed because technically we define the elements in the
  spec, albeit as obsolete, and then we say that only elements not
  defined in this spec use HTMLUnknownElement. -->

  <hr><pre class="idl">partial interface <a href="dom.html#document">Document</a> {
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-document-fgcolor" title="dom-document-fgColor">fgColor</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-document-linkcolor" title="dom-document-linkColor">linkColor</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-document-vlinkcolor" title="dom-document-vlinkColor">vlinkColor</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-document-alinkcolor" title="dom-document-alinkColor">alinkColor</a>;
  [TreatNullAs=EmptyString] attribute DOMString <a href="#dom-document-bgcolor" title="dom-document-bgColor">bgColor</a>;

  readonly attribute <a href="infrastructure.html#htmlcollection">HTMLCollection</a> <a href="#dom-document-anchors" title="dom-document-anchors">anchors</a>;
  readonly attribute <a href="infrastructure.html#htmlcollection">HTMLCollection</a> <a href="#dom-document-applets" title="dom-document-applets">applets</a>;

  void <a href="#dom-document-clear" title="dom-document-clear">clear</a>();

  readonly attribute <a href="common-dom-interfaces.html#htmlallcollection-0">HTMLAllCollection</a> <a href="#dom-document-all" title="dom-document-all">all</a>;
};</pre>

  <p>The attributes of the <code><a href="dom.html#document">Document</a></code> object listed in the
  first column of the following table must <a href="common-dom-interfaces.html#reflect">reflect</a> the
  content attribute on <a href="dom.html#the-body-element-0">the body element</a> with the name
  given in the corresponding cell in the second column on the same
  row, if <a href="dom.html#the-body-element-0">the body element</a> is a <code><a href="the-body-element.html#the-body-element">body</a></code> element
  (as opposed to a <code><a href="#frameset">frameset</a></code> element). When there is no
  <a href="dom.html#the-body-element-0" title="the body element">body element</a> or if it is a
  <code><a href="#frameset">frameset</a></code> element, the attributes must instead return
  the empty string on getting and do nothing on setting.</p>

  <table><thead><tr><th> IDL attribute
     </th><th> Content attribute
   </th></tr></thead><tbody><tr><td><dfn id="dom-document-fgcolor" title="dom-document-fgColor"><code>fgColor</code></dfn>
     </td><td><code title="attr-body-text"><a href="#attr-body-text">text</a></code>
    </td></tr><tr><td><dfn id="dom-document-linkcolor" title="dom-document-linkColor"><code>linkColor</code></dfn>
     </td><td><code title="attr-body-link"><a href="#attr-body-link">link</a></code>
    </td></tr><tr><td><dfn id="dom-document-vlinkcolor" title="dom-document-vlinkColor"><code>vlinkColor</code></dfn>
     </td><td><code title="attr-body-vlink"><a href="#attr-body-vlink">vlink</a></code>
    </td></tr><tr><td><dfn id="dom-document-alinkcolor" title="dom-document-alinkColor"><code>alinkColor</code></dfn>
     </td><td><code title="attr-body-alink"><a href="#attr-body-alink">alink</a></code>
    </td></tr><tr><td><dfn id="dom-document-bgcolor" title="dom-document-bgColor"><code>bgColor</code></dfn>
     </td><td><code title="attr-body-bgcolor"><a href="#attr-body-bgcolor">bgcolor</a></code>
  </td></tr></tbody></table><hr><p>The <dfn id="dom-document-anchors" title="dom-document-anchors"><code>anchors</code></dfn>
  attribute must return an <code><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> rooted at the
  <code><a href="dom.html#document">Document</a></code> node, whose filter matches only <code><a href="the-a-element.html#the-a-element">a</a></code>
  elements with <code title="attr-a-name"><a href="#attr-a-name">name</a></code>
  attributes.</p>

  <p>The <dfn id="dom-document-applets" title="dom-document-applets"><code>applets</code></dfn>
  attribute must return an <code><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> rooted at the
  <code><a href="dom.html#document">Document</a></code> node, whose filter matches only
  <code><a href="#the-applet-element">applet</a></code> elements.</p>

  <p>The <dfn id="dom-document-clear" title="dom-document-clear"><code>clear()</code></dfn>
  method must do nothing.</p>

  <hr><p>The <dfn id="dom-document-all" title="dom-document-all"><code>all</code></dfn>
  attribute must return an <code><a href="common-dom-interfaces.html#htmlallcollection-0">HTMLAllCollection</a></code> rooted at the
  <code><a href="dom.html#document">Document</a></code> node, whose filter matches all elements.</p>

  <p>The object returned for <code title="dom-document-all"><a href="#dom-document-all">all</a></code>
  has several unusual behaviors:</p>

  <ul><li><p>The user agent must act as if the ToBoolean() operator in
   JavaScript converts the object returned for <code title="dom-document-all"><a href="#dom-document-all">all</a></code> to the false value.</p></li>

   <li><p>The user agent must act as if, for the purposes of the <code title="">==</code> and <code title="">!=</code> operators in
   JavaScript, the object returned for <code title="dom-document-all"><a href="#dom-document-all">all</a></code> is equal to the <code title="">undefined</code> value.</p></li>

   <li><p>The user agent must act such that the <code title="">typeof</code> operator in JavaScript returns the string
   <code title="">undefined</code> when applied to the object returned
   for <code title="dom-document-all"><a href="#dom-document-all">all</a></code>.</p></li>

  </ul><p class="note">These requirements are a <a href="introduction.html#willful-violation">willful
  violation</a> of the JavaScript specification current at the time
  of writing (ECMAScript edition 5). The JavaScript specification
  requires that the ToBoolean() operator convert all objects to the
  true value, and does not have provisions for objects acting as if
  they were <code title="">undefined</code> for the purposes of
  certain operators. This violation is motivated by a desire for
  compatibility with two classes of legacy content: one that uses the
  presence of <code title="dom-document-all"><a href="#dom-document-all">document.all</a></code> as a
  way to detect legacy user agents, and one that only supports those
  legacy user agents and uses the <code title="dom-document-all"><a href="#dom-document-all">document.all</a></code> object without testing
  for its presence first. <a href="#refsECMA262">[ECMA262]</a></p>

  </div>



  <h2 id="iana"><span class="secno">12 </span>IANA considerations</h2>

  <!-- http://www.w3.org/2002/06/registering-mediatype.html -->


  <h3 id="text/html"><span class="secno">12.1 </span><dfn><code>text/html</code></dfn></h3>

  <p>This registration is for community review and will be submitted
  to the IESG for review, approval, and registration with IANA.</p>

  <!--
   To: ietf-types@iana.org
   Subject: Registration of media type text/html
  -->

  <!--
   Obsoletes:
   http://tools.ietf.org/html/rfc2854

   Include a request to retire RFC 2854 persuant to section 6.4 of RFC 2026.
  -->

  <dl><dt>Type name:</dt>
   <dd>text</dd>
   <dt>Subtype name:</dt>
   <dd>html</dd>
   <dt>Required parameters:</dt>
   <dd>No required parameters</dd>
   <dt>Optional parameters:</dt>
   <dd>
    <dl><dt><code title="">charset</code></dt>
     <dd>
      <p>The <code title="">charset</code> parameter may be provided
      to definitively specify the <a href="infrastructure.html#document's-character-encoding">document's character
      encoding</a>, overriding any <a href="the-meta-element.html#character-encoding-declaration" title="character encoding
      declaration">character encoding declarations</a> in the
      document. The parameter's value must be the name of the
      character encoding used to serialize the file, must be a valid
      character encoding name, and must be an <a href="infrastructure.html#ascii-case-insensitive">ASCII
      case-insensitive</a> match for the <a href="infrastructure.html#preferred-mime-name">preferred MIME
      name</a> for that encoding. <a href="#refsIANACHARSET">[IANACHARSET]</a></p>
     </dd>
    </dl></dd>
   <dt>Encoding considerations:</dt>
   <dd>
    8bit (see the section on <a href="the-meta-element.html#character-encoding-declaration" title="character encoding
    declaration">character encoding declarations</a>)
   </dd>
<!--ADD-TOPIC:Security-->
   <dt>Security considerations:</dt>
   <dd>

    <p>Entire novels have been written about the security
    considerations that apply to HTML documents. Many are listed in
    this document, to which the reader is referred for more
    details. Some general concerns bear mentioning here, however:</p>

    <p>HTML is scripted language, and has a large number of APIs (some
    of which are described in this document). Script can expose the
    user to potential risks of information leakage, credential
    leakage, cross-site scripting attacks, cross-site request
    forgeries, and a host of other problems. While the designs in this
    specification are intended to be safe if implemented correctly, a
    full implementation is a massive undertaking and, as with any
    software, user agents are likely to have security bugs.</p>

    <p>Even without scripting, there are specific features in HTML
    which, for historical reasons, are required for broad
    compatibility with legacy content but that expose the user to
    unfortunate security problems. In particular, the <code><a href="the-img-element.html#the-img-element">img</a></code>
    element can be used in conjunction with some other features as a
    way to effect a port scan from the user's location on the
    Internet. This can expose local network topologies that the
    attacker would otherwise not be able to determine.</p>

    <p>HTML relies on a compartmentalization scheme sometimes known as
    the <i>same-origin policy</i>. An <a href="#origin-0">origin</a> in most
    cases consists of all the pages served from the same host, on the
    same port, using the same protocol.</p>

    <p>It is critical, therefore, to ensure that any untrusted content
    that forms part of a site be hosted on a different
    <a href="#origin-0">origin</a> than any sensitive content on that site.
    Untrusted content can easily spoof any other page on the same
    origin, read data from that origin, cause scripts in that origin
    to execute, submit forms to and from that origin even if they are
    protected from cross-site request forgery attacks by unique
    tokens, and make use of any third-party resources exposed to or
    rights granted to that origin.</p>

   </dd>
<!--REMOVE-TOPIC:Security-->
   <dt>Interoperability considerations:</dt>
   <dd>
    Rules for processing both conforming and non-conforming content
    are defined in this specification.
   </dd>
   <dt>Published specification:</dt>
   <dd id="authors-using-html">
    This document is the relevant specification. Labeling a resource
    with the <code><a href="#text/html">text/html</a></code> type asserts that the resource is
    an <a href="infrastructure.html#html-documents" title="HTML documents">HTML document</a> using
    <a href="#syntax">the HTML syntax</a>.
   </dd>
   <dt>Applications that use this media type:</dt>
   <dd>
    Web browsers, tools for processing Web content, HTML authoring
    tools, search engines, validators.
   </dd>
   <dt>Additional information:</dt>
   <dd>
    <dl><dt>Magic number(s):</dt>
     <dd>No sequence of bytes can uniquely identify an HTML
     document. More information on detecting HTML documents is
     available in the Media Type Sniffing specification. <a href="#refsMIMESNIFF">[MIMESNIFF]</a></dd>
     <dt>File extension(s):</dt>
     <dd>"<code title="">html</code>" and "<code title="">htm</code>"
     are commonly, but certainly not exclusively, used as the
     extension for HTML documents.</dd>
     <dt>Macintosh file type code(s):</dt>
     <dd><code title="">TEXT</code></dd>
    </dl></dd>
   <dt>Person &amp; email address to contact for further information:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Intended usage:</dt>
   <dd>Common</dd>
   <dt>Restrictions on usage:</dt>
   <dd>No restrictions apply.</dd>
   <dt>Author:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Change controller:</dt>
   <dd>W3C</dd>
  </dl><p>Fragment identifiers used with <code><a href="#text/html">text/html</a></code> resources
  either refer to <a href="#the-indicated-part-of-the-document">the indicated part of the document</a> or
  provide state information for in-page scripts.</p>




  <h3 id="multipart/x-mixed-replace"><span class="secno">12.2 </span><dfn><code>multipart/x-mixed-replace</code></dfn></h3>

  <p>This registration is for community review and will be submitted
  to the IESG for review, approval, and registration with IANA.</p>

  <!--
   To: ietf-types@iana.org
   Subject: Registration of media type multipart/x-mixed-replace
  -->

  <dl><dt>Type name:</dt>
   <dd>multipart</dd>
   <dt>Subtype name:</dt>
   <dd>x-mixed-replace</dd>
   <dt>Required parameters:</dt>
   <dd>
    <ul class="brief"><li><code title="">boundary</code> (defined in RFC2046) <a href="#refsRFC2046">[RFC2046]</a>
    </li></ul></dd>
   <dt>Optional parameters:</dt>
   <dd>No optional parameters.</dd>
   <dt>Encoding considerations:</dt>
   <dd>binary</dd>
<!--ADD-TOPIC:Security-->
   <dt>Security considerations:</dt>
   <dd>
    Subresources of a <code><a href="#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code>
    resource can be of any type, including types with non-trivial
    security implications such as <code><a href="#text/html">text/html</a></code>.
   </dd>
<!--REMOVE-TOPIC:Security-->
   <dt>Interoperability considerations:</dt>
   <dd>
    None.
   </dd>
   <dt>Published specification:</dt>
   <dd>
    This specification describes processing rules for Web browsers.
    Conformance requirements for generating resources with this type are the same as for <code>multipart/mixed</code>. <a href="#refsRFC2046">[RFC2046]</a>
   </dd>
   <dt>Applications that use this media type:</dt>
   <dd>
    This type is intended to be used in resources generated by Web servers, for consumption by Web browsers.
   </dd>
   <dt>Additional information:</dt>
   <dd>
    <dl><dt>Magic number(s):</dt>
     <dd>No sequence of bytes can uniquely identify a <code><a href="#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code> resource.</dd>
     <dt>File extension(s):</dt>
     <dd>No specific file extensions are recommended for this type.</dd>
     <dt>Macintosh file type code(s):</dt>
     <dd>No specific Macintosh file type codes are recommended for this type.</dd>
    </dl></dd>
   <dt>Person &amp; email address to contact for further information:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Intended usage:</dt>
   <dd>Common</dd>
   <dt>Restrictions on usage:</dt>
   <dd>No restrictions apply.</dd>
   <dt>Author:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Change controller:</dt>
   <dd>W3C</dd>
  </dl><p>Fragment identifiers used with
  <code><a href="#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code> resources apply to each body
  part as defined by the type used by that body part.</p>


  <h3 id="application/xhtml+xml"><span class="secno">12.3 </span><dfn><code>application/xhtml+xml</code></dfn></h3>

  <p>This registration is for community review and will be submitted
  to the IESG for review, approval, and registration with IANA.</p>

  <!--
   To: ietf-types@iana.org
   Subject: Registration of media type application/xhtml+xml
  -->

  <!--
   Obsoletes:
   http://tools.ietf.org/html/rfc3236
  -->

  <dl><dt>Type name:</dt>
   <dd>application</dd>
   <dt>Subtype name:</dt>
   <dd>xhtml+xml</dd>
   <dt>Required parameters:</dt>
   <dd>Same as for <code>application/xml</code> <a href="#refsRFC3023">[RFC3023]</a></dd>
   <dt>Optional parameters:</dt>
   <dd>Same as for <code>application/xml</code> <a href="#refsRFC3023">[RFC3023]</a></dd>
   <dt>Encoding considerations:</dt>
   <dd>Same as for <code>application/xml</code> <a href="#refsRFC3023">[RFC3023]</a></dd>
<!--ADD-TOPIC:Security-->
   <dt>Security considerations:</dt>
   <dd>Same as for <code>application/xml</code> <a href="#refsRFC3023">[RFC3023]</a></dd>
<!--REMOVE-TOPIC:Security-->
   <dt>Interoperability considerations:</dt>
   <dd>Same as for <code>application/xml</code> <a href="#refsRFC3023">[RFC3023]</a></dd>
   <dt id="authors-using-xhtml">Published specification:</dt>
   <dd>
    Labeling a resource with the <code><a href="#application/xhtml+xml">application/xhtml+xml</a></code>
    type asserts that the resource is an XML document that likely has
    a root element from the <a href="namespaces.html#html-namespace-0">HTML namespace</a>. Thus, the
    relevant specifications are the XML specification, the Namespaces
    in XML specification, and this specification. <a href="#refsXML">[XML]</a> <a href="#refsXMLNS">[XMLNS]</a>
   </dd>
   <dt>Applications that use this media type:</dt>
   <dd>Same as for <code>application/xml</code> <a href="#refsRFC3023">[RFC3023]</a></dd>
   <dt>Additional information:</dt>
   <dd>
    <dl><dt>Magic number(s):</dt>
     <dd>Same as for <code>application/xml</code> <a href="#refsRFC3023">[RFC3023]</a></dd>
     <dt>File extension(s):</dt>
     <dd>"<code title="">xhtml</code>" and "<code title="">xht</code>"
     are sometimes used as extensions for XML resources that have a
     root element from the <a href="namespaces.html#html-namespace-0">HTML namespace</a>.</dd>
     <dt>Macintosh file type code(s):</dt>
     <dd><code title="">TEXT</code></dd>
    </dl></dd>
   <dt>Person &amp; email address to contact for further information:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Intended usage:</dt>
   <dd>Common</dd>
   <dt>Restrictions on usage:</dt>
   <dd>No restrictions apply.</dd>
   <dt>Author:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Change controller:</dt>
   <dd>W3C</dd>
  </dl><p>Fragment identifiers used with <code><a href="#application/xhtml+xml">application/xhtml+xml</a></code>
  resources have the same semantics as with any <a href="infrastructure.html#xml-mime-type">XML MIME
  type</a>. <a href="#refsRFC3023">[RFC3023]</a></p>


  <h3 id="application/x-www-form-urlencoded"><span class="secno">12.4 </span><dfn><code>application/x-www-form-urlencoded</code></dfn></h3>

  <p>This registration is for community review and will be submitted
  to the IESG for review, approval, and registration with IANA.</p>

  <!--
   To: ietf-types@iana.org
   Subject: Registration of media type application/x-www-form-urlencoded
  -->

  <dl><dt>Type name:</dt>
   <dd>application</dd>
   <dt>Subtype name:</dt>
   <dd>x-www-form-urlencoded</dd>
   <dt>Required parameters:</dt>
   <dd>No parameters</dd>
   <dt>Optional parameters:</dt>
   <dd>No parameters</dd>
   <dt>Encoding considerations:</dt>
   <dd>7bit (US-ASCII encoding of octets that themselves can be encoding text using any <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>)</dd>
<!--ADD-TOPIC:Security-->
   <dt>Security considerations:</dt>
   <dd>
    <p>In isolation, an <code><a href="#application/x-www-form-urlencoded">application/x-www-form-urlencoded</a></code>
    payload poses no security risks. However, as this type is usually
    used as part of a form submission, all the risks that apply to
    HTML forms need to be considered in the context of this type.</p>
   </dd>
<!--REMOVE-TOPIC:Security-->
   <dt>Interoperability considerations:</dt>
   <dd>
    Rules for generating and processing
    <code><a href="#application/x-www-form-urlencoded">application/x-www-form-urlencoded</a></code> payloads are
    defined in this specification.
   </dd>
   <dt>Published specification:</dt>
   <dd>
    This document is the relevant specification.
    Algorithms for <a href="#application/x-www-form-urlencoded-encoding-algorithm" title="application/x-www-form-urlencoded encoding algorithm">encoding</a>
    and <a href="#application/x-www-form-urlencoded-decoding-algorithm" title="application/x-www-form-urlencoded decoding algorithm">decoding</a> are defined.
   </dd>
   <dt>Applications that use this media type:</dt>
   <dd>
    Web browsers and servers.
   </dd>
   <dt>Additional information:</dt>
   <dd>
    <dl><dt>Magic number(s):</dt>
     <dd>There is no reliable mechanism for recognising <code><a href="#application/x-www-form-urlencoded">application/x-www-form-urlencoded</a></code> payloads.</dd>
     <dt>File extension(s):</dt>
     <dd>Not applicable.</dd>
     <dt>Macintosh file type code(s):</dt>
     <dd>Not applicable.</dd>
    </dl></dd>
   <dt>Person &amp; email address to contact for further information:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Intended usage:</dt>
   <dd>Common</dd>
   <dt>Restrictions on usage:</dt>
   <dd>This type is only intended to be used to describe HTML form
   submission payloads.</dd>
   <dt>Author:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Change controller:</dt>
   <dd>W3C</dd>
  </dl><p>Fragment identifiers have no meaning with the
  <code><a href="#application/x-www-form-urlencoded">application/x-www-form-urlencoded</a></code> type.</p>


  <h3 id="text/cache-manifest"><span class="secno">12.5 </span><dfn><code>text/cache-manifest</code></dfn></h3>

  <p>This registration is for community review and will be submitted
  to the IESG for review, approval, and registration with IANA.</p>

  <!--
   To: ietf-types@iana.org
   Subject: Registration of media type text/cache-manifest
  -->

  <dl><dt>Type name:</dt>
   <dd>text</dd>
   <dt>Subtype name:</dt>
   <dd>cache-manifest</dd>
   <dt>Required parameters:</dt>
   <dd>No parameters</dd>
   <dt>Optional parameters:</dt>
   <dd>No parameters</dd>
   <dt>Encoding considerations:</dt>
   <dd>8bit (always UTF-8)</dd>
<!--ADD-TOPIC:Security-->
   <dt>Security considerations:</dt>
   <dd>
    <p>Cache manifests themselves pose no immediate risk unless
    sensitive information is included within the
    manifest. Implementations, however, are required to follow
    specific rules when populating a cache based on a cache manifest,
    to ensure that certain origin-based restrictions are
    honored. Failure to correctly implement these rules can result in
    information leakage, cross-site scripting attacks, and the
    like.</p>
   </dd>
<!--REMOVE-TOPIC:Security-->
   <dt>Interoperability considerations:</dt>
   <dd>
    Rules for processing both conforming and non-conforming content
    are defined in this specification.
   </dd>
   <dt>Published specification:</dt>
   <dd>
    This document is the relevant specification.
   </dd>
   <dt>Applications that use this media type:</dt>
   <dd>
    Web browsers.
   </dd>
   <dt>Additional information:</dt>
   <dd>
    <dl><dt>Magic number(s):</dt>
     <dd>Cache manifests begin with the string "<code title="">CACHE
     MANIFEST</code>", followed by either a U+0020 SPACE character, a
     "tab" (U+0009) character, a "LF" (U+000A) character, or a "CR" (U+000D) character.</dd>
     <dt>File extension(s):</dt>
     <dd>"<code title="">appcache</code>"</dd>
     <dt>Macintosh file type code(s):</dt>
     <dd>No specific Macintosh file type codes are recommended for this type.</dd>
    </dl></dd>
   <dt>Person &amp; email address to contact for further information:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Intended usage:</dt>
   <dd>Common</dd>
   <dt>Restrictions on usage:</dt>
   <dd>No restrictions apply.</dd>
   <dt>Author:</dt>
   <dd>Ian Hickson &lt;ian@hixie.ch&gt;</dd>
   <dt>Change controller:</dt>
   <dd>W3C</dd>
  </dl><p>Fragment identifiers have no meaning with
  <code><a href="#text/cache-manifest">text/cache-manifest</a></code> resources.</p>


<!--PING-->

<!--MD-->


<!--PING-->


  


  <h3 id="web+-scheme-prefix"><span class="secno">12.6 </span><dfn title="scheme-web"><code>web+</code> scheme prefix</dfn></h3>

  <p>This section describes a convention for use with the IANA URI
  scheme registry. It does not itself register a specific scheme. <a href="#refsRFC4395">[RFC4395]</a></p>

  <p>Schemes using the <code title="">web+</code> prefix must have names
  starting with the four characters "<code title="">web+</code>"
  followed by one or more letters in the range <code title="">a</code>-<code title="">z</code>.</p>

  <p>Registrations of such schemes should specify the syntax and
  semantics of the scheme. Registrations should define what applications
  and/or protocols use the scheme.</p>

  <p>All "<code title="">web+</code>" schemes should use UTF-8 encodings were  relevant.</p>

<!--ADD-TOPIC:Security-->
  <p>Any Web page is able to register a handler for all "<code title="">web+</code>" schemes. As such, these schemes must not be used
  for features intended to be core platform features (e.g. network
  transfer protocols like HTTP or FTP). Similarly, such schemes must not
  store confidential information in their URLs, such as usernames,
  passwords, personal information, or confidential project names.</p>
<!--REMOVE-TOPIC:Security-->
  <p>Registrations should reference the description of <code title="">web+</code> schemes in <cite>Custom scheme and content
  handlers</cite>, HTML5: <a href="system-state-and-capabilities.html#custom-handlers">http://www.w3.org/TR/html5/system-state-and-capabilities.html#custom-handlers</a></p>


  <h2 class="no-num" id="index">Index</h2>

  <div class="impl">

  <p>The following sections only cover conforming elements and features.</p>

  </div>

  <h3 class="no-num" id="elements-1">Elements</h3>

  <p><i>This section is non-normative.</i></p>
  <!-- XXX this index doesn't list the palpable elements -->

  <table><caption>List of elements</caption>
   <thead><tr><th> Element
     </th><th> Description
     </th><th> Categories
     </th><th> Parents&#8224;
     </th><th> Children
     </th><th> Attributes
     </th><th> Interface
   </th></tr></thead><tbody><tr><th><code><a href="the-a-element.html#the-a-element">a</a></code></th>
     <td>Hyperlink</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#transparent">transparent</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code>;
         <code title="attr-hyperlink-target"><a href="#attr-hyperlink-target">target</a></code>;
<!--DOWNLOAD--><!--PING-->
         <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code>;
         <code title="attr-hyperlink-media"><a href="#attr-hyperlink-media">media</a></code>;
         <code title="attr-hyperlink-hreflang"><a href="#attr-hyperlink-hreflang">hreflang</a></code>;
         <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">type</a></code></td>
     <td><code><a href="the-a-element.html#htmlanchorelement">HTMLAnchorElement</a></code></td>
    </tr><tr><th><code><a href="the-abbr-element.html#the-abbr-element">abbr</a></code></th>
     <td>Abbreviation</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-address-element.html#the-address-element">address</a></code></th>
     <td>Contact information for a page or <code><a href="the-article-element.html#the-article-element">article</a></code> element</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-area-element.html#the-area-element">area</a></code></th>
     <td>Hyperlink or dead area on an image map</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-area-alt"><a href="the-area-element.html#attr-area-alt">alt</a></code>;
         <code title="attr-area-coords"><a href="the-area-element.html#attr-area-coords">coords</a></code>;
         <code title="attr-area-shape"><a href="the-area-element.html#attr-area-shape">shape</a></code>;
         <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">href</a></code>;
         <code title="attr-hyperlink-target"><a href="#attr-hyperlink-target">target</a></code>;
<!--DOWNLOAD--><!--PING-->
         <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">rel</a></code>;
         <code title="attr-hyperlink-media"><a href="#attr-hyperlink-media">media</a></code>;
         <code title="attr-hyperlink-hreflang"><a href="#attr-hyperlink-hreflang">hreflang</a></code>;
         <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">type</a></code></td>
     <td><code><a href="the-area-element.html#htmlareaelement">HTMLAreaElement</a></code></td>
    </tr><tr><th><code><a href="the-article-element.html#the-article-element">article</a></code></th>
     <td>Self-contained syndicatable or reusable composition</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#sectioning-content-0" title="Sectioning content">sectioning</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-aside-element.html#the-aside-element">aside</a></code></th>
     <td>Sidebar for tangentially related content</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#sectioning-content-0" title="Sectioning content">sectioning</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-audio-element.html#the-audio-element">audio</a></code></th>
     <td>Audio player</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#embedded-content-2" title="Embedded content">embedded</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><code><a href="the-source-element.html#the-source-element">source</a></code>*;
         <a href="content-models.html#transparent">transparent</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-media-src"><a href="media-elements.html#attr-media-src">src</a></code>;
         <code title="attr-media-crossorigin"><a href="media-elements.html#attr-media-crossorigin">crossorigin</a></code>;
         <code title="attr-media-preload"><a href="media-elements.html#attr-media-preload">preload</a></code>;
         <code title="attr-media-autoplay"><a href="media-elements.html#attr-media-autoplay">autoplay</a></code>;
         <code title="attr-media-mediagroup"><a href="media-elements.html#attr-media-mediagroup">mediagroup</a></code>;
         <code title="attr-media-loop"><a href="media-elements.html#attr-media-loop">loop</a></code>;
         <code title="attr-media-muted"><a href="media-elements.html#attr-media-muted">muted</a></code>;
         <code title="attr-media-controls"><a href="media-elements.html#attr-media-controls">controls</a></code></td>
     <td><code><a href="the-audio-element.html#htmlaudioelement">HTMLAudioElement</a></code></td>
    </tr><tr><th><code><a href="the-b-element.html#the-b-element">b</a></code></th>
     <td>Keywords</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-base-element.html#the-base-element">base</a></code></th>
     <td>Base URL and default target <a href="#browsing-context">browsing context</a> for <a href="#attr-hyperlink-target" title="attr-hyperlink-target">hyperlinks</a> and <a href="form-submission.html#attr-fs-target" title="attr-fs-target">forms</a></td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata</a></td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-base-href"><a href="the-base-element.html#attr-base-href">href</a></code>;
         <code title="attr-base-target"><a href="the-base-element.html#attr-base-target">target</a></code></td>
     <td><code><a href="the-base-element.html#htmlbaseelement">HTMLBaseElement</a></code></td>
    </tr><tr><th><code><a href="the-bdi-element.html#the-bdi-element">bdi</a></code></th>
     <td>Text directionality isolation</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-bdo-element.html#the-bdo-element">bdo</a></code></th>
     <td>Text directionality formatting</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-blockquote-element.html#the-blockquote-element">blockquote</a></code></th>
     <td>A section quoted from another source</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="headings-and-sections.html#sectioning-root" title="Sectioning root">sectioning root</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-blockquote-cite"><a href="the-blockquote-element.html#attr-blockquote-cite">cite</a></code></td>
     <td><code><a href="the-blockquote-element.html#htmlquoteelement">HTMLQuoteElement</a></code></td>
    </tr><tr><th><code><a href="the-body-element.html#the-body-element">body</a></code></th>
     <td>Document body</td>
     <td><a href="headings-and-sections.html#sectioning-root" title="Sectioning root">sectioning root</a></td>
     <td><code><a href="the-html-element.html#the-html-element">html</a></code></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="handler-window-onafterprint"><a href="#handler-window-onafterprint">onafterprint</a></code>;
         <code title="handler-window-onbeforeprint"><a href="#handler-window-onbeforeprint">onbeforeprint</a></code>;
         <code title="handler-window-onbeforeunload"><a href="#handler-window-onbeforeunload">onbeforeunload</a></code>;
         <code title="handler-window-onblur"><a href="#handler-window-onblur">onblur</a></code>;
         <code title="handler-window-onerror"><a href="#handler-window-onerror">onerror</a></code>;
         <code title="handler-window-onfocus"><a href="#handler-window-onfocus">onfocus</a></code>;
         <code title="handler-window-onhashchange"><a href="#handler-window-onhashchange">onhashchange</a></code>;
         <code title="handler-window-onload"><a href="#handler-window-onload">onload</a></code>;
         <code title="handler-window-onmessage"><a href="#handler-window-onmessage">onmessage</a></code>;
         <code title="handler-window-onoffline"><a href="#handler-window-onoffline">onoffline</a></code>;
         <code title="handler-window-ononline"><a href="#handler-window-ononline">ononline</a></code>;
         <code title="handler-window-onpagehide"><a href="#handler-window-onpagehide">onpagehide</a></code>;
         <code title="handler-window-onpageshow"><a href="#handler-window-onpageshow">onpageshow</a></code>;
         <code title="handler-window-onpopstate"><a href="#handler-window-onpopstate">onpopstate</a></code>;
         <code title="handler-window-onresize"><a href="#handler-window-onresize">onresize</a></code>;
         <code title="handler-window-onscroll"><a href="#handler-window-onscroll">onscroll</a></code>;
         <code title="handler-window-onstorage"><a href="#handler-window-onstorage">onstorage</a></code>;
         <code title="handler-window-onunload"><a href="#handler-window-onunload">onunload</a></code></td>
     <td><code><a href="the-body-element.html#htmlbodyelement">HTMLBodyElement</a></code></td>
    </tr><tr><th><code><a href="the-br-element.html#the-br-element">br</a></code></th>
     <td>Line break, e.g. in poem or postal address</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-br-element.html#htmlbrelement">HTMLBRElement</a></code></td>
    </tr><tr><th><code><a href="the-button-element.html#the-button-element">button</a></code></th>
     <td>Button control</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>;
         <a href="forms.html#category-listed" title="category-listed">listed</a>;
         <a href="forms.html#category-label" title="category-label">labelable</a>;
         <a href="forms.html#category-submit" title="category-submit">submittable</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">autofocus</a></code>;
         <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">disabled</a></code>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-fs-formaction"><a href="form-submission.html#attr-fs-formaction">formaction</a></code>;
         <code title="attr-fs-formenctype"><a href="form-submission.html#attr-fs-formenctype">formenctype</a></code>;
         <code title="attr-fs-formmethod"><a href="form-submission.html#attr-fs-formmethod">formmethod</a></code>;
         <code title="attr-fs-formnovalidate"><a href="form-submission.html#attr-fs-formnovalidate">formnovalidate</a></code>;
         <code title="attr-fs-formtarget"><a href="form-submission.html#attr-fs-formtarget">formtarget</a></code>;
         <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code>;
         <code title="attr-button-type"><a href="the-button-element.html#attr-button-type">type</a></code>;
         <code title="attr-button-value"><a href="the-button-element.html#attr-button-value">value</a></code></td>
     <td><code><a href="the-button-element.html#htmlbuttonelement">HTMLButtonElement</a></code></td>
    </tr><tr><th><code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code></th>
     <td>Scriptable bitmap canvas</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#embedded-content-2" title="Embedded content">embedded</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#transparent">transparent</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-canvas-width"><a href="the-canvas-element.html#attr-canvas-width">width</a></code>;
         <code title="attr-canvas-height"><a href="the-canvas-element.html#attr-canvas-height">height</a></code></td>
     <td><code><a href="the-canvas-element.html#htmlcanvaselement">HTMLCanvasElement</a></code></td>
    </tr><tr><th><code><a href="the-caption-element.html#the-caption-element">caption</a></code></th>
     <td>Table caption</td>
     <td>none</td>
     <td><code><a href="the-table-element.html#the-table-element">table</a></code></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-caption-element.html#htmltablecaptionelement">HTMLTableCaptionElement</a></code></td>
    </tr><tr><th><code><a href="the-cite-element.html#the-cite-element">cite</a></code></th>
     <td>Title of a work</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-code-element.html#the-code-element">code</a></code></th>
     <td>Computer code</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-col-element.html#the-col-element">col</a></code></th>
     <td>Table column</td>
     <td>none</td>
     <td><code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-col-span"><a href="the-col-element.html#attr-col-span">span</a></code></td>
     <td><code><a href="the-colgroup-element.html#htmltablecolelement">HTMLTableColElement</a></code></td>
    </tr><tr><th><code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code></th>
     <td>Group of columns in a table</td>
     <td>none</td>
     <td><code><a href="the-table-element.html#the-table-element">table</a></code></td>
     <td><code><a href="the-col-element.html#the-col-element">col</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-colgroup-span"><a href="the-colgroup-element.html#attr-colgroup-span">span</a></code></td>
     <td><code><a href="the-colgroup-element.html#htmltablecolelement">HTMLTableColElement</a></code></td>
    </tr><tr><th><code><a href="#the-command-element">command</a></code></th>
     <td>Menu command</td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata</a>;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-command-type"><a href="#attr-command-type">type</a></code>;
         <code title="attr-command-label"><a href="#attr-command-label">label</a></code>;
         <code title="attr-command-icon"><a href="#attr-command-icon">icon</a></code>;
         <code title="attr-command-disabled"><a href="#attr-command-disabled">disabled</a></code>;
         <code title="attr-command-checked"><a href="#attr-command-checked">checked</a></code>;
         <code title="attr-command-radiogroup"><a href="#attr-command-radiogroup">radiogroup</a></code>;
         <code title="attr-command-command"><a href="#attr-command-command">command</a></code></td>
     <td><code><a href="#htmlcommandelement">HTMLCommandElement</a></code></td>
    </tr><!--DATA--><!--FORK--><tr><th><code><a href="the-datalist-element.html#the-datalist-element">datalist</a></code></th>
     <td>Container for options for <a href="common-input-element-attributes.html#attr-input-list" title="attr-input-list">combo box control</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <code><a href="the-option-element.html#the-option-element">option</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-datalist-element.html#htmldatalistelement">HTMLDataListElement</a></code></td>
    </tr><tr><th><code><a href="the-dd-element.html#the-dd-element">dd</a></code></th>
     <td>Content for corresponding <code><a href="the-dt-element.html#the-dt-element">dt</a></code> element(s)</td>
     <td>none</td>
     <td><code><a href="the-dl-element.html#the-dl-element">dl</a></code></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-del-element.html#the-del-element">del</a></code></th>
     <td>A removal from the document</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#transparent">transparent</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-mod-cite"><a href="attributes-common-to-ins-and-del-elements.html#attr-mod-cite">cite</a></code>;
         <code title="attr-mod-datetime"><a href="attributes-common-to-ins-and-del-elements.html#attr-mod-datetime">datetime</a></code></td>
     <td><code><a href="attributes-common-to-ins-and-del-elements.html#htmlmodelement">HTMLModElement</a></code></td>
    </tr><tr><th><code><a href="#the-details-element">details</a></code></th>
     <td>Disclosure control for hiding details</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="headings-and-sections.html#sectioning-root" title="Sectioning root">sectioning root</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="#the-summary-element">summary</a></code>*;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-details-open"><a href="#attr-details-open">open</a></code></td>
     <td><code><a href="#htmldetailselement">HTMLDetailsElement</a></code></td>
    </tr><tr><th><code><a href="the-dfn-element.html#the-dfn-element">dfn</a></code></th>
     <td>Defining instance</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="#the-dialog-element">dialog</a></code></th>
     <td>Dialog box or window</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="headings-and-sections.html#sectioning-root" title="Sectioning root">sectioning root</a></td>
     <td><code><a href="the-dt-element.html#the-dt-element">dt</a></code>;
         <code><a href="the-th-element.html#the-th-element">th</a></code>;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-dialog-open"><a href="#attr-dialog-open">open</a></code></td>
     <td><code><a href="#htmldialogelement">HTMLDialogElement</a></code></td>
    </tr><tr><th><code><a href="the-div-element.html#the-div-element">div</a></code></th>
     <td>Generic flow container</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-div-element.html#htmldivelement">HTMLDivElement</a></code></td>
    </tr><tr><th><code><a href="the-dl-element.html#the-dl-element">dl</a></code></th>
     <td>Association list consisting of zero or more name-value groups</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="the-dt-element.html#the-dt-element">dt</a></code>*;
         <code><a href="the-dd-element.html#the-dd-element">dd</a></code>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-dl-element.html#htmldlistelement">HTMLDListElement</a></code></td>
    </tr><tr><th><code><a href="the-dt-element.html#the-dt-element">dt</a></code></th>
     <td>Legend for corresponding <code><a href="the-dd-element.html#the-dd-element">dd</a></code> element(s)</td>
     <td>none</td>
     <td><code><a href="the-dl-element.html#the-dl-element">dl</a></code></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-em-element.html#the-em-element">em</a></code></th>
     <td>Stress emphasis</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-embed-element.html#the-embed-element">embed</a></code></th>
     <td><a href="infrastructure.html#plugin">Plugin</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#embedded-content-2" title="Embedded content">embedded</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-embed-src"><a href="the-embed-element.html#attr-embed-src">src</a></code>;
         <code title="attr-embed-type"><a href="the-embed-element.html#attr-embed-type">type</a></code>;
         <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">width</a></code>;
         <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">height</a></code>;
         any*</td>
     <td><code><a href="the-embed-element.html#htmlembedelement">HTMLEmbedElement</a></code></td>
    </tr><tr><th><code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code></th>
     <td>Group of form controls</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="headings-and-sections.html#sectioning-root" title="Sectioning root">sectioning root</a>;
         <a href="forms.html#category-listed" title="category-listed">listed</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="the-legend-element.html#the-legend-element">legend</a></code>*;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-fieldset-disabled"><a href="the-fieldset-element.html#attr-fieldset-disabled">disabled</a></code>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code></td>
     <td><code><a href="the-fieldset-element.html#htmlfieldsetelement">HTMLFieldSetElement</a></code></td>
    </tr><tr><th><code><a href="the-figcaption-element.html#the-figcaption-element">figcaption</a></code></th>
     <td>Caption for <code><a href="the-figure-element.html#the-figure-element">figure</a></code></td>
     <td>none</td>
     <td><code><a href="the-figure-element.html#the-figure-element">figure</a></code></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-figure-element.html#the-figure-element">figure</a></code></th>
     <td>Figure with optional caption</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="headings-and-sections.html#sectioning-root" title="Sectioning root">sectioning root</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="the-figcaption-element.html#the-figcaption-element">figcaption</a></code>*;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-footer-element.html#the-footer-element">footer</a></code></th>
     <td>Footer for a page or section</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-form-element.html#the-form-element">form</a></code></th>
     <td>User-submittable form</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code>;
         <code title="attr-fs-action"><a href="form-submission.html#attr-fs-action">action</a></code>;
         <code title="attr-form-autocomplete"><a href="the-form-element.html#attr-form-autocomplete">autocomplete</a></code>;
         <code title="attr-fs-enctype"><a href="form-submission.html#attr-fs-enctype">enctype</a></code>;
         <code title="attr-fs-method"><a href="form-submission.html#attr-fs-method">method</a></code>;
         <code title="attr-form-name"><a href="the-form-element.html#attr-form-name">name</a></code>;
         <code title="attr-fs-novalidate"><a href="form-submission.html#attr-fs-novalidate">novalidate</a></code>;
         <code title="attr-fs-target"><a href="form-submission.html#attr-fs-target">target</a></code></td>
     <td><code><a href="the-form-element.html#htmlformelement">HTMLFormElement</a></code></td>
    </tr><tr><th><code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h3</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h4</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h5</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code></th>
     <td>Section heading</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#heading-content-0" title="Heading content">heading</a></td>
     <td><code><a href="the-hgroup-element.html#the-hgroup-element">hgroup</a></code>;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a></code></td>
    </tr><tr><th><code><a href="the-head-element.html#the-head-element">head</a></code></th>
     <td>Container for document metadata</td>
     <td>none</td>
     <td><code><a href="the-html-element.html#the-html-element">html</a></code></td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata content</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-head-element.html#htmlheadelement">HTMLHeadElement</a></code></td>
    </tr><tr><th><code><a href="the-header-element.html#the-header-element">header</a></code></th>
     <td>Introductory or navigational aids for a page or section</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-hgroup-element.html#the-hgroup-element">hgroup</a></code></th>
     <td>heading group</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#heading-content-0" title="Heading content">heading</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td>One or more <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h3</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h4</a></code>, <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h5</a></code>, and/or <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-hr-element.html#the-hr-element">hr</a></code></th>
     <td>Thematic break</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-hr-element.html#htmlhrelement">HTMLHRElement</a></code></td>
    </tr><tr><th><code><a href="the-html-element.html#the-html-element">html</a></code></th>
     <td>Root element</td>
     <td>none</td>
     <td>none*</td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code>*;
         <code><a href="the-body-element.html#the-body-element">body</a></code>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">manifest</a></code></td>
     <td><code><a href="the-html-element.html#htmlhtmlelement">HTMLHtmlElement</a></code></td>
    </tr><tr><th><code><a href="the-i-element.html#the-i-element">i</a></code></th>
     <td>Alternate voice</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code></th>
     <td><a href="#nested-browsing-context">Nested browsing context</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#embedded-content-2" title="Embedded content">embedded</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>text*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-iframe-src"><a href="the-iframe-element.html#attr-iframe-src">src</a></code>;
         <code title="attr-iframe-srcdoc"><a href="the-iframe-element.html#attr-iframe-srcdoc">srcdoc</a></code>;
         <code title="attr-iframe-name"><a href="the-iframe-element.html#attr-iframe-name">name</a></code>;
         <code title="attr-iframe-sandbox"><a href="the-iframe-element.html#attr-iframe-sandbox">sandbox</a></code>;
         <code title="attr-iframe-seamless"><a href="the-iframe-element.html#attr-iframe-seamless">seamless</a></code>;
         <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">width</a></code>;
         <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">height</a></code></td>
     <td><code><a href="the-iframe-element.html#htmliframeelement">HTMLIFrameElement</a></code></td>
    </tr><tr><th><code><a href="the-img-element.html#the-img-element">img</a></code></th>
     <td>Image</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#embedded-content-2" title="Embedded content">embedded</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>*</td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-img-alt"><a href="the-img-element.html#attr-img-alt">alt</a></code>;
         <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">src</a></code>;
         <code title="attr-img-crossorigin"><a href="the-img-element.html#attr-img-crossorigin">crossorigin</a></code>;
         <code title="attr-hyperlink-usemap"><a href="image-maps.html#attr-hyperlink-usemap">usemap</a></code>;
         <code title="attr-img-ismap"><a href="the-img-element.html#attr-img-ismap">ismap</a></code>;
         <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">width</a></code>;
         <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">height</a></code></td>
     <td><code><a href="the-img-element.html#htmlimageelement">HTMLImageElement</a></code></td>
    </tr><tr><th><code><a href="the-input-element.html#the-input-element">input</a></code></th>
     <td>Form control</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>*;
         <a href="forms.html#category-listed" title="category-listed">listed</a>;
         <a href="forms.html#category-label" title="category-label">labelable</a>;
         <a href="forms.html#category-submit" title="category-submit">submittable</a>;
         <a href="forms.html#category-reset" title="category-reset">resettable</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-input-accept"><a href="states-of-the-type-attribute.html#attr-input-accept">accept</a></code>;
         <code title="attr-input-alt"><a href="states-of-the-type-attribute.html#attr-input-alt">alt</a></code>;
         <code title="attr-input-autocomplete"><a href="common-input-element-attributes.html#attr-input-autocomplete">autocomplete</a></code>;
         <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">autofocus</a></code>;
         <code title="attr-input-checked"><a href="the-input-element.html#attr-input-checked">checked</a></code>;
         <code title="attr-input-dirname"><a href="common-input-element-attributes.html#attr-input-dirname">dirname</a></code>;
         <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">disabled</a></code>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-fs-formaction"><a href="form-submission.html#attr-fs-formaction">formaction</a></code>;
         <code title="attr-fs-formenctype"><a href="form-submission.html#attr-fs-formenctype">formenctype</a></code>;
         <code title="attr-fs-formmethod"><a href="form-submission.html#attr-fs-formmethod">formmethod</a></code>;
         <code title="attr-fs-formnovalidate"><a href="form-submission.html#attr-fs-formnovalidate">formnovalidate</a></code>;
         <code title="attr-fs-formtarget"><a href="form-submission.html#attr-fs-formtarget">formtarget</a></code>;
         <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">height</a></code>;
         <code title="attr-input-list"><a href="common-input-element-attributes.html#attr-input-list">list</a></code>;
         <code title="attr-input-max"><a href="common-input-element-attributes.html#attr-input-max">max</a></code>;
         <code title="attr-input-maxlength"><a href="common-input-element-attributes.html#attr-input-maxlength">maxlength</a></code>;
         <code title="attr-input-min"><a href="common-input-element-attributes.html#attr-input-min">min</a></code>;
         <code title="attr-input-multiple"><a href="common-input-element-attributes.html#attr-input-multiple">multiple</a></code>;
         <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code>;
         <code title="attr-input-pattern"><a href="common-input-element-attributes.html#attr-input-pattern">pattern</a></code>;
         <code title="attr-input-placeholder"><a href="common-input-element-attributes.html#attr-input-placeholder">placeholder</a></code>;
         <code title="attr-input-readonly"><a href="common-input-element-attributes.html#attr-input-readonly">readonly</a></code>;
         <code title="attr-input-required"><a href="common-input-element-attributes.html#attr-input-required">required</a></code>;
         <code title="attr-input-size"><a href="common-input-element-attributes.html#attr-input-size">size</a></code>;
         <code title="attr-input-src"><a href="states-of-the-type-attribute.html#attr-input-src">src</a></code>;
         <code title="attr-input-step"><a href="common-input-element-attributes.html#attr-input-step">step</a></code>;
         <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code>;
         <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">value</a></code>;
         <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">width</a></code></td>
     <td><code><a href="the-input-element.html#htmlinputelement">HTMLInputElement</a></code></td>
    </tr><tr><th><code><a href="the-ins-element.html#the-ins-element">ins</a></code></th>
     <td>An addition to the document</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#transparent">transparent</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-mod-cite"><a href="attributes-common-to-ins-and-del-elements.html#attr-mod-cite">cite</a></code>;
         <code title="attr-mod-datetime"><a href="attributes-common-to-ins-and-del-elements.html#attr-mod-datetime">datetime</a></code></td>
     <td><code><a href="attributes-common-to-ins-and-del-elements.html#htmlmodelement">HTMLModElement</a></code></td>
    </tr><tr><th><code><a href="the-kbd-element.html#the-kbd-element">kbd</a></code></th>
     <td>User input</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code></th>
     <td>Cryptographic key-pair generator form control</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>;
         <a href="forms.html#category-listed" title="category-listed">listed</a>;
         <a href="forms.html#category-label" title="category-label">labelable</a>;
         <a href="forms.html#category-submit" title="category-submit">submittable</a>;
         <a href="forms.html#category-reset" title="category-reset">resettable</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">autofocus</a></code>;
         <code title="attr-keygen-challenge"><a href="the-keygen-element.html#attr-keygen-challenge">challenge</a></code>;
         <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">disabled</a></code>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-keygen-keytype"><a href="the-keygen-element.html#attr-keygen-keytype">keytype</a></code>;
         <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code></td>
     <td><code><a href="the-keygen-element.html#htmlkeygenelement">HTMLKeygenElement</a></code></td>
    </tr><tr><th><code><a href="the-label-element.html#the-label-element">label</a></code></th>
     <td>Caption for a form control</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-label-for"><a href="the-label-element.html#attr-label-for">for</a></code></td>
     <td><code><a href="the-label-element.html#htmllabelelement">HTMLLabelElement</a></code></td>
    </tr><tr><th><code><a href="the-legend-element.html#the-legend-element">legend</a></code></th>
     <td>Caption for <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code></td>
     <td>none</td>
     <td><code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-legend-element.html#htmllegendelement">HTMLLegendElement</a></code></td>
    </tr><tr><th><code><a href="the-li-element.html#the-li-element">li</a></code></th>
     <td>List item</td>
     <td>none</td>
     <td><code><a href="the-ol-element.html#the-ol-element">ol</a></code>; <code><a href="the-ul-element.html#the-ul-element">ul</a></code>; <code><a href="#the-menu-element">menu</a></code></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-li-value"><a href="the-li-element.html#attr-li-value">value</a></code>*</td>
     <td><code><a href="the-li-element.html#htmllielement">HTMLLIElement</a></code></td>
    </tr><tr><th><code><a href="the-link-element.html#the-link-element">link</a></code></th>
     <td>Link metadata</td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata</a>;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a>*;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code>;
         <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code>*;
         <a href="content-models.html#phrasing-content-1" title="phrasing content">phrasing</a>*</td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-link-href"><a href="the-link-element.html#attr-link-href">href</a></code>;
         <code title="attr-link-rel"><a href="the-link-element.html#attr-link-rel">rel</a></code>;
         <code title="attr-link-media"><a href="the-link-element.html#attr-link-media">media</a></code>;
         <code title="attr-link-hreflang"><a href="the-link-element.html#attr-link-hreflang">hreflang</a></code>;
         <code title="attr-link-type"><a href="the-link-element.html#attr-link-type">type</a></code>;
         <code title="attr-link-sizes"><a href="#attr-link-sizes">sizes</a></code></td>
     <td><code><a href="the-link-element.html#htmllinkelement">HTMLLinkElement</a></code></td>
    </tr><tr><th><code><a href="the-map-element.html#the-map-element">map</a></code></th>
     <td><a href="image-maps.html#image-map">Image map</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#transparent">transparent</a>;
         <code><a href="the-area-element.html#the-area-element">area</a></code>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-map-name"><a href="the-map-element.html#attr-map-name">name</a></code></td>
     <td><code><a href="the-map-element.html#htmlmapelement">HTMLMapElement</a></code></td>
    </tr><tr><th><code><a href="the-mark-element.html#the-mark-element">mark</a></code></th>
     <td>Highlight</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="#the-menu-element">menu</a></code></th>
     <td>Menu of commands</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>*</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="the-li-element.html#the-li-element">li</a></code>*;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code>;
         <code title="attr-menu-label"><a href="#attr-menu-label">label</a></code></td>
     <td><code><a href="#htmlmenuelement">HTMLMenuElement</a></code></td>
    </tr><tr><th><code><a href="the-meta-element.html#the-meta-element">meta</a></code></th>
     <td>Text metadata</td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata</a>;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a>*;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code>;
         <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code>*;
         <a href="content-models.html#phrasing-content-1" title="phrasing content">phrasing</a>*</td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-meta-name"><a href="the-meta-element.html#attr-meta-name">name</a></code>;
         <code title="attr-meta-http-equiv"><a href="the-meta-element.html#attr-meta-http-equiv">http-equiv</a></code>;
         <code title="attr-meta-content"><a href="the-meta-element.html#attr-meta-content">content</a></code>;
         <code title="attr-meta-charset"><a href="the-meta-element.html#attr-meta-charset">charset</a></code></td>
     <td><code><a href="the-meta-element.html#htmlmetaelement">HTMLMetaElement</a></code></td>
    </tr><tr><th><code><a href="the-meter-element.html#the-meter-element">meter</a></code></th>
     <td>Gauge</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="forms.html#category-label" title="category-label">labelable</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-meter-value"><a href="the-meter-element.html#attr-meter-value">value</a></code>;
         <code title="attr-meter-min"><a href="the-meter-element.html#attr-meter-min">min</a></code>;
         <code title="attr-meter-max"><a href="the-meter-element.html#attr-meter-max">max</a></code>;
         <code title="attr-meter-low"><a href="the-meter-element.html#attr-meter-low">low</a></code>;
         <code title="attr-meter-high"><a href="the-meter-element.html#attr-meter-high">high</a></code>;
         <code title="attr-meter-optimum"><a href="the-meter-element.html#attr-meter-optimum">optimum</a></code></td>
     <td><code><a href="the-meter-element.html#htmlmeterelement">HTMLMeterElement</a></code></td>
    </tr><tr><th><code><a href="the-nav-element.html#the-nav-element">nav</a></code></th>
     <td>Section with navigational links</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#sectioning-content-0" title="Sectioning content">sectioning</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code></th>
     <td>Fallback content for script</td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata</a>;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code>*;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td>varies*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-object-element.html#the-object-element">object</a></code></th>
     <td>Image, <a href="#nested-browsing-context">nested browsing context</a>, or <a href="infrastructure.html#plugin">plugin</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#embedded-content-2" title="Embedded content">embedded</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>*;
         <a href="forms.html#category-listed" title="category-listed">listed</a>;
         <a href="forms.html#category-submit" title="category-submit">submittable</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><code><a href="the-param-element.html#the-param-element">param</a></code>*;
         <a href="content-models.html#transparent">transparent</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-object-data"><a href="the-object-element.html#attr-object-data">data</a></code>;
         <code title="attr-object-type"><a href="the-object-element.html#attr-object-type">type</a></code>;
         <code title="attr-object-typemustmatch"><a href="the-object-element.html#attr-object-typemustmatch">typemustmatch</a></code>;
         <code title="attr-object-name"><a href="the-object-element.html#attr-object-name">name</a></code>;
         <code title="attr-hyperlink-usemap"><a href="image-maps.html#attr-hyperlink-usemap">usemap</a></code>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">width</a></code>;
         <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">height</a></code></td>
     <td><code><a href="the-object-element.html#htmlobjectelement">HTMLObjectElement</a></code></td>
    </tr><tr><th><code><a href="the-ol-element.html#the-ol-element">ol</a></code></th>
     <td>Ordered list</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="the-li-element.html#the-li-element">li</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-ol-reversed"><a href="the-ol-element.html#attr-ol-reversed">reversed</a></code>;
         <code title="attr-ol-start"><a href="the-ol-element.html#attr-ol-start">start</a></code></td>
     <td><code><a href="the-ol-element.html#htmlolistelement">HTMLOListElement</a></code></td>
    </tr><tr><th><code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code></th>
     <td>Group of options in a list box</td>
     <td>none</td>
     <td><code><a href="the-select-element.html#the-select-element">select</a></code></td>
     <td><code><a href="the-option-element.html#the-option-element">option</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-optgroup-disabled"><a href="the-optgroup-element.html#attr-optgroup-disabled">disabled</a></code>;
         <code title="attr-optgroup-label"><a href="the-optgroup-element.html#attr-optgroup-label">label</a></code></td>
     <td><code><a href="the-optgroup-element.html#htmloptgroupelement">HTMLOptGroupElement</a></code></td>
    </tr><tr><th><code><a href="the-option-element.html#the-option-element">option</a></code></th>
     <td>Option in a list box or combo box control</td>
     <td>none</td>
     <td><code><a href="the-select-element.html#the-select-element">select</a></code>;
         <code><a href="the-datalist-element.html#the-datalist-element">datalist</a></code>;
         <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code></td>
     <td><a href="content-models.html#text-content" title="text content">text</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-option-disabled"><a href="the-option-element.html#attr-option-disabled">disabled</a></code>;
         <code title="attr-option-label"><a href="the-option-element.html#attr-option-label">label</a></code>;
         <code title="attr-option-selected"><a href="the-option-element.html#attr-option-selected">selected</a></code>;
         <code title="attr-option-value"><a href="the-option-element.html#attr-option-value">value</a></code></td>
     <td><code><a href="the-option-element.html#htmloptionelement">HTMLOptionElement</a></code></td>
    </tr><tr><th><code><a href="the-output-element.html#the-output-element">output</a></code></th>
     <td>Calculated output value</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="forms.html#category-listed" title="category-listed">listed</a>;
         <a href="forms.html#category-label" title="category-label">labelable</a>;
         <a href="forms.html#category-reset" title="category-reset">resettable</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-output-for"><a href="the-output-element.html#attr-output-for">for</a></code>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code></td>
     <td><code><a href="the-output-element.html#htmloutputelement">HTMLOutputElement</a></code></td>
    </tr><tr><th><code><a href="the-p-element.html#the-p-element">p</a></code></th>
     <td>Paragraph</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-p-element.html#htmlparagraphelement">HTMLParagraphElement</a></code></td>
    </tr><tr><th><code><a href="the-param-element.html#the-param-element">param</a></code></th>
     <td>Parameter for <code><a href="the-object-element.html#the-object-element">object</a></code></td>
     <td>none</td>
     <td><code><a href="the-object-element.html#the-object-element">object</a></code></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-param-name"><a href="the-param-element.html#attr-param-name">name</a></code>;
         <code title="attr-param-value"><a href="the-param-element.html#attr-param-value">value</a></code></td>
     <td><code><a href="the-param-element.html#htmlparamelement">HTMLParamElement</a></code></td>
    </tr><tr><th><code><a href="the-pre-element.html#the-pre-element">pre</a></code></th>
     <td>Block of preformatted text</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-pre-element.html#htmlpreelement">HTMLPreElement</a></code></td>
    </tr><tr><th><code><a href="the-progress-element.html#the-progress-element">progress</a></code></th>
     <td>Progress bar</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="forms.html#category-label" title="category-label">labelable</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-progress-value"><a href="the-progress-element.html#attr-progress-value">value</a></code>;
         <code title="attr-progress-max"><a href="the-progress-element.html#attr-progress-max">max</a></code></td>
     <td><code><a href="the-progress-element.html#htmlprogresselement">HTMLProgressElement</a></code></td>
    </tr><tr><th><code><a href="the-q-element.html#the-q-element">q</a></code></th>
     <td>Quotation</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-q-cite"><a href="the-q-element.html#attr-q-cite">cite</a></code></td>
     <td><code><a href="the-blockquote-element.html#htmlquoteelement">HTMLQuoteElement</a></code></td>
    </tr><tr><th><code><a href="the-rp-element.html#the-rp-element">rp</a></code></th>
     <td>Parenthesis for ruby annotation text</td>
     <td>none</td>
     <td><code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-rt-element.html#the-rt-element">rt</a></code></th>
     <td>Ruby annotation text</td>
     <td>none</td>
     <td><code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code></th>
     <td>Ruby annotation(s)</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <code><a href="the-rt-element.html#the-rt-element">rt</a></code>;
         <code><a href="the-rp-element.html#the-rp-element">rp</a></code>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-s-element.html#the-s-element">s</a></code></th>
     <td>Inaccurate text</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-samp-element.html#the-samp-element">samp</a></code></th>
     <td>Computer output</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-script-element.html#the-script-element">script</a></code></th>
     <td>Embedded script</td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata</a>;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>script, data, or script documentation*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-script-src"><a href="the-script-element.html#attr-script-src">src</a></code>;
         <code title="attr-script-async"><a href="the-script-element.html#attr-script-async">async</a></code>;
         <code title="attr-script-defer"><a href="the-script-element.html#attr-script-defer">defer</a></code>;
         <code title="attr-script-type"><a href="the-script-element.html#attr-script-type">type</a></code>;
         <code title="attr-script-charset"><a href="the-script-element.html#attr-script-charset">charset</a></code></td>
     <td><code><a href="the-script-element.html#htmlscriptelement">HTMLScriptElement</a></code></td>
    </tr><tr><th><code><a href="the-section-element.html#the-section-element">section</a></code></th>
     <td>Generic document or application section</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#sectioning-content-0" title="Sectioning content">sectioning</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-select-element.html#the-select-element">select</a></code></th>
     <td>List box control</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>;
         <a href="forms.html#category-listed" title="category-listed">listed</a>;
         <a href="forms.html#category-label" title="category-label">labelable</a>;
         <a href="forms.html#category-submit" title="category-submit">submittable</a>;
         <a href="forms.html#category-reset" title="category-reset">resettable</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><code><a href="the-option-element.html#the-option-element">option</a></code>, <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">autofocus</a></code>;
         <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">disabled</a></code>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-select-multiple"><a href="the-select-element.html#attr-select-multiple">multiple</a></code>;
         <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code>;
         <code title="attr-select-required"><a href="the-select-element.html#attr-select-required">required</a></code>;
         <code title="attr-select-size"><a href="the-select-element.html#attr-select-size">size</a></code></td>
     <td><code><a href="the-select-element.html#htmlselectelement">HTMLSelectElement</a></code></td>
    </tr><tr><th><code><a href="the-small-element.html#the-small-element">small</a></code></th>
     <td>Side comment</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-source-element.html#the-source-element">source</a></code></th>
     <td>Media source for <code><a href="the-video-element.html#the-video-element">video</a></code> or <code><a href="the-audio-element.html#the-audio-element">audio</a></code></td>
     <td>none</td>
     <td><code><a href="the-video-element.html#the-video-element">video</a></code>;
         <code><a href="the-audio-element.html#the-audio-element">audio</a></code></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-source-src"><a href="the-source-element.html#attr-source-src">src</a></code>;
         <code title="attr-source-type"><a href="the-source-element.html#attr-source-type">type</a></code>;
         <code title="attr-source-media"><a href="the-source-element.html#attr-source-media">media</a></code></td>
     <td><code><a href="the-source-element.html#htmlsourceelement">HTMLSourceElement</a></code></td>
    </tr><tr><th><code><a href="the-span-element.html#the-span-element">span</a></code></th>
     <td>Generic phrasing container</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-span-element.html#htmlspanelement">HTMLSpanElement</a></code></td>
    </tr><tr><th><code><a href="the-strong-element.html#the-strong-element">strong</a></code></th>
     <td>Importance</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-style-element.html#the-style-element">style</a></code></th>
     <td>Embedded styling information</td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata</a>;
         <a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code>;
         <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code>*;
         <a href="content-models.html#flow-content-1" title="flow content">flow</a>*</td>
     <td>varies*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-style-media"><a href="the-style-element.html#attr-style-media">media</a></code>;
         <code title="attr-style-type"><a href="the-style-element.html#attr-style-type">type</a></code>;
         <code title="attr-style-scoped"><a href="the-style-element.html#attr-style-scoped">scoped</a></code></td>
     <td><code><a href="the-style-element.html#htmlstyleelement">HTMLStyleElement</a></code></td>
    </tr><tr><th><code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sub</a></code></th>
     <td>Subscript</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="#the-summary-element">summary</a></code></th>
     <td>Caption for <code><a href="#the-details-element">details</a></code></td>
     <td>none</td>
     <td><code><a href="#the-details-element">details</a></code></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sup</a></code></th>
     <td>Superscript</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-table-element.html#the-table-element">table</a></code></th>
     <td>Table</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="the-caption-element.html#the-caption-element">caption</a></code>*;
         <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code>*;
         <code><a href="the-thead-element.html#the-thead-element">thead</a></code>*;
         <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>*;
         <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>*;
         <code><a href="the-tr-element.html#the-tr-element">tr</a></code>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-table-border"><a href="the-table-element.html#attr-table-border">border</a></code></td>
     <td><code><a href="the-table-element.html#htmltableelement">HTMLTableElement</a></code></td>
    </tr><tr><th><code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code></th>
     <td>Group of rows in a table</td>
     <td>none</td>
     <td><code><a href="the-table-element.html#the-table-element">table</a></code></td>
     <td><code><a href="the-tr-element.html#the-tr-element">tr</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-tbody-element.html#htmltablesectionelement">HTMLTableSectionElement</a></code></td>
    </tr><tr><th><code><a href="the-td-element.html#the-td-element">td</a></code></th>
     <td>Table cell</td>
     <td><a href="headings-and-sections.html#sectioning-root" title="Sectioning root">sectioning root</a></td>
     <td><code><a href="the-tr-element.html#the-tr-element">tr</a></code></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-tdth-colspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-colspan">colspan</a></code>;
         <code title="attr-tdth-rowspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-rowspan">rowspan</a></code>;
         <code title="attr-tdth-headers"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-headers">headers</a></code></td>
     <td><code><a href="the-td-element.html#htmltabledatacellelement">HTMLTableDataCellElement</a></code></td>
    </tr><tr><th><code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code></th>
     <td>Multiline text field</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a>;
         <a href="forms.html#category-listed" title="category-listed">listed</a>;
         <a href="forms.html#category-label" title="category-label">labelable</a>;
         <a href="forms.html#category-submit" title="category-submit">submittable</a>;
         <a href="forms.html#category-reset" title="category-reset">resettable</a>;
         <a href="forms.html#form-associated-element" title="Form-associated element">form-associated</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#text-content" title="text content">text</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">autofocus</a></code>;
         <code title="attr-textarea-cols"><a href="the-textarea-element.html#attr-textarea-cols">cols</a></code>;
         <code title="attr-textarea-dirname"><a href="the-textarea-element.html#attr-textarea-dirname">dirname</a></code>;
         <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">disabled</a></code>;
         <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">form</a></code>;
         <code title="attr-textarea-maxlength"><a href="the-textarea-element.html#attr-textarea-maxlength">maxlength</a></code>;
         <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code>;
         <code title="attr-textarea-placeholder"><a href="the-textarea-element.html#attr-textarea-placeholder">placeholder</a></code>;
         <code title="attr-textarea-readonly"><a href="the-textarea-element.html#attr-textarea-readonly">readonly</a></code>;
         <code title="attr-textarea-required"><a href="the-textarea-element.html#attr-textarea-required">required</a></code>;
         <code title="attr-textarea-rows"><a href="the-textarea-element.html#attr-textarea-rows">rows</a></code>;
         <code title="attr-textarea-wrap"><a href="the-textarea-element.html#attr-textarea-wrap">wrap</a></code></td>
     <td><code><a href="the-textarea-element.html#htmltextareaelement">HTMLTextAreaElement</a></code></td>
    </tr><tr><th><code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code></th>
     <td>Group of footer rows in a table</td>
     <td>none</td>
     <td><code><a href="the-table-element.html#the-table-element">table</a></code></td>
     <td><code><a href="the-tr-element.html#the-tr-element">tr</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-tbody-element.html#htmltablesectionelement">HTMLTableSectionElement</a></code></td>
    </tr><tr><th><code><a href="the-th-element.html#the-th-element">th</a></code></th>
     <td>Table header cell</td>
     <td>none</td>
     <td><code><a href="the-tr-element.html#the-tr-element">tr</a></code></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-tdth-colspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-colspan">colspan</a></code>;
         <code title="attr-tdth-rowspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-rowspan">rowspan</a></code>;
         <code title="attr-tdth-headers"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-headers">headers</a></code>;
         <code title="attr-th-scope"><a href="the-th-element.html#attr-th-scope">scope</a></code></td>
     <td><code><a href="the-th-element.html#htmltableheadercellelement">HTMLTableHeaderCellElement</a></code></td>
    </tr><tr><th><code><a href="the-thead-element.html#the-thead-element">thead</a></code></th>
     <td>Group of heading rows in a table</td>
     <td>none</td>
     <td><code><a href="the-table-element.html#the-table-element">table</a></code></td>
     <td><code><a href="the-tr-element.html#the-tr-element">tr</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-tbody-element.html#htmltablesectionelement">HTMLTableSectionElement</a></code></td>
    </tr><tr><th><code><a href="the-time-element.html#the-time-element">time</a></code></th>
     <td>Machine-readable equivalent of date- or time-related data</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-time-datetime"><a href="the-time-element.html#attr-time-datetime">datetime</a></code></td>
     <td><code><a href="the-time-element.html#htmltimeelement">HTMLTimeElement</a></code></td>
    </tr><tr><th><code><a href="the-title-element.html#the-title-element">title</a></code></th>
     <td>Document title</td>
     <td><a href="content-models.html#metadata-content-0" title="Metadata content">metadata</a></td>
     <td><code><a href="the-head-element.html#the-head-element">head</a></code></td>
     <td><a href="content-models.html#text-content" title="text content">text</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-title-element.html#htmltitleelement">HTMLTitleElement</a></code></td>
    </tr><tr><th><code><a href="the-tr-element.html#the-tr-element">tr</a></code></th>
     <td>Table row</td>
     <td>none</td>
     <td><code><a href="the-table-element.html#the-table-element">table</a></code>;
         <code><a href="the-thead-element.html#the-thead-element">thead</a></code>;
         <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>;
         <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code></td>
     <td><code><a href="the-th-element.html#the-th-element">th</a></code>*;
         <code><a href="the-td-element.html#the-td-element">td</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-tr-element.html#htmltablerowelement">HTMLTableRowElement</a></code></td>
    </tr><tr><th><code><a href="the-track-element.html#the-track-element">track</a></code></th>
     <td>Timed text track</td>
     <td>none</td>
     <td><code><a href="the-audio-element.html#the-audio-element">audio</a></code>;
         <code><a href="the-video-element.html#the-video-element">video</a></code></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-track-default"><a href="the-track-element.html#attr-track-default">default</a></code>;
         <code title="attr-track-kind"><a href="the-track-element.html#attr-track-kind">kind</a></code>;
         <code title="attr-track-label"><a href="the-track-element.html#attr-track-label">label</a></code>;
         <code title="attr-track-src"><a href="the-track-element.html#attr-track-src">src</a></code>;
         <code title="attr-track-srclang"><a href="the-track-element.html#attr-track-srclang">srclang</a></code></td>
     <td><code><a href="the-track-element.html#htmltrackelement">HTMLTrackElement</a></code></td>
    </tr><tr><th><code><a href="the-u-element.html#the-u-element">u</a></code></th>
     <td>Keywords</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-ul-element.html#the-ul-element">ul</a></code></th>
     <td>List</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a></td>
     <td><code><a href="the-li-element.html#the-li-element">li</a></code></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="the-ul-element.html#htmlulistelement">HTMLUListElement</a></code></td>
    </tr><tr><th><code><a href="the-var-element.html#the-var-element">var</a></code></th>
     <td>Variable</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr><tr><th><code><a href="the-video-element.html#the-video-element">video</a></code></th>
     <td>Video player</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a>;
         <a href="content-models.html#embedded-content-2" title="Embedded content">embedded</a>;
         <a href="content-models.html#interactive-content-0" title="Interactive content">interactive</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><code><a href="the-source-element.html#the-source-element">source</a></code>*;
         <a href="content-models.html#transparent">transparent</a>*</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a>;
         <code title="attr-media-src"><a href="media-elements.html#attr-media-src">src</a></code>;
         <code title="attr-media-crossorigin"><a href="media-elements.html#attr-media-crossorigin">crossorigin</a></code>;
         <code title="attr-video-poster"><a href="the-video-element.html#attr-video-poster">poster</a></code>;
         <code title="attr-media-preload"><a href="media-elements.html#attr-media-preload">preload</a></code>;
         <code title="attr-media-autoplay"><a href="media-elements.html#attr-media-autoplay">autoplay</a></code>;
         <code title="attr-media-mediagroup"><a href="media-elements.html#attr-media-mediagroup">mediagroup</a></code>;
         <code title="attr-media-loop"><a href="media-elements.html#attr-media-loop">loop</a></code>;
         <code title="attr-media-muted"><a href="media-elements.html#attr-media-muted">muted</a></code>;
         <code title="attr-media-controls"><a href="media-elements.html#attr-media-controls">controls</a></code>;
         <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">width</a></code>;
         <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">height</a></code></td>
     <td><code><a href="the-video-element.html#htmlvideoelement">HTMLVideoElement</a></code></td>
    </tr><tr><th><code><a href="the-wbr-element.html#the-wbr-element">wbr</a></code></th>
     <td>Line breaking opportunity</td>
     <td><a href="content-models.html#flow-content-1" title="Flow content">flow</a>;
         <a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td><a href="content-models.html#phrasing-content-1" title="Phrasing content">phrasing</a></td>
     <td>empty</td>
     <td><a href="global-attributes.html#global-attributes" title="global attributes">globals</a></td>
     <td><code><a href="elements.html#htmlelement">HTMLElement</a></code></td>
    </tr></tbody></table><p>An asterisk (*) in a cell indicates that the actual rules are more complicated than indicated in the table above.</p>

  <p>&#8224; Categories in the "Parents" column refer to parents that
  list the given categories in their content model, not to elements
  that themselves are in those categories. For example, the
  <code><a href="the-a-element.html#the-a-element">a</a></code> element's "Parents" column says "phrasing", so any
  element whose content model contains the "phrasing" category could
  be a parent of an <code><a href="the-a-element.html#the-a-element">a</a></code> element. Since the "flow" category
  includes all the "phrasing" elements, that means the
  <code><a href="the-address-element.html#the-address-element">address</a></code> element could be a parent to an <code><a href="the-a-element.html#the-a-element">a</a></code>
  element.</p>



  <h3 class="no-num" id="element-content-categories">Element content categories</h3>

  <p><i>This section is non-normative.</i></p>
  <!-- when updating this also check the category-list <ul>s -->

  <table><caption>List of element content categories</caption>
   <thead><tr><th> Category
     </th><th> Elements
     </th><th> Elements with exceptions
   </th></tr></thead><tbody><tr><td> <a href="content-models.html#metadata-content-0">Metadata content</a>
     </td><td>
      <code><a href="the-base-element.html#the-base-element">base</a></code>;
      <code><a href="#the-command-element">command</a></code>;
      <code><a href="the-link-element.html#the-link-element">link</a></code>;
      <code><a href="the-meta-element.html#the-meta-element">meta</a></code>;
      <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code>;
      <code><a href="the-script-element.html#the-script-element">script</a></code>;
      <code><a href="the-style-element.html#the-style-element">style</a></code>;
      <code><a href="the-title-element.html#the-title-element">title</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="content-models.html#flow-content-1">Flow content</a>
     </td><td>
      <code><a href="the-a-element.html#the-a-element">a</a></code>;
      <code><a href="the-abbr-element.html#the-abbr-element">abbr</a></code>;
      <code><a href="the-address-element.html#the-address-element">address</a></code>;
      <code><a href="the-article-element.html#the-article-element">article</a></code>;
      <code><a href="the-aside-element.html#the-aside-element">aside</a></code>;
      <code><a href="the-audio-element.html#the-audio-element">audio</a></code>;
      <code><a href="the-b-element.html#the-b-element">b</a></code>;
      <code><a href="the-bdi-element.html#the-bdi-element">bdi</a></code>;
      <code><a href="the-bdo-element.html#the-bdo-element">bdo</a></code>;
      <code><a href="the-blockquote-element.html#the-blockquote-element">blockquote</a></code>;
      <code><a href="the-br-element.html#the-br-element">br</a></code>;
      <code><a href="the-button-element.html#the-button-element">button</a></code>;
      <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code>;
      <code><a href="the-cite-element.html#the-cite-element">cite</a></code>;
      <code><a href="the-code-element.html#the-code-element">code</a></code>;
      <code><a href="#the-command-element">command</a></code>;
<!--DATA--><!--FORK-->
      <code><a href="the-datalist-element.html#the-datalist-element">datalist</a></code>;
      <code><a href="the-del-element.html#the-del-element">del</a></code>;
      <code><a href="#the-details-element">details</a></code>;
      <code><a href="the-dfn-element.html#the-dfn-element">dfn</a></code>;
      <code><a href="#the-dialog-element">dialog</a></code>;
      <code><a href="the-div-element.html#the-div-element">div</a></code>;
      <code><a href="the-dl-element.html#the-dl-element">dl</a></code>;
      <code><a href="the-em-element.html#the-em-element">em</a></code>;
      <code><a href="the-embed-element.html#the-embed-element">embed</a></code>;
      <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>;
      <code><a href="the-figure-element.html#the-figure-element">figure</a></code>;
      <code><a href="the-footer-element.html#the-footer-element">footer</a></code>;
      <code><a href="the-form-element.html#the-form-element">form</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h3</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h4</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h5</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code>;
      <code><a href="the-header-element.html#the-header-element">header</a></code>;
      <code><a href="the-hgroup-element.html#the-hgroup-element">hgroup</a></code>;
      <code><a href="the-hr-element.html#the-hr-element">hr</a></code>;
      <code><a href="the-i-element.html#the-i-element">i</a></code>;
      <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>;
      <code><a href="the-img-element.html#the-img-element">img</a></code>;
      <code><a href="the-input-element.html#the-input-element">input</a></code>;
      <code><a href="the-ins-element.html#the-ins-element">ins</a></code>;
      <code><a href="the-kbd-element.html#the-kbd-element">kbd</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-label-element.html#the-label-element">label</a></code>;
      <code><a href="the-map-element.html#the-map-element">map</a></code>;
      <code><a href="the-mark-element.html#the-mark-element">mark</a></code>;
      <code><a href="mathml.html#math">math</a></code>;
      <code><a href="#the-menu-element">menu</a></code>;
      <code><a href="the-meter-element.html#the-meter-element">meter</a></code>;
      <code><a href="the-nav-element.html#the-nav-element">nav</a></code>;
      <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code>;
      <code><a href="the-object-element.html#the-object-element">object</a></code>;
      <code><a href="the-ol-element.html#the-ol-element">ol</a></code>;
      <code><a href="the-output-element.html#the-output-element">output</a></code>;
      <code><a href="the-p-element.html#the-p-element">p</a></code>;
      <code><a href="the-pre-element.html#the-pre-element">pre</a></code>;
      <code><a href="the-progress-element.html#the-progress-element">progress</a></code>;
      <code><a href="the-q-element.html#the-q-element">q</a></code>;
      <code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code>;
      <code><a href="the-s-element.html#the-s-element">s</a></code>;
      <code><a href="the-samp-element.html#the-samp-element">samp</a></code>;
      <code><a href="the-script-element.html#the-script-element">script</a></code>;
      <code><a href="the-section-element.html#the-section-element">section</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-small-element.html#the-small-element">small</a></code>;
      <code><a href="the-span-element.html#the-span-element">span</a></code>;
      <code><a href="the-strong-element.html#the-strong-element">strong</a></code>;
      <code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sub</a></code>;
      <code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sup</a></code>;
      <code><a href="mathml.html#svg-0">svg</a></code>;
      <code><a href="the-table-element.html#the-table-element">table</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>;
      <code><a href="the-time-element.html#the-time-element">time</a></code>;
      <code><a href="the-u-element.html#the-u-element">u</a></code>;
      <code><a href="the-ul-element.html#the-ul-element">ul</a></code>;
      <code><a href="the-var-element.html#the-var-element">var</a></code>;
      <code><a href="the-video-element.html#the-video-element">video</a></code>;
      <code><a href="the-wbr-element.html#the-wbr-element">wbr</a></code>;
      <a href="content-models.html#text-content" title="text content">Text</a>
     </td><td>
      <code><a href="the-area-element.html#the-area-element">area</a></code> (if it is a descendant of a <code><a href="the-map-element.html#the-map-element">map</a></code> element);
      <!--MD-->
      <code><a href="the-style-element.html#the-style-element">style</a></code> (if the <code title="attr-style-scoped"><a href="the-style-element.html#attr-style-scoped">scoped</a></code> attribute is present)

    </td></tr><tr><td> <a href="content-models.html#sectioning-content-0">Sectioning content</a>
     </td><td>
      <code><a href="the-article-element.html#the-article-element">article</a></code>;
      <code><a href="the-aside-element.html#the-aside-element">aside</a></code>;
      <code><a href="the-nav-element.html#the-nav-element">nav</a></code>;
      <code><a href="the-section-element.html#the-section-element">section</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="content-models.html#heading-content-0">Heading content</a>
     </td><td>
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h3</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h4</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h5</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code>;
      <code><a href="the-hgroup-element.html#the-hgroup-element">hgroup</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="content-models.html#phrasing-content-1">Phrasing content</a>
     </td><td>
      <code><a href="the-a-element.html#the-a-element">a</a></code>;
      <code><a href="the-abbr-element.html#the-abbr-element">abbr</a></code>;
      <code><a href="the-audio-element.html#the-audio-element">audio</a></code>;
      <code><a href="the-b-element.html#the-b-element">b</a></code>;
      <code><a href="the-bdi-element.html#the-bdi-element">bdi</a></code>;
      <code><a href="the-bdo-element.html#the-bdo-element">bdo</a></code>;
      <code><a href="the-br-element.html#the-br-element">br</a></code>;
      <code><a href="the-button-element.html#the-button-element">button</a></code>;
      <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code>;
      <code><a href="the-cite-element.html#the-cite-element">cite</a></code>;
      <code><a href="the-code-element.html#the-code-element">code</a></code>;
      <code><a href="#the-command-element">command</a></code>;
<!--DATA--><!--FORK-->
      <code><a href="the-datalist-element.html#the-datalist-element">datalist</a></code>;
      <code><a href="the-del-element.html#the-del-element">del</a></code>;
      <code><a href="the-dfn-element.html#the-dfn-element">dfn</a></code>;
      <code><a href="the-em-element.html#the-em-element">em</a></code>;
      <code><a href="the-embed-element.html#the-embed-element">embed</a></code>;
      <code><a href="the-i-element.html#the-i-element">i</a></code>;
      <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>;
      <code><a href="the-img-element.html#the-img-element">img</a></code>;
      <code><a href="the-input-element.html#the-input-element">input</a></code>;
      <code><a href="the-ins-element.html#the-ins-element">ins</a></code>;
      <code><a href="the-kbd-element.html#the-kbd-element">kbd</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-label-element.html#the-label-element">label</a></code>;
      <code><a href="the-map-element.html#the-map-element">map</a></code>;
      <code><a href="the-mark-element.html#the-mark-element">mark</a></code>;
      <code><a href="mathml.html#math">math</a></code>;
      <code><a href="the-meter-element.html#the-meter-element">meter</a></code>;
      <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code>;
      <code><a href="the-object-element.html#the-object-element">object</a></code>;
      <code><a href="the-output-element.html#the-output-element">output</a></code>;
      <code><a href="the-progress-element.html#the-progress-element">progress</a></code>;
      <code><a href="the-q-element.html#the-q-element">q</a></code>;
      <code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code>;
      <code><a href="the-s-element.html#the-s-element">s</a></code>;
      <code><a href="the-samp-element.html#the-samp-element">samp</a></code>;
      <code><a href="the-script-element.html#the-script-element">script</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-small-element.html#the-small-element">small</a></code>;
      <code><a href="the-span-element.html#the-span-element">span</a></code>;
      <code><a href="the-strong-element.html#the-strong-element">strong</a></code>;
      <code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sub</a></code>;
      <code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sup</a></code>;
      <code><a href="mathml.html#svg-0">svg</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>;
      <code><a href="the-time-element.html#the-time-element">time</a></code>;
      <code><a href="the-u-element.html#the-u-element">u</a></code>;
      <code><a href="the-var-element.html#the-var-element">var</a></code>;
      <code><a href="the-video-element.html#the-video-element">video</a></code>;
      <code><a href="the-wbr-element.html#the-wbr-element">wbr</a></code>;
      <a href="content-models.html#text-content" title="text content">Text</a>
     </td><td>
      <code><a href="the-area-element.html#the-area-element">area</a></code> (if it is a descendant of a  <code><a href="the-map-element.html#the-map-element">map</a></code> element);
      <!--MD-->

    </td></tr><tr><td> <a href="content-models.html#embedded-content-2">Embedded content</a>
     </td><td>
      <code><a href="the-audio-element.html#the-audio-element">audio</a></code>
      <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code>
      <code><a href="the-embed-element.html#the-embed-element">embed</a></code>
      <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>
      <code><a href="the-img-element.html#the-img-element">img</a></code>
      <code><a href="mathml.html#math">math</a></code>
      <code><a href="the-object-element.html#the-object-element">object</a></code>
      <code><a href="mathml.html#svg-0">svg</a></code>
      <code><a href="the-video-element.html#the-video-element">video</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="content-models.html#interactive-content-0">Interactive content</a>
     </td><td>
      <code><a href="the-a-element.html#the-a-element">a</a></code>;
      <code><a href="the-button-element.html#the-button-element">button</a></code>;
      <code><a href="#the-details-element">details</a></code>;
      <code><a href="the-embed-element.html#the-embed-element">embed</a></code>;
      <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-label-element.html#the-label-element">label</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>;
     </td><td>
      <code><a href="the-audio-element.html#the-audio-element">audio</a></code> (if the <code title="attr-media-controls"><a href="media-elements.html#attr-media-controls">controls</a></code> attribute is present);
      <code><a href="the-img-element.html#the-img-element">img</a></code> (if the <code title="attr-hyperlink-usemap"><a href="image-maps.html#attr-hyperlink-usemap">usemap</a></code> attribute is present);
      <code><a href="the-input-element.html#the-input-element">input</a></code> (if the <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is <em>not</em> in the <a href="states-of-the-type-attribute.html#hidden-state-(type=hidden)" title="attr-input-type-hidden">Hidden</a> state);
      <code><a href="#the-menu-element">menu</a></code> (if the <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#toolbar-state" title="toolbar state">toolbar</a> state);
      <code><a href="the-object-element.html#the-object-element">object</a></code> (if the <code title="attr-hyperlink-usemap"><a href="image-maps.html#attr-hyperlink-usemap">usemap</a></code> attribute is present)<!-- see also comment in <object> section -->;
      <code><a href="the-video-element.html#the-video-element">video</a></code> (if the <code title="attr-media-controls"><a href="media-elements.html#attr-media-controls">controls</a></code> attribute is present)

    </td></tr><tr><td> <a href="headings-and-sections.html#sectioning-root" title="sectioning root">Sectioning roots</a>
     </td><td>
      <code><a href="the-blockquote-element.html#the-blockquote-element">blockquote</a></code>;
      <code><a href="the-body-element.html#the-body-element">body</a></code>;
      <code><a href="#the-details-element">details</a></code>;
      <code><a href="#the-dialog-element">dialog</a></code>;
      <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>;
      <code><a href="the-figure-element.html#the-figure-element">figure</a></code>;
      <code><a href="the-td-element.html#the-td-element">td</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="forms.html#form-associated-element" title="form-associated element">Form-associated elements</a>
     </td><td>
      <code><a href="the-button-element.html#the-button-element">button</a></code>;
      <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>;
      <code><a href="the-input-element.html#the-input-element">input</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-label-element.html#the-label-element">label</a></code>;
      <code><a href="the-object-element.html#the-object-element">object</a></code>;
      <code><a href="the-output-element.html#the-output-element">output</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="forms.html#category-listed" title="category-listed">Listed elements</a>
     </td><td>
      <code><a href="the-button-element.html#the-button-element">button</a></code>;
      <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>;
      <code><a href="the-input-element.html#the-input-element">input</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-object-element.html#the-object-element">object</a></code>;
      <code><a href="the-output-element.html#the-output-element">output</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="forms.html#category-submit" title="category-submit">Submittable elements</a>
     </td><td>
      <code><a href="the-button-element.html#the-button-element">button</a></code>;
      <code><a href="the-input-element.html#the-input-element">input</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-object-element.html#the-object-element">object</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="forms.html#category-reset" title="category-reset">Resettable elements</a>
     </td><td>
      <code><a href="the-input-element.html#the-input-element">input</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-output-element.html#the-output-element">output</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="forms.html#category-label" title="category-label">Labelable elements</a>
     </td><td>
      <code><a href="the-button-element.html#the-button-element">button</a></code>;
      <code><a href="the-input-element.html#the-input-element">input</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-meter-element.html#the-meter-element">meter</a></code>;
      <code><a href="the-output-element.html#the-output-element">output</a></code>;
      <code><a href="the-progress-element.html#the-progress-element">progress</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
     </td><td>
      &#8212;

    </td></tr><tr><td> <a href="content-models.html#palpable-content-0">Palpable content</a>
     </td><td>
      <code><a href="the-a-element.html#the-a-element">a</a></code>;
      <code><a href="the-abbr-element.html#the-abbr-element">abbr</a></code>;
      <code><a href="the-address-element.html#the-address-element">address</a></code>;
      <code><a href="the-article-element.html#the-article-element">article</a></code>;
      <code><a href="the-aside-element.html#the-aside-element">aside</a></code>;
      <code><a href="the-b-element.html#the-b-element">b</a></code>;
      <code><a href="the-bdi-element.html#the-bdi-element">bdi</a></code>;
      <code><a href="the-bdo-element.html#the-bdo-element">bdo</a></code>;
      <code><a href="the-blockquote-element.html#the-blockquote-element">blockquote</a></code>;
      <code><a href="the-button-element.html#the-button-element">button</a></code>;
      <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code>;
      <code><a href="the-cite-element.html#the-cite-element">cite</a></code>;
      <code><a href="the-code-element.html#the-code-element">code</a></code>;
<!--DATA--><!--FORK-->
      <code><a href="#the-details-element">details</a></code>;
      <code><a href="the-dfn-element.html#the-dfn-element">dfn</a></code>;
      <code><a href="the-div-element.html#the-div-element">div</a></code>;
      <code><a href="the-em-element.html#the-em-element">em</a></code>;
      <code><a href="the-embed-element.html#the-embed-element">embed</a></code>;
      <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>;
      <code><a href="the-figure-element.html#the-figure-element">figure</a></code>;
      <code><a href="the-footer-element.html#the-footer-element">footer</a></code>;
      <code><a href="the-form-element.html#the-form-element">form</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h3</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h4</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h5</a></code>;
      <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code>;
      <code><a href="the-header-element.html#the-header-element">header</a></code>;
      <code><a href="the-hgroup-element.html#the-hgroup-element">hgroup</a></code>;
      <code><a href="the-i-element.html#the-i-element">i</a></code>;
      <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>;
      <code><a href="the-img-element.html#the-img-element">img</a></code>;
      <code><a href="the-ins-element.html#the-ins-element">ins</a></code>;
      <code><a href="the-kbd-element.html#the-kbd-element">kbd</a></code>;
      <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>;
      <code><a href="the-label-element.html#the-label-element">label</a></code>;
      <code><a href="the-map-element.html#the-map-element">map</a></code>;
      <code><a href="the-mark-element.html#the-mark-element">mark</a></code>;
      <code><a href="mathml.html#math">math</a></code>;
      <code><a href="the-meter-element.html#the-meter-element">meter</a></code>;
      <code><a href="the-nav-element.html#the-nav-element">nav</a></code>;
      <code><a href="the-object-element.html#the-object-element">object</a></code>;
      <code><a href="the-output-element.html#the-output-element">output</a></code>;
      <code><a href="the-p-element.html#the-p-element">p</a></code>;
      <code><a href="the-pre-element.html#the-pre-element">pre</a></code>;
      <code><a href="the-progress-element.html#the-progress-element">progress</a></code>;
      <code><a href="the-q-element.html#the-q-element">q</a></code>;
      <code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code>;
      <code><a href="the-s-element.html#the-s-element">s</a></code>;
      <code><a href="the-samp-element.html#the-samp-element">samp</a></code>;
      <code><a href="the-section-element.html#the-section-element">section</a></code>;
      <code><a href="the-select-element.html#the-select-element">select</a></code>;
      <code><a href="the-small-element.html#the-small-element">small</a></code>;
      <code><a href="the-span-element.html#the-span-element">span</a></code>;
      <code><a href="the-strong-element.html#the-strong-element">strong</a></code>;
      <code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sub</a></code>;
      <code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sup</a></code>;
      <code><a href="mathml.html#svg-0">svg</a></code>;
      <code><a href="the-table-element.html#the-table-element">table</a></code>;
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>;
      <code><a href="the-time-element.html#the-time-element">time</a></code>;
      <code><a href="the-u-element.html#the-u-element">u</a></code>;
      <code><a href="the-var-element.html#the-var-element">var</a></code>;
      <code><a href="the-video-element.html#the-video-element">video</a></code>
     </td><td>
      <code><a href="the-audio-element.html#the-audio-element">audio</a></code> (if the <code title="attr-media-controls"><a href="media-elements.html#attr-media-controls">controls</a></code> attribute is present);
      <code><a href="the-dl-element.html#the-dl-element">dl</a></code> (if the element's children include at least one name-value group);
      <code><a href="the-input-element.html#the-input-element">input</a></code> (if the <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is <em>not</em> in the <a href="states-of-the-type-attribute.html#hidden-state-(type=hidden)" title="attr-input-type-hidden">Hidden</a> state);
      <code><a href="#the-menu-element">menu</a></code> (if the <code title="attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#toolbar-state" title="toolbar state">toolbar</a> state or the <a href="#list-state" title="list state">list</a> state);
      <code><a href="the-ol-element.html#the-ol-element">ol</a></code> (if the element's children include at least one <code><a href="the-li-element.html#the-li-element">li</a></code> element);
      <code><a href="the-ul-element.html#the-ul-element">ul</a></code> (if the element's children include at least one <code><a href="the-li-element.html#the-li-element">li</a></code> element);
      <a href="content-models.html#text-content" title="text content">Text</a> that is not <a href="content-models.html#inter-element-whitespace">inter-element whitespace</a>

  </td></tr></tbody></table><h3 class="no-num" id="attributes-1">Attributes</h3>

  <p><i>This section is non-normative.</i></p>
  <table><caption>List of attributes (excluding event handler content attributes)</caption>
   <thead><tr><th> Attribute
     </th><th> Element(s)
     </th><th> Description
     </th><th> Value
   </th></tr></thead><tbody><tr><th> <code title="">accept</code>
     </th><td> <code title="attr-input-accept"><a href="states-of-the-type-attribute.html#attr-input-accept">input</a></code>
     </td><td> Hint for expected file type in <a href="states-of-the-type-attribute.html#file-upload-state-(type=file)" title="attr-input-type-file">file upload controls</a>
     </td><td> <a href="common-microsyntaxes.html#set-of-comma-separated-tokens">Set of comma-separated tokens</a>* consisting of <a href="infrastructure.html#valid-mime-type" title="valid MIME type">valid MIME types with no parameters</a> or <code title="">audio/*</code>, <code title="">video/*</code>, or <code title="">image/*</code>
    </td></tr><tr><th> <code title="">accept-charset</code>
     </th><td> <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">form</a></code>
     </td><td> Character encodings to use for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="common-microsyntaxes.html#ordered-set-of-unique-space-separated-tokens">Ordered set of unique space-separated tokens</a>, <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>, consisting of <a href="infrastructure.html#preferred-mime-name" title="preferred MIME name">preferred MIME names</a> of <a href="infrastructure.html#ascii-compatible-character-encoding" title="ASCII-compatible character encoding">ASCII-compatible character encodings</a>*
    </td></tr><tr><th> <code title="">accesskey</code>
     </th><td> <a href="#the-accesskey-attribute" title="attr-accesskey">HTML elements</a>
     </td><td> Keyboard shortcut to activate or focus element
     </td><td> <a href="common-microsyntaxes.html#ordered-set-of-unique-space-separated-tokens">Ordered set of unique space-separated tokens</a>, <a href="infrastructure.html#case-sensitive">case-sensitive</a>, consisting of one Unicode code point in length
    </td></tr><tr><th> <code title="">action</code>
     </th><td> <code title="attr-fs-action"><a href="form-submission.html#attr-fs-action">form</a></code>
     </td><td> <a href="urls.html#url">URL</a> to use for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">Valid non-empty URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">alt</code>
     </th><td> <code title="attr-area-alt"><a href="the-area-element.html#attr-area-alt">area</a></code>;
          <code title="attr-img-alt"><a href="the-img-element.html#attr-img-alt">img</a></code>;
          <code title="attr-input-alt"><a href="states-of-the-type-attribute.html#attr-input-alt">input</a></code>
     </td><td> Replacement text for use when images are not available
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">async</code>
     </th><td> <code title="attr-script-async"><a href="the-script-element.html#attr-script-async">script</a></code>
     </td><td> Execute script asynchronously
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">autocomplete</code>
     </th><td> <code title="attr-form-autocomplete"><a href="the-form-element.html#attr-form-autocomplete">form</a></code>;
          <code title="attr-input-autocomplete"><a href="common-input-element-attributes.html#attr-input-autocomplete">input</a></code>
     </td><td> Prevent the user agent from providing autocompletions for the form control(s)
     </td><td> "<code title="">on</code>"; "<code title="">off</code>"
    </td></tr><tr><th> <code title="">autofocus</code>
     </th><td> <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">button</a></code>;
          <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">input</a></code>;
          <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">keygen</a></code>;
          <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">select</a></code>;
          <code title="attr-fe-autofocus"><a href="attributes-common-to-form-controls.html#attr-fe-autofocus">textarea</a></code>
     </td><td> Automatically focus the form control when the page is loaded
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">autoplay</code>
     </th><td> <code title="attr-media-autoplay"><a href="media-elements.html#attr-media-autoplay">audio</a></code>;
          <code title="attr-media-autoplay"><a href="media-elements.html#attr-media-autoplay">video</a></code>
     </td><td> Hint that the <a href="media-elements.html#media-resource">media resource</a> can be started automatically when the page is loaded
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">border</code>
     </th><td> <code title="attr-table-border"><a href="the-table-element.html#attr-table-border">table</a></code>
     </td><td> Explicit indication that the <code><a href="the-table-element.html#the-table-element">table</a></code> element is not being used for layout purposes
     </td><td> The empty string, or "<code title="">1</code>"
    </td></tr><tr><th> <code title="">challenge</code>
     </th><td> <code title="attr-keygen-challenge"><a href="the-keygen-element.html#attr-keygen-challenge">keygen</a></code>
     </td><td> String to package with the generated and signed public key
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">charset</code>
     </th><td> <code title="attr-meta-charset"><a href="the-meta-element.html#attr-meta-charset">meta</a></code>
     </td><td> <a href="the-meta-element.html#character-encoding-declaration">Character encoding declaration</a>
     </td><td> <a href="infrastructure.html#preferred-mime-name">Preferred MIME name</a> of an encoding*
    </td></tr><tr><th> <code title="">charset</code>
     </th><td> <code title="attr-script-charset"><a href="the-script-element.html#attr-script-charset">script</a></code>
     </td><td> Character encoding of the external script resource
     </td><td> <a href="infrastructure.html#preferred-mime-name">Preferred MIME name</a> of an encoding*
    </td></tr><tr><th> <code title="">checked</code>
     </th><td> <code title="attr-command-checked"><a href="#attr-command-checked">command</a></code>;
          <code title="attr-input-checked"><a href="the-input-element.html#attr-input-checked">input</a></code>
     </td><td> Whether the command or control is checked
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">cite</code>
     </th><td> <code title="attr-blockquote-cite"><a href="the-blockquote-element.html#attr-blockquote-cite">blockquote</a></code>;
          <code title="attr-mod-cite"><a href="attributes-common-to-ins-and-del-elements.html#attr-mod-cite">del</a></code>;
          <code title="attr-mod-cite"><a href="attributes-common-to-ins-and-del-elements.html#attr-mod-cite">ins</a></code>;
          <code title="attr-q-cite"><a href="the-q-element.html#attr-q-cite">q</a></code>
     </td><td> Link to the source of the quotation or more information about the edit
     </td><td> <a href="urls.html#valid-url-potentially-surrounded-by-spaces">Valid URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">class</code>
     </th><td> <a href="global-attributes.html#classes" title="attr-class">HTML elements</a>
     </td><td> Classes to which the element belongs
     </td><td> <a href="common-microsyntaxes.html#set-of-space-separated-tokens">Set of space-separated tokens</a>
    </td></tr><tr><th> <code title="">cols</code>
     </th><td> <code title="attr-textarea-cols"><a href="the-textarea-element.html#attr-textarea-cols">textarea</a></code>
     </td><td> Maximum number of characters per line
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a> greater than zero
    </td></tr><tr><th> <code title="">colspan</code>
     </th><td> <code title="attr-tdth-colspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-colspan">td</a></code>;
          <code title="attr-tdth-colspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-colspan">th</a></code>
     </td><td> Number of columns that the cell is to span
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a> greater than zero
    </td></tr><tr><th> <code title="">command</code>
     </th><td> <code title="attr-command-command"><a href="#attr-command-command">command</a></code>
     </td><td> Command definition
     </td><td> <a href="infrastructure.html#concept-id" title="concept-id">ID</a>*
    </td></tr><tr><th> <code title="">content</code>
     </th><td> <code title="attr-meta-content"><a href="the-meta-element.html#attr-meta-content">meta</a></code>
     </td><td> Value of the element
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">contenteditable</code>
     </th><td> <a href="#attr-contenteditable" title="attr-contenteditable">HTML elements</a>
     </td><td> Whether the element is editable
     </td><td> "<code title="">true</code>"; "<code title="">false</code>"
    </td></tr><tr><th> <code title="">contextmenu</code>
     </th><td> <a href="#attr-contextmenu" title="attr-contextmenu">HTML elements</a>
     </td><td> The element's context menu
     </td><td> <a href="infrastructure.html#concept-id" title="concept-id">ID</a>*
    </td></tr><tr><th> <code title="">controls</code>
     </th><td> <code title="attr-media-controls"><a href="media-elements.html#attr-media-controls">audio</a></code>;
          <code title="attr-media-controls"><a href="media-elements.html#attr-media-controls">video</a></code>
     </td><td> Show user agent controls
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">coords</code>
     </th><td> <code title="attr-area-coords"><a href="the-area-element.html#attr-area-coords">area</a></code>
     </td><td> Coordinates for the shape to be created in an <a href="image-maps.html#image-map">image map</a>
     </td><td> <a href="common-microsyntaxes.html#valid-list-of-integers">Valid list of integers</a>*
    </td></tr><tr><th> <code title="">crossorigin</code>
     </th><td> <code title="attr-media-crossorigin"><a href="media-elements.html#attr-media-crossorigin">audio</a></code>;
          <code title="attr-img-crossorigin"><a href="the-img-element.html#attr-img-crossorigin">img</a></code>;
          <code title="attr-media-crossorigin"><a href="media-elements.html#attr-media-crossorigin">video</a></code>
     </td><td> How the element handles crossorigin requests.
     </td><td> "<code title="attr-crossorigin-anonymous-keyword"><a href="urls.html#attr-crossorigin-anonymous-keyword">anonymous</a></code>"; "<code title="attr-crossorigin-use-credentials-keyword"><a href="urls.html#attr-crossorigin-use-credentials-keyword">use-credentials</a></code>"
    </td></tr><tr><th> <code title="">data</code>
     </th><td> <code title="attr-object-data"><a href="the-object-element.html#attr-object-data">object</a></code>
     </td><td> Address of the resource
     </td><td> <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">Valid non-empty URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">datetime</code>
     </th><td> <code title="attr-mod-datetime"><a href="attributes-common-to-ins-and-del-elements.html#attr-mod-datetime">del</a></code>;
          <code title="attr-mod-datetime"><a href="attributes-common-to-ins-and-del-elements.html#attr-mod-datetime">ins</a></code>
     </td><td> Date and (optionally) time of the change
     </td><td> <a href="common-microsyntaxes.html#valid-date-string-with-optional-time">Valid date string with optional time</a>
    </td></tr><tr><th> <code title="">datetime</code>
     </th><td> <code title="attr-time-datetime"><a href="the-time-element.html#attr-time-datetime">time</a></code>
     </td><td> Machine-readable value
     </td><td> <a href="common-microsyntaxes.html#valid-month-string">Valid month string</a>,
          <a href="common-microsyntaxes.html#valid-date-string">valid date string</a>,
          <a href="common-microsyntaxes.html#valid-yearless-date-string">valid yearless date string</a>,
          <a href="common-microsyntaxes.html#valid-time-string">valid time string</a>,
          <a href="common-microsyntaxes.html#valid-local-date-and-time-string">valid local date and time string</a>,
          <a href="common-microsyntaxes.html#valid-time-zone-offset-string">valid time-zone offset string</a>,
          <a href="common-microsyntaxes.html#valid-global-date-and-time-string">valid global date and time string</a>,
          <a href="common-microsyntaxes.html#valid-week-string">valid week string</a>,
          <a href="common-microsyntaxes.html#valid-non-negative-integer">valid non-negative integer</a>, or
          <a href="common-microsyntaxes.html#valid-duration-string">valid duration string</a>
    </td></tr><tr><th> <code title="">default</code>
     </th><td> <code title="attr-track-default"><a href="the-track-element.html#attr-track-default">track</a></code>
     </td><td> Enable the track if no other <a href="media-elements.html#text-track">text track</a> is more suitable.
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">defer</code>
     </th><td> <code title="attr-script-defer"><a href="the-script-element.html#attr-script-defer">script</a></code>
     </td><td> Defer script execution
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">dir</code>
     </th><td> <a href="global-attributes.html#the-dir-attribute" title="attr-dir">HTML elements</a>
     </td><td> <a href="global-attributes.html#the-directionality" title="the directionality">The text directionality</a> of the element
     </td><td> "<code title="attr-dir-ltr"><a href="global-attributes.html#attr-dir-ltr">ltr</a></code>"; "<code title="attr-dir-rtl"><a href="global-attributes.html#attr-dir-rtl">rtl</a></code>"; "<code title="attr-dir-auto"><a href="global-attributes.html#attr-dir-auto">auto</a></code>"
    </td></tr><tr><th> <code title="">dirname</code>
     </th><td> <code title="attr-input-dirname"><a href="common-input-element-attributes.html#attr-input-dirname">input</a></code>;
          <code title="attr-textarea-dirname"><a href="the-textarea-element.html#attr-textarea-dirname">textarea</a></code>
     </td><td> Name of form field to use for sending the element's <a href="global-attributes.html#the-directionality" title="the directionality">directionality</a> in <a href="#form-submission-0">form submission</a>
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">disabled</code>
     </th><td> <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">button</a></code>;
          <code title="attr-command-disabled"><a href="#attr-command-disabled">command</a></code>;
          <code title="attr-fieldset-disabled"><a href="the-fieldset-element.html#attr-fieldset-disabled">fieldset</a></code>;
          <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">input</a></code>;
          <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">keygen</a></code>;
          <code title="attr-optgroup-disabled"><a href="the-optgroup-element.html#attr-optgroup-disabled">optgroup</a></code>;
          <code title="attr-option-disabled"><a href="the-option-element.html#attr-option-disabled">option</a></code>;
          <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">select</a></code>;
          <code title="attr-fe-disabled"><a href="attributes-common-to-form-controls.html#attr-fe-disabled">textarea</a></code>
     </td><td> Whether the form control is disabled
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
<!--DOWNLOAD-->
    </td></tr><tr><th> <code title="">draggable</code>
     </th><td> <a href="#the-draggable-attribute" title="attr-draggable">HTML elements</a>
     </td><td> Whether the element is draggable
     </td><td> "<code title="">true</code>"; "<code title="">false</code>"
    </td></tr><tr><th> <code title="">dropzone</code>
     </th><td> <a href="#the-dropzone-attribute" title="attr-dropzone">HTML elements</a>
     </td><td> Accepted item types for drag-and-drop
     </td><td> <a href="common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens">Unordered set of unique space-separated tokens</a>, <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>, consisting of accepted types and drag feedback*
    </td></tr><tr><th> <code title="">enctype</code>
     </th><td> <code title="attr-fs-enctype"><a href="form-submission.html#attr-fs-enctype">form</a></code>
     </td><td> Form data set encoding type to use for <a href="#form-submission-0">form submission</a>
     </td><td> "<code title="attr-fs-enctype-urlencoded"><a href="form-submission.html#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code>"; "<code title="attr-fs-enctype-formdata"><a href="form-submission.html#attr-fs-enctype-formdata">multipart/form-data</a></code>"; "<code title="attr-fs-enctype-text"><a href="form-submission.html#attr-fs-enctype-text">text/plain</a></code>"
    </td></tr><tr><th> <code title="">for</code>
     </th><td> <code title="attr-label-for"><a href="the-label-element.html#attr-label-for">label</a></code>
     </td><td> Associate the label with form control
     </td><td> <a href="infrastructure.html#concept-id" title="concept-id">ID</a>*
    </td></tr><tr><th> <code title="">for</code>
     </th><td> <code title="attr-output-for"><a href="the-output-element.html#attr-output-for">output</a></code>
     </td><td> Specifies controls from which the output was calculated
     </td><td> <a href="common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens">Unordered set of unique space-separated tokens</a>, <a href="infrastructure.html#case-sensitive">case-sensitive</a>, consisting of IDs*
    </td></tr><tr><th> <code title="">form</code>
     </th><td> <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">button</a></code>;
          <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">fieldset</a></code>;
          <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">input</a></code>;
          <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">keygen</a></code>;
          <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">label</a></code>;
          <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">object</a></code>;
          <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">output</a></code>;
          <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">select</a></code>;
          <code title="attr-fae-form"><a href="association-of-controls-and-forms.html#attr-fae-form">textarea</a></code>
     </td><td> Associates the control with a <code><a href="the-form-element.html#the-form-element">form</a></code> element
     </td><td> <a href="infrastructure.html#concept-id" title="concept-id">ID</a>*
    </td></tr><tr><th> <code title="">formaction</code>
     </th><td> <code title="attr-fs-formaction"><a href="form-submission.html#attr-fs-formaction">button</a></code>;
          <code title="attr-fs-formaction"><a href="form-submission.html#attr-fs-formaction">input</a></code>
     </td><td> <a href="urls.html#url">URL</a> to use for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">Valid non-empty URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">formenctype</code>
     </th><td> <code title="attr-fs-formenctype"><a href="form-submission.html#attr-fs-formenctype">button</a></code>;
          <code title="attr-fs-formenctype"><a href="form-submission.html#attr-fs-formenctype">input</a></code>
     </td><td> Form data set encoding type to use for <a href="#form-submission-0">form submission</a>
     </td><td> "<code title="attr-fs-enctype-urlencoded"><a href="form-submission.html#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code>"; "<code title="attr-fs-enctype-formdata"><a href="form-submission.html#attr-fs-enctype-formdata">multipart/form-data</a></code>"; "<code title="attr-fs-enctype-text"><a href="form-submission.html#attr-fs-enctype-text">text/plain</a></code>"
    </td></tr><tr><th> <code title="">formmethod</code>
     </th><td> <code title="attr-fs-formmethod"><a href="form-submission.html#attr-fs-formmethod">button</a></code>;
          <code title="attr-fs-formmethod"><a href="form-submission.html#attr-fs-formmethod">input</a></code>
     </td><td> HTTP method to use for <a href="#form-submission-0">form submission</a>
     </td><td> "<code title="">GET</code>"; "<code title="">POST</code>"
    </td></tr><tr><th> <code title="">formnovalidate</code>
     </th><td> <code title="attr-fs-formnovalidate"><a href="form-submission.html#attr-fs-formnovalidate">button</a></code>;
          <code title="attr-fs-formnovalidate"><a href="form-submission.html#attr-fs-formnovalidate">input</a></code>
     </td><td> Bypass form control validation for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">formtarget</code>
     </th><td> <code title="attr-fs-formtarget"><a href="form-submission.html#attr-fs-formtarget">button</a></code>;
          <code title="attr-fs-formtarget"><a href="form-submission.html#attr-fs-formtarget">input</a></code>
     </td><td> <a href="#browsing-context">Browsing context</a> for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="#valid-browsing-context-name-or-keyword">Valid browsing context name or keyword</a>
    </td></tr><tr><th> <code title="">headers</code>
     </th><td> <code title="attr-tdth-headers"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-headers">td</a></code>;
          <code title="attr-tdth-headers"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-headers">th</a></code>
     </td><td> The header cells for this cell
     </td><td> <a href="common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens">Unordered set of unique space-separated tokens</a>, <a href="infrastructure.html#case-sensitive">case-sensitive</a>, consisting of IDs*
    </td></tr><tr><th> <code title="">height</code>
     </th><td> <code title="attr-canvas-height"><a href="the-canvas-element.html#attr-canvas-height">canvas</a></code>;
          <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">embed</a></code>;
          <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">iframe</a></code>;
          <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">img</a></code>;
          <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">input</a></code>;
          <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">object</a></code>;
          <code title="attr-dim-height"><a href="dimension-attributes.html#attr-dim-height">video</a></code>
     </td><td> Vertical dimension
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a>
    </td></tr><tr><th> <code title="">hidden</code>
     </th><td> <a href="#the-hidden-attribute" title="attr-hidden">HTML elements</a>
     </td><td> Whether the element is relevant
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">high</code>
     </th><td> <code title="attr-meter-high"><a href="the-meter-element.html#attr-meter-high">meter</a></code>
     </td><td> Low limit of high range
     </td><td> <a href="common-microsyntaxes.html#valid-floating-point-number">Valid floating-point number</a>*
    </td></tr><tr><th> <code title="">href</code>
     </th><td> <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">a</a></code>;
          <code title="attr-hyperlink-href"><a href="#attr-hyperlink-href">area</a></code>
     </td><td> Address of the <a href="#hyperlink">hyperlink</a>
     </td><td> <a href="urls.html#valid-url-potentially-surrounded-by-spaces">Valid URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">href</code>
     </th><td> <code title="attr-link-href"><a href="the-link-element.html#attr-link-href">link</a></code>
     </td><td> Address of the <a href="#hyperlink">hyperlink</a>
     </td><td> <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">Valid non-empty URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">href</code>
     </th><td> <code title="attr-base-href"><a href="the-base-element.html#attr-base-href">base</a></code>
     </td><td> <a href="urls.html#document-base-url">Document base URL</a>
     </td><td> <a href="urls.html#valid-url-potentially-surrounded-by-spaces">Valid URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">hreflang</code>
     </th><td> <code title="attr-hyperlink-hreflang"><a href="#attr-hyperlink-hreflang">a</a></code>;
          <code title="attr-hyperlink-hreflang"><a href="#attr-hyperlink-hreflang">area</a></code>;
          <code title="attr-link-hreflang"><a href="the-link-element.html#attr-link-hreflang">link</a></code>
     </td><td> Language of the linked resource
     </td><td> Valid BCP 47 language tag
    </td></tr><tr><th> <code title="">http-equiv</code>
     </th><td> <code title="attr-meta-http-equiv"><a href="the-meta-element.html#attr-meta-http-equiv">meta</a></code>
     </td><td> Pragma directive
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">icon</code>
     </th><td> <code title="attr-command-icon"><a href="#attr-command-icon">command</a></code>
     </td><td> Icon for the command
     </td><td> <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">Valid non-empty URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">id</code>
     </th><td> <a href="global-attributes.html#the-id-attribute" title="attr-id">HTML elements</a>
     </td><td> The element's <a href="infrastructure.html#concept-id" title="concept-id">ID</a>
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
<!--INERT-->
    </td></tr><tr><th> <code title="">ismap</code>
     </th><td> <code title="attr-img-ismap"><a href="the-img-element.html#attr-img-ismap">img</a></code>
     </td><td> Whether the image is a server-side image map
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
<!--MD-->
    </td></tr><tr><th> <code title="">keytype</code>
     </th><td> <code title="attr-keygen-keytype"><a href="the-keygen-element.html#attr-keygen-keytype">keygen</a></code>
     </td><td> The type of cryptographic key to generate
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">kind</code>
     </th><td> <code title="attr-track-kind"><a href="the-track-element.html#attr-track-kind">track</a></code>
     </td><td> The type of text track
     </td><td> "<code title="attr-track-kind-subtitles"><a href="the-track-element.html#attr-track-kind-subtitles">subtitles</a></code>";
          "<code title="attr-track-kind-captions"><a href="the-track-element.html#attr-track-kind-captions">captions</a></code>";
          "<code title="attr-track-kind-descriptions"><a href="the-track-element.html#attr-track-kind-descriptions">descriptions</a></code>";
          "<code title="attr-track-kind-chapters"><a href="the-track-element.html#attr-track-kind-chapters">chapters</a></code>";
          "<code title="attr-track-kind-metadata"><a href="the-track-element.html#attr-track-kind-metadata">metadata</a></code>"
    </td></tr><tr><th> <code title="">label</code>
     </th><td> <code title="attr-command-label"><a href="#attr-command-label">command</a></code>;
          <code title="attr-menu-label"><a href="#attr-menu-label">menu</a></code>;
          <code title="attr-optgroup-label"><a href="the-optgroup-element.html#attr-optgroup-label">optgroup</a></code>;
          <code title="attr-option-label"><a href="the-option-element.html#attr-option-label">option</a></code>;
          <code title="attr-track-label"><a href="the-track-element.html#attr-track-label">track</a></code>
     </td><td> User-visible label
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">lang</code>
     </th><td> <a href="global-attributes.html#attr-lang" title="attr-lang">HTML elements</a>
     </td><td> <a href="global-attributes.html#language">Language</a> of the element
     </td><td> Valid BCP 47 language tag or the empty string
    </td></tr><tr><th> <code title="">list</code>
     </th><td> <code title="attr-input-list"><a href="common-input-element-attributes.html#attr-input-list">input</a></code>
     </td><td> List of autocomplete options
     </td><td> <a href="infrastructure.html#concept-id" title="concept-id">ID</a>*
    </td></tr><tr><th> <code title="">loop</code>
     </th><td> <code title="attr-media-loop"><a href="media-elements.html#attr-media-loop">audio</a></code>;
          <code title="attr-media-loop"><a href="media-elements.html#attr-media-loop">video</a></code>
     </td><td> Whether to loop the <a href="media-elements.html#media-resource">media resource</a>
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">low</code>
     </th><td> <code title="attr-meter-low"><a href="the-meter-element.html#attr-meter-low">meter</a></code>
     </td><td> High limit of low range
     </td><td> <a href="common-microsyntaxes.html#valid-floating-point-number">Valid floating-point number</a>*
    </td></tr><tr><th> <code title="">manifest</code>
     </th><td> <code title="attr-html-manifest"><a href="the-html-element.html#attr-html-manifest">html</a></code>
     </td><td> <a href="#concept-appcache-manifest" title="concept-appcache-manifest">Application cache manifest</a>
     </td><td> <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">Valid non-empty URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">max</code>
     </th><td> <code title="attr-input-max"><a href="common-input-element-attributes.html#attr-input-max">input</a></code>
     </td><td> Maximum value
     </td><td> Varies*
    </td></tr><tr><th> <code title="">max</code>
     </th><td> <code title="attr-meter-max"><a href="the-meter-element.html#attr-meter-max">meter</a></code>;
          <code title="attr-progress-max"><a href="the-progress-element.html#attr-progress-max">progress</a></code>
     </td><td> Upper bound of range
     </td><td> <a href="common-microsyntaxes.html#valid-floating-point-number">Valid floating-point number</a>*
    </td></tr><tr><th> <code title="">maxlength</code>
     </th><td> <code title="attr-input-maxlength"><a href="common-input-element-attributes.html#attr-input-maxlength">input</a></code>;
          <code title="attr-textarea-maxlength"><a href="the-textarea-element.html#attr-textarea-maxlength">textarea</a></code>
     </td><td> Maximum length of value
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a>
    </td></tr><tr><th> <code title="">media</code>
     </th><td> <code title="attr-hyperlink-media"><a href="#attr-hyperlink-media">a</a></code>;
          <code title="attr-hyperlink-media"><a href="#attr-hyperlink-media">area</a></code>;
          <code title="attr-link-media"><a href="the-link-element.html#attr-link-media">link</a></code>;
          <code title="attr-source-media"><a href="the-source-element.html#attr-source-media">source</a></code>;
          <code title="attr-style-media"><a href="the-style-element.html#attr-style-media">style</a></code>
     </td><td> Applicable media
     </td><td> <a href="common-microsyntaxes.html#valid-media-query">Valid media query</a>
    </td></tr><tr><th> <code title="">mediagroup</code>
     </th><td> <code title="attr-media-mediagroup"><a href="media-elements.html#attr-media-mediagroup">audio</a></code>;
          <code title="attr-media-mediagroup"><a href="media-elements.html#attr-media-mediagroup">video</a></code>
     </td><td> Groups <a href="media-elements.html#media-element" title="media element">media elements</a> together with an implicit <code><a href="media-elements.html#mediacontroller">MediaController</a></code>
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">method</code>
     </th><td> <code title="attr-fs-method"><a href="form-submission.html#attr-fs-method">form</a></code>
     </td><td> HTTP method to use for <a href="#form-submission-0">form submission</a>
     </td><td> "<code title="attr-fs-method-GET-keyword"><a href="form-submission.html#attr-fs-method-get-keyword">GET</a></code>";
          "<code title="attr-fs-method-POST-keyword"><a href="form-submission.html#attr-fs-method-post-keyword">POST</a></code>";
<!--FORM-DIALOG-->
    </td></tr><tr><th> <code title="">min</code>
     </th><td> <code title="attr-input-min"><a href="common-input-element-attributes.html#attr-input-min">input</a></code>
     </td><td> Minimum value
     </td><td> Varies*
    </td></tr><tr><th> <code title="">min</code>
     </th><td> <code title="attr-meter-min"><a href="the-meter-element.html#attr-meter-min">meter</a></code>
     </td><td> Lower bound of range
     </td><td> <a href="common-microsyntaxes.html#valid-floating-point-number">Valid floating-point number</a>*
    </td></tr><tr><th> <code title="">multiple</code>
     </th><td> <code title="attr-input-multiple"><a href="common-input-element-attributes.html#attr-input-multiple">input</a></code>;
          <code title="attr-select-multiple"><a href="the-select-element.html#attr-select-multiple">select</a></code>
     </td><td> Whether to allow multiple values
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">muted</code>
     </th><td> <code title="attr-media-muted"><a href="media-elements.html#attr-media-muted">audio</a></code>;
          <code title="attr-media-muted"><a href="media-elements.html#attr-media-muted">video</a></code>
     </td><td> Whether to mute the <a href="media-elements.html#media-resource">media resource</a> by default
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">name</code>
     </th><td> <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">button</a></code>;
          <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">fieldset</a></code>;
          <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">input</a></code>;
          <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">keygen</a></code>;
          <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">output</a></code>;
          <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">select</a></code>;
          <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">textarea</a></code>
     </td><td> Name of form control to use for <a href="#form-submission-0">form submission</a> and in the <code title="dom-form-elements"><a href="the-form-element.html#dom-form-elements">form.elements</a></code> API
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">name</code>
     </th><td> <code title="attr-form-name"><a href="the-form-element.html#attr-form-name">form</a></code>
     </td><td> Name of form to use in the <code title="dom-document-forms"><a href="dom.html#dom-document-forms">document.forms</a></code> API
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">name</code>
     </th><td> <code title="attr-iframe-name"><a href="the-iframe-element.html#attr-iframe-name">iframe</a></code>;
          <code title="attr-object-name"><a href="the-object-element.html#attr-object-name">object</a></code>
     </td><td> Name of <a href="#nested-browsing-context">nested browsing context</a>
     </td><td> <a href="#valid-browsing-context-name-or-keyword">Valid browsing context name or keyword</a>
    </td></tr><tr><th> <code title="">name</code>
     </th><td> <code title="attr-map-name"><a href="the-map-element.html#attr-map-name">map</a></code>
     </td><td> Name of <a href="image-maps.html#image-map">image map</a> to reference from the <code title="attr-hyperlink-usemap"><a href="image-maps.html#attr-hyperlink-usemap">usemap</a></code> attribute
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">name</code>
     </th><td> <code title="attr-meta-name"><a href="the-meta-element.html#attr-meta-name">meta</a></code>
     </td><td> Metadata name
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">name</code>
     </th><td> <code title="attr-param-name"><a href="the-param-element.html#attr-param-name">param</a></code>
     </td><td> Name of parameter
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">novalidate</code>
     </th><td> <code title="attr-fs-novalidate"><a href="form-submission.html#attr-fs-novalidate">form</a></code>
     </td><td> Bypass form control validation for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">open</code>
     </th><td> <code title="attr-details-open"><a href="#attr-details-open">details</a></code>
     </td><td> Whether the details are visible
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">open</code>
     </th><td> <code title="attr-dialog-open"><a href="#attr-dialog-open">dialog</a></code>
     </td><td> Whether the dialog box is showing
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">optimum</code>
     </th><td> <code title="attr-meter-optimum"><a href="the-meter-element.html#attr-meter-optimum">meter</a></code>
     </td><td> Optimum value in gauge
     </td><td> <a href="common-microsyntaxes.html#valid-floating-point-number">Valid floating-point number</a>*
    </td></tr><tr><th> <code title="">pattern</code>
     </th><td> <code title="attr-input-pattern"><a href="common-input-element-attributes.html#attr-input-pattern">input</a></code>
     </td><td> Pattern to be matched by the form control's value
     </td><td> Regular expression matching the JavaScript <i title="">Pattern</i> production
<!--PING-->
    </td></tr><tr><th> <code title="">placeholder</code>
     </th><td> <code title="attr-input-placeholder"><a href="common-input-element-attributes.html#attr-input-placeholder">input</a></code>;
          <code title="attr-textarea-placeholder"><a href="the-textarea-element.html#attr-textarea-placeholder">textarea</a></code>
     </td><td> User-visible label to be placed within the form control
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">poster</code>
     </th><td> <code title="attr-video-poster"><a href="the-video-element.html#attr-video-poster">video</a></code>
     </td><td> Poster frame to show prior to video playback
     </td><td> <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">Valid non-empty URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">preload</code>
     </th><td> <code title="attr-media-preload"><a href="media-elements.html#attr-media-preload">audio</a></code>;
          <code title="attr-media-preload"><a href="media-elements.html#attr-media-preload">video</a></code>
     </td><td> Hints how much buffering the <a href="media-elements.html#media-resource">media resource</a> will likely need
     </td><td> "<code title="attr-media-preload-none"><a href="media-elements.html#attr-media-preload-none">none</a></code>";
          "<code title="attr-media-preload-metadata"><a href="media-elements.html#attr-media-preload-metadata">metadata</a></code>";
          "<code title="attr-media-preload-auto"><a href="media-elements.html#attr-media-preload-auto">auto</a></code>"
    </td></tr><tr><th> <code title="">radiogroup</code>
     </th><td> <code title="attr-command-radiogroup"><a href="#attr-command-radiogroup">command</a></code>
     </td><td> Name of group of commands to treat as a radio button group
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">readonly</code>
     </th><td> <code title="attr-input-readonly"><a href="common-input-element-attributes.html#attr-input-readonly">input</a></code>;
          <code title="attr-textarea-readonly"><a href="the-textarea-element.html#attr-textarea-readonly">textarea</a></code>
     </td><td> Whether to allow the value to be edited by the user
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">rel</code>
     </th><td> <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">a</a></code>;
          <code title="attr-hyperlink-rel"><a href="#attr-hyperlink-rel">area</a></code>;
          <code title="attr-link-rel"><a href="the-link-element.html#attr-link-rel">link</a></code>
     </td><td> Relationship between the document containing the hyperlink and the destination resource
     </td><td> <a href="common-microsyntaxes.html#set-of-space-separated-tokens">Set of space-separated tokens</a>*
    </td></tr><tr><th> <code title="">required</code>
     </th><td> <code title="attr-input-required"><a href="common-input-element-attributes.html#attr-input-required">input</a></code>;
          <code title="attr-select-required"><a href="the-select-element.html#attr-select-required">select</a></code>;
          <code title="attr-textarea-required"><a href="the-textarea-element.html#attr-textarea-required">textarea</a></code>
     </td><td> Whether the control is required for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">reversed</code>
     </th><td> <code title="attr-ol-reversed"><a href="the-ol-element.html#attr-ol-reversed">ol</a></code>
     </td><td> Number the list backwards
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">rows</code>
     </th><td> <code title="attr-textarea-rows"><a href="the-textarea-element.html#attr-textarea-rows">textarea</a></code>
     </td><td> Number of lines to show
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a> greater than zero
    </td></tr><tr><th> <code title="">rowspan</code>
     </th><td> <code title="attr-tdth-rowspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-rowspan">td</a></code>;
          <code title="attr-tdth-rowspan"><a href="attributes-common-to-td-and-th-elements.html#attr-tdth-rowspan">th</a></code>
     </td><td> Number of rows that the cell is to span
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a>
    </td></tr><tr><th> <code title="">sandbox</code>
     </th><td> <code title="attr-iframe-sandbox"><a href="the-iframe-element.html#attr-iframe-sandbox">iframe</a></code>
     </td><td> Security rules for nested content
     </td><td> <a href="common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens">Unordered set of unique space-separated tokens</a>, <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>, consisting of
          "<code title="attr-iframe-sandbox-allow-forms"><a href="#attr-iframe-sandbox-allow-forms">allow-forms</a></code>",
          "<code title="attr-iframe-sandbox-allow-popups"><a href="#attr-iframe-sandbox-allow-popups">allow-popups</a></code>",
          "<code title="attr-iframe-sandbox-allow-same-origin"><a href="#attr-iframe-sandbox-allow-same-origin">allow-same-origin</a></code>",
          "<code title="attr-iframe-sandbox-allow-scripts"><a href="#attr-iframe-sandbox-allow-scripts">allow-scripts</a></code> and
          "<code title="attr-iframe-sandbox-allow-top-navigation"><a href="#attr-iframe-sandbox-allow-top-navigation">allow-top-navigation</a></code>"
    </td></tr><tr><th> <code title="">spellcheck</code>
     </th><td> <a href="#attr-spellcheck" title="attr-spellcheck">HTML elements</a>
     </td><td> Whether the element is to have its spelling and grammar checked
     </td><td> "<code title="">true</code>"; "<code title="">false</code>"
    </td></tr><tr><th> <code title="">scope</code>
     </th><td> <code title="attr-th-scope"><a href="the-th-element.html#attr-th-scope">th</a></code>
     </td><td> Specifies which cells the header cell applies to
     </td><td> "<code title="attr-th-scope-row"><a href="the-th-element.html#attr-th-scope-row">row</a></code>";
          "<code title="attr-th-scope-col"><a href="the-th-element.html#attr-th-scope-col">col</a></code>";
          "<code title="attr-th-scope-rowgroup"><a href="the-th-element.html#attr-th-scope-rowgroup">rowgroup</a></code>";
          "<code title="attr-th-scope-colgroup"><a href="the-th-element.html#attr-th-scope-colgroup">colgroup</a></code>"
    </td></tr><tr><th> <code title="">scoped</code>
     </th><td> <code title="attr-style-scoped"><a href="the-style-element.html#attr-style-scoped">style</a></code>
     </td><td> Whether the styles apply to the entire document or just the parent subtree
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">seamless</code>
     </th><td> <code title="attr-iframe-seamless"><a href="the-iframe-element.html#attr-iframe-seamless">iframe</a></code>
     </td><td> Whether to apply the document's styles to the nested content
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">selected</code>
     </th><td> <code title="attr-option-selected"><a href="the-option-element.html#attr-option-selected">option</a></code>
     </td><td> Whether the option is selected by default
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">shape</code>
     </th><td> <code title="attr-area-shape"><a href="the-area-element.html#attr-area-shape">area</a></code>
     </td><td> The kind of shape to be created in an <a href="image-maps.html#image-map">image map</a>
     </td><td> "<code title="attr-area-shape-keyword-circle"><a href="the-area-element.html#attr-area-shape-keyword-circle">circle</a></code>";
          "<code title="attr-area-shape-keyword-default"><a href="the-area-element.html#attr-area-shape-keyword-default">default</a></code>";
          "<code title="attr-area-shape-keyword-poly"><a href="the-area-element.html#attr-area-shape-keyword-poly">poly</a></code>";
          "<code title="attr-area-shape-keyword-rect"><a href="the-area-element.html#attr-area-shape-keyword-rect">rect</a></code>"
    </td></tr><tr><th> <code title="">size</code>
     </th><td> <code title="attr-input-size"><a href="common-input-element-attributes.html#attr-input-size">input</a></code>;
          <code title="attr-select-size"><a href="the-select-element.html#attr-select-size">select</a></code>
     </td><td> Size of the control
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a> greater than zero
    </td></tr><tr><th> <code title="">sizes</code>
     </th><td> <code title="attr-link-sizes"><a href="#attr-link-sizes">link</a></code>
     </td><td> Sizes of the icons (for <code title="attr-link-rel"><a href="the-link-element.html#attr-link-rel">rel</a></code>="<code title="rel-icon"><a href="#rel-icon">icon</a></code>")
     </td><td> <a href="common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens">Unordered set of unique space-separated tokens</a>, <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a>, consisting of sizes*
    </td></tr><tr><th> <code title="">span</code>
     </th><td> <code title="attr-col-span"><a href="the-col-element.html#attr-col-span">col</a></code>;
          <code title="attr-colgroup-span"><a href="the-colgroup-element.html#attr-colgroup-span">colgroup</a></code>
     </td><td> Number of columns spanned by the element
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a> greater than zero
    </td></tr><tr><th> <code title="">src</code>
     </th><td> <code title="attr-media-src"><a href="media-elements.html#attr-media-src">audio</a></code>;
          <code title="attr-embed-src"><a href="the-embed-element.html#attr-embed-src">embed</a></code>;
          <code title="attr-iframe-src"><a href="the-iframe-element.html#attr-iframe-src">iframe</a></code>;
          <code title="attr-img-src"><a href="the-img-element.html#attr-img-src">img</a></code>;
          <code title="attr-input-src"><a href="states-of-the-type-attribute.html#attr-input-src">input</a></code>;
          <code title="attr-script-src"><a href="the-script-element.html#attr-script-src">script</a></code>;
          <code title="attr-source-src"><a href="the-source-element.html#attr-source-src">source</a></code>;
          <code title="attr-track-src"><a href="the-track-element.html#attr-track-src">track</a></code>;
          <code title="attr-media-src"><a href="media-elements.html#attr-media-src">video</a></code>
     </td><td> Address of the resource
     </td><td> <a href="urls.html#valid-non-empty-url-potentially-surrounded-by-spaces">Valid non-empty URL potentially surrounded by spaces</a>
    </td></tr><tr><th> <code title="">srcdoc</code>
     </th><td> <code title="attr-iframe-srcdoc"><a href="the-iframe-element.html#attr-iframe-srcdoc">iframe</a></code>
     </td><td> A document to render in the <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>
     </td><td> The source of <a href="the-iframe-element.html#an-iframe-srcdoc-document">an <code>iframe</code> <code title="attr-iframe-srcdoc">srcdoc</code> document</a>*
    </td></tr><tr><th> <code title="">srclang</code>
     </th><td> <code title="attr-track-srclang"><a href="the-track-element.html#attr-track-srclang">track</a></code>
     </td><td> Language of the text track
     </td><td> Valid BCP 47 language tag
    </td></tr><tr><th> <code title="">start</code>
     </th><td> <code title="attr-ol-start"><a href="the-ol-element.html#attr-ol-start">ol</a></code>
     </td><td> <a href="the-li-element.html#ordinal-value">Ordinal value</a> of the first item
     </td><td> <a href="common-microsyntaxes.html#valid-integer">Valid integer</a>
    </td></tr><tr><th> <code title="">step</code>
     </th><td> <code title="attr-input-step"><a href="common-input-element-attributes.html#attr-input-step">input</a></code>
     </td><td> Granularity to be matched by the form control's value
     </td><td> <a href="common-microsyntaxes.html#valid-floating-point-number">Valid floating-point number</a> greater than zero, or "<code title="">any</code>"
    </td></tr><tr><th> <code title="">style</code>
     </th><td> <a href="global-attributes.html#the-style-attribute" title="attr-style">HTML elements</a>
     </td><td> Presentational and formatting instructions
     </td><td> CSS declarations*
    </td></tr><tr><th> <code title="">tabindex</code>
     </th><td> <a href="#attr-tabindex" title="attr-tabindex">HTML elements</a>
     </td><td> Whether the element is focusable, and the relative order of the element for the purposes of sequential focus navigation
     </td><td> <a href="common-microsyntaxes.html#valid-integer">Valid integer</a>
    </td></tr><tr><th> <code title="">target</code>
     </th><td> <code title="attr-hyperlink-target"><a href="#attr-hyperlink-target">a</a></code>;
          <code title="attr-hyperlink-target"><a href="#attr-hyperlink-target">area</a></code>
     </td><td> <a href="#browsing-context">Browsing context</a> for <a href="#hyperlink">hyperlink</a> <a href="#navigate" title="navigate">navigation</a>
     </td><td> <a href="#valid-browsing-context-name-or-keyword">Valid browsing context name or keyword</a>
    </td></tr><tr><th> <code title="">target</code>
     </th><td> <code title="attr-base-target"><a href="the-base-element.html#attr-base-target">base</a></code>
     </td><td> Default <a href="#browsing-context">browsing context</a> for <a href="#hyperlink">hyperlink</a> <a href="#navigate" title="navigate">navigation</a> and <a href="#form-submission-0">form submission</a>
     </td><td> <a href="#valid-browsing-context-name-or-keyword">Valid browsing context name or keyword</a>
    </td></tr><tr><th> <code title="">target</code>
     </th><td> <code title="attr-fs-target"><a href="form-submission.html#attr-fs-target">form</a></code>
     </td><td> <a href="#browsing-context">Browsing context</a> for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="#valid-browsing-context-name-or-keyword">Valid browsing context name or keyword</a>
    </td></tr><tr><th> <code title="">title</code>
     </th><td> <a href="global-attributes.html#attr-title" title="attr-title">HTML elements</a>
     </td><td> Advisory information for the element
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">title</code>
     </th><td> <code title="attr-abbr-title"><a href="the-abbr-element.html#attr-abbr-title">abbr</a></code>;
          <code title="attr-dfn-title"><a href="the-dfn-element.html#attr-dfn-title">dfn</a></code>
     </td><td> Full term or expansion of abbreviation
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">title</code>
     </th><td> <code title="attr-command-title"><a href="#attr-command-title">command</a></code>
     </td><td> Hint describing the command
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">title</code>
     </th><td> <code title="attr-link-title"><a href="the-link-element.html#attr-link-title">link</a></code>
     </td><td> Title of the link
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">title</code>
     </th><td> <code title="attr-link-title"><a href="the-link-element.html#attr-link-title">link</a></code>;
          <code title="attr-style-title"><a href="the-style-element.html#attr-style-title">style</a></code>
     </td><td> Alternative style sheet set name
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">translate</code>
     </th><td> <a href="global-attributes.html#attr-translate" title="attr-translate">HTML elements</a>
     </td><td> Whether the element is to be translated when the page is localized
     </td><td> "<code title="">yes</code>"; "<code title="">no</code>"
    </td></tr><tr><th> <code title="">type</code>
     </th><td> <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">a</a></code>;
          <code title="attr-hyperlink-type"><a href="#attr-hyperlink-type">area</a></code>;
          <code title="attr-link-type"><a href="the-link-element.html#attr-link-type">link</a></code>
     </td><td> Hint for the type of the referenced resource
     </td><td> <a href="infrastructure.html#valid-mime-type">Valid MIME type</a>
    </td></tr><tr><th> <code title="">type</code>
     </th><td> <code title="attr-button-type"><a href="the-button-element.html#attr-button-type">button</a></code>
     </td><td> Type of button
     </td><td> "<code title="attr-button-type-submit"><a href="the-button-element.html#attr-button-type-submit">submit</a></code>";
          "<code title="attr-button-type-reset"><a href="the-button-element.html#attr-button-type-reset">reset</a></code>";
          "<code title="attr-button-type-button"><a href="the-button-element.html#attr-button-type-button">button</a></code>"
    </td></tr><tr><th> <code title="">type</code>
     </th><td> <code title="attr-command-type"><a href="#attr-command-type">command</a></code>
     </td><td> Type of command
     </td><td> "<code title="attr-command-type-keyword-command"><a href="#attr-command-type-keyword-command">command</a></code>";
          "<code title="attr-command-type-keyword-checkbox"><a href="#attr-command-type-keyword-checkbox">checkbox</a></code>";
          "<code title="attr-command-type-keyword-radio"><a href="#attr-command-type-keyword-radio">radio</a></code>"
    </td></tr><tr><th> <code title="">type</code>
     </th><td> <code title="attr-embed-type"><a href="the-embed-element.html#attr-embed-type">embed</a></code>;
          <code title="attr-object-type"><a href="the-object-element.html#attr-object-type">object</a></code>;
          <code title="attr-script-type"><a href="the-script-element.html#attr-script-type">script</a></code>;
          <code title="attr-source-type"><a href="the-source-element.html#attr-source-type">source</a></code>;
          <code title="attr-style-type"><a href="the-style-element.html#attr-style-type">style</a></code>
     </td><td> Type of embedded resource
     </td><td> <a href="infrastructure.html#valid-mime-type">Valid MIME type</a>
    </td></tr><tr><th> <code title="">type</code>
     </th><td> <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">input</a></code>
     </td><td> Type of form control
     </td><td> <a href="the-input-element.html#attr-input-type" title="attr-input-type"><code>input</code> type keyword</a>
    </td></tr><tr><th> <code title="">type</code>
     </th><td> <code title="attr-menu-type"><a href="#attr-menu-type">menu</a></code>
     </td><td> Type of menu
     </td><td> "<code title="context menu state"><a href="#context-menu-state">context</a></code>"; "<code title="toolbar state"><a href="#toolbar-state">toolbar</a></code>"
    </td></tr><tr><th> <code title="">typemustmatch</code>
     </th><td> <code title="attr-object-typemustmatch"><a href="the-object-element.html#attr-object-typemustmatch">object</a></code>
     </td><td> Whether the <code title="attr-object-type"><a href="the-object-element.html#attr-object-type">type</a></code> attribute and the <a href="urls.html#content-type">Content-Type</a> value need to match for the resource to be used
     </td><td> <a href="common-microsyntaxes.html#boolean-attribute">Boolean attribute</a>
    </td></tr><tr><th> <code title="">usemap</code>
     </th><td> <code title="attr-hyperlink-usemap"><a href="image-maps.html#attr-hyperlink-usemap">img</a></code>;
          <code title="attr-hyperlink-usemap"><a href="image-maps.html#attr-hyperlink-usemap">object</a></code>
     </td><td> Name of <a href="image-maps.html#image-map">image map</a> to use
     </td><td> <a href="common-microsyntaxes.html#valid-hash-name-reference">Valid hash-name reference</a>*
    </td></tr><tr><th> <code title="">value</code>
     </th><td> <code title="attr-button-value"><a href="the-button-element.html#attr-button-value">button</a></code>;
          <code title="attr-option-value"><a href="the-option-element.html#attr-option-value">option</a></code>
     </td><td> Value to be used for <a href="#form-submission-0">form submission</a>
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">value</code>
     </th><td> <code title="attr-data-value">data</code>
     </td><td> Machine-readable value
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>*
    </td></tr><tr><th> <code title="">value</code>
     </th><td> <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">input</a></code>
     </td><td> Value of the form control
     </td><td> Varies*
    </td></tr><tr><th> <code title="">value</code>
     </th><td> <code title="attr-li-value"><a href="the-li-element.html#attr-li-value">li</a></code>
     </td><td> <a href="the-li-element.html#ordinal-value">Ordinal value</a> of the list item
     </td><td> <a href="common-microsyntaxes.html#valid-integer">Valid integer</a>
    </td></tr><tr><th> <code title="">value</code>
     </th><td> <code title="attr-meter-value"><a href="the-meter-element.html#attr-meter-value">meter</a></code>;
          <code title="attr-progress-value"><a href="the-progress-element.html#attr-progress-value">progress</a></code>
     </td><td> Current value of the element
     </td><td> <a href="common-microsyntaxes.html#valid-floating-point-number">Valid floating-point number</a>
    </td></tr><tr><th> <code title="">value</code>
     </th><td> <code title="attr-param-value"><a href="the-param-element.html#attr-param-value">param</a></code>
     </td><td> Value of parameter
     </td><td> <a href="element-definitions.html#attribute-text">Text</a>
    </td></tr><tr><th> <code title="">width</code>
     </th><td> <code title="attr-canvas-width"><a href="the-canvas-element.html#attr-canvas-width">canvas</a></code>;
          <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">embed</a></code>;
          <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">iframe</a></code>;
          <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">img</a></code>;
          <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">input</a></code>;
          <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">object</a></code>;
          <code title="attr-dim-width"><a href="dimension-attributes.html#attr-dim-width">video</a></code>
     </td><td> Horizontal dimension
     </td><td> <a href="common-microsyntaxes.html#valid-non-negative-integer">Valid non-negative integer</a>
    </td></tr><tr><th> <code title="">wrap</code>
     </th><td> <code title="attr-textarea-wrap"><a href="the-textarea-element.html#attr-textarea-wrap">textarea</a></code>
     </td><td> How the value of the form control is to be wrapped for <a href="#form-submission-0">form submission</a>
     </td><td> "<code title="attr-textarea-wrap-soft"><a href="the-textarea-element.html#attr-textarea-wrap-soft">soft</a></code>";
          "<code title="attr-textarea-wrap-hard"><a href="the-textarea-element.html#attr-textarea-wrap-hard">hard</a></code>"
  </td></tr></tbody></table><p>An asterisk (*) in a cell indicates that the actual rules are more complicated than indicated in the table above.</p>

  <hr><table id="ix-event-handlers"><caption>List of event handler content attributes</caption>
   <thead><tr><th> Attribute
     </th><th> Element(s)
     </th><th> Description
     </th><th> Value
   </th></tr></thead><tbody><tr><th id="ix-handler-onabort"> <code title="">onabort</code>
     </th><td> <a href="#handler-onabort" title="handler-onabort">HTML elements</a>
     </td><td> <code title="event-abort">abort</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onafterprint"> <code title="">onafterprint</code>
     </th><td> <code title="handler-window-onafterprint"><a href="#handler-window-onafterprint">body</a></code>
     </td><td> <code title="event-afterprint">afterprint</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onbeforeprint"> <code title="">onbeforeprint</code>
     </th><td> <code title="handler-window-onbeforeprint"><a href="#handler-window-onbeforeprint">body</a></code>
     </td><td> <code title="event-beforeprint">beforeprint</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onbeforeunload"> <code title="">onbeforeunload</code>
     </th><td> <code title="handler-window-onbeforeunload"><a href="#handler-window-onbeforeunload">body</a></code>
     </td><td> <code title="event-beforeunload">beforeunload</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onblur"> <code title="">onblur</code>
     </th><td> <code title="handler-window-onblur"><a href="#handler-window-onblur">body</a></code>
     </td><td> <code title="event-blur">blur</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onblur"> <code title="">onblur</code>
     </th><td> <a href="#handler-onblur" title="handler-onblur">HTML elements</a>
     </td><td> <code title="event-blur">blur</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-oncancel"> <code title="">oncancel</code>
     </th><td> <a href="#handler-oncancel" title="handler-oncancel">HTML elements</a>
     </td><td> <code title="event-media-cancel">cancel</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-oncanplay"> <code title="">oncanplay</code>
     </th><td> <a href="#handler-oncanplay" title="handler-oncanplay">HTML elements</a>
     </td><td> <code title="event-media-canplay"><a href="media-elements.html#event-media-canplay">canplay</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-oncanplaythrough"> <code title="">oncanplaythrough</code>
     </th><td> <a href="#handler-oncanplaythrough" title="handler-oncanplaythrough">HTML elements</a>
     </td><td> <code title="event-media-canplaythrough"><a href="media-elements.html#event-media-canplaythrough">canplaythrough</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onchange"> <code title="">onchange</code>
     </th><td> <a href="#handler-onchange" title="handler-onchange">HTML elements</a>
     </td><td> <code title="event-change">change</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onclick"> <code title="">onclick</code>
     </th><td> <a href="#handler-onclick" title="handler-onclick">HTML elements</a>
     </td><td> <code title="event-click"><a href="infrastructure.html#event-click">click</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onclose"> <code title="">onclose</code>
     </th><td> <a href="#handler-onclose" title="handler-onclose">HTML elements</a>
     </td><td> <code title="event-close">close</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-oncontextmenu"> <code title="">oncontextmenu</code>
     </th><td> <a href="#handler-oncontextmenu" title="handler-oncontextmenu">HTML elements</a>
     </td><td> <code title="event-contextmenu">contextmenu</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-oncuechange"> <code title="">oncuechange</code>
     </th><td> <a href="#handler-oncuechange" title="handler-oncuechange">HTML elements</a>
     </td><td> <code title="event-cuechange">cuechange</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondblclick"> <code title="">ondblclick</code>
     </th><td> <a href="#handler-ondblclick" title="handler-ondblclick">HTML elements</a>
     </td><td> <code title="event-dblclick">dblclick</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondrag"> <code title="">ondrag</code>
     </th><td> <a href="#handler-ondrag" title="handler-ondrag">HTML elements</a>
     </td><td> <code title="event-drag"><a href="#event-drag">drag</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondragend"> <code title="">ondragend</code>
     </th><td> <a href="#handler-ondragend" title="handler-ondragend">HTML elements</a>
     </td><td> <code title="event-dragend"><a href="#event-dragend">dragend</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondragenter"> <code title="">ondragenter</code>
     </th><td> <a href="#handler-ondragenter" title="handler-ondragenter">HTML elements</a>
     </td><td> <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondragleave"> <code title="">ondragleave</code>
     </th><td> <a href="#handler-ondragleave" title="handler-ondragleave">HTML elements</a>
     </td><td> <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondragover"> <code title="">ondragover</code>
     </th><td> <a href="#handler-ondragover" title="handler-ondragover">HTML elements</a>
     </td><td> <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondragstart"> <code title="">ondragstart</code>
     </th><td> <a href="#handler-ondragstart" title="handler-ondragstart">HTML elements</a>
     </td><td> <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondrop"> <code title="">ondrop</code>
     </th><td> <a href="#handler-ondrop" title="handler-ondrop">HTML elements</a>
     </td><td> <code title="event-drop"><a href="#event-drop">drop</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ondurationchange"> <code title="">ondurationchange</code>
     </th><td> <a href="#handler-ondurationchange" title="handler-ondurationchange">HTML elements</a>
     </td><td> <code title="event-media-durationchange"><a href="media-elements.html#event-media-durationchange">durationchange</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onemptied"> <code title="">onemptied</code>
     </th><td> <a href="#handler-onemptied" title="handler-onemptied">HTML elements</a>
     </td><td> <code title="event-media-emptied"><a href="media-elements.html#event-media-emptied">emptied</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onended"> <code title="">onended</code>
     </th><td> <a href="#handler-onended" title="handler-onended">HTML elements</a>
     </td><td> <code title="event-media-ended"><a href="media-elements.html#event-media-ended">ended</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onerror"> <code title="">onerror</code>
     </th><td> <code title="handler-window-onerror"><a href="#handler-window-onerror">body</a></code>
     </td><td> <code title="event-error">error</code> event handler for <code><a href="#window">Window</a></code> object, and handler for <a href="#runtime-script-errors">script error notifications</a>
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onerror"> <code title="">onerror</code>
     </th><td> <a href="#handler-onerror" title="handler-onerror">HTML elements</a>
     </td><td> <code title="event-error">error</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onfocus"> <code title="">onfocus</code>
     </th><td> <code title="handler-window-onfocus"><a href="#handler-window-onfocus">body</a></code>
     </td><td> <code title="event-focus">focus</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onfocus"> <code title="">onfocus</code>
     </th><td> <a href="#handler-onfocus" title="handler-onfocus">HTML elements</a>
     </td><td> <code title="event-focus">focus</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onhashchange"> <code title="">onhashchange</code>
     </th><td> <code title="handler-window-onhashchange"><a href="#handler-window-onhashchange">body</a></code>
     </td><td> <code title="event-hashchange"><a href="#event-hashchange">hashchange</a></code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-oninput"> <code title="">oninput</code>
     </th><td> <a href="#handler-oninput" title="handler-oninput">HTML elements</a>
     </td><td> <code title="event-input">input</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-oninvalid"> <code title="">oninvalid</code>
     </th><td> <a href="#handler-oninvalid" title="handler-oninvalid">HTML elements</a>
     </td><td> <code title="event-invalid">invalid</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onkeydown"> <code title="">onkeydown</code>
     </th><td> <a href="#handler-onkeydown" title="handler-onkeydown">HTML elements</a>
     </td><td> <code title="event-keydown">keydown</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onkeypress"> <code title="">onkeypress</code>
     </th><td> <a href="#handler-onkeypress" title="handler-onkeypress">HTML elements</a>
     </td><td> <code title="event-keypress">keypress</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onkeyup"> <code title="">onkeyup</code>
     </th><td> <a href="#handler-onkeyup" title="handler-onkeyup">HTML elements</a>
     </td><td> <code title="event-keyup">keyup</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onload"> <code title="">onload</code>
     </th><td> <code title="handler-window-onload"><a href="#handler-window-onload">body</a></code>
     </td><td> <code title="event-load">load</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onload"> <code title="">onload</code>
     </th><td> <a href="#handler-onload" title="handler-onload">HTML elements</a>
     </td><td> <code title="event-load">load</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onloadeddata"> <code title="">onloadeddata</code>
     </th><td> <a href="#handler-onloadeddata" title="handler-onloadeddata">HTML elements</a>
     </td><td> <code title="event-media-loadeddata"><a href="media-elements.html#event-media-loadeddata">loadeddata</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onloadedmetadata"> <code title="">onloadedmetadata</code>
     </th><td> <a href="#handler-onloadedmetadata" title="handler-onloadedmetadata">HTML elements</a>
     </td><td> <code title="event-media-loadedmetadata"><a href="media-elements.html#event-media-loadedmetadata">loadedmetadata</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onloadstart"> <code title="">onloadstart</code>
     </th><td> <a href="#handler-onloadstart" title="handler-onloadstart">HTML elements</a>
     </td><td> <code title="event-media-loadstart"><a href="media-elements.html#event-media-loadstart">loadstart</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onmessage"> <code title="">onmessage</code>
     </th><td> <code title="handler-window-onmessage"><a href="#handler-window-onmessage">body</a></code>
     </td><td> <code title="event-message">message</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onmousedown"> <code title="">onmousedown</code>
     </th><td> <a href="#handler-onmousedown" title="handler-onmousedown">HTML elements</a>
     </td><td> <code title="event-mousedown">mousedown</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onmousemove"> <code title="">onmousemove</code>
     </th><td> <a href="#handler-onmousemove" title="handler-onmousemove">HTML elements</a>
     </td><td> <code title="event-mousemove">mousemove</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onmouseout"> <code title="">onmouseout</code>
     </th><td> <a href="#handler-onmouseout" title="handler-onmouseout">HTML elements</a>
     </td><td> <code title="event-mouseout">mouseout</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onmouseover"> <code title="">onmouseover</code>
     </th><td> <a href="#handler-onmouseover" title="handler-onmouseover">HTML elements</a>
     </td><td> <code title="event-mouseover">mouseover</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onmouseup"> <code title="">onmouseup</code>
     </th><td> <a href="#handler-onmouseup" title="handler-onmouseup">HTML elements</a>
     </td><td> <code title="event-mouseup">mouseup</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onmousewheel"> <code title="">onmousewheel</code>
     </th><td> <a href="#handler-onmousewheel" title="handler-onmousewheel">HTML elements</a>
     </td><td> <code title="event-mousewheel">mousewheel</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onoffline"> <code title="">onoffline</code>
     </th><td> <code title="handler-window-onoffline"><a href="#handler-window-onoffline">body</a></code>
     </td><td> <code title="event-offline"><a href="#event-offline">offline</a></code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-ononline"> <code title="">ononline</code>
     </th><td> <code title="handler-window-ononline"><a href="#handler-window-ononline">body</a></code>
     </td><td> <code title="event-online"><a href="#event-online">online</a></code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onpagehide"> <code title="">onpagehide</code>
     </th><td> <code title="handler-window-onpagehide"><a href="#handler-window-onpagehide">body</a></code>
     </td><td> <code title="event-pagehide"><a href="#event-pagehide">pagehide</a></code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onpageshow"> <code title="">onpageshow</code>
     </th><td> <code title="handler-window-onpageshow"><a href="#handler-window-onpageshow">body</a></code>
     </td><td> <code title="event-pageshow"><a href="#event-pageshow">pageshow</a></code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onpause"> <code title="">onpause</code>
     </th><td> <a href="#handler-onpause" title="handler-onpause">HTML elements</a>
     </td><td> <code title="event-media-pause"><a href="media-elements.html#event-media-pause">pause</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onplay"> <code title="">onplay</code>
     </th><td> <a href="#handler-onplay" title="handler-onplay">HTML elements</a>
     </td><td> <code title="event-media-play"><a href="media-elements.html#event-media-play">play</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onplaying"> <code title="">onplaying</code>
     </th><td> <a href="#handler-onplaying" title="handler-onplaying">HTML elements</a>
     </td><td> <code title="event-media-playing"><a href="media-elements.html#event-media-playing">playing</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onpopstate"> <code title="">onpopstate</code>
     </th><td> <code title="handler-window-onpopstate"><a href="#handler-window-onpopstate">body</a></code>
     </td><td> <code title="event-popstate"><a href="#event-popstate">popstate</a></code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onprogress"> <code title="">onprogress</code>
     </th><td> <a href="#handler-onprogress" title="handler-onprogress">HTML elements</a>
     </td><td> <code title="event-media-progress"><a href="media-elements.html#event-media-progress">progress</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onratechange"> <code title="">onratechange</code>
     </th><td> <a href="#handler-onratechange" title="handler-onratechange">HTML elements</a>
     </td><td> <code title="event-media-ratechange"><a href="media-elements.html#event-media-ratechange">ratechange</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onreset"> <code title="">onreset</code>
     </th><td> <a href="#handler-onreset" title="handler-onreset">HTML elements</a>
     </td><td> <code title="event-reset">reset</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onresize"> <code title="">onresize</code>
     </th><td> <code title="handler-window-onresize"><a href="#handler-window-onresize">body</a></code>
     </td><td> <code title="event-resize">resize</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onscroll"> <code title="">onscroll</code>
     </th><td> <code title="handler-window-onscroll"><a href="#handler-window-onscroll">body</a></code>
     </td><td> <code title="event-scroll">scroll</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onscroll"> <code title="">onscroll</code>
     </th><td> <a href="#handler-onscroll" title="handler-onscroll">HTML elements</a>
     </td><td> <code title="event-scroll">scroll</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onseeked"> <code title="">onseeked</code>
     </th><td> <a href="#handler-onseeked" title="handler-onseeked">HTML elements</a>
     </td><td> <code title="event-media-seeked"><a href="media-elements.html#event-media-seeked">seeked</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onseeking"> <code title="">onseeking</code>
     </th><td> <a href="#handler-onseeking" title="handler-onseeking">HTML elements</a>
     </td><td> <code title="event-media-seeking"><a href="media-elements.html#event-media-seeking">seeking</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onselect"> <code title="">onselect</code>
     </th><td> <a href="#handler-onselect" title="handler-onselect">HTML elements</a>
     </td><td> <code title="event-select">select</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onshow"> <code title="">onshow</code>
     </th><td> <a href="#handler-onshow" title="handler-onshow">HTML elements</a>
     </td><td> <code title="event-show">show</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onstalled"> <code title="">onstalled</code>
     </th><td> <a href="#handler-onstalled" title="handler-onstalled">HTML elements</a>
     </td><td> <code title="event-media-stalled"><a href="media-elements.html#event-media-stalled">stalled</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onstorage"> <code title="">onstorage</code>
     </th><td> <code title="handler-window-onstorage"><a href="#handler-window-onstorage">body</a></code>
     </td><td> <code title="event-storage">storage</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onsubmit"> <code title="">onsubmit</code>
     </th><td> <a href="#handler-onsubmit" title="handler-onsubmit">HTML elements</a>
     </td><td> <code title="event-submit">submit</code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onsuspend"> <code title="">onsuspend</code>
     </th><td> <a href="#handler-onsuspend" title="handler-onsuspend">HTML elements</a>
     </td><td> <code title="event-media-suspend"><a href="media-elements.html#event-media-suspend">suspend</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-ontimeupdate"> <code title="">ontimeupdate</code>
     </th><td> <a href="#handler-ontimeupdate" title="handler-ontimeupdate">HTML elements</a>
     </td><td> <code title="event-media-timeupdate"><a href="media-elements.html#event-media-timeupdate">timeupdate</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-window-onunload"> <code title="">onunload</code>
     </th><td> <code title="handler-window-onunload"><a href="#handler-window-onunload">body</a></code>
     </td><td> <code title="event-unload">unload</code> event handler for <code><a href="#window">Window</a></code> object
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onvolumechange"> <code title="">onvolumechange</code>
     </th><td> <a href="#handler-onvolumechange" title="handler-onvolumechange">HTML elements</a>
     </td><td> <code title="event-media-volumechange"><a href="media-elements.html#event-media-volumechange">volumechange</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

    </td></tr><tr><th id="ix-handler-onwaiting"> <code title="">onwaiting</code>
     </th><td> <a href="#handler-onwaiting" title="handler-onwaiting">HTML elements</a>
     </td><td> <code title="event-media-waiting"><a href="media-elements.html#event-media-waiting">waiting</a></code> event handler
     </td><td> <a href="#event-handler-content-attributes" title="event handler content attributes">Event handler content attribute</a>

  </td></tr></tbody></table><!-- v2 for completeness: (also search for REFLECTIDL)
  <h3 class="no-num">Reflecting IDL attributes</h3>

  <p><i>This section is non-normative.</i></p>
  <table>
   <caption>List of <dfn>reflecting IDL attributes</dfn></caption>
   <thead>
    <tr>
     <th> Interface
     <th> Element(s)
     <th> IDL attribute
     <th> Reflects...
   <tbody>
    ...
    <tr>
     <td> <code>HTMLElement</code>
     <td> <span>HTML elements</span>
     <td> <code title="dom-contextMenu">contextMenu</code>
     <td> <code title="attr-contextmenu">contextmenu</code>
    <tr>
     <td> <code>HTMLOptionElement</code>
     <td> <code>option</code>
     <td> <code title="dom-option-text">text</code>
     <td> <code>textContent</code>
  </table>
  ( include option.text; textarea.defaultValue, and other attributes that "reflect" the element's textContent )
--><h3 class="no-num" id="element-interfaces">Element Interfaces</h3>

  <p><i>This section is non-normative.</i></p>
  <table><caption>List of interfaces for elements</caption>
   <thead><tr><th> Element(s)
     </th><th> Interface(s)
   </th></tr></thead><tbody><tr><td> <code><a href="the-a-element.html#the-a-element">a</a></code>
     </td><td> <code><a href="the-a-element.html#htmlanchorelement">HTMLAnchorElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-abbr-element.html#the-abbr-element">abbr</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-address-element.html#the-address-element">address</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-area-element.html#the-area-element">area</a></code>
     </td><td> <code><a href="the-area-element.html#htmlareaelement">HTMLAreaElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-article-element.html#the-article-element">article</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-aside-element.html#the-aside-element">aside</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-audio-element.html#the-audio-element">audio</a></code>
     </td><td> <code><a href="the-audio-element.html#htmlaudioelement">HTMLAudioElement</a></code> : <code><a href="media-elements.html#htmlmediaelement">HTMLMediaElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-b-element.html#the-b-element">b</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-base-element.html#the-base-element">base</a></code>
     </td><td> <code><a href="the-base-element.html#htmlbaseelement">HTMLBaseElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-bdi-element.html#the-bdi-element">bdi</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-bdo-element.html#the-bdo-element">bdo</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-blockquote-element.html#the-blockquote-element">blockquote</a></code>
     </td><td> <code><a href="the-blockquote-element.html#htmlquoteelement">HTMLQuoteElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-body-element.html#the-body-element">body</a></code>
     </td><td> <code><a href="the-body-element.html#htmlbodyelement">HTMLBodyElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-br-element.html#the-br-element">br</a></code>
     </td><td> <code><a href="the-br-element.html#htmlbrelement">HTMLBRElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-button-element.html#the-button-element">button</a></code>
     </td><td> <code><a href="the-button-element.html#htmlbuttonelement">HTMLButtonElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code>
     </td><td> <code><a href="the-canvas-element.html#htmlcanvaselement">HTMLCanvasElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-caption-element.html#the-caption-element">caption</a></code>
     </td><td> <code><a href="the-caption-element.html#htmltablecaptionelement">HTMLTableCaptionElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-cite-element.html#the-cite-element">cite</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-code-element.html#the-code-element">code</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-col-element.html#the-col-element">col</a></code>
     </td><td> <code><a href="the-colgroup-element.html#htmltablecolelement">HTMLTableColElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-colgroup-element.html#the-colgroup-element">colgroup</a></code>
     </td><td> <code><a href="the-colgroup-element.html#htmltablecolelement">HTMLTableColElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="#the-command-element">command</a></code>
     </td><td> <code><a href="#htmlcommandelement">HTMLCommandElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code>data</code>
     </td><td> <code>HTMLDataElement</code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-datalist-element.html#the-datalist-element">datalist</a></code>
     </td><td> <code><a href="the-datalist-element.html#htmldatalistelement">HTMLDataListElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-dd-element.html#the-dd-element">dd</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-del-element.html#the-del-element">del</a></code>
     </td><td> <code><a href="attributes-common-to-ins-and-del-elements.html#htmlmodelement">HTMLModElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="#the-details-element">details</a></code>
     </td><td> <code><a href="#htmldetailselement">HTMLDetailsElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-dfn-element.html#the-dfn-element">dfn</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="#the-dialog-element">dialog</a></code>
     </td><td> <code><a href="#htmldialogelement">HTMLDialogElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-div-element.html#the-div-element">div</a></code>
     </td><td> <code><a href="the-div-element.html#htmldivelement">HTMLDivElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-dl-element.html#the-dl-element">dl</a></code>
     </td><td> <code><a href="the-dl-element.html#htmldlistelement">HTMLDListElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-dt-element.html#the-dt-element">dt</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-em-element.html#the-em-element">em</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-embed-element.html#the-embed-element">embed</a></code>
     </td><td> <code><a href="the-embed-element.html#htmlembedelement">HTMLEmbedElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-fieldset-element.html#the-fieldset-element">fieldset</a></code>
     </td><td> <code><a href="the-fieldset-element.html#htmlfieldsetelement">HTMLFieldSetElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-figcaption-element.html#the-figcaption-element">figcaption</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-figure-element.html#the-figure-element">figure</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-footer-element.html#the-footer-element">footer</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-form-element.html#the-form-element">form</a></code>
     </td><td> <code><a href="the-form-element.html#htmlformelement">HTMLFormElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>
     </td><td> <code><a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>
     </td><td> <code><a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h3</a></code>
     </td><td> <code><a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h4</a></code>
     </td><td> <code><a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h5</a></code>
     </td><td> <code><a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-aside-element.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h6</a></code>
     </td><td> <code><a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-head-element.html#the-head-element">head</a></code>
     </td><td> <code><a href="the-head-element.html#htmlheadelement">HTMLHeadElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-header-element.html#the-header-element">header</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-hgroup-element.html#the-hgroup-element">hgroup</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-hr-element.html#the-hr-element">hr</a></code>
     </td><td> <code><a href="the-hr-element.html#htmlhrelement">HTMLHRElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-html-element.html#the-html-element">html</a></code>
     </td><td> <code><a href="the-html-element.html#htmlhtmlelement">HTMLHtmlElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-i-element.html#the-i-element">i</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-iframe-element.html#the-iframe-element">iframe</a></code>
     </td><td> <code><a href="the-iframe-element.html#htmliframeelement">HTMLIFrameElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-img-element.html#the-img-element">img</a></code>
     </td><td> <code><a href="the-img-element.html#htmlimageelement">HTMLImageElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-input-element.html#the-input-element">input</a></code>
     </td><td> <code><a href="the-input-element.html#htmlinputelement">HTMLInputElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-ins-element.html#the-ins-element">ins</a></code>
     </td><td> <code><a href="attributes-common-to-ins-and-del-elements.html#htmlmodelement">HTMLModElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-kbd-element.html#the-kbd-element">kbd</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-keygen-element.html#the-keygen-element">keygen</a></code>
     </td><td> <code><a href="the-keygen-element.html#htmlkeygenelement">HTMLKeygenElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-label-element.html#the-label-element">label</a></code>
     </td><td> <code><a href="the-label-element.html#htmllabelelement">HTMLLabelElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-legend-element.html#the-legend-element">legend</a></code>
     </td><td> <code><a href="the-legend-element.html#htmllegendelement">HTMLLegendElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-li-element.html#the-li-element">li</a></code>
     </td><td> <code><a href="the-li-element.html#htmllielement">HTMLLIElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-link-element.html#the-link-element">link</a></code>
     </td><td> <code><a href="the-link-element.html#htmllinkelement">HTMLLinkElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-map-element.html#the-map-element">map</a></code>
     </td><td> <code><a href="the-map-element.html#htmlmapelement">HTMLMapElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-mark-element.html#the-mark-element">mark</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="#the-menu-element">menu</a></code>
     </td><td> <code><a href="#htmlmenuelement">HTMLMenuElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-meta-element.html#the-meta-element">meta</a></code>
     </td><td> <code><a href="the-meta-element.html#htmlmetaelement">HTMLMetaElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-meter-element.html#the-meter-element">meter</a></code>
     </td><td> <code><a href="the-meter-element.html#htmlmeterelement">HTMLMeterElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-nav-element.html#the-nav-element">nav</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-noscript-element.html#the-noscript-element">noscript</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-object-element.html#the-object-element">object</a></code>
     </td><td> <code><a href="the-object-element.html#htmlobjectelement">HTMLObjectElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-ol-element.html#the-ol-element">ol</a></code>
     </td><td> <code><a href="the-ol-element.html#htmlolistelement">HTMLOListElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-optgroup-element.html#the-optgroup-element">optgroup</a></code>
     </td><td> <code><a href="the-optgroup-element.html#htmloptgroupelement">HTMLOptGroupElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-option-element.html#the-option-element">option</a></code>
     </td><td> <code><a href="the-option-element.html#htmloptionelement">HTMLOptionElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-output-element.html#the-output-element">output</a></code>
     </td><td> <code><a href="the-output-element.html#htmloutputelement">HTMLOutputElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-p-element.html#the-p-element">p</a></code>
     </td><td> <code><a href="the-p-element.html#htmlparagraphelement">HTMLParagraphElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-param-element.html#the-param-element">param</a></code>
     </td><td> <code><a href="the-param-element.html#htmlparamelement">HTMLParamElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-pre-element.html#the-pre-element">pre</a></code>
     </td><td> <code><a href="the-pre-element.html#htmlpreelement">HTMLPreElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-progress-element.html#the-progress-element">progress</a></code>
     </td><td> <code><a href="the-progress-element.html#htmlprogresselement">HTMLProgressElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-q-element.html#the-q-element">q</a></code>
     </td><td> <code><a href="the-blockquote-element.html#htmlquoteelement">HTMLQuoteElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-rp-element.html#the-rp-element">rp</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-rt-element.html#the-rt-element">rt</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-ruby-element.html#the-ruby-element">ruby</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-s-element.html#the-s-element">s</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-samp-element.html#the-samp-element">samp</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-script-element.html#the-script-element">script</a></code>
     </td><td> <code><a href="the-script-element.html#htmlscriptelement">HTMLScriptElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-section-element.html#the-section-element">section</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-select-element.html#the-select-element">select</a></code>
     </td><td> <code><a href="the-select-element.html#htmlselectelement">HTMLSelectElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-small-element.html#the-small-element">small</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-source-element.html#the-source-element">source</a></code>
     </td><td> <code><a href="the-source-element.html#htmlsourceelement">HTMLSourceElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-span-element.html#the-span-element">span</a></code>
     </td><td> <code><a href="the-span-element.html#htmlspanelement">HTMLSpanElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-strong-element.html#the-strong-element">strong</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-style-element.html#the-style-element">style</a></code>
     </td><td> <code><a href="the-style-element.html#htmlstyleelement">HTMLStyleElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sub</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="#the-summary-element">summary</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-sub-and-sup-elements.html#the-sub-and-sup-elements">sup</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-table-element.html#the-table-element">table</a></code>
     </td><td> <code><a href="the-table-element.html#htmltableelement">HTMLTableElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-tbody-element.html#the-tbody-element">tbody</a></code>
     </td><td> <code><a href="the-tbody-element.html#htmltablesectionelement">HTMLTableSectionElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-td-element.html#the-td-element">td</a></code>
     </td><td> <code><a href="the-td-element.html#htmltabledatacellelement">HTMLTableDataCellElement</a></code> : <code><a href="attributes-common-to-td-and-th-elements.html#htmltablecellelement">HTMLTableCellElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
     </td><td> <code><a href="the-textarea-element.html#htmltextareaelement">HTMLTextAreaElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-tfoot-element.html#the-tfoot-element">tfoot</a></code>
     </td><td> <code><a href="the-tbody-element.html#htmltablesectionelement">HTMLTableSectionElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-th-element.html#the-th-element">th</a></code>
     </td><td> <code><a href="the-th-element.html#htmltableheadercellelement">HTMLTableHeaderCellElement</a></code> : <code><a href="attributes-common-to-td-and-th-elements.html#htmltablecellelement">HTMLTableCellElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-thead-element.html#the-thead-element">thead</a></code>
     </td><td> <code><a href="the-tbody-element.html#htmltablesectionelement">HTMLTableSectionElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-time-element.html#the-time-element">time</a></code>
     </td><td> <code><a href="the-time-element.html#htmltimeelement">HTMLTimeElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-title-element.html#the-title-element">title</a></code>
     </td><td> <code><a href="the-title-element.html#htmltitleelement">HTMLTitleElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-tr-element.html#the-tr-element">tr</a></code>
     </td><td> <code><a href="the-tr-element.html#htmltablerowelement">HTMLTableRowElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-track-element.html#the-track-element">track</a></code>
     </td><td> <code><a href="the-track-element.html#htmltrackelement">HTMLTrackElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-u-element.html#the-u-element">u</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-ul-element.html#the-ul-element">ul</a></code>
     </td><td> <code><a href="the-ul-element.html#htmlulistelement">HTMLUListElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-var-element.html#the-var-element">var</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-video-element.html#the-video-element">video</a></code>
     </td><td> <code><a href="the-video-element.html#htmlvideoelement">HTMLVideoElement</a></code> : <code><a href="media-elements.html#htmlmediaelement">HTMLMediaElement</a></code> : <code><a href="elements.html#htmlelement">HTMLElement</a></code>

    </td></tr><tr><td> <code><a href="the-wbr-element.html#the-wbr-element">wbr</a></code>
     </td><td> <code><a href="elements.html#htmlelement">HTMLElement</a></code>

  </td></tr></tbody></table><h3 class="no-num" id="all-interfaces">All Interfaces</h3>

  <p><i>This section is non-normative.</i></p>
  <ul><li><code><a href="#applicationcache">ApplicationCache</a></code>
 </li><li><code><a href="media-elements.html#audiotrack">AudioTrack</a></code>
 </li><li><code><a href="media-elements.html#audiotracklist">AudioTrackList</a></code>
 </li><li><code><a href="#barprop">BarProp</a></code>
 </li><li><code><a href="#beforeunloadevent">BeforeUnloadEvent</a></code>
 </li><li><code><a href="common-dom-interfaces.html#domstringmap-0">DOMStringMap</a></code>
 </li><li><code><a href="#datatransfer">DataTransfer</a></code>
 </li><li><code><a href="#datatransferitem">DataTransferItem</a></code>
 </li><li><code><a href="#datatransferitemlist">DataTransferItemList</a></code>
 </li><li><code>Document</code>, <a href="dom.html#document">partial</a>
 </li><li><code><a href="#dragevent">DragEvent</a></code>
 </li><li><code><a href="#external">External</a></code>
 </li><li><code><a href="#functionstringcallback">FunctionStringCallback</a></code>
 </li><li><code><a href="common-dom-interfaces.html#htmlallcollection-0">HTMLAllCollection</a></code>
 </li><li><code><a href="the-a-element.html#htmlanchorelement">HTMLAnchorElement</a></code>
 </li><li><code><a href="#htmlappletelement">HTMLAppletElement</a></code>
 </li><li><code><a href="the-area-element.html#htmlareaelement">HTMLAreaElement</a></code>
 </li><li><code><a href="the-audio-element.html#htmlaudioelement">HTMLAudioElement</a></code>
 </li><li><code><a href="the-br-element.html#htmlbrelement">HTMLBRElement</a></code>
 </li><li><code><a href="the-base-element.html#htmlbaseelement">HTMLBaseElement</a></code>
 </li><li><code><a href="#htmlbasefontelement">HTMLBaseFontElement</a></code>
 </li><li><code><a href="the-body-element.html#htmlbodyelement">HTMLBodyElement</a></code>
 </li><li><code><a href="the-button-element.html#htmlbuttonelement">HTMLButtonElement</a></code>
 </li><li><code><a href="the-canvas-element.html#htmlcanvaselement">HTMLCanvasElement</a></code>
 </li><li><code><a href="#htmlcommandelement">HTMLCommandElement</a></code>
 </li><li><code><a href="the-dl-element.html#htmldlistelement">HTMLDListElement</a></code>
 </li><li><code><a href="the-datalist-element.html#htmldatalistelement">HTMLDataListElement</a></code>
 </li><li><code><a href="#htmldetailselement">HTMLDetailsElement</a></code>
 </li><li><code><a href="#htmldialogelement">HTMLDialogElement</a></code>
 </li><li><code><a href="#htmldirectoryelement">HTMLDirectoryElement</a></code>
 </li><li><code><a href="the-div-element.html#htmldivelement">HTMLDivElement</a></code>
 </li><li><code><a href="elements.html#htmlelement">HTMLElement</a></code>
 </li><li><code><a href="the-embed-element.html#htmlembedelement">HTMLEmbedElement</a></code>
 </li><li><code><a href="the-fieldset-element.html#htmlfieldsetelement">HTMLFieldSetElement</a></code>
 </li><li><code><a href="#htmlfontelement">HTMLFontElement</a></code>
 </li><li><code><a href="common-dom-interfaces.html#htmlformcontrolscollection-0">HTMLFormControlsCollection</a></code>
 </li><li><code><a href="the-form-element.html#htmlformelement">HTMLFormElement</a></code>
 </li><li><code><a href="#htmlframeelement">HTMLFrameElement</a></code>
 </li><li><code><a href="#htmlframesetelement">HTMLFrameSetElement</a></code>
 </li><li><code><a href="the-hr-element.html#htmlhrelement">HTMLHRElement</a></code>
 </li><li><code><a href="the-head-element.html#htmlheadelement">HTMLHeadElement</a></code>
 </li><li><code><a href="the-aside-element.html#htmlheadingelement">HTMLHeadingElement</a></code>
 </li><li><code><a href="the-html-element.html#htmlhtmlelement">HTMLHtmlElement</a></code>
 </li><li><code><a href="the-iframe-element.html#htmliframeelement">HTMLIFrameElement</a></code>
 </li><li><code><a href="the-img-element.html#htmlimageelement">HTMLImageElement</a></code>
 </li><li><code><a href="the-input-element.html#htmlinputelement">HTMLInputElement</a></code>
 </li><li><code><a href="the-keygen-element.html#htmlkeygenelement">HTMLKeygenElement</a></code>
 </li><li><code><a href="the-li-element.html#htmllielement">HTMLLIElement</a></code>
 </li><li><code><a href="the-label-element.html#htmllabelelement">HTMLLabelElement</a></code>
 </li><li><code><a href="the-legend-element.html#htmllegendelement">HTMLLegendElement</a></code>
 </li><li><code><a href="the-link-element.html#htmllinkelement">HTMLLinkElement</a></code>
 </li><li><code><a href="the-map-element.html#htmlmapelement">HTMLMapElement</a></code>
 </li><li><code><a href="#htmlmarqueeelement">HTMLMarqueeElement</a></code>
 </li><li><code><a href="media-elements.html#htmlmediaelement">HTMLMediaElement</a></code>
 </li><li><code><a href="#htmlmenuelement">HTMLMenuElement</a></code>
 </li><li><code><a href="the-meta-element.html#htmlmetaelement">HTMLMetaElement</a></code>
 </li><li><code><a href="the-meter-element.html#htmlmeterelement">HTMLMeterElement</a></code>
 </li><li><code><a href="attributes-common-to-ins-and-del-elements.html#htmlmodelement">HTMLModElement</a></code>
 </li><li><code><a href="the-ol-element.html#htmlolistelement">HTMLOListElement</a></code>
 </li><li><code><a href="the-object-element.html#htmlobjectelement">HTMLObjectElement</a></code>
 </li><li><code><a href="the-optgroup-element.html#htmloptgroupelement">HTMLOptGroupElement</a></code>
 </li><li><code><a href="the-option-element.html#htmloptionelement">HTMLOptionElement</a></code>
 </li><li><code><a href="common-dom-interfaces.html#htmloptionscollection-0">HTMLOptionsCollection</a></code>
 </li><li><code><a href="the-output-element.html#htmloutputelement">HTMLOutputElement</a></code>
 </li><li><code><a href="the-p-element.html#htmlparagraphelement">HTMLParagraphElement</a></code>
 </li><li><code><a href="the-param-element.html#htmlparamelement">HTMLParamElement</a></code>
 </li><li><code><a href="the-pre-element.html#htmlpreelement">HTMLPreElement</a></code>
 </li><li><code><a href="the-progress-element.html#htmlprogresselement">HTMLProgressElement</a></code>
 </li><li><code><a href="the-blockquote-element.html#htmlquoteelement">HTMLQuoteElement</a></code>
 </li><li><code><a href="the-script-element.html#htmlscriptelement">HTMLScriptElement</a></code>
 </li><li><code><a href="the-select-element.html#htmlselectelement">HTMLSelectElement</a></code>
 </li><li><code><a href="the-source-element.html#htmlsourceelement">HTMLSourceElement</a></code>
 </li><li><code><a href="the-span-element.html#htmlspanelement">HTMLSpanElement</a></code>
 </li><li><code><a href="the-style-element.html#htmlstyleelement">HTMLStyleElement</a></code>
 </li><li><code><a href="the-caption-element.html#htmltablecaptionelement">HTMLTableCaptionElement</a></code>
 </li><li><code><a href="attributes-common-to-td-and-th-elements.html#htmltablecellelement">HTMLTableCellElement</a></code>
 </li><li><code><a href="the-colgroup-element.html#htmltablecolelement">HTMLTableColElement</a></code>
 </li><li><code><a href="the-td-element.html#htmltabledatacellelement">HTMLTableDataCellElement</a></code>
 </li><li><code><a href="the-table-element.html#htmltableelement">HTMLTableElement</a></code>
 </li><li><code><a href="the-th-element.html#htmltableheadercellelement">HTMLTableHeaderCellElement</a></code>
 </li><li><code><a href="the-tr-element.html#htmltablerowelement">HTMLTableRowElement</a></code>
 </li><li><code><a href="the-tbody-element.html#htmltablesectionelement">HTMLTableSectionElement</a></code>
 </li><li><code><a href="the-textarea-element.html#htmltextareaelement">HTMLTextAreaElement</a></code>
 </li><li><code><a href="the-time-element.html#htmltimeelement">HTMLTimeElement</a></code>
 </li><li><code><a href="the-title-element.html#htmltitleelement">HTMLTitleElement</a></code>
 </li><li><code><a href="the-track-element.html#htmltrackelement">HTMLTrackElement</a></code>
 </li><li><code><a href="the-ul-element.html#htmlulistelement">HTMLUListElement</a></code>
 </li><li><code><a href="elements.html#htmlunknownelement">HTMLUnknownElement</a></code>
 </li><li><code><a href="the-video-element.html#htmlvideoelement">HTMLVideoElement</a></code>
 </li><li><code><a href="#hashchangeevent">HashChangeEvent</a></code>
 </li><li><code><a href="#history-1">History</a></code>
 </li><li><code><a href="#location">Location</a></code>
 </li><li><code><a href="media-elements.html#mediacontroller">MediaController</a></code>
 </li><li><code><a href="media-elements.html#mediaerror">MediaError</a></code>
 </li><li><code><a href="#navigator">Navigator</a></code>
 </li><li><code><a href="#navigatorcontentutils">NavigatorContentUtils</a></code>
 </li><li><code><a href="#navigatorid">NavigatorID</a></code>
 </li><li><code><a href="#navigatoronline">NavigatorOnLine</a></code>
 </li><li><code><a href="#navigatorstorageutils">NavigatorStorageUtils</a></code>
 </li><li><code><a href="#pagetransitionevent">PageTransitionEvent</a></code>
 </li><li><code><a href="#popstateevent">PopStateEvent</a></code>
 </li><li><code><a href="common-dom-interfaces.html#radionodelist">RadioNodeList</a></code>
 </li><li><code><a href="media-elements.html#texttrack">TextTrack</a></code>
 </li><li><code><a href="media-elements.html#texttrackcue">TextTrackCue</a></code>
 </li><li><code><a href="media-elements.html#texttrackcuelist">TextTrackCueList</a></code>
 </li><li><code><a href="media-elements.html#texttracklist">TextTrackList</a></code>
 </li><li><code><a href="media-elements.html#timeranges">TimeRanges</a></code>
 </li><li><code><a href="media-elements.html#trackevent">TrackEvent</a></code>
 </li><li><code><a href="common-dom-interfaces.html#transferable">Transferable</a></code>
 </li><li><code><a href="#validitystate">ValidityState</a></code>
 </li><li><code><a href="media-elements.html#videotrack">VideoTrack</a></code>
 </li><li><code><a href="media-elements.html#videotracklist">VideoTrackList</a></code>
 </li><li><code><a href="#window">Window</a></code>
 </li><li><code><a href="#windowbase64">WindowBase64</a></code>
 </li><li><code><a href="#windowmodal">WindowModal</a></code>
 </li><li><code><a href="#windowtimers">WindowTimers</a></code>
 </li><li><code>XMLDocument</code>, <a href="dom.html#xmldocument">partial</a>
</li></ul><!-- (only has events from HTML5) --><h3 class="no-num" id="events-0">Events</h3>

  <p><i>This section is non-normative.</i></p>
  <table><caption>List of events</caption>
   <thead><tr><th> Event
     </th><th> Interface
     </th><th> Description
   </th></tr></thead><tbody><tr><td> <code title="event-abort">abort</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the download was aborted by the user

    </td></tr><tr><td> <code title="event-afterprint">afterprint</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> after printing

    </td></tr><tr><td> <code title="event-beforeprint">beforeprint</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> before printing

    </td></tr><tr><td> <code title="event-beforeunload">beforeunload</code>
     </td><td> <code><a href="#beforeunloadevent">BeforeUnloadEvent</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the page is about to be unloaded, in case the page would like to show a warning prompt

    </td></tr><tr><td> <code title="event-blur">blur</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at nodes losing focus

    </td></tr><tr><td> <code title="event-change">change</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at controls when the user commits a value change

    </td></tr><tr><td> <code title="event-click"><a href="infrastructure.html#event-click">click</a></code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at an element before its <a href="content-models.html#activation-behavior">activation behavior</a> is run

    </td></tr><tr><td> <code title="event-contextmenu">contextmenu</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at elements when the user requests their context menu

    </td></tr><tr><td> <code title="event-DOMContentLoaded">DOMContentLoaded</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="dom.html#document">Document</a></code> once the parser has finished

    </td></tr><tr><td> <code title="event-error">error</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at elements when network and script errors occur

    </td></tr><tr><td> <code title="event-focus">focus</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at nodes gaining focus

    </td></tr><tr><td> <code title="event-hashchange"><a href="#event-hashchange">hashchange</a></code>
     </td><td> <code><a href="#hashchangeevent">HashChangeEvent</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the fragment identifier part of <a href="dom.html#the-document's-address">the document's address</a> changes

    </td></tr><tr><td> <code title="event-input">input</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at controls when the user changes the value

    </td></tr><tr><td> <code title="event-invalid">invalid</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at controls during form validation if they do not satisfy their constraints

    </td></tr><tr><td> <code title="event-load">load</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the document has finished loading; fired at an element containing a resource (e.g. <code><a href="the-img-element.html#the-img-element">img</a></code>, <code><a href="the-embed-element.html#the-embed-element">embed</a></code>) when its resource has finished loading

    </td></tr><tr><td> <code title="event-message">message</code>
     </td><td> <code>MessageEvent</code>
     </td><td> Fired at an object when the object receives a message

    </td></tr><tr><td> <code title="event-offline"><a href="#event-offline">offline</a></code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the network connections fails

    </td></tr><tr><td> <code title="event-online"><a href="#event-online">online</a></code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the network connections returns

    </td></tr><tr><td> <code title="event-pagehide"><a href="#event-pagehide">pagehide</a></code>
     </td><td> <code><a href="#pagetransitionevent">PageTransitionEvent</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the page's entry in the <a href="#session-history">session history</a> stops being the <a href="#current-entry">current entry</a>

    </td></tr><tr><td> <code title="event-pageshow"><a href="#event-pageshow">pageshow</a></code>
     </td><td> <code><a href="#pagetransitionevent">PageTransitionEvent</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the page's entry in the <a href="#session-history">session history</a> becomes the <a href="#current-entry">current entry</a>

    </td></tr><tr><td> <code title="event-popstate"><a href="#event-popstate">popstate</a></code>
     </td><td> <code><a href="#popstateevent">PopStateEvent</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> when the user navigates the <a href="#session-history">session history</a>

    </td></tr><tr><td> <code title="event-readystatechange"><a href="dom.html#event-readystatechange">readystatechange</a></code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="dom.html#document">Document</a></code> when it finishes parsing and again when all its subresources have finished loading

    </td></tr><tr><td> <code title="event-reset">reset</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at a <code><a href="the-form-element.html#the-form-element">form</a></code> element when it is <a href="#concept-form-reset" title="concept-form-reset">reset</a>

    </td></tr><tr><td> <code title="event-show">show</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at a <code><a href="#the-menu-element">menu</a></code> element when it is shown as a context menu

    </td></tr><tr><td> <code title="event-submit">submit</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at a <code><a href="the-form-element.html#the-form-element">form</a></code> element when it is <a href="#concept-form-submit" title="concept-form-submit">submitted</a>

    </td></tr><tr><td> <code title="event-unload">unload</code>
     </td><td> <code><a href="infrastructure.html#event">Event</a></code>
     </td><td> Fired at the <code><a href="#window">Window</a></code> object when the page is going away

  </td></tr></tbody></table><p class="note">See also <a href="media-elements.html#mediaevents">media element
  events</a>, <a href="#appcacheevents">application cache events</a>,
  and <a href="#dndevents">drag-and-drop events</a>.</p>



  <h2 class="no-num" id="references">References</h2><!--REFS-->

  <p>All references are normative unless marked "Non-normative".</p>

  <!-- Dates are only included for standards older than the Web, because the newer ones keep changing. -->

  <dl><!--REFERENCES ON--><dt id="refs2DCONTEXT">[2DCONTEXT]</dt>
   <dd><cite><a href="http://dev.w3.org/html5/2dcontext/">HTML Canvas
   2D Context</a></cite>, I. Hickson. W3C.</dd>

   <dt id="refsABNF">[ABNF]</dt>
   <dd><cite><a href="http://www.ietf.org/rfc/std/std68.txt">Augmented
   BNF for Syntax Specifications: ABNF</a></cite>, D. Crocker,
   P. Overell. IETF.</dd>

   <dt id="refsABOUT">[ABOUT]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/draft-ietf-appsawg-about-uri-scheme">The 'about' URI scheme</a></cite>, L. Hunt, M. Yevstifeyev. IETF.
   Work in progress. <!--!-->
   </dd>

   <dt id="refsAES128CTR">[AES128CTR]</dt>
   <dd><cite><a href="http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf">Advanced Encryption Standard (AES)</a></cite>. NIST.</dd>

   <dt id="refsARIA">[ARIA]</dt>
   <dd><cite><a href="http://www.w3.org/WAI/PF/aria/">Accessible Rich
   Internet Applications (WAI-ARIA)</a></cite>, J. Craig, M. Cooper, L. Pappas,
   R. Schwerdtfeger, L. Seeman. W3C.</dd>

   <dt id="refsARIAIMPL">[ARIAIMPL]</dt>
   <dd><cite><a href="http://www.w3.org/WAI/PF/aria-implementation/">WAI-ARIA 1.0
   User Agent Implementation Guide</a></cite>, A. Snow-Weaver,
   M. Cooper. W3C.</dd>

   <dt id="refsATAG">[ATAG]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/ATAG20/">Authoring Tool Accessibility
   Guidelines (ATAG) 2.0</a></cite>, J. Richards, J. Spellman,
   J. Treviranus. W3C.</dd>

   <dt id="refsATOM">[ATOM]</dt>
   <dd>(Non-normative) <cite><a href="http://tools.ietf.org/html/rfc4287">The Atom Syndication
   Format</a></cite>, M. Nottingham, R. Sayre. IETF.</dd>

   <dt id="refsBCP47">[BCP47]</dt>
   <dd><cite><a href="http://www.ietf.org/rfc/bcp/bcp47.txt">Tags for
   Identifying Languages; Matching of Language Tags</a></cite>,
   A. Phillips, M. Davis. IETF.</dd>

   <dt id="refsBECSS">[BECSS]</dt>
   <dd><cite><a href="http://www.w3.org/TR/becss/">Behavioral
   Extensions to CSS</a></cite>, I. Hickson. W3C.</dd>

   <dt id="refsBEZIER">[BEZIER]</dt>
   <dd><cite>Courbes &#224; poles</cite>, P. de Casteljau. INPI, 1959.</dd>

   <dt id="refsBIDI">[BIDI]</dt>
   <dd><cite><a href="http://www.unicode.org/reports/tr9/">UAX #9: Unicode
   Bidirectional Algorithm</a></cite>, M. Davis. Unicode Consortium.</dd>

   <dt id="refsBIG5">[BIG5]</dt>
   <dd>(Non-normative) <cite>Chinese Coded Character Set in Computer</cite>. Institute
   for Information Industry, March 1984.</dd>

   <dt id="refsBOCU1">[BOCU1]</dt>
   <dd>(Non-normative) <cite><a href="http://www.unicode.org/notes/tn6/">UTN #6: BOCU-1:
   MIME-Compatible Unicode Compression</a></cite>, M. Scherer,
   M. Davis. Unicode Consortium.</dd>

   <dt id="refsCESU8">[CESU8]</dt>
   <dd>(Non-normative) <cite><a href="http://www.unicode.org/reports/tr26/">UTR #26: Compatibility
   Encoding Scheme For UTF-16: 8-BIT (CESU-8)</a></cite>,
   T. Phipps. Unicode Consortium.</dd>

   <dt id="refsCHARMOD">[CHARMOD]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/charmod/">Character Model for the World
   Wide Web 1.0: Fundamentals</a></cite>, M. D&#252;rst, F. Yergeau,
   R. Ishida, M. Wolf, T. Texin. W3C.</dd>

   <dt id="refsCLDR">[CLDR]</dt>
   <dd><cite><a href="http://cldr.unicode.org/">Unicode Common Locale Data Repository</a></cite>. Unicode.</dd>

   <dt id="refsCOMPUTABLE">[COMPUTABLE]</dt>
   <dd>(Non-normative) <cite><a href="http://www.turingarchive.org/browse.php/B/12">On computable
   numbers, with an application to the
   Entscheidungsproblem</a></cite>, A. Turing. In <cite>Proceedings of
   the London Mathematical Society</cite>, series 2, volume 42, pages
   230-265. London Mathematical Society, 1937.</dd>

   <dt id="refsCOOKIES">[COOKIES]</dt>
   <!--
   <dd><cite><a href="http://tools.ietf.org/html/rfc2109">HTTP State Management Mechanism</a></cite>, D. Kristol, L. Montulli. IETF.</dd>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2965">HTTP State Management Mechanism</a></cite>, D. Kristol, L. Montulli. IETF.</dd>
   -->
   <dd><cite><a href="http://tools.ietf.org/html/rfc6265">HTTP State Management Mechanism</a></cite>, A. Barth. IETF.</dd>

   <dt id="refsCORS">[CORS]</dt>
   <!--
   <dd><cite><a href="http://www.w3.org/TR/cors/">Cross-Origin
   Resource Sharing</a></cite>, A. van Kesteren. W3C.</dd>
   -->
   <dd><cite><a href="http://dev.w3.org/2006/waf/access-control/">Cross-Origin
   Resource Sharing</a></cite>, A. van Kesteren. W3C.</dd>

   <dt id="refsCP50220">[CP50220]</dt>
   <dd><cite><a href="http://www.iana.org/assignments/charset-reg/CP50220">CP50220</a></cite>,
   Y. Naruse. IANA.</dd> <!-- really should be "NARUSE, Y." or some
   such, but there's a western bias to these references for
   consistency. sorry. -->

   <dt id="refsCP51932">[CP51932]</dt>
   <dd><cite><a href="http://www.iana.org/assignments/charset-reg/CP51932">CP51932</a></cite>,
   Y. Naruse. IANA.</dd> <!-- really should be "NARUSE, Y." or some
   such, but there's a western bias to these references for
   consistency. sorry. -->

   <dt id="refsCSP">[CSP]</dt>
   <dd>(Non-normative) <cite><a href="http://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html">Content Security Policy</a></cite>, B. Sterne, A. Barth. W3C.</dd>

   <dt id="refsCSS">[CSS]</dt>
   <dd><cite><a href="http://www.w3.org/TR/CSS2/">Cascading Style Sheets Level 2 Revision 1</a></cite>, B. Bos, T. &#199;elik, I. Hickson, H. Lie. W3C.</dd>

   <dt id="refsCSSATTR">[CSSATTR]</dt>
   <dd><cite><a href="http://dev.w3.org/csswg/css-style-attr/">CSS Styling Attribute Syntax</a></cite>, T. &#199;elik, E. Etemad. W3C.</dd>

   <dt id="refsCSSCOLOR">[CSSCOLOR]</dt>
   <!--
   <dd><cite><a href="http://www.w3.org/TR/css3-color/">CSS Color
   Module Level 3</a></cite>, T. &Ccedil;elik, C. Lilley, L.
   Baron. W3C.</dd>
   -->
   <dd><cite><a href="http://dev.w3.org/csswg/css3-color/">CSS Color
   Module Level 3</a></cite>, T. &#199;elik, C. Lilley, L.
   Baron. W3C.</dd>

   <dt id="refsCSSFONTS">[CSSFONTS]</dt>
   <dd><cite><a href="http://www.w3.org/TR/css3-fonts/">CSS Fonts
   Module Level 3</a></cite>, J. Daggett. W3C.</dd>

   <dt id="refsCSSIMAGES">[CSSIMAGES]</dt>
   <dd><cite><a href="http://dev.w3.org/csswg/css3-images/">CSS Image
   Values and Replaced Content Module Level 3</a></cite>, E. Etemad,
   T. Atkins. W3C.</dd>

   <dt id="refsCSSOM">[CSSOM]</dt>
   <dd><cite><a href="http://dev.w3.org/csswg/cssom/">Cascading Style Sheets
   Object Model (CSSOM)</a></cite>, A. van Kesteren. W3C.</dd>

   <dt id="refsCSSOMVIEW">[CSSOMVIEW]</dt>
   <dd><cite><a href="http://dev.w3.org/csswg/cssom-view/">CSSOM View
   Module</a></cite>, A. van Kesteren. W3C.</dd>

   <dt id="refsCSSRUBY">[CSSRUBY]</dt>
   <dd><cite><a href="http://dev.w3.org/csswg/css3-ruby/">CSS3 Ruby Module</a></cite>, R. Ishida. W3C.</dd>

   <dt id="refsCSSUI">[CSSUI]</dt>
   <dd><cite><a href="http://dev.w3.org/csswg/css3-ui/">CSS3 Basic User Interface Module</a></cite>, T. &#199;elik. W3C.</dd>

   <dt id="refsCSSVALUES">[CSSVALUES]</dt>
   <dd><cite><a href="http://dev.w3.org/csswg/css3-values/">CSS3 Values and Units</a></cite>, H. Lie, T. Atkins, E. Etemad. W3C.</dd>

   <dt id="refsDASH">[DASH]</dt>
   <dd><cite><a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=57623">Dynamic adaptive streaming over HTTP (DASH)</a></cite>. ISO.</dd>

   <dt id="refsDOM2HTML">[DOM2HTML]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/DOM-Level-2-HTML/">Document Object Model (DOM) Level 2 HTML Specification</a></cite>, J. Stenback, P. Le H&#233;garet, A. Le Hors. W3C.</dd>

   <dt id="refsDOMCORE">[DOMCORE]</dt>
   <dd><cite><a href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html">Web DOM Core</a></cite>, A. van Kesteren. W3C.</dd>

   <dt id="refsDOMEVENTS">[DOMEVENTS]</dt>
   <dd><cite><a href="http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html">Document Object Model (DOM) Level 3 Events Specification</a></cite>, T. Leithead, J. Rossi, D. Schepers, B. H&#246;hrmann, P. Le H&#233;garet, T. Pixley. W3C.</dd>

   <dt id="refsDOMPARSING">[DOMPARSING]</dt>
   <dd><cite><a href="http://dvcs.w3.org/hg/innerhtml/raw-file/tip/index.html">DOM Parsing and Serialization</a></cite>, T. Leithead. Work in Progress. W3C.</dd>

   <dt id="refsDOT">[DOT]</dt>
   <dd>(Non-normative) <cite><a href="http://www.graphviz.org/content/dot-language">The DOT Language</a></cite>. Graphviz.</dd>

   <dt id="refsE163">[E163]</dt>
   <dd><cite>Recommendation E.163 &#8212; Numbering Plan for The International Telephone Service</cite>, CCITT Blue Book, Fascicle II.2, pp. 128-134, November 1988.</dd>

   <dt id="refsECMA262">[ECMA262]</dt>
   <dd><cite><a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">ECMAScript Language Specification</a></cite>. ECMA.</dd>

   <dt id="refsECMA357">[ECMA357]</dt>
   <dd>(Non-normative) <cite><a href="http://www.ecma-international.org/publications/standards/Ecma-357.htm">ECMAScript for XML (E4X) Specification</a></cite>. ECMA.</dd>

   <dt id="refsEDITING">[EDITING]</dt>
   <dd><cite><a href="http://aryeh.name/spec/editing/editing.html">HTML Editing APIs</a></cite>, A. Gregor.</dd>

   <dt id="refsEUCKR">[EUCKR]</dt>
   <dd><cite>Hangul Unix Environment</cite>. Korea Industrial Standards Association. Ref. No. KS C 5861-1992.</dd>

   <dt id="refsEUCJP">[EUCJP]</dt>
   <dd><cite>Definition and Notes of Japanese EUC</cite>. UI-OSF-USLP. In English in the abridged translation of the <a href="http://home.m05.itscom.net/numa/uocjleE.pdf">UI-OSF Application Platform Profile for Japanese Environment</a>, Appendix C.</dd>

   <dt id="refsEVENTSOURCE">[EVENTSOURCE]</dt>
   <!--
   <dd><cite><a href="http://www.w3.org/TR/eventsource/">Server-Sent
   Events</a></cite>, I. Hickson. W3C.</dd>
   -->
   <dd><cite><a href="http://dev.w3.org/html5/eventsource/">Server-Sent
   Events</a></cite>, I. Hickson. W3C.</dd>

   <dt id="refsFILEAPI">[FILEAPI]</dt>
   <dd><cite><a href="http://dev.w3.org/2006/webapi/FileUpload/publish/FileAPI.html">File
   API</a></cite>, A. Ranganathan. W3C.</dd>

   <dt id="refsFILESYSTEMAPI">[FILESYSTEMAPI]</dt>
   <dd><cite><a href="http://dev.w3.org/2009/dap/file-system/file-dir-sys.html">File
   API: Directories and System</a></cite>, E. Uhrhane. W3C.</dd>

   <dt id="refsFULLSCREEN">[FULLSCREEN]</dt>
   <dd><cite><a href="http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html">Fullscreen</a></cite>, A. van Kesteren, T. &#199;elik.</dd>

   <dt id="refsGBK">[GBK]</dt>
   <dd><cite>Chinese Internal Code Specification</cite>. Chinese IT
   Standardization Technical Committee.</dd>
   <!-- http://www.iana.org/assignments/charset-reg/GBK -->

   <dt id="refsGRAPHICS">[GRAPHICS]</dt>
   <dd>(Non-normative) <cite>Computer Graphics: Principles and
   Practice in C</cite>, Second Edition, J. Foley, A. van Dam,
   S. Feiner, J. Hughes. Addison-Wesley. ISBN
   0-201-84840-6.</dd>
   <!--
   This book ("Computer Graphics: Principles and Practice in C")
   apparently does not make any references to literature in the
   bibliographic section to define the "even-odd" rule for polygon
   filling and hit testing. In the absence of such a reference, I
   guess that this book is the most authoritative reference.
   -->

   <dt id="refsGREGORIAN">[GREGORIAN]</dt>
   <dd>(Non-normative) <cite>Inter Gravissimas</cite>, A. Lilius,
   C. Clavius. Gregory XIII Papal Bull, February 1582.</dd>

   <dt id="refsHATOM">[HATOM]</dt>
   <dd>(Non-normative) <cite><a href="http://microformats.org/wiki/hatom">hAtom</a></cite>, D
   Janes. Microformats.</dd>

   <dt id="refsHMAC">[HMAC]</dt>
   <dd><cite><a href="http://csrc.nist.gov/publications/fips/fips198/fips-198a.pdf">The Keyed-Hash Message Authentication Code (HMAC)</a></cite>. NIST.</dd>

   <dt id="refsHPAAIG">[HPAAIG]</dt>
   <dd><cite><a href="http://dev.w3.org/html5/html-api-map/overview.html">HTML to Platform Accessibility APIs Implementation Guide</a></cite>. W3C.</dd>

   <dt id="refsHTML4">[HTML4]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/html4/">HTML 4.01
   Specification</a></cite>, D. Raggett, A. Le Hors, I. Jacobs.  W3C.</dd>

   <dt id="refsHTML">[HTML]</dt>
   <dd><cite><a href="http://www.whatwg.org/specs/web-apps/current-work/">HTML</a></cite>,
   I. Hickson. WHATWG.</dd>

   <dt id="refsHTML5">[HTML5]</dt>
   <dd>
   <cite><a href="http://dev.w3.org/html5/spec/">HTML5</a></cite>,
   I. Hickson. W3C.</dd>

   <dt id="refsHTMLALTTECHS">[HTMLALTTECHS]</dt>
   <dd>(Non-normative) <cite><a href="http://dev.w3.org/html5/alt-techniques/">HTML5: Techniques for providing useful text alternatives</a></cite>, S. Faulkner. W3C.</dd>

   <dt id="refsHTMLDIFF">[HTMLDIFF]</dt>
   <!--
   <dd>(Non-normative) <cite><a
   href="http://www.w3.org/TR/html5-diff/">HTML5 differences from
   HTML4</a></cite>, A. van Kesteren. W3C.</dd>
   -->
   <dd>(Non-normative) <cite><a href="http://dev.w3.org/html5/html4-differences/">HTML5
   differences from HTML4</a></cite>, A. van Kesteren.  W3C.</dd>

   <dt id="refsHTTP">[HTTP]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2616">Hypertext
   Transfer Protocol &#8212; HTTP/1.1</a></cite>, R. Fielding, J. Gettys,
   J. Mogul, H.  Frystyk, L. Masinter, P. Leach, T. Berners-Lee. IETF.</dd>

   <dt id="refsIANACHARSET">[IANACHARSET]</dt>
   <dd><cite><a href="http://www.iana.org/assignments/character-sets">Character
   Sets</a></cite>. IANA.</dd>

   <dt id="refsIANALINKTYPE">[IANALINKTYPE]</dt>
   <dd><cite><a href="http://www.iana.org/assignments/link-relations">Link
   Relations</a></cite>. IANA.</dd>

   <dt id="refsIANAPERMHEADERS">[IANAPERMHEADERS]</dt>
   <dd><cite><a href="http://www.iana.org/assignments/message-headers/perm-headers.html">Permanent
   Message Header Field Names</a></cite>. IANA.</dd>

   <dt id="refsICE">[ICE]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc5245">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a></cite>, J. Rosenberg. IETF.</dd>

   <dt id="refsIEEE754">[IEEE754]</dt>
   <dd><cite><a href="http://ieeexplore.ieee.org/servlet/opac?punumber=4610933">IEEE
   Standard for Floating-Point Arithmetic (IEEE 754)</a></cite>. IEEE. ISBN 978-0-7381-5753-5.</dd>

   <dt id="refsISO8601">[ISO8601]</dt>
   <dd>(Non-normative) <cite><a href="http://isotc.iso.org/livelink/livelink/4021199/ISO_8601_2004_E.zip?func=doc.Fetch&amp;nodeid=4021199">ISO8601: Data elements and interchange formats &#8212; Information interchange &#8212; Representation of dates and times</a></cite>. ISO.</dd>

   <dt id="refsISO885911">[ISO885911]</dt>
   <dd><cite><a href="http://std.dkuug.dk/jtc1/sc2/open/02n3333.pdf">ISO-8859-11:
   Information technology &#8212; 8-bit single-byte coded graphic
   character sets &#8212; Part 11: Latin/Thai
   alphabet</a></cite>. ISO.</dd>

   <dt id="refsJLREQ">[JLREQ]</dt>
   <dd><cite><a href="http://www.w3.org/TR/jlreq/">Requirements for Japanese Text Layout</a></cite>. W3C.</dd> <!-- too many editors to list -->

   <dt id="refsJPEG">[JPEG]</dt>
   <dd><cite><a href="http://www.w3.org/Graphics/JPEG/jfif3.pdf">JPEG File Interchange Format</a></cite>, E. Hamilton.</dd>

   <dt id="refsJSON">[JSON]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc4627">The
   application/json Media Type for JavaScript Object Notation
   (JSON)</a></cite>, D. Crockford. IETF.</dd>

   <dt id="refsJSURL">[JSURL]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/draft-hoehrmann-javascript-scheme">The 'javascript' resource identifier scheme</a></cite>, B. H&#246;hrmann. IETF.
   Work in progress. <!--!--> <!-- It's not really in progress; this reference has been dead for a while. Unfortunately it's the closest thing we current have to a spec. -->
   </dd>

   <dt id="refsMAILTO">[MAILTO]</dt>
   <dd>(Non-normative) <cite><a href="http://tools.ietf.org/html/rfc6068">The 'mailto' URI scheme</a></cite>, M. Duerst, L. Masinter, J. Zawinski. IETF.</dd>

   <dt id="refsMATHML">[MATHML]</dt>
   <dd><cite><a href="http://www.w3.org/TR/MathML/">Mathematical
   Markup Language (MathML)</a></cite>, D. Carlisle, P. Ion, R. Miner,
   N. Poppelier. W3C.</dd>

   <dt id="refsMEDIAFRAG">[MEDIAFRAG]</dt>
   <dd><cite><a href="http://www.w3.org/2008/WebVideo/Fragments/WD-media-fragments-spec/">Media
   Fragments URI</a></cite>, R. Troncy, E. Mannens, S. Pfeiffer, D.
   Van Deursen. W3C.</dd>

   <dt id="refsMFREL">[MFREL]</dt>
   <dd><cite><a href="http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions">Microformats Wiki: existing rel values</a></cite>. Microformats.</dd>

   <dt id="refsMIMESNIFF">[MIMESNIFF]</dt>
   <dd><cite><a href="http://mimesniff.spec.whatwg.org/">MIME Sniffing</a></cite>, A. Barth, I. Hickson. WHATWG.</dd>

   <dt id="refsMPEG2">[MPEG2]</dt>
   <dd><cite>ISO/IEC 13818-1: Information technology &#8212; Generic coding of moving pictures and associated audio information: Systems</cite>. ISO/IEC.</dd>
   <!-- search for ["bytes are removed from this buffer at a rate defined by sb_leak_rate"] to find it -->

   <dt id="refsMPEG4">[MPEG4]</dt>
   <dd><cite>ISO/IEC 14496-12: ISO base media file format</cite>. ISO/IEC.</dd>
   <!-- search for ["Box Structure was and subsequent clauses were re-organized"] to find it -->

   <dt id="refsMQ">[MQ]</dt>
   <!--
   <dd><cite><a href="http://www.w3.org/TR/css3-mediaqueries/">Media
   Queries</a></cite>, H. Lie, T.  &Ccedil;elik, D. Glazman, A. van
   Kesteren. W3C.</dd>
   -->
   <dd><cite><a href="http://dev.w3.org/csswg/css3-mediaqueries/">Media
   Queries</a></cite>, H. Lie, T.  &#199;elik, D. Glazman, A. van
   Kesteren. W3C.</dd>

   <dt id="refsNPAPI">[NPAPI]</dt>
   <dd>(Non-normative) <cite><a href="https://developer.mozilla.org/en/Gecko_Plugin_API_Reference">Gecko
   Plugin API Reference</a></cite>. Mozilla.</dd>

   <dt id="refsNPN">[NPN]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/draft-agl-tls-nextprotoneg">Transport Layer Security (TLS) Next Protocol Negotiation Extension</a></cite>, A. Langley. IETF.
   Work in progress. <!--!-->
   </dd>

   <dt id="refsOGGSKELETONHEADERS">[OGGSKELETONHEADERS]</dt>
   <dd><cite><a href="http://wiki.xiph.org/SkeletonHeaders">SkeletonHeaders</a></cite>. Xiph.Org.</dd>

   <dt id="refsOPENSEARCH">[OPENSEARCH]</dt>
   <dd><cite><a href="http://www.opensearch.org/Specifications/OpenSearch/1.1#Autodiscovery_in_HTML.2FXHTML">Autodiscovery
   in HTML/XHTML</a></cite>. In <cite>OpenSearch 1.1 Draft 4</cite>,
   Section 4.6.2. OpenSearch.org.</dd>

   <dt id="refsORIGIN">[ORIGIN]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc6454">The Web Origin Concept</a></cite>, A. Barth. IETF.</dd>   

   <dt id="refsPAGEVIS">[PAGEVIS]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3c-test.org/webperf/specs/PageVisibility/">Page Visibility</a></cite>, J. Mann, A. Jain. W3C.</dd>   

   <dt id="refsPDF">[PDF]</dt>
   <dd>(Non-normative) <cite><a href="http://www.adobe.com/devnet/acrobat/pdfs/PDF32000_2008.pdf">Document management &#8212; Portable document format &#8212; Part 1: PDF</a></cite>. ISO.</dd>   

   <dt id="refsPINGBACK">[PINGBACK]</dt>
   <dd><cite><a href="http://www.hixie.ch/specs/pingback/pingback">Pingback
   1.0</a></cite>, S. Langridge, I. Hickson.</dd>

   <dt id="refsPNG">[PNG]</dt>
   <dd><cite><a href="http://www.w3.org/TR/PNG/">Portable Network
   Graphics (PNG) Specification</a></cite>, D. Duce. W3C.</dd>

   <dt id="refsPOLYGLOT">[POLYGLOT]</dt>
   <dd>(Non-normative) <cite><a href="http://dev.w3.org/html5/html-xhtml-author-guide/html-xhtml-authoring-guide.html">Polyglot
   Markup: HTML-Compatible XHTML Documents</a></cite>, E. Graff.
   W3C.</dd>

   <dt id="refsPORTERDUFF">[PORTERDUFF]</dt>
   <dd><cite><a href="http://keithp.com/~keithp/porterduff/p253-porter.pdf">Compositing
   Digital Images</a></cite>, T. Porter, T. Duff. In <cite>Computer
   graphics</cite>, volume 18, number 3, pp. 253-259. ACM Press, July
   1984.</dd>

   <dt id="refsPPUTF8">[PPUTF8]</dt>
   <dd>(Non-normative) <cite><a href="http://www.sw.it.aoyama.ac.jp/2012/pub/IUC11-UTF-8.pdf">The Properties and Promises <!-- Promizes (sic) --> of UTF-8</a></cite>, M. D&#252;rst. University of Z&#252;rich. In <cite>Proceedings of the 11th International Unicode Conference</cite>.</dd>

   <dt id="refsPROGRESS">[PROGRESS]</dt>
   <dd><cite><a href="http://dev.w3.org/2006/webapi/progress/">Progress
   Events</a></cite>, A. van Kesteren. W3C.</dd>

   <dt id="refsPSL">[PSL]</dt>
   <dd><cite><a href="http://publicsuffix.org/">Public Suffix List</a></cite>.
   Mozilla Foundation.</dd>

   <dt id="refsRFC1034">[RFC1034]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc1034">Domain
   Names - Concepts and Facilities</a></cite>, P. Mockapetris. IETF,
   November 1987.</dd>

   <dt id="refsRFC1321">[RFC1321]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc1321">The MD5
   Message-Digest Algorithm</a></cite>, R. Rivest. IETF.</dd>

   <dt id="refsRFC1345">[RFC1345]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc1345">Character Mnemonics
   and Character Sets</a></cite>, K. Simonsen. IETF.</dd>

   <dt id="refsRFC1468">[RFC1468]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc1468">Japanese Character
   Encoding for Internet Messages</a></cite>, J. Murai, M. Crispin, E. van der
   Poel. IETF.</dd>

   <dt id="refsRFC1494">[RFC1494]</dt>
   <dd>(Non-normative) <cite><a href="http://tools.ietf.org/html/rfc1494">Equivalences between
   1988 X.400 and RFC-822 Message Bodies</a></cite>, H. Alvestrand,
   S. Thompson. IETF.</dd>

   <dt id="refsRFC1554">[RFC1554]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc1554">ISO-2022-JP-2:
   Multilingual Extension of ISO-2022-JP</a></cite>, M. Ohta, K. Handa. IETF.</dd>

   <dt id="refsRFC1557">[RFC1557]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc1557">Korean Character
   Encoding for Internet Messages</a></cite>, U. Choi, K. Chon, H. Park. IETF.</dd>

   <dt id="refsRFC1842">[RFC1842]</dt>

   <dd><cite><a href="http://tools.ietf.org/html/rfc1842">ASCII
   Printable Characters-Based Chinese Character Encoding for Internet
   Messages</a></cite>, Y. Wei, Y. Zhang, J. Li, J. Ding, Y. Jiang.
   IETF.</dd>

   <dt id="refsRFC1922">[RFC1922]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc1922">Chinese Character
   Encoding for Internet Messages</a></cite>, HF. Zhu, DY. Hu, ZG. Wang, TC. Kao,
   WCH. Chang, M. Crispin. IETF.</dd>

   <dt id="refsRFC2045">[RFC2045]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet
   Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a></cite>,
   N. Freed, N. Borenstein. IETF.</dd>

   <dt id="refsRFC2046">[RFC2046]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet
   Mail Extensions (MIME) Part Two: Media Types</a></cite>, N. Freed,
   N.  Borenstein. IETF.</dd> <!-- for text/plain and
   "Internet Media type"; not for definition of "valid MIME type". -->

   <dt id="refsRFC2119">[RFC2119]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2119">Key words for use in
   RFCs to Indicate Requirement Levels</a></cite>, S. Bradner. IETF.</dd>

   <dt id="refsRFC2237">[RFC2237]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2237">Japanese Character
   Encoding for Internet Messages</a></cite>, K. Tamaru. IETF.</dd>

   <dt id="refsRFC2246">[RFC2246]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2246">The TLS Protocol
   Version 1.0</a></cite>, T. Dierks, C. Allen. IETF.</dd>

   <dt id="refsRFC2313">[RFC2313]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2313">PKCS #1:
   RSA Encryption</a></cite>, B. Kaliski. IETF.</dd>

   <dt id="refsRFC2318">[RFC2318]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2318">The
   text/css Media Type</a></cite>, H. Lie, B. Bos, C. Lilley. IETF.</dd>

   <dt id="refsRFC2388">[RFC2388]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2388">Returning Values from
   Forms: multipart/form-data</a></cite>, L. Masinter. IETF.</dd>

   <dt id="refsRFC2397">[RFC2397]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2397">The "data"
   URL scheme</a></cite>, L. Masinter. IETF.</dd>

   <dt id="refsRFC2445">[RFC2445]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2445">Internet Calendaring
   and Scheduling Core Object Specification (iCalendar)</a></cite>, F. Dawson, D.
   Stenerson. IETF.</dd>

   <dt id="refsRFC2483">[RFC2483]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2483">URI Resolution
   Services Necessary for URN Resolution</a></cite>, M. Mealling, R. Daniel.
   IETF.</dd>

   <dt id="refsRFC2781">[RFC2781]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2781">UTF-16, an
   encoding of ISO 10646</a></cite>, P. Hoffman, F. Yergeau. IETF.</dd>

   <dt id="refsRFC3676">[RFC3676]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3676">The Text/Plain Format
   and DelSp Parameters</a></cite>, R. Gellens. IETF.</dd>

   <dt id="refsRFC2806">[RFC2806]</dt>
   <dd>(Non-normative) <cite><a href="http://tools.ietf.org/html/rfc2806">URLs for Telephone
   Calls</a></cite>, A. Vaha-Sipila. IETF.</dd>

   <dt id="refsRFC3023">[RFC3023]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3023">XML Media
   Types</a></cite>, M. Murata, S. St. Laurent, D. Kohn. IETF.</dd>

   <dt id="refsRFC3279">[RFC3279]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3279">Algorithms
   and Identifiers for the Internet X.509 Public Key Infrastructure
   Certificate and Certificate Revocation List (CRL)
   Profile</a></cite>, W. Polk, R. Housley, L. Bassham. IETF.</dd>

   <dt id="refsRFC3490">[RFC3490]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3490">Internationalizing
   Domain Names in Applications (IDNA)</a></cite>, P. Faltstrom, P. Hoffman, A.
   Costello. IETF.</dd>

   <dt id="refsRFC3629">[RFC3629]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3629">UTF-8, a
   transformation format of ISO 10646</a></cite>, F. Yergeau. IETF.</dd>

   <dt id="refsRFC3864">[RFC3864]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3864">Registration Procedures
   for Message Header Fields</a></cite>, G. Klyne, M. Nottingham,
   J. Mogul. IETF.</dd>

   <dt id="refsRFC3986">[RFC3986]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3986">Uniform Resource
   Identifier (URI): Generic Syntax</a></cite>, T. Berners-Lee, R. Fielding, L.
   Masinter. IETF.</dd>

   <dt id="refsRFC3987">[RFC3987]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3987">Internationalized
   Resource Identifiers (IRIs)</a></cite>, M. D&#252;rst, M. Suignard. IETF.</dd>

   <dt id="refsRFC4281">[RFC4281]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc4281">The Codecs Parameter
   for "Bucket" Media Types</a></cite>, R. Gellens, D. Singer, P. Frojdh. IETF.</dd>

   <dt id="refsRFC4329">[RFC4329]</dt>
   <dd>(Non-normative) <cite><a href="http://tools.ietf.org/html/rfc4329">Scripting Media
   Types</a></cite>, B. H&#246;hrmann. IETF.</dd>

   <dt id="refsRFC4366">[RFC4366]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc4366">Transport
   Layer Security (TLS) Extensions</a></cite>, S. Blake-Wilson,
   M. Nystrom, D. Hopwood, J. Mikkelsen, T. Wright. IETF.</dd>

   <dt id="refsRFC4395">[RFC4395]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc4395">Guidelines and Registration Procedures for New URI Schemes</a></cite>, T. Hansen, T. Hardie, L. Masinter. IETF.</dd>

   <dt id="refsRFC4648">[RFC4648]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc4648">The Base16,
   Base32, and Base64 Data Encodings</a></cite>, S. Josefsson.
   IETF.</dd>

   <dt id="refsRFC4770">[RFC4770]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc4770">vCard Extensions for
   Instant Messaging (IM)</a></cite>, C. Jennings, J. Reschke. IETF.</dd>

   <dt id="refsRFC5280">[RFC5280]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc5280">Internet
   X.509 Public Key Infrastructure Certificate and Certificate
   Revocation List (CRL) Profile</a></cite>, D. Cooper, S. Santesson,
   S. Farrell, S. Boeyen, R. Housley, W. Polk. IETF.</dd>

   <dt id="refsRFC5322">[RFC5322]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc5322">Internet Message
   Format</a></cite>, P. Resnick. IETF.</dd>

   <dt id="refsRFC5724">[RFC5724]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc5724">URI Scheme
   for Global System for Mobile Communications (GSM) Short Message
   Service (SMS)</a></cite>, E. Wilde, A. Vaha-Sipila. IETF.</dd>

   <dt id="refsRFC6266">[RFC6266]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc6266">Use of the Content-Disposition Header Field in the Hypertext Transfer Protocol (HTTP)</a></cite>, J. Reschke. IETF.</dd>

   <dt id="refsRFC6350">[RFC6350]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc6350">vCard Format Specification</a></cite>, S. Perreault. IETF.</dd>

   <dt id="refsSCSU">[SCSU]</dt>
   <dd>(Non-normative) <cite><a href="http://www.unicode.org/reports/tr6/">UTR #6: A Standard
   Compression Scheme For Unicode</a></cite>, M. Wolf, K. Whistler,
   C. Wicksteed, M. Davis, A. Freytag, M. Scherer. Unicode Consortium.</dd>

   <dt id="refsSDP">[SDP]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a></cite>, M. Handley, V. Jacobson, C. Perkins. IETF.</dd>

   <dt id="refsSDPLABEL">[SDPLABEL]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc4574">The Session Description Protocol (SDP) Label Attribute</a></cite>, O. Levin, G. Camarillo. IETF.</dd>

   <dt id="refsSDPOFFERANSWER">[SDPOFFERANSWER]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with the Session Description Protocol (SDP)</a></cite>, J. Rosenberg, H. Schulzrinne. IETF.</dd>

   <dt id="refsSELECTORS">[SELECTORS]</dt>
   <dd><cite><a href="http://dev.w3.org/csswg/selectors4/">Selectors</a></cite>, E. Etemad, T. &#199;elik, D. Glazman, I. Hickson, P. Linss, J. Williams. W3C.</dd>

   <dt id="refsSHA1">[SHA1]</dt>
   <dd><cite><a href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2withchangenotice.pdf">Secure Hash Standard</a></cite>. NIST.</dd>

   <dt id="refsSHIFTJIS">[SHIFTJIS]</dt>
   <dd><cite>JIS X0208: 7-bit and 8-bit double byte coded KANJI sets
   for information interchange</cite>. Japanese Industrial Standards Committee.</dd>

   <dt id="refsSRGB">[SRGB]</dt>
   <dd><cite lang="en-GB"><a href="http://webstore.iec.ch/webstore/webstore.nsf/artnum/025408!OpenDocument&amp;Click=">IEC
   61966-2-1: Multimedia systems and equipment &#8212; Colour measurement
   and management &#8212; Part 2-1: Colour management &#8212; Default RGB colour
   space &#8212; sRGB</a></cite>. IEC.</dd>

   <dt id="refsSTUN">[STUN]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc5389">Session Traversal Utilities for NAT (STUN)</a></cite>, J. Rosenberg, R. Mahy, P. Matthews, D. Wing. IETF.</dd>

   <dt id="refsSVG">[SVG]</dt>
   <dd><cite><a href="http://www.w3.org/TR/SVGTiny12/">Scalable Vector
   Graphics (SVG) Tiny 1.2 Specification</a></cite>, O. Andersson,
   R. Berjon, E. Dahlstr&#246;m, A. Emmons, J. Ferraiolo, A. Grasso,
   V. Hardy, S. Hayman, D. Jackson, C. Lilley, C. McCormack,
   A. Neumann, C. Northway, A. Quint, N. Ramani, D. Schepers,
   A. Shellshear. W3C.</dd>

   <dt id="refsTIS620">[TIS620]</dt>
   <dd><cite><a href="http://www.nectec.or.th/it-standards/std620/std620.htm">UDC
   681.3.04:003.62</a></cite>. Thai Industrial Standards Institute,
   Ministry of Industry, Royal Thai Government. ISBN
   974-606-153-4.</dd>

   <dt id="refsTURN">[TURN]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc5766">Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)</a></cite>, R. Mahy, P. Matthews, J. Rosenberg. IETF.</dd>

   <dt id="refsTIMEZONES">[TIMEZONES]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/timezone/">Working with Time Zones</a></cite>, A. Phillips, N. Lindenberg, M. Davis, M.J. D&#252;rst, F. Sasaki, R. Ishida. W3C.</dd>


   <dt id="refsTYPEDARRAY">[TYPEDARRAY]</dt>
   <dd><cite><a href="http://www.khronos.org/registry/typedarray/specs/latest/">Typed Array Specification</a></cite>, D. Herman, K. Russell. Khronos.</dd>

   <dt id="refsUAAG">[UAAG]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/UAAG20/">User Agent Accessibility Guidelines (UAAG) 2.0</a></cite>, J. Allan, K. Ford, J. Richards, J. Spellman. W3C.</dd>

   <dt id="refsUNDO">[UNDO]</dt>
   <dd><cite><a href="http://rniwa.com/editing/undomanager.html">UndoManager and DOM Transaction</a></cite>, R. Niwa.</dd>

   <dt id="refsUNICODE">[UNICODE]</dt>
   <dd><cite><a href="http://www.unicode.org/versions/">The Unicode Standard</a></cite>. Unicode Consortium.</dd>

   <dt id="refsUNIVCHARDET">[UNIVCHARDET]</dt>
   <dd>(Non-normative) <cite><a href="http://www.mozilla.org/projects/intl/UniversalCharsetDetection.html">A
   composite approach to language/encoding
   detection</a></cite>, S. Li, K. Momoi. Netscape. In
   <cite>Proceedings of the 19th International Unicode
   Conference</cite>.</dd>

   <dt id="refsUTF7">[UTF7]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2152">UTF-7: A
   Mail-Safe Transformation Format of Unicode</a></cite>,
   D. Goldsmith, M. Davis. IETF.</dd>

   <dt id="refsUTF8DET">[UTF8DET]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/International/questions/qa-forms-utf-8">Multilingual
   form encoding</a></cite>, M. D&#252;rst. W3C.</dd>

   <dt id="refsUTR36">[UTR36]</dt>
   <dd>(Non-normative) <cite><a href="http://www.unicode.org/reports/tr36/">UTR #36: Unicode
   Security Considerations</a></cite>, M. Davis, M. Suignard. Unicode
   Consortium.</dd>

   <dt id="refsWCAG">[WCAG]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/WCAG20/">Web Content Accessibility
   Guidelines (WCAG) 2.0</a></cite>, B. Caldwell, M. Cooper, L. Reid,
   G. Vanderheiden. W3C.</dd>

   <dt id="refsWEBADDRESSES">[WEBADDRESSES]</dt>
   <dd><cite><a href="http://www.w3.org/html/wg/href/draft">Web
   addresses in HTML5</a></cite>, D. Connolly,
   C. Sperberg-McQueen.</dd>

   <dt id="refsWEBGL">[WEBGL]</dt>
   <dd><cite><a href="https://cvs.khronos.org/svn/repos/registry/trunk/public/webgl/doc/spec/WebGL-index.html">WebGL
   Specification</a></cite>, C. Marrin. Khronos Group.</dd>

   <dt id="refsWEBIDL">[WEBIDL]</dt>
   <!--
   <dd><cite><a href="http://www.w3.org/TR/WebIDL/">Web
   IDL</a></cite>, C. McCormack. W3C.</dd>
   -->
   <dd><cite><a href="http://dev.w3.org/2006/webapi/WebIDL/">Web
   IDL</a></cite>, C. McCormack. W3C.</dd>

   <dt id="refsWEBLINK">[WEBLINK]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc5988">Web
   Linking</a></cite>, M. Nottingham. IETF.</dd>

   <dt id="refsWEBMCG">[WEBMCG]</dt>
   <dd><cite><a href="http://www.webmproject.org/code/specs/container/">WebM Container Guidelines</a></cite>. The WebM Project.</dd>

   <dt id="refsWEBSOCKET">[WEBSOCKET]</dt>
   <dd><cite><a href="http://dev.w3.org/html5/websockets/">The WebSocket API</a></cite>, I. Hickson. W3C.</dd>

   <dt id="refsWEBSTORAGE">[WEBSTORAGE]</dt>
   <dd><cite><a href="http://dev.w3.org/html5/webstorage/">Web Storage</a></cite>, I. Hickson. W3C.</dd>

   <dt id="refsWEBVTT">[WEBVTT]</dt>
   <dd><cite><a href="http://dev.w3.org/html5/webvtt/">WebVTT</a></cite>, I. Hickson. W3C.</dd>

   <dt id="refsWEBWORKERS">[WEBWORKERS]</dt>
   <dd><cite><a href="http://dev.w3.org/html5/workers/">Web Workers</a></cite>, I. Hickson. W3C.</dd>

   <dt id="refsWHATWGBLOG">[WHATWGBLOG]</dt>
   <dd><cite><a href="http://blog.whatwg.org/">The WHATWG Blog</a></cite>. WHATWG.</dd>

   <dt id="refsWHATWGWIKI">[WHATWGWIKI]</dt>
   <dd><cite><a href="http://wiki.whatwg.org/">The WHATWG Wiki</a></cite>. WHATWG.</dd>

   <dt id="refsWIN1252">[WIN1252]</dt>
   <dd><cite><a href="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">Windows 1252</a></cite>. Microsoft.</dd>

   <dt id="refsWIN1254">[WIN1254]</dt>
   <dd><cite><a href="http://www.microsoft.com/globaldev/reference/sbcs/1254.htm">Windows 1254</a></cite>. Microsoft.</dd>

   <dt id="refsWIN31J">[WIN31J]</dt>
   <dd><cite><a href="http://www.microsoft.com/globaldev/reference/dbcs/932.mspx">Windows Codepage 932</a></cite>. Microsoft.</dd>

   <dt id="refsWIN874">[WIN874]</dt>
   <dd><cite><a href="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">Windows 874</a></cite>. Microsoft.</dd>

   <dt id="refsWIN949">[WIN949]</dt>
   <dd><cite><a href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP949.TXT">Windows Codepage 949</a></cite>. Microsoft.</dd>

   <dt id="refsWSP">[WSP]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc6455">The WebSocket protocol</a></cite>, I. Fette, A. Melnikov. IETF.</dd>

   <dt id="refsX121">[X121]</dt>
   <dd><cite>Recommendation X.121 &#8212; International Numbering Plan for
   Public Data Networks</cite>, CCITT Blue Book, Fascicle VIII.3,
   pp. 317-332.</dd>

   <dt id="refsX690">[X690]</dt>
   <dd><cite><a href="http://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf">Recommendation
   X.690 &#8212; Information Technology &#8212; ASN.1 Encoding Rules &#8212;
   Specification of Basic Encoding Rules (BER), Canonical Encoding
   Rules (CER), and Distinguished Encoding Rules
   (DER)</a></cite>. International Telecommunication Union.</dd>

   <dt id="refsXFN">[XFN]</dt>
   <dd><cite><a href="http://gmpg.org/xfn/11">XFN 1.1 profile</a></cite>, T. &#199;elik, M. Mullenweg, E. Meyer. GMPG.</dd>

   <dt id="refsXHR">[XHR]</dt>
   <!--
   <dd><cite><a href="http://www.w3.org/TR/XMLHttpRequest/">The XMLHttpRequest
   Object</a></cite>, A. van Kesteren. W3C.</dd>
   -->
   <dd><cite><a href="http://dev.w3.org/2006/webapi/XMLHttpRequest-2/"><code>XMLHttpRequest</code></a></cite>,
   A. van Kesteren. W3C.</dd>

   <dt id="refsXHTML1">[XHTML1]</dt>
   <dd><cite><a href="http://www.w3.org/TR/xhtml1/">XHTML(TM) 1.0 The
   Extensible HyperText Markup Language (Second Edition)</a></cite>. W3C.</dd>

   <dt id="refsXHTMLMOD">[XHTMLMOD]</dt>
   <dd><cite><a href="http://www.w3.org/TR/xhtml-modularization">Modularization of
   XHTML(TM)</a></cite>, M. Altheim, F. Boumphrey, S. Dooley, S.
   McCarron, S. Schnitzenbaumer, T. Wugofski. W3C.</dd>

   <dt id="refsXML">[XML]</dt>
   <dd><cite><a href="http://www.w3.org/TR/xml/">Extensible Markup
   Language</a></cite>, T. Bray, J. Paoli, C. Sperberg-McQueen,
   E. Maler, F. Yergeau. W3C.</dd>

   <dt id="refsXMLBASE">[XMLBASE]</dt>
   <dd><cite><a href="http://www.w3.org/TR/xmlbase/">XML
   Base</a></cite>, J. Marsh, R. Tobin. W3C.</dd>

   <dt id="refsXMLNS">[XMLNS]</dt>
   <dd><cite><a href="http://www.w3.org/TR/xml-names/">Namespaces in
   XML</a></cite>, T. Bray, D. Hollander, A. Layman, R. Tobin. W3C.</dd>

   <dt id="refsXPATH10">[XPATH10]</dt>
   <dd><cite><a href="http://www.w3.org/TR/1999/REC-xpath-19991116">XML Path
   Language (XPath) Version 1.0</a></cite>, J. Clark, S. DeRose. W3C.</dd>

   <dt id="refsXSLT10">[XSLT10]</dt>
   <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/1999/REC-xslt-19991116">XSL
   Transformations (XSLT) Version 1.0</a></cite>, J. Clark. W3C.</dd>

<!--(once XSLTProcessor is defined somewhere, update this and the place that references this)
   <dt id="refsXSLTP">[XSLTP]</dt>
   <dd>(Non-normative) <cite><a href=""></a></cite>, . .</dd>
-->


   <dt id="refsRFC2109">[RFC2109]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2109">HTTP State
   Management Mechanism</a></cite>, D. Kristol,
   L. Montulli. IETF.</dd>

   <dt id="refsRFC2616">[RFC2616]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2616">Hypertext
   Transfer Protocol &#8212; HTTP/1.1</a></cite>, R. Fielding, J. Gettys,
   J. Mogul, H.  Frystyk, L. Masinter, P. Leach, T. Berners-Lee. IETF.</dd>

   <dt id="refsRFC2965">[RFC2965]</dt>
   <dd><cite><a href="http://tools.ietf.org/html/rfc2965">HTTP State
   Management Mechanism</a></cite>, D. Kristol,
   L. Montulli. IETF.</dd>

   <dt id="refsRFC5234">[RFC5234]</dt>
   <dd><cite><a href="http://www.ietf.org/rfc/std/std68.txt">Augmented
   BNF for Syntax Specifications: ABNF</a></cite>, D. Crocker,
   P. Overell. IETF.</dd>


<!--REFERENCES OFF-->
  </dl><h2 class="no-num" id="acknowledgements">Acknowledgements</h2> <!-- ACKS -->

  <p>Thanks to Tim Berners-Lee for inventing HTML, without which none
  of this would exist.</p>

  <p>Thanks to

  Aankhen,
  Aaron Boodman,
  Aaron Leventhal,
  Adam Barth,
  Adam de Boor,
  Adam Hepton,
  Adam Roben,
  Addison Phillips,
  Adele Peterson,
  Adrian Bateman,
  Adrian Sutton,
  Agust&#237;n Fern&#225;ndez,
  Aharon (Vladimir) Lanin,
  Ajai Tirumali,
  Akatsuki Kitamura,
  Alan Plum,
  Alastair Campbell,
  Alejandro G. Castro,
  Alex Bishop,
  Alex Nicolaou,
  Alex Rousskov,
  Alexander J. Vincent,
  Alexandre Morgaut,
  Alexey Feldgendler,
  &#1040;&#1083;&#1077;&#1082;&#1089;&#1077;&#1081; &#1055;&#1088;&#1086;&#1089;&#1082;&#1091;&#1088;&#1103;&#1082;&#1086;&#1074; (Alexey Proskuryakov),
  Alexis Deveria,
  Allan Clements,
  Amos Jeffries,
  Anders Carlsson,
  Andreas<!-- mqmq87 -->,
  Andreas Kling,
  Andrei Popescu,
  Andr&#233; E. Veltstra,
  Andrew Barfield,
  Andrew Clover,
  Andrew Gove,
  Andrew Grieve,
  Andrew Oakley,
  Andrew Sidwell,
  Andrew Simons,
  Andrew Smith,
  Andrew W. Hagen,
  Andrey V. Lukyanov,
  Andy Heydon,
  Andy Palay,
  Anne van Kesteren,
  Anthony Boyd,
  Anthony Bryan,
  Anthony Hickson,
  Anthony Ricaud,
  Antti Koivisto,
  Arne Thomassen,
  Aron Spohr,
  Arphen Lin,
  Arun Patole,
  Aryeh Gregor,
  Asbj&#248;rn Ulsberg,
  Ashley Gullen,
  Ashley Sheridan,
  Atsushi Takayama,
  Aurelien Levy,
  Ave Wrigley,
  Ben Boyle,
  Ben Godfrey,
  Ben Lerner,
  Ben Leslie,
  Ben Meadowcroft,
  Ben Millard,
  Benjamin Carl Wiley Sittler,
  Benjamin Hawkes-Lewis,
  Bert Bos,
  Bijan Parsia,
  Bil Corry,
  Bill Mason,
  Bill McCoy,
  Billy Wong,
  Bjartur Thorlacius,
  Bj&#246;rn H&#246;hrmann,
  Blake Frantz,
  Boris Zbarsky,
  Brad Fults,
  Brad Neuberg,
  Brad Spencer,
  Brady Eidson,
  Brendan Eich,
  Brenton Simpson,
  Brett Wilson,
  Brett Zamir,
  Brian Campbell,
  Brian Korver,
  Brian Kuhn,
  Brian Ryner,
  Brian Smith,
  Brian Wilson,
  Bryan Sullivan,
  Bruce D'Arcus,
  Bruce Lawson,
  Bruce Miller,
  C. Williams,
  Cameron McCormack,
  Cao Yipeng,
  Carlos Gabriel Cardona,
  Carlos Perell&#243; Mar&#237;n,
  Chao Cai,
  &#50980;&#49437;&#52268; (Channy Yun),
  Charl van Niekerk,
  Charles Iliya Krempeaux,
  Charles McCathieNevile,
  Chris Apers,
  Chris Cressman,
  Chris Evans,
  Chris Morris,
  Chris Pearce,
  Christian Biesinger,
  Christian Johansen,
  Christian Schmidt,
  Christopher Aillon,
  Christopher Ferris,
  Chriswa,
  Clark Buehler,
  Cole Robison,
  Colin Fine,
  Collin Jackson,
  Corprew Reed,
  Craig Cockburn,
  Csaba Gabor,
  Csaba Marton,
  Cynthia Shelly,
  Dan Yoder,
  Daniel Barclay,
  Daniel Bratell,
  Daniel Brooks,
  Daniel Brumbaugh Keeney,
  Daniel Cheng,
  Daniel Davis,
  Daniel Glazman,
  Daniel Peng,
  Daniel Schattenkirchner,
  Daniel Sp&#229;ng,
  Daniel Steinberg,
  Danny Sullivan,
  Darin Adler,
  Darin Fisher,
  Darxus,
  Dave Camp,
  Dave Hodder,
  Dave Lampton,
  Dave Singer,
  Dave Townsend<!-- Mossop on moz irc -->,
  David Baron,
  David Bloom,
  David Bruant,
  David Carlisle,
  David E. Cleary,
  David Egan Evans,
  David Flanagan,
  David Gerard,
  David H&#229;s&#228;ther,
  David Hyatt,
  David I. Lehn,
  David John Burrowes,
  David Matja,
  David Remahl,
  David Smith,
  David Woolley,
  DeWitt Clinton,
  Dean Edridge,
  Dean Edwards,
  Debi Orton,
  Derek Featherstone,
  Devdatta,
  Dimitri Glazkov,
  Dimitry Golubovsky,
  Dirk Pranke,
  Divya Manian,
  Dmitry Titov,
  dolphinling,
  Dominique Haza&#235;l-Massieux,
  Don Brutzman,
  Doron Rosenberg,
  Doug Kramer,
  Doug Simpkinson,
  Drew Wilson,
  Edmund Lai,
  Eduard Pascual,
  Eduardo Vela,
  Edward O'Connor,
  Edward Welbourne,
  Edward Z. Yang,
  Ehsan Akhgari,
  Eira Monstad,
  Eitan Adler,
  Eliot Graff,
  Elisabeth Robson,
  Elizabeth Castro,
  Elliott Sprehn,
  Elliotte Harold,
  Eric Carlson,
  Eric Lawrence,
  Eric Rescorla,
  Eric Semling,
  Erik Arvidsson,
  Erik Rose,
  Evan Martin,
  Evan Prodromou,
  Evert,
  fantasai,
  Felix Sasaki,
  Francesco Schwarz,
  Francis Brosnan Blazquez,
  Franck 'Shift' Qu&#233;lain,
  Frank Barchard,
  &#40284;&#39164;&#25991;&#25935; (Fumitoshi Ukai),
  Futomi Hatano,
  Gavin Carothers,
  Gavin Kistner,
  Gareth Rees,
  Garrett Smith,
  Geoffrey Garen,
  Geoffrey Sneddon,
  George Lund,
  Gianmarco Armellin,
  Giovanni Campagna,
  Giuseppe Pascale,
  Glenn Adams,
  Glenn Maynard,
  Graham Klyne,
  Greg Botten,
  Greg Houston,
  Greg Wilkins,
  Gregg Tavares,
  Gregory J. Rosmaita,
  Grey,
  Guilherme Johansson Tramontina,
  Gytis Jakutonis,
  H&#229;kon Wium Lie,
  Hallvord Reiar Michaelsen Steen,
  Hans S. T&#248;mmerhalt,
  Hans Stimer,
  Harald Alvestrand,
  Henri Sivonen,
  Henrik Lied,
  Henry Mason,
  Hugh Guiney,
  Hugh Winkler,
  Ian Bicking,
  Ian Clelland,
  Ian Davis,
  Ian Fette,
  Ido Green,
  Ignacio Javier,
  Ivan Enderlin,
  Ivo Emanuel Gon&#231;alves,
  J. King,
  Jacob Davies,
  Jacques Distler,
  Jake Verbaten,
  James Craig,
  James Graham,
  James Justin Harrell,
  James Kozianski,
  James M Snell,
  James Perrett,
  James Robinson,
  Jamie Lokier,
  Jan-Klaas Kollhof,
  Jason Duell,
  Jason Kersey,
  Jason Lustig,
  Jason White,
  Jasper Bryant-Greene,
  Jatinder Mann,
  Jed Hartman,
  Jeff Balogh,
  Jeff Cutsinger,
  Jeff Schiller,
  Jeff Walden,
  Jeffrey Zeldman,
  &#32993;&#24935;&#37586; (Jennifer Braithwaite),
  Jens Bannmann,
  Jens Fendler,
  Jens Lindstr&#246;m,
  Jens Meiert,
  Jeremey Hustman,
  Jeremy Keith,
  Jeremy Orlow,
  Jeroen van der Meer,
  Jian Li,
  Jim Jewett,
  Jim Ley,
  Jim Meehan,
  Jirka Kosek,
  Jjgod Jiang,
  Jo&#227;o Eiras,
  Joe Clark,
  Joe Gregorio,
  Joel Spolsky,
  Johan Herland,
  John Boyer,
  John Bussjaeger,
  John Carpenter,
  John Fallows,
  John Foliot,
  John Harding,
  John Keiser,
  John Snyders,
  John Stockton,
  John-Mark Bell,
  Johnny Stenback,
  Jon Ferraiolo,
  Jon Gibbins,
  Jon Perlow,
  Jonas Sicking,
  Jonathan Cook,
  Jonathan Rees,
  Jonathan Worent,
  Jonny Axelsson,
  Jorgen Horstink,
  Jorunn Danielsen Newth,
  Joseph Kesselman,
  Joseph Mansfield,
  Joseph Pecoraro,
  Josh Aas,
  Josh Hart,
  Josh Levenberg,
  Joshua Bell,
  Joshua Randall,
  Jukka K. Korpela,
  Jules Cl&#233;ment-Ripoche,
  Julian Reschke,
  J&#252;rgen Jeka,
  Justin Lebar,
  Justin Novosad,
  Justin Schuh,
  Justin Sinclair,
  Kai Hendry,
  &#21570;&#24247;&#35946; (KangHao Lu)<!-- Kenny, kennyluck-->,
  Kartikaya Gupta,
  Kathy Walton,
  Kelly Ford,
  Kelly Norton,
  Kevin Benson,
  Kevin Cole,
  Korn&#233;l P&#225;l,
  Kornel Lesinski,
  Kris Northfield,
  Kristof Zelechovski,
  Krzysztof Maczy&#324;ski,
  &#40658;&#28580;&#21083;&#24535; (Kurosawa Takeshi),
  Kyle Hofmann<!-- Ozob -->,
  Kyle Huey,
  L&#233;onard Bouchet,
  L&#233;onie Watson,
  Lachlan Hunt,
  Larry Masinter,
  Larry Page,
  Lars Gunther<!-- Keryx Web -->,
  Lars Solberg,
  Laura Carlson,
  Laura Granka,
  Laura L. Carlson,
  Laura Wisewell,
  Laurens Holst,
  Lee Kowalkowski,
  Leif Halvard Silli,
  Lenny Domnitser,
  Leonard Rosenthol,
  Leons Petrazickis,
  Lobotom Dysmon,
  Logan<!-- on moz irc -->,
  Loune,
  Luke Kenneth Casson Leighton,
  Maciej Stachowiak,
  Magnus Kristiansen<!-- Dashiva -->,
  Maik Merten,
  Malcolm Rowe,
  Mark Birbeck,
  Mark Davis,
  Mark Miller,
  Mark Nottingham,
  Mark Pilgrim,
  Mark Rowe<!--bdash-->,
  Mark Schenk,
  Mark Wilton-Jones,
  Martijn Wargers,
  Martin Atkins,
  Martin D&#252;rst,
  Martin Honnen,
  Martin Janecke,
  Martin Kutschker,
  Martin Nilsson,
  Martin Thomson,
  Masataka Yakura,
  Mathias Bynens,
  Mathieu Henri,
  Matias Larsson,
  Matt Schmidt,
  Matt Wright,
  Matthew Gregan,
  Matthew Mastracci,
  Matthew Raymond,
  Matthew Thomas,
  Mattias Waldau,
  Max Romantschuk,
  Menno van Slooten,
  Micah Dubinko,
  Michael 'Ratt' Iannarelli,
  Michael A. Nachbaur,
  Michael A. Puls II<!--Shadow2531-->,
  Michael Carter,
  Michael Daskalov,
  Michael Enright,
  Michael Gratton,
  Michael Nordman,
  Michael Powers,
  Michael Rakowski,
  Michael(tm) Smith,
  Michal Zalewski,
  Michel Fortin,
  Michelangelo De Simone,
  Michiel van der Blonk,
  Mihai &#350;ucan<!-- from ROBO Design -->,
  Mihai Parparita,
  Mike Brown,
  Mike Dierken<!-- S. Mike Dierken -->,
  Mike Dixon,
  Mike Schinkel,
  Mike Shaver,
  Mikko Rantalainen,
  Mohamed Zergaoui<!-- Innovimax SARL -->,
  Mounir Lamouri,
  Ms2ger,
  NARUSE Yui,
  Neil Deakin,
  Neil Rashbrook,
  Neil Soiffer,
  Nicholas Shanks,
  Nicholas Stimpson,
  Nicholas Zakas,
  Nickolay Ponomarev,
  Nicolas Gallagher,
  Noah Mendelsohn,
  Noah Slater,
  Noel Gordon,
  NoozNooz42,
  Norbert Lindenberg,
  Ojan Vafai,
  Olaf Hoffmann,
  Olav Junker Kj&#230;r,
  Old&#345;ich Vete&#353;n&#237;k,
  Oli Studholme,
  Oliver Hunt,
  Oliver Rigby,
  Olivier Gendrin,
  Olli Pettay,
  oSand, <!-- from reddit -->
  Patrick H. Lauke,
  Patrik Persson,
  Paul Adenot,
  Paul Norman,
  Per-Erik Brodin,
  Perry Smith,
  Peter Beverloo,
  Peter Karlsson,
  Peter Kasting,
  Peter Moulder,
  Peter Stark,
  Peter-Paul Koch,
  Phil Pickering,
  Philip J&#228;genstedt,
  Philip Taylor,
  Philip TAYLOR<!-- a different one -->,
  Philippe De Ryck,
  Prateek Rungta,
  Pravir Gupta,
  &#26446;&#26222;&#21531; (Pujun Li)<!-- masa jack -->,
  Rachid Finge,
  Rafa&#322; Mi&#322;ecki,
  Rajas Moonka,
  Ralf Stoltze,
  Ralph Giles,
  Raphael Champeimont,
  Remci Mizkur,
  Remco,
  Remy Sharp,
  Rene Saarsoo,
  Rene Stach,
  Ric Hardacre,
  Rich Doughty,
  Richard Ishida,
  Rigo Wenning,
  Rikkert Koppes,
  Rimantas Liubertas,
  Riona Macnamara,
  Rob Ennals,
  Rob Jellinghaus,
  Rob S,
  Robert Blaut,
  Robert Collins,
  Robert Millan,
  Robert O'Callahan,
  Robert Sayre,
  Robin Berjon,
  Rodger Combs,
  Roland Steiner,
  Roman Ivanov,
  Roy Fielding,
  Ruud Steltenpool,
  Ryan King,
  Ryosuke Niwa,
  S. Mike Dierken,
  Salvatore Loreto,
  Sam Dutton,
  Sam Kuper,
  Sam Ruby,
  Sam Weinig,
  Sander van Lambalgen,
  Sarven Capadisli,
  Scott Gonz&#225;lez,
  Scott Hess,
  Sean Fraser,
  Sean Hayes,
  Sean Hogan,
  Sean Knapp,
  Sebastian Markb&#229;ge,
  Sebastian Schnitzenbaumer,
  Seth Call,
  Shanti Rao,
  Shaun Inman,
  Shiki Okasaka,
  Sierk Bornemann,
  Sigbj&#248;rn Vik,
  Silvia Pfeiffer,
  Simon Montagu,
  Simon Pieters,
  Simon Spiegel,
  skeww, <!-- on reddit -->
  Smylers,
  Stanton McCandlish,
  Stefan H&#229;kansson,
  Stefan Haustein,
  Stefan Santesson,
  Stefan Weiss,
  Steffen Meschkat,
  Stephen Ma,
  Stephen White,
  Steve Comstock,
  Steve Faulkner,
  Steve Runyon,
  Steven Bennett,
  Steven Garrity,
  Steven Tate,
  Stewart Brodie,
  Stuart Ballard,
  Stuart Parmenter,
  Subramanian Peruvemba,
  Sunava Dutta,
  Susan Borgrink,
  Susan <!--G.--> Lesch,
  Sylvain Pasche,
  T. J. Crowder,
  Tab Atkins,
  <span lang="tr" title="">Tantek &#199;elik</span>,
  &#30000;&#26449;&#20581;&#20154; (TAMURA Kent),
  Ted Mielczarek,
  Terrence Wood,
  Thomas Broyer,
  Thomas Koetter,
  Thomas O'Connor,
  Tim Altman,
  Tim Johansson,
  Toby Inkster,
  Todd Moody,
  Tom Baker,
  Tom Pike,
  Tommy Thorsen,
  Travis Leithead,
  Tyler Close,
  Victor Carbune,
  Vladimir Katardjiev,
  Vladimir Vuki&#263;evi&#263;,
  voracity,
  Wakaba,
  Wayne Carr,
  Wayne Pollock,
  Wellington Fernando de Macedo,
  Weston Ruter,
  Wilhelm Joys Andersen,
  Will Levine,
  William Swanson,
  Wladimir Palant,
  Wojciech Mach,
  Wolfram Kriesing,
  Xan Gregg,
  Yang Chen,
  Ye-Kui Wang,
  Yehuda Katz,
  Yi-An Huang,
  Yngve Nysaeter Pettersen,
  Yuzo Fujishima,
  Zhenbin Xu,
  Zoltan Herczeg,
  and
  &#216;istein E. Andersen,

  for their useful comments, both large and small, that have led to
  changes to this specification over the years.</p>

  <p>Thanks also to everyone who has ever posted about HTML to their
  blogs, public mailing lists, or forums, including all the
  contributors to the <a href="http://www.w3.org/html/wg/lists/">various W3C HTML WG
  lists</a> and the <a href="http://www.whatwg.org/mailing-list">various WHATWG lists</a>.

  </p><p>Special thanks to Richard Williamson for creating the first
  implementation of <code><a href="the-canvas-element.html#the-canvas-element">canvas</a></code> in Safari, from which the
  canvas feature was designed.</p>

  <p>Special thanks also to the Microsoft employees who first
  implemented the event-based drag-and-drop mechanism, <code title="attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>, and other
  features first widely deployed by the Windows Internet Explorer
  browser.</p>

<!--MD-->

  <div class="impl">

  <p>Special thanks and $10,000 to David Hyatt who came up with a
  broken implementation of the <a href="#adoptionAgency">adoption
  agency algorithm</a> that the editor had to reverse engineer and fix
  before using it in the parsing section.</p>

  </div>

  <p>Thanks to the many sources that provided inspiration for the
  examples used in the specification.</p>

  
  <p>Thanks also to the Microsoft blogging community for some ideas,
  to the attendees of the W3C Workshop on Web Applications and
  Compound Documents for inspiration, to the #mrt crew, the #mrt.no
  crew, and the #whatwg crew, and to Pillar and Hedral for their ideas
  and support.</p>

  <!-- Hopefully Kam won't notice he's covered by these
  acknowledgements three times! -->

<!--
 v2  * library of resources:
        var library = new ZipFile("data.zip");
        library.onload = function() {
          var sound1 = library.getAudio("sound1.wav"); // returns an Audio object
          var image1 = library.getImage("image1.png"); // returns an HTMLImageElement
          var doc1 = library.getXMLDocument("doc1.xml"); // returns a Document (XML Document mode)
          var doc2 = library.getHTMLDocument("doc1.html"); // returns a Document (HTML Document mode)
        }
       or:
        var library = new ResourceLoader("data.zip");
        library.add("moredata.zip");
        library.onload = function() { ... }
        library.onloading = function() {
          reportLoadProgress(library.progress); // 0.0 .. 1.0
        }
       or:
        var library = new AudioZip("sounds.zip");
        library.onload = function() {
          var sound1 = library["sound1.wav"];
          sound.play();
        }
 v2  * a fairly common situation for web authors is to have two lists, where
       the contents of the second depends on the value of the first. Is there
       any way we could extend the current model to include this functionality?
       (e.g. bugzilla product/component ui)
 v2  * quick-searchable select
 v2  * include/exclude selectors (two multi-select columns with arrows to
       move selected items) and that sort of thing.
       http://slashdot.org/comments.pl?sid=110240&cid=9357022
 v2  * Oh, and forms need a standardized Help widget/icon. I know I can
       turn my cursor into a question mark, but I'm looking for something
       simple and pervasive. Maybe you can wrap fields in a help tag, just
       as you do for fieldsets. And in that help tag, attributes are
       available that allow for a nice, formatted, clean, full help text
       popup/area/thing.
       http://slashdot.org/comments.pl?sid=110240&cid=9359006
 v2  * Validating only part of a form. - Anja Lehmann
 v2  * Reminder to add a way to expose access keys in buttons, i.e.
       Sub&mit where & signifies the m is the access key to use. Possibly
       automatic? <input accesskey="m" value="Submit"> browser would be
       smart enough to underline the first instance of the access key if
       it exists (case insensitive)? - kerz
       [or deprecate the lot (->web apps)]
 v2  * need an attribute that says "the children of this element are in
       their own tabbing universe, tabindex should be relative to each
       other, not to the document"
       -> web apps?
 v2  * make select widgets have multiple columns
       or ->web apps with list view
 v2  * required as a group (one of the following must be available):
       + i propose something like the following:
           <input type="text" group="contact" name="voicephone"> Voice phone
           <input type="text" group="contact" name="fax"> Fax
           <input type="text" group="contact" name="mobile"> Mobile phone
           <input type="text" group="contact" name="email"> E-mail
         if the user fills out none of the form fields in the "contact"
         group, an error message is shown and the form is not submitted.
         - Peter-Paul Koch
 v2  * formatting of number fields, text fields, etc, so that when the
       field is not focused, the value is displayed differently. Seems
       like this would also be useful e.g. for <output> or something so
       you can display localised dates, etc.
 v2  * being able to select date range (from day x to day y)
 v2  * ways of visualizing a linefeed in a <textarea> so it looks different
       from wrapping text
 v2  * all login systems have
         1. enter username and password
         2. create new account
         3. lost password
       some way of integrating this into one system, since it's so common
 v2  * way of identifying different sorts of mailadresses
         a) mailing-list
         b) person
         c) department in a company ("support", "marketing" and such)
         d) general mail (like "info", "mail", "contact" and such)
         e) other sorts of groupings
       (or ->web apps; this is talking about in mailto: links, I think)
 v2  * hotswapping login identities like in windows xp
         you are logged in on operamail.com, and you want to check the mail
         of another user. somehow, combined with the wand or whatever,
         the browser will remember the login page, and it can re-submit it
         without having to load the initial page (saving time)
 v2  * provide different measuring systems, like having the html indicate
       fluid in both fluid ounces and liters, and the browser can display
       one or the other based on regional settings in the browser or ui,
       display conversions in a tooltip, or let the user decide which
       format to display.
 v2  * indicate "x days ago" or "y days into the future" rather than date
 v2  * input control for anniversaries
 v2  * only submit fields that have changed, or a way to include in the
       submission a list of which form controls were changed from their
       default value
 v2  * type="time" value="now"
 v2  * add something to type="number" to support basic currency and unit
       formatting of input
 v2  * <fieldset enabled-if-checked="myCheckboxOrRadioButton">
       ...to allow sections to only be enabled if a radio button makes it
       relevant, for instance.
 v2  * Yan Morin proposed a multi-column dropdown <select> or <datalist>:
         _________________
        |_New_York______|V|_________________  <- input  with a table link and a down arrow
        |_City__________|_State_|_Country_|_| <- header of the table
        | Montreal      |  QC   | Canada  |A| <- top arrow of the scroll
        |>New York     <|  NY   | US      | | <- selected row
        | Washington    |  DC   | US      |X| <- cursor scroll
        | San Francisco |  CA   | US      | |
        |_Toronto_______|__ON___|_Canada__|V| <- bottom arrow of the scroll

 v2  * add for="" attribute to <input type="password"> so that you can
       link usernames and passwords. (Jonas Sicking)
 v2  * value for unchecked checkbox?
 v2  * A way to specify the default button - Michael Gratton
 v2  * <fieldset readonly>?
 v2  * dolphinling suggests having a way to mark certain parts of a
       form as being dependent on another (mutually exclusive parts of
       a form)
 v2  * expose the form data set, either as an object (on which one can
       invoke the JSON serialiser), or in the form of a method on
       HTMLFormElement that returns the form data set serialised
       according to a particular encoding (defaulting to the form's
       enctype="" one, probably). This would allow forms to be used
       with XHR-like systems without having to manually construct the
       form data set the way that is done today.
 v2  * expose the file upload progress when uploading files in a form
       (ideally using the same mechanism as XHR2?); ack Rob Evans

Consistency in editorial style:
 v2  * need to become consistent about whether or not to quote keyword
       ("<code title="">foo</code>" vs <code>foo</code>)
 v2  * make the spec consistent about whether the word "algorithm" is part of
       an algorithm's name or not ("</dfn> algorithm", "</span> algorithm")
 v2  * make the spec more consistent about its use of "hexadecimal"
       and "base-sixteen", the order that 0-9 A-Z a-z is mentioned,
       and the detail to which the spec explains how to interpret a
       string as a hexadecimal number.
 v2  * become more consistent about what markup we use to mark up
       productions (nothing? <i>? <code>?)
 v2  * use <code>Document</code> consistently instead of 'document'.
 v2  * be clearer about arrays/lists/collections being zero-based
       despite using the term "/index/th".
 v2  * use the sample widgets:
          <li><img alt="A text field with editable sections for each
          value, with a button to pop up a dialog showing a calendar or
          clock." src="sample-datetime-ui-2"></li>
          <li><img alt="A calendar grid with a clock in the upper right
          hand corner." src="sample-datetime-ui-3"></li>
-->
 </dl></body></html>